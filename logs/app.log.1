2025-05-12 22:31:09,426 - sqlalchemy.engine.Engine - INFO - SELECT token_blacklist.id AS token_blacklist_id, token_blacklist.jti AS token_blacklist_jti, token_blacklist.token_type AS token_blacklist_token_type, token_blacklist.user_id AS token_blacklist_user_id, token_blacklist.revoked_at AS token_blacklist_revoked_at, token_blacklist.expires_at AS token_blacklist_expires_at 
FROM token_blacklist 
WHERE token_blacklist.jti = ?
 LIMIT ? OFFSET ?
2025-05-12 22:31:09,427 - sqlalchemy.engine.Engine - INFO - SELECT token_blacklist.id AS token_blacklist_id, token_blacklist.jti AS token_blacklist_jti, token_blacklist.token_type AS token_blacklist_token_type, token_blacklist.user_id AS token_blacklist_user_id, token_blacklist.revoked_at AS token_blacklist_revoked_at, token_blacklist.expires_at AS token_blacklist_expires_at 
FROM token_blacklist 
WHERE token_blacklist.jti = ?
 LIMIT ? OFFSET ?
2025-05-12 22:31:09,427 - app - INFO - 请求头: {'Host': '127.0.0.1:5000', 'Connection': 'keep-alive', 'Sec-Ch-Ua-Platform': '"Windows"', 'Cache-Control': 'no-cache', 'X-Requested-With': 'XMLHttpRequest', 'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36 Edg/136.0.0.0', 'Accept': 'application/json', 'Sec-Ch-Ua': '"Chromium";v="136", "Microsoft Edge";v="136", "Not.A/Brand";v="99"', 'Sec-Ch-Ua-Mobile': '?0', 'Sec-Fetch-Site': 'same-origin', 'Sec-Fetch-Mode': 'cors', 'Sec-Fetch-Dest': 'empty', 'Referer': 'http://127.0.0.1:5000/projects/detail/1?no_redirect=true&bypass_jwt=true', 'Accept-Encoding': 'gzip, deflate, br, zstd', 'Accept-Language': 'zh-CN,zh;q=0.9,en;q=0.8,en-GB;q=0.7,en-US;q=0.6', 'Cookie': 'access_token_cookie=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJmcmVzaCI6ZmFsc2UsImlhdCI6MTc0NzA2MDI2MSwianRpIjoiMTBjOTBiYjQtZDBmMC00ODIyLThhYzQtMzU2OWUzZWFiY2MwIiwidHlwZSI6ImFjY2VzcyIsInN1YiI6MSwibmJmIjoxNzQ3MDYwMjYxLCJjc3JmIjoiSW1ZMU9ETmhNemRpT1RBME4yVmhPVEF3WmprNE16STBOamxrTmpFME1HRTRaall6TXpoaU0ySWkuYUNJR0pRLmZNdjUyS01sR1FhUko2RWZPNkR3dmtLbkhBYyIsImV4cCI6MTc0NzA2Mzg2MSwiYXVkIjoidGFza19tYW5hZ2VtZW50X3N5c3RlbSIsInVzZXJfY2xhaW1zIjp7InVzZXJuYW1lIjoiYWRtaW4iLCJyb2xlcyI6WyJhZG1pbiJdLCJwZXJtaXNzaW9ucyI6WyJtYW5hZ2VfdXNlcnMiLCJtYW5hZ2Vfcm9sZXMiLCJtYW5hZ2VfYWxsX3Byb2plY3RzIiwibWFuYWdlX3Byb2plY3QiLCJtYW5hZ2VfYWxsX3Rhc2tzIiwibWFuYWdlX3Rhc2siLCJ2aWV3X3Byb2plY3QiLCJ2aWV3X3Rhc2siLCJtYW5hZ2VfcmVzb3VyY2VzIiwibWFuYWdlX3Jpc2tzIiwidmlld19yZXBvcnRzIiwiY3JlYXRlX3Rhc2siLCJhc3NpZ25fdGFzayIsImNoYW5nZV9wcm9qZWN0X3N0YXR1cyIsImNoYW5nZV90YXNrX3N0YXR1cyIsImNyZWF0ZV9wcm9qZWN0Il0sImlzX2FjdGl2ZSI6dHJ1ZX0sInJvbGVzIjpbImFkbWluIl0sImFkbWluIjp0cnVlfQ.fSLpN-0Wyg2yWC20wzWu7hEdMsTLBUzuUzU90nDlnME; csrf_access_token=ImY1ODNhMzdiOTA0N2VhOTAwZjk4MzI0NjlkNjE0MGE4ZjYzMzhiM2Ii.aCIGJQ.fMv52KMlGQaRJ6EfO6DwvkKnHAc; user_roles=admin; is_admin=true; admin=true; admin_role=true; csrf_token=ImY1ODNhMzdiOTA0N2VhOTAwZjk4MzI0NjlkNjE0MGE4ZjYzMzhiM2Ii.aCIGKA.Cvs3OnugC2YuJJf0UQ3dB6v5Srs; session=eyJjc3JmX3Rva2VuIjoiZjU4M2EzN2I5MDQ3ZWE5MDBmOTgzMjQ2OWQ2MTQwYThmNjMzOGIzYiJ9.aCIGLQ.9nPPLkFlUf4k616zVs79uA9_9t4'}
2025-05-12 22:31:09,428 - app - INFO - 访问豁免路由: /api/users, 参数: {}, 方法: GET
2025-05-12 22:31:09,432 - sqlalchemy.engine.Engine - INFO - [cached since 2976s ago] ('10c90bb4-d0f0-4822-8ac4-3569e3eabcc0', 1, 0)
2025-05-12 22:31:09,434 - sqlalchemy.engine.Engine - INFO - [cached since 2976s ago] ('10c90bb4-d0f0-4822-8ac4-3569e3eabcc0', 1, 0)
2025-05-12 22:31:09,434 - app - INFO - 访问豁免路由: /api/users, 参数: {}, 方法: GET
2025-05-12 22:31:09,434 - app - INFO - 处理用户列表请求: 方法=GET
2025-05-12 22:31:09,435 - app.utils.jwt_callbacks - INFO - Token 10c90bb4-d0f0-4822-8ac4-3569e3eabcc0 is valid
2025-05-12 22:31:09,435 - app.utils.jwt_callbacks - INFO - Token 10c90bb4-d0f0-4822-8ac4-3569e3eabcc0 is valid
2025-05-12 22:31:09,436 - app - INFO - 处理用户列表请求: 方法=GET
2025-05-12 22:31:09,436 - app.utils.jwt_callbacks - INFO - Checking if token 10c90bb4-d0f0-4822-8ac4-3569e3eabcc0 is in blocklist
2025-05-12 22:31:09,437 - app.utils.jwt_callbacks - INFO - Verifying token
2025-05-12 22:31:09,438 - app.utils.jwt_callbacks - INFO - Verifying token
2025-05-12 22:31:09,441 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-05-12 22:31:09,438 - app.utils.jwt_callbacks - INFO - Checking if token 10c90bb4-d0f0-4822-8ac4-3569e3eabcc0 is in blocklist
2025-05-12 22:31:09,441 - app.utils.jwt_callbacks - INFO - JWT Header: {'alg': 'HS256', 'typ': 'JWT'}
2025-05-12 22:31:09,442 - app.utils.jwt_callbacks - INFO - JWT Header: {'alg': 'HS256', 'typ': 'JWT'}
2025-05-12 22:31:09,442 - sqlalchemy.engine.Engine - INFO - SELECT token_blacklist.id AS token_blacklist_id, token_blacklist.jti AS token_blacklist_jti, token_blacklist.token_type AS token_blacklist_token_type, token_blacklist.user_id AS token_blacklist_user_id, token_blacklist.revoked_at AS token_blacklist_revoked_at, token_blacklist.expires_at AS token_blacklist_expires_at 
FROM token_blacklist 
WHERE token_blacklist.jti = ?
 LIMIT ? OFFSET ?
2025-05-12 22:31:09,445 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-05-12 22:31:09,445 - app.utils.jwt_callbacks - INFO - JWT Data: {'fresh': False, 'iat': 1747060261, 'jti': '10c90bb4-d0f0-4822-8ac4-3569e3eabcc0', 'type': 'access', 'sub': 1, 'nbf': 1747060261, 'csrf': 'ImY1ODNhMzdiOTA0N2VhOTAwZjk4MzI0NjlkNjE0MGE4ZjYzMzhiM2Ii.aCIGJQ.fMv52KMlGQaRJ6EfO6DwvkKnHAc', 'exp': 1747063861, 'aud': 'task_management_system', 'user_claims': {'username': 'admin', 'roles': ['admin'], 'permissions': ['manage_users', 'manage_roles', 'manage_all_projects', 'manage_project', 'manage_all_tasks', 'manage_task', 'view_project', 'view_task', 'manage_resources', 'manage_risks', 'view_reports', 'create_task', 'assign_task', 'change_project_status', 'change_task_status', 'create_project'], 'is_active': True}, 'roles': ['admin'], 'admin': True}
2025-05-12 22:31:09,446 - sqlalchemy.engine.Engine - INFO - [cached since 2976s ago] ('10c90bb4-d0f0-4822-8ac4-3569e3eabcc0', 1, 0)
2025-05-12 22:31:09,446 - app.utils.jwt_callbacks - INFO - JWT Data: {'fresh': False, 'iat': 1747060261, 'jti': '10c90bb4-d0f0-4822-8ac4-3569e3eabcc0', 'type': 'access', 'sub': 1, 'nbf': 1747060261, 'csrf': 'ImY1ODNhMzdiOTA0N2VhOTAwZjk4MzI0NjlkNjE0MGE4ZjYzMzhiM2Ii.aCIGJQ.fMv52KMlGQaRJ6EfO6DwvkKnHAc', 'exp': 1747063861, 'aud': 'task_management_system', 'user_claims': {'username': 'admin', 'roles': ['admin'], 'permissions': ['manage_users', 'manage_roles', 'manage_all_projects', 'manage_project', 'manage_all_tasks', 'manage_task', 'view_project', 'view_task', 'manage_resources', 'manage_risks', 'view_reports', 'create_task', 'assign_task', 'change_project_status', 'change_task_status', 'create_project'], 'is_active': True}, 'roles': ['admin'], 'admin': True}
2025-05-12 22:31:09,447 - sqlalchemy.engine.Engine - INFO - SELECT token_blacklist.id AS token_blacklist_id, token_blacklist.jti AS token_blacklist_jti, token_blacklist.token_type AS token_blacklist_token_type, token_blacklist.user_id AS token_blacklist_user_id, token_blacklist.revoked_at AS token_blacklist_revoked_at, token_blacklist.expires_at AS token_blacklist_expires_at 
FROM token_blacklist 
WHERE token_blacklist.jti = ?
 LIMIT ? OFFSET ?
2025-05-12 22:31:09,448 - app.utils.jwt_callbacks - INFO - Token time difference: -8.44808 seconds
2025-05-12 22:31:09,450 - sqlalchemy.engine.Engine - INFO - [cached since 2976s ago] ('10c90bb4-d0f0-4822-8ac4-3569e3eabcc0', 1, 0)
2025-05-12 22:31:09,449 - app.utils.jwt_callbacks - INFO - Token 10c90bb4-d0f0-4822-8ac4-3569e3eabcc0 is valid
2025-05-12 22:31:09,450 - app.utils.jwt_callbacks - INFO - Token time difference: -8.450134 seconds
2025-05-12 22:31:09,450 - app.utils.jwt_callbacks - INFO - Token verification successful
2025-05-12 22:31:09,452 - app.utils.jwt_callbacks - INFO - Token 10c90bb4-d0f0-4822-8ac4-3569e3eabcc0 is valid
2025-05-12 22:31:09,452 - app.utils.jwt_callbacks - INFO - Verifying token
2025-05-12 22:31:09,452 - app.utils.jwt_callbacks - INFO - Token verification successful
2025-05-12 22:31:09,453 - app.utils.jwt_callbacks - INFO - Looking up user with identity: 1
2025-05-12 22:31:09,453 - app.utils.jwt_callbacks - INFO - Verifying token
2025-05-12 22:31:09,453 - app.utils.jwt_callbacks - INFO - Looking up user with identity: 1
2025-05-12 22:31:09,454 - sqlalchemy.engine.Engine - INFO - SELECT users.id AS users_id, users.username AS users_username, users.email AS users_email, users.name AS users_name, users.password_hash AS users_password_hash, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.last_login AS users_last_login 
FROM users 
WHERE users.id = ?
2025-05-12 22:31:09,453 - app.utils.jwt_callbacks - INFO - JWT Header: {'alg': 'HS256', 'typ': 'JWT'}
2025-05-12 22:31:09,455 - app.utils.jwt_callbacks - INFO - JWT Header: {'alg': 'HS256', 'typ': 'JWT'}
2025-05-12 22:31:09,455 - sqlalchemy.engine.Engine - INFO - SELECT users.id AS users_id, users.username AS users_username, users.email AS users_email, users.name AS users_name, users.password_hash AS users_password_hash, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.last_login AS users_last_login 
FROM users 
WHERE users.id = ?
2025-05-12 22:31:09,456 - sqlalchemy.engine.Engine - INFO - [cached since 2976s ago] (1,)
2025-05-12 22:31:09,456 - app.utils.jwt_callbacks - INFO - JWT Data: {'fresh': False, 'iat': 1747060261, 'jti': '10c90bb4-d0f0-4822-8ac4-3569e3eabcc0', 'type': 'access', 'sub': 1, 'nbf': 1747060261, 'csrf': 'ImY1ODNhMzdiOTA0N2VhOTAwZjk4MzI0NjlkNjE0MGE4ZjYzMzhiM2Ii.aCIGJQ.fMv52KMlGQaRJ6EfO6DwvkKnHAc', 'exp': 1747063861, 'aud': 'task_management_system', 'user_claims': {'username': 'admin', 'roles': ['admin'], 'permissions': ['manage_users', 'manage_roles', 'manage_all_projects', 'manage_project', 'manage_all_tasks', 'manage_task', 'view_project', 'view_task', 'manage_resources', 'manage_risks', 'view_reports', 'create_task', 'assign_task', 'change_project_status', 'change_task_status', 'create_project'], 'is_active': True}, 'roles': ['admin'], 'admin': True}
2025-05-12 22:31:09,457 - app.utils.jwt_callbacks - INFO - JWT Data: {'fresh': False, 'iat': 1747060261, 'jti': '10c90bb4-d0f0-4822-8ac4-3569e3eabcc0', 'type': 'access', 'sub': 1, 'nbf': 1747060261, 'csrf': 'ImY1ODNhMzdiOTA0N2VhOTAwZjk4MzI0NjlkNjE0MGE4ZjYzMzhiM2Ii.aCIGJQ.fMv52KMlGQaRJ6EfO6DwvkKnHAc', 'exp': 1747063861, 'aud': 'task_management_system', 'user_claims': {'username': 'admin', 'roles': ['admin'], 'permissions': ['manage_users', 'manage_roles', 'manage_all_projects', 'manage_project', 'manage_all_tasks', 'manage_task', 'view_project', 'view_task', 'manage_resources', 'manage_risks', 'view_reports', 'create_task', 'assign_task', 'change_project_status', 'change_task_status', 'create_project'], 'is_active': True}, 'roles': ['admin'], 'admin': True}
2025-05-12 22:31:09,458 - sqlalchemy.engine.Engine - INFO - [cached since 2976s ago] (1,)
2025-05-12 22:31:09,460 - app.utils.jwt_callbacks - INFO - Token time difference: -8.460431 seconds
2025-05-12 22:31:09,460 - app.utils.jwt_callbacks - INFO - User found: admin
2025-05-12 22:31:09,460 - app.utils.jwt_callbacks - INFO - Token time difference: -8.460867 seconds
2025-05-12 22:31:09,462 - app.utils.jwt_callbacks - INFO - User found: admin
2025-05-12 22:31:09,462 - app.utils.jwt_callbacks - INFO - Token verification successful
2025-05-12 22:31:09,464 - sqlalchemy.engine.Engine - INFO - SELECT roles.id AS roles_id, roles.name AS roles_name, roles.description AS roles_description, roles.created_at AS roles_created_at 
FROM roles, user_roles 
WHERE ? = user_roles.user_id AND roles.id = user_roles.role_id
2025-05-12 22:31:09,466 - app.utils.jwt_callbacks - INFO - Token verification successful
2025-05-12 22:31:09,466 - sqlalchemy.engine.Engine - INFO - SELECT roles.id AS roles_id, roles.name AS roles_name, roles.description AS roles_description, roles.created_at AS roles_created_at 
FROM roles, user_roles 
WHERE ? = user_roles.user_id AND roles.id = user_roles.role_id
2025-05-12 22:31:09,467 - app.utils.jwt_callbacks - INFO - Looking up user with identity: 1
2025-05-12 22:31:09,467 - sqlalchemy.engine.Engine - INFO - [cached since 2976s ago] (1,)
2025-05-12 22:31:09,467 - sqlalchemy.engine.Engine - INFO - [cached since 2976s ago] (1,)
2025-05-12 22:31:09,467 - app.utils.jwt_callbacks - INFO - Looking up user with identity: 1
2025-05-12 22:31:09,468 - sqlalchemy.engine.Engine - INFO - SELECT users.id AS users_id, users.username AS users_username, users.email AS users_email, users.name AS users_name, users.password_hash AS users_password_hash, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.last_login AS users_last_login 
FROM users 
WHERE users.id = ?
2025-05-12 22:31:09,469 - app.utils.jwt_callbacks - INFO - User roles: ['admin']
2025-05-12 22:31:09,470 - app.utils.jwt_callbacks - INFO - User roles: ['admin']
2025-05-12 22:31:09,471 - sqlalchemy.engine.Engine - INFO - SELECT users.id AS users_id, users.username AS users_username, users.email AS users_email, users.name AS users_name, users.password_hash AS users_password_hash, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.last_login AS users_last_login 
FROM users 
WHERE users.id = ?
2025-05-12 22:31:09,472 - sqlalchemy.engine.Engine - INFO - [cached since 2976s ago] (1,)
2025-05-12 22:31:09,473 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions, role_permissions 
WHERE ? = role_permissions.role_id AND permissions.id = role_permissions.permission_id
2025-05-12 22:31:09,474 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions, role_permissions 
WHERE ? = role_permissions.role_id AND permissions.id = role_permissions.permission_id
2025-05-12 22:31:09,474 - sqlalchemy.engine.Engine - INFO - [cached since 2976s ago] (1,)
2025-05-12 22:31:09,476 - sqlalchemy.engine.Engine - INFO - [cached since 2980s ago] (1,)
2025-05-12 22:31:09,477 - sqlalchemy.engine.Engine - INFO - [cached since 2980s ago] (1,)
2025-05-12 22:31:09,477 - app.utils.jwt_callbacks - INFO - User found: admin
2025-05-12 22:31:09,478 - app.utils.jwt_callbacks - INFO - User found: admin
2025-05-12 22:31:09,479 - app.utils.jwt_callbacks - INFO - User permissions: ['manage_users', 'manage_roles', 'manage_all_projects', 'manage_project', 'manage_all_tasks', 'manage_task', 'view_project', 'view_task', 'manage_resources', 'manage_risks', 'view_reports', 'create_task', 'assign_task', 'change_project_status', 'change_task_status', 'create_project']
2025-05-12 22:31:09,481 - sqlalchemy.engine.Engine - INFO - SELECT roles.id AS roles_id, roles.name AS roles_name, roles.description AS roles_description, roles.created_at AS roles_created_at 
FROM roles, user_roles 
WHERE ? = user_roles.user_id AND roles.id = user_roles.role_id
2025-05-12 22:31:09,480 - app.utils.jwt_callbacks - INFO - User permissions: ['manage_users', 'manage_roles', 'manage_all_projects', 'manage_project', 'manage_all_tasks', 'manage_task', 'view_project', 'view_task', 'manage_resources', 'manage_risks', 'view_reports', 'create_task', 'assign_task', 'change_project_status', 'change_task_status', 'create_project']
2025-05-12 22:31:09,482 - sqlalchemy.engine.Engine - INFO - SELECT roles.id AS roles_id, roles.name AS roles_name, roles.description AS roles_description, roles.created_at AS roles_created_at 
FROM roles, user_roles 
WHERE ? = user_roles.user_id AND roles.id = user_roles.role_id
2025-05-12 22:31:09,483 - sqlalchemy.engine.Engine - INFO - [cached since 2976s ago] (1,)
2025-05-12 22:31:09,482 - app.utils.jwt_callbacks - INFO - Checking if token 10c90bb4-d0f0-4822-8ac4-3569e3eabcc0 is in blocklist
2025-05-12 22:31:09,484 - sqlalchemy.engine.Engine - INFO - [cached since 2976s ago] (1,)
2025-05-12 22:31:09,483 - app.utils.jwt_callbacks - INFO - Checking if token 10c90bb4-d0f0-4822-8ac4-3569e3eabcc0 is in blocklist
2025-05-12 22:31:09,485 - app.utils.jwt_callbacks - INFO - User roles: ['admin']
2025-05-12 22:31:09,486 - sqlalchemy.engine.Engine - INFO - SELECT token_blacklist.id AS token_blacklist_id, token_blacklist.jti AS token_blacklist_jti, token_blacklist.token_type AS token_blacklist_token_type, token_blacklist.user_id AS token_blacklist_user_id, token_blacklist.revoked_at AS token_blacklist_revoked_at, token_blacklist.expires_at AS token_blacklist_expires_at 
FROM token_blacklist 
WHERE token_blacklist.jti = ?
 LIMIT ? OFFSET ?
2025-05-12 22:31:09,489 - sqlalchemy.engine.Engine - INFO - SELECT token_blacklist.id AS token_blacklist_id, token_blacklist.jti AS token_blacklist_jti, token_blacklist.token_type AS token_blacklist_token_type, token_blacklist.user_id AS token_blacklist_user_id, token_blacklist.revoked_at AS token_blacklist_revoked_at, token_blacklist.expires_at AS token_blacklist_expires_at 
FROM token_blacklist 
WHERE token_blacklist.jti = ?
 LIMIT ? OFFSET ?
2025-05-12 22:31:09,491 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions, role_permissions 
WHERE ? = role_permissions.role_id AND permissions.id = role_permissions.permission_id
2025-05-12 22:31:09,489 - app.utils.jwt_callbacks - INFO - User roles: ['admin']
2025-05-12 22:31:09,492 - sqlalchemy.engine.Engine - INFO - [cached since 2976s ago] ('10c90bb4-d0f0-4822-8ac4-3569e3eabcc0', 1, 0)
2025-05-12 22:31:09,492 - sqlalchemy.engine.Engine - INFO - [cached since 2976s ago] ('10c90bb4-d0f0-4822-8ac4-3569e3eabcc0', 1, 0)
2025-05-12 22:31:09,493 - sqlalchemy.engine.Engine - INFO - [cached since 2980s ago] (1,)
2025-05-12 22:31:09,493 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions, role_permissions 
WHERE ? = role_permissions.role_id AND permissions.id = role_permissions.permission_id
2025-05-12 22:31:09,495 - app.utils.jwt_callbacks - INFO - Token 10c90bb4-d0f0-4822-8ac4-3569e3eabcc0 is valid
2025-05-12 22:31:09,495 - app.utils.jwt_callbacks - INFO - Token 10c90bb4-d0f0-4822-8ac4-3569e3eabcc0 is valid
2025-05-12 22:31:09,495 - sqlalchemy.engine.Engine - INFO - [cached since 2980s ago] (1,)
2025-05-12 22:31:09,497 - app.utils.jwt_callbacks - INFO - User permissions: ['manage_users', 'manage_roles', 'manage_all_projects', 'manage_project', 'manage_all_tasks', 'manage_task', 'view_project', 'view_task', 'manage_resources', 'manage_risks', 'view_reports', 'create_task', 'assign_task', 'change_project_status', 'change_task_status', 'create_project']
2025-05-12 22:31:09,497 - app.utils.jwt_callbacks - INFO - Verifying token
2025-05-12 22:31:09,498 - app.utils.jwt_callbacks - INFO - Verifying token
2025-05-12 22:31:09,498 - app.utils.jwt_callbacks - INFO - User permissions: ['manage_users', 'manage_roles', 'manage_all_projects', 'manage_project', 'manage_all_tasks', 'manage_task', 'view_project', 'view_task', 'manage_resources', 'manage_risks', 'view_reports', 'create_task', 'assign_task', 'change_project_status', 'change_task_status', 'create_project']
2025-05-12 22:31:09,499 - app.utils.jwt_callbacks - INFO - Checking if token 10c90bb4-d0f0-4822-8ac4-3569e3eabcc0 is in blocklist
2025-05-12 22:31:09,500 - app.utils.jwt_callbacks - INFO - JWT Header: {'alg': 'HS256', 'typ': 'JWT'}
2025-05-12 22:31:09,499 - app.utils.jwt_callbacks - INFO - JWT Header: {'alg': 'HS256', 'typ': 'JWT'}
2025-05-12 22:31:09,501 - app.utils.jwt_callbacks - INFO - Checking if token 10c90bb4-d0f0-4822-8ac4-3569e3eabcc0 is in blocklist
2025-05-12 22:31:09,503 - sqlalchemy.engine.Engine - INFO - SELECT token_blacklist.id AS token_blacklist_id, token_blacklist.jti AS token_blacklist_jti, token_blacklist.token_type AS token_blacklist_token_type, token_blacklist.user_id AS token_blacklist_user_id, token_blacklist.revoked_at AS token_blacklist_revoked_at, token_blacklist.expires_at AS token_blacklist_expires_at 
FROM token_blacklist 
WHERE token_blacklist.jti = ?
 LIMIT ? OFFSET ?
2025-05-12 22:31:09,503 - app.utils.jwt_callbacks - INFO - JWT Data: {'fresh': False, 'iat': 1747060261, 'jti': '10c90bb4-d0f0-4822-8ac4-3569e3eabcc0', 'type': 'access', 'sub': 1, 'nbf': 1747060261, 'csrf': 'ImY1ODNhMzdiOTA0N2VhOTAwZjk4MzI0NjlkNjE0MGE4ZjYzMzhiM2Ii.aCIGJQ.fMv52KMlGQaRJ6EfO6DwvkKnHAc', 'exp': 1747063861, 'aud': 'task_management_system', 'user_claims': {'username': 'admin', 'roles': ['admin'], 'permissions': ['manage_users', 'manage_roles', 'manage_all_projects', 'manage_project', 'manage_all_tasks', 'manage_task', 'view_project', 'view_task', 'manage_resources', 'manage_risks', 'view_reports', 'create_task', 'assign_task', 'change_project_status', 'change_task_status', 'create_project'], 'is_active': True}, 'roles': ['admin'], 'admin': True}
2025-05-12 22:31:09,505 - sqlalchemy.engine.Engine - INFO - SELECT token_blacklist.id AS token_blacklist_id, token_blacklist.jti AS token_blacklist_jti, token_blacklist.token_type AS token_blacklist_token_type, token_blacklist.user_id AS token_blacklist_user_id, token_blacklist.revoked_at AS token_blacklist_revoked_at, token_blacklist.expires_at AS token_blacklist_expires_at 
FROM token_blacklist 
WHERE token_blacklist.jti = ?
 LIMIT ? OFFSET ?
2025-05-12 22:31:09,503 - app.utils.jwt_callbacks - INFO - JWT Data: {'fresh': False, 'iat': 1747060261, 'jti': '10c90bb4-d0f0-4822-8ac4-3569e3eabcc0', 'type': 'access', 'sub': 1, 'nbf': 1747060261, 'csrf': 'ImY1ODNhMzdiOTA0N2VhOTAwZjk4MzI0NjlkNjE0MGE4ZjYzMzhiM2Ii.aCIGJQ.fMv52KMlGQaRJ6EfO6DwvkKnHAc', 'exp': 1747063861, 'aud': 'task_management_system', 'user_claims': {'username': 'admin', 'roles': ['admin'], 'permissions': ['manage_users', 'manage_roles', 'manage_all_projects', 'manage_project', 'manage_all_tasks', 'manage_task', 'view_project', 'view_task', 'manage_resources', 'manage_risks', 'view_reports', 'create_task', 'assign_task', 'change_project_status', 'change_task_status', 'create_project'], 'is_active': True}, 'roles': ['admin'], 'admin': True}
2025-05-12 22:31:09,507 - sqlalchemy.engine.Engine - INFO - [cached since 2976s ago] ('10c90bb4-d0f0-4822-8ac4-3569e3eabcc0', 1, 0)
2025-05-12 22:31:09,508 - sqlalchemy.engine.Engine - INFO - [cached since 2976s ago] ('10c90bb4-d0f0-4822-8ac4-3569e3eabcc0', 1, 0)
2025-05-12 22:31:09,507 - app.utils.jwt_callbacks - INFO - Token time difference: -8.507001 seconds
2025-05-12 22:31:09,509 - app.utils.jwt_callbacks - INFO - Token time difference: -8.509066 seconds
2025-05-12 22:31:09,510 - app.utils.jwt_callbacks - INFO - Token 10c90bb4-d0f0-4822-8ac4-3569e3eabcc0 is valid
2025-05-12 22:31:09,511 - app.utils.jwt_callbacks - INFO - Token 10c90bb4-d0f0-4822-8ac4-3569e3eabcc0 is valid
2025-05-12 22:31:09,511 - app.utils.jwt_callbacks - INFO - Token verification successful
2025-05-12 22:31:09,511 - app.utils.jwt_callbacks - INFO - Token verification successful
2025-05-12 22:31:09,512 - app.utils.jwt_callbacks - INFO - Verifying token
2025-05-12 22:31:09,512 - app.utils.jwt_callbacks - INFO - Verifying token
2025-05-12 22:31:09,513 - app.utils.jwt_callbacks - INFO - Looking up user with identity: 1
2025-05-12 22:31:09,513 - app.utils.jwt_callbacks - INFO - Looking up user with identity: 1
2025-05-12 22:31:09,513 - app.utils.jwt_callbacks - INFO - JWT Header: {'alg': 'HS256', 'typ': 'JWT'}
2025-05-12 22:31:09,514 - app.utils.jwt_callbacks - INFO - JWT Header: {'alg': 'HS256', 'typ': 'JWT'}
2025-05-12 22:31:09,514 - app.utils.jwt_callbacks - INFO - User found: admin
2025-05-12 22:31:09,515 - app.utils.jwt_callbacks - INFO - User found: admin
2025-05-12 22:31:09,515 - app.utils.jwt_callbacks - INFO - JWT Data: {'fresh': False, 'iat': 1747060261, 'jti': '10c90bb4-d0f0-4822-8ac4-3569e3eabcc0', 'type': 'access', 'sub': 1, 'nbf': 1747060261, 'csrf': 'ImY1ODNhMzdiOTA0N2VhOTAwZjk4MzI0NjlkNjE0MGE4ZjYzMzhiM2Ii.aCIGJQ.fMv52KMlGQaRJ6EfO6DwvkKnHAc', 'exp': 1747063861, 'aud': 'task_management_system', 'user_claims': {'username': 'admin', 'roles': ['admin'], 'permissions': ['manage_users', 'manage_roles', 'manage_all_projects', 'manage_project', 'manage_all_tasks', 'manage_task', 'view_project', 'view_task', 'manage_resources', 'manage_risks', 'view_reports', 'create_task', 'assign_task', 'change_project_status', 'change_task_status', 'create_project'], 'is_active': True}, 'roles': ['admin'], 'admin': True}
2025-05-12 22:31:09,516 - app.utils.jwt_callbacks - INFO - JWT Data: {'fresh': False, 'iat': 1747060261, 'jti': '10c90bb4-d0f0-4822-8ac4-3569e3eabcc0', 'type': 'access', 'sub': 1, 'nbf': 1747060261, 'csrf': 'ImY1ODNhMzdiOTA0N2VhOTAwZjk4MzI0NjlkNjE0MGE4ZjYzMzhiM2Ii.aCIGJQ.fMv52KMlGQaRJ6EfO6DwvkKnHAc', 'exp': 1747063861, 'aud': 'task_management_system', 'user_claims': {'username': 'admin', 'roles': ['admin'], 'permissions': ['manage_users', 'manage_roles', 'manage_all_projects', 'manage_project', 'manage_all_tasks', 'manage_task', 'view_project', 'view_task', 'manage_resources', 'manage_risks', 'view_reports', 'create_task', 'assign_task', 'change_project_status', 'change_task_status', 'create_project'], 'is_active': True}, 'roles': ['admin'], 'admin': True}
2025-05-12 22:31:09,516 - app.utils.jwt_callbacks - INFO - User roles: ['admin']
2025-05-12 22:31:09,517 - app.utils.jwt_callbacks - INFO - User roles: ['admin']
2025-05-12 22:31:09,519 - app.utils.jwt_callbacks - INFO - Token time difference: -8.519592 seconds
2025-05-12 22:31:09,520 - app.utils.jwt_callbacks - INFO - Token time difference: -8.520614 seconds
2025-05-12 22:31:09,521 - app.utils.jwt_callbacks - INFO - User permissions: ['manage_users', 'manage_roles', 'manage_all_projects', 'manage_project', 'manage_all_tasks', 'manage_task', 'view_project', 'view_task', 'manage_resources', 'manage_risks', 'view_reports', 'create_task', 'assign_task', 'change_project_status', 'change_task_status', 'create_project']
2025-05-12 22:31:09,521 - app.utils.jwt_callbacks - INFO - User permissions: ['manage_users', 'manage_roles', 'manage_all_projects', 'manage_project', 'manage_all_tasks', 'manage_task', 'view_project', 'view_task', 'manage_resources', 'manage_risks', 'view_reports', 'create_task', 'assign_task', 'change_project_status', 'change_task_status', 'create_project']
2025-05-12 22:31:09,523 - app.utils.jwt_callbacks - INFO - Token verification successful
2025-05-12 22:31:09,522 - app.utils.jwt_callbacks - INFO - Token verification successful
2025-05-12 22:31:09,524 - sqlalchemy.engine.Engine - INFO - SELECT risks.id AS risks_id, risks.title AS risks_title, risks.description AS risks_description, risks.status AS risks_status, risks.severity AS risks_severity, risks.probability AS risks_probability, risks.impact AS risks_impact, risks.mitigation_plan AS risks_mitigation_plan, risks.contingency_plan AS risks_contingency_plan, risks.created_at AS risks_created_at, risks.updated_at AS risks_updated_at, risks.project_id AS risks_project_id, risks.owner_id AS risks_owner_id, risks.task_id AS risks_task_id 
FROM risks
2025-05-12 22:31:09,526 - sqlalchemy.engine.Engine - INFO - SELECT risks.id AS risks_id, risks.title AS risks_title, risks.description AS risks_description, risks.status AS risks_status, risks.severity AS risks_severity, risks.probability AS risks_probability, risks.impact AS risks_impact, risks.mitigation_plan AS risks_mitigation_plan, risks.contingency_plan AS risks_contingency_plan, risks.created_at AS risks_created_at, risks.updated_at AS risks_updated_at, risks.project_id AS risks_project_id, risks.owner_id AS risks_owner_id, risks.task_id AS risks_task_id 
FROM risks
2025-05-12 22:31:09,526 - app.utils.jwt_callbacks - INFO - Looking up user with identity: 1
2025-05-12 22:31:09,527 - app.utils.jwt_callbacks - INFO - Looking up user with identity: 1
2025-05-12 22:31:09,527 - sqlalchemy.engine.Engine - INFO - [cached since 2974s ago] ()
2025-05-12 22:31:09,527 - sqlalchemy.engine.Engine - INFO - [cached since 2974s ago] ()
2025-05-12 22:31:09,527 - app.utils.jwt_callbacks - INFO - User found: admin
2025-05-12 22:31:09,529 - app.utils.jwt_callbacks - INFO - User found: admin
2025-05-12 22:31:09,530 - sqlalchemy.engine.Engine - INFO - SELECT projects.id AS projects_id, projects.name AS projects_name, projects.description AS projects_description, projects.status AS projects_status, projects.start_date AS projects_start_date, projects.end_date AS projects_end_date, projects.progress AS projects_progress, projects.created_at AS projects_created_at, projects.updated_at AS projects_updated_at, projects.manager_id AS projects_manager_id, projects.owner_id AS projects_owner_id 
FROM projects 
WHERE projects.id = ?
2025-05-12 22:31:09,531 - sqlalchemy.engine.Engine - INFO - SELECT projects.id AS projects_id, projects.name AS projects_name, projects.description AS projects_description, projects.status AS projects_status, projects.start_date AS projects_start_date, projects.end_date AS projects_end_date, projects.progress AS projects_progress, projects.created_at AS projects_created_at, projects.updated_at AS projects_updated_at, projects.manager_id AS projects_manager_id, projects.owner_id AS projects_owner_id 
FROM projects 
WHERE projects.id = ?
2025-05-12 22:31:09,531 - app.utils.jwt_callbacks - INFO - User roles: ['admin']
2025-05-12 22:31:09,532 - sqlalchemy.engine.Engine - INFO - [cached since 2974s ago] (2,)
2025-05-12 22:31:09,532 - app.utils.jwt_callbacks - INFO - User roles: ['admin']
2025-05-12 22:31:09,533 - sqlalchemy.engine.Engine - INFO - [cached since 2974s ago] (2,)
2025-05-12 22:31:09,533 - app.utils.jwt_callbacks - INFO - User permissions: ['manage_users', 'manage_roles', 'manage_all_projects', 'manage_project', 'manage_all_tasks', 'manage_task', 'view_project', 'view_task', 'manage_resources', 'manage_risks', 'view_reports', 'create_task', 'assign_task', 'change_project_status', 'change_task_status', 'create_project']
2025-05-12 22:31:09,536 - sqlalchemy.engine.Engine - INFO - SELECT projects.id AS projects_id, projects.name AS projects_name, projects.description AS projects_description, projects.status AS projects_status, projects.start_date AS projects_start_date, projects.end_date AS projects_end_date, projects.progress AS projects_progress, projects.created_at AS projects_created_at, projects.updated_at AS projects_updated_at, projects.manager_id AS projects_manager_id, projects.owner_id AS projects_owner_id 
FROM projects 
WHERE projects.id = ?
2025-05-12 22:31:09,537 - app.utils.jwt_callbacks - INFO - User permissions: ['manage_users', 'manage_roles', 'manage_all_projects', 'manage_project', 'manage_all_tasks', 'manage_task', 'view_project', 'view_task', 'manage_resources', 'manage_risks', 'view_reports', 'create_task', 'assign_task', 'change_project_status', 'change_task_status', 'create_project']
2025-05-12 22:31:09,539 - sqlalchemy.engine.Engine - INFO - SELECT users.id AS users_id, users.username AS users_username, users.email AS users_email, users.name AS users_name, users.password_hash AS users_password_hash, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.last_login AS users_last_login 
FROM users
 LIMIT ? OFFSET ?
2025-05-12 22:31:09,540 - sqlalchemy.engine.Engine - INFO - SELECT projects.id AS projects_id, projects.name AS projects_name, projects.description AS projects_description, projects.status AS projects_status, projects.start_date AS projects_start_date, projects.end_date AS projects_end_date, projects.progress AS projects_progress, projects.created_at AS projects_created_at, projects.updated_at AS projects_updated_at, projects.manager_id AS projects_manager_id, projects.owner_id AS projects_owner_id 
FROM projects 
WHERE projects.id = ?
2025-05-12 22:31:09,541 - sqlalchemy.engine.Engine - INFO - [cached since 2974s ago] (3,)
2025-05-12 22:31:09,542 - sqlalchemy.engine.Engine - INFO - SELECT users.id AS users_id, users.username AS users_username, users.email AS users_email, users.name AS users_name, users.password_hash AS users_password_hash, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.last_login AS users_last_login 
FROM users
 LIMIT ? OFFSET ?
2025-05-12 22:31:09,542 - sqlalchemy.engine.Engine - INFO - [cached since 1903s ago] (10, 0)
2025-05-12 22:31:09,543 - sqlalchemy.engine.Engine - INFO - [cached since 2974s ago] (3,)
2025-05-12 22:31:09,545 - sqlalchemy.engine.Engine - INFO - SELECT projects.id AS projects_id, projects.name AS projects_name, projects.description AS projects_description, projects.status AS projects_status, projects.start_date AS projects_start_date, projects.end_date AS projects_end_date, projects.progress AS projects_progress, projects.created_at AS projects_created_at, projects.updated_at AS projects_updated_at, projects.manager_id AS projects_manager_id, projects.owner_id AS projects_owner_id 
FROM projects 
WHERE projects.id = ?
2025-05-12 22:31:09,545 - sqlalchemy.engine.Engine - INFO - [cached since 1903s ago] (10, 0)
2025-05-12 22:31:09,546 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM (SELECT users.id AS users_id, users.username AS users_username, users.email AS users_email, users.name AS users_name, users.password_hash AS users_password_hash, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.last_login AS users_last_login 
FROM users) AS anon_1
2025-05-12 22:31:09,547 - sqlalchemy.engine.Engine - INFO - SELECT projects.id AS projects_id, projects.name AS projects_name, projects.description AS projects_description, projects.status AS projects_status, projects.start_date AS projects_start_date, projects.end_date AS projects_end_date, projects.progress AS projects_progress, projects.created_at AS projects_created_at, projects.updated_at AS projects_updated_at, projects.manager_id AS projects_manager_id, projects.owner_id AS projects_owner_id 
FROM projects 
WHERE projects.id = ?
2025-05-12 22:31:09,548 - sqlalchemy.engine.Engine - INFO - [cached since 2974s ago] (1,)
2025-05-12 22:31:09,550 - sqlalchemy.engine.Engine - INFO - [cached since 2974s ago] (1,)
2025-05-12 22:31:09,550 - sqlalchemy.engine.Engine - INFO - [cached since 1903s ago] ()
2025-05-12 22:31:09,550 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM (SELECT users.id AS users_id, users.username AS users_username, users.email AS users_email, users.name AS users_name, users.password_hash AS users_password_hash, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.last_login AS users_last_login 
FROM users) AS anon_1
2025-05-12 22:31:09,553 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-05-12 22:31:09,554 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-05-12 22:31:09,555 - sqlalchemy.engine.Engine - INFO - [cached since 1903s ago] ()
2025-05-12 22:31:09,556 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 22:31:09] "GET /api/risks?project_id=1&bypass_jwt=true&_=1747060269390 HTTP/1.1" 200 -
2025-05-12 22:31:09,557 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions 
WHERE permissions.name = ?
 LIMIT ? OFFSET ?
2025-05-12 22:31:09,558 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 22:31:09] "GET /api/risks?project_id=1&bypass_jwt=true&_=1747060269389 HTTP/1.1" 200 -
2025-05-12 22:31:09,560 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions 
WHERE permissions.name = ?
 LIMIT ? OFFSET ?
2025-05-12 22:31:09,561 - sqlalchemy.engine.Engine - INFO - [cached since 2980s ago] ('manage_users', 1, 0)
2025-05-12 22:31:09,562 - sqlalchemy.engine.Engine - INFO - [cached since 2980s ago] ('manage_users', 1, 0)
2025-05-12 22:31:09,569 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions 
WHERE permissions.name = ?
 LIMIT ? OFFSET ?
2025-05-12 22:31:09,570 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions 
WHERE permissions.name = ?
 LIMIT ? OFFSET ?
2025-05-12 22:31:09,571 - sqlalchemy.engine.Engine - INFO - [cached since 2980s ago] ('manage_roles', 1, 0)
2025-05-12 22:31:09,576 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions 
WHERE permissions.name = ?
 LIMIT ? OFFSET ?
2025-05-12 22:31:09,576 - sqlalchemy.engine.Engine - INFO - [cached since 2980s ago] ('manage_roles', 1, 0)
2025-05-12 22:31:09,577 - sqlalchemy.engine.Engine - INFO - [cached since 2980s ago] ('manage_all_projects', 1, 0)
2025-05-12 22:31:09,579 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions 
WHERE permissions.name = ?
 LIMIT ? OFFSET ?
2025-05-12 22:31:09,580 - sqlalchemy.engine.Engine - INFO - [cached since 2980s ago] ('manage_project', 1, 0)
2025-05-12 22:31:09,582 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions 
WHERE permissions.name = ?
 LIMIT ? OFFSET ?
2025-05-12 22:31:09,585 - sqlalchemy.engine.Engine - INFO - [cached since 2980s ago] ('manage_all_projects', 1, 0)
2025-05-12 22:31:09,587 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions 
WHERE permissions.name = ?
 LIMIT ? OFFSET ?
2025-05-12 22:31:09,589 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions 
WHERE permissions.name = ?
 LIMIT ? OFFSET ?
2025-05-12 22:31:09,590 - sqlalchemy.engine.Engine - INFO - [cached since 2980s ago] ('manage_project', 1, 0)
2025-05-12 22:31:09,590 - sqlalchemy.engine.Engine - INFO - [cached since 2980s ago] ('manage_all_tasks', 1, 0)
2025-05-12 22:31:09,592 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions 
WHERE permissions.name = ?
 LIMIT ? OFFSET ?
2025-05-12 22:31:09,593 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions 
WHERE permissions.name = ?
 LIMIT ? OFFSET ?
2025-05-12 22:31:09,593 - sqlalchemy.engine.Engine - INFO - [cached since 2980s ago] ('manage_all_tasks', 1, 0)
2025-05-12 22:31:09,595 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions 
WHERE permissions.name = ?
 LIMIT ? OFFSET ?
2025-05-12 22:31:09,595 - sqlalchemy.engine.Engine - INFO - [cached since 2980s ago] ('manage_task', 1, 0)
2025-05-12 22:31:09,597 - sqlalchemy.engine.Engine - INFO - [cached since 2980s ago] ('manage_task', 1, 0)
2025-05-12 22:31:09,608 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions 
WHERE permissions.name = ?
 LIMIT ? OFFSET ?
2025-05-12 22:31:09,609 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions 
WHERE permissions.name = ?
 LIMIT ? OFFSET ?
2025-05-12 22:31:09,610 - sqlalchemy.engine.Engine - INFO - [cached since 2980s ago] ('view_project', 1, 0)
2025-05-12 22:31:09,611 - sqlalchemy.engine.Engine - INFO - [cached since 2980s ago] ('view_project', 1, 0)
2025-05-12 22:31:09,615 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions 
WHERE permissions.name = ?
 LIMIT ? OFFSET ?
2025-05-12 22:31:09,615 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions 
WHERE permissions.name = ?
 LIMIT ? OFFSET ?
2025-05-12 22:31:09,617 - sqlalchemy.engine.Engine - INFO - [cached since 2980s ago] ('view_task', 1, 0)
2025-05-12 22:31:09,618 - sqlalchemy.engine.Engine - INFO - [cached since 2980s ago] ('view_task', 1, 0)
2025-05-12 22:31:09,622 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions 
WHERE permissions.name = ?
 LIMIT ? OFFSET ?
2025-05-12 22:31:09,624 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions 
WHERE permissions.name = ?
 LIMIT ? OFFSET ?
2025-05-12 22:31:09,625 - sqlalchemy.engine.Engine - INFO - [cached since 2980s ago] ('manage_resources', 1, 0)
2025-05-12 22:31:09,625 - sqlalchemy.engine.Engine - INFO - [cached since 2980s ago] ('manage_resources', 1, 0)
2025-05-12 22:31:09,629 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions 
WHERE permissions.name = ?
 LIMIT ? OFFSET ?
2025-05-12 22:31:09,630 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions 
WHERE permissions.name = ?
 LIMIT ? OFFSET ?
2025-05-12 22:31:09,631 - sqlalchemy.engine.Engine - INFO - [cached since 2980s ago] ('manage_risks', 1, 0)
2025-05-12 22:31:09,632 - sqlalchemy.engine.Engine - INFO - [cached since 2980s ago] ('manage_risks', 1, 0)
2025-05-12 22:31:09,636 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions 
WHERE permissions.name = ?
 LIMIT ? OFFSET ?
2025-05-12 22:31:09,638 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions 
WHERE permissions.name = ?
 LIMIT ? OFFSET ?
2025-05-12 22:31:09,639 - sqlalchemy.engine.Engine - INFO - [cached since 2980s ago] ('view_reports', 1, 0)
2025-05-12 22:31:09,640 - sqlalchemy.engine.Engine - INFO - [cached since 2980s ago] ('view_reports', 1, 0)
2025-05-12 22:31:09,642 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions 
WHERE permissions.name = ?
 LIMIT ? OFFSET ?
2025-05-12 22:31:09,644 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions 
WHERE permissions.name = ?
 LIMIT ? OFFSET ?
2025-05-12 22:31:09,644 - sqlalchemy.engine.Engine - INFO - [cached since 2980s ago] ('create_task', 1, 0)
2025-05-12 22:31:09,645 - sqlalchemy.engine.Engine - INFO - [cached since 2980s ago] ('create_task', 1, 0)
2025-05-12 22:31:09,647 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions 
WHERE permissions.name = ?
 LIMIT ? OFFSET ?
2025-05-12 22:31:09,649 - sqlalchemy.engine.Engine - INFO - [cached since 2980s ago] ('create_project', 1, 0)
2025-05-12 22:31:09,653 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions 
WHERE permissions.name = ?
 LIMIT ? OFFSET ?
2025-05-12 22:31:09,654 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions 
WHERE permissions.name = ?
 LIMIT ? OFFSET ?
2025-05-12 22:31:09,654 - sqlalchemy.engine.Engine - INFO - [cached since 2980s ago] ('create_project', 1, 0)
2025-05-12 22:31:09,655 - sqlalchemy.engine.Engine - INFO - [cached since 2980s ago] ('assign_task', 1, 0)
2025-05-12 22:31:09,655 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions 
WHERE permissions.name = ?
 LIMIT ? OFFSET ?
2025-05-12 22:31:09,656 - sqlalchemy.engine.Engine - INFO - [cached since 2980s ago] ('assign_task', 1, 0)
2025-05-12 22:31:09,656 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions 
WHERE permissions.name = ?
 LIMIT ? OFFSET ?
2025-05-12 22:31:09,659 - sqlalchemy.engine.Engine - INFO - [cached since 2980s ago] ('change_project_status', 1, 0)
2025-05-12 22:31:09,660 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions 
WHERE permissions.name = ?
 LIMIT ? OFFSET ?
2025-05-12 22:31:09,663 - sqlalchemy.engine.Engine - INFO - [cached since 2980s ago] ('change_project_status', 1, 0)
2025-05-12 22:31:09,665 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions 
WHERE permissions.name = ?
 LIMIT ? OFFSET ?
2025-05-12 22:31:09,668 - sqlalchemy.engine.Engine - INFO - [cached since 2980s ago] ('change_task_status', 1, 0)
2025-05-12 22:31:09,673 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions 
WHERE permissions.name = ?
 LIMIT ? OFFSET ?
2025-05-12 22:31:09,675 - sqlalchemy.engine.Engine - INFO - SELECT roles.id AS roles_id, roles.name AS roles_name, roles.description AS roles_description, roles.created_at AS roles_created_at 
FROM roles, user_roles 
WHERE ? = user_roles.user_id AND roles.id = user_roles.role_id
2025-05-12 22:31:09,676 - sqlalchemy.engine.Engine - INFO - [cached since 2980s ago] ('change_task_status', 1, 0)
2025-05-12 22:31:09,682 - sqlalchemy.engine.Engine - INFO - SELECT roles.id AS roles_id, roles.name AS roles_name, roles.description AS roles_description, roles.created_at AS roles_created_at 
FROM roles, user_roles 
WHERE ? = user_roles.user_id AND roles.id = user_roles.role_id
2025-05-12 22:31:09,683 - sqlalchemy.engine.Engine - INFO - [cached since 2976s ago] (2,)
2025-05-12 22:31:09,684 - sqlalchemy.engine.Engine - INFO - [cached since 2976s ago] (2,)
2025-05-12 22:31:09,689 - sqlalchemy.engine.Engine - INFO - SELECT roles.id AS roles_id, roles.name AS roles_name, roles.description AS roles_description, roles.created_at AS roles_created_at 
FROM roles, user_roles 
WHERE ? = user_roles.user_id AND roles.id = user_roles.role_id
2025-05-12 22:31:09,690 - sqlalchemy.engine.Engine - INFO - [cached since 2976s ago] (3,)
2025-05-12 22:31:09,694 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions, role_permissions 
WHERE ? = role_permissions.role_id AND permissions.id = role_permissions.permission_id
2025-05-12 22:31:09,695 - sqlalchemy.engine.Engine - INFO - [cached since 2980s ago] (2,)
2025-05-12 22:31:09,702 - sqlalchemy.engine.Engine - INFO - SELECT roles.id AS roles_id, roles.name AS roles_name, roles.description AS roles_description, roles.created_at AS roles_created_at 
FROM roles, user_roles 
WHERE ? = user_roles.user_id AND roles.id = user_roles.role_id
2025-05-12 22:31:09,706 - sqlalchemy.engine.Engine - INFO - SELECT roles.id AS roles_id, roles.name AS roles_name, roles.description AS roles_description, roles.created_at AS roles_created_at 
FROM roles, user_roles 
WHERE ? = user_roles.user_id AND roles.id = user_roles.role_id
2025-05-12 22:31:09,707 - sqlalchemy.engine.Engine - INFO - [cached since 2976s ago] (4,)
2025-05-12 22:31:09,708 - sqlalchemy.engine.Engine - INFO - [cached since 2976s ago] (3,)
2025-05-12 22:31:09,710 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions, role_permissions 
WHERE ? = role_permissions.role_id AND permissions.id = role_permissions.permission_id
2025-05-12 22:31:09,711 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions, role_permissions 
WHERE ? = role_permissions.role_id AND permissions.id = role_permissions.permission_id
2025-05-12 22:31:09,711 - sqlalchemy.engine.Engine - INFO - [cached since 2980s ago] (5,)
2025-05-12 22:31:09,712 - sqlalchemy.engine.Engine - INFO - [cached since 2980s ago] (2,)
2025-05-12 22:31:09,713 - sqlalchemy.engine.Engine - INFO - SELECT roles.id AS roles_id, roles.name AS roles_name, roles.description AS roles_description, roles.created_at AS roles_created_at 
FROM roles, user_roles 
WHERE ? = user_roles.user_id AND roles.id = user_roles.role_id
2025-05-12 22:31:09,714 - sqlalchemy.engine.Engine - INFO - SELECT roles.id AS roles_id, roles.name AS roles_name, roles.description AS roles_description, roles.created_at AS roles_created_at 
FROM roles, user_roles 
WHERE ? = user_roles.user_id AND roles.id = user_roles.role_id
2025-05-12 22:31:09,714 - sqlalchemy.engine.Engine - INFO - [cached since 2976s ago] (5,)
2025-05-12 22:31:09,714 - sqlalchemy.engine.Engine - INFO - [cached since 2976s ago] (4,)
2025-05-12 22:31:09,717 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions, role_permissions 
WHERE ? = role_permissions.role_id AND permissions.id = role_permissions.permission_id
2025-05-12 22:31:09,717 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions, role_permissions 
WHERE ? = role_permissions.role_id AND permissions.id = role_permissions.permission_id
2025-05-12 22:31:09,717 - sqlalchemy.engine.Engine - INFO - [cached since 2980s ago] (5,)
2025-05-12 22:31:09,718 - sqlalchemy.engine.Engine - INFO - [cached since 2980s ago] (3,)
2025-05-12 22:31:09,719 - sqlalchemy.engine.Engine - INFO - SELECT roles.id AS roles_id, roles.name AS roles_name, roles.description AS roles_description, roles.created_at AS roles_created_at 
FROM roles, user_roles 
WHERE ? = user_roles.user_id AND roles.id = user_roles.role_id
2025-05-12 22:31:09,721 - sqlalchemy.engine.Engine - INFO - SELECT roles.id AS roles_id, roles.name AS roles_name, roles.description AS roles_description, roles.created_at AS roles_created_at 
FROM roles, user_roles 
WHERE ? = user_roles.user_id AND roles.id = user_roles.role_id
2025-05-12 22:31:09,721 - sqlalchemy.engine.Engine - INFO - [cached since 2976s ago] (5,)
2025-05-12 22:31:09,722 - sqlalchemy.engine.Engine - INFO - [cached since 2976s ago] (6,)
2025-05-12 22:31:09,723 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions, role_permissions 
WHERE ? = role_permissions.role_id AND permissions.id = role_permissions.permission_id
2025-05-12 22:31:09,723 - sqlalchemy.engine.Engine - INFO - [cached since 2980s ago] (3,)
2025-05-12 22:31:09,724 - sqlalchemy.engine.Engine - INFO - SELECT roles.id AS roles_id, roles.name AS roles_name, roles.description AS roles_description, roles.created_at AS roles_created_at 
FROM roles, user_roles 
WHERE ? = user_roles.user_id AND roles.id = user_roles.role_id
2025-05-12 22:31:09,724 - sqlalchemy.engine.Engine - INFO - [cached since 2976s ago] (7,)
2025-05-12 22:31:09,725 - sqlalchemy.engine.Engine - INFO - SELECT roles.id AS roles_id, roles.name AS roles_name, roles.description AS roles_description, roles.created_at AS roles_created_at 
FROM roles, user_roles 
WHERE ? = user_roles.user_id AND roles.id = user_roles.role_id
2025-05-12 22:31:09,726 - sqlalchemy.engine.Engine - INFO - [cached since 2976s ago] (6,)
2025-05-12 22:31:09,727 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions, role_permissions 
WHERE ? = role_permissions.role_id AND permissions.id = role_permissions.permission_id
2025-05-12 22:31:09,727 - sqlalchemy.engine.Engine - INFO - [cached since 2980s ago] (4,)
2025-05-12 22:31:09,730 - sqlalchemy.engine.Engine - INFO - SELECT roles.id AS roles_id, roles.name AS roles_name, roles.description AS roles_description, roles.created_at AS roles_created_at 
FROM roles, user_roles 
WHERE ? = user_roles.user_id AND roles.id = user_roles.role_id
2025-05-12 22:31:09,730 - sqlalchemy.engine.Engine - INFO - [cached since 2976s ago] (7,)
2025-05-12 22:31:09,730 - sqlalchemy.engine.Engine - INFO - SELECT roles.id AS roles_id, roles.name AS roles_name, roles.description AS roles_description, roles.created_at AS roles_created_at 
FROM roles, user_roles 
WHERE ? = user_roles.user_id AND roles.id = user_roles.role_id
2025-05-12 22:31:09,731 - sqlalchemy.engine.Engine - INFO - [cached since 2976s ago] (8,)
2025-05-12 22:31:09,731 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions, role_permissions 
WHERE ? = role_permissions.role_id AND permissions.id = role_permissions.permission_id
2025-05-12 22:31:09,732 - sqlalchemy.engine.Engine - INFO - [cached since 2980s ago] (4,)
2025-05-12 22:31:09,732 - sqlalchemy.engine.Engine - INFO - SELECT roles.id AS roles_id, roles.name AS roles_name, roles.description AS roles_description, roles.created_at AS roles_created_at 
FROM roles, user_roles 
WHERE ? = user_roles.user_id AND roles.id = user_roles.role_id
2025-05-12 22:31:09,733 - sqlalchemy.engine.Engine - INFO - [cached since 2976s ago] (9,)
2025-05-12 22:31:09,733 - sqlalchemy.engine.Engine - INFO - SELECT roles.id AS roles_id, roles.name AS roles_name, roles.description AS roles_description, roles.created_at AS roles_created_at 
FROM roles, user_roles 
WHERE ? = user_roles.user_id AND roles.id = user_roles.role_id
2025-05-12 22:31:09,733 - sqlalchemy.engine.Engine - INFO - [cached since 2976s ago] (8,)
2025-05-12 22:31:09,735 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-05-12 22:31:09,735 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 22:31:09] "GET /api/users?bypass_jwt=true&_=1747060269390 HTTP/1.1" 200 -
2025-05-12 22:31:09,736 - sqlalchemy.engine.Engine - INFO - SELECT roles.id AS roles_id, roles.name AS roles_name, roles.description AS roles_description, roles.created_at AS roles_created_at 
FROM roles, user_roles 
WHERE ? = user_roles.user_id AND roles.id = user_roles.role_id
2025-05-12 22:31:09,736 - sqlalchemy.engine.Engine - INFO - [cached since 2976s ago] (9,)
2025-05-12 22:31:09,738 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-05-12 22:31:09,738 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 22:31:09] "GET /api/users?bypass_jwt=true&_=1747060269389 HTTP/1.1" 200 -
2025-05-12 22:31:11,100 - app - WARNING - 绕过JWT验证: /api/global/users
2025-05-12 22:31:11,103 - app - WARNING - 绕过JWT验证: /api/global/users
2025-05-12 22:31:11,104 - app - WARNING - 绕过JWT验证: /api/global/users
2025-05-12 22:31:11,105 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 22:31:11] "[33mGET /api/global/users?bypass_jwt=true&_=1747060271098 HTTP/1.1[0m" 404 -
2025-05-12 22:31:11,105 - app - WARNING - 绕过JWT验证: /api/global/users
2025-05-12 22:31:11,106 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 22:31:11] "[33mGET /api/global/users?bypass_jwt=true&_=1747060271099 HTTP/1.1[0m" 404 -
2025-05-12 22:31:11,106 - app - WARNING - 绕过JWT验证: /api/global/users
2025-05-12 22:31:11,107 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 22:31:11] "[33mGET /api/global/users?bypass_jwt=true&_=1747060271100 HTTP/1.1[0m" 404 -
2025-05-12 22:31:11,108 - app - WARNING - 绕过JWT验证: /api/global/users
2025-05-12 22:31:11,109 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 22:31:11] "[33mGET /api/global/users?bypass_jwt=true&_=1747060271101 HTTP/1.1[0m" 404 -
2025-05-12 22:31:11,111 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 22:31:11] "[33mGET /api/global/users?bypass_jwt=true&_=1747060271102 HTTP/1.1[0m" 404 -
2025-05-12 22:31:11,113 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 22:31:11] "[33mGET /api/global/users?bypass_jwt=true&_=1747060271103 HTTP/1.1[0m" 404 -
2025-05-12 22:31:11,117 - app - WARNING - 绕过JWT验证: /api/global/users
2025-05-12 22:31:11,120 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 22:31:11] "[33mGET /api/global/users?bypass_jwt=true&_=1747060271102 HTTP/1.1[0m" 404 -
2025-05-12 22:31:41,593 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 22:31:41] "[36mGET /static/css/bootstrap.min.css HTTP/1.1[0m" 304 -
2025-05-12 22:31:41,594 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 22:31:41] "[36mGET /static/css/bootstrap-icons.css HTTP/1.1[0m" 304 -
2025-05-12 22:31:41,596 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 22:31:41] "[36mGET /static/css/style.css HTTP/1.1[0m" 304 -
2025-05-12 22:31:41,605 - app.utils.jwt_callbacks - INFO - Checking if token 10c90bb4-d0f0-4822-8ac4-3569e3eabcc0 is in blocklist
2025-05-12 22:31:41,606 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-05-12 22:31:41,607 - sqlalchemy.engine.Engine - INFO - SELECT token_blacklist.id AS token_blacklist_id, token_blacklist.jti AS token_blacklist_jti, token_blacklist.token_type AS token_blacklist_token_type, token_blacklist.user_id AS token_blacklist_user_id, token_blacklist.revoked_at AS token_blacklist_revoked_at, token_blacklist.expires_at AS token_blacklist_expires_at 
FROM token_blacklist 
WHERE token_blacklist.jti = ?
 LIMIT ? OFFSET ?
2025-05-12 22:31:41,607 - sqlalchemy.engine.Engine - INFO - [cached since 3008s ago] ('10c90bb4-d0f0-4822-8ac4-3569e3eabcc0', 1, 0)
2025-05-12 22:31:41,608 - app.utils.jwt_callbacks - INFO - Token 10c90bb4-d0f0-4822-8ac4-3569e3eabcc0 is valid
2025-05-12 22:31:41,608 - app.utils.jwt_callbacks - INFO - Verifying token
2025-05-12 22:31:41,609 - app.utils.jwt_callbacks - INFO - JWT Header: {'alg': 'HS256', 'typ': 'JWT'}
2025-05-12 22:31:41,609 - app.utils.jwt_callbacks - INFO - JWT Data: {'fresh': False, 'iat': 1747060261, 'jti': '10c90bb4-d0f0-4822-8ac4-3569e3eabcc0', 'type': 'access', 'sub': 1, 'nbf': 1747060261, 'csrf': 'ImY1ODNhMzdiOTA0N2VhOTAwZjk4MzI0NjlkNjE0MGE4ZjYzMzhiM2Ii.aCIGJQ.fMv52KMlGQaRJ6EfO6DwvkKnHAc', 'exp': 1747063861, 'aud': 'task_management_system', 'user_claims': {'username': 'admin', 'roles': ['admin'], 'permissions': ['manage_users', 'manage_roles', 'manage_all_projects', 'manage_project', 'manage_all_tasks', 'manage_task', 'view_project', 'view_task', 'manage_resources', 'manage_risks', 'view_reports', 'create_task', 'assign_task', 'change_project_status', 'change_task_status', 'create_project'], 'is_active': True}, 'roles': ['admin'], 'admin': True}
2025-05-12 22:31:41,610 - app.utils.jwt_callbacks - INFO - Token time difference: -40.610329 seconds
2025-05-12 22:31:41,610 - app.utils.jwt_callbacks - INFO - Token verification successful
2025-05-12 22:31:41,611 - app.utils.jwt_callbacks - INFO - Looking up user with identity: 1
2025-05-12 22:31:41,612 - sqlalchemy.engine.Engine - INFO - SELECT users.id AS users_id, users.username AS users_username, users.email AS users_email, users.name AS users_name, users.password_hash AS users_password_hash, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.last_login AS users_last_login 
FROM users 
WHERE users.id = ?
2025-05-12 22:31:41,612 - sqlalchemy.engine.Engine - INFO - [cached since 3008s ago] (1,)
2025-05-12 22:31:41,613 - app.utils.jwt_callbacks - INFO - User found: admin
2025-05-12 22:31:41,613 - sqlalchemy.engine.Engine - INFO - SELECT roles.id AS roles_id, roles.name AS roles_name, roles.description AS roles_description, roles.created_at AS roles_created_at 
FROM roles, user_roles 
WHERE ? = user_roles.user_id AND roles.id = user_roles.role_id
2025-05-12 22:31:41,614 - sqlalchemy.engine.Engine - INFO - [cached since 3008s ago] (1,)
2025-05-12 22:31:41,614 - app.utils.jwt_callbacks - INFO - User roles: ['admin']
2025-05-12 22:31:41,615 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions, role_permissions 
WHERE ? = role_permissions.role_id AND permissions.id = role_permissions.permission_id
2025-05-12 22:31:41,615 - sqlalchemy.engine.Engine - INFO - [cached since 3012s ago] (1,)
2025-05-12 22:31:41,616 - app.utils.jwt_callbacks - INFO - User permissions: ['manage_users', 'manage_roles', 'manage_all_projects', 'manage_project', 'manage_all_tasks', 'manage_task', 'view_project', 'view_task', 'manage_resources', 'manage_risks', 'view_reports', 'create_task', 'assign_task', 'change_project_status', 'change_task_status', 'create_project']
2025-05-12 22:31:41,617 - app.utils.jwt_callbacks - INFO - Checking if token 10c90bb4-d0f0-4822-8ac4-3569e3eabcc0 is in blocklist
2025-05-12 22:31:41,618 - sqlalchemy.engine.Engine - INFO - SELECT token_blacklist.id AS token_blacklist_id, token_blacklist.jti AS token_blacklist_jti, token_blacklist.token_type AS token_blacklist_token_type, token_blacklist.user_id AS token_blacklist_user_id, token_blacklist.revoked_at AS token_blacklist_revoked_at, token_blacklist.expires_at AS token_blacklist_expires_at 
FROM token_blacklist 
WHERE token_blacklist.jti = ?
 LIMIT ? OFFSET ?
2025-05-12 22:31:41,618 - sqlalchemy.engine.Engine - INFO - [cached since 3008s ago] ('10c90bb4-d0f0-4822-8ac4-3569e3eabcc0', 1, 0)
2025-05-12 22:31:41,619 - app.utils.jwt_callbacks - INFO - Token 10c90bb4-d0f0-4822-8ac4-3569e3eabcc0 is valid
2025-05-12 22:31:41,620 - app.utils.jwt_callbacks - INFO - Verifying token
2025-05-12 22:31:41,621 - app.utils.jwt_callbacks - INFO - JWT Header: {'alg': 'HS256', 'typ': 'JWT'}
2025-05-12 22:31:41,621 - app.utils.jwt_callbacks - INFO - JWT Data: {'fresh': False, 'iat': 1747060261, 'jti': '10c90bb4-d0f0-4822-8ac4-3569e3eabcc0', 'type': 'access', 'sub': 1, 'nbf': 1747060261, 'csrf': 'ImY1ODNhMzdiOTA0N2VhOTAwZjk4MzI0NjlkNjE0MGE4ZjYzMzhiM2Ii.aCIGJQ.fMv52KMlGQaRJ6EfO6DwvkKnHAc', 'exp': 1747063861, 'aud': 'task_management_system', 'user_claims': {'username': 'admin', 'roles': ['admin'], 'permissions': ['manage_users', 'manage_roles', 'manage_all_projects', 'manage_project', 'manage_all_tasks', 'manage_task', 'view_project', 'view_task', 'manage_resources', 'manage_risks', 'view_reports', 'create_task', 'assign_task', 'change_project_status', 'change_task_status', 'create_project'], 'is_active': True}, 'roles': ['admin'], 'admin': True}
2025-05-12 22:31:41,623 - app.utils.jwt_callbacks - INFO - Token time difference: -40.623044 seconds
2025-05-12 22:31:41,623 - app.utils.jwt_callbacks - INFO - Token verification successful
2025-05-12 22:31:41,623 - app.utils.jwt_callbacks - INFO - Looking up user with identity: 1
2025-05-12 22:31:41,624 - app.utils.jwt_callbacks - INFO - User found: admin
2025-05-12 22:31:41,624 - app.utils.jwt_callbacks - INFO - User roles: ['admin']
2025-05-12 22:31:41,624 - app.utils.jwt_callbacks - INFO - User permissions: ['manage_users', 'manage_roles', 'manage_all_projects', 'manage_project', 'manage_all_tasks', 'manage_task', 'view_project', 'view_task', 'manage_resources', 'manage_risks', 'view_reports', 'create_task', 'assign_task', 'change_project_status', 'change_task_status', 'create_project']
2025-05-12 22:31:41,625 - app - INFO - 用户已认证，重定向到仪表板页面: /.well-known/appspecific/com.chrome.devtools.json
2025-05-12 22:31:41,625 - app - INFO - 设置重定向跟踪: 路径=/.well-known/appspecific/com.chrome.devtools.json, 计数=1
2025-05-12 22:31:41,626 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-05-12 22:31:41,627 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 22:31:41] "[32mGET /.well-known/appspecific/com.chrome.devtools.json HTTP/1.1[0m" 302 -
2025-05-12 22:31:41,630 - app.utils.jwt_callbacks - INFO - Checking if token 10c90bb4-d0f0-4822-8ac4-3569e3eabcc0 is in blocklist
2025-05-12 22:31:41,631 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-05-12 22:31:41,632 - sqlalchemy.engine.Engine - INFO - SELECT token_blacklist.id AS token_blacklist_id, token_blacklist.jti AS token_blacklist_jti, token_blacklist.token_type AS token_blacklist_token_type, token_blacklist.user_id AS token_blacklist_user_id, token_blacklist.revoked_at AS token_blacklist_revoked_at, token_blacklist.expires_at AS token_blacklist_expires_at 
FROM token_blacklist 
WHERE token_blacklist.jti = ?
 LIMIT ? OFFSET ?
2025-05-12 22:31:41,632 - sqlalchemy.engine.Engine - INFO - [cached since 3008s ago] ('10c90bb4-d0f0-4822-8ac4-3569e3eabcc0', 1, 0)
2025-05-12 22:31:41,633 - app.utils.jwt_callbacks - INFO - Token 10c90bb4-d0f0-4822-8ac4-3569e3eabcc0 is valid
2025-05-12 22:31:41,633 - app.utils.jwt_callbacks - INFO - Verifying token
2025-05-12 22:31:41,634 - app.utils.jwt_callbacks - INFO - JWT Header: {'alg': 'HS256', 'typ': 'JWT'}
2025-05-12 22:31:41,634 - app.utils.jwt_callbacks - INFO - JWT Data: {'fresh': False, 'iat': 1747060261, 'jti': '10c90bb4-d0f0-4822-8ac4-3569e3eabcc0', 'type': 'access', 'sub': 1, 'nbf': 1747060261, 'csrf': 'ImY1ODNhMzdiOTA0N2VhOTAwZjk4MzI0NjlkNjE0MGE4ZjYzMzhiM2Ii.aCIGJQ.fMv52KMlGQaRJ6EfO6DwvkKnHAc', 'exp': 1747063861, 'aud': 'task_management_system', 'user_claims': {'username': 'admin', 'roles': ['admin'], 'permissions': ['manage_users', 'manage_roles', 'manage_all_projects', 'manage_project', 'manage_all_tasks', 'manage_task', 'view_project', 'view_task', 'manage_resources', 'manage_risks', 'view_reports', 'create_task', 'assign_task', 'change_project_status', 'change_task_status', 'create_project'], 'is_active': True}, 'roles': ['admin'], 'admin': True}
2025-05-12 22:31:41,635 - app.utils.jwt_callbacks - INFO - Token time difference: -40.635286 seconds
2025-05-12 22:31:41,636 - app.utils.jwt_callbacks - INFO - Token verification successful
2025-05-12 22:31:41,637 - app.utils.jwt_callbacks - INFO - Looking up user with identity: 1
2025-05-12 22:31:41,638 - sqlalchemy.engine.Engine - INFO - SELECT users.id AS users_id, users.username AS users_username, users.email AS users_email, users.name AS users_name, users.password_hash AS users_password_hash, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.last_login AS users_last_login 
FROM users 
WHERE users.id = ?
2025-05-12 22:31:41,638 - sqlalchemy.engine.Engine - INFO - [cached since 3008s ago] (1,)
2025-05-12 22:31:41,639 - app.utils.jwt_callbacks - INFO - User found: admin
2025-05-12 22:31:41,640 - sqlalchemy.engine.Engine - INFO - SELECT roles.id AS roles_id, roles.name AS roles_name, roles.description AS roles_description, roles.created_at AS roles_created_at 
FROM roles, user_roles 
WHERE ? = user_roles.user_id AND roles.id = user_roles.role_id
2025-05-12 22:31:41,641 - sqlalchemy.engine.Engine - INFO - [cached since 3008s ago] (1,)
2025-05-12 22:31:41,641 - app.utils.jwt_callbacks - INFO - User roles: ['admin']
2025-05-12 22:31:41,642 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions, role_permissions 
WHERE ? = role_permissions.role_id AND permissions.id = role_permissions.permission_id
2025-05-12 22:31:41,643 - sqlalchemy.engine.Engine - INFO - [cached since 3012s ago] (1,)
2025-05-12 22:31:41,644 - app.utils.jwt_callbacks - INFO - User permissions: ['manage_users', 'manage_roles', 'manage_all_projects', 'manage_project', 'manage_all_tasks', 'manage_task', 'view_project', 'view_task', 'manage_resources', 'manage_risks', 'view_reports', 'create_task', 'assign_task', 'change_project_status', 'change_task_status', 'create_project']
2025-05-12 22:31:41,645 - app.utils.jwt_callbacks - INFO - Checking if token 10c90bb4-d0f0-4822-8ac4-3569e3eabcc0 is in blocklist
2025-05-12 22:31:41,646 - sqlalchemy.engine.Engine - INFO - SELECT token_blacklist.id AS token_blacklist_id, token_blacklist.jti AS token_blacklist_jti, token_blacklist.token_type AS token_blacklist_token_type, token_blacklist.user_id AS token_blacklist_user_id, token_blacklist.revoked_at AS token_blacklist_revoked_at, token_blacklist.expires_at AS token_blacklist_expires_at 
FROM token_blacklist 
WHERE token_blacklist.jti = ?
 LIMIT ? OFFSET ?
2025-05-12 22:31:41,647 - sqlalchemy.engine.Engine - INFO - [cached since 3008s ago] ('10c90bb4-d0f0-4822-8ac4-3569e3eabcc0', 1, 0)
2025-05-12 22:31:41,648 - app.utils.jwt_callbacks - INFO - Token 10c90bb4-d0f0-4822-8ac4-3569e3eabcc0 is valid
2025-05-12 22:31:41,649 - app.utils.jwt_callbacks - INFO - Verifying token
2025-05-12 22:31:41,649 - app.utils.jwt_callbacks - INFO - JWT Header: {'alg': 'HS256', 'typ': 'JWT'}
2025-05-12 22:31:41,650 - app.utils.jwt_callbacks - INFO - JWT Data: {'fresh': False, 'iat': 1747060261, 'jti': '10c90bb4-d0f0-4822-8ac4-3569e3eabcc0', 'type': 'access', 'sub': 1, 'nbf': 1747060261, 'csrf': 'ImY1ODNhMzdiOTA0N2VhOTAwZjk4MzI0NjlkNjE0MGE4ZjYzMzhiM2Ii.aCIGJQ.fMv52KMlGQaRJ6EfO6DwvkKnHAc', 'exp': 1747063861, 'aud': 'task_management_system', 'user_claims': {'username': 'admin', 'roles': ['admin'], 'permissions': ['manage_users', 'manage_roles', 'manage_all_projects', 'manage_project', 'manage_all_tasks', 'manage_task', 'view_project', 'view_task', 'manage_resources', 'manage_risks', 'view_reports', 'create_task', 'assign_task', 'change_project_status', 'change_task_status', 'create_project'], 'is_active': True}, 'roles': ['admin'], 'admin': True}
2025-05-12 22:31:41,651 - app.utils.jwt_callbacks - INFO - Token time difference: -40.651812 seconds
2025-05-12 22:31:41,652 - app.utils.jwt_callbacks - INFO - Token verification successful
2025-05-12 22:31:41,652 - app.utils.jwt_callbacks - INFO - Looking up user with identity: 1
2025-05-12 22:31:41,654 - app.utils.jwt_callbacks - INFO - User found: admin
2025-05-12 22:31:41,654 - app.utils.jwt_callbacks - INFO - User roles: ['admin']
2025-05-12 22:31:41,655 - app.utils.jwt_callbacks - INFO - User permissions: ['manage_users', 'manage_roles', 'manage_all_projects', 'manage_project', 'manage_all_tasks', 'manage_task', 'view_project', 'view_task', 'manage_resources', 'manage_risks', 'view_reports', 'create_task', 'assign_task', 'change_project_status', 'change_task_status', 'create_project']
2025-05-12 22:31:41,655 - app - INFO - Dashboard access with user ID: 1
2025-05-12 22:31:41,656 - app - INFO - 用户 admin 是否为管理员: True
2025-05-12 22:31:41,656 - app - INFO - Token found in: cookies
2025-05-12 22:31:41,657 - app - INFO - Dashboard for user admin: roles=['admin'], permissions=['manage_users', 'view_project', 'manage_risks', 'manage_all_tasks', 'assign_task', 'manage_task', 'change_project_status', 'create_project', 'change_task_status', 'manage_roles', 'manage_all_projects', 'manage_resources', 'create_task', 'manage_project', 'view_reports', 'view_task']
2025-05-12 22:31:41,659 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-05-12 22:31:41,660 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 22:31:41] "GET /dashboard HTTP/1.1" 200 -
2025-05-12 22:31:41,685 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 22:31:41] "GET /static/css/bootstrap.min.css.map HTTP/1.1" 200 -
2025-05-12 22:31:41,689 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 22:31:41] "[36mGET /static/css/bootstrap.min.css.map HTTP/1.1[0m" 304 -
2025-05-12 22:31:41,747 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 22:31:41] "GET /static/js/bootstrap.bundle.min.js.map HTTP/1.1" 200 -
2025-05-12 22:31:54,767 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 22:31:54] "[36mGET /static/favicon.ico HTTP/1.1[0m" 304 -
2025-05-12 22:31:54,775 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 22:31:54] "[36mGET /static/css/bootstrap.min.css.map HTTP/1.1[0m" 304 -
2025-05-12 22:31:54,776 - app.utils.jwt_callbacks - INFO - Checking if token 10c90bb4-d0f0-4822-8ac4-3569e3eabcc0 is in blocklist
2025-05-12 22:31:54,778 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-05-12 22:31:54,779 - sqlalchemy.engine.Engine - INFO - SELECT token_blacklist.id AS token_blacklist_id, token_blacklist.jti AS token_blacklist_jti, token_blacklist.token_type AS token_blacklist_token_type, token_blacklist.user_id AS token_blacklist_user_id, token_blacklist.revoked_at AS token_blacklist_revoked_at, token_blacklist.expires_at AS token_blacklist_expires_at 
FROM token_blacklist 
WHERE token_blacklist.jti = ?
 LIMIT ? OFFSET ?
2025-05-12 22:31:54,780 - sqlalchemy.engine.Engine - INFO - [cached since 3021s ago] ('10c90bb4-d0f0-4822-8ac4-3569e3eabcc0', 1, 0)
2025-05-12 22:31:54,781 - app.utils.jwt_callbacks - INFO - Token 10c90bb4-d0f0-4822-8ac4-3569e3eabcc0 is valid
2025-05-12 22:31:54,781 - app.utils.jwt_callbacks - INFO - Verifying token
2025-05-12 22:31:54,782 - app.utils.jwt_callbacks - INFO - JWT Header: {'alg': 'HS256', 'typ': 'JWT'}
2025-05-12 22:31:54,782 - app.utils.jwt_callbacks - INFO - JWT Data: {'fresh': False, 'iat': 1747060261, 'jti': '10c90bb4-d0f0-4822-8ac4-3569e3eabcc0', 'type': 'access', 'sub': 1, 'nbf': 1747060261, 'csrf': 'ImY1ODNhMzdiOTA0N2VhOTAwZjk4MzI0NjlkNjE0MGE4ZjYzMzhiM2Ii.aCIGJQ.fMv52KMlGQaRJ6EfO6DwvkKnHAc', 'exp': 1747063861, 'aud': 'task_management_system', 'user_claims': {'username': 'admin', 'roles': ['admin'], 'permissions': ['manage_users', 'manage_roles', 'manage_all_projects', 'manage_project', 'manage_all_tasks', 'manage_task', 'view_project', 'view_task', 'manage_resources', 'manage_risks', 'view_reports', 'create_task', 'assign_task', 'change_project_status', 'change_task_status', 'create_project'], 'is_active': True}, 'roles': ['admin'], 'admin': True}
2025-05-12 22:31:54,783 - app.utils.jwt_callbacks - INFO - Token time difference: -53.783345 seconds
2025-05-12 22:31:54,784 - app.utils.jwt_callbacks - INFO - Token verification successful
2025-05-12 22:31:54,785 - app.utils.jwt_callbacks - INFO - Looking up user with identity: 1
2025-05-12 22:31:54,786 - sqlalchemy.engine.Engine - INFO - SELECT users.id AS users_id, users.username AS users_username, users.email AS users_email, users.name AS users_name, users.password_hash AS users_password_hash, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.last_login AS users_last_login 
FROM users 
WHERE users.id = ?
2025-05-12 22:31:54,786 - sqlalchemy.engine.Engine - INFO - [cached since 3021s ago] (1,)
2025-05-12 22:31:54,787 - app.utils.jwt_callbacks - INFO - User found: admin
2025-05-12 22:31:54,788 - sqlalchemy.engine.Engine - INFO - SELECT roles.id AS roles_id, roles.name AS roles_name, roles.description AS roles_description, roles.created_at AS roles_created_at 
FROM roles, user_roles 
WHERE ? = user_roles.user_id AND roles.id = user_roles.role_id
2025-05-12 22:31:54,788 - sqlalchemy.engine.Engine - INFO - [cached since 3021s ago] (1,)
2025-05-12 22:31:54,790 - app.utils.jwt_callbacks - INFO - User roles: ['admin']
2025-05-12 22:31:54,791 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions, role_permissions 
WHERE ? = role_permissions.role_id AND permissions.id = role_permissions.permission_id
2025-05-12 22:31:54,792 - sqlalchemy.engine.Engine - INFO - [cached since 3025s ago] (1,)
2025-05-12 22:31:54,793 - app.utils.jwt_callbacks - INFO - User permissions: ['manage_users', 'manage_roles', 'manage_all_projects', 'manage_project', 'manage_all_tasks', 'manage_task', 'view_project', 'view_task', 'manage_resources', 'manage_risks', 'view_reports', 'create_task', 'assign_task', 'change_project_status', 'change_task_status', 'create_project']
2025-05-12 22:31:54,794 - app.utils.jwt_callbacks - INFO - Checking if token 10c90bb4-d0f0-4822-8ac4-3569e3eabcc0 is in blocklist
2025-05-12 22:31:54,795 - sqlalchemy.engine.Engine - INFO - SELECT token_blacklist.id AS token_blacklist_id, token_blacklist.jti AS token_blacklist_jti, token_blacklist.token_type AS token_blacklist_token_type, token_blacklist.user_id AS token_blacklist_user_id, token_blacklist.revoked_at AS token_blacklist_revoked_at, token_blacklist.expires_at AS token_blacklist_expires_at 
FROM token_blacklist 
WHERE token_blacklist.jti = ?
 LIMIT ? OFFSET ?
2025-05-12 22:31:54,796 - sqlalchemy.engine.Engine - INFO - [cached since 3021s ago] ('10c90bb4-d0f0-4822-8ac4-3569e3eabcc0', 1, 0)
2025-05-12 22:31:54,797 - app.utils.jwt_callbacks - INFO - Token 10c90bb4-d0f0-4822-8ac4-3569e3eabcc0 is valid
2025-05-12 22:31:54,797 - app.utils.jwt_callbacks - INFO - Verifying token
2025-05-12 22:31:54,798 - app.utils.jwt_callbacks - INFO - JWT Header: {'alg': 'HS256', 'typ': 'JWT'}
2025-05-12 22:31:54,798 - app.utils.jwt_callbacks - INFO - JWT Data: {'fresh': False, 'iat': 1747060261, 'jti': '10c90bb4-d0f0-4822-8ac4-3569e3eabcc0', 'type': 'access', 'sub': 1, 'nbf': 1747060261, 'csrf': 'ImY1ODNhMzdiOTA0N2VhOTAwZjk4MzI0NjlkNjE0MGE4ZjYzMzhiM2Ii.aCIGJQ.fMv52KMlGQaRJ6EfO6DwvkKnHAc', 'exp': 1747063861, 'aud': 'task_management_system', 'user_claims': {'username': 'admin', 'roles': ['admin'], 'permissions': ['manage_users', 'manage_roles', 'manage_all_projects', 'manage_project', 'manage_all_tasks', 'manage_task', 'view_project', 'view_task', 'manage_resources', 'manage_risks', 'view_reports', 'create_task', 'assign_task', 'change_project_status', 'change_task_status', 'create_project'], 'is_active': True}, 'roles': ['admin'], 'admin': True}
2025-05-12 22:31:54,800 - app.utils.jwt_callbacks - INFO - Token time difference: -53.800014 seconds
2025-05-12 22:31:54,801 - app.utils.jwt_callbacks - INFO - Token verification successful
2025-05-12 22:31:54,801 - app.utils.jwt_callbacks - INFO - Looking up user with identity: 1
2025-05-12 22:31:54,802 - app.utils.jwt_callbacks - INFO - User found: admin
2025-05-12 22:31:54,802 - app.utils.jwt_callbacks - INFO - User roles: ['admin']
2025-05-12 22:31:54,803 - app.utils.jwt_callbacks - INFO - User permissions: ['manage_users', 'manage_roles', 'manage_all_projects', 'manage_project', 'manage_all_tasks', 'manage_task', 'view_project', 'view_task', 'manage_resources', 'manage_risks', 'view_reports', 'create_task', 'assign_task', 'change_project_status', 'change_task_status', 'create_project']
2025-05-12 22:31:54,804 - app - INFO - 用户已认证，重定向到仪表板页面: /.well-known/appspecific/com.chrome.devtools.json
2025-05-12 22:31:54,804 - app - INFO - 设置重定向跟踪: 路径=/.well-known/appspecific/com.chrome.devtools.json, 计数=2
2025-05-12 22:31:54,805 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-05-12 22:31:54,806 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 22:31:54] "[32mGET /.well-known/appspecific/com.chrome.devtools.json HTTP/1.1[0m" 302 -
2025-05-12 22:31:54,811 - app.utils.jwt_callbacks - INFO - Checking if token 10c90bb4-d0f0-4822-8ac4-3569e3eabcc0 is in blocklist
2025-05-12 22:31:54,812 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-05-12 22:31:54,813 - sqlalchemy.engine.Engine - INFO - SELECT token_blacklist.id AS token_blacklist_id, token_blacklist.jti AS token_blacklist_jti, token_blacklist.token_type AS token_blacklist_token_type, token_blacklist.user_id AS token_blacklist_user_id, token_blacklist.revoked_at AS token_blacklist_revoked_at, token_blacklist.expires_at AS token_blacklist_expires_at 
FROM token_blacklist 
WHERE token_blacklist.jti = ?
 LIMIT ? OFFSET ?
2025-05-12 22:31:54,813 - sqlalchemy.engine.Engine - INFO - [cached since 3021s ago] ('10c90bb4-d0f0-4822-8ac4-3569e3eabcc0', 1, 0)
2025-05-12 22:31:54,814 - app.utils.jwt_callbacks - INFO - Token 10c90bb4-d0f0-4822-8ac4-3569e3eabcc0 is valid
2025-05-12 22:31:54,816 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 22:31:54] "[36mGET /static/css/bootstrap.min.css HTTP/1.1[0m" 304 -
2025-05-12 22:31:54,816 - app.utils.jwt_callbacks - INFO - Verifying token
2025-05-12 22:31:54,820 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 22:31:54] "[36mGET /static/css/bootstrap-icons.css HTTP/1.1[0m" 304 -
2025-05-12 22:31:54,821 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 22:31:54] "[36mGET /static/css/style.css HTTP/1.1[0m" 304 -
2025-05-12 22:31:54,822 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 22:31:54] "[36mGET /static/css/frappe-gantt.css HTTP/1.1[0m" 304 -
2025-05-12 22:31:54,823 - app.utils.jwt_callbacks - INFO - JWT Header: {'alg': 'HS256', 'typ': 'JWT'}
2025-05-12 22:31:54,825 - app.utils.jwt_callbacks - INFO - JWT Data: {'fresh': False, 'iat': 1747060261, 'jti': '10c90bb4-d0f0-4822-8ac4-3569e3eabcc0', 'type': 'access', 'sub': 1, 'nbf': 1747060261, 'csrf': 'ImY1ODNhMzdiOTA0N2VhOTAwZjk4MzI0NjlkNjE0MGE4ZjYzMzhiM2Ii.aCIGJQ.fMv52KMlGQaRJ6EfO6DwvkKnHAc', 'exp': 1747063861, 'aud': 'task_management_system', 'user_claims': {'username': 'admin', 'roles': ['admin'], 'permissions': ['manage_users', 'manage_roles', 'manage_all_projects', 'manage_project', 'manage_all_tasks', 'manage_task', 'view_project', 'view_task', 'manage_resources', 'manage_risks', 'view_reports', 'create_task', 'assign_task', 'change_project_status', 'change_task_status', 'create_project'], 'is_active': True}, 'roles': ['admin'], 'admin': True}
2025-05-12 22:31:54,827 - app.utils.jwt_callbacks - INFO - Token time difference: -53.827955 seconds
2025-05-12 22:31:54,828 - app.utils.jwt_callbacks - INFO - Token verification successful
2025-05-12 22:31:54,829 - app.utils.jwt_callbacks - INFO - Looking up user with identity: 1
2025-05-12 22:31:54,830 - sqlalchemy.engine.Engine - INFO - SELECT users.id AS users_id, users.username AS users_username, users.email AS users_email, users.name AS users_name, users.password_hash AS users_password_hash, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.last_login AS users_last_login 
FROM users 
WHERE users.id = ?
2025-05-12 22:31:54,831 - sqlalchemy.engine.Engine - INFO - [cached since 3021s ago] (1,)
2025-05-12 22:31:54,831 - app.utils.jwt_callbacks - INFO - User found: admin
2025-05-12 22:31:54,833 - sqlalchemy.engine.Engine - INFO - SELECT roles.id AS roles_id, roles.name AS roles_name, roles.description AS roles_description, roles.created_at AS roles_created_at 
FROM roles, user_roles 
WHERE ? = user_roles.user_id AND roles.id = user_roles.role_id
2025-05-12 22:31:54,834 - sqlalchemy.engine.Engine - INFO - [cached since 3021s ago] (1,)
2025-05-12 22:31:54,834 - app.utils.jwt_callbacks - INFO - User roles: ['admin']
2025-05-12 22:31:54,835 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions, role_permissions 
WHERE ? = role_permissions.role_id AND permissions.id = role_permissions.permission_id
2025-05-12 22:31:54,835 - sqlalchemy.engine.Engine - INFO - [cached since 3025s ago] (1,)
2025-05-12 22:31:54,836 - app.utils.jwt_callbacks - INFO - User permissions: ['manage_users', 'manage_roles', 'manage_all_projects', 'manage_project', 'manage_all_tasks', 'manage_task', 'view_project', 'view_task', 'manage_resources', 'manage_risks', 'view_reports', 'create_task', 'assign_task', 'change_project_status', 'change_task_status', 'create_project']
2025-05-12 22:31:54,837 - app.utils.jwt_callbacks - INFO - Checking if token 10c90bb4-d0f0-4822-8ac4-3569e3eabcc0 is in blocklist
2025-05-12 22:31:54,839 - sqlalchemy.engine.Engine - INFO - SELECT token_blacklist.id AS token_blacklist_id, token_blacklist.jti AS token_blacklist_jti, token_blacklist.token_type AS token_blacklist_token_type, token_blacklist.user_id AS token_blacklist_user_id, token_blacklist.revoked_at AS token_blacklist_revoked_at, token_blacklist.expires_at AS token_blacklist_expires_at 
FROM token_blacklist 
WHERE token_blacklist.jti = ?
 LIMIT ? OFFSET ?
2025-05-12 22:31:54,839 - sqlalchemy.engine.Engine - INFO - [cached since 3021s ago] ('10c90bb4-d0f0-4822-8ac4-3569e3eabcc0', 1, 0)
2025-05-12 22:31:54,840 - app.utils.jwt_callbacks - INFO - Token 10c90bb4-d0f0-4822-8ac4-3569e3eabcc0 is valid
2025-05-12 22:31:54,840 - app.utils.jwt_callbacks - INFO - Verifying token
2025-05-12 22:31:54,844 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 22:31:54] "[36mGET /static/css/bootstrap.min.css.map HTTP/1.1[0m" 304 -
2025-05-12 22:31:54,844 - app.utils.jwt_callbacks - INFO - JWT Header: {'alg': 'HS256', 'typ': 'JWT'}
2025-05-12 22:31:54,845 - app.utils.jwt_callbacks - INFO - JWT Data: {'fresh': False, 'iat': 1747060261, 'jti': '10c90bb4-d0f0-4822-8ac4-3569e3eabcc0', 'type': 'access', 'sub': 1, 'nbf': 1747060261, 'csrf': 'ImY1ODNhMzdiOTA0N2VhOTAwZjk4MzI0NjlkNjE0MGE4ZjYzMzhiM2Ii.aCIGJQ.fMv52KMlGQaRJ6EfO6DwvkKnHAc', 'exp': 1747063861, 'aud': 'task_management_system', 'user_claims': {'username': 'admin', 'roles': ['admin'], 'permissions': ['manage_users', 'manage_roles', 'manage_all_projects', 'manage_project', 'manage_all_tasks', 'manage_task', 'view_project', 'view_task', 'manage_resources', 'manage_risks', 'view_reports', 'create_task', 'assign_task', 'change_project_status', 'change_task_status', 'create_project'], 'is_active': True}, 'roles': ['admin'], 'admin': True}
2025-05-12 22:31:54,845 - app.utils.jwt_callbacks - INFO - Token time difference: -53.845486 seconds
2025-05-12 22:31:54,846 - app.utils.jwt_callbacks - INFO - Token verification successful
2025-05-12 22:31:54,847 - app.utils.jwt_callbacks - INFO - Looking up user with identity: 1
2025-05-12 22:31:54,847 - app.utils.jwt_callbacks - INFO - User found: admin
2025-05-12 22:31:54,848 - app.utils.jwt_callbacks - INFO - User roles: ['admin']
2025-05-12 22:31:54,848 - app.utils.jwt_callbacks - INFO - User permissions: ['manage_users', 'manage_roles', 'manage_all_projects', 'manage_project', 'manage_all_tasks', 'manage_task', 'view_project', 'view_task', 'manage_resources', 'manage_risks', 'view_reports', 'create_task', 'assign_task', 'change_project_status', 'change_task_status', 'create_project']
2025-05-12 22:31:54,849 - app - INFO - Dashboard access with user ID: 1
2025-05-12 22:31:54,849 - app - INFO - 用户 admin 是否为管理员: True
2025-05-12 22:31:54,850 - app - INFO - Token found in: cookies
2025-05-12 22:31:54,850 - app - INFO - Dashboard for user admin: roles=['admin'], permissions=['manage_users', 'view_project', 'manage_risks', 'manage_all_tasks', 'assign_task', 'manage_task', 'change_project_status', 'create_project', 'change_task_status', 'manage_roles', 'manage_all_projects', 'manage_resources', 'create_task', 'manage_project', 'view_reports', 'view_task']
2025-05-12 22:31:54,852 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-05-12 22:31:54,853 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 22:31:54] "GET /dashboard HTTP/1.1" 200 -
2025-05-12 22:31:54,864 - app.utils.jwt_callbacks - INFO - Checking if token 10c90bb4-d0f0-4822-8ac4-3569e3eabcc0 is in blocklist
2025-05-12 22:31:54,866 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-05-12 22:31:54,866 - sqlalchemy.engine.Engine - INFO - SELECT token_blacklist.id AS token_blacklist_id, token_blacklist.jti AS token_blacklist_jti, token_blacklist.token_type AS token_blacklist_token_type, token_blacklist.user_id AS token_blacklist_user_id, token_blacklist.revoked_at AS token_blacklist_revoked_at, token_blacklist.expires_at AS token_blacklist_expires_at 
FROM token_blacklist 
WHERE token_blacklist.jti = ?
 LIMIT ? OFFSET ?
2025-05-12 22:31:54,867 - sqlalchemy.engine.Engine - INFO - [cached since 3021s ago] ('10c90bb4-d0f0-4822-8ac4-3569e3eabcc0', 1, 0)
2025-05-12 22:31:54,867 - app.utils.jwt_callbacks - INFO - Token 10c90bb4-d0f0-4822-8ac4-3569e3eabcc0 is valid
2025-05-12 22:31:54,869 - app.utils.jwt_callbacks - INFO - Verifying token
2025-05-12 22:31:54,869 - app.utils.jwt_callbacks - INFO - JWT Header: {'alg': 'HS256', 'typ': 'JWT'}
2025-05-12 22:31:54,870 - app.utils.jwt_callbacks - INFO - JWT Data: {'fresh': False, 'iat': 1747060261, 'jti': '10c90bb4-d0f0-4822-8ac4-3569e3eabcc0', 'type': 'access', 'sub': 1, 'nbf': 1747060261, 'csrf': 'ImY1ODNhMzdiOTA0N2VhOTAwZjk4MzI0NjlkNjE0MGE4ZjYzMzhiM2Ii.aCIGJQ.fMv52KMlGQaRJ6EfO6DwvkKnHAc', 'exp': 1747063861, 'aud': 'task_management_system', 'user_claims': {'username': 'admin', 'roles': ['admin'], 'permissions': ['manage_users', 'manage_roles', 'manage_all_projects', 'manage_project', 'manage_all_tasks', 'manage_task', 'view_project', 'view_task', 'manage_resources', 'manage_risks', 'view_reports', 'create_task', 'assign_task', 'change_project_status', 'change_task_status', 'create_project'], 'is_active': True}, 'roles': ['admin'], 'admin': True}
2025-05-12 22:31:54,871 - app.utils.jwt_callbacks - INFO - Token time difference: -53.871105 seconds
2025-05-12 22:31:54,871 - app.utils.jwt_callbacks - INFO - Token verification successful
2025-05-12 22:31:54,872 - app.utils.jwt_callbacks - INFO - Looking up user with identity: 1
2025-05-12 22:31:54,873 - sqlalchemy.engine.Engine - INFO - SELECT users.id AS users_id, users.username AS users_username, users.email AS users_email, users.name AS users_name, users.password_hash AS users_password_hash, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.last_login AS users_last_login 
FROM users 
WHERE users.id = ?
2025-05-12 22:31:54,873 - sqlalchemy.engine.Engine - INFO - [cached since 3021s ago] (1,)
2025-05-12 22:31:54,874 - app.utils.jwt_callbacks - INFO - User found: admin
2025-05-12 22:31:54,875 - sqlalchemy.engine.Engine - INFO - SELECT roles.id AS roles_id, roles.name AS roles_name, roles.description AS roles_description, roles.created_at AS roles_created_at 
FROM roles, user_roles 
WHERE ? = user_roles.user_id AND roles.id = user_roles.role_id
2025-05-12 22:31:54,876 - sqlalchemy.engine.Engine - INFO - [cached since 3021s ago] (1,)
2025-05-12 22:31:54,876 - app.utils.jwt_callbacks - INFO - User roles: ['admin']
2025-05-12 22:31:54,877 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions, role_permissions 
WHERE ? = role_permissions.role_id AND permissions.id = role_permissions.permission_id
2025-05-12 22:31:54,877 - sqlalchemy.engine.Engine - INFO - [cached since 3025s ago] (1,)
2025-05-12 22:31:54,878 - app.utils.jwt_callbacks - INFO - User permissions: ['manage_users', 'manage_roles', 'manage_all_projects', 'manage_project', 'manage_all_tasks', 'manage_task', 'view_project', 'view_task', 'manage_resources', 'manage_risks', 'view_reports', 'create_task', 'assign_task', 'change_project_status', 'change_task_status', 'create_project']
2025-05-12 22:31:54,879 - app.utils.jwt_callbacks - INFO - Checking if token 10c90bb4-d0f0-4822-8ac4-3569e3eabcc0 is in blocklist
2025-05-12 22:31:54,880 - sqlalchemy.engine.Engine - INFO - SELECT token_blacklist.id AS token_blacklist_id, token_blacklist.jti AS token_blacklist_jti, token_blacklist.token_type AS token_blacklist_token_type, token_blacklist.user_id AS token_blacklist_user_id, token_blacklist.revoked_at AS token_blacklist_revoked_at, token_blacklist.expires_at AS token_blacklist_expires_at 
FROM token_blacklist 
WHERE token_blacklist.jti = ?
 LIMIT ? OFFSET ?
2025-05-12 22:31:54,881 - sqlalchemy.engine.Engine - INFO - [cached since 3021s ago] ('10c90bb4-d0f0-4822-8ac4-3569e3eabcc0', 1, 0)
2025-05-12 22:31:54,881 - app.utils.jwt_callbacks - INFO - Token 10c90bb4-d0f0-4822-8ac4-3569e3eabcc0 is valid
2025-05-12 22:31:54,882 - app.utils.jwt_callbacks - INFO - Verifying token
2025-05-12 22:31:54,883 - app.utils.jwt_callbacks - INFO - JWT Header: {'alg': 'HS256', 'typ': 'JWT'}
2025-05-12 22:31:54,883 - app.utils.jwt_callbacks - INFO - JWT Data: {'fresh': False, 'iat': 1747060261, 'jti': '10c90bb4-d0f0-4822-8ac4-3569e3eabcc0', 'type': 'access', 'sub': 1, 'nbf': 1747060261, 'csrf': 'ImY1ODNhMzdiOTA0N2VhOTAwZjk4MzI0NjlkNjE0MGE4ZjYzMzhiM2Ii.aCIGJQ.fMv52KMlGQaRJ6EfO6DwvkKnHAc', 'exp': 1747063861, 'aud': 'task_management_system', 'user_claims': {'username': 'admin', 'roles': ['admin'], 'permissions': ['manage_users', 'manage_roles', 'manage_all_projects', 'manage_project', 'manage_all_tasks', 'manage_task', 'view_project', 'view_task', 'manage_resources', 'manage_risks', 'view_reports', 'create_task', 'assign_task', 'change_project_status', 'change_task_status', 'create_project'], 'is_active': True}, 'roles': ['admin'], 'admin': True}
2025-05-12 22:31:54,884 - app.utils.jwt_callbacks - INFO - Token time difference: -53.884881 seconds
2025-05-12 22:31:54,885 - app.utils.jwt_callbacks - INFO - Token verification successful
2025-05-12 22:31:54,886 - app.utils.jwt_callbacks - INFO - Looking up user with identity: 1
2025-05-12 22:31:54,888 - app.utils.jwt_callbacks - INFO - User found: admin
2025-05-12 22:31:54,888 - app.utils.jwt_callbacks - INFO - User roles: ['admin']
2025-05-12 22:31:54,888 - app.utils.jwt_callbacks - INFO - User permissions: ['manage_users', 'manage_roles', 'manage_all_projects', 'manage_project', 'manage_all_tasks', 'manage_task', 'view_project', 'view_task', 'manage_resources', 'manage_risks', 'view_reports', 'create_task', 'assign_task', 'change_project_status', 'change_task_status', 'create_project']
2025-05-12 22:31:54,889 - app - INFO - 用户已认证，重定向到仪表板页面: /.well-known/appspecific/com.chrome.devtools.json
2025-05-12 22:31:54,890 - app - INFO - 设置重定向跟踪: 路径=/.well-known/appspecific/com.chrome.devtools.json, 计数=3
2025-05-12 22:31:54,891 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-05-12 22:31:54,891 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 22:31:54] "[32mGET /.well-known/appspecific/com.chrome.devtools.json HTTP/1.1[0m" 302 -
2025-05-12 22:31:54,896 - app.utils.jwt_callbacks - INFO - Checking if token 10c90bb4-d0f0-4822-8ac4-3569e3eabcc0 is in blocklist
2025-05-12 22:31:54,897 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-05-12 22:31:54,898 - sqlalchemy.engine.Engine - INFO - SELECT token_blacklist.id AS token_blacklist_id, token_blacklist.jti AS token_blacklist_jti, token_blacklist.token_type AS token_blacklist_token_type, token_blacklist.user_id AS token_blacklist_user_id, token_blacklist.revoked_at AS token_blacklist_revoked_at, token_blacklist.expires_at AS token_blacklist_expires_at 
FROM token_blacklist 
WHERE token_blacklist.jti = ?
 LIMIT ? OFFSET ?
2025-05-12 22:31:54,898 - sqlalchemy.engine.Engine - INFO - [cached since 3021s ago] ('10c90bb4-d0f0-4822-8ac4-3569e3eabcc0', 1, 0)
2025-05-12 22:31:54,899 - app.utils.jwt_callbacks - INFO - Token 10c90bb4-d0f0-4822-8ac4-3569e3eabcc0 is valid
2025-05-12 22:31:54,900 - app.utils.jwt_callbacks - INFO - Verifying token
2025-05-12 22:31:54,901 - app.utils.jwt_callbacks - INFO - JWT Header: {'alg': 'HS256', 'typ': 'JWT'}
2025-05-12 22:31:54,901 - app.utils.jwt_callbacks - INFO - JWT Data: {'fresh': False, 'iat': 1747060261, 'jti': '10c90bb4-d0f0-4822-8ac4-3569e3eabcc0', 'type': 'access', 'sub': 1, 'nbf': 1747060261, 'csrf': 'ImY1ODNhMzdiOTA0N2VhOTAwZjk4MzI0NjlkNjE0MGE4ZjYzMzhiM2Ii.aCIGJQ.fMv52KMlGQaRJ6EfO6DwvkKnHAc', 'exp': 1747063861, 'aud': 'task_management_system', 'user_claims': {'username': 'admin', 'roles': ['admin'], 'permissions': ['manage_users', 'manage_roles', 'manage_all_projects', 'manage_project', 'manage_all_tasks', 'manage_task', 'view_project', 'view_task', 'manage_resources', 'manage_risks', 'view_reports', 'create_task', 'assign_task', 'change_project_status', 'change_task_status', 'create_project'], 'is_active': True}, 'roles': ['admin'], 'admin': True}
2025-05-12 22:31:54,902 - app.utils.jwt_callbacks - INFO - Token time difference: -53.902603 seconds
2025-05-12 22:31:54,902 - app.utils.jwt_callbacks - INFO - Token verification successful
2025-05-12 22:31:54,903 - app.utils.jwt_callbacks - INFO - Looking up user with identity: 1
2025-05-12 22:31:54,904 - sqlalchemy.engine.Engine - INFO - SELECT users.id AS users_id, users.username AS users_username, users.email AS users_email, users.name AS users_name, users.password_hash AS users_password_hash, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.last_login AS users_last_login 
FROM users 
WHERE users.id = ?
2025-05-12 22:31:54,905 - sqlalchemy.engine.Engine - INFO - [cached since 3021s ago] (1,)
2025-05-12 22:31:54,906 - app.utils.jwt_callbacks - INFO - User found: admin
2025-05-12 22:31:54,907 - sqlalchemy.engine.Engine - INFO - SELECT roles.id AS roles_id, roles.name AS roles_name, roles.description AS roles_description, roles.created_at AS roles_created_at 
FROM roles, user_roles 
WHERE ? = user_roles.user_id AND roles.id = user_roles.role_id
2025-05-12 22:31:54,908 - sqlalchemy.engine.Engine - INFO - [cached since 3021s ago] (1,)
2025-05-12 22:31:54,910 - app.utils.jwt_callbacks - INFO - User roles: ['admin']
2025-05-12 22:31:54,911 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions, role_permissions 
WHERE ? = role_permissions.role_id AND permissions.id = role_permissions.permission_id
2025-05-12 22:31:54,911 - sqlalchemy.engine.Engine - INFO - [cached since 3025s ago] (1,)
2025-05-12 22:31:54,913 - app.utils.jwt_callbacks - INFO - User permissions: ['manage_users', 'manage_roles', 'manage_all_projects', 'manage_project', 'manage_all_tasks', 'manage_task', 'view_project', 'view_task', 'manage_resources', 'manage_risks', 'view_reports', 'create_task', 'assign_task', 'change_project_status', 'change_task_status', 'create_project']
2025-05-12 22:31:54,914 - app.utils.jwt_callbacks - INFO - Checking if token 10c90bb4-d0f0-4822-8ac4-3569e3eabcc0 is in blocklist
2025-05-12 22:31:54,916 - sqlalchemy.engine.Engine - INFO - SELECT token_blacklist.id AS token_blacklist_id, token_blacklist.jti AS token_blacklist_jti, token_blacklist.token_type AS token_blacklist_token_type, token_blacklist.user_id AS token_blacklist_user_id, token_blacklist.revoked_at AS token_blacklist_revoked_at, token_blacklist.expires_at AS token_blacklist_expires_at 
FROM token_blacklist 
WHERE token_blacklist.jti = ?
 LIMIT ? OFFSET ?
2025-05-12 22:31:54,916 - sqlalchemy.engine.Engine - INFO - [cached since 3021s ago] ('10c90bb4-d0f0-4822-8ac4-3569e3eabcc0', 1, 0)
2025-05-12 22:31:54,917 - app.utils.jwt_callbacks - INFO - Token 10c90bb4-d0f0-4822-8ac4-3569e3eabcc0 is valid
2025-05-12 22:31:54,918 - app.utils.jwt_callbacks - INFO - Verifying token
2025-05-12 22:31:54,919 - app.utils.jwt_callbacks - INFO - JWT Header: {'alg': 'HS256', 'typ': 'JWT'}
2025-05-12 22:31:54,919 - app.utils.jwt_callbacks - INFO - JWT Data: {'fresh': False, 'iat': 1747060261, 'jti': '10c90bb4-d0f0-4822-8ac4-3569e3eabcc0', 'type': 'access', 'sub': 1, 'nbf': 1747060261, 'csrf': 'ImY1ODNhMzdiOTA0N2VhOTAwZjk4MzI0NjlkNjE0MGE4ZjYzMzhiM2Ii.aCIGJQ.fMv52KMlGQaRJ6EfO6DwvkKnHAc', 'exp': 1747063861, 'aud': 'task_management_system', 'user_claims': {'username': 'admin', 'roles': ['admin'], 'permissions': ['manage_users', 'manage_roles', 'manage_all_projects', 'manage_project', 'manage_all_tasks', 'manage_task', 'view_project', 'view_task', 'manage_resources', 'manage_risks', 'view_reports', 'create_task', 'assign_task', 'change_project_status', 'change_task_status', 'create_project'], 'is_active': True}, 'roles': ['admin'], 'admin': True}
2025-05-12 22:31:54,920 - app.utils.jwt_callbacks - INFO - Token time difference: -53.920501 seconds
2025-05-12 22:31:54,920 - app.utils.jwt_callbacks - INFO - Token verification successful
2025-05-12 22:31:54,922 - app.utils.jwt_callbacks - INFO - Looking up user with identity: 1
2025-05-12 22:31:54,922 - app.utils.jwt_callbacks - INFO - User found: admin
2025-05-12 22:31:54,923 - app.utils.jwt_callbacks - INFO - User roles: ['admin']
2025-05-12 22:31:54,923 - app.utils.jwt_callbacks - INFO - User permissions: ['manage_users', 'manage_roles', 'manage_all_projects', 'manage_project', 'manage_all_tasks', 'manage_task', 'view_project', 'view_task', 'manage_resources', 'manage_risks', 'view_reports', 'create_task', 'assign_task', 'change_project_status', 'change_task_status', 'create_project']
2025-05-12 22:31:54,923 - app - INFO - Dashboard access with user ID: 1
2025-05-12 22:31:54,924 - app - INFO - 用户 admin 是否为管理员: True
2025-05-12 22:31:54,924 - app - INFO - Token found in: cookies
2025-05-12 22:31:54,925 - app - INFO - Dashboard for user admin: roles=['admin'], permissions=['manage_users', 'view_project', 'manage_risks', 'manage_all_tasks', 'assign_task', 'manage_task', 'change_project_status', 'create_project', 'change_task_status', 'manage_roles', 'manage_all_projects', 'manage_resources', 'create_task', 'manage_project', 'view_reports', 'view_task']
2025-05-12 22:31:54,926 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-05-12 22:31:54,927 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 22:31:54] "GET /dashboard HTTP/1.1" 200 -
2025-05-12 22:31:58,900 - app - WARNING - 绕过JWT验证: /api/global/users
2025-05-12 22:31:58,901 - app - WARNING - 绕过JWT验证: /api/global/users
2025-05-12 22:31:58,905 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 22:31:58] "[33mGET /api/global/users?bypass_jwt=true&_=1747060318891 HTTP/1.1[0m" 404 -
2025-05-12 22:31:58,907 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 22:31:58] "[33mGET /api/global/users?bypass_jwt=true&_=1747060318893 HTTP/1.1[0m" 404 -
2025-05-12 22:31:58,920 - app - WARNING - 绕过JWT验证: /api/project-managers
2025-05-12 22:31:58,921 - app - WARNING - 绕过JWT验证: /api/project-managers
2025-05-12 22:31:58,923 - app - INFO - 直接访问项目经理列表API
2025-05-12 22:31:58,924 - app - INFO - 直接访问项目经理列表API
2025-05-12 22:31:58,927 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-05-12 22:31:58,929 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-05-12 22:31:58,930 - sqlalchemy.engine.Engine - INFO - SELECT users.id AS users_id, users.username AS users_username, users.email AS users_email, users.name AS users_name, users.password_hash AS users_password_hash, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.last_login AS users_last_login 
FROM users 
WHERE users.is_active = 1
2025-05-12 22:31:58,931 - sqlalchemy.engine.Engine - INFO - SELECT users.id AS users_id, users.username AS users_username, users.email AS users_email, users.name AS users_name, users.password_hash AS users_password_hash, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.last_login AS users_last_login 
FROM users 
WHERE users.is_active = 1
2025-05-12 22:31:58,932 - sqlalchemy.engine.Engine - INFO - [cached since 2063s ago] ()
2025-05-12 22:31:58,933 - sqlalchemy.engine.Engine - INFO - [cached since 2063s ago] ()
2025-05-12 22:31:58,935 - app - INFO - 已找到 9 个活跃用户用于项目经理选择
2025-05-12 22:31:58,936 - app - INFO - 已找到 9 个活跃用户用于项目经理选择
2025-05-12 22:31:58,940 - app - INFO - 返回 9 个可选的项目负责人
2025-05-12 22:31:58,941 - app - INFO - 返回 9 个可选的项目负责人
2025-05-12 22:31:58,949 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-05-12 22:31:58,949 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-05-12 22:31:58,951 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 22:31:58] "GET /api/project-managers?bypass_jwt=true&_=1747060318915 HTTP/1.1" 200 -
2025-05-12 22:31:58,950 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 22:31:58] "GET /api/project-managers?bypass_jwt=true&_=1747060318914 HTTP/1.1" 200 -
2025-05-12 22:32:16,048 - app - WARNING - 绕过JWT验证: /api/projects
2025-05-12 22:32:16,049 - app - WARNING - 绕过JWT验证: /api/projects
2025-05-12 22:32:16,051 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 22:32:16] "[31m[1mPOST /api/projects?bypass_jwt=true&_=1747060336042 HTTP/1.1[0m" 405 -
2025-05-12 22:32:16,051 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 22:32:16] "[31m[1mPOST /api/projects?bypass_jwt=true&_=1747060336043 HTTP/1.1[0m" 405 -
2025-05-12 22:34:27,394 - app - INFO - 未匹配的路径 /login，重定向到登录页面
2025-05-12 22:34:27,395 - app - INFO - 设置重定向跟踪: 路径=/login, 计数=1
2025-05-12 22:34:27,395 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 22:34:27] "[32mGET /login HTTP/1.1[0m" 302 -
2025-05-12 22:34:27,405 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 22:34:27] "GET /auth/login HTTP/1.1" 200 -
2025-05-12 22:34:27,449 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 22:34:27] "GET /static/css/bootstrap.min.css HTTP/1.1" 200 -
2025-05-12 22:34:27,449 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 22:34:27] "GET /static/css/style.css HTTP/1.1" 200 -
2025-05-12 22:34:27,450 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 22:34:27] "GET /static/css/bootstrap-icons.css HTTP/1.1" 200 -
2025-05-12 22:34:27,452 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 22:34:27] "GET /static/js/jquery.min.js HTTP/1.1" 200 -
2025-05-12 22:34:27,453 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 22:34:27] "GET /static/js/bootstrap.bundle.min.js HTTP/1.1" 200 -
2025-05-12 22:34:27,456 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 22:34:27] "GET /static/js/utils.js HTTP/1.1" 200 -
2025-05-12 22:34:27,464 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 22:34:27] "GET /static/js/auth.js HTTP/1.1" 200 -
2025-05-12 22:34:27,465 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 22:34:27] "GET /static/images/background.png HTTP/1.1" 200 -
2025-05-12 22:34:27,483 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 22:34:27] "GET /static/js/fix-modals.js HTTP/1.1" 200 -
2025-05-12 22:34:27,485 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 22:34:27] "GET /static/js/csrf.js HTTP/1.1" 200 -
2025-05-12 22:34:27,487 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 22:34:27] "GET /static/js/user-profile.js HTTP/1.1" 200 -
2025-05-12 22:34:27,490 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 22:34:27] "GET /static/js/background-helper.js HTTP/1.1" 200 -
2025-05-12 22:34:27,490 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 22:34:27] "[33mGET /static/uploads/background.png HTTP/1.1[0m" 404 -
2025-05-12 22:34:27,512 - app - WARNING - 绕过JWT验证: /auth/user_info
2025-05-12 22:34:27,513 - app.utils.jwt_callbacks - ERROR - Missing token: Missing JWT in headers, cookies or query_string (Missing Authorization Header; Missing cookie "access_token_cookie"; Missing 'jwt' query paramater)
2025-05-12 22:34:27,513 - app.utils.jwt_callbacks - INFO - Redirecting to login page
2025-05-12 22:34:27,516 - app - INFO - 设置重定向跟踪: 路径=/auth/user_info, 计数=1
2025-05-12 22:34:27,517 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 22:34:27] "[33mGET /static/uploads/background.png HTTP/1.1[0m" 404 -
2025-05-12 22:34:27,517 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 22:34:27] "[32mGET /auth/user_info?_=1747060467507&bypass_jwt=true HTTP/1.1[0m" 302 -
2025-05-12 22:34:27,527 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 22:34:27] "GET /auth/login HTTP/1.1" 200 -
2025-05-12 22:34:27,537 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 22:34:27] "GET /static/favicon.ico HTTP/1.1" 200 -
2025-05-12 22:34:28,519 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 22:34:28] "[33mGET /static/uploads/background.png HTTP/1.1[0m" 404 -
2025-05-12 22:34:28,839 - app - INFO - 登录请求 - 方法: POST, 内容类型: application/x-www-form-urlencoded
2025-05-12 22:34:28,839 - app - INFO - 请求头: {'Host': '127.0.0.1:5000', 'Connection': 'keep-alive', 'Content-Length': '135', 'Cache-Control': 'max-age=0', 'Sec-Ch-Ua': '"Chromium";v="136", "Microsoft Edge";v="136", "Not.A/Brand";v="99"', 'Sec-Ch-Ua-Mobile': '?0', 'Sec-Ch-Ua-Platform': '"Windows"', 'Origin': 'http://127.0.0.1:5000', 'Content-Type': 'application/x-www-form-urlencoded', 'Upgrade-Insecure-Requests': '1', 'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36 Edg/136.0.0.0', 'Accept': 'text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.7', 'Sec-Fetch-Site': 'same-origin', 'Sec-Fetch-Mode': 'navigate', 'Sec-Fetch-User': '?1', 'Sec-Fetch-Dest': 'document', 'Referer': 'http://127.0.0.1:5000/auth/login', 'Accept-Encoding': 'gzip, deflate, br, zstd', 'Accept-Language': 'zh-CN,zh;q=0.9,en;q=0.8,en-GB;q=0.7,en-US;q=0.6', 'Cookie': 'redirect_count=1; redirect_path=/auth/user_info; session=eyJjc3JmX3Rva2VuIjoiOGM3ZjAxN2FhOTYxZGIzYmI2NTc5OTFhNDkyMzNjNjgxZTNjNTc3NCJ9.aCIG9A.AXgLOwwJCiYZ1W-POprCd9muyYc'}
2025-05-12 22:34:28,840 - app - INFO - 处理表单格式的登录请求
2025-05-12 22:34:28,840 - app - INFO - 表单数据: username=admin, password=********
2025-05-12 22:34:28,841 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-05-12 22:34:28,842 - sqlalchemy.engine.Engine - INFO - SELECT users.id AS users_id, users.username AS users_username, users.email AS users_email, users.name AS users_name, users.password_hash AS users_password_hash, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.last_login AS users_last_login 
FROM users 
WHERE users.username = ?
 LIMIT ? OFFSET ?
2025-05-12 22:34:28,843 - sqlalchemy.engine.Engine - INFO - [cached since 3176s ago] ('admin', 1, 0)
2025-05-12 22:34:29,223 - app - INFO - 已生成CSRF令牌: IjhjN2YwMT...
2025-05-12 22:34:29,226 - sqlalchemy.engine.Engine - INFO - SELECT roles.id AS roles_id, roles.name AS roles_name, roles.description AS roles_description, roles.created_at AS roles_created_at 
FROM roles, user_roles 
WHERE ? = user_roles.user_id AND roles.id = user_roles.role_id
2025-05-12 22:34:29,226 - sqlalchemy.engine.Engine - INFO - [cached since 3176s ago] (1,)
2025-05-12 22:34:29,227 - app - INFO - 用户 admin 的角色: ['admin']
2025-05-12 22:34:29,229 - app - INFO - 用户 admin 是否是管理员: True
2025-05-12 22:34:29,230 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions, role_permissions 
WHERE ? = role_permissions.role_id AND permissions.id = role_permissions.permission_id
2025-05-12 22:34:29,231 - sqlalchemy.engine.Engine - INFO - [cached since 3180s ago] (1,)
2025-05-12 22:34:29,234 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions 
WHERE permissions.name = ?
 LIMIT ? OFFSET ?
2025-05-12 22:34:29,236 - sqlalchemy.engine.Engine - INFO - [cached since 3180s ago] ('manage_users', 1, 0)
2025-05-12 22:34:29,238 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions 
WHERE permissions.name = ?
 LIMIT ? OFFSET ?
2025-05-12 22:34:29,240 - sqlalchemy.engine.Engine - INFO - [cached since 3180s ago] ('manage_roles', 1, 0)
2025-05-12 22:34:29,242 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions 
WHERE permissions.name = ?
 LIMIT ? OFFSET ?
2025-05-12 22:34:29,245 - sqlalchemy.engine.Engine - INFO - [cached since 3180s ago] ('manage_all_projects', 1, 0)
2025-05-12 22:34:29,246 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions 
WHERE permissions.name = ?
 LIMIT ? OFFSET ?
2025-05-12 22:34:29,247 - sqlalchemy.engine.Engine - INFO - [cached since 3180s ago] ('manage_project', 1, 0)
2025-05-12 22:34:29,249 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions 
WHERE permissions.name = ?
 LIMIT ? OFFSET ?
2025-05-12 22:34:29,249 - sqlalchemy.engine.Engine - INFO - [cached since 3180s ago] ('manage_all_tasks', 1, 0)
2025-05-12 22:34:29,251 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions 
WHERE permissions.name = ?
 LIMIT ? OFFSET ?
2025-05-12 22:34:29,252 - sqlalchemy.engine.Engine - INFO - [cached since 3180s ago] ('manage_task', 1, 0)
2025-05-12 22:34:29,255 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions 
WHERE permissions.name = ?
 LIMIT ? OFFSET ?
2025-05-12 22:34:29,256 - sqlalchemy.engine.Engine - INFO - [cached since 3180s ago] ('view_project', 1, 0)
2025-05-12 22:34:29,259 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions 
WHERE permissions.name = ?
 LIMIT ? OFFSET ?
2025-05-12 22:34:29,260 - sqlalchemy.engine.Engine - INFO - [cached since 3180s ago] ('view_task', 1, 0)
2025-05-12 22:34:29,261 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions 
WHERE permissions.name = ?
 LIMIT ? OFFSET ?
2025-05-12 22:34:29,262 - sqlalchemy.engine.Engine - INFO - [cached since 3180s ago] ('manage_resources', 1, 0)
2025-05-12 22:34:29,263 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions 
WHERE permissions.name = ?
 LIMIT ? OFFSET ?
2025-05-12 22:34:29,264 - sqlalchemy.engine.Engine - INFO - [cached since 3180s ago] ('manage_risks', 1, 0)
2025-05-12 22:34:29,267 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions 
WHERE permissions.name = ?
 LIMIT ? OFFSET ?
2025-05-12 22:34:29,268 - sqlalchemy.engine.Engine - INFO - [cached since 3180s ago] ('view_reports', 1, 0)
2025-05-12 22:34:29,272 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions 
WHERE permissions.name = ?
 LIMIT ? OFFSET ?
2025-05-12 22:34:29,273 - sqlalchemy.engine.Engine - INFO - [cached since 3180s ago] ('create_task', 1, 0)
2025-05-12 22:34:29,277 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions 
WHERE permissions.name = ?
 LIMIT ? OFFSET ?
2025-05-12 22:34:29,278 - sqlalchemy.engine.Engine - INFO - [cached since 3180s ago] ('create_project', 1, 0)
2025-05-12 22:34:29,280 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions 
WHERE permissions.name = ?
 LIMIT ? OFFSET ?
2025-05-12 22:34:29,280 - sqlalchemy.engine.Engine - INFO - [cached since 3180s ago] ('assign_task', 1, 0)
2025-05-12 22:34:29,281 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions 
WHERE permissions.name = ?
 LIMIT ? OFFSET ?
2025-05-12 22:34:29,282 - sqlalchemy.engine.Engine - INFO - [cached since 3180s ago] ('change_project_status', 1, 0)
2025-05-12 22:34:29,283 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions 
WHERE permissions.name = ?
 LIMIT ? OFFSET ?
2025-05-12 22:34:29,284 - sqlalchemy.engine.Engine - INFO - [cached since 3180s ago] ('change_task_status', 1, 0)
2025-05-12 22:34:29,286 - app.utils.jwt_callbacks - INFO - Adding additional claims for user 1
2025-05-12 22:34:29,288 - app.utils.jwt_callbacks - INFO - Added claims for user 1: {'aud': 'task_management_system', 'user_claims': {'username': 'admin', 'roles': ['admin'], 'permissions': ['manage_users', 'manage_roles', 'manage_all_projects', 'manage_project', 'manage_all_tasks', 'manage_task', 'view_project', 'view_task', 'manage_resources', 'manage_risks', 'view_reports', 'create_task', 'assign_task', 'change_project_status', 'change_task_status', 'create_project'], 'is_active': True}}
2025-05-12 22:34:29,291 - app.utils.jwt_callbacks - INFO - Adding additional claims for user 1
2025-05-12 22:34:29,292 - app.utils.jwt_callbacks - INFO - Added claims for user 1: {'aud': 'task_management_system', 'user_claims': {'username': 'admin', 'roles': ['admin'], 'permissions': ['manage_users', 'manage_roles', 'manage_all_projects', 'manage_project', 'manage_all_tasks', 'manage_task', 'view_project', 'view_task', 'manage_resources', 'manage_risks', 'view_reports', 'create_task', 'assign_task', 'change_project_status', 'change_task_status', 'create_project'], 'is_active': True}}
2025-05-12 22:34:29,296 - sqlalchemy.engine.Engine - INFO - UPDATE users SET updated_at=?, last_login=? WHERE users.id = ?
2025-05-12 22:34:29,297 - sqlalchemy.engine.Engine - INFO - [cached since 3176s ago] ('2025-05-12 14:34:29.296011', '2025-05-12 14:34:29.295007', 1)
2025-05-12 22:34:29,300 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-05-12 22:34:29,307 - app - INFO - 用户登录成功: admin
2025-05-12 22:34:29,308 - app - INFO - 设置重定向跟踪: 路径=/auth/login, 计数=1
2025-05-12 22:34:29,310 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 22:34:29] "[32mPOST /auth/login HTTP/1.1[0m" 302 -
2025-05-12 22:34:29,326 - app.utils.jwt_callbacks - INFO - Checking if token 155ae0d7-6fa2-4f4d-8e88-a1c67b30ba27 is in blocklist
2025-05-12 22:34:29,328 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-05-12 22:34:29,329 - sqlalchemy.engine.Engine - INFO - SELECT token_blacklist.id AS token_blacklist_id, token_blacklist.jti AS token_blacklist_jti, token_blacklist.token_type AS token_blacklist_token_type, token_blacklist.user_id AS token_blacklist_user_id, token_blacklist.revoked_at AS token_blacklist_revoked_at, token_blacklist.expires_at AS token_blacklist_expires_at 
FROM token_blacklist 
WHERE token_blacklist.jti = ?
 LIMIT ? OFFSET ?
2025-05-12 22:34:29,329 - sqlalchemy.engine.Engine - INFO - [cached since 3176s ago] ('155ae0d7-6fa2-4f4d-8e88-a1c67b30ba27', 1, 0)
2025-05-12 22:34:29,330 - app.utils.jwt_callbacks - INFO - Token 155ae0d7-6fa2-4f4d-8e88-a1c67b30ba27 is valid
2025-05-12 22:34:29,331 - app.utils.jwt_callbacks - INFO - Verifying token
2025-05-12 22:34:29,332 - app.utils.jwt_callbacks - INFO - JWT Header: {'alg': 'HS256', 'typ': 'JWT'}
2025-05-12 22:34:29,333 - app.utils.jwt_callbacks - INFO - JWT Data: {'fresh': False, 'iat': 1747060469, 'jti': '155ae0d7-6fa2-4f4d-8e88-a1c67b30ba27', 'type': 'access', 'sub': 1, 'nbf': 1747060469, 'csrf': 'IjhjN2YwMTdhYTk2MWRiM2JiNjU3OTkxYTQ5MjMzYzY4MWUzYzU3NzQi.aCIG9Q.Leqtb7IxDBGK9aMZJBCWuyYYRgk', 'exp': 1747064069, 'aud': 'task_management_system', 'user_claims': {'username': 'admin', 'roles': ['admin'], 'permissions': ['manage_users', 'manage_roles', 'manage_all_projects', 'manage_project', 'manage_all_tasks', 'manage_task', 'view_project', 'view_task', 'manage_resources', 'manage_risks', 'view_reports', 'create_task', 'assign_task', 'change_project_status', 'change_task_status', 'create_project'], 'is_active': True}, 'roles': ['admin'], 'admin': True}
2025-05-12 22:34:29,334 - app.utils.jwt_callbacks - INFO - Token time difference: -0.334847 seconds
2025-05-12 22:34:29,337 - app.utils.jwt_callbacks - INFO - Token verification successful
2025-05-12 22:34:29,339 - app.utils.jwt_callbacks - INFO - Looking up user with identity: 1
2025-05-12 22:34:29,341 - sqlalchemy.engine.Engine - INFO - SELECT users.id AS users_id, users.username AS users_username, users.email AS users_email, users.name AS users_name, users.password_hash AS users_password_hash, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.last_login AS users_last_login 
FROM users 
WHERE users.id = ?
2025-05-12 22:34:29,341 - sqlalchemy.engine.Engine - INFO - [cached since 3176s ago] (1,)
2025-05-12 22:34:29,343 - app.utils.jwt_callbacks - INFO - User found: admin
2025-05-12 22:34:29,344 - sqlalchemy.engine.Engine - INFO - SELECT roles.id AS roles_id, roles.name AS roles_name, roles.description AS roles_description, roles.created_at AS roles_created_at 
FROM roles, user_roles 
WHERE ? = user_roles.user_id AND roles.id = user_roles.role_id
2025-05-12 22:34:29,345 - sqlalchemy.engine.Engine - INFO - [cached since 3176s ago] (1,)
2025-05-12 22:34:29,345 - app.utils.jwt_callbacks - INFO - User roles: ['admin']
2025-05-12 22:34:29,346 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions, role_permissions 
WHERE ? = role_permissions.role_id AND permissions.id = role_permissions.permission_id
2025-05-12 22:34:29,347 - sqlalchemy.engine.Engine - INFO - [cached since 3180s ago] (1,)
2025-05-12 22:34:29,348 - app.utils.jwt_callbacks - INFO - User permissions: ['manage_users', 'manage_roles', 'manage_all_projects', 'manage_project', 'manage_all_tasks', 'manage_task', 'view_project', 'view_task', 'manage_resources', 'manage_risks', 'view_reports', 'create_task', 'assign_task', 'change_project_status', 'change_task_status', 'create_project']
2025-05-12 22:34:29,350 - app.utils.jwt_callbacks - INFO - Checking if token 155ae0d7-6fa2-4f4d-8e88-a1c67b30ba27 is in blocklist
2025-05-12 22:34:29,353 - sqlalchemy.engine.Engine - INFO - SELECT token_blacklist.id AS token_blacklist_id, token_blacklist.jti AS token_blacklist_jti, token_blacklist.token_type AS token_blacklist_token_type, token_blacklist.user_id AS token_blacklist_user_id, token_blacklist.revoked_at AS token_blacklist_revoked_at, token_blacklist.expires_at AS token_blacklist_expires_at 
FROM token_blacklist 
WHERE token_blacklist.jti = ?
 LIMIT ? OFFSET ?
2025-05-12 22:34:29,355 - sqlalchemy.engine.Engine - INFO - [cached since 3176s ago] ('155ae0d7-6fa2-4f4d-8e88-a1c67b30ba27', 1, 0)
2025-05-12 22:34:29,356 - app.utils.jwt_callbacks - INFO - Token 155ae0d7-6fa2-4f4d-8e88-a1c67b30ba27 is valid
2025-05-12 22:34:29,357 - app.utils.jwt_callbacks - INFO - Verifying token
2025-05-12 22:34:29,358 - app.utils.jwt_callbacks - INFO - JWT Header: {'alg': 'HS256', 'typ': 'JWT'}
2025-05-12 22:34:29,359 - app.utils.jwt_callbacks - INFO - JWT Data: {'fresh': False, 'iat': 1747060469, 'jti': '155ae0d7-6fa2-4f4d-8e88-a1c67b30ba27', 'type': 'access', 'sub': 1, 'nbf': 1747060469, 'csrf': 'IjhjN2YwMTdhYTk2MWRiM2JiNjU3OTkxYTQ5MjMzYzY4MWUzYzU3NzQi.aCIG9Q.Leqtb7IxDBGK9aMZJBCWuyYYRgk', 'exp': 1747064069, 'aud': 'task_management_system', 'user_claims': {'username': 'admin', 'roles': ['admin'], 'permissions': ['manage_users', 'manage_roles', 'manage_all_projects', 'manage_project', 'manage_all_tasks', 'manage_task', 'view_project', 'view_task', 'manage_resources', 'manage_risks', 'view_reports', 'create_task', 'assign_task', 'change_project_status', 'change_task_status', 'create_project'], 'is_active': True}, 'roles': ['admin'], 'admin': True}
2025-05-12 22:34:29,361 - app.utils.jwt_callbacks - INFO - Token time difference: -0.361462 seconds
2025-05-12 22:34:29,361 - app.utils.jwt_callbacks - INFO - Token verification successful
2025-05-12 22:34:29,362 - app.utils.jwt_callbacks - INFO - Looking up user with identity: 1
2025-05-12 22:34:29,363 - app.utils.jwt_callbacks - INFO - User found: admin
2025-05-12 22:34:29,363 - app.utils.jwt_callbacks - INFO - User roles: ['admin']
2025-05-12 22:34:29,364 - app.utils.jwt_callbacks - INFO - User permissions: ['manage_users', 'manage_roles', 'manage_all_projects', 'manage_project', 'manage_all_tasks', 'manage_task', 'view_project', 'view_task', 'manage_resources', 'manage_risks', 'view_reports', 'create_task', 'assign_task', 'change_project_status', 'change_task_status', 'create_project']
2025-05-12 22:34:29,365 - app - INFO - Dashboard access with user ID: 1
2025-05-12 22:34:29,367 - app - INFO - 用户 admin 是否为管理员: True
2025-05-12 22:34:29,368 - app - INFO - Token found in: cookies
2025-05-12 22:34:29,370 - app - INFO - Dashboard for user admin: roles=['admin'], permissions=['manage_users', 'view_project', 'manage_risks', 'manage_all_tasks', 'assign_task', 'manage_task', 'change_project_status', 'create_project', 'change_task_status', 'manage_roles', 'manage_all_projects', 'manage_resources', 'create_task', 'manage_project', 'view_reports', 'view_task']
2025-05-12 22:34:29,376 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-05-12 22:34:29,377 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 22:34:29] "GET /dashboard HTTP/1.1" 200 -
2025-05-12 22:34:29,411 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 22:34:29] "[36mGET /static/css/bootstrap.min.css HTTP/1.1[0m" 304 -
2025-05-12 22:34:29,413 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 22:34:29] "[36mGET /static/css/bootstrap-icons.css HTTP/1.1[0m" 304 -
2025-05-12 22:34:29,417 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 22:34:29] "[36mGET /static/css/style.css HTTP/1.1[0m" 304 -
2025-05-12 22:34:29,419 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 22:34:29] "[36mGET /static/js/jquery.min.js HTTP/1.1[0m" 304 -
2025-05-12 22:34:29,422 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 22:34:29] "[36mGET /static/js/bootstrap.bundle.min.js HTTP/1.1[0m" 304 -
2025-05-12 22:34:29,423 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 22:34:29] "[36mGET /static/js/utils.js HTTP/1.1[0m" 304 -
2025-05-12 22:34:29,424 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 22:34:29] "[36mGET /static/js/auth.js HTTP/1.1[0m" 304 -
2025-05-12 22:34:29,427 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 22:34:29] "[36mGET /static/js/fix-modals.js HTTP/1.1[0m" 304 -
2025-05-12 22:34:29,428 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 22:34:29] "[36mGET /static/js/csrf.js HTTP/1.1[0m" 304 -
2025-05-12 22:34:29,431 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 22:34:29] "[36mGET /static/js/user-profile.js HTTP/1.1[0m" 304 -
2025-05-12 22:34:29,455 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 22:34:29] "GET /static/css/fonts/bootstrap-icons.woff2 HTTP/1.1" 200 -
2025-05-12 22:34:29,458 - app - WARNING - 绕过JWT验证: /auth/user_info
2025-05-12 22:34:29,459 - app.utils.jwt_callbacks - INFO - Checking if token 155ae0d7-6fa2-4f4d-8e88-a1c67b30ba27 is in blocklist
2025-05-12 22:34:29,462 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-05-12 22:34:29,462 - sqlalchemy.engine.Engine - INFO - SELECT token_blacklist.id AS token_blacklist_id, token_blacklist.jti AS token_blacklist_jti, token_blacklist.token_type AS token_blacklist_token_type, token_blacklist.user_id AS token_blacklist_user_id, token_blacklist.revoked_at AS token_blacklist_revoked_at, token_blacklist.expires_at AS token_blacklist_expires_at 
FROM token_blacklist 
WHERE token_blacklist.jti = ?
 LIMIT ? OFFSET ?
2025-05-12 22:34:29,462 - sqlalchemy.engine.Engine - INFO - [cached since 3176s ago] ('155ae0d7-6fa2-4f4d-8e88-a1c67b30ba27', 1, 0)
2025-05-12 22:34:29,463 - app.utils.jwt_callbacks - INFO - Token 155ae0d7-6fa2-4f4d-8e88-a1c67b30ba27 is valid
2025-05-12 22:34:29,463 - app.utils.jwt_callbacks - INFO - Verifying token
2025-05-12 22:34:29,464 - app.utils.jwt_callbacks - INFO - JWT Header: {'alg': 'HS256', 'typ': 'JWT'}
2025-05-12 22:34:29,464 - app.utils.jwt_callbacks - INFO - JWT Data: {'fresh': False, 'iat': 1747060469, 'jti': '155ae0d7-6fa2-4f4d-8e88-a1c67b30ba27', 'type': 'access', 'sub': 1, 'nbf': 1747060469, 'csrf': 'IjhjN2YwMTdhYTk2MWRiM2JiNjU3OTkxYTQ5MjMzYzY4MWUzYzU3NzQi.aCIG9Q.Leqtb7IxDBGK9aMZJBCWuyYYRgk', 'exp': 1747064069, 'aud': 'task_management_system', 'user_claims': {'username': 'admin', 'roles': ['admin'], 'permissions': ['manage_users', 'manage_roles', 'manage_all_projects', 'manage_project', 'manage_all_tasks', 'manage_task', 'view_project', 'view_task', 'manage_resources', 'manage_risks', 'view_reports', 'create_task', 'assign_task', 'change_project_status', 'change_task_status', 'create_project'], 'is_active': True}, 'roles': ['admin'], 'admin': True}
2025-05-12 22:34:29,464 - app.utils.jwt_callbacks - INFO - Token time difference: -0.464451 seconds
2025-05-12 22:34:29,465 - app.utils.jwt_callbacks - INFO - Token verification successful
2025-05-12 22:34:29,465 - app.utils.jwt_callbacks - INFO - Looking up user with identity: 1
2025-05-12 22:34:29,466 - sqlalchemy.engine.Engine - INFO - SELECT users.id AS users_id, users.username AS users_username, users.email AS users_email, users.name AS users_name, users.password_hash AS users_password_hash, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.last_login AS users_last_login 
FROM users 
WHERE users.id = ?
2025-05-12 22:34:29,466 - sqlalchemy.engine.Engine - INFO - [cached since 3176s ago] (1,)
2025-05-12 22:34:29,468 - app.utils.jwt_callbacks - INFO - User found: admin
2025-05-12 22:34:29,469 - sqlalchemy.engine.Engine - INFO - SELECT roles.id AS roles_id, roles.name AS roles_name, roles.description AS roles_description, roles.created_at AS roles_created_at 
FROM roles, user_roles 
WHERE ? = user_roles.user_id AND roles.id = user_roles.role_id
2025-05-12 22:34:29,469 - sqlalchemy.engine.Engine - INFO - [cached since 3176s ago] (1,)
2025-05-12 22:34:29,471 - app.utils.jwt_callbacks - INFO - User roles: ['admin']
2025-05-12 22:34:29,473 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 22:34:29] "[36mGET /static/favicon.ico HTTP/1.1[0m" 304 -
2025-05-12 22:34:29,474 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions, role_permissions 
WHERE ? = role_permissions.role_id AND permissions.id = role_permissions.permission_id
2025-05-12 22:34:29,475 - sqlalchemy.engine.Engine - INFO - [cached since 3180s ago] (1,)
2025-05-12 22:34:29,477 - app.utils.jwt_callbacks - INFO - User permissions: ['manage_users', 'manage_roles', 'manage_all_projects', 'manage_project', 'manage_all_tasks', 'manage_task', 'view_project', 'view_task', 'manage_resources', 'manage_risks', 'view_reports', 'create_task', 'assign_task', 'change_project_status', 'change_task_status', 'create_project']
2025-05-12 22:34:29,477 - app - INFO - 获取用户信息...
2025-05-12 22:34:29,480 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions 
WHERE permissions.name = ?
 LIMIT ? OFFSET ?
2025-05-12 22:34:29,480 - sqlalchemy.engine.Engine - INFO - [cached since 3180s ago] ('manage_users', 1, 0)
2025-05-12 22:34:29,481 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions 
WHERE permissions.name = ?
 LIMIT ? OFFSET ?
2025-05-12 22:34:29,481 - sqlalchemy.engine.Engine - INFO - [cached since 3180s ago] ('manage_roles', 1, 0)
2025-05-12 22:34:29,482 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions 
WHERE permissions.name = ?
 LIMIT ? OFFSET ?
2025-05-12 22:34:29,482 - sqlalchemy.engine.Engine - INFO - [cached since 3180s ago] ('manage_all_projects', 1, 0)
2025-05-12 22:34:29,483 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions 
WHERE permissions.name = ?
 LIMIT ? OFFSET ?
2025-05-12 22:34:29,484 - sqlalchemy.engine.Engine - INFO - [cached since 3180s ago] ('manage_project', 1, 0)
2025-05-12 22:34:29,486 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions 
WHERE permissions.name = ?
 LIMIT ? OFFSET ?
2025-05-12 22:34:29,486 - sqlalchemy.engine.Engine - INFO - [cached since 3180s ago] ('manage_all_tasks', 1, 0)
2025-05-12 22:34:29,488 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions 
WHERE permissions.name = ?
 LIMIT ? OFFSET ?
2025-05-12 22:34:29,488 - sqlalchemy.engine.Engine - INFO - [cached since 3180s ago] ('manage_task', 1, 0)
2025-05-12 22:34:29,490 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions 
WHERE permissions.name = ?
 LIMIT ? OFFSET ?
2025-05-12 22:34:29,491 - sqlalchemy.engine.Engine - INFO - [cached since 3180s ago] ('view_project', 1, 0)
2025-05-12 22:34:29,492 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions 
WHERE permissions.name = ?
 LIMIT ? OFFSET ?
2025-05-12 22:34:29,492 - sqlalchemy.engine.Engine - INFO - [cached since 3180s ago] ('view_task', 1, 0)
2025-05-12 22:34:29,493 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions 
WHERE permissions.name = ?
 LIMIT ? OFFSET ?
2025-05-12 22:34:29,494 - sqlalchemy.engine.Engine - INFO - [cached since 3180s ago] ('manage_resources', 1, 0)
2025-05-12 22:34:29,496 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions 
WHERE permissions.name = ?
 LIMIT ? OFFSET ?
2025-05-12 22:34:29,496 - sqlalchemy.engine.Engine - INFO - [cached since 3180s ago] ('manage_risks', 1, 0)
2025-05-12 22:34:29,497 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions 
WHERE permissions.name = ?
 LIMIT ? OFFSET ?
2025-05-12 22:34:29,498 - sqlalchemy.engine.Engine - INFO - [cached since 3180s ago] ('view_reports', 1, 0)
2025-05-12 22:34:29,499 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions 
WHERE permissions.name = ?
 LIMIT ? OFFSET ?
2025-05-12 22:34:29,499 - sqlalchemy.engine.Engine - INFO - [cached since 3180s ago] ('create_task', 1, 0)
2025-05-12 22:34:29,501 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions 
WHERE permissions.name = ?
 LIMIT ? OFFSET ?
2025-05-12 22:34:29,501 - sqlalchemy.engine.Engine - INFO - [cached since 3180s ago] ('create_project', 1, 0)
2025-05-12 22:34:29,503 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions 
WHERE permissions.name = ?
 LIMIT ? OFFSET ?
2025-05-12 22:34:29,503 - sqlalchemy.engine.Engine - INFO - [cached since 3180s ago] ('assign_task', 1, 0)
2025-05-12 22:34:29,505 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions 
WHERE permissions.name = ?
 LIMIT ? OFFSET ?
2025-05-12 22:34:29,505 - sqlalchemy.engine.Engine - INFO - [cached since 3180s ago] ('change_project_status', 1, 0)
2025-05-12 22:34:29,507 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions 
WHERE permissions.name = ?
 LIMIT ? OFFSET ?
2025-05-12 22:34:29,507 - sqlalchemy.engine.Engine - INFO - [cached since 3180s ago] ('change_task_status', 1, 0)
2025-05-12 22:34:29,509 - app - INFO - ================== 用户信息API详情 ==================
2025-05-12 22:34:29,509 - app - INFO - 用户ID: 1
2025-05-12 22:34:29,510 - app - INFO - 用户名: admin
2025-05-12 22:34:29,510 - app - INFO - 用户角色: ['admin']
2025-05-12 22:34:29,511 - app - INFO - 是否admin: True
2025-05-12 22:34:29,511 - app - INFO - JWT声明: {'fresh': False, 'iat': 1747060469, 'jti': '155ae0d7-6fa2-4f4d-8e88-a1c67b30ba27', 'type': 'access', 'sub': 1, 'nbf': 1747060469, 'csrf': 'IjhjN2YwMTdhYTk2MWRiM2JiNjU3OTkxYTQ5MjMzYzY4MWUzYzU3NzQi.aCIG9Q.Leqtb7IxDBGK9aMZJBCWuyYYRgk', 'exp': 1747064069, 'aud': 'task_management_system', 'user_claims': {'username': 'admin', 'roles': ['admin'], 'permissions': ['manage_users', 'manage_roles', 'manage_all_projects', 'manage_project', 'manage_all_tasks', 'manage_task', 'view_project', 'view_task', 'manage_resources', 'manage_risks', 'view_reports', 'create_task', 'assign_task', 'change_project_status', 'change_task_status', 'create_project'], 'is_active': True}, 'roles': ['admin'], 'admin': True}
2025-05-12 22:34:29,512 - app - INFO - 确认admin用户身份，更新角色: ['admin']
2025-05-12 22:34:29,512 - app - INFO - 成功获取用户 admin 的信息
2025-05-12 22:34:29,513 - app - INFO - ================== 用户信息API结束 ==================
2025-05-12 22:34:29,513 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-05-12 22:34:29,513 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 22:34:29] "GET /auth/user_info?_=1747060469451&bypass_jwt=true HTTP/1.1" 200 -
2025-05-12 22:34:30,484 - app - WARNING - 绕过JWT验证: /projects
2025-05-12 22:34:30,486 - app.utils.jwt_callbacks - INFO - Checking if token 155ae0d7-6fa2-4f4d-8e88-a1c67b30ba27 is in blocklist
2025-05-12 22:34:30,487 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-05-12 22:34:30,487 - sqlalchemy.engine.Engine - INFO - SELECT token_blacklist.id AS token_blacklist_id, token_blacklist.jti AS token_blacklist_jti, token_blacklist.token_type AS token_blacklist_token_type, token_blacklist.user_id AS token_blacklist_user_id, token_blacklist.revoked_at AS token_blacklist_revoked_at, token_blacklist.expires_at AS token_blacklist_expires_at 
FROM token_blacklist 
WHERE token_blacklist.jti = ?
 LIMIT ? OFFSET ?
2025-05-12 22:34:30,488 - sqlalchemy.engine.Engine - INFO - [cached since 3177s ago] ('155ae0d7-6fa2-4f4d-8e88-a1c67b30ba27', 1, 0)
2025-05-12 22:34:30,488 - app.utils.jwt_callbacks - INFO - Token 155ae0d7-6fa2-4f4d-8e88-a1c67b30ba27 is valid
2025-05-12 22:34:30,489 - app.utils.jwt_callbacks - INFO - Verifying token
2025-05-12 22:34:30,489 - app.utils.jwt_callbacks - INFO - JWT Header: {'alg': 'HS256', 'typ': 'JWT'}
2025-05-12 22:34:30,490 - app.utils.jwt_callbacks - INFO - JWT Data: {'fresh': False, 'iat': 1747060469, 'jti': '155ae0d7-6fa2-4f4d-8e88-a1c67b30ba27', 'type': 'access', 'sub': 1, 'nbf': 1747060469, 'csrf': 'IjhjN2YwMTdhYTk2MWRiM2JiNjU3OTkxYTQ5MjMzYzY4MWUzYzU3NzQi.aCIG9Q.Leqtb7IxDBGK9aMZJBCWuyYYRgk', 'exp': 1747064069, 'aud': 'task_management_system', 'user_claims': {'username': 'admin', 'roles': ['admin'], 'permissions': ['manage_users', 'manage_roles', 'manage_all_projects', 'manage_project', 'manage_all_tasks', 'manage_task', 'view_project', 'view_task', 'manage_resources', 'manage_risks', 'view_reports', 'create_task', 'assign_task', 'change_project_status', 'change_task_status', 'create_project'], 'is_active': True}, 'roles': ['admin'], 'admin': True}
2025-05-12 22:34:30,490 - app.utils.jwt_callbacks - INFO - Token time difference: -1.490308 seconds
2025-05-12 22:34:30,491 - app.utils.jwt_callbacks - INFO - Token verification successful
2025-05-12 22:34:30,491 - app.utils.jwt_callbacks - INFO - Looking up user with identity: 1
2025-05-12 22:34:30,492 - sqlalchemy.engine.Engine - INFO - SELECT users.id AS users_id, users.username AS users_username, users.email AS users_email, users.name AS users_name, users.password_hash AS users_password_hash, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.last_login AS users_last_login 
FROM users 
WHERE users.id = ?
2025-05-12 22:34:30,493 - sqlalchemy.engine.Engine - INFO - [cached since 3177s ago] (1,)
2025-05-12 22:34:30,494 - app.utils.jwt_callbacks - INFO - User found: admin
2025-05-12 22:34:30,494 - sqlalchemy.engine.Engine - INFO - SELECT roles.id AS roles_id, roles.name AS roles_name, roles.description AS roles_description, roles.created_at AS roles_created_at 
FROM roles, user_roles 
WHERE ? = user_roles.user_id AND roles.id = user_roles.role_id
2025-05-12 22:34:30,494 - sqlalchemy.engine.Engine - INFO - [cached since 3177s ago] (1,)
2025-05-12 22:34:30,495 - app.utils.jwt_callbacks - INFO - User roles: ['admin']
2025-05-12 22:34:30,496 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions, role_permissions 
WHERE ? = role_permissions.role_id AND permissions.id = role_permissions.permission_id
2025-05-12 22:34:30,497 - sqlalchemy.engine.Engine - INFO - [cached since 3181s ago] (1,)
2025-05-12 22:34:30,498 - app.utils.jwt_callbacks - INFO - User permissions: ['manage_users', 'manage_roles', 'manage_all_projects', 'manage_project', 'manage_all_tasks', 'manage_task', 'view_project', 'view_task', 'manage_resources', 'manage_risks', 'view_reports', 'create_task', 'assign_task', 'change_project_status', 'change_task_status', 'create_project']
2025-05-12 22:34:30,499 - app.routes.main - INFO - JWT bypass enabled for projects - Using test user
2025-05-12 22:34:30,500 - sqlalchemy.engine.Engine - INFO - SELECT projects.id AS projects_id, projects.name AS projects_name, projects.description AS projects_description, projects.status AS projects_status, projects.start_date AS projects_start_date, projects.end_date AS projects_end_date, projects.progress AS projects_progress, projects.created_at AS projects_created_at, projects.updated_at AS projects_updated_at, projects.manager_id AS projects_manager_id, projects.owner_id AS projects_owner_id 
FROM projects
2025-05-12 22:34:30,501 - sqlalchemy.engine.Engine - INFO - [cached since 2215s ago] ()
2025-05-12 22:34:30,502 - sqlalchemy.engine.Engine - INFO - SELECT users.id AS users_id, users.username AS users_username, users.email AS users_email, users.name AS users_name, users.password_hash AS users_password_hash, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.last_login AS users_last_login 
FROM users 
WHERE users.id = ?
2025-05-12 22:34:30,502 - sqlalchemy.engine.Engine - INFO - [cached since 3177s ago] (3,)
2025-05-12 22:34:30,503 - sqlalchemy.engine.Engine - INFO - SELECT users.id AS users_id, users.username AS users_username, users.email AS users_email, users.name AS users_name, users.password_hash AS users_password_hash, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.last_login AS users_last_login 
FROM users 
WHERE users.id = ?
2025-05-12 22:34:30,503 - sqlalchemy.engine.Engine - INFO - [cached since 3177s ago] (5,)
2025-05-12 22:34:30,504 - sqlalchemy.engine.Engine - INFO - SELECT users.id AS users_id, users.username AS users_username, users.email AS users_email, users.name AS users_name, users.password_hash AS users_password_hash, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.last_login AS users_last_login 
FROM users 
WHERE users.id = ?
2025-05-12 22:34:30,504 - sqlalchemy.engine.Engine - INFO - [cached since 3177s ago] (8,)
2025-05-12 22:34:30,505 - sqlalchemy.engine.Engine - INFO - SELECT users.id AS users_id, users.username AS users_username, users.email AS users_email, users.name AS users_name, users.password_hash AS users_password_hash, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.last_login AS users_last_login 
FROM users 
WHERE users.id = ?
2025-05-12 22:34:30,507 - sqlalchemy.engine.Engine - INFO - [cached since 3177s ago] (5,)
2025-05-12 22:34:30,507 - sqlalchemy.engine.Engine - INFO - SELECT users.id AS users_id, users.username AS users_username, users.email AS users_email, users.name AS users_name, users.password_hash AS users_password_hash, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.last_login AS users_last_login 
FROM users 
WHERE users.id = ?
2025-05-12 22:34:30,508 - sqlalchemy.engine.Engine - INFO - [cached since 3177s ago] (9,)
2025-05-12 22:34:30,510 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-05-12 22:34:30,511 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 22:34:30] "GET /projects?bypass_jwt=true HTTP/1.1" 200 -
2025-05-12 22:34:30,540 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 22:34:30] "[36mGET /static/css/bootstrap.min.css HTTP/1.1[0m" 304 -
2025-05-12 22:34:30,541 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 22:34:30] "[36mGET /static/css/bootstrap-icons.css HTTP/1.1[0m" 304 -
2025-05-12 22:34:30,541 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 22:34:30] "[36mGET /static/css/style.css HTTP/1.1[0m" 304 -
2025-05-12 22:34:30,545 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 22:34:30] "GET /static/css/frappe-gantt.css HTTP/1.1" 200 -
2025-05-12 22:34:30,546 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 22:34:30] "[36mGET /static/js/jquery.min.js HTTP/1.1[0m" 304 -
2025-05-12 22:34:30,550 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 22:34:30] "GET /static/js/frappe-gantt.min.js HTTP/1.1" 200 -
2025-05-12 22:34:30,550 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 22:34:30] "[36mGET /static/js/bootstrap.bundle.min.js HTTP/1.1[0m" 304 -
2025-05-12 22:34:30,554 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 22:34:30] "[36mGET /static/js/utils.js HTTP/1.1[0m" 304 -
2025-05-12 22:34:30,557 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 22:34:30] "[36mGET /static/js/auth.js HTTP/1.1[0m" 304 -
2025-05-12 22:34:30,561 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 22:34:30] "[36mGET /static/js/fix-modals.js HTTP/1.1[0m" 304 -
2025-05-12 22:34:30,566 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 22:34:30] "[36mGET /static/js/csrf.js HTTP/1.1[0m" 304 -
2025-05-12 22:34:30,573 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 22:34:30] "[36mGET /static/js/user-profile.js HTTP/1.1[0m" 304 -
2025-05-12 22:34:30,592 - app - WARNING - 绕过JWT验证: /api/global/users
2025-05-12 22:34:30,594 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 22:34:30] "[33mGET /api/global/users?bypass_jwt=true&_=1747060470588 HTTP/1.1[0m" 404 -
2025-05-12 22:34:30,602 - app - WARNING - 绕过JWT验证: /api/project-managers
2025-05-12 22:34:30,602 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 22:34:30] "[36mGET /static/favicon.ico HTTP/1.1[0m" 304 -
2025-05-12 22:34:30,604 - app - INFO - 直接访问项目经理列表API
2025-05-12 22:34:30,606 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-05-12 22:34:30,607 - sqlalchemy.engine.Engine - INFO - SELECT users.id AS users_id, users.username AS users_username, users.email AS users_email, users.name AS users_name, users.password_hash AS users_password_hash, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.last_login AS users_last_login 
FROM users 
WHERE users.is_active = 1
2025-05-12 22:34:30,607 - sqlalchemy.engine.Engine - INFO - [cached since 2215s ago] ()
2025-05-12 22:34:30,609 - app - INFO - 已找到 9 个活跃用户用于项目经理选择
2025-05-12 22:34:30,610 - app - INFO - 返回 9 个可选的项目负责人
2025-05-12 22:34:30,611 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-05-12 22:34:30,611 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 22:34:30] "GET /api/project-managers?bypass_jwt=true&_=1747060470598 HTTP/1.1" 200 -
2025-05-12 22:34:34,051 - app - WARNING - 绕过JWT验证: /api/global/users
2025-05-12 22:34:34,052 - app - WARNING - 绕过JWT验证: /api/global/users
2025-05-12 22:34:34,057 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 22:34:34] "[33mGET /api/global/users?bypass_jwt=true&_=1747060474046 HTTP/1.1[0m" 404 -
2025-05-12 22:34:34,058 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 22:34:34] "[33mGET /api/global/users?bypass_jwt=true&_=1747060474046 HTTP/1.1[0m" 404 -
2025-05-12 22:34:34,075 - app - WARNING - 绕过JWT验证: /api/project-managers
2025-05-12 22:34:34,075 - app - WARNING - 绕过JWT验证: /api/project-managers
2025-05-12 22:34:34,076 - app - INFO - 直接访问项目经理列表API
2025-05-12 22:34:34,077 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-05-12 22:34:34,076 - app - INFO - 直接访问项目经理列表API
2025-05-12 22:34:34,081 - sqlalchemy.engine.Engine - INFO - SELECT users.id AS users_id, users.username AS users_username, users.email AS users_email, users.name AS users_name, users.password_hash AS users_password_hash, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.last_login AS users_last_login 
FROM users 
WHERE users.is_active = 1
2025-05-12 22:34:34,081 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-05-12 22:34:34,087 - sqlalchemy.engine.Engine - INFO - [cached since 2218s ago] ()
2025-05-12 22:34:34,088 - sqlalchemy.engine.Engine - INFO - SELECT users.id AS users_id, users.username AS users_username, users.email AS users_email, users.name AS users_name, users.password_hash AS users_password_hash, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.last_login AS users_last_login 
FROM users 
WHERE users.is_active = 1
2025-05-12 22:34:34,090 - sqlalchemy.engine.Engine - INFO - [cached since 2218s ago] ()
2025-05-12 22:34:34,091 - app - INFO - 已找到 9 个活跃用户用于项目经理选择
2025-05-12 22:34:34,092 - app - INFO - 已找到 9 个活跃用户用于项目经理选择
2025-05-12 22:34:34,097 - app - INFO - 返回 9 个可选的项目负责人
2025-05-12 22:34:34,098 - app - INFO - 返回 9 个可选的项目负责人
2025-05-12 22:34:34,102 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-05-12 22:34:34,103 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 22:34:34] "GET /api/project-managers?bypass_jwt=true&_=1747060474071 HTTP/1.1" 200 -
2025-05-12 22:34:34,107 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-05-12 22:34:34,108 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 22:34:34] "GET /api/project-managers?bypass_jwt=true&_=1747060474070 HTTP/1.1" 200 -
2025-05-12 22:34:52,079 - app - WARNING - 绕过JWT验证: /api/projects
2025-05-12 22:34:52,080 - app - WARNING - 绕过JWT验证: /api/projects
2025-05-12 22:34:52,082 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 22:34:52] "[31m[1mPOST /api/projects?bypass_jwt=true&_=1747060492074 HTTP/1.1[0m" 405 -
2025-05-12 22:34:52,083 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 22:34:52] "[31m[1mPOST /api/projects?bypass_jwt=true&_=1747060492074 HTTP/1.1[0m" 405 -
2025-05-12 22:39:17,761 - app - INFO - 未匹配的路径 /login，重定向到登录页面
2025-05-12 22:39:17,762 - app - INFO - 设置重定向跟踪: 路径=/login, 计数=1
2025-05-12 22:39:17,762 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 22:39:17] "[32mGET /login HTTP/1.1[0m" 302 -
2025-05-12 22:39:17,772 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 22:39:17] "GET /auth/login HTTP/1.1" 200 -
2025-05-12 22:39:17,819 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 22:39:17] "GET /static/css/bootstrap.min.css HTTP/1.1" 200 -
2025-05-12 22:39:17,819 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 22:39:17] "GET /static/css/bootstrap-icons.css HTTP/1.1" 200 -
2025-05-12 22:39:17,820 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 22:39:17] "GET /static/css/style.css HTTP/1.1" 200 -
2025-05-12 22:39:17,821 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 22:39:17] "GET /static/js/jquery.min.js HTTP/1.1" 200 -
2025-05-12 22:39:17,825 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 22:39:17] "GET /static/js/bootstrap.bundle.min.js HTTP/1.1" 200 -
2025-05-12 22:39:17,827 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 22:39:17] "GET /static/js/utils.js HTTP/1.1" 200 -
2025-05-12 22:39:17,834 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 22:39:17] "GET /static/js/auth.js HTTP/1.1" 200 -
2025-05-12 22:39:17,839 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 22:39:17] "GET /static/images/background.png HTTP/1.1" 200 -
2025-05-12 22:39:17,853 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 22:39:17] "GET /static/js/fix-modals.js HTTP/1.1" 200 -
2025-05-12 22:39:17,860 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 22:39:17] "GET /static/js/csrf.js HTTP/1.1" 200 -
2025-05-12 22:39:17,861 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 22:39:17] "GET /static/js/user-profile.js HTTP/1.1" 200 -
2025-05-12 22:39:17,863 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 22:39:17] "GET /static/js/background-helper.js HTTP/1.1" 200 -
2025-05-12 22:39:17,864 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 22:39:17] "[33mGET /static/uploads/background.png HTTP/1.1[0m" 404 -
2025-05-12 22:39:17,886 - app - WARNING - 绕过JWT验证: /auth/user_info
2025-05-12 22:39:17,889 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 22:39:17] "[33mGET /static/uploads/background.png HTTP/1.1[0m" 404 -
2025-05-12 22:39:17,889 - app.utils.jwt_callbacks - ERROR - Missing token: Missing JWT in headers, cookies or query_string (Missing Authorization Header; Missing cookie "access_token_cookie"; Missing 'jwt' query paramater)
2025-05-12 22:39:17,890 - app.utils.jwt_callbacks - INFO - Redirecting to login page
2025-05-12 22:39:17,891 - app - INFO - 设置重定向跟踪: 路径=/auth/user_info, 计数=1
2025-05-12 22:39:17,891 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 22:39:17] "[32mGET /auth/user_info?_=1747060757882&bypass_jwt=true HTTP/1.1[0m" 302 -
2025-05-12 22:39:17,898 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 22:39:17] "GET /auth/login HTTP/1.1" 200 -
2025-05-12 22:39:17,905 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 22:39:17] "GET /static/favicon.ico HTTP/1.1" 200 -
2025-05-12 22:39:18,891 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 22:39:18] "[33mGET /static/uploads/background.png HTTP/1.1[0m" 404 -
2025-05-12 22:39:19,130 - app - INFO - 登录请求 - 方法: POST, 内容类型: application/x-www-form-urlencoded
2025-05-12 22:39:19,130 - app - INFO - 请求头: {'Host': '127.0.0.1:5000', 'Connection': 'keep-alive', 'Content-Length': '135', 'Cache-Control': 'max-age=0', 'Sec-Ch-Ua': '"Chromium";v="136", "Microsoft Edge";v="136", "Not.A/Brand";v="99"', 'Sec-Ch-Ua-Mobile': '?0', 'Sec-Ch-Ua-Platform': '"Windows"', 'Origin': 'http://127.0.0.1:5000', 'Content-Type': 'application/x-www-form-urlencoded', 'Upgrade-Insecure-Requests': '1', 'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36 Edg/136.0.0.0', 'Accept': 'text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.7', 'Sec-Fetch-Site': 'same-origin', 'Sec-Fetch-Mode': 'navigate', 'Sec-Fetch-User': '?1', 'Sec-Fetch-Dest': 'document', 'Referer': 'http://127.0.0.1:5000/auth/login', 'Accept-Encoding': 'gzip, deflate, br, zstd', 'Accept-Language': 'zh-CN,zh;q=0.9,en;q=0.8,en-GB;q=0.7,en-US;q=0.6', 'Cookie': 'redirect_count=1; redirect_path=/auth/user_info; session=eyJjc3JmX3Rva2VuIjoiZjE5YWQwYzIxNzgxMmM5Y2E4OWQ4N2U0Mzk4ZGFhZTM0OGJjZGJkMCJ9.aCIIFg.rQiuA8eUGOsefJhs3bBHlC1g15g'}
2025-05-12 22:39:19,131 - app - INFO - 处理表单格式的登录请求
2025-05-12 22:39:19,132 - app - INFO - 表单数据: username=admin, password=********
2025-05-12 22:39:19,133 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-05-12 22:39:19,134 - sqlalchemy.engine.Engine - INFO - SELECT users.id AS users_id, users.username AS users_username, users.email AS users_email, users.name AS users_name, users.password_hash AS users_password_hash, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.last_login AS users_last_login 
FROM users 
WHERE users.username = ?
 LIMIT ? OFFSET ?
2025-05-12 22:39:19,135 - sqlalchemy.engine.Engine - INFO - [cached since 3466s ago] ('admin', 1, 0)
2025-05-12 22:39:19,608 - app - INFO - 已生成CSRF令牌: ImYxOWFkMG...
2025-05-12 22:39:19,610 - sqlalchemy.engine.Engine - INFO - SELECT roles.id AS roles_id, roles.name AS roles_name, roles.description AS roles_description, roles.created_at AS roles_created_at 
FROM roles, user_roles 
WHERE ? = user_roles.user_id AND roles.id = user_roles.role_id
2025-05-12 22:39:19,611 - sqlalchemy.engine.Engine - INFO - [cached since 3466s ago] (1,)
2025-05-12 22:39:19,613 - app - INFO - 用户 admin 的角色: ['admin']
2025-05-12 22:39:19,616 - app - INFO - 用户 admin 是否是管理员: True
2025-05-12 22:39:19,619 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions, role_permissions 
WHERE ? = role_permissions.role_id AND permissions.id = role_permissions.permission_id
2025-05-12 22:39:19,620 - sqlalchemy.engine.Engine - INFO - [cached since 3470s ago] (1,)
2025-05-12 22:39:19,632 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions 
WHERE permissions.name = ?
 LIMIT ? OFFSET ?
2025-05-12 22:39:19,633 - sqlalchemy.engine.Engine - INFO - [cached since 3470s ago] ('manage_users', 1, 0)
2025-05-12 22:39:19,635 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions 
WHERE permissions.name = ?
 LIMIT ? OFFSET ?
2025-05-12 22:39:19,636 - sqlalchemy.engine.Engine - INFO - [cached since 3470s ago] ('manage_roles', 1, 0)
2025-05-12 22:39:19,637 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions 
WHERE permissions.name = ?
 LIMIT ? OFFSET ?
2025-05-12 22:39:19,637 - sqlalchemy.engine.Engine - INFO - [cached since 3470s ago] ('manage_all_projects', 1, 0)
2025-05-12 22:39:19,638 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions 
WHERE permissions.name = ?
 LIMIT ? OFFSET ?
2025-05-12 22:39:19,639 - sqlalchemy.engine.Engine - INFO - [cached since 3470s ago] ('manage_project', 1, 0)
2025-05-12 22:39:19,640 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions 
WHERE permissions.name = ?
 LIMIT ? OFFSET ?
2025-05-12 22:39:19,640 - sqlalchemy.engine.Engine - INFO - [cached since 3470s ago] ('manage_all_tasks', 1, 0)
2025-05-12 22:39:19,642 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions 
WHERE permissions.name = ?
 LIMIT ? OFFSET ?
2025-05-12 22:39:19,643 - sqlalchemy.engine.Engine - INFO - [cached since 3470s ago] ('manage_task', 1, 0)
2025-05-12 22:39:19,645 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions 
WHERE permissions.name = ?
 LIMIT ? OFFSET ?
2025-05-12 22:39:19,645 - sqlalchemy.engine.Engine - INFO - [cached since 3470s ago] ('view_project', 1, 0)
2025-05-12 22:39:19,647 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions 
WHERE permissions.name = ?
 LIMIT ? OFFSET ?
2025-05-12 22:39:19,648 - sqlalchemy.engine.Engine - INFO - [cached since 3470s ago] ('view_task', 1, 0)
2025-05-12 22:39:19,650 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions 
WHERE permissions.name = ?
 LIMIT ? OFFSET ?
2025-05-12 22:39:19,651 - sqlalchemy.engine.Engine - INFO - [cached since 3470s ago] ('manage_resources', 1, 0)
2025-05-12 22:39:19,652 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions 
WHERE permissions.name = ?
 LIMIT ? OFFSET ?
2025-05-12 22:39:19,654 - sqlalchemy.engine.Engine - INFO - [cached since 3470s ago] ('manage_risks', 1, 0)
2025-05-12 22:39:19,655 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions 
WHERE permissions.name = ?
 LIMIT ? OFFSET ?
2025-05-12 22:39:19,656 - sqlalchemy.engine.Engine - INFO - [cached since 3470s ago] ('view_reports', 1, 0)
2025-05-12 22:39:19,658 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions 
WHERE permissions.name = ?
 LIMIT ? OFFSET ?
2025-05-12 22:39:19,659 - sqlalchemy.engine.Engine - INFO - [cached since 3470s ago] ('create_task', 1, 0)
2025-05-12 22:39:19,661 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions 
WHERE permissions.name = ?
 LIMIT ? OFFSET ?
2025-05-12 22:39:19,662 - sqlalchemy.engine.Engine - INFO - [cached since 3470s ago] ('create_project', 1, 0)
2025-05-12 22:39:19,664 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions 
WHERE permissions.name = ?
 LIMIT ? OFFSET ?
2025-05-12 22:39:19,665 - sqlalchemy.engine.Engine - INFO - [cached since 3470s ago] ('assign_task', 1, 0)
2025-05-12 22:39:19,666 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions 
WHERE permissions.name = ?
 LIMIT ? OFFSET ?
2025-05-12 22:39:19,667 - sqlalchemy.engine.Engine - INFO - [cached since 3470s ago] ('change_project_status', 1, 0)
2025-05-12 22:39:19,669 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions 
WHERE permissions.name = ?
 LIMIT ? OFFSET ?
2025-05-12 22:39:19,670 - sqlalchemy.engine.Engine - INFO - [cached since 3470s ago] ('change_task_status', 1, 0)
2025-05-12 22:39:19,672 - app.utils.jwt_callbacks - INFO - Adding additional claims for user 1
2025-05-12 22:39:19,673 - app.utils.jwt_callbacks - INFO - Added claims for user 1: {'aud': 'task_management_system', 'user_claims': {'username': 'admin', 'roles': ['admin'], 'permissions': ['manage_users', 'manage_roles', 'manage_all_projects', 'manage_project', 'manage_all_tasks', 'manage_task', 'view_project', 'view_task', 'manage_resources', 'manage_risks', 'view_reports', 'create_task', 'assign_task', 'change_project_status', 'change_task_status', 'create_project'], 'is_active': True}}
2025-05-12 22:39:19,674 - app.utils.jwt_callbacks - INFO - Adding additional claims for user 1
2025-05-12 22:39:19,675 - app.utils.jwt_callbacks - INFO - Added claims for user 1: {'aud': 'task_management_system', 'user_claims': {'username': 'admin', 'roles': ['admin'], 'permissions': ['manage_users', 'manage_roles', 'manage_all_projects', 'manage_project', 'manage_all_tasks', 'manage_task', 'view_project', 'view_task', 'manage_resources', 'manage_risks', 'view_reports', 'create_task', 'assign_task', 'change_project_status', 'change_task_status', 'create_project'], 'is_active': True}}
2025-05-12 22:39:19,681 - sqlalchemy.engine.Engine - INFO - UPDATE users SET updated_at=?, last_login=? WHERE users.id = ?
2025-05-12 22:39:19,682 - sqlalchemy.engine.Engine - INFO - [cached since 3466s ago] ('2025-05-12 14:39:19.681036', '2025-05-12 14:39:19.678991', 1)
2025-05-12 22:39:19,687 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-05-12 22:39:19,694 - app - INFO - 用户登录成功: admin
2025-05-12 22:39:19,696 - app - INFO - 设置重定向跟踪: 路径=/auth/login, 计数=1
2025-05-12 22:39:19,698 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 22:39:19] "[32mPOST /auth/login HTTP/1.1[0m" 302 -
2025-05-12 22:39:19,709 - app.utils.jwt_callbacks - INFO - Checking if token c3acae15-6ce3-4e17-af12-878f05bf08cb is in blocklist
2025-05-12 22:39:19,711 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-05-12 22:39:19,712 - sqlalchemy.engine.Engine - INFO - SELECT token_blacklist.id AS token_blacklist_id, token_blacklist.jti AS token_blacklist_jti, token_blacklist.token_type AS token_blacklist_token_type, token_blacklist.user_id AS token_blacklist_user_id, token_blacklist.revoked_at AS token_blacklist_revoked_at, token_blacklist.expires_at AS token_blacklist_expires_at 
FROM token_blacklist 
WHERE token_blacklist.jti = ?
 LIMIT ? OFFSET ?
2025-05-12 22:39:19,713 - sqlalchemy.engine.Engine - INFO - [cached since 3466s ago] ('c3acae15-6ce3-4e17-af12-878f05bf08cb', 1, 0)
2025-05-12 22:39:19,714 - app.utils.jwt_callbacks - INFO - Token c3acae15-6ce3-4e17-af12-878f05bf08cb is valid
2025-05-12 22:39:19,716 - app.utils.jwt_callbacks - INFO - Verifying token
2025-05-12 22:39:19,716 - app.utils.jwt_callbacks - INFO - JWT Header: {'alg': 'HS256', 'typ': 'JWT'}
2025-05-12 22:39:19,717 - app.utils.jwt_callbacks - INFO - JWT Data: {'fresh': False, 'iat': 1747060759, 'jti': 'c3acae15-6ce3-4e17-af12-878f05bf08cb', 'type': 'access', 'sub': 1, 'nbf': 1747060759, 'csrf': 'ImYxOWFkMGMyMTc4MTJjOWNhODlkODdlNDM5OGRhYWUzNDhiY2RiZDAi.aCIIFw.qOKTdjCwbT2gf74NhnKEcK5aZhk', 'exp': 1747064359, 'aud': 'task_management_system', 'user_claims': {'username': 'admin', 'roles': ['admin'], 'permissions': ['manage_users', 'manage_roles', 'manage_all_projects', 'manage_project', 'manage_all_tasks', 'manage_task', 'view_project', 'view_task', 'manage_resources', 'manage_risks', 'view_reports', 'create_task', 'assign_task', 'change_project_status', 'change_task_status', 'create_project'], 'is_active': True}, 'roles': ['admin'], 'admin': True}
2025-05-12 22:39:19,717 - app.utils.jwt_callbacks - INFO - Token time difference: -0.71705 seconds
2025-05-12 22:39:19,718 - app.utils.jwt_callbacks - INFO - Token verification successful
2025-05-12 22:39:19,720 - app.utils.jwt_callbacks - INFO - Looking up user with identity: 1
2025-05-12 22:39:19,723 - sqlalchemy.engine.Engine - INFO - SELECT users.id AS users_id, users.username AS users_username, users.email AS users_email, users.name AS users_name, users.password_hash AS users_password_hash, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.last_login AS users_last_login 
FROM users 
WHERE users.id = ?
2025-05-12 22:39:19,724 - sqlalchemy.engine.Engine - INFO - [cached since 3466s ago] (1,)
2025-05-12 22:39:19,725 - app.utils.jwt_callbacks - INFO - User found: admin
2025-05-12 22:39:19,726 - sqlalchemy.engine.Engine - INFO - SELECT roles.id AS roles_id, roles.name AS roles_name, roles.description AS roles_description, roles.created_at AS roles_created_at 
FROM roles, user_roles 
WHERE ? = user_roles.user_id AND roles.id = user_roles.role_id
2025-05-12 22:39:19,728 - sqlalchemy.engine.Engine - INFO - [cached since 3466s ago] (1,)
2025-05-12 22:39:19,730 - app.utils.jwt_callbacks - INFO - User roles: ['admin']
2025-05-12 22:39:19,731 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions, role_permissions 
WHERE ? = role_permissions.role_id AND permissions.id = role_permissions.permission_id
2025-05-12 22:39:19,731 - sqlalchemy.engine.Engine - INFO - [cached since 3470s ago] (1,)
2025-05-12 22:39:19,732 - app.utils.jwt_callbacks - INFO - User permissions: ['manage_users', 'manage_roles', 'manage_all_projects', 'manage_project', 'manage_all_tasks', 'manage_task', 'view_project', 'view_task', 'manage_resources', 'manage_risks', 'view_reports', 'create_task', 'assign_task', 'change_project_status', 'change_task_status', 'create_project']
2025-05-12 22:39:19,733 - app.utils.jwt_callbacks - INFO - Checking if token c3acae15-6ce3-4e17-af12-878f05bf08cb is in blocklist
2025-05-12 22:39:19,735 - sqlalchemy.engine.Engine - INFO - SELECT token_blacklist.id AS token_blacklist_id, token_blacklist.jti AS token_blacklist_jti, token_blacklist.token_type AS token_blacklist_token_type, token_blacklist.user_id AS token_blacklist_user_id, token_blacklist.revoked_at AS token_blacklist_revoked_at, token_blacklist.expires_at AS token_blacklist_expires_at 
FROM token_blacklist 
WHERE token_blacklist.jti = ?
 LIMIT ? OFFSET ?
2025-05-12 22:39:19,736 - sqlalchemy.engine.Engine - INFO - [cached since 3466s ago] ('c3acae15-6ce3-4e17-af12-878f05bf08cb', 1, 0)
2025-05-12 22:39:19,737 - app.utils.jwt_callbacks - INFO - Token c3acae15-6ce3-4e17-af12-878f05bf08cb is valid
2025-05-12 22:39:19,738 - app.utils.jwt_callbacks - INFO - Verifying token
2025-05-12 22:39:19,739 - app.utils.jwt_callbacks - INFO - JWT Header: {'alg': 'HS256', 'typ': 'JWT'}
2025-05-12 22:39:19,739 - app.utils.jwt_callbacks - INFO - JWT Data: {'fresh': False, 'iat': 1747060759, 'jti': 'c3acae15-6ce3-4e17-af12-878f05bf08cb', 'type': 'access', 'sub': 1, 'nbf': 1747060759, 'csrf': 'ImYxOWFkMGMyMTc4MTJjOWNhODlkODdlNDM5OGRhYWUzNDhiY2RiZDAi.aCIIFw.qOKTdjCwbT2gf74NhnKEcK5aZhk', 'exp': 1747064359, 'aud': 'task_management_system', 'user_claims': {'username': 'admin', 'roles': ['admin'], 'permissions': ['manage_users', 'manage_roles', 'manage_all_projects', 'manage_project', 'manage_all_tasks', 'manage_task', 'view_project', 'view_task', 'manage_resources', 'manage_risks', 'view_reports', 'create_task', 'assign_task', 'change_project_status', 'change_task_status', 'create_project'], 'is_active': True}, 'roles': ['admin'], 'admin': True}
2025-05-12 22:39:19,741 - app.utils.jwt_callbacks - INFO - Token time difference: -0.741719 seconds
2025-05-12 22:39:19,742 - app.utils.jwt_callbacks - INFO - Token verification successful
2025-05-12 22:39:19,743 - app.utils.jwt_callbacks - INFO - Looking up user with identity: 1
2025-05-12 22:39:19,745 - app.utils.jwt_callbacks - INFO - User found: admin
2025-05-12 22:39:19,746 - app.utils.jwt_callbacks - INFO - User roles: ['admin']
2025-05-12 22:39:19,746 - app.utils.jwt_callbacks - INFO - User permissions: ['manage_users', 'manage_roles', 'manage_all_projects', 'manage_project', 'manage_all_tasks', 'manage_task', 'view_project', 'view_task', 'manage_resources', 'manage_risks', 'view_reports', 'create_task', 'assign_task', 'change_project_status', 'change_task_status', 'create_project']
2025-05-12 22:39:19,748 - app - INFO - Dashboard access with user ID: 1
2025-05-12 22:39:19,750 - app - INFO - 用户 admin 是否为管理员: True
2025-05-12 22:39:19,751 - app - INFO - Token found in: cookies
2025-05-12 22:39:19,752 - app - INFO - Dashboard for user admin: roles=['admin'], permissions=['manage_users', 'view_project', 'manage_risks', 'manage_all_tasks', 'assign_task', 'manage_task', 'change_project_status', 'create_project', 'change_task_status', 'manage_roles', 'manage_all_projects', 'manage_resources', 'create_task', 'manage_project', 'view_reports', 'view_task']
2025-05-12 22:39:19,755 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-05-12 22:39:19,756 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 22:39:19] "GET /dashboard HTTP/1.1" 200 -
2025-05-12 22:39:19,791 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 22:39:19] "[36mGET /static/css/bootstrap.min.css HTTP/1.1[0m" 304 -
2025-05-12 22:39:19,792 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 22:39:19] "[36mGET /static/css/bootstrap-icons.css HTTP/1.1[0m" 304 -
2025-05-12 22:39:19,796 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 22:39:19] "[36mGET /static/css/style.css HTTP/1.1[0m" 304 -
2025-05-12 22:39:19,797 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 22:39:19] "[36mGET /static/js/jquery.min.js HTTP/1.1[0m" 304 -
2025-05-12 22:39:19,801 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 22:39:19] "[36mGET /static/js/bootstrap.bundle.min.js HTTP/1.1[0m" 304 -
2025-05-12 22:39:19,803 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 22:39:19] "[36mGET /static/js/utils.js HTTP/1.1[0m" 304 -
2025-05-12 22:39:19,807 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 22:39:19] "[36mGET /static/js/auth.js HTTP/1.1[0m" 304 -
2025-05-12 22:39:19,813 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 22:39:19] "[36mGET /static/js/fix-modals.js HTTP/1.1[0m" 304 -
2025-05-12 22:39:19,815 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 22:39:19] "[36mGET /static/js/csrf.js HTTP/1.1[0m" 304 -
2025-05-12 22:39:19,815 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 22:39:19] "[36mGET /static/js/user-profile.js HTTP/1.1[0m" 304 -
2025-05-12 22:39:19,842 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 22:39:19] "GET /static/css/fonts/bootstrap-icons.woff2 HTTP/1.1" 200 -
2025-05-12 22:39:19,842 - app - WARNING - 绕过JWT验证: /auth/user_info
2025-05-12 22:39:19,845 - app.utils.jwt_callbacks - INFO - Checking if token c3acae15-6ce3-4e17-af12-878f05bf08cb is in blocklist
2025-05-12 22:39:19,847 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-05-12 22:39:19,847 - sqlalchemy.engine.Engine - INFO - SELECT token_blacklist.id AS token_blacklist_id, token_blacklist.jti AS token_blacklist_jti, token_blacklist.token_type AS token_blacklist_token_type, token_blacklist.user_id AS token_blacklist_user_id, token_blacklist.revoked_at AS token_blacklist_revoked_at, token_blacklist.expires_at AS token_blacklist_expires_at 
FROM token_blacklist 
WHERE token_blacklist.jti = ?
 LIMIT ? OFFSET ?
2025-05-12 22:39:19,848 - sqlalchemy.engine.Engine - INFO - [cached since 3466s ago] ('c3acae15-6ce3-4e17-af12-878f05bf08cb', 1, 0)
2025-05-12 22:39:19,849 - app.utils.jwt_callbacks - INFO - Token c3acae15-6ce3-4e17-af12-878f05bf08cb is valid
2025-05-12 22:39:19,850 - app.utils.jwt_callbacks - INFO - Verifying token
2025-05-12 22:39:19,850 - app.utils.jwt_callbacks - INFO - JWT Header: {'alg': 'HS256', 'typ': 'JWT'}
2025-05-12 22:39:19,851 - app.utils.jwt_callbacks - INFO - JWT Data: {'fresh': False, 'iat': 1747060759, 'jti': 'c3acae15-6ce3-4e17-af12-878f05bf08cb', 'type': 'access', 'sub': 1, 'nbf': 1747060759, 'csrf': 'ImYxOWFkMGMyMTc4MTJjOWNhODlkODdlNDM5OGRhYWUzNDhiY2RiZDAi.aCIIFw.qOKTdjCwbT2gf74NhnKEcK5aZhk', 'exp': 1747064359, 'aud': 'task_management_system', 'user_claims': {'username': 'admin', 'roles': ['admin'], 'permissions': ['manage_users', 'manage_roles', 'manage_all_projects', 'manage_project', 'manage_all_tasks', 'manage_task', 'view_project', 'view_task', 'manage_resources', 'manage_risks', 'view_reports', 'create_task', 'assign_task', 'change_project_status', 'change_task_status', 'create_project'], 'is_active': True}, 'roles': ['admin'], 'admin': True}
2025-05-12 22:39:19,852 - app.utils.jwt_callbacks - INFO - Token time difference: -0.852986 seconds
2025-05-12 22:39:19,852 - app.utils.jwt_callbacks - INFO - Token verification successful
2025-05-12 22:39:19,852 - app.utils.jwt_callbacks - INFO - Looking up user with identity: 1
2025-05-12 22:39:19,855 - sqlalchemy.engine.Engine - INFO - SELECT users.id AS users_id, users.username AS users_username, users.email AS users_email, users.name AS users_name, users.password_hash AS users_password_hash, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.last_login AS users_last_login 
FROM users 
WHERE users.id = ?
2025-05-12 22:39:19,855 - sqlalchemy.engine.Engine - INFO - [cached since 3466s ago] (1,)
2025-05-12 22:39:19,856 - app.utils.jwt_callbacks - INFO - User found: admin
2025-05-12 22:39:19,857 - sqlalchemy.engine.Engine - INFO - SELECT roles.id AS roles_id, roles.name AS roles_name, roles.description AS roles_description, roles.created_at AS roles_created_at 
FROM roles, user_roles 
WHERE ? = user_roles.user_id AND roles.id = user_roles.role_id
2025-05-12 22:39:19,858 - sqlalchemy.engine.Engine - INFO - [cached since 3466s ago] (1,)
2025-05-12 22:39:19,858 - app.utils.jwt_callbacks - INFO - User roles: ['admin']
2025-05-12 22:39:19,860 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions, role_permissions 
WHERE ? = role_permissions.role_id AND permissions.id = role_permissions.permission_id
2025-05-12 22:39:19,861 - sqlalchemy.engine.Engine - INFO - [cached since 3470s ago] (1,)
2025-05-12 22:39:19,862 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 22:39:19] "[36mGET /static/favicon.ico HTTP/1.1[0m" 304 -
2025-05-12 22:39:19,864 - app.utils.jwt_callbacks - INFO - User permissions: ['manage_users', 'manage_roles', 'manage_all_projects', 'manage_project', 'manage_all_tasks', 'manage_task', 'view_project', 'view_task', 'manage_resources', 'manage_risks', 'view_reports', 'create_task', 'assign_task', 'change_project_status', 'change_task_status', 'create_project']
2025-05-12 22:39:19,865 - app - INFO - 获取用户信息...
2025-05-12 22:39:19,869 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions 
WHERE permissions.name = ?
 LIMIT ? OFFSET ?
2025-05-12 22:39:19,871 - sqlalchemy.engine.Engine - INFO - [cached since 3470s ago] ('manage_users', 1, 0)
2025-05-12 22:39:19,872 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions 
WHERE permissions.name = ?
 LIMIT ? OFFSET ?
2025-05-12 22:39:19,872 - sqlalchemy.engine.Engine - INFO - [cached since 3470s ago] ('manage_roles', 1, 0)
2025-05-12 22:39:19,873 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions 
WHERE permissions.name = ?
 LIMIT ? OFFSET ?
2025-05-12 22:39:19,874 - sqlalchemy.engine.Engine - INFO - [cached since 3470s ago] ('manage_all_projects', 1, 0)
2025-05-12 22:39:19,875 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions 
WHERE permissions.name = ?
 LIMIT ? OFFSET ?
2025-05-12 22:39:19,875 - sqlalchemy.engine.Engine - INFO - [cached since 3470s ago] ('manage_project', 1, 0)
2025-05-12 22:39:19,876 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions 
WHERE permissions.name = ?
 LIMIT ? OFFSET ?
2025-05-12 22:39:19,877 - sqlalchemy.engine.Engine - INFO - [cached since 3470s ago] ('manage_all_tasks', 1, 0)
2025-05-12 22:39:19,878 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions 
WHERE permissions.name = ?
 LIMIT ? OFFSET ?
2025-05-12 22:39:19,879 - sqlalchemy.engine.Engine - INFO - [cached since 3470s ago] ('manage_task', 1, 0)
2025-05-12 22:39:19,880 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions 
WHERE permissions.name = ?
 LIMIT ? OFFSET ?
2025-05-12 22:39:19,881 - sqlalchemy.engine.Engine - INFO - [cached since 3470s ago] ('view_project', 1, 0)
2025-05-12 22:39:19,883 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions 
WHERE permissions.name = ?
 LIMIT ? OFFSET ?
2025-05-12 22:39:19,883 - sqlalchemy.engine.Engine - INFO - [cached since 3470s ago] ('view_task', 1, 0)
2025-05-12 22:39:19,884 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions 
WHERE permissions.name = ?
 LIMIT ? OFFSET ?
2025-05-12 22:39:19,885 - sqlalchemy.engine.Engine - INFO - [cached since 3470s ago] ('manage_resources', 1, 0)
2025-05-12 22:39:19,887 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions 
WHERE permissions.name = ?
 LIMIT ? OFFSET ?
2025-05-12 22:39:19,888 - sqlalchemy.engine.Engine - INFO - [cached since 3470s ago] ('manage_risks', 1, 0)
2025-05-12 22:39:19,889 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions 
WHERE permissions.name = ?
 LIMIT ? OFFSET ?
2025-05-12 22:39:19,889 - sqlalchemy.engine.Engine - INFO - [cached since 3470s ago] ('view_reports', 1, 0)
2025-05-12 22:39:19,890 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions 
WHERE permissions.name = ?
 LIMIT ? OFFSET ?
2025-05-12 22:39:19,890 - sqlalchemy.engine.Engine - INFO - [cached since 3470s ago] ('create_task', 1, 0)
2025-05-12 22:39:19,892 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions 
WHERE permissions.name = ?
 LIMIT ? OFFSET ?
2025-05-12 22:39:19,892 - sqlalchemy.engine.Engine - INFO - [cached since 3470s ago] ('create_project', 1, 0)
2025-05-12 22:39:19,894 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions 
WHERE permissions.name = ?
 LIMIT ? OFFSET ?
2025-05-12 22:39:19,895 - sqlalchemy.engine.Engine - INFO - [cached since 3470s ago] ('assign_task', 1, 0)
2025-05-12 22:39:19,896 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions 
WHERE permissions.name = ?
 LIMIT ? OFFSET ?
2025-05-12 22:39:19,897 - sqlalchemy.engine.Engine - INFO - [cached since 3470s ago] ('change_project_status', 1, 0)
2025-05-12 22:39:19,898 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions 
WHERE permissions.name = ?
 LIMIT ? OFFSET ?
2025-05-12 22:39:19,898 - sqlalchemy.engine.Engine - INFO - [cached since 3470s ago] ('change_task_status', 1, 0)
2025-05-12 22:39:19,900 - app - INFO - ================== 用户信息API详情 ==================
2025-05-12 22:39:19,901 - app - INFO - 用户ID: 1
2025-05-12 22:39:19,901 - app - INFO - 用户名: admin
2025-05-12 22:39:19,903 - app - INFO - 用户角色: ['admin']
2025-05-12 22:39:19,903 - app - INFO - 是否admin: True
2025-05-12 22:39:19,903 - app - INFO - JWT声明: {'fresh': False, 'iat': 1747060759, 'jti': 'c3acae15-6ce3-4e17-af12-878f05bf08cb', 'type': 'access', 'sub': 1, 'nbf': 1747060759, 'csrf': 'ImYxOWFkMGMyMTc4MTJjOWNhODlkODdlNDM5OGRhYWUzNDhiY2RiZDAi.aCIIFw.qOKTdjCwbT2gf74NhnKEcK5aZhk', 'exp': 1747064359, 'aud': 'task_management_system', 'user_claims': {'username': 'admin', 'roles': ['admin'], 'permissions': ['manage_users', 'manage_roles', 'manage_all_projects', 'manage_project', 'manage_all_tasks', 'manage_task', 'view_project', 'view_task', 'manage_resources', 'manage_risks', 'view_reports', 'create_task', 'assign_task', 'change_project_status', 'change_task_status', 'create_project'], 'is_active': True}, 'roles': ['admin'], 'admin': True}
2025-05-12 22:39:19,904 - app - INFO - 确认admin用户身份，更新角色: ['admin']
2025-05-12 22:39:19,904 - app - INFO - 成功获取用户 admin 的信息
2025-05-12 22:39:19,905 - app - INFO - ================== 用户信息API结束 ==================
2025-05-12 22:39:19,906 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-05-12 22:39:19,906 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 22:39:19] "GET /auth/user_info?_=1747060759835&bypass_jwt=true HTTP/1.1" 200 -
2025-05-12 22:39:20,929 - app - WARNING - 绕过JWT验证: /projects
2025-05-12 22:39:20,931 - app.utils.jwt_callbacks - INFO - Checking if token c3acae15-6ce3-4e17-af12-878f05bf08cb is in blocklist
2025-05-12 22:39:20,931 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-05-12 22:39:20,932 - sqlalchemy.engine.Engine - INFO - SELECT token_blacklist.id AS token_blacklist_id, token_blacklist.jti AS token_blacklist_jti, token_blacklist.token_type AS token_blacklist_token_type, token_blacklist.user_id AS token_blacklist_user_id, token_blacklist.revoked_at AS token_blacklist_revoked_at, token_blacklist.expires_at AS token_blacklist_expires_at 
FROM token_blacklist 
WHERE token_blacklist.jti = ?
 LIMIT ? OFFSET ?
2025-05-12 22:39:20,932 - sqlalchemy.engine.Engine - INFO - [cached since 3467s ago] ('c3acae15-6ce3-4e17-af12-878f05bf08cb', 1, 0)
2025-05-12 22:39:20,933 - app.utils.jwt_callbacks - INFO - Token c3acae15-6ce3-4e17-af12-878f05bf08cb is valid
2025-05-12 22:39:20,933 - app.utils.jwt_callbacks - INFO - Verifying token
2025-05-12 22:39:20,933 - app.utils.jwt_callbacks - INFO - JWT Header: {'alg': 'HS256', 'typ': 'JWT'}
2025-05-12 22:39:20,934 - app.utils.jwt_callbacks - INFO - JWT Data: {'fresh': False, 'iat': 1747060759, 'jti': 'c3acae15-6ce3-4e17-af12-878f05bf08cb', 'type': 'access', 'sub': 1, 'nbf': 1747060759, 'csrf': 'ImYxOWFkMGMyMTc4MTJjOWNhODlkODdlNDM5OGRhYWUzNDhiY2RiZDAi.aCIIFw.qOKTdjCwbT2gf74NhnKEcK5aZhk', 'exp': 1747064359, 'aud': 'task_management_system', 'user_claims': {'username': 'admin', 'roles': ['admin'], 'permissions': ['manage_users', 'manage_roles', 'manage_all_projects', 'manage_project', 'manage_all_tasks', 'manage_task', 'view_project', 'view_task', 'manage_resources', 'manage_risks', 'view_reports', 'create_task', 'assign_task', 'change_project_status', 'change_task_status', 'create_project'], 'is_active': True}, 'roles': ['admin'], 'admin': True}
2025-05-12 22:39:20,934 - app.utils.jwt_callbacks - INFO - Token time difference: -1.934951 seconds
2025-05-12 22:39:20,937 - app.utils.jwt_callbacks - INFO - Token verification successful
2025-05-12 22:39:20,937 - app.utils.jwt_callbacks - INFO - Looking up user with identity: 1
2025-05-12 22:39:20,938 - sqlalchemy.engine.Engine - INFO - SELECT users.id AS users_id, users.username AS users_username, users.email AS users_email, users.name AS users_name, users.password_hash AS users_password_hash, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.last_login AS users_last_login 
FROM users 
WHERE users.id = ?
2025-05-12 22:39:20,939 - sqlalchemy.engine.Engine - INFO - [cached since 3467s ago] (1,)
2025-05-12 22:39:20,940 - app.utils.jwt_callbacks - INFO - User found: admin
2025-05-12 22:39:20,941 - sqlalchemy.engine.Engine - INFO - SELECT roles.id AS roles_id, roles.name AS roles_name, roles.description AS roles_description, roles.created_at AS roles_created_at 
FROM roles, user_roles 
WHERE ? = user_roles.user_id AND roles.id = user_roles.role_id
2025-05-12 22:39:20,942 - sqlalchemy.engine.Engine - INFO - [cached since 3467s ago] (1,)
2025-05-12 22:39:20,943 - app.utils.jwt_callbacks - INFO - User roles: ['admin']
2025-05-12 22:39:20,944 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions, role_permissions 
WHERE ? = role_permissions.role_id AND permissions.id = role_permissions.permission_id
2025-05-12 22:39:20,945 - sqlalchemy.engine.Engine - INFO - [cached since 3471s ago] (1,)
2025-05-12 22:39:20,946 - app.utils.jwt_callbacks - INFO - User permissions: ['manage_users', 'manage_roles', 'manage_all_projects', 'manage_project', 'manage_all_tasks', 'manage_task', 'view_project', 'view_task', 'manage_resources', 'manage_risks', 'view_reports', 'create_task', 'assign_task', 'change_project_status', 'change_task_status', 'create_project']
2025-05-12 22:39:20,947 - app.routes.main - INFO - JWT bypass enabled for projects - Using test user
2025-05-12 22:39:20,948 - sqlalchemy.engine.Engine - INFO - SELECT projects.id AS projects_id, projects.name AS projects_name, projects.description AS projects_description, projects.status AS projects_status, projects.start_date AS projects_start_date, projects.end_date AS projects_end_date, projects.progress AS projects_progress, projects.created_at AS projects_created_at, projects.updated_at AS projects_updated_at, projects.manager_id AS projects_manager_id, projects.owner_id AS projects_owner_id 
FROM projects
2025-05-12 22:39:20,948 - sqlalchemy.engine.Engine - INFO - [cached since 2506s ago] ()
2025-05-12 22:39:20,949 - sqlalchemy.engine.Engine - INFO - SELECT users.id AS users_id, users.username AS users_username, users.email AS users_email, users.name AS users_name, users.password_hash AS users_password_hash, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.last_login AS users_last_login 
FROM users 
WHERE users.id = ?
2025-05-12 22:39:20,949 - sqlalchemy.engine.Engine - INFO - [cached since 3467s ago] (3,)
2025-05-12 22:39:20,951 - sqlalchemy.engine.Engine - INFO - SELECT users.id AS users_id, users.username AS users_username, users.email AS users_email, users.name AS users_name, users.password_hash AS users_password_hash, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.last_login AS users_last_login 
FROM users 
WHERE users.id = ?
2025-05-12 22:39:20,952 - sqlalchemy.engine.Engine - INFO - [cached since 3467s ago] (5,)
2025-05-12 22:39:20,953 - sqlalchemy.engine.Engine - INFO - SELECT users.id AS users_id, users.username AS users_username, users.email AS users_email, users.name AS users_name, users.password_hash AS users_password_hash, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.last_login AS users_last_login 
FROM users 
WHERE users.id = ?
2025-05-12 22:39:20,954 - sqlalchemy.engine.Engine - INFO - [cached since 3467s ago] (8,)
2025-05-12 22:39:20,956 - sqlalchemy.engine.Engine - INFO - SELECT users.id AS users_id, users.username AS users_username, users.email AS users_email, users.name AS users_name, users.password_hash AS users_password_hash, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.last_login AS users_last_login 
FROM users 
WHERE users.id = ?
2025-05-12 22:39:20,956 - sqlalchemy.engine.Engine - INFO - [cached since 3467s ago] (5,)
2025-05-12 22:39:20,960 - sqlalchemy.engine.Engine - INFO - SELECT users.id AS users_id, users.username AS users_username, users.email AS users_email, users.name AS users_name, users.password_hash AS users_password_hash, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.last_login AS users_last_login 
FROM users 
WHERE users.id = ?
2025-05-12 22:39:20,960 - sqlalchemy.engine.Engine - INFO - [cached since 3467s ago] (9,)
2025-05-12 22:39:20,965 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-05-12 22:39:20,965 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 22:39:20] "GET /projects?bypass_jwt=true HTTP/1.1" 200 -
2025-05-12 22:39:20,998 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 22:39:20] "[36mGET /static/css/bootstrap.min.css HTTP/1.1[0m" 304 -
2025-05-12 22:39:20,999 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 22:39:20] "[36mGET /static/css/bootstrap-icons.css HTTP/1.1[0m" 304 -
2025-05-12 22:39:21,001 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 22:39:21] "[36mGET /static/css/style.css HTTP/1.1[0m" 304 -
2025-05-12 22:39:21,003 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 22:39:21] "[36mGET /static/js/jquery.min.js HTTP/1.1[0m" 304 -
2025-05-12 22:39:21,008 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 22:39:21] "[36mGET /static/js/bootstrap.bundle.min.js HTTP/1.1[0m" 304 -
2025-05-12 22:39:21,008 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 22:39:21] "GET /static/css/frappe-gantt.css HTTP/1.1" 200 -
2025-05-12 22:39:21,014 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 22:39:21] "GET /static/js/frappe-gantt.min.js HTTP/1.1" 200 -
2025-05-12 22:39:21,015 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 22:39:21] "[36mGET /static/js/utils.js HTTP/1.1[0m" 304 -
2025-05-12 22:39:21,016 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 22:39:21] "[36mGET /static/js/auth.js HTTP/1.1[0m" 304 -
2025-05-12 22:39:21,020 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 22:39:21] "[36mGET /static/js/fix-modals.js HTTP/1.1[0m" 304 -
2025-05-12 22:39:21,023 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 22:39:21] "[36mGET /static/js/csrf.js HTTP/1.1[0m" 304 -
2025-05-12 22:39:21,026 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 22:39:21] "[36mGET /static/js/user-profile.js HTTP/1.1[0m" 304 -
2025-05-12 22:39:21,050 - app - WARNING - 绕过JWT验证: /api/global/users
2025-05-12 22:39:21,052 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 22:39:21] "[33mGET /api/global/users?bypass_jwt=true&_=1747060761045 HTTP/1.1[0m" 404 -
2025-05-12 22:39:21,060 - app - WARNING - 绕过JWT验证: /api/project-managers
2025-05-12 22:39:21,060 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 22:39:21] "[36mGET /static/favicon.ico HTTP/1.1[0m" 304 -
2025-05-12 22:39:21,062 - app - INFO - 直接访问项目经理列表API
2025-05-12 22:39:21,063 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-05-12 22:39:21,065 - sqlalchemy.engine.Engine - INFO - SELECT users.id AS users_id, users.username AS users_username, users.email AS users_email, users.name AS users_name, users.password_hash AS users_password_hash, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.last_login AS users_last_login 
FROM users 
WHERE users.is_active = 1
2025-05-12 22:39:21,065 - sqlalchemy.engine.Engine - INFO - [cached since 2505s ago] ()
2025-05-12 22:39:21,066 - app - INFO - 已找到 9 个活跃用户用于项目经理选择
2025-05-12 22:39:21,066 - app - INFO - 返回 9 个可选的项目负责人
2025-05-12 22:39:21,067 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-05-12 22:39:21,068 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 22:39:21] "GET /api/project-managers?bypass_jwt=true&_=1747060761056 HTTP/1.1" 200 -
2025-05-12 22:39:24,335 - app - WARNING - 绕过JWT验证: /api/global/users
2025-05-12 22:39:24,336 - app - WARNING - 绕过JWT验证: /api/global/users
2025-05-12 22:39:24,339 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 22:39:24] "[33mGET /api/global/users?bypass_jwt=true&_=1747060764325 HTTP/1.1[0m" 404 -
2025-05-12 22:39:24,342 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 22:39:24] "[33mGET /api/global/users?bypass_jwt=true&_=1747060764327 HTTP/1.1[0m" 404 -
2025-05-12 22:39:24,356 - app - WARNING - 绕过JWT验证: /api/project-managers
2025-05-12 22:39:24,359 - app - WARNING - 绕过JWT验证: /api/project-managers
2025-05-12 22:39:24,360 - app - INFO - 直接访问项目经理列表API
2025-05-12 22:39:24,364 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-05-12 22:39:24,365 - sqlalchemy.engine.Engine - INFO - SELECT users.id AS users_id, users.username AS users_username, users.email AS users_email, users.name AS users_name, users.password_hash AS users_password_hash, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.last_login AS users_last_login 
FROM users 
WHERE users.is_active = 1
2025-05-12 22:39:24,366 - sqlalchemy.engine.Engine - INFO - [cached since 2509s ago] ()
2025-05-12 22:39:24,363 - app - INFO - 直接访问项目经理列表API
2025-05-12 22:39:24,381 - app - INFO - 已找到 9 个活跃用户用于项目经理选择
2025-05-12 22:39:24,382 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-05-12 22:39:24,384 - app - INFO - 返回 9 个可选的项目负责人
2025-05-12 22:39:24,388 - sqlalchemy.engine.Engine - INFO - SELECT users.id AS users_id, users.username AS users_username, users.email AS users_email, users.name AS users_name, users.password_hash AS users_password_hash, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.last_login AS users_last_login 
FROM users 
WHERE users.is_active = 1
2025-05-12 22:39:24,390 - sqlalchemy.engine.Engine - INFO - [cached since 2509s ago] ()
2025-05-12 22:39:24,391 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-05-12 22:39:24,395 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 22:39:24] "GET /api/project-managers?bypass_jwt=true&_=1747060764351 HTTP/1.1" 200 -
2025-05-12 22:39:24,395 - app - INFO - 已找到 9 个活跃用户用于项目经理选择
2025-05-12 22:39:24,401 - app - INFO - 返回 9 个可选的项目负责人
2025-05-12 22:39:24,402 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-05-12 22:39:24,403 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 22:39:24] "GET /api/project-managers?bypass_jwt=true&_=1747060764352 HTTP/1.1" 200 -
2025-05-12 22:39:44,928 - app - WARNING - 绕过JWT验证: /api/projects
2025-05-12 22:39:44,929 - app - WARNING - 绕过JWT验证: /api/projects
2025-05-12 22:39:44,932 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 22:39:44] "[31m[1mPOST /api/projects?bypass_jwt=true&_=1747060784922 HTTP/1.1[0m" 405 -
2025-05-12 22:39:44,932 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 22:39:44] "[31m[1mPOST /api/projects?bypass_jwt=true&_=1747060784923 HTTP/1.1[0m" 405 -
2025-05-12 22:40:14,223 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 22:40:14] "[36mGET /static/css/bootstrap.min.css HTTP/1.1[0m" 304 -
2025-05-12 22:40:14,224 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 22:40:14] "[36mGET /static/css/bootstrap-icons.css HTTP/1.1[0m" 304 -
2025-05-12 22:40:14,226 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 22:40:14] "[36mGET /static/css/style.css HTTP/1.1[0m" 304 -
2025-05-12 22:40:14,227 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 22:40:14] "[36mGET /static/css/frappe-gantt.css HTTP/1.1[0m" 304 -
2025-05-12 22:40:14,228 - app.utils.jwt_callbacks - INFO - Checking if token c3acae15-6ce3-4e17-af12-878f05bf08cb is in blocklist
2025-05-12 22:40:14,231 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-05-12 22:40:14,232 - sqlalchemy.engine.Engine - INFO - SELECT token_blacklist.id AS token_blacklist_id, token_blacklist.jti AS token_blacklist_jti, token_blacklist.token_type AS token_blacklist_token_type, token_blacklist.user_id AS token_blacklist_user_id, token_blacklist.revoked_at AS token_blacklist_revoked_at, token_blacklist.expires_at AS token_blacklist_expires_at 
FROM token_blacklist 
WHERE token_blacklist.jti = ?
 LIMIT ? OFFSET ?
2025-05-12 22:40:14,233 - sqlalchemy.engine.Engine - INFO - [cached since 3521s ago] ('c3acae15-6ce3-4e17-af12-878f05bf08cb', 1, 0)
2025-05-12 22:40:14,233 - app.utils.jwt_callbacks - INFO - Token c3acae15-6ce3-4e17-af12-878f05bf08cb is valid
2025-05-12 22:40:14,235 - app.utils.jwt_callbacks - INFO - Verifying token
2025-05-12 22:40:14,235 - app.utils.jwt_callbacks - INFO - JWT Header: {'alg': 'HS256', 'typ': 'JWT'}
2025-05-12 22:40:14,235 - app.utils.jwt_callbacks - INFO - JWT Data: {'fresh': False, 'iat': 1747060759, 'jti': 'c3acae15-6ce3-4e17-af12-878f05bf08cb', 'type': 'access', 'sub': 1, 'nbf': 1747060759, 'csrf': 'ImYxOWFkMGMyMTc4MTJjOWNhODlkODdlNDM5OGRhYWUzNDhiY2RiZDAi.aCIIFw.qOKTdjCwbT2gf74NhnKEcK5aZhk', 'exp': 1747064359, 'aud': 'task_management_system', 'user_claims': {'username': 'admin', 'roles': ['admin'], 'permissions': ['manage_users', 'manage_roles', 'manage_all_projects', 'manage_project', 'manage_all_tasks', 'manage_task', 'view_project', 'view_task', 'manage_resources', 'manage_risks', 'view_reports', 'create_task', 'assign_task', 'change_project_status', 'change_task_status', 'create_project'], 'is_active': True}, 'roles': ['admin'], 'admin': True}
2025-05-12 22:40:14,235 - app.utils.jwt_callbacks - INFO - Token time difference: -55.235316 seconds
2025-05-12 22:40:14,236 - app.utils.jwt_callbacks - INFO - Token verification successful
2025-05-12 22:40:14,236 - app.utils.jwt_callbacks - INFO - Looking up user with identity: 1
2025-05-12 22:40:14,238 - sqlalchemy.engine.Engine - INFO - SELECT users.id AS users_id, users.username AS users_username, users.email AS users_email, users.name AS users_name, users.password_hash AS users_password_hash, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.last_login AS users_last_login 
FROM users 
WHERE users.id = ?
2025-05-12 22:40:14,238 - sqlalchemy.engine.Engine - INFO - [cached since 3520s ago] (1,)
2025-05-12 22:40:14,238 - app.utils.jwt_callbacks - INFO - User found: admin
2025-05-12 22:40:14,240 - sqlalchemy.engine.Engine - INFO - SELECT roles.id AS roles_id, roles.name AS roles_name, roles.description AS roles_description, roles.created_at AS roles_created_at 
FROM roles, user_roles 
WHERE ? = user_roles.user_id AND roles.id = user_roles.role_id
2025-05-12 22:40:14,240 - sqlalchemy.engine.Engine - INFO - [cached since 3521s ago] (1,)
2025-05-12 22:40:14,240 - app.utils.jwt_callbacks - INFO - User roles: ['admin']
2025-05-12 22:40:14,241 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions, role_permissions 
WHERE ? = role_permissions.role_id AND permissions.id = role_permissions.permission_id
2025-05-12 22:40:14,241 - sqlalchemy.engine.Engine - INFO - [cached since 3525s ago] (1,)
2025-05-12 22:40:14,243 - app.utils.jwt_callbacks - INFO - User permissions: ['manage_users', 'manage_roles', 'manage_all_projects', 'manage_project', 'manage_all_tasks', 'manage_task', 'view_project', 'view_task', 'manage_resources', 'manage_risks', 'view_reports', 'create_task', 'assign_task', 'change_project_status', 'change_task_status', 'create_project']
2025-05-12 22:40:14,244 - app.utils.jwt_callbacks - INFO - Checking if token c3acae15-6ce3-4e17-af12-878f05bf08cb is in blocklist
2025-05-12 22:40:14,245 - sqlalchemy.engine.Engine - INFO - SELECT token_blacklist.id AS token_blacklist_id, token_blacklist.jti AS token_blacklist_jti, token_blacklist.token_type AS token_blacklist_token_type, token_blacklist.user_id AS token_blacklist_user_id, token_blacklist.revoked_at AS token_blacklist_revoked_at, token_blacklist.expires_at AS token_blacklist_expires_at 
FROM token_blacklist 
WHERE token_blacklist.jti = ?
 LIMIT ? OFFSET ?
2025-05-12 22:40:14,245 - sqlalchemy.engine.Engine - INFO - [cached since 3521s ago] ('c3acae15-6ce3-4e17-af12-878f05bf08cb', 1, 0)
2025-05-12 22:40:14,246 - app.utils.jwt_callbacks - INFO - Token c3acae15-6ce3-4e17-af12-878f05bf08cb is valid
2025-05-12 22:40:14,247 - app.utils.jwt_callbacks - INFO - Verifying token
2025-05-12 22:40:14,247 - app.utils.jwt_callbacks - INFO - JWT Header: {'alg': 'HS256', 'typ': 'JWT'}
2025-05-12 22:40:14,247 - app.utils.jwt_callbacks - INFO - JWT Data: {'fresh': False, 'iat': 1747060759, 'jti': 'c3acae15-6ce3-4e17-af12-878f05bf08cb', 'type': 'access', 'sub': 1, 'nbf': 1747060759, 'csrf': 'ImYxOWFkMGMyMTc4MTJjOWNhODlkODdlNDM5OGRhYWUzNDhiY2RiZDAi.aCIIFw.qOKTdjCwbT2gf74NhnKEcK5aZhk', 'exp': 1747064359, 'aud': 'task_management_system', 'user_claims': {'username': 'admin', 'roles': ['admin'], 'permissions': ['manage_users', 'manage_roles', 'manage_all_projects', 'manage_project', 'manage_all_tasks', 'manage_task', 'view_project', 'view_task', 'manage_resources', 'manage_risks', 'view_reports', 'create_task', 'assign_task', 'change_project_status', 'change_task_status', 'create_project'], 'is_active': True}, 'roles': ['admin'], 'admin': True}
2025-05-12 22:40:14,249 - app.utils.jwt_callbacks - INFO - Token time difference: -55.249068 seconds
2025-05-12 22:40:14,250 - app.utils.jwt_callbacks - INFO - Token verification successful
2025-05-12 22:40:14,250 - app.utils.jwt_callbacks - INFO - Looking up user with identity: 1
2025-05-12 22:40:14,251 - app.utils.jwt_callbacks - INFO - User found: admin
2025-05-12 22:40:14,251 - app.utils.jwt_callbacks - INFO - User roles: ['admin']
2025-05-12 22:40:14,252 - app.utils.jwt_callbacks - INFO - User permissions: ['manage_users', 'manage_roles', 'manage_all_projects', 'manage_project', 'manage_all_tasks', 'manage_task', 'view_project', 'view_task', 'manage_resources', 'manage_risks', 'view_reports', 'create_task', 'assign_task', 'change_project_status', 'change_task_status', 'create_project']
2025-05-12 22:40:14,252 - app - INFO - 用户已认证，重定向到仪表板页面: /.well-known/appspecific/com.chrome.devtools.json
2025-05-12 22:40:14,252 - app - INFO - 设置重定向跟踪: 路径=/.well-known/appspecific/com.chrome.devtools.json, 计数=1
2025-05-12 22:40:14,253 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-05-12 22:40:14,253 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 22:40:14] "[32mGET /.well-known/appspecific/com.chrome.devtools.json HTTP/1.1[0m" 302 -
2025-05-12 22:40:14,258 - app.utils.jwt_callbacks - INFO - Checking if token c3acae15-6ce3-4e17-af12-878f05bf08cb is in blocklist
2025-05-12 22:40:14,259 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-05-12 22:40:14,260 - sqlalchemy.engine.Engine - INFO - SELECT token_blacklist.id AS token_blacklist_id, token_blacklist.jti AS token_blacklist_jti, token_blacklist.token_type AS token_blacklist_token_type, token_blacklist.user_id AS token_blacklist_user_id, token_blacklist.revoked_at AS token_blacklist_revoked_at, token_blacklist.expires_at AS token_blacklist_expires_at 
FROM token_blacklist 
WHERE token_blacklist.jti = ?
 LIMIT ? OFFSET ?
2025-05-12 22:40:14,260 - sqlalchemy.engine.Engine - INFO - [cached since 3521s ago] ('c3acae15-6ce3-4e17-af12-878f05bf08cb', 1, 0)
2025-05-12 22:40:14,261 - app.utils.jwt_callbacks - INFO - Token c3acae15-6ce3-4e17-af12-878f05bf08cb is valid
2025-05-12 22:40:14,261 - app.utils.jwt_callbacks - INFO - Verifying token
2025-05-12 22:40:14,262 - app.utils.jwt_callbacks - INFO - JWT Header: {'alg': 'HS256', 'typ': 'JWT'}
2025-05-12 22:40:14,262 - app.utils.jwt_callbacks - INFO - JWT Data: {'fresh': False, 'iat': 1747060759, 'jti': 'c3acae15-6ce3-4e17-af12-878f05bf08cb', 'type': 'access', 'sub': 1, 'nbf': 1747060759, 'csrf': 'ImYxOWFkMGMyMTc4MTJjOWNhODlkODdlNDM5OGRhYWUzNDhiY2RiZDAi.aCIIFw.qOKTdjCwbT2gf74NhnKEcK5aZhk', 'exp': 1747064359, 'aud': 'task_management_system', 'user_claims': {'username': 'admin', 'roles': ['admin'], 'permissions': ['manage_users', 'manage_roles', 'manage_all_projects', 'manage_project', 'manage_all_tasks', 'manage_task', 'view_project', 'view_task', 'manage_resources', 'manage_risks', 'view_reports', 'create_task', 'assign_task', 'change_project_status', 'change_task_status', 'create_project'], 'is_active': True}, 'roles': ['admin'], 'admin': True}
2025-05-12 22:40:14,264 - app.utils.jwt_callbacks - INFO - Token time difference: -55.264043 seconds
2025-05-12 22:40:14,265 - app.utils.jwt_callbacks - INFO - Token verification successful
2025-05-12 22:40:14,265 - app.utils.jwt_callbacks - INFO - Looking up user with identity: 1
2025-05-12 22:40:14,266 - sqlalchemy.engine.Engine - INFO - SELECT users.id AS users_id, users.username AS users_username, users.email AS users_email, users.name AS users_name, users.password_hash AS users_password_hash, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.last_login AS users_last_login 
FROM users 
WHERE users.id = ?
2025-05-12 22:40:14,267 - sqlalchemy.engine.Engine - INFO - [cached since 3521s ago] (1,)
2025-05-12 22:40:14,268 - app.utils.jwt_callbacks - INFO - User found: admin
2025-05-12 22:40:14,269 - sqlalchemy.engine.Engine - INFO - SELECT roles.id AS roles_id, roles.name AS roles_name, roles.description AS roles_description, roles.created_at AS roles_created_at 
FROM roles, user_roles 
WHERE ? = user_roles.user_id AND roles.id = user_roles.role_id
2025-05-12 22:40:14,269 - sqlalchemy.engine.Engine - INFO - [cached since 3521s ago] (1,)
2025-05-12 22:40:14,270 - app.utils.jwt_callbacks - INFO - User roles: ['admin']
2025-05-12 22:40:14,270 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions, role_permissions 
WHERE ? = role_permissions.role_id AND permissions.id = role_permissions.permission_id
2025-05-12 22:40:14,271 - sqlalchemy.engine.Engine - INFO - [cached since 3525s ago] (1,)
2025-05-12 22:40:14,271 - app.utils.jwt_callbacks - INFO - User permissions: ['manage_users', 'manage_roles', 'manage_all_projects', 'manage_project', 'manage_all_tasks', 'manage_task', 'view_project', 'view_task', 'manage_resources', 'manage_risks', 'view_reports', 'create_task', 'assign_task', 'change_project_status', 'change_task_status', 'create_project']
2025-05-12 22:40:14,272 - app.utils.jwt_callbacks - INFO - Checking if token c3acae15-6ce3-4e17-af12-878f05bf08cb is in blocklist
2025-05-12 22:40:14,273 - sqlalchemy.engine.Engine - INFO - SELECT token_blacklist.id AS token_blacklist_id, token_blacklist.jti AS token_blacklist_jti, token_blacklist.token_type AS token_blacklist_token_type, token_blacklist.user_id AS token_blacklist_user_id, token_blacklist.revoked_at AS token_blacklist_revoked_at, token_blacklist.expires_at AS token_blacklist_expires_at 
FROM token_blacklist 
WHERE token_blacklist.jti = ?
 LIMIT ? OFFSET ?
2025-05-12 22:40:14,273 - sqlalchemy.engine.Engine - INFO - [cached since 3521s ago] ('c3acae15-6ce3-4e17-af12-878f05bf08cb', 1, 0)
2025-05-12 22:40:14,274 - app.utils.jwt_callbacks - INFO - Token c3acae15-6ce3-4e17-af12-878f05bf08cb is valid
2025-05-12 22:40:14,274 - app.utils.jwt_callbacks - INFO - Verifying token
2025-05-12 22:40:14,274 - app.utils.jwt_callbacks - INFO - JWT Header: {'alg': 'HS256', 'typ': 'JWT'}
2025-05-12 22:40:14,275 - app.utils.jwt_callbacks - INFO - JWT Data: {'fresh': False, 'iat': 1747060759, 'jti': 'c3acae15-6ce3-4e17-af12-878f05bf08cb', 'type': 'access', 'sub': 1, 'nbf': 1747060759, 'csrf': 'ImYxOWFkMGMyMTc4MTJjOWNhODlkODdlNDM5OGRhYWUzNDhiY2RiZDAi.aCIIFw.qOKTdjCwbT2gf74NhnKEcK5aZhk', 'exp': 1747064359, 'aud': 'task_management_system', 'user_claims': {'username': 'admin', 'roles': ['admin'], 'permissions': ['manage_users', 'manage_roles', 'manage_all_projects', 'manage_project', 'manage_all_tasks', 'manage_task', 'view_project', 'view_task', 'manage_resources', 'manage_risks', 'view_reports', 'create_task', 'assign_task', 'change_project_status', 'change_task_status', 'create_project'], 'is_active': True}, 'roles': ['admin'], 'admin': True}
2025-05-12 22:40:14,275 - app.utils.jwt_callbacks - INFO - Token time difference: -55.275563 seconds
2025-05-12 22:40:14,276 - app.utils.jwt_callbacks - INFO - Token verification successful
2025-05-12 22:40:14,276 - app.utils.jwt_callbacks - INFO - Looking up user with identity: 1
2025-05-12 22:40:14,277 - app.utils.jwt_callbacks - INFO - User found: admin
2025-05-12 22:40:14,277 - app.utils.jwt_callbacks - INFO - User roles: ['admin']
2025-05-12 22:40:14,278 - app.utils.jwt_callbacks - INFO - User permissions: ['manage_users', 'manage_roles', 'manage_all_projects', 'manage_project', 'manage_all_tasks', 'manage_task', 'view_project', 'view_task', 'manage_resources', 'manage_risks', 'view_reports', 'create_task', 'assign_task', 'change_project_status', 'change_task_status', 'create_project']
2025-05-12 22:40:14,279 - app - INFO - Dashboard access with user ID: 1
2025-05-12 22:40:14,279 - app - INFO - 用户 admin 是否为管理员: True
2025-05-12 22:40:14,280 - app - INFO - Token found in: cookies
2025-05-12 22:40:14,281 - app - INFO - Dashboard for user admin: roles=['admin'], permissions=['manage_users', 'view_project', 'manage_risks', 'manage_all_tasks', 'assign_task', 'manage_task', 'change_project_status', 'create_project', 'change_task_status', 'manage_roles', 'manage_all_projects', 'manage_resources', 'create_task', 'manage_project', 'view_reports', 'view_task']
2025-05-12 22:40:14,283 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-05-12 22:40:14,284 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 22:40:14] "GET /dashboard HTTP/1.1" 200 -
2025-05-12 22:40:14,305 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 22:40:14] "GET /static/css/bootstrap.min.css.map HTTP/1.1" 200 -
2025-05-12 22:40:14,437 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 22:40:14] "GET /static/js/bootstrap.bundle.min.js.map HTTP/1.1" 200 -
2025-05-12 22:40:41,446 - app - INFO - 未匹配的路径 /login，重定向到登录页面
2025-05-12 22:40:41,446 - app - INFO - 设置重定向跟踪: 路径=/login, 计数=1
2025-05-12 22:40:41,447 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 22:40:41] "[32mGET /login HTTP/1.1[0m" 302 -
2025-05-12 22:40:41,458 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 22:40:41] "GET /auth/login HTTP/1.1" 200 -
2025-05-12 22:40:41,490 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 22:40:41] "GET /static/css/bootstrap.min.css HTTP/1.1" 200 -
2025-05-12 22:40:41,491 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 22:40:41] "GET /static/css/bootstrap-icons.css HTTP/1.1" 200 -
2025-05-12 22:40:41,492 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 22:40:41] "GET /static/css/style.css HTTP/1.1" 200 -
2025-05-12 22:40:41,495 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 22:40:41] "GET /static/js/jquery.min.js HTTP/1.1" 200 -
2025-05-12 22:40:41,496 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 22:40:41] "GET /static/js/bootstrap.bundle.min.js HTTP/1.1" 200 -
2025-05-12 22:40:41,497 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 22:40:41] "GET /static/js/utils.js HTTP/1.1" 200 -
2025-05-12 22:40:41,502 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 22:40:41] "GET /static/js/auth.js HTTP/1.1" 200 -
2025-05-12 22:40:41,505 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 22:40:41] "GET /static/images/background.png HTTP/1.1" 200 -
2025-05-12 22:40:41,522 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 22:40:41] "GET /static/js/fix-modals.js HTTP/1.1" 200 -
2025-05-12 22:40:41,522 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 22:40:41] "GET /static/js/csrf.js HTTP/1.1" 200 -
2025-05-12 22:40:41,525 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 22:40:41] "GET /static/js/user-profile.js HTTP/1.1" 200 -
2025-05-12 22:40:41,529 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 22:40:41] "[33mGET /static/uploads/background.png HTTP/1.1[0m" 404 -
2025-05-12 22:40:41,529 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 22:40:41] "GET /static/js/background-helper.js HTTP/1.1" 200 -
2025-05-12 22:40:41,551 - app - WARNING - 绕过JWT验证: /auth/user_info
2025-05-12 22:40:41,553 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 22:40:41] "[33mGET /static/uploads/background.png HTTP/1.1[0m" 404 -
2025-05-12 22:40:41,553 - app.utils.jwt_callbacks - ERROR - Missing token: Missing JWT in headers, cookies or query_string (Missing Authorization Header; Missing cookie "access_token_cookie"; Missing 'jwt' query paramater)
2025-05-12 22:40:41,555 - app.utils.jwt_callbacks - INFO - Redirecting to login page
2025-05-12 22:40:41,556 - app - INFO - 设置重定向跟踪: 路径=/auth/user_info, 计数=1
2025-05-12 22:40:41,556 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 22:40:41] "[32mGET /auth/user_info?_=1747060841546&bypass_jwt=true HTTP/1.1[0m" 302 -
2025-05-12 22:40:41,566 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 22:40:41] "GET /auth/login HTTP/1.1" 200 -
2025-05-12 22:40:41,569 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 22:40:41] "GET /static/favicon.ico HTTP/1.1" 200 -
2025-05-12 22:40:42,561 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 22:40:42] "[33mGET /static/uploads/background.png HTTP/1.1[0m" 404 -
2025-05-12 22:42:06,246 - app - INFO - 未匹配的路径 /login，重定向到登录页面
2025-05-12 22:42:06,247 - app - INFO - 设置重定向跟踪: 路径=/login, 计数=1
2025-05-12 22:42:06,248 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 22:42:06] "[32mGET /login HTTP/1.1[0m" 302 -
2025-05-12 22:42:06,258 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 22:42:06] "GET /auth/login HTTP/1.1" 200 -
2025-05-12 22:42:06,294 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 22:42:06] "GET /static/css/bootstrap.min.css HTTP/1.1" 200 -
2025-05-12 22:42:06,297 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 22:42:06] "GET /static/css/bootstrap-icons.css HTTP/1.1" 200 -
2025-05-12 22:42:06,298 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 22:42:06] "GET /static/css/style.css HTTP/1.1" 200 -
2025-05-12 22:42:06,302 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 22:42:06] "GET /static/js/jquery.min.js HTTP/1.1" 200 -
2025-05-12 22:42:06,304 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 22:42:06] "GET /static/js/bootstrap.bundle.min.js HTTP/1.1" 200 -
2025-05-12 22:42:06,307 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 22:42:06] "GET /static/js/utils.js HTTP/1.1" 200 -
2025-05-12 22:42:06,310 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 22:42:06] "GET /static/js/auth.js HTTP/1.1" 200 -
2025-05-12 22:42:06,310 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 22:42:06] "GET /static/images/background.png HTTP/1.1" 200 -
2025-05-12 22:42:06,321 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 22:42:06] "GET /static/js/fix-modals.js HTTP/1.1" 200 -
2025-05-12 22:42:06,336 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 22:42:06] "GET /static/js/csrf.js HTTP/1.1" 200 -
2025-05-12 22:42:06,342 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 22:42:06] "GET /static/js/user-profile.js HTTP/1.1" 200 -
2025-05-12 22:42:06,351 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 22:42:06] "GET /static/js/background-helper.js HTTP/1.1" 200 -
2025-05-12 22:42:06,359 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 22:42:06] "[33mGET /static/uploads/background.png HTTP/1.1[0m" 404 -
2025-05-12 22:42:06,372 - app - WARNING - 绕过JWT验证: /auth/user_info
2025-05-12 22:42:06,373 - app.utils.jwt_callbacks - ERROR - Missing token: Missing JWT in headers, cookies or query_string (Missing Authorization Header; Missing cookie "access_token_cookie"; Missing 'jwt' query paramater)
2025-05-12 22:42:06,374 - app.utils.jwt_callbacks - INFO - Redirecting to login page
2025-05-12 22:42:06,375 - app - INFO - 设置重定向跟踪: 路径=/auth/user_info, 计数=1
2025-05-12 22:42:06,377 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 22:42:06] "[32mGET /auth/user_info?_=1747060926367&bypass_jwt=true HTTP/1.1[0m" 302 -
2025-05-12 22:42:06,392 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 22:42:06] "GET /static/favicon.ico HTTP/1.1" 200 -
2025-05-12 22:42:06,397 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 22:42:06] "GET /auth/login HTTP/1.1" 200 -
2025-05-12 22:42:07,381 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 22:42:07] "[33mGET /static/uploads/background.png HTTP/1.1[0m" 404 -
2025-05-12 22:42:07,847 - app - INFO - 登录请求 - 方法: POST, 内容类型: application/x-www-form-urlencoded
2025-05-12 22:42:07,847 - app - INFO - 请求头: {'Host': '127.0.0.1:5000', 'Connection': 'keep-alive', 'Content-Length': '135', 'Cache-Control': 'max-age=0', 'Sec-Ch-Ua': '"Chromium";v="136", "Microsoft Edge";v="136", "Not.A/Brand";v="99"', 'Sec-Ch-Ua-Mobile': '?0', 'Sec-Ch-Ua-Platform': '"Windows"', 'Origin': 'http://127.0.0.1:5000', 'Content-Type': 'application/x-www-form-urlencoded', 'Upgrade-Insecure-Requests': '1', 'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36 Edg/136.0.0.0', 'Accept': 'text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.7', 'Sec-Fetch-Site': 'same-origin', 'Sec-Fetch-Mode': 'navigate', 'Sec-Fetch-User': '?1', 'Sec-Fetch-Dest': 'document', 'Referer': 'http://127.0.0.1:5000/auth/login', 'Accept-Encoding': 'gzip, deflate, br, zstd', 'Accept-Language': 'zh-CN,zh;q=0.9,en;q=0.8,en-GB;q=0.7,en-US;q=0.6', 'Cookie': 'redirect_count=1; redirect_path=/auth/user_info; session=eyJjc3JmX3Rva2VuIjoiYmNlNjdlZmM5MWJmYjFiNWIxNzVhMTc3NzQxN2VjMjUxNDBiMjRiNCJ9.aCIIvw.tsBPfwjo56TFumyIKgJ_CnvIMPs'}
2025-05-12 22:42:07,848 - app - INFO - 处理表单格式的登录请求
2025-05-12 22:42:07,848 - app - INFO - 表单数据: username=admin, password=********
2025-05-12 22:42:07,849 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-05-12 22:42:07,850 - sqlalchemy.engine.Engine - INFO - SELECT users.id AS users_id, users.username AS users_username, users.email AS users_email, users.name AS users_name, users.password_hash AS users_password_hash, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.last_login AS users_last_login 
FROM users 
WHERE users.username = ?
 LIMIT ? OFFSET ?
2025-05-12 22:42:07,850 - sqlalchemy.engine.Engine - INFO - [cached since 3635s ago] ('admin', 1, 0)
2025-05-12 22:42:08,308 - app - INFO - 已生成CSRF令牌: ImJjZTY3ZW...
2025-05-12 22:42:08,311 - sqlalchemy.engine.Engine - INFO - SELECT roles.id AS roles_id, roles.name AS roles_name, roles.description AS roles_description, roles.created_at AS roles_created_at 
FROM roles, user_roles 
WHERE ? = user_roles.user_id AND roles.id = user_roles.role_id
2025-05-12 22:42:08,311 - sqlalchemy.engine.Engine - INFO - [cached since 3635s ago] (1,)
2025-05-12 22:42:08,313 - app - INFO - 用户 admin 的角色: ['admin']
2025-05-12 22:42:08,318 - app - INFO - 用户 admin 是否是管理员: True
2025-05-12 22:42:08,319 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions, role_permissions 
WHERE ? = role_permissions.role_id AND permissions.id = role_permissions.permission_id
2025-05-12 22:42:08,320 - sqlalchemy.engine.Engine - INFO - [cached since 3639s ago] (1,)
2025-05-12 22:42:08,322 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions 
WHERE permissions.name = ?
 LIMIT ? OFFSET ?
2025-05-12 22:42:08,322 - sqlalchemy.engine.Engine - INFO - [cached since 3639s ago] ('manage_users', 1, 0)
2025-05-12 22:42:08,324 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions 
WHERE permissions.name = ?
 LIMIT ? OFFSET ?
2025-05-12 22:42:08,325 - sqlalchemy.engine.Engine - INFO - [cached since 3639s ago] ('manage_roles', 1, 0)
2025-05-12 22:42:08,326 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions 
WHERE permissions.name = ?
 LIMIT ? OFFSET ?
2025-05-12 22:42:08,327 - sqlalchemy.engine.Engine - INFO - [cached since 3639s ago] ('manage_all_projects', 1, 0)
2025-05-12 22:42:08,330 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions 
WHERE permissions.name = ?
 LIMIT ? OFFSET ?
2025-05-12 22:42:08,331 - sqlalchemy.engine.Engine - INFO - [cached since 3639s ago] ('manage_project', 1, 0)
2025-05-12 22:42:08,332 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions 
WHERE permissions.name = ?
 LIMIT ? OFFSET ?
2025-05-12 22:42:08,333 - sqlalchemy.engine.Engine - INFO - [cached since 3639s ago] ('manage_all_tasks', 1, 0)
2025-05-12 22:42:08,334 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions 
WHERE permissions.name = ?
 LIMIT ? OFFSET ?
2025-05-12 22:42:08,335 - sqlalchemy.engine.Engine - INFO - [cached since 3639s ago] ('manage_task', 1, 0)
2025-05-12 22:42:08,337 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions 
WHERE permissions.name = ?
 LIMIT ? OFFSET ?
2025-05-12 22:42:08,339 - sqlalchemy.engine.Engine - INFO - [cached since 3639s ago] ('view_project', 1, 0)
2025-05-12 22:42:08,340 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions 
WHERE permissions.name = ?
 LIMIT ? OFFSET ?
2025-05-12 22:42:08,341 - sqlalchemy.engine.Engine - INFO - [cached since 3639s ago] ('view_task', 1, 0)
2025-05-12 22:42:08,342 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions 
WHERE permissions.name = ?
 LIMIT ? OFFSET ?
2025-05-12 22:42:08,342 - sqlalchemy.engine.Engine - INFO - [cached since 3639s ago] ('manage_resources', 1, 0)
2025-05-12 22:42:08,346 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions 
WHERE permissions.name = ?
 LIMIT ? OFFSET ?
2025-05-12 22:42:08,346 - sqlalchemy.engine.Engine - INFO - [cached since 3639s ago] ('manage_risks', 1, 0)
2025-05-12 22:42:08,348 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions 
WHERE permissions.name = ?
 LIMIT ? OFFSET ?
2025-05-12 22:42:08,349 - sqlalchemy.engine.Engine - INFO - [cached since 3639s ago] ('view_reports', 1, 0)
2025-05-12 22:42:08,351 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions 
WHERE permissions.name = ?
 LIMIT ? OFFSET ?
2025-05-12 22:42:08,352 - sqlalchemy.engine.Engine - INFO - [cached since 3639s ago] ('create_task', 1, 0)
2025-05-12 22:42:08,353 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions 
WHERE permissions.name = ?
 LIMIT ? OFFSET ?
2025-05-12 22:42:08,354 - sqlalchemy.engine.Engine - INFO - [cached since 3639s ago] ('create_project', 1, 0)
2025-05-12 22:42:08,355 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions 
WHERE permissions.name = ?
 LIMIT ? OFFSET ?
2025-05-12 22:42:08,355 - sqlalchemy.engine.Engine - INFO - [cached since 3639s ago] ('assign_task', 1, 0)
2025-05-12 22:42:08,356 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions 
WHERE permissions.name = ?
 LIMIT ? OFFSET ?
2025-05-12 22:42:08,357 - sqlalchemy.engine.Engine - INFO - [cached since 3639s ago] ('change_project_status', 1, 0)
2025-05-12 22:42:08,358 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions 
WHERE permissions.name = ?
 LIMIT ? OFFSET ?
2025-05-12 22:42:08,359 - sqlalchemy.engine.Engine - INFO - [cached since 3639s ago] ('change_task_status', 1, 0)
2025-05-12 22:42:08,360 - app.utils.jwt_callbacks - INFO - Adding additional claims for user 1
2025-05-12 22:42:08,361 - app.utils.jwt_callbacks - INFO - Added claims for user 1: {'aud': 'task_management_system', 'user_claims': {'username': 'admin', 'roles': ['admin'], 'permissions': ['manage_users', 'manage_roles', 'manage_all_projects', 'manage_project', 'manage_all_tasks', 'manage_task', 'view_project', 'view_task', 'manage_resources', 'manage_risks', 'view_reports', 'create_task', 'assign_task', 'change_project_status', 'change_task_status', 'create_project'], 'is_active': True}}
2025-05-12 22:42:08,363 - app.utils.jwt_callbacks - INFO - Adding additional claims for user 1
2025-05-12 22:42:08,365 - app.utils.jwt_callbacks - INFO - Added claims for user 1: {'aud': 'task_management_system', 'user_claims': {'username': 'admin', 'roles': ['admin'], 'permissions': ['manage_users', 'manage_roles', 'manage_all_projects', 'manage_project', 'manage_all_tasks', 'manage_task', 'view_project', 'view_task', 'manage_resources', 'manage_risks', 'view_reports', 'create_task', 'assign_task', 'change_project_status', 'change_task_status', 'create_project'], 'is_active': True}}
2025-05-12 22:42:08,368 - sqlalchemy.engine.Engine - INFO - UPDATE users SET updated_at=?, last_login=? WHERE users.id = ?
2025-05-12 22:42:08,368 - sqlalchemy.engine.Engine - INFO - [cached since 3635s ago] ('2025-05-12 14:42:08.367774', '2025-05-12 14:42:08.366755', 1)
2025-05-12 22:42:08,374 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-05-12 22:42:08,380 - app - INFO - 用户登录成功: admin
2025-05-12 22:42:08,381 - app - INFO - 设置重定向跟踪: 路径=/auth/login, 计数=1
2025-05-12 22:42:08,383 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 22:42:08] "[32mPOST /auth/login HTTP/1.1[0m" 302 -
2025-05-12 22:42:08,395 - app.utils.jwt_callbacks - INFO - Checking if token eaacc53b-a740-4376-9507-7103b1505cf0 is in blocklist
2025-05-12 22:42:08,396 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-05-12 22:42:08,397 - sqlalchemy.engine.Engine - INFO - SELECT token_blacklist.id AS token_blacklist_id, token_blacklist.jti AS token_blacklist_jti, token_blacklist.token_type AS token_blacklist_token_type, token_blacklist.user_id AS token_blacklist_user_id, token_blacklist.revoked_at AS token_blacklist_revoked_at, token_blacklist.expires_at AS token_blacklist_expires_at 
FROM token_blacklist 
WHERE token_blacklist.jti = ?
 LIMIT ? OFFSET ?
2025-05-12 22:42:08,397 - sqlalchemy.engine.Engine - INFO - [cached since 3635s ago] ('eaacc53b-a740-4376-9507-7103b1505cf0', 1, 0)
2025-05-12 22:42:08,398 - app.utils.jwt_callbacks - INFO - Token eaacc53b-a740-4376-9507-7103b1505cf0 is valid
2025-05-12 22:42:08,399 - app.utils.jwt_callbacks - INFO - Verifying token
2025-05-12 22:42:08,400 - app.utils.jwt_callbacks - INFO - JWT Header: {'alg': 'HS256', 'typ': 'JWT'}
2025-05-12 22:42:08,403 - app.utils.jwt_callbacks - INFO - JWT Data: {'fresh': False, 'iat': 1747060928, 'jti': 'eaacc53b-a740-4376-9507-7103b1505cf0', 'type': 'access', 'sub': 1, 'nbf': 1747060928, 'csrf': 'ImJjZTY3ZWZjOTFiZmIxYjViMTc1YTE3Nzc0MTdlYzI1MTQwYjI0YjQi.aCIIwA.zLlsxod81xqihYaD74jKC2BLMGs', 'exp': 1747064528, 'aud': 'task_management_system', 'user_claims': {'username': 'admin', 'roles': ['admin'], 'permissions': ['manage_users', 'manage_roles', 'manage_all_projects', 'manage_project', 'manage_all_tasks', 'manage_task', 'view_project', 'view_task', 'manage_resources', 'manage_risks', 'view_reports', 'create_task', 'assign_task', 'change_project_status', 'change_task_status', 'create_project'], 'is_active': True}, 'roles': ['admin'], 'admin': True}
2025-05-12 22:42:08,404 - app.utils.jwt_callbacks - INFO - Token time difference: -0.404132 seconds
2025-05-12 22:42:08,408 - app.utils.jwt_callbacks - INFO - Token verification successful
2025-05-12 22:42:08,410 - app.utils.jwt_callbacks - INFO - Looking up user with identity: 1
2025-05-12 22:42:08,412 - sqlalchemy.engine.Engine - INFO - SELECT users.id AS users_id, users.username AS users_username, users.email AS users_email, users.name AS users_name, users.password_hash AS users_password_hash, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.last_login AS users_last_login 
FROM users 
WHERE users.id = ?
2025-05-12 22:42:08,413 - sqlalchemy.engine.Engine - INFO - [cached since 3635s ago] (1,)
2025-05-12 22:42:08,415 - app.utils.jwt_callbacks - INFO - User found: admin
2025-05-12 22:42:08,416 - sqlalchemy.engine.Engine - INFO - SELECT roles.id AS roles_id, roles.name AS roles_name, roles.description AS roles_description, roles.created_at AS roles_created_at 
FROM roles, user_roles 
WHERE ? = user_roles.user_id AND roles.id = user_roles.role_id
2025-05-12 22:42:08,417 - sqlalchemy.engine.Engine - INFO - [cached since 3635s ago] (1,)
2025-05-12 22:42:08,418 - app.utils.jwt_callbacks - INFO - User roles: ['admin']
2025-05-12 22:42:08,419 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions, role_permissions 
WHERE ? = role_permissions.role_id AND permissions.id = role_permissions.permission_id
2025-05-12 22:42:08,421 - sqlalchemy.engine.Engine - INFO - [cached since 3639s ago] (1,)
2025-05-12 22:42:08,424 - app.utils.jwt_callbacks - INFO - User permissions: ['manage_users', 'manage_roles', 'manage_all_projects', 'manage_project', 'manage_all_tasks', 'manage_task', 'view_project', 'view_task', 'manage_resources', 'manage_risks', 'view_reports', 'create_task', 'assign_task', 'change_project_status', 'change_task_status', 'create_project']
2025-05-12 22:42:08,426 - app.utils.jwt_callbacks - INFO - Checking if token eaacc53b-a740-4376-9507-7103b1505cf0 is in blocklist
2025-05-12 22:42:08,428 - sqlalchemy.engine.Engine - INFO - SELECT token_blacklist.id AS token_blacklist_id, token_blacklist.jti AS token_blacklist_jti, token_blacklist.token_type AS token_blacklist_token_type, token_blacklist.user_id AS token_blacklist_user_id, token_blacklist.revoked_at AS token_blacklist_revoked_at, token_blacklist.expires_at AS token_blacklist_expires_at 
FROM token_blacklist 
WHERE token_blacklist.jti = ?
 LIMIT ? OFFSET ?
2025-05-12 22:42:08,432 - sqlalchemy.engine.Engine - INFO - [cached since 3635s ago] ('eaacc53b-a740-4376-9507-7103b1505cf0', 1, 0)
2025-05-12 22:42:08,442 - app.utils.jwt_callbacks - INFO - Token eaacc53b-a740-4376-9507-7103b1505cf0 is valid
2025-05-12 22:42:08,444 - app.utils.jwt_callbacks - INFO - Verifying token
2025-05-12 22:42:08,446 - app.utils.jwt_callbacks - INFO - JWT Header: {'alg': 'HS256', 'typ': 'JWT'}
2025-05-12 22:42:08,448 - app.utils.jwt_callbacks - INFO - JWT Data: {'fresh': False, 'iat': 1747060928, 'jti': 'eaacc53b-a740-4376-9507-7103b1505cf0', 'type': 'access', 'sub': 1, 'nbf': 1747060928, 'csrf': 'ImJjZTY3ZWZjOTFiZmIxYjViMTc1YTE3Nzc0MTdlYzI1MTQwYjI0YjQi.aCIIwA.zLlsxod81xqihYaD74jKC2BLMGs', 'exp': 1747064528, 'aud': 'task_management_system', 'user_claims': {'username': 'admin', 'roles': ['admin'], 'permissions': ['manage_users', 'manage_roles', 'manage_all_projects', 'manage_project', 'manage_all_tasks', 'manage_task', 'view_project', 'view_task', 'manage_resources', 'manage_risks', 'view_reports', 'create_task', 'assign_task', 'change_project_status', 'change_task_status', 'create_project'], 'is_active': True}, 'roles': ['admin'], 'admin': True}
2025-05-12 22:42:08,449 - app.utils.jwt_callbacks - INFO - Token time difference: -0.449638 seconds
2025-05-12 22:42:08,451 - app.utils.jwt_callbacks - INFO - Token verification successful
2025-05-12 22:42:08,452 - app.utils.jwt_callbacks - INFO - Looking up user with identity: 1
2025-05-12 22:42:08,455 - app.utils.jwt_callbacks - INFO - User found: admin
2025-05-12 22:42:08,459 - app.utils.jwt_callbacks - INFO - User roles: ['admin']
2025-05-12 22:42:08,460 - app.utils.jwt_callbacks - INFO - User permissions: ['manage_users', 'manage_roles', 'manage_all_projects', 'manage_project', 'manage_all_tasks', 'manage_task', 'view_project', 'view_task', 'manage_resources', 'manage_risks', 'view_reports', 'create_task', 'assign_task', 'change_project_status', 'change_task_status', 'create_project']
2025-05-12 22:42:08,462 - app - INFO - Dashboard access with user ID: 1
2025-05-12 22:42:08,463 - app - INFO - 用户 admin 是否为管理员: True
2025-05-12 22:42:08,466 - app - INFO - Token found in: cookies
2025-05-12 22:42:08,468 - app - INFO - Dashboard for user admin: roles=['admin'], permissions=['manage_users', 'view_project', 'manage_risks', 'manage_all_tasks', 'assign_task', 'manage_task', 'change_project_status', 'create_project', 'change_task_status', 'manage_roles', 'manage_all_projects', 'manage_resources', 'create_task', 'manage_project', 'view_reports', 'view_task']
2025-05-12 22:42:08,472 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-05-12 22:42:08,477 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 22:42:08] "GET /dashboard HTTP/1.1" 200 -
2025-05-12 22:42:08,507 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 22:42:08] "[36mGET /static/css/bootstrap.min.css HTTP/1.1[0m" 304 -
2025-05-12 22:42:08,509 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 22:42:08] "[36mGET /static/css/bootstrap-icons.css HTTP/1.1[0m" 304 -
2025-05-12 22:42:08,512 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 22:42:08] "[36mGET /static/js/jquery.min.js HTTP/1.1[0m" 304 -
2025-05-12 22:42:08,513 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 22:42:08] "[36mGET /static/css/style.css HTTP/1.1[0m" 304 -
2025-05-12 22:42:08,519 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 22:42:08] "[36mGET /static/js/bootstrap.bundle.min.js HTTP/1.1[0m" 304 -
2025-05-12 22:42:08,521 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 22:42:08] "[36mGET /static/js/auth.js HTTP/1.1[0m" 304 -
2025-05-12 22:42:08,523 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 22:42:08] "[36mGET /static/js/utils.js HTTP/1.1[0m" 304 -
2025-05-12 22:42:08,526 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 22:42:08] "[36mGET /static/js/fix-modals.js HTTP/1.1[0m" 304 -
2025-05-12 22:42:08,532 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 22:42:08] "[36mGET /static/js/csrf.js HTTP/1.1[0m" 304 -
2025-05-12 22:42:08,533 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 22:42:08] "[36mGET /static/js/user-profile.js HTTP/1.1[0m" 304 -
2025-05-12 22:42:08,553 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 22:42:08] "GET /static/css/fonts/bootstrap-icons.woff2 HTTP/1.1" 200 -
2025-05-12 22:42:08,556 - app - WARNING - 绕过JWT验证: /auth/user_info
2025-05-12 22:42:08,557 - app.utils.jwt_callbacks - INFO - Checking if token eaacc53b-a740-4376-9507-7103b1505cf0 is in blocklist
2025-05-12 22:42:08,560 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-05-12 22:42:08,561 - sqlalchemy.engine.Engine - INFO - SELECT token_blacklist.id AS token_blacklist_id, token_blacklist.jti AS token_blacklist_jti, token_blacklist.token_type AS token_blacklist_token_type, token_blacklist.user_id AS token_blacklist_user_id, token_blacklist.revoked_at AS token_blacklist_revoked_at, token_blacklist.expires_at AS token_blacklist_expires_at 
FROM token_blacklist 
WHERE token_blacklist.jti = ?
 LIMIT ? OFFSET ?
2025-05-12 22:42:08,561 - sqlalchemy.engine.Engine - INFO - [cached since 3635s ago] ('eaacc53b-a740-4376-9507-7103b1505cf0', 1, 0)
2025-05-12 22:42:08,562 - app.utils.jwt_callbacks - INFO - Token eaacc53b-a740-4376-9507-7103b1505cf0 is valid
2025-05-12 22:42:08,563 - app.utils.jwt_callbacks - INFO - Verifying token
2025-05-12 22:42:08,563 - app.utils.jwt_callbacks - INFO - JWT Header: {'alg': 'HS256', 'typ': 'JWT'}
2025-05-12 22:42:08,564 - app.utils.jwt_callbacks - INFO - JWT Data: {'fresh': False, 'iat': 1747060928, 'jti': 'eaacc53b-a740-4376-9507-7103b1505cf0', 'type': 'access', 'sub': 1, 'nbf': 1747060928, 'csrf': 'ImJjZTY3ZWZjOTFiZmIxYjViMTc1YTE3Nzc0MTdlYzI1MTQwYjI0YjQi.aCIIwA.zLlsxod81xqihYaD74jKC2BLMGs', 'exp': 1747064528, 'aud': 'task_management_system', 'user_claims': {'username': 'admin', 'roles': ['admin'], 'permissions': ['manage_users', 'manage_roles', 'manage_all_projects', 'manage_project', 'manage_all_tasks', 'manage_task', 'view_project', 'view_task', 'manage_resources', 'manage_risks', 'view_reports', 'create_task', 'assign_task', 'change_project_status', 'change_task_status', 'create_project'], 'is_active': True}, 'roles': ['admin'], 'admin': True}
2025-05-12 22:42:08,564 - app.utils.jwt_callbacks - INFO - Token time difference: -0.564975 seconds
2025-05-12 22:42:08,565 - app.utils.jwt_callbacks - INFO - Token verification successful
2025-05-12 22:42:08,565 - app.utils.jwt_callbacks - INFO - Looking up user with identity: 1
2025-05-12 22:42:08,567 - sqlalchemy.engine.Engine - INFO - SELECT users.id AS users_id, users.username AS users_username, users.email AS users_email, users.name AS users_name, users.password_hash AS users_password_hash, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.last_login AS users_last_login 
FROM users 
WHERE users.id = ?
2025-05-12 22:42:08,567 - sqlalchemy.engine.Engine - INFO - [cached since 3635s ago] (1,)
2025-05-12 22:42:08,568 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 22:42:08] "[36mGET /static/favicon.ico HTTP/1.1[0m" 304 -
2025-05-12 22:42:08,570 - app.utils.jwt_callbacks - INFO - User found: admin
2025-05-12 22:42:08,571 - sqlalchemy.engine.Engine - INFO - SELECT roles.id AS roles_id, roles.name AS roles_name, roles.description AS roles_description, roles.created_at AS roles_created_at 
FROM roles, user_roles 
WHERE ? = user_roles.user_id AND roles.id = user_roles.role_id
2025-05-12 22:42:08,573 - sqlalchemy.engine.Engine - INFO - [cached since 3635s ago] (1,)
2025-05-12 22:42:08,575 - app.utils.jwt_callbacks - INFO - User roles: ['admin']
2025-05-12 22:42:08,576 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions, role_permissions 
WHERE ? = role_permissions.role_id AND permissions.id = role_permissions.permission_id
2025-05-12 22:42:08,576 - sqlalchemy.engine.Engine - INFO - [cached since 3639s ago] (1,)
2025-05-12 22:42:08,577 - app.utils.jwt_callbacks - INFO - User permissions: ['manage_users', 'manage_roles', 'manage_all_projects', 'manage_project', 'manage_all_tasks', 'manage_task', 'view_project', 'view_task', 'manage_resources', 'manage_risks', 'view_reports', 'create_task', 'assign_task', 'change_project_status', 'change_task_status', 'create_project']
2025-05-12 22:42:08,578 - app - INFO - 获取用户信息...
2025-05-12 22:42:08,581 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions 
WHERE permissions.name = ?
 LIMIT ? OFFSET ?
2025-05-12 22:42:08,582 - sqlalchemy.engine.Engine - INFO - [cached since 3639s ago] ('manage_users', 1, 0)
2025-05-12 22:42:08,583 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions 
WHERE permissions.name = ?
 LIMIT ? OFFSET ?
2025-05-12 22:42:08,584 - sqlalchemy.engine.Engine - INFO - [cached since 3639s ago] ('manage_roles', 1, 0)
2025-05-12 22:42:08,585 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions 
WHERE permissions.name = ?
 LIMIT ? OFFSET ?
2025-05-12 22:42:08,586 - sqlalchemy.engine.Engine - INFO - [cached since 3639s ago] ('manage_all_projects', 1, 0)
2025-05-12 22:42:08,587 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions 
WHERE permissions.name = ?
 LIMIT ? OFFSET ?
2025-05-12 22:42:08,587 - sqlalchemy.engine.Engine - INFO - [cached since 3639s ago] ('manage_project', 1, 0)
2025-05-12 22:42:08,590 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions 
WHERE permissions.name = ?
 LIMIT ? OFFSET ?
2025-05-12 22:42:08,590 - sqlalchemy.engine.Engine - INFO - [cached since 3639s ago] ('manage_all_tasks', 1, 0)
2025-05-12 22:42:08,591 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions 
WHERE permissions.name = ?
 LIMIT ? OFFSET ?
2025-05-12 22:42:08,591 - sqlalchemy.engine.Engine - INFO - [cached since 3639s ago] ('manage_task', 1, 0)
2025-05-12 22:42:08,593 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions 
WHERE permissions.name = ?
 LIMIT ? OFFSET ?
2025-05-12 22:42:08,594 - sqlalchemy.engine.Engine - INFO - [cached since 3639s ago] ('view_project', 1, 0)
2025-05-12 22:42:08,595 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions 
WHERE permissions.name = ?
 LIMIT ? OFFSET ?
2025-05-12 22:42:08,596 - sqlalchemy.engine.Engine - INFO - [cached since 3639s ago] ('view_task', 1, 0)
2025-05-12 22:42:08,597 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions 
WHERE permissions.name = ?
 LIMIT ? OFFSET ?
2025-05-12 22:42:08,599 - sqlalchemy.engine.Engine - INFO - [cached since 3639s ago] ('manage_resources', 1, 0)
2025-05-12 22:42:08,601 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions 
WHERE permissions.name = ?
 LIMIT ? OFFSET ?
2025-05-12 22:42:08,602 - sqlalchemy.engine.Engine - INFO - [cached since 3639s ago] ('manage_risks', 1, 0)
2025-05-12 22:42:08,603 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions 
WHERE permissions.name = ?
 LIMIT ? OFFSET ?
2025-05-12 22:42:08,604 - sqlalchemy.engine.Engine - INFO - [cached since 3639s ago] ('view_reports', 1, 0)
2025-05-12 22:42:08,604 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions 
WHERE permissions.name = ?
 LIMIT ? OFFSET ?
2025-05-12 22:42:08,605 - sqlalchemy.engine.Engine - INFO - [cached since 3639s ago] ('create_task', 1, 0)
2025-05-12 22:42:08,606 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions 
WHERE permissions.name = ?
 LIMIT ? OFFSET ?
2025-05-12 22:42:08,606 - sqlalchemy.engine.Engine - INFO - [cached since 3639s ago] ('create_project', 1, 0)
2025-05-12 22:42:08,607 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions 
WHERE permissions.name = ?
 LIMIT ? OFFSET ?
2025-05-12 22:42:08,607 - sqlalchemy.engine.Engine - INFO - [cached since 3639s ago] ('assign_task', 1, 0)
2025-05-12 22:42:08,608 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions 
WHERE permissions.name = ?
 LIMIT ? OFFSET ?
2025-05-12 22:42:08,608 - sqlalchemy.engine.Engine - INFO - [cached since 3639s ago] ('change_project_status', 1, 0)
2025-05-12 22:42:08,609 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions 
WHERE permissions.name = ?
 LIMIT ? OFFSET ?
2025-05-12 22:42:08,610 - sqlalchemy.engine.Engine - INFO - [cached since 3639s ago] ('change_task_status', 1, 0)
2025-05-12 22:42:08,612 - app - INFO - ================== 用户信息API详情 ==================
2025-05-12 22:42:08,612 - app - INFO - 用户ID: 1
2025-05-12 22:42:08,613 - app - INFO - 用户名: admin
2025-05-12 22:42:08,613 - app - INFO - 用户角色: ['admin']
2025-05-12 22:42:08,614 - app - INFO - 是否admin: True
2025-05-12 22:42:08,615 - app - INFO - JWT声明: {'fresh': False, 'iat': 1747060928, 'jti': 'eaacc53b-a740-4376-9507-7103b1505cf0', 'type': 'access', 'sub': 1, 'nbf': 1747060928, 'csrf': 'ImJjZTY3ZWZjOTFiZmIxYjViMTc1YTE3Nzc0MTdlYzI1MTQwYjI0YjQi.aCIIwA.zLlsxod81xqihYaD74jKC2BLMGs', 'exp': 1747064528, 'aud': 'task_management_system', 'user_claims': {'username': 'admin', 'roles': ['admin'], 'permissions': ['manage_users', 'manage_roles', 'manage_all_projects', 'manage_project', 'manage_all_tasks', 'manage_task', 'view_project', 'view_task', 'manage_resources', 'manage_risks', 'view_reports', 'create_task', 'assign_task', 'change_project_status', 'change_task_status', 'create_project'], 'is_active': True}, 'roles': ['admin'], 'admin': True}
2025-05-12 22:42:08,616 - app - INFO - 确认admin用户身份，更新角色: ['admin']
2025-05-12 22:42:08,616 - app - INFO - 成功获取用户 admin 的信息
2025-05-12 22:42:08,617 - app - INFO - ================== 用户信息API结束 ==================
2025-05-12 22:42:08,620 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-05-12 22:42:08,620 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 22:42:08] "GET /auth/user_info?_=1747060928552&bypass_jwt=true HTTP/1.1" 200 -
2025-05-12 22:42:09,792 - app - WARNING - 绕过JWT验证: /projects
2025-05-12 22:42:09,793 - app.utils.jwt_callbacks - INFO - Checking if token eaacc53b-a740-4376-9507-7103b1505cf0 is in blocklist
2025-05-12 22:42:09,794 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-05-12 22:42:09,794 - sqlalchemy.engine.Engine - INFO - SELECT token_blacklist.id AS token_blacklist_id, token_blacklist.jti AS token_blacklist_jti, token_blacklist.token_type AS token_blacklist_token_type, token_blacklist.user_id AS token_blacklist_user_id, token_blacklist.revoked_at AS token_blacklist_revoked_at, token_blacklist.expires_at AS token_blacklist_expires_at 
FROM token_blacklist 
WHERE token_blacklist.jti = ?
 LIMIT ? OFFSET ?
2025-05-12 22:42:09,795 - sqlalchemy.engine.Engine - INFO - [cached since 3636s ago] ('eaacc53b-a740-4376-9507-7103b1505cf0', 1, 0)
2025-05-12 22:42:09,796 - app.utils.jwt_callbacks - INFO - Token eaacc53b-a740-4376-9507-7103b1505cf0 is valid
2025-05-12 22:42:09,796 - app.utils.jwt_callbacks - INFO - Verifying token
2025-05-12 22:42:09,797 - app.utils.jwt_callbacks - INFO - JWT Header: {'alg': 'HS256', 'typ': 'JWT'}
2025-05-12 22:42:09,798 - app.utils.jwt_callbacks - INFO - JWT Data: {'fresh': False, 'iat': 1747060928, 'jti': 'eaacc53b-a740-4376-9507-7103b1505cf0', 'type': 'access', 'sub': 1, 'nbf': 1747060928, 'csrf': 'ImJjZTY3ZWZjOTFiZmIxYjViMTc1YTE3Nzc0MTdlYzI1MTQwYjI0YjQi.aCIIwA.zLlsxod81xqihYaD74jKC2BLMGs', 'exp': 1747064528, 'aud': 'task_management_system', 'user_claims': {'username': 'admin', 'roles': ['admin'], 'permissions': ['manage_users', 'manage_roles', 'manage_all_projects', 'manage_project', 'manage_all_tasks', 'manage_task', 'view_project', 'view_task', 'manage_resources', 'manage_risks', 'view_reports', 'create_task', 'assign_task', 'change_project_status', 'change_task_status', 'create_project'], 'is_active': True}, 'roles': ['admin'], 'admin': True}
2025-05-12 22:42:09,799 - app.utils.jwt_callbacks - INFO - Token time difference: -1.799814 seconds
2025-05-12 22:42:09,800 - app.utils.jwt_callbacks - INFO - Token verification successful
2025-05-12 22:42:09,802 - app.utils.jwt_callbacks - INFO - Looking up user with identity: 1
2025-05-12 22:42:09,803 - sqlalchemy.engine.Engine - INFO - SELECT users.id AS users_id, users.username AS users_username, users.email AS users_email, users.name AS users_name, users.password_hash AS users_password_hash, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.last_login AS users_last_login 
FROM users 
WHERE users.id = ?
2025-05-12 22:42:09,803 - sqlalchemy.engine.Engine - INFO - [cached since 3636s ago] (1,)
2025-05-12 22:42:09,804 - app.utils.jwt_callbacks - INFO - User found: admin
2025-05-12 22:42:09,805 - sqlalchemy.engine.Engine - INFO - SELECT roles.id AS roles_id, roles.name AS roles_name, roles.description AS roles_description, roles.created_at AS roles_created_at 
FROM roles, user_roles 
WHERE ? = user_roles.user_id AND roles.id = user_roles.role_id
2025-05-12 22:42:09,806 - sqlalchemy.engine.Engine - INFO - [cached since 3636s ago] (1,)
2025-05-12 22:42:09,806 - app.utils.jwt_callbacks - INFO - User roles: ['admin']
2025-05-12 22:42:09,807 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions, role_permissions 
WHERE ? = role_permissions.role_id AND permissions.id = role_permissions.permission_id
2025-05-12 22:42:09,808 - sqlalchemy.engine.Engine - INFO - [cached since 3640s ago] (1,)
2025-05-12 22:42:09,810 - app.utils.jwt_callbacks - INFO - User permissions: ['manage_users', 'manage_roles', 'manage_all_projects', 'manage_project', 'manage_all_tasks', 'manage_task', 'view_project', 'view_task', 'manage_resources', 'manage_risks', 'view_reports', 'create_task', 'assign_task', 'change_project_status', 'change_task_status', 'create_project']
2025-05-12 22:42:09,811 - app.routes.main - INFO - JWT bypass enabled for projects - Using test user
2025-05-12 22:42:09,813 - sqlalchemy.engine.Engine - INFO - SELECT projects.id AS projects_id, projects.name AS projects_name, projects.description AS projects_description, projects.status AS projects_status, projects.start_date AS projects_start_date, projects.end_date AS projects_end_date, projects.progress AS projects_progress, projects.created_at AS projects_created_at, projects.updated_at AS projects_updated_at, projects.manager_id AS projects_manager_id, projects.owner_id AS projects_owner_id 
FROM projects
2025-05-12 22:42:09,813 - sqlalchemy.engine.Engine - INFO - [cached since 2674s ago] ()
2025-05-12 22:42:09,815 - sqlalchemy.engine.Engine - INFO - SELECT users.id AS users_id, users.username AS users_username, users.email AS users_email, users.name AS users_name, users.password_hash AS users_password_hash, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.last_login AS users_last_login 
FROM users 
WHERE users.id = ?
2025-05-12 22:42:09,816 - sqlalchemy.engine.Engine - INFO - [cached since 3636s ago] (3,)
2025-05-12 22:42:09,817 - sqlalchemy.engine.Engine - INFO - SELECT users.id AS users_id, users.username AS users_username, users.email AS users_email, users.name AS users_name, users.password_hash AS users_password_hash, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.last_login AS users_last_login 
FROM users 
WHERE users.id = ?
2025-05-12 22:42:09,818 - sqlalchemy.engine.Engine - INFO - [cached since 3636s ago] (5,)
2025-05-12 22:42:09,820 - sqlalchemy.engine.Engine - INFO - SELECT users.id AS users_id, users.username AS users_username, users.email AS users_email, users.name AS users_name, users.password_hash AS users_password_hash, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.last_login AS users_last_login 
FROM users 
WHERE users.id = ?
2025-05-12 22:42:09,820 - sqlalchemy.engine.Engine - INFO - [cached since 3636s ago] (8,)
2025-05-12 22:42:09,821 - sqlalchemy.engine.Engine - INFO - SELECT users.id AS users_id, users.username AS users_username, users.email AS users_email, users.name AS users_name, users.password_hash AS users_password_hash, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.last_login AS users_last_login 
FROM users 
WHERE users.id = ?
2025-05-12 22:42:09,822 - sqlalchemy.engine.Engine - INFO - [cached since 3636s ago] (5,)
2025-05-12 22:42:09,823 - sqlalchemy.engine.Engine - INFO - SELECT users.id AS users_id, users.username AS users_username, users.email AS users_email, users.name AS users_name, users.password_hash AS users_password_hash, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.last_login AS users_last_login 
FROM users 
WHERE users.id = ?
2025-05-12 22:42:09,824 - sqlalchemy.engine.Engine - INFO - [cached since 3636s ago] (9,)
2025-05-12 22:42:09,827 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-05-12 22:42:09,828 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 22:42:09] "GET /projects?bypass_jwt=true HTTP/1.1" 200 -
2025-05-12 22:42:09,857 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 22:42:09] "[36mGET /static/css/bootstrap.min.css HTTP/1.1[0m" 304 -
2025-05-12 22:42:09,858 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 22:42:09] "[36mGET /static/css/bootstrap-icons.css HTTP/1.1[0m" 304 -
2025-05-12 22:42:09,859 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 22:42:09] "[36mGET /static/css/style.css HTTP/1.1[0m" 304 -
2025-05-12 22:42:09,862 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 22:42:09] "[36mGET /static/js/jquery.min.js HTTP/1.1[0m" 304 -
2025-05-12 22:42:09,865 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 22:42:09] "[36mGET /static/js/bootstrap.bundle.min.js HTTP/1.1[0m" 304 -
2025-05-12 22:42:09,866 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 22:42:09] "GET /static/css/frappe-gantt.css HTTP/1.1" 200 -
2025-05-12 22:42:09,870 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 22:42:09] "GET /static/js/frappe-gantt.min.js HTTP/1.1" 200 -
2025-05-12 22:42:09,872 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 22:42:09] "[36mGET /static/js/utils.js HTTP/1.1[0m" 304 -
2025-05-12 22:42:09,874 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 22:42:09] "[36mGET /static/js/auth.js HTTP/1.1[0m" 304 -
2025-05-12 22:42:09,879 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 22:42:09] "[36mGET /static/js/fix-modals.js HTTP/1.1[0m" 304 -
2025-05-12 22:42:09,879 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 22:42:09] "[36mGET /static/js/csrf.js HTTP/1.1[0m" 304 -
2025-05-12 22:42:09,882 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 22:42:09] "[36mGET /static/js/user-profile.js HTTP/1.1[0m" 304 -
2025-05-12 22:42:09,906 - app - WARNING - 绕过JWT验证: /api/global/users
2025-05-12 22:42:09,908 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 22:42:09] "[33mGET /api/global/users?bypass_jwt=true&_=1747060929902 HTTP/1.1[0m" 404 -
2025-05-12 22:42:09,916 - app - WARNING - 绕过JWT验证: /api/project-managers
2025-05-12 22:42:09,917 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 22:42:09] "[36mGET /static/favicon.ico HTTP/1.1[0m" 304 -
2025-05-12 22:42:09,918 - app - INFO - 直接访问项目经理列表API
2025-05-12 22:42:09,920 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-05-12 22:42:09,921 - sqlalchemy.engine.Engine - INFO - SELECT users.id AS users_id, users.username AS users_username, users.email AS users_email, users.name AS users_name, users.password_hash AS users_password_hash, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.last_login AS users_last_login 
FROM users 
WHERE users.is_active = 1
2025-05-12 22:42:09,921 - sqlalchemy.engine.Engine - INFO - [cached since 2674s ago] ()
2025-05-12 22:42:09,922 - app - INFO - 已找到 9 个活跃用户用于项目经理选择
2025-05-12 22:42:09,922 - app - INFO - 返回 9 个可选的项目负责人
2025-05-12 22:42:09,923 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-05-12 22:42:09,924 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 22:42:09] "GET /api/project-managers?bypass_jwt=true&_=1747060929913 HTTP/1.1" 200 -
2025-05-12 22:42:11,397 - app - WARNING - 绕过JWT验证: /api/global/users
2025-05-12 22:42:11,398 - app - WARNING - 绕过JWT验证: /api/global/users
2025-05-12 22:42:11,401 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 22:42:11] "[33mGET /api/global/users?bypass_jwt=true&_=1747060931391 HTTP/1.1[0m" 404 -
2025-05-12 22:42:11,404 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 22:42:11] "[33mGET /api/global/users?bypass_jwt=true&_=1747060931390 HTTP/1.1[0m" 404 -
2025-05-12 22:42:11,424 - app - WARNING - 绕过JWT验证: /api/project-managers
2025-05-12 22:42:11,426 - app - WARNING - 绕过JWT验证: /api/project-managers
2025-05-12 22:42:11,429 - app - INFO - 直接访问项目经理列表API
2025-05-12 22:42:11,430 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-05-12 22:42:11,432 - sqlalchemy.engine.Engine - INFO - SELECT users.id AS users_id, users.username AS users_username, users.email AS users_email, users.name AS users_name, users.password_hash AS users_password_hash, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.last_login AS users_last_login 
FROM users 
WHERE users.is_active = 1
2025-05-12 22:42:11,433 - sqlalchemy.engine.Engine - INFO - [cached since 2676s ago] ()
2025-05-12 22:42:11,429 - app - INFO - 直接访问项目经理列表API
2025-05-12 22:42:11,437 - app - INFO - 已找到 9 个活跃用户用于项目经理选择
2025-05-12 22:42:11,438 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-05-12 22:42:11,440 - app - INFO - 返回 9 个可选的项目负责人
2025-05-12 22:42:11,441 - sqlalchemy.engine.Engine - INFO - SELECT users.id AS users_id, users.username AS users_username, users.email AS users_email, users.name AS users_name, users.password_hash AS users_password_hash, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.last_login AS users_last_login 
FROM users 
WHERE users.is_active = 1
2025-05-12 22:42:11,443 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-05-12 22:42:11,445 - sqlalchemy.engine.Engine - INFO - [cached since 2676s ago] ()
2025-05-12 22:42:11,445 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 22:42:11] "GET /api/project-managers?bypass_jwt=true&_=1747060931421 HTTP/1.1" 200 -
2025-05-12 22:42:11,446 - app - INFO - 已找到 9 个活跃用户用于项目经理选择
2025-05-12 22:42:11,449 - app - INFO - 返回 9 个可选的项目负责人
2025-05-12 22:42:11,454 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-05-12 22:42:11,455 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 22:42:11] "GET /api/project-managers?bypass_jwt=true&_=1747060931421 HTTP/1.1" 200 -
2025-05-12 22:42:22,871 - app - WARNING - 绕过JWT验证: /api/projects
2025-05-12 22:42:22,873 - app - WARNING - 绕过JWT验证: /api/projects
2025-05-12 22:42:22,874 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 22:42:22] "[31m[1mPOST /api/projects?bypass_jwt=true&_=1747060942866 HTTP/1.1[0m" 405 -
2025-05-12 22:42:22,874 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 22:42:22] "[31m[1mPOST /api/projects?bypass_jwt=true&_=1747060942867 HTTP/1.1[0m" 405 -
2025-05-12 22:43:02,061 - app - WARNING - 绕过JWT验证: /projects
2025-05-12 22:43:02,062 - app.utils.jwt_callbacks - INFO - Checking if token eaacc53b-a740-4376-9507-7103b1505cf0 is in blocklist
2025-05-12 22:43:02,063 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-05-12 22:43:02,063 - sqlalchemy.engine.Engine - INFO - SELECT token_blacklist.id AS token_blacklist_id, token_blacklist.jti AS token_blacklist_jti, token_blacklist.token_type AS token_blacklist_token_type, token_blacklist.user_id AS token_blacklist_user_id, token_blacklist.revoked_at AS token_blacklist_revoked_at, token_blacklist.expires_at AS token_blacklist_expires_at 
FROM token_blacklist 
WHERE token_blacklist.jti = ?
 LIMIT ? OFFSET ?
2025-05-12 22:43:02,064 - sqlalchemy.engine.Engine - INFO - [cached since 3688s ago] ('eaacc53b-a740-4376-9507-7103b1505cf0', 1, 0)
2025-05-12 22:43:02,065 - app.utils.jwt_callbacks - INFO - Token eaacc53b-a740-4376-9507-7103b1505cf0 is valid
2025-05-12 22:43:02,065 - app.utils.jwt_callbacks - INFO - Verifying token
2025-05-12 22:43:02,066 - app.utils.jwt_callbacks - INFO - JWT Header: {'alg': 'HS256', 'typ': 'JWT'}
2025-05-12 22:43:02,067 - app.utils.jwt_callbacks - INFO - JWT Data: {'fresh': False, 'iat': 1747060928, 'jti': 'eaacc53b-a740-4376-9507-7103b1505cf0', 'type': 'access', 'sub': 1, 'nbf': 1747060928, 'csrf': 'ImJjZTY3ZWZjOTFiZmIxYjViMTc1YTE3Nzc0MTdlYzI1MTQwYjI0YjQi.aCIIwA.zLlsxod81xqihYaD74jKC2BLMGs', 'exp': 1747064528, 'aud': 'task_management_system', 'user_claims': {'username': 'admin', 'roles': ['admin'], 'permissions': ['manage_users', 'manage_roles', 'manage_all_projects', 'manage_project', 'manage_all_tasks', 'manage_task', 'view_project', 'view_task', 'manage_resources', 'manage_risks', 'view_reports', 'create_task', 'assign_task', 'change_project_status', 'change_task_status', 'create_project'], 'is_active': True}, 'roles': ['admin'], 'admin': True}
2025-05-12 22:43:02,069 - app.utils.jwt_callbacks - INFO - Token time difference: -54.069005 seconds
2025-05-12 22:43:02,070 - app.utils.jwt_callbacks - INFO - Token verification successful
2025-05-12 22:43:02,071 - app.utils.jwt_callbacks - INFO - Looking up user with identity: 1
2025-05-12 22:43:02,072 - sqlalchemy.engine.Engine - INFO - SELECT users.id AS users_id, users.username AS users_username, users.email AS users_email, users.name AS users_name, users.password_hash AS users_password_hash, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.last_login AS users_last_login 
FROM users 
WHERE users.id = ?
2025-05-12 22:43:02,072 - sqlalchemy.engine.Engine - INFO - [cached since 3688s ago] (1,)
2025-05-12 22:43:02,073 - app.utils.jwt_callbacks - INFO - User found: admin
2025-05-12 22:43:02,074 - sqlalchemy.engine.Engine - INFO - SELECT roles.id AS roles_id, roles.name AS roles_name, roles.description AS roles_description, roles.created_at AS roles_created_at 
FROM roles, user_roles 
WHERE ? = user_roles.user_id AND roles.id = user_roles.role_id
2025-05-12 22:43:02,075 - sqlalchemy.engine.Engine - INFO - [cached since 3689s ago] (1,)
2025-05-12 22:43:02,076 - app.utils.jwt_callbacks - INFO - User roles: ['admin']
2025-05-12 22:43:02,077 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions, role_permissions 
WHERE ? = role_permissions.role_id AND permissions.id = role_permissions.permission_id
2025-05-12 22:43:02,077 - sqlalchemy.engine.Engine - INFO - [cached since 3692s ago] (1,)
2025-05-12 22:43:02,078 - app.utils.jwt_callbacks - INFO - User permissions: ['manage_users', 'manage_roles', 'manage_all_projects', 'manage_project', 'manage_all_tasks', 'manage_task', 'view_project', 'view_task', 'manage_resources', 'manage_risks', 'view_reports', 'create_task', 'assign_task', 'change_project_status', 'change_task_status', 'create_project']
2025-05-12 22:43:02,079 - app.routes.main - INFO - JWT bypass enabled for projects - Using test user
2025-05-12 22:43:02,079 - sqlalchemy.engine.Engine - INFO - SELECT projects.id AS projects_id, projects.name AS projects_name, projects.description AS projects_description, projects.status AS projects_status, projects.start_date AS projects_start_date, projects.end_date AS projects_end_date, projects.progress AS projects_progress, projects.created_at AS projects_created_at, projects.updated_at AS projects_updated_at, projects.manager_id AS projects_manager_id, projects.owner_id AS projects_owner_id 
FROM projects
2025-05-12 22:43:02,080 - sqlalchemy.engine.Engine - INFO - [cached since 2727s ago] ()
2025-05-12 22:43:02,080 - sqlalchemy.engine.Engine - INFO - SELECT users.id AS users_id, users.username AS users_username, users.email AS users_email, users.name AS users_name, users.password_hash AS users_password_hash, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.last_login AS users_last_login 
FROM users 
WHERE users.id = ?
2025-05-12 22:43:02,081 - sqlalchemy.engine.Engine - INFO - [cached since 3688s ago] (3,)
2025-05-12 22:43:02,082 - sqlalchemy.engine.Engine - INFO - SELECT users.id AS users_id, users.username AS users_username, users.email AS users_email, users.name AS users_name, users.password_hash AS users_password_hash, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.last_login AS users_last_login 
FROM users 
WHERE users.id = ?
2025-05-12 22:43:02,083 - sqlalchemy.engine.Engine - INFO - [cached since 3688s ago] (5,)
2025-05-12 22:43:02,084 - sqlalchemy.engine.Engine - INFO - SELECT users.id AS users_id, users.username AS users_username, users.email AS users_email, users.name AS users_name, users.password_hash AS users_password_hash, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.last_login AS users_last_login 
FROM users 
WHERE users.id = ?
2025-05-12 22:43:02,085 - sqlalchemy.engine.Engine - INFO - [cached since 3688s ago] (8,)
2025-05-12 22:43:02,086 - sqlalchemy.engine.Engine - INFO - SELECT users.id AS users_id, users.username AS users_username, users.email AS users_email, users.name AS users_name, users.password_hash AS users_password_hash, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.last_login AS users_last_login 
FROM users 
WHERE users.id = ?
2025-05-12 22:43:02,087 - sqlalchemy.engine.Engine - INFO - [cached since 3688s ago] (5,)
2025-05-12 22:43:02,088 - sqlalchemy.engine.Engine - INFO - SELECT users.id AS users_id, users.username AS users_username, users.email AS users_email, users.name AS users_name, users.password_hash AS users_password_hash, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.last_login AS users_last_login 
FROM users 
WHERE users.id = ?
2025-05-12 22:43:02,088 - sqlalchemy.engine.Engine - INFO - [cached since 3688s ago] (9,)
2025-05-12 22:43:02,090 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-05-12 22:43:02,091 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 22:43:02] "GET /projects?bypass_jwt=true HTTP/1.1" 200 -
2025-05-12 22:43:02,115 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 22:43:02] "[36mGET /static/css/bootstrap.min.css HTTP/1.1[0m" 304 -
2025-05-12 22:43:02,116 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 22:43:02] "[36mGET /static/css/bootstrap-icons.css HTTP/1.1[0m" 304 -
2025-05-12 22:43:02,117 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 22:43:02] "[36mGET /static/css/style.css HTTP/1.1[0m" 304 -
2025-05-12 22:43:02,119 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 22:43:02] "[36mGET /static/css/frappe-gantt.css HTTP/1.1[0m" 304 -
2025-05-12 22:43:02,122 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 22:43:02] "[36mGET /static/js/jquery.min.js HTTP/1.1[0m" 304 -
2025-05-12 22:43:02,125 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 22:43:02] "[36mGET /static/js/bootstrap.bundle.min.js HTTP/1.1[0m" 304 -
2025-05-12 22:43:02,126 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 22:43:02] "[36mGET /static/js/utils.js HTTP/1.1[0m" 304 -
2025-05-12 22:43:02,130 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 22:43:02] "[36mGET /static/js/auth.js HTTP/1.1[0m" 304 -
2025-05-12 22:43:02,131 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 22:43:02] "[36mGET /static/js/fix-modals.js HTTP/1.1[0m" 304 -
2025-05-12 22:43:02,132 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 22:43:02] "[36mGET /static/js/csrf.js HTTP/1.1[0m" 304 -
2025-05-12 22:43:02,133 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 22:43:02] "[36mGET /static/js/user-profile.js HTTP/1.1[0m" 304 -
2025-05-12 22:43:02,140 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 22:43:02] "[36mGET /static/js/frappe-gantt.min.js HTTP/1.1[0m" 304 -
2025-05-12 22:43:02,150 - app - WARNING - 绕过JWT验证: /api/global/users
2025-05-12 22:43:02,151 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 22:43:02] "[33mGET /api/global/users?bypass_jwt=true&_=1747060982146 HTTP/1.1[0m" 404 -
2025-05-12 22:43:02,156 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 22:43:02] "[36mGET /static/favicon.ico HTTP/1.1[0m" 304 -
2025-05-12 22:43:02,163 - app - WARNING - 绕过JWT验证: /api/project-managers
2025-05-12 22:43:02,164 - app - INFO - 直接访问项目经理列表API
2025-05-12 22:43:02,165 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-05-12 22:43:02,165 - sqlalchemy.engine.Engine - INFO - SELECT users.id AS users_id, users.username AS users_username, users.email AS users_email, users.name AS users_name, users.password_hash AS users_password_hash, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.last_login AS users_last_login 
FROM users 
WHERE users.is_active = 1
2025-05-12 22:43:02,166 - sqlalchemy.engine.Engine - INFO - [cached since 2727s ago] ()
2025-05-12 22:43:02,167 - app - INFO - 已找到 9 个活跃用户用于项目经理选择
2025-05-12 22:43:02,168 - app - INFO - 返回 9 个可选的项目负责人
2025-05-12 22:43:02,169 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-05-12 22:43:02,170 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 22:43:02] "GET /api/project-managers?bypass_jwt=true&_=1747060982157 HTTP/1.1" 200 -
2025-05-12 22:43:06,113 - app - WARNING - 绕过JWT验证: /projects/detail/1
2025-05-12 22:43:06,113 - app.utils.jwt_callbacks - INFO - Checking if token eaacc53b-a740-4376-9507-7103b1505cf0 is in blocklist
2025-05-12 22:43:06,114 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-05-12 22:43:06,115 - sqlalchemy.engine.Engine - INFO - SELECT token_blacklist.id AS token_blacklist_id, token_blacklist.jti AS token_blacklist_jti, token_blacklist.token_type AS token_blacklist_token_type, token_blacklist.user_id AS token_blacklist_user_id, token_blacklist.revoked_at AS token_blacklist_revoked_at, token_blacklist.expires_at AS token_blacklist_expires_at 
FROM token_blacklist 
WHERE token_blacklist.jti = ?
 LIMIT ? OFFSET ?
2025-05-12 22:43:06,115 - sqlalchemy.engine.Engine - INFO - [cached since 3692s ago] ('eaacc53b-a740-4376-9507-7103b1505cf0', 1, 0)
2025-05-12 22:43:06,116 - app.utils.jwt_callbacks - INFO - Token eaacc53b-a740-4376-9507-7103b1505cf0 is valid
2025-05-12 22:43:06,117 - app.utils.jwt_callbacks - INFO - Verifying token
2025-05-12 22:43:06,118 - app.utils.jwt_callbacks - INFO - JWT Header: {'alg': 'HS256', 'typ': 'JWT'}
2025-05-12 22:43:06,119 - app.utils.jwt_callbacks - INFO - JWT Data: {'fresh': False, 'iat': 1747060928, 'jti': 'eaacc53b-a740-4376-9507-7103b1505cf0', 'type': 'access', 'sub': 1, 'nbf': 1747060928, 'csrf': 'ImJjZTY3ZWZjOTFiZmIxYjViMTc1YTE3Nzc0MTdlYzI1MTQwYjI0YjQi.aCIIwA.zLlsxod81xqihYaD74jKC2BLMGs', 'exp': 1747064528, 'aud': 'task_management_system', 'user_claims': {'username': 'admin', 'roles': ['admin'], 'permissions': ['manage_users', 'manage_roles', 'manage_all_projects', 'manage_project', 'manage_all_tasks', 'manage_task', 'view_project', 'view_task', 'manage_resources', 'manage_risks', 'view_reports', 'create_task', 'assign_task', 'change_project_status', 'change_task_status', 'create_project'], 'is_active': True}, 'roles': ['admin'], 'admin': True}
2025-05-12 22:43:06,119 - app.utils.jwt_callbacks - INFO - Token time difference: -58.119353 seconds
2025-05-12 22:43:06,120 - app.utils.jwt_callbacks - INFO - Token verification successful
2025-05-12 22:43:06,120 - app.utils.jwt_callbacks - INFO - Looking up user with identity: 1
2025-05-12 22:43:06,121 - sqlalchemy.engine.Engine - INFO - SELECT users.id AS users_id, users.username AS users_username, users.email AS users_email, users.name AS users_name, users.password_hash AS users_password_hash, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.last_login AS users_last_login 
FROM users 
WHERE users.id = ?
2025-05-12 22:43:06,121 - sqlalchemy.engine.Engine - INFO - [cached since 3692s ago] (1,)
2025-05-12 22:43:06,122 - app.utils.jwt_callbacks - INFO - User found: admin
2025-05-12 22:43:06,122 - sqlalchemy.engine.Engine - INFO - SELECT roles.id AS roles_id, roles.name AS roles_name, roles.description AS roles_description, roles.created_at AS roles_created_at 
FROM roles, user_roles 
WHERE ? = user_roles.user_id AND roles.id = user_roles.role_id
2025-05-12 22:43:06,123 - sqlalchemy.engine.Engine - INFO - [cached since 3693s ago] (1,)
2025-05-12 22:43:06,124 - app.utils.jwt_callbacks - INFO - User roles: ['admin']
2025-05-12 22:43:06,125 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions, role_permissions 
WHERE ? = role_permissions.role_id AND permissions.id = role_permissions.permission_id
2025-05-12 22:43:06,126 - sqlalchemy.engine.Engine - INFO - [cached since 3696s ago] (1,)
2025-05-12 22:43:06,126 - app.utils.jwt_callbacks - INFO - User permissions: ['manage_users', 'manage_roles', 'manage_all_projects', 'manage_project', 'manage_all_tasks', 'manage_task', 'view_project', 'view_task', 'manage_resources', 'manage_risks', 'view_reports', 'create_task', 'assign_task', 'change_project_status', 'change_task_status', 'create_project']
2025-05-12 22:43:06,127 - app - INFO - 直接调用项目详情视图函数，不进行重定向: 项目ID=1
2025-05-12 22:43:06,127 - app.utils.jwt_callbacks - INFO - Checking if token eaacc53b-a740-4376-9507-7103b1505cf0 is in blocklist
2025-05-12 22:43:06,128 - sqlalchemy.engine.Engine - INFO - SELECT token_blacklist.id AS token_blacklist_id, token_blacklist.jti AS token_blacklist_jti, token_blacklist.token_type AS token_blacklist_token_type, token_blacklist.user_id AS token_blacklist_user_id, token_blacklist.revoked_at AS token_blacklist_revoked_at, token_blacklist.expires_at AS token_blacklist_expires_at 
FROM token_blacklist 
WHERE token_blacklist.jti = ?
 LIMIT ? OFFSET ?
2025-05-12 22:43:06,129 - sqlalchemy.engine.Engine - INFO - [cached since 3692s ago] ('eaacc53b-a740-4376-9507-7103b1505cf0', 1, 0)
2025-05-12 22:43:06,130 - app.utils.jwt_callbacks - INFO - Token eaacc53b-a740-4376-9507-7103b1505cf0 is valid
2025-05-12 22:43:06,130 - app.utils.jwt_callbacks - INFO - Verifying token
2025-05-12 22:43:06,131 - app.utils.jwt_callbacks - INFO - JWT Header: {'alg': 'HS256', 'typ': 'JWT'}
2025-05-12 22:43:06,132 - app.utils.jwt_callbacks - INFO - JWT Data: {'fresh': False, 'iat': 1747060928, 'jti': 'eaacc53b-a740-4376-9507-7103b1505cf0', 'type': 'access', 'sub': 1, 'nbf': 1747060928, 'csrf': 'ImJjZTY3ZWZjOTFiZmIxYjViMTc1YTE3Nzc0MTdlYzI1MTQwYjI0YjQi.aCIIwA.zLlsxod81xqihYaD74jKC2BLMGs', 'exp': 1747064528, 'aud': 'task_management_system', 'user_claims': {'username': 'admin', 'roles': ['admin'], 'permissions': ['manage_users', 'manage_roles', 'manage_all_projects', 'manage_project', 'manage_all_tasks', 'manage_task', 'view_project', 'view_task', 'manage_resources', 'manage_risks', 'view_reports', 'create_task', 'assign_task', 'change_project_status', 'change_task_status', 'create_project'], 'is_active': True}, 'roles': ['admin'], 'admin': True}
2025-05-12 22:43:06,133 - app.utils.jwt_callbacks - INFO - Token time difference: -58.133857 seconds
2025-05-12 22:43:06,134 - app.utils.jwt_callbacks - INFO - Token verification successful
2025-05-12 22:43:06,136 - app.utils.jwt_callbacks - INFO - Looking up user with identity: 1
2025-05-12 22:43:06,136 - app.utils.jwt_callbacks - INFO - User found: admin
2025-05-12 22:43:06,137 - app.utils.jwt_callbacks - INFO - User roles: ['admin']
2025-05-12 22:43:06,138 - app.utils.jwt_callbacks - INFO - User permissions: ['manage_users', 'manage_roles', 'manage_all_projects', 'manage_project', 'manage_all_tasks', 'manage_task', 'view_project', 'view_task', 'manage_resources', 'manage_risks', 'view_reports', 'create_task', 'assign_task', 'change_project_status', 'change_task_status', 'create_project']
2025-05-12 22:43:06,139 - app.routes.projects - INFO - 获取项目 1 详情页面 - 用户ID: 1, URL: http://127.0.0.1:5000/projects/detail/1?no_redirect=true&bypass_jwt=true
2025-05-12 22:43:06,140 - sqlalchemy.engine.Engine - INFO - SELECT projects.id AS projects_id, projects.name AS projects_name, projects.description AS projects_description, projects.status AS projects_status, projects.start_date AS projects_start_date, projects.end_date AS projects_end_date, projects.progress AS projects_progress, projects.created_at AS projects_created_at, projects.updated_at AS projects_updated_at, projects.manager_id AS projects_manager_id, projects.owner_id AS projects_owner_id 
FROM projects 
WHERE projects.id = ?
2025-05-12 22:43:06,141 - sqlalchemy.engine.Engine - INFO - [cached since 2620s ago] (1,)
2025-05-12 22:43:06,143 - sqlalchemy.engine.Engine - INFO - SELECT users.id AS users_id, users.username AS users_username, users.email AS users_email, users.name AS users_name, users.password_hash AS users_password_hash, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.last_login AS users_last_login 
FROM users 
WHERE users.id = ?
2025-05-12 22:43:06,144 - sqlalchemy.engine.Engine - INFO - [cached since 3692s ago] (3,)
2025-05-12 22:43:06,144 - sqlalchemy.engine.Engine - INFO - SELECT teams.id AS teams_id, teams.name AS teams_name, teams.description AS teams_description, teams.created_at AS teams_created_at, teams.updated_at AS teams_updated_at, teams.project_id AS teams_project_id, teams.leader_id AS teams_leader_id 
FROM teams 
WHERE ? = teams.project_id
2025-05-12 22:43:06,145 - sqlalchemy.engine.Engine - INFO - [cached since 2620s ago] (1,)
2025-05-12 22:43:06,145 - sqlalchemy.engine.Engine - INFO - SELECT tasks.id AS tasks_id, tasks.title AS tasks_title, tasks.description AS tasks_description, tasks.status AS tasks_status, tasks.priority AS tasks_priority, tasks.progress AS tasks_progress, tasks.start_date AS tasks_start_date, tasks.due_date AS tasks_due_date, tasks.created_at AS tasks_created_at, tasks.updated_at AS tasks_updated_at, tasks.project_id AS tasks_project_id, tasks.assignee_id AS tasks_assignee_id, tasks.created_by AS tasks_created_by, tasks.team_id AS tasks_team_id, tasks.parent_id AS tasks_parent_id 
FROM tasks 
WHERE tasks.project_id = ?
2025-05-12 22:43:06,146 - sqlalchemy.engine.Engine - INFO - [cached since 2620s ago] (1,)
2025-05-12 22:43:06,147 - sqlalchemy.engine.Engine - INFO - SELECT users.id AS users_id, users.username AS users_username, users.email AS users_email, users.name AS users_name, users.password_hash AS users_password_hash, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.last_login AS users_last_login 
FROM users 
WHERE users.id = ?
2025-05-12 22:43:06,148 - sqlalchemy.engine.Engine - INFO - [cached since 3692s ago] (5,)
2025-05-12 22:43:06,149 - sqlalchemy.engine.Engine - INFO - SELECT users.id AS users_id, users.username AS users_username, users.email AS users_email, users.name AS users_name, users.password_hash AS users_password_hash, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.last_login AS users_last_login 
FROM users 
WHERE users.id = ?
2025-05-12 22:43:06,150 - sqlalchemy.engine.Engine - INFO - [cached since 3692s ago] (6,)
2025-05-12 22:43:06,151 - sqlalchemy.engine.Engine - INFO - SELECT users.id AS users_id, users.username AS users_username, users.email AS users_email, users.name AS users_name, users.password_hash AS users_password_hash, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.last_login AS users_last_login 
FROM users 
WHERE users.id = ?
2025-05-12 22:43:06,151 - sqlalchemy.engine.Engine - INFO - [cached since 3692s ago] (8,)
2025-05-12 22:43:06,152 - sqlalchemy.engine.Engine - INFO - SELECT users.id AS users_id, users.username AS users_username, users.email AS users_email, users.name AS users_name, users.password_hash AS users_password_hash, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.last_login AS users_last_login 
FROM users 
WHERE users.id = ?
2025-05-12 22:43:06,153 - sqlalchemy.engine.Engine - INFO - [cached since 3692s ago] (8,)
2025-05-12 22:43:06,155 - sqlalchemy.engine.Engine - INFO - SELECT users.id AS users_id, users.username AS users_username, users.email AS users_email, users.name AS users_name, users.password_hash AS users_password_hash, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.last_login AS users_last_login 
FROM users 
WHERE users.id IS NULL
2025-05-12 22:43:06,155 - sqlalchemy.engine.Engine - INFO - [cached since 2516s ago] ()
2025-05-12 22:43:06,157 - sqlalchemy.engine.Engine - INFO - SELECT users.id AS users_id, users.username AS users_username, users.email AS users_email, users.name AS users_name, users.password_hash AS users_password_hash, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.last_login AS users_last_login 
FROM users
2025-05-12 22:43:06,158 - sqlalchemy.engine.Engine - INFO - [cached since 2620s ago] ()
2025-05-12 22:43:06,159 - sqlalchemy.engine.Engine - INFO - SELECT roles.id AS roles_id, roles.name AS roles_name, roles.description AS roles_description, roles.created_at AS roles_created_at 
FROM roles, user_roles 
WHERE ? = user_roles.user_id AND roles.id = user_roles.role_id
2025-05-12 22:43:06,160 - sqlalchemy.engine.Engine - INFO - [cached since 3693s ago] (2,)
2025-05-12 22:43:06,161 - sqlalchemy.engine.Engine - INFO - SELECT roles.id AS roles_id, roles.name AS roles_name, roles.description AS roles_description, roles.created_at AS roles_created_at 
FROM roles, user_roles 
WHERE ? = user_roles.user_id AND roles.id = user_roles.role_id
2025-05-12 22:43:06,162 - sqlalchemy.engine.Engine - INFO - [cached since 3693s ago] (3,)
2025-05-12 22:43:06,162 - sqlalchemy.engine.Engine - INFO - SELECT roles.id AS roles_id, roles.name AS roles_name, roles.description AS roles_description, roles.created_at AS roles_created_at 
FROM roles, user_roles 
WHERE ? = user_roles.user_id AND roles.id = user_roles.role_id
2025-05-12 22:43:06,163 - sqlalchemy.engine.Engine - INFO - [cached since 3693s ago] (4,)
2025-05-12 22:43:06,163 - sqlalchemy.engine.Engine - INFO - SELECT roles.id AS roles_id, roles.name AS roles_name, roles.description AS roles_description, roles.created_at AS roles_created_at 
FROM roles, user_roles 
WHERE ? = user_roles.user_id AND roles.id = user_roles.role_id
2025-05-12 22:43:06,163 - sqlalchemy.engine.Engine - INFO - [cached since 3693s ago] (5,)
2025-05-12 22:43:06,166 - sqlalchemy.engine.Engine - INFO - SELECT roles.id AS roles_id, roles.name AS roles_name, roles.description AS roles_description, roles.created_at AS roles_created_at 
FROM roles, user_roles 
WHERE ? = user_roles.user_id AND roles.id = user_roles.role_id
2025-05-12 22:43:06,166 - sqlalchemy.engine.Engine - INFO - [cached since 3693s ago] (6,)
2025-05-12 22:43:06,167 - sqlalchemy.engine.Engine - INFO - SELECT roles.id AS roles_id, roles.name AS roles_name, roles.description AS roles_description, roles.created_at AS roles_created_at 
FROM roles, user_roles 
WHERE ? = user_roles.user_id AND roles.id = user_roles.role_id
2025-05-12 22:43:06,168 - sqlalchemy.engine.Engine - INFO - [cached since 3693s ago] (7,)
2025-05-12 22:43:06,169 - sqlalchemy.engine.Engine - INFO - SELECT roles.id AS roles_id, roles.name AS roles_name, roles.description AS roles_description, roles.created_at AS roles_created_at 
FROM roles, user_roles 
WHERE ? = user_roles.user_id AND roles.id = user_roles.role_id
2025-05-12 22:43:06,170 - sqlalchemy.engine.Engine - INFO - [cached since 3693s ago] (8,)
2025-05-12 22:43:06,172 - sqlalchemy.engine.Engine - INFO - SELECT roles.id AS roles_id, roles.name AS roles_name, roles.description AS roles_description, roles.created_at AS roles_created_at 
FROM roles, user_roles 
WHERE ? = user_roles.user_id AND roles.id = user_roles.role_id
2025-05-12 22:43:06,173 - sqlalchemy.engine.Engine - INFO - [cached since 3693s ago] (9,)
2025-05-12 22:43:06,177 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-05-12 22:43:06,177 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 22:43:06] "GET /projects/detail/1?no_redirect=true&bypass_jwt=true HTTP/1.1" 200 -
2025-05-12 22:43:06,202 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 22:43:06] "[36mGET /static/css/bootstrap.min.css HTTP/1.1[0m" 304 -
2025-05-12 22:43:06,204 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 22:43:06] "[36mGET /static/css/bootstrap-icons.css HTTP/1.1[0m" 304 -
2025-05-12 22:43:06,208 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 22:43:06] "[36mGET /static/css/style.css HTTP/1.1[0m" 304 -
2025-05-12 22:43:06,212 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 22:43:06] "[36mGET /static/js/jquery.min.js HTTP/1.1[0m" 304 -
2025-05-12 22:43:06,213 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 22:43:06] "[36mGET /static/js/utils.js HTTP/1.1[0m" 304 -
2025-05-12 22:43:06,213 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 22:43:06] "[36mGET /static/js/bootstrap.bundle.min.js HTTP/1.1[0m" 304 -
2025-05-12 22:43:06,219 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 22:43:06] "[36mGET /static/js/auth.js HTTP/1.1[0m" 304 -
2025-05-12 22:43:06,220 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 22:43:06] "[36mGET /static/js/fix-modals.js HTTP/1.1[0m" 304 -
2025-05-12 22:43:06,223 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 22:43:06] "[36mGET /static/js/csrf.js HTTP/1.1[0m" 304 -
2025-05-12 22:43:06,224 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 22:43:06] "[36mGET /static/js/user-profile.js HTTP/1.1[0m" 304 -
2025-05-12 22:43:06,254 - app - WARNING - 绕过JWT验证: /api/global/users
2025-05-12 22:43:06,256 - app - WARNING - 绕过JWT验证和CSRF保护: /api/projects/1/risks
2025-05-12 22:43:06,257 - app - WARNING - 绕过JWT验证: /api/global/users
2025-05-12 22:43:06,257 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 22:43:06] "[33mGET /api/global/users?bypass_jwt=true&_=1747060986250 HTTP/1.1[0m" 404 -
2025-05-12 22:43:06,258 - app - WARNING - 绕过JWT验证和CSRF保护: /api/projects/1/risks
2025-05-12 22:43:06,259 - app - INFO - CSRF绕过详细信息: {'path': '/api/projects/1/risks', 'method': 'GET', 'has_csrf_token': False, 'headers': {'Host': '127.0.0.1:5000', 'Connection': 'keep-alive', 'Sec-Ch-Ua-Platform': '"Windows"', 'Cache-Control': 'no-cache', 'X-Requested-With': 'XMLHttpRequest', 'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36 Edg/136.0.0.0', 'Accept': 'application/json', 'Sec-Ch-Ua': '"Chromium";v="136", "Microsoft Edge";v="136", "Not.A/Brand";v="99"', 'Sec-Ch-Ua-Mobile': '?0', 'Sec-Fetch-Site': 'same-origin', 'Sec-Fetch-Mode': 'cors', 'Sec-Fetch-Dest': 'empty', 'Referer': 'http://127.0.0.1:5000/projects/detail/1?no_redirect=true&bypass_jwt=true', 'Accept-Encoding': 'gzip, deflate, br, zstd', 'Accept-Language': 'zh-CN,zh;q=0.9,en;q=0.8,en-GB;q=0.7,en-US;q=0.6'}, 'url_params': {'bypass_jwt': 'true', '_': '1747060986250'}, 'cookies': {'access_token_cookie': 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJmcmVzaCI6ZmFsc2UsImlhdCI6MTc0NzA2MDkyOCwianRpIjoiZWFhY2M1M2ItYTc0MC00Mzc2LTk1MDctNzEwM2IxNTA1Y2YwIiwidHlwZSI6ImFjY2VzcyIsInN1YiI6MSwibmJmIjoxNzQ3MDYwOTI4LCJjc3JmIjoiSW1KalpUWTNaV1pqT1RGaVptSXhZalZpTVRjMVlURTNOemMwTVRkbFl6STFNVFF3WWpJMFlqUWkuYUNJSXdBLnpMbHN4b2Q4MXhxaWhZYUQ3NGpLQzJCTE1HcyIsImV4cCI6MTc0NzA2NDUyOCwiYXVkIjoidGFza19tYW5hZ2VtZW50X3N5c3RlbSIsInVzZXJfY2xhaW1zIjp7InVzZXJuYW1lIjoiYWRtaW4iLCJyb2xlcyI6WyJhZG1pbiJdLCJwZXJtaXNzaW9ucyI6WyJtYW5hZ2VfdXNlcnMiLCJtYW5hZ2Vfcm9sZXMiLCJtYW5hZ2VfYWxsX3Byb2plY3RzIiwibWFuYWdlX3Byb2plY3QiLCJtYW5hZ2VfYWxsX3Rhc2tzIiwibWFuYWdlX3Rhc2siLCJ2aWV3X3Byb2plY3QiLCJ2aWV3X3Rhc2siLCJtYW5hZ2VfcmVzb3VyY2VzIiwibWFuYWdlX3Jpc2tzIiwidmlld19yZXBvcnRzIiwiY3JlYXRlX3Rhc2siLCJhc3NpZ25fdGFzayIsImNoYW5nZV9wcm9qZWN0X3N0YXR1cyIsImNoYW5nZV90YXNrX3N0YXR1cyIsImNyZWF0ZV9wcm9qZWN0Il0sImlzX2FjdGl2ZSI6dHJ1ZX0sInJvbGVzIjpbImFkbWluIl0sImFkbWluIjp0cnVlfQ.DS0SKfLCjx3ijIfgf4q5ihx8ElcLonOOM7DuqFCGvhA', 'csrf_access_token': 'ImJjZTY3ZWZjOTFiZmIxYjViMTc1YTE3Nzc0MTdlYzI1MTQwYjI0YjQi.aCIIwA.zLlsxod81xqihYaD74jKC2BLMGs', 'user_roles': 'admin', 'is_admin': 'true', 'admin': 'true', 'admin_role': 'true'}}
2025-05-12 22:43:06,260 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 22:43:06] "[33mGET /api/global/users?bypass_jwt=true&_=1747060986251 HTTP/1.1[0m" 404 -
2025-05-12 22:43:06,260 - app - INFO - CSRF绕过详细信息: {'path': '/api/projects/1/risks', 'method': 'GET', 'has_csrf_token': False, 'headers': {'Host': '127.0.0.1:5000', 'Connection': 'keep-alive', 'Sec-Ch-Ua-Platform': '"Windows"', 'Cache-Control': 'no-cache', 'X-Requested-With': 'XMLHttpRequest', 'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36 Edg/136.0.0.0', 'Accept': 'application/json', 'Sec-Ch-Ua': '"Chromium";v="136", "Microsoft Edge";v="136", "Not.A/Brand";v="99"', 'Sec-Ch-Ua-Mobile': '?0', 'Sec-Fetch-Site': 'same-origin', 'Sec-Fetch-Mode': 'cors', 'Sec-Fetch-Dest': 'empty', 'Referer': 'http://127.0.0.1:5000/projects/detail/1?no_redirect=true&bypass_jwt=true', 'Accept-Encoding': 'gzip, deflate, br, zstd', 'Accept-Language': 'zh-CN,zh;q=0.9,en;q=0.8,en-GB;q=0.7,en-US;q=0.6'}, 'url_params': {'bypass_jwt': 'true', '_': '1747060986251'}, 'cookies': {'access_token_cookie': 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJmcmVzaCI6ZmFsc2UsImlhdCI6MTc0NzA2MDkyOCwianRpIjoiZWFhY2M1M2ItYTc0MC00Mzc2LTk1MDctNzEwM2IxNTA1Y2YwIiwidHlwZSI6ImFjY2VzcyIsInN1YiI6MSwibmJmIjoxNzQ3MDYwOTI4LCJjc3JmIjoiSW1KalpUWTNaV1pqT1RGaVptSXhZalZpTVRjMVlURTNOemMwTVRkbFl6STFNVFF3WWpJMFlqUWkuYUNJSXdBLnpMbHN4b2Q4MXhxaWhZYUQ3NGpLQzJCTE1HcyIsImV4cCI6MTc0NzA2NDUyOCwiYXVkIjoidGFza19tYW5hZ2VtZW50X3N5c3RlbSIsInVzZXJfY2xhaW1zIjp7InVzZXJuYW1lIjoiYWRtaW4iLCJyb2xlcyI6WyJhZG1pbiJdLCJwZXJtaXNzaW9ucyI6WyJtYW5hZ2VfdXNlcnMiLCJtYW5hZ2Vfcm9sZXMiLCJtYW5hZ2VfYWxsX3Byb2plY3RzIiwibWFuYWdlX3Byb2plY3QiLCJtYW5hZ2VfYWxsX3Rhc2tzIiwibWFuYWdlX3Rhc2siLCJ2aWV3X3Byb2plY3QiLCJ2aWV3X3Rhc2siLCJtYW5hZ2VfcmVzb3VyY2VzIiwibWFuYWdlX3Jpc2tzIiwidmlld19yZXBvcnRzIiwiY3JlYXRlX3Rhc2siLCJhc3NpZ25fdGFzayIsImNoYW5nZV9wcm9qZWN0X3N0YXR1cyIsImNoYW5nZV90YXNrX3N0YXR1cyIsImNyZWF0ZV9wcm9qZWN0Il0sImlzX2FjdGl2ZSI6dHJ1ZX0sInJvbGVzIjpbImFkbWluIl0sImFkbWluIjp0cnVlfQ.DS0SKfLCjx3ijIfgf4q5ihx8ElcLonOOM7DuqFCGvhA', 'csrf_access_token': 'ImJjZTY3ZWZjOTFiZmIxYjViMTc1YTE3Nzc0MTdlYzI1MTQwYjI0YjQi.aCIIwA.zLlsxod81xqihYaD74jKC2BLMGs', 'user_roles': 'admin', 'is_admin': 'true', 'admin': 'true', 'admin_role': 'true'}}
2025-05-12 22:43:06,263 - app - WARNING - 未找到CSRF令牌，将在响应中添加新的令牌
2025-05-12 22:43:06,264 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 22:43:06] "[36mGET /static/favicon.ico HTTP/1.1[0m" 304 -
2025-05-12 22:43:06,265 - app - WARNING - 未找到CSRF令牌，将在响应中添加新的令牌
2025-05-12 22:43:06,267 - app - ERROR - Exception on /api/projects/1/risks [GET]
Traceback (most recent call last):
  File "D:\tmp\work\venv\Lib\site-packages\flask\app.py", line 1511, in wsgi_app
    response = self.full_dispatch_request()
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\tmp\work\venv\Lib\site-packages\flask\app.py", line 919, in full_dispatch_request
    rv = self.handle_user_exception(e)
         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\tmp\work\venv\Lib\site-packages\flask_cors\extension.py", line 176, in wrapped_function
    return cors_after_request(app.make_response(f(*args, **kwargs)))
                                                ^^^^^^^^^^^^^^^^^^
  File "D:\tmp\work\venv\Lib\site-packages\flask\app.py", line 915, in full_dispatch_request
    rv = self.preprocess_request()
         ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\tmp\work\venv\Lib\site-packages\flask\app.py", line 1291, in preprocess_request
    rv = self.ensure_sync(before_func)()
         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\tmp\work\app\__init__.py", line 499, in bypass_csrf_with_jwt_bypass
    # 如果没有CSRF令牌，尝试生成一个并添加到响应中
        ^^^^^^^^^^^^^^
  File "D:\tmp\work\venv\Lib\site-packages\flask\sansio\scaffold.py", line 46, in wrapper_func
    self._check_setup_finished(f_name)
  File "D:\tmp\work\venv\Lib\site-packages\flask\sansio\app.py", line 415, in _check_setup_finished
    raise AssertionError(
AssertionError: The setup method 'after_request' can no longer be called on the application. It has already handled its first request, any changes will not be applied consistently.
Make sure all imports, decorators, functions, etc. needed to set up the application are done before running it.
2025-05-12 22:43:06,271 - app - WARNING - 绕过JWT验证和CSRF保护: /api/users
2025-05-12 22:43:06,269 - app - ERROR - Exception on /api/projects/1/risks [GET]
Traceback (most recent call last):
  File "D:\tmp\work\venv\Lib\site-packages\flask\app.py", line 1511, in wsgi_app
    response = self.full_dispatch_request()
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\tmp\work\venv\Lib\site-packages\flask\app.py", line 919, in full_dispatch_request
    rv = self.handle_user_exception(e)
         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\tmp\work\venv\Lib\site-packages\flask_cors\extension.py", line 176, in wrapped_function
    return cors_after_request(app.make_response(f(*args, **kwargs)))
                                                ^^^^^^^^^^^^^^^^^^
  File "D:\tmp\work\venv\Lib\site-packages\flask\app.py", line 915, in full_dispatch_request
    rv = self.preprocess_request()
         ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\tmp\work\venv\Lib\site-packages\flask\app.py", line 1291, in preprocess_request
    rv = self.ensure_sync(before_func)()
         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\tmp\work\app\__init__.py", line 499, in bypass_csrf_with_jwt_bypass
    # 如果没有CSRF令牌，尝试生成一个并添加到响应中
        ^^^^^^^^^^^^^^
  File "D:\tmp\work\venv\Lib\site-packages\flask\sansio\scaffold.py", line 46, in wrapper_func
    self._check_setup_finished(f_name)
  File "D:\tmp\work\venv\Lib\site-packages\flask\sansio\app.py", line 415, in _check_setup_finished
    raise AssertionError(
AssertionError: The setup method 'after_request' can no longer be called on the application. It has already handled its first request, any changes will not be applied consistently.
Make sure all imports, decorators, functions, etc. needed to set up the application are done before running it.
2025-05-12 22:43:06,272 - app - WARNING - 绕过JWT验证和CSRF保护: /api/users
2025-05-12 22:43:06,277 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 22:43:06] "[35m[1mGET /api/projects/1/risks?bypass_jwt=true&_=1747060986250 HTTP/1.1[0m" 500 -
2025-05-12 22:43:06,278 - app - INFO - CSRF绕过详细信息: {'path': '/api/users', 'method': 'GET', 'has_csrf_token': False, 'headers': {'Host': '127.0.0.1:5000', 'Connection': 'keep-alive', 'Sec-Ch-Ua-Platform': '"Windows"', 'Cache-Control': 'no-cache', 'X-Requested-With': 'XMLHttpRequest', 'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36 Edg/136.0.0.0', 'Accept': 'application/json', 'Sec-Ch-Ua': '"Chromium";v="136", "Microsoft Edge";v="136", "Not.A/Brand";v="99"', 'Sec-Ch-Ua-Mobile': '?0', 'Sec-Fetch-Site': 'same-origin', 'Sec-Fetch-Mode': 'cors', 'Sec-Fetch-Dest': 'empty', 'Referer': 'http://127.0.0.1:5000/projects/detail/1?no_redirect=true&bypass_jwt=true', 'Accept-Encoding': 'gzip, deflate, br, zstd', 'Accept-Language': 'zh-CN,zh;q=0.9,en;q=0.8,en-GB;q=0.7,en-US;q=0.6'}, 'url_params': {'bypass_jwt': 'true', '_': '1747060986250'}, 'cookies': {'access_token_cookie': 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJmcmVzaCI6ZmFsc2UsImlhdCI6MTc0NzA2MDkyOCwianRpIjoiZWFhY2M1M2ItYTc0MC00Mzc2LTk1MDctNzEwM2IxNTA1Y2YwIiwidHlwZSI6ImFjY2VzcyIsInN1YiI6MSwibmJmIjoxNzQ3MDYwOTI4LCJjc3JmIjoiSW1KalpUWTNaV1pqT1RGaVptSXhZalZpTVRjMVlURTNOemMwTVRkbFl6STFNVFF3WWpJMFlqUWkuYUNJSXdBLnpMbHN4b2Q4MXhxaWhZYUQ3NGpLQzJCTE1HcyIsImV4cCI6MTc0NzA2NDUyOCwiYXVkIjoidGFza19tYW5hZ2VtZW50X3N5c3RlbSIsInVzZXJfY2xhaW1zIjp7InVzZXJuYW1lIjoiYWRtaW4iLCJyb2xlcyI6WyJhZG1pbiJdLCJwZXJtaXNzaW9ucyI6WyJtYW5hZ2VfdXNlcnMiLCJtYW5hZ2Vfcm9sZXMiLCJtYW5hZ2VfYWxsX3Byb2plY3RzIiwibWFuYWdlX3Byb2plY3QiLCJtYW5hZ2VfYWxsX3Rhc2tzIiwibWFuYWdlX3Rhc2siLCJ2aWV3X3Byb2plY3QiLCJ2aWV3X3Rhc2siLCJtYW5hZ2VfcmVzb3VyY2VzIiwibWFuYWdlX3Jpc2tzIiwidmlld19yZXBvcnRzIiwiY3JlYXRlX3Rhc2siLCJhc3NpZ25fdGFzayIsImNoYW5nZV9wcm9qZWN0X3N0YXR1cyIsImNoYW5nZV90YXNrX3N0YXR1cyIsImNyZWF0ZV9wcm9qZWN0Il0sImlzX2FjdGl2ZSI6dHJ1ZX0sInJvbGVzIjpbImFkbWluIl0sImFkbWluIjp0cnVlfQ.DS0SKfLCjx3ijIfgf4q5ihx8ElcLonOOM7DuqFCGvhA', 'csrf_access_token': 'ImJjZTY3ZWZjOTFiZmIxYjViMTc1YTE3Nzc0MTdlYzI1MTQwYjI0YjQi.aCIIwA.zLlsxod81xqihYaD74jKC2BLMGs', 'user_roles': 'admin', 'is_admin': 'true', 'admin': 'true', 'admin_role': 'true'}}
2025-05-12 22:43:06,279 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 22:43:06] "[35m[1mGET /api/projects/1/risks?bypass_jwt=true&_=1747060986251 HTTP/1.1[0m" 500 -
2025-05-12 22:43:06,279 - app - INFO - CSRF绕过详细信息: {'path': '/api/users', 'method': 'GET', 'has_csrf_token': False, 'headers': {'Host': '127.0.0.1:5000', 'Connection': 'keep-alive', 'Sec-Ch-Ua-Platform': '"Windows"', 'Cache-Control': 'no-cache', 'X-Requested-With': 'XMLHttpRequest', 'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36 Edg/136.0.0.0', 'Accept': 'application/json', 'Sec-Ch-Ua': '"Chromium";v="136", "Microsoft Edge";v="136", "Not.A/Brand";v="99"', 'Sec-Ch-Ua-Mobile': '?0', 'Sec-Fetch-Site': 'same-origin', 'Sec-Fetch-Mode': 'cors', 'Sec-Fetch-Dest': 'empty', 'Referer': 'http://127.0.0.1:5000/projects/detail/1?no_redirect=true&bypass_jwt=true', 'Accept-Encoding': 'gzip, deflate, br, zstd', 'Accept-Language': 'zh-CN,zh;q=0.9,en;q=0.8,en-GB;q=0.7,en-US;q=0.6'}, 'url_params': {'bypass_jwt': 'true', '_': '1747060986251'}, 'cookies': {'access_token_cookie': 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJmcmVzaCI6ZmFsc2UsImlhdCI6MTc0NzA2MDkyOCwianRpIjoiZWFhY2M1M2ItYTc0MC00Mzc2LTk1MDctNzEwM2IxNTA1Y2YwIiwidHlwZSI6ImFjY2VzcyIsInN1YiI6MSwibmJmIjoxNzQ3MDYwOTI4LCJjc3JmIjoiSW1KalpUWTNaV1pqT1RGaVptSXhZalZpTVRjMVlURTNOemMwTVRkbFl6STFNVFF3WWpJMFlqUWkuYUNJSXdBLnpMbHN4b2Q4MXhxaWhZYUQ3NGpLQzJCTE1HcyIsImV4cCI6MTc0NzA2NDUyOCwiYXVkIjoidGFza19tYW5hZ2VtZW50X3N5c3RlbSIsInVzZXJfY2xhaW1zIjp7InVzZXJuYW1lIjoiYWRtaW4iLCJyb2xlcyI6WyJhZG1pbiJdLCJwZXJtaXNzaW9ucyI6WyJtYW5hZ2VfdXNlcnMiLCJtYW5hZ2Vfcm9sZXMiLCJtYW5hZ2VfYWxsX3Byb2plY3RzIiwibWFuYWdlX3Byb2plY3QiLCJtYW5hZ2VfYWxsX3Rhc2tzIiwibWFuYWdlX3Rhc2siLCJ2aWV3X3Byb2plY3QiLCJ2aWV3X3Rhc2siLCJtYW5hZ2VfcmVzb3VyY2VzIiwibWFuYWdlX3Jpc2tzIiwidmlld19yZXBvcnRzIiwiY3JlYXRlX3Rhc2siLCJhc3NpZ25fdGFzayIsImNoYW5nZV9wcm9qZWN0X3N0YXR1cyIsImNoYW5nZV90YXNrX3N0YXR1cyIsImNyZWF0ZV9wcm9qZWN0Il0sImlzX2FjdGl2ZSI6dHJ1ZX0sInJvbGVzIjpbImFkbWluIl0sImFkbWluIjp0cnVlfQ.DS0SKfLCjx3ijIfgf4q5ihx8ElcLonOOM7DuqFCGvhA', 'csrf_access_token': 'ImJjZTY3ZWZjOTFiZmIxYjViMTc1YTE3Nzc0MTdlYzI1MTQwYjI0YjQi.aCIIwA.zLlsxod81xqihYaD74jKC2BLMGs', 'user_roles': 'admin', 'is_admin': 'true', 'admin': 'true', 'admin_role': 'true'}}
2025-05-12 22:43:06,281 - app - WARNING - 未找到CSRF令牌，将在响应中添加新的令牌
2025-05-12 22:43:06,282 - app - WARNING - 未找到CSRF令牌，将在响应中添加新的令牌
2025-05-12 22:43:06,283 - app - ERROR - Exception on /api/users [GET]
Traceback (most recent call last):
  File "D:\tmp\work\venv\Lib\site-packages\flask\app.py", line 1511, in wsgi_app
    response = self.full_dispatch_request()
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\tmp\work\venv\Lib\site-packages\flask\app.py", line 919, in full_dispatch_request
    rv = self.handle_user_exception(e)
         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\tmp\work\venv\Lib\site-packages\flask_cors\extension.py", line 176, in wrapped_function
    return cors_after_request(app.make_response(f(*args, **kwargs)))
                                                ^^^^^^^^^^^^^^^^^^
  File "D:\tmp\work\venv\Lib\site-packages\flask\app.py", line 915, in full_dispatch_request
    rv = self.preprocess_request()
         ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\tmp\work\venv\Lib\site-packages\flask\app.py", line 1291, in preprocess_request
    rv = self.ensure_sync(before_func)()
         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\tmp\work\app\__init__.py", line 499, in bypass_csrf_with_jwt_bypass
    # 如果没有CSRF令牌，尝试生成一个并添加到响应中
        ^^^^^^^^^^^^^^
  File "D:\tmp\work\venv\Lib\site-packages\flask\sansio\scaffold.py", line 46, in wrapper_func
    self._check_setup_finished(f_name)
  File "D:\tmp\work\venv\Lib\site-packages\flask\sansio\app.py", line 415, in _check_setup_finished
    raise AssertionError(
AssertionError: The setup method 'after_request' can no longer be called on the application. It has already handled its first request, any changes will not be applied consistently.
Make sure all imports, decorators, functions, etc. needed to set up the application are done before running it.
2025-05-12 22:43:06,286 - app - WARNING - 绕过JWT验证: /api/risks
2025-05-12 22:43:06,284 - app - ERROR - Exception on /api/users [GET]
Traceback (most recent call last):
  File "D:\tmp\work\venv\Lib\site-packages\flask\app.py", line 1511, in wsgi_app
    response = self.full_dispatch_request()
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\tmp\work\venv\Lib\site-packages\flask\app.py", line 919, in full_dispatch_request
    rv = self.handle_user_exception(e)
         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\tmp\work\venv\Lib\site-packages\flask_cors\extension.py", line 176, in wrapped_function
    return cors_after_request(app.make_response(f(*args, **kwargs)))
                                                ^^^^^^^^^^^^^^^^^^
  File "D:\tmp\work\venv\Lib\site-packages\flask\app.py", line 915, in full_dispatch_request
    rv = self.preprocess_request()
         ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\tmp\work\venv\Lib\site-packages\flask\app.py", line 1291, in preprocess_request
    rv = self.ensure_sync(before_func)()
         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\tmp\work\app\__init__.py", line 499, in bypass_csrf_with_jwt_bypass
    # 如果没有CSRF令牌，尝试生成一个并添加到响应中
        ^^^^^^^^^^^^^^
  File "D:\tmp\work\venv\Lib\site-packages\flask\sansio\scaffold.py", line 46, in wrapper_func
    self._check_setup_finished(f_name)
  File "D:\tmp\work\venv\Lib\site-packages\flask\sansio\app.py", line 415, in _check_setup_finished
    raise AssertionError(
AssertionError: The setup method 'after_request' can no longer be called on the application. It has already handled its first request, any changes will not be applied consistently.
Make sure all imports, decorators, functions, etc. needed to set up the application are done before running it.
2025-05-12 22:43:06,288 - app - WARNING - 绕过JWT验证: /api/risks
2025-05-12 22:43:06,289 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 22:43:06] "[35m[1mGET /api/users?bypass_jwt=true&_=1747060986250 HTTP/1.1[0m" 500 -
2025-05-12 22:43:06,289 - app - INFO - 访问任务CSRF豁免路由: /api/risks, 方法: GET
2025-05-12 22:43:06,290 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 22:43:06] "[35m[1mGET /api/users?bypass_jwt=true&_=1747060986251 HTTP/1.1[0m" 500 -
2025-05-12 22:43:06,290 - app - INFO - 访问任务CSRF豁免路由: /api/risks, 方法: GET
2025-05-12 22:43:06,291 - app - INFO - 绕过JWT验证: /api/risks
2025-05-12 22:43:06,291 - app - INFO - 绕过JWT验证: /api/risks
2025-05-12 22:43:06,292 - app.utils.jwt_callbacks - INFO - Checking if token eaacc53b-a740-4376-9507-7103b1505cf0 is in blocklist
2025-05-12 22:43:06,293 - app.utils.jwt_callbacks - INFO - Checking if token eaacc53b-a740-4376-9507-7103b1505cf0 is in blocklist
2025-05-12 22:43:06,294 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-05-12 22:43:06,297 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-05-12 22:43:06,297 - app - WARNING - 绕过JWT验证和CSRF保护: /api/users/list
2025-05-12 22:43:06,298 - app - WARNING - 绕过JWT验证和CSRF保护: /api/users/list
2025-05-12 22:43:06,299 - sqlalchemy.engine.Engine - INFO - SELECT token_blacklist.id AS token_blacklist_id, token_blacklist.jti AS token_blacklist_jti, token_blacklist.token_type AS token_blacklist_token_type, token_blacklist.user_id AS token_blacklist_user_id, token_blacklist.revoked_at AS token_blacklist_revoked_at, token_blacklist.expires_at AS token_blacklist_expires_at 
FROM token_blacklist 
WHERE token_blacklist.jti = ?
 LIMIT ? OFFSET ?
2025-05-12 22:43:06,300 - sqlalchemy.engine.Engine - INFO - SELECT token_blacklist.id AS token_blacklist_id, token_blacklist.jti AS token_blacklist_jti, token_blacklist.token_type AS token_blacklist_token_type, token_blacklist.user_id AS token_blacklist_user_id, token_blacklist.revoked_at AS token_blacklist_revoked_at, token_blacklist.expires_at AS token_blacklist_expires_at 
FROM token_blacklist 
WHERE token_blacklist.jti = ?
 LIMIT ? OFFSET ?
2025-05-12 22:43:06,300 - app - INFO - CSRF绕过详细信息: {'path': '/api/users/list', 'method': 'GET', 'has_csrf_token': False, 'headers': {'Host': '127.0.0.1:5000', 'Connection': 'keep-alive', 'Sec-Ch-Ua-Platform': '"Windows"', 'Cache-Control': 'no-cache', 'X-Requested-With': 'XMLHttpRequest', 'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36 Edg/136.0.0.0', 'Accept': 'application/json', 'Sec-Ch-Ua': '"Chromium";v="136", "Microsoft Edge";v="136", "Not.A/Brand";v="99"', 'Sec-Ch-Ua-Mobile': '?0', 'Sec-Fetch-Site': 'same-origin', 'Sec-Fetch-Mode': 'cors', 'Sec-Fetch-Dest': 'empty', 'Referer': 'http://127.0.0.1:5000/projects/detail/1?no_redirect=true&bypass_jwt=true', 'Accept-Encoding': 'gzip, deflate, br, zstd', 'Accept-Language': 'zh-CN,zh;q=0.9,en;q=0.8,en-GB;q=0.7,en-US;q=0.6'}, 'url_params': {'bypass_jwt': 'true', '_': '1747060986250'}, 'cookies': {'access_token_cookie': 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJmcmVzaCI6ZmFsc2UsImlhdCI6MTc0NzA2MDkyOCwianRpIjoiZWFhY2M1M2ItYTc0MC00Mzc2LTk1MDctNzEwM2IxNTA1Y2YwIiwidHlwZSI6ImFjY2VzcyIsInN1YiI6MSwibmJmIjoxNzQ3MDYwOTI4LCJjc3JmIjoiSW1KalpUWTNaV1pqT1RGaVptSXhZalZpTVRjMVlURTNOemMwTVRkbFl6STFNVFF3WWpJMFlqUWkuYUNJSXdBLnpMbHN4b2Q4MXhxaWhZYUQ3NGpLQzJCTE1HcyIsImV4cCI6MTc0NzA2NDUyOCwiYXVkIjoidGFza19tYW5hZ2VtZW50X3N5c3RlbSIsInVzZXJfY2xhaW1zIjp7InVzZXJuYW1lIjoiYWRtaW4iLCJyb2xlcyI6WyJhZG1pbiJdLCJwZXJtaXNzaW9ucyI6WyJtYW5hZ2VfdXNlcnMiLCJtYW5hZ2Vfcm9sZXMiLCJtYW5hZ2VfYWxsX3Byb2plY3RzIiwibWFuYWdlX3Byb2plY3QiLCJtYW5hZ2VfYWxsX3Rhc2tzIiwibWFuYWdlX3Rhc2siLCJ2aWV3X3Byb2plY3QiLCJ2aWV3X3Rhc2siLCJtYW5hZ2VfcmVzb3VyY2VzIiwibWFuYWdlX3Jpc2tzIiwidmlld19yZXBvcnRzIiwiY3JlYXRlX3Rhc2siLCJhc3NpZ25fdGFzayIsImNoYW5nZV9wcm9qZWN0X3N0YXR1cyIsImNoYW5nZV90YXNrX3N0YXR1cyIsImNyZWF0ZV9wcm9qZWN0Il0sImlzX2FjdGl2ZSI6dHJ1ZX0sInJvbGVzIjpbImFkbWluIl0sImFkbWluIjp0cnVlfQ.DS0SKfLCjx3ijIfgf4q5ihx8ElcLonOOM7DuqFCGvhA', 'csrf_access_token': 'ImJjZTY3ZWZjOTFiZmIxYjViMTc1YTE3Nzc0MTdlYzI1MTQwYjI0YjQi.aCIIwA.zLlsxod81xqihYaD74jKC2BLMGs', 'user_roles': 'admin', 'is_admin': 'true', 'admin': 'true', 'admin_role': 'true'}}
2025-05-12 22:43:06,301 - sqlalchemy.engine.Engine - INFO - [cached since 3693s ago] ('eaacc53b-a740-4376-9507-7103b1505cf0', 1, 0)
2025-05-12 22:43:06,301 - app - INFO - CSRF绕过详细信息: {'path': '/api/users/list', 'method': 'GET', 'has_csrf_token': False, 'headers': {'Host': '127.0.0.1:5000', 'Connection': 'keep-alive', 'Sec-Ch-Ua-Platform': '"Windows"', 'Cache-Control': 'no-cache', 'X-Requested-With': 'XMLHttpRequest', 'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36 Edg/136.0.0.0', 'Accept': 'application/json', 'Sec-Ch-Ua': '"Chromium";v="136", "Microsoft Edge";v="136", "Not.A/Brand";v="99"', 'Sec-Ch-Ua-Mobile': '?0', 'Sec-Fetch-Site': 'same-origin', 'Sec-Fetch-Mode': 'cors', 'Sec-Fetch-Dest': 'empty', 'Referer': 'http://127.0.0.1:5000/projects/detail/1?no_redirect=true&bypass_jwt=true', 'Accept-Encoding': 'gzip, deflate, br, zstd', 'Accept-Language': 'zh-CN,zh;q=0.9,en;q=0.8,en-GB;q=0.7,en-US;q=0.6'}, 'url_params': {'bypass_jwt': 'true', '_': '1747060986251'}, 'cookies': {'access_token_cookie': 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJmcmVzaCI6ZmFsc2UsImlhdCI6MTc0NzA2MDkyOCwianRpIjoiZWFhY2M1M2ItYTc0MC00Mzc2LTk1MDctNzEwM2IxNTA1Y2YwIiwidHlwZSI6ImFjY2VzcyIsInN1YiI6MSwibmJmIjoxNzQ3MDYwOTI4LCJjc3JmIjoiSW1KalpUWTNaV1pqT1RGaVptSXhZalZpTVRjMVlURTNOemMwTVRkbFl6STFNVFF3WWpJMFlqUWkuYUNJSXdBLnpMbHN4b2Q4MXhxaWhZYUQ3NGpLQzJCTE1HcyIsImV4cCI6MTc0NzA2NDUyOCwiYXVkIjoidGFza19tYW5hZ2VtZW50X3N5c3RlbSIsInVzZXJfY2xhaW1zIjp7InVzZXJuYW1lIjoiYWRtaW4iLCJyb2xlcyI6WyJhZG1pbiJdLCJwZXJtaXNzaW9ucyI6WyJtYW5hZ2VfdXNlcnMiLCJtYW5hZ2Vfcm9sZXMiLCJtYW5hZ2VfYWxsX3Byb2plY3RzIiwibWFuYWdlX3Byb2plY3QiLCJtYW5hZ2VfYWxsX3Rhc2tzIiwibWFuYWdlX3Rhc2siLCJ2aWV3X3Byb2plY3QiLCJ2aWV3X3Rhc2siLCJtYW5hZ2VfcmVzb3VyY2VzIiwibWFuYWdlX3Jpc2tzIiwidmlld19yZXBvcnRzIiwiY3JlYXRlX3Rhc2siLCJhc3NpZ25fdGFzayIsImNoYW5nZV9wcm9qZWN0X3N0YXR1cyIsImNoYW5nZV90YXNrX3N0YXR1cyIsImNyZWF0ZV9wcm9qZWN0Il0sImlzX2FjdGl2ZSI6dHJ1ZX0sInJvbGVzIjpbImFkbWluIl0sImFkbWluIjp0cnVlfQ.DS0SKfLCjx3ijIfgf4q5ihx8ElcLonOOM7DuqFCGvhA', 'csrf_access_token': 'ImJjZTY3ZWZjOTFiZmIxYjViMTc1YTE3Nzc0MTdlYzI1MTQwYjI0YjQi.aCIIwA.zLlsxod81xqihYaD74jKC2BLMGs', 'user_roles': 'admin', 'is_admin': 'true', 'admin': 'true', 'admin_role': 'true'}}
2025-05-12 22:43:06,302 - sqlalchemy.engine.Engine - INFO - [cached since 3693s ago] ('eaacc53b-a740-4376-9507-7103b1505cf0', 1, 0)
2025-05-12 22:43:06,303 - app - WARNING - 未找到CSRF令牌，将在响应中添加新的令牌
2025-05-12 22:43:06,304 - app.utils.jwt_callbacks - INFO - Token eaacc53b-a740-4376-9507-7103b1505cf0 is valid
2025-05-12 22:43:06,304 - app - WARNING - 未找到CSRF令牌，将在响应中添加新的令牌
2025-05-12 22:43:06,305 - app.utils.jwt_callbacks - INFO - Token eaacc53b-a740-4376-9507-7103b1505cf0 is valid
2025-05-12 22:43:06,305 - app - ERROR - Exception on /api/users/list [GET]
Traceback (most recent call last):
  File "D:\tmp\work\venv\Lib\site-packages\flask\app.py", line 1511, in wsgi_app
    response = self.full_dispatch_request()
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\tmp\work\venv\Lib\site-packages\flask\app.py", line 919, in full_dispatch_request
    rv = self.handle_user_exception(e)
         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\tmp\work\venv\Lib\site-packages\flask_cors\extension.py", line 176, in wrapped_function
    return cors_after_request(app.make_response(f(*args, **kwargs)))
                                                ^^^^^^^^^^^^^^^^^^
  File "D:\tmp\work\venv\Lib\site-packages\flask\app.py", line 915, in full_dispatch_request
    rv = self.preprocess_request()
         ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\tmp\work\venv\Lib\site-packages\flask\app.py", line 1291, in preprocess_request
    rv = self.ensure_sync(before_func)()
         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\tmp\work\app\__init__.py", line 499, in bypass_csrf_with_jwt_bypass
    # 如果没有CSRF令牌，尝试生成一个并添加到响应中
        ^^^^^^^^^^^^^^
  File "D:\tmp\work\venv\Lib\site-packages\flask\sansio\scaffold.py", line 46, in wrapper_func
    self._check_setup_finished(f_name)
  File "D:\tmp\work\venv\Lib\site-packages\flask\sansio\app.py", line 415, in _check_setup_finished
    raise AssertionError(
AssertionError: The setup method 'after_request' can no longer be called on the application. It has already handled its first request, any changes will not be applied consistently.
Make sure all imports, decorators, functions, etc. needed to set up the application are done before running it.
2025-05-12 22:43:06,305 - app.utils.jwt_callbacks - INFO - Verifying token
2025-05-12 22:43:06,305 - app - ERROR - Exception on /api/users/list [GET]
Traceback (most recent call last):
  File "D:\tmp\work\venv\Lib\site-packages\flask\app.py", line 1511, in wsgi_app
    response = self.full_dispatch_request()
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\tmp\work\venv\Lib\site-packages\flask\app.py", line 919, in full_dispatch_request
    rv = self.handle_user_exception(e)
         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\tmp\work\venv\Lib\site-packages\flask_cors\extension.py", line 176, in wrapped_function
    return cors_after_request(app.make_response(f(*args, **kwargs)))
                                                ^^^^^^^^^^^^^^^^^^
  File "D:\tmp\work\venv\Lib\site-packages\flask\app.py", line 915, in full_dispatch_request
    rv = self.preprocess_request()
         ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\tmp\work\venv\Lib\site-packages\flask\app.py", line 1291, in preprocess_request
    rv = self.ensure_sync(before_func)()
         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\tmp\work\app\__init__.py", line 499, in bypass_csrf_with_jwt_bypass
    # 如果没有CSRF令牌，尝试生成一个并添加到响应中
        ^^^^^^^^^^^^^^
  File "D:\tmp\work\venv\Lib\site-packages\flask\sansio\scaffold.py", line 46, in wrapper_func
    self._check_setup_finished(f_name)
  File "D:\tmp\work\venv\Lib\site-packages\flask\sansio\app.py", line 415, in _check_setup_finished
    raise AssertionError(
AssertionError: The setup method 'after_request' can no longer be called on the application. It has already handled its first request, any changes will not be applied consistently.
Make sure all imports, decorators, functions, etc. needed to set up the application are done before running it.
2025-05-12 22:43:06,306 - app.utils.jwt_callbacks - INFO - Verifying token
2025-05-12 22:43:06,309 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 22:43:06] "[35m[1mGET /api/users/list?bypass_jwt=true&_=1747060986250 HTTP/1.1[0m" 500 -
2025-05-12 22:43:06,309 - app.utils.jwt_callbacks - INFO - JWT Header: {'alg': 'HS256', 'typ': 'JWT'}
2025-05-12 22:43:06,310 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 22:43:06] "[35m[1mGET /api/users/list?bypass_jwt=true&_=1747060986251 HTTP/1.1[0m" 500 -
2025-05-12 22:43:06,311 - app.utils.jwt_callbacks - INFO - JWT Header: {'alg': 'HS256', 'typ': 'JWT'}
2025-05-12 22:43:06,312 - app.utils.jwt_callbacks - INFO - JWT Data: {'fresh': False, 'iat': 1747060928, 'jti': 'eaacc53b-a740-4376-9507-7103b1505cf0', 'type': 'access', 'sub': 1, 'nbf': 1747060928, 'csrf': 'ImJjZTY3ZWZjOTFiZmIxYjViMTc1YTE3Nzc0MTdlYzI1MTQwYjI0YjQi.aCIIwA.zLlsxod81xqihYaD74jKC2BLMGs', 'exp': 1747064528, 'aud': 'task_management_system', 'user_claims': {'username': 'admin', 'roles': ['admin'], 'permissions': ['manage_users', 'manage_roles', 'manage_all_projects', 'manage_project', 'manage_all_tasks', 'manage_task', 'view_project', 'view_task', 'manage_resources', 'manage_risks', 'view_reports', 'create_task', 'assign_task', 'change_project_status', 'change_task_status', 'create_project'], 'is_active': True}, 'roles': ['admin'], 'admin': True}
2025-05-12 22:43:06,313 - app.utils.jwt_callbacks - INFO - JWT Data: {'fresh': False, 'iat': 1747060928, 'jti': 'eaacc53b-a740-4376-9507-7103b1505cf0', 'type': 'access', 'sub': 1, 'nbf': 1747060928, 'csrf': 'ImJjZTY3ZWZjOTFiZmIxYjViMTc1YTE3Nzc0MTdlYzI1MTQwYjI0YjQi.aCIIwA.zLlsxod81xqihYaD74jKC2BLMGs', 'exp': 1747064528, 'aud': 'task_management_system', 'user_claims': {'username': 'admin', 'roles': ['admin'], 'permissions': ['manage_users', 'manage_roles', 'manage_all_projects', 'manage_project', 'manage_all_tasks', 'manage_task', 'view_project', 'view_task', 'manage_resources', 'manage_risks', 'view_reports', 'create_task', 'assign_task', 'change_project_status', 'change_task_status', 'create_project'], 'is_active': True}, 'roles': ['admin'], 'admin': True}
2025-05-12 22:43:06,315 - app.utils.jwt_callbacks - INFO - Token time difference: -58.315 seconds
2025-05-12 22:43:06,316 - app.utils.jwt_callbacks - INFO - Token time difference: -58.316001 seconds
2025-05-12 22:43:06,316 - app.utils.jwt_callbacks - INFO - Token verification successful
2025-05-12 22:43:06,317 - app.utils.jwt_callbacks - INFO - Token verification successful
2025-05-12 22:43:06,318 - app.utils.jwt_callbacks - INFO - Looking up user with identity: 1
2025-05-12 22:43:06,318 - app.utils.jwt_callbacks - INFO - Looking up user with identity: 1
2025-05-12 22:43:06,319 - sqlalchemy.engine.Engine - INFO - SELECT users.id AS users_id, users.username AS users_username, users.email AS users_email, users.name AS users_name, users.password_hash AS users_password_hash, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.last_login AS users_last_login 
FROM users 
WHERE users.id = ?
2025-05-12 22:43:06,319 - sqlalchemy.engine.Engine - INFO - SELECT users.id AS users_id, users.username AS users_username, users.email AS users_email, users.name AS users_name, users.password_hash AS users_password_hash, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.last_login AS users_last_login 
FROM users 
WHERE users.id = ?
2025-05-12 22:43:06,320 - sqlalchemy.engine.Engine - INFO - [cached since 3693s ago] (1,)
2025-05-12 22:43:06,320 - app - WARNING - 绕过JWT验证和CSRF保护: /api/auth/users
2025-05-12 22:43:06,321 - sqlalchemy.engine.Engine - INFO - [cached since 3693s ago] (1,)
2025-05-12 22:43:06,321 - app - WARNING - 绕过JWT验证和CSRF保护: /api/auth/users
2025-05-12 22:43:06,322 - app.utils.jwt_callbacks - INFO - User found: admin
2025-05-12 22:43:06,323 - app - INFO - CSRF绕过详细信息: {'path': '/api/auth/users', 'method': 'GET', 'has_csrf_token': False, 'headers': {'Host': '127.0.0.1:5000', 'Connection': 'keep-alive', 'Sec-Ch-Ua-Platform': '"Windows"', 'Cache-Control': 'no-cache', 'X-Requested-With': 'XMLHttpRequest', 'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36 Edg/136.0.0.0', 'Accept': 'application/json', 'Sec-Ch-Ua': '"Chromium";v="136", "Microsoft Edge";v="136", "Not.A/Brand";v="99"', 'Sec-Ch-Ua-Mobile': '?0', 'Sec-Fetch-Site': 'same-origin', 'Sec-Fetch-Mode': 'cors', 'Sec-Fetch-Dest': 'empty', 'Referer': 'http://127.0.0.1:5000/projects/detail/1?no_redirect=true&bypass_jwt=true', 'Accept-Encoding': 'gzip, deflate, br, zstd', 'Accept-Language': 'zh-CN,zh;q=0.9,en;q=0.8,en-GB;q=0.7,en-US;q=0.6'}, 'url_params': {'bypass_jwt': 'true', '_': '1747060986250'}, 'cookies': {'access_token_cookie': 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJmcmVzaCI6ZmFsc2UsImlhdCI6MTc0NzA2MDkyOCwianRpIjoiZWFhY2M1M2ItYTc0MC00Mzc2LTk1MDctNzEwM2IxNTA1Y2YwIiwidHlwZSI6ImFjY2VzcyIsInN1YiI6MSwibmJmIjoxNzQ3MDYwOTI4LCJjc3JmIjoiSW1KalpUWTNaV1pqT1RGaVptSXhZalZpTVRjMVlURTNOemMwTVRkbFl6STFNVFF3WWpJMFlqUWkuYUNJSXdBLnpMbHN4b2Q4MXhxaWhZYUQ3NGpLQzJCTE1HcyIsImV4cCI6MTc0NzA2NDUyOCwiYXVkIjoidGFza19tYW5hZ2VtZW50X3N5c3RlbSIsInVzZXJfY2xhaW1zIjp7InVzZXJuYW1lIjoiYWRtaW4iLCJyb2xlcyI6WyJhZG1pbiJdLCJwZXJtaXNzaW9ucyI6WyJtYW5hZ2VfdXNlcnMiLCJtYW5hZ2Vfcm9sZXMiLCJtYW5hZ2VfYWxsX3Byb2plY3RzIiwibWFuYWdlX3Byb2plY3QiLCJtYW5hZ2VfYWxsX3Rhc2tzIiwibWFuYWdlX3Rhc2siLCJ2aWV3X3Byb2plY3QiLCJ2aWV3X3Rhc2siLCJtYW5hZ2VfcmVzb3VyY2VzIiwibWFuYWdlX3Jpc2tzIiwidmlld19yZXBvcnRzIiwiY3JlYXRlX3Rhc2siLCJhc3NpZ25fdGFzayIsImNoYW5nZV9wcm9qZWN0X3N0YXR1cyIsImNoYW5nZV90YXNrX3N0YXR1cyIsImNyZWF0ZV9wcm9qZWN0Il0sImlzX2FjdGl2ZSI6dHJ1ZX0sInJvbGVzIjpbImFkbWluIl0sImFkbWluIjp0cnVlfQ.DS0SKfLCjx3ijIfgf4q5ihx8ElcLonOOM7DuqFCGvhA', 'csrf_access_token': 'ImJjZTY3ZWZjOTFiZmIxYjViMTc1YTE3Nzc0MTdlYzI1MTQwYjI0YjQi.aCIIwA.zLlsxod81xqihYaD74jKC2BLMGs', 'user_roles': 'admin', 'is_admin': 'true', 'admin': 'true', 'admin_role': 'true'}}
2025-05-12 22:43:06,324 - app.utils.jwt_callbacks - INFO - User found: admin
2025-05-12 22:43:06,326 - sqlalchemy.engine.Engine - INFO - SELECT roles.id AS roles_id, roles.name AS roles_name, roles.description AS roles_description, roles.created_at AS roles_created_at 
FROM roles, user_roles 
WHERE ? = user_roles.user_id AND roles.id = user_roles.role_id
2025-05-12 22:43:06,324 - app - INFO - CSRF绕过详细信息: {'path': '/api/auth/users', 'method': 'GET', 'has_csrf_token': False, 'headers': {'Host': '127.0.0.1:5000', 'Connection': 'keep-alive', 'Sec-Ch-Ua-Platform': '"Windows"', 'Cache-Control': 'no-cache', 'X-Requested-With': 'XMLHttpRequest', 'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36 Edg/136.0.0.0', 'Accept': 'application/json', 'Sec-Ch-Ua': '"Chromium";v="136", "Microsoft Edge";v="136", "Not.A/Brand";v="99"', 'Sec-Ch-Ua-Mobile': '?0', 'Sec-Fetch-Site': 'same-origin', 'Sec-Fetch-Mode': 'cors', 'Sec-Fetch-Dest': 'empty', 'Referer': 'http://127.0.0.1:5000/projects/detail/1?no_redirect=true&bypass_jwt=true', 'Accept-Encoding': 'gzip, deflate, br, zstd', 'Accept-Language': 'zh-CN,zh;q=0.9,en;q=0.8,en-GB;q=0.7,en-US;q=0.6'}, 'url_params': {'bypass_jwt': 'true', '_': '1747060986251'}, 'cookies': {'access_token_cookie': 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJmcmVzaCI6ZmFsc2UsImlhdCI6MTc0NzA2MDkyOCwianRpIjoiZWFhY2M1M2ItYTc0MC00Mzc2LTk1MDctNzEwM2IxNTA1Y2YwIiwidHlwZSI6ImFjY2VzcyIsInN1YiI6MSwibmJmIjoxNzQ3MDYwOTI4LCJjc3JmIjoiSW1KalpUWTNaV1pqT1RGaVptSXhZalZpTVRjMVlURTNOemMwTVRkbFl6STFNVFF3WWpJMFlqUWkuYUNJSXdBLnpMbHN4b2Q4MXhxaWhZYUQ3NGpLQzJCTE1HcyIsImV4cCI6MTc0NzA2NDUyOCwiYXVkIjoidGFza19tYW5hZ2VtZW50X3N5c3RlbSIsInVzZXJfY2xhaW1zIjp7InVzZXJuYW1lIjoiYWRtaW4iLCJyb2xlcyI6WyJhZG1pbiJdLCJwZXJtaXNzaW9ucyI6WyJtYW5hZ2VfdXNlcnMiLCJtYW5hZ2Vfcm9sZXMiLCJtYW5hZ2VfYWxsX3Byb2plY3RzIiwibWFuYWdlX3Byb2plY3QiLCJtYW5hZ2VfYWxsX3Rhc2tzIiwibWFuYWdlX3Rhc2siLCJ2aWV3X3Byb2plY3QiLCJ2aWV3X3Rhc2siLCJtYW5hZ2VfcmVzb3VyY2VzIiwibWFuYWdlX3Jpc2tzIiwidmlld19yZXBvcnRzIiwiY3JlYXRlX3Rhc2siLCJhc3NpZ25fdGFzayIsImNoYW5nZV9wcm9qZWN0X3N0YXR1cyIsImNoYW5nZV90YXNrX3N0YXR1cyIsImNyZWF0ZV9wcm9qZWN0Il0sImlzX2FjdGl2ZSI6dHJ1ZX0sInJvbGVzIjpbImFkbWluIl0sImFkbWluIjp0cnVlfQ.DS0SKfLCjx3ijIfgf4q5ihx8ElcLonOOM7DuqFCGvhA', 'csrf_access_token': 'ImJjZTY3ZWZjOTFiZmIxYjViMTc1YTE3Nzc0MTdlYzI1MTQwYjI0YjQi.aCIIwA.zLlsxod81xqihYaD74jKC2BLMGs', 'user_roles': 'admin', 'is_admin': 'true', 'admin': 'true', 'admin_role': 'true'}}
2025-05-12 22:43:06,327 - app - WARNING - 未找到CSRF令牌，将在响应中添加新的令牌
2025-05-12 22:43:06,328 - sqlalchemy.engine.Engine - INFO - SELECT roles.id AS roles_id, roles.name AS roles_name, roles.description AS roles_description, roles.created_at AS roles_created_at 
FROM roles, user_roles 
WHERE ? = user_roles.user_id AND roles.id = user_roles.role_id
2025-05-12 22:43:06,328 - sqlalchemy.engine.Engine - INFO - [cached since 3693s ago] (1,)
2025-05-12 22:43:06,329 - app - WARNING - 未找到CSRF令牌，将在响应中添加新的令牌
2025-05-12 22:43:06,330 - sqlalchemy.engine.Engine - INFO - [cached since 3693s ago] (1,)
2025-05-12 22:43:06,329 - app - ERROR - Exception on /api/auth/users [GET]
Traceback (most recent call last):
  File "D:\tmp\work\venv\Lib\site-packages\flask\app.py", line 1511, in wsgi_app
    response = self.full_dispatch_request()
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\tmp\work\venv\Lib\site-packages\flask\app.py", line 919, in full_dispatch_request
    rv = self.handle_user_exception(e)
         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\tmp\work\venv\Lib\site-packages\flask_cors\extension.py", line 176, in wrapped_function
    return cors_after_request(app.make_response(f(*args, **kwargs)))
                                                ^^^^^^^^^^^^^^^^^^
  File "D:\tmp\work\venv\Lib\site-packages\flask\app.py", line 915, in full_dispatch_request
    rv = self.preprocess_request()
         ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\tmp\work\venv\Lib\site-packages\flask\app.py", line 1291, in preprocess_request
    rv = self.ensure_sync(before_func)()
         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\tmp\work\app\__init__.py", line 499, in bypass_csrf_with_jwt_bypass
    # 如果没有CSRF令牌，尝试生成一个并添加到响应中
        ^^^^^^^^^^^^^^
  File "D:\tmp\work\venv\Lib\site-packages\flask\sansio\scaffold.py", line 46, in wrapper_func
    self._check_setup_finished(f_name)
  File "D:\tmp\work\venv\Lib\site-packages\flask\sansio\app.py", line 415, in _check_setup_finished
    raise AssertionError(
AssertionError: The setup method 'after_request' can no longer be called on the application. It has already handled its first request, any changes will not be applied consistently.
Make sure all imports, decorators, functions, etc. needed to set up the application are done before running it.
2025-05-12 22:43:06,332 - app.utils.jwt_callbacks - INFO - User roles: ['admin']
2025-05-12 22:43:06,332 - app - ERROR - Exception on /api/auth/users [GET]
Traceback (most recent call last):
  File "D:\tmp\work\venv\Lib\site-packages\flask\app.py", line 1511, in wsgi_app
    response = self.full_dispatch_request()
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\tmp\work\venv\Lib\site-packages\flask\app.py", line 919, in full_dispatch_request
    rv = self.handle_user_exception(e)
         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\tmp\work\venv\Lib\site-packages\flask_cors\extension.py", line 176, in wrapped_function
    return cors_after_request(app.make_response(f(*args, **kwargs)))
                                                ^^^^^^^^^^^^^^^^^^
  File "D:\tmp\work\venv\Lib\site-packages\flask\app.py", line 915, in full_dispatch_request
    rv = self.preprocess_request()
         ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\tmp\work\venv\Lib\site-packages\flask\app.py", line 1291, in preprocess_request
    rv = self.ensure_sync(before_func)()
         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\tmp\work\app\__init__.py", line 499, in bypass_csrf_with_jwt_bypass
    # 如果没有CSRF令牌，尝试生成一个并添加到响应中
        ^^^^^^^^^^^^^^
  File "D:\tmp\work\venv\Lib\site-packages\flask\sansio\scaffold.py", line 46, in wrapper_func
    self._check_setup_finished(f_name)
  File "D:\tmp\work\venv\Lib\site-packages\flask\sansio\app.py", line 415, in _check_setup_finished
    raise AssertionError(
AssertionError: The setup method 'after_request' can no longer be called on the application. It has already handled its first request, any changes will not be applied consistently.
Make sure all imports, decorators, functions, etc. needed to set up the application are done before running it.
2025-05-12 22:43:06,334 - app.utils.jwt_callbacks - INFO - User roles: ['admin']
2025-05-12 22:43:06,335 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 22:43:06] "[35m[1mGET /api/auth/users?bypass_jwt=true&_=1747060986250 HTTP/1.1[0m" 500 -
2025-05-12 22:43:06,337 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions, role_permissions 
WHERE ? = role_permissions.role_id AND permissions.id = role_permissions.permission_id
2025-05-12 22:43:06,338 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 22:43:06] "[35m[1mGET /api/auth/users?bypass_jwt=true&_=1747060986251 HTTP/1.1[0m" 500 -
2025-05-12 22:43:06,338 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions, role_permissions 
WHERE ? = role_permissions.role_id AND permissions.id = role_permissions.permission_id
2025-05-12 22:43:06,339 - sqlalchemy.engine.Engine - INFO - [cached since 3697s ago] (1,)
2025-05-12 22:43:06,339 - sqlalchemy.engine.Engine - INFO - [cached since 3697s ago] (1,)
2025-05-12 22:43:06,340 - app.utils.jwt_callbacks - INFO - User permissions: ['manage_users', 'manage_roles', 'manage_all_projects', 'manage_project', 'manage_all_tasks', 'manage_task', 'view_project', 'view_task', 'manage_resources', 'manage_risks', 'view_reports', 'create_task', 'assign_task', 'change_project_status', 'change_task_status', 'create_project']
2025-05-12 22:43:06,341 - app.utils.jwt_callbacks - INFO - User permissions: ['manage_users', 'manage_roles', 'manage_all_projects', 'manage_project', 'manage_all_tasks', 'manage_task', 'view_project', 'view_task', 'manage_resources', 'manage_risks', 'view_reports', 'create_task', 'assign_task', 'change_project_status', 'change_task_status', 'create_project']
2025-05-12 22:43:06,342 - app.utils.jwt_callbacks - INFO - Checking if token eaacc53b-a740-4376-9507-7103b1505cf0 is in blocklist
2025-05-12 22:43:06,343 - app.utils.jwt_callbacks - INFO - Checking if token eaacc53b-a740-4376-9507-7103b1505cf0 is in blocklist
2025-05-12 22:43:06,344 - sqlalchemy.engine.Engine - INFO - SELECT token_blacklist.id AS token_blacklist_id, token_blacklist.jti AS token_blacklist_jti, token_blacklist.token_type AS token_blacklist_token_type, token_blacklist.user_id AS token_blacklist_user_id, token_blacklist.revoked_at AS token_blacklist_revoked_at, token_blacklist.expires_at AS token_blacklist_expires_at 
FROM token_blacklist 
WHERE token_blacklist.jti = ?
 LIMIT ? OFFSET ?
2025-05-12 22:43:06,344 - sqlalchemy.engine.Engine - INFO - SELECT token_blacklist.id AS token_blacklist_id, token_blacklist.jti AS token_blacklist_jti, token_blacklist.token_type AS token_blacklist_token_type, token_blacklist.user_id AS token_blacklist_user_id, token_blacklist.revoked_at AS token_blacklist_revoked_at, token_blacklist.expires_at AS token_blacklist_expires_at 
FROM token_blacklist 
WHERE token_blacklist.jti = ?
 LIMIT ? OFFSET ?
2025-05-12 22:43:06,344 - sqlalchemy.engine.Engine - INFO - [cached since 3693s ago] ('eaacc53b-a740-4376-9507-7103b1505cf0', 1, 0)
2025-05-12 22:43:06,344 - sqlalchemy.engine.Engine - INFO - [cached since 3693s ago] ('eaacc53b-a740-4376-9507-7103b1505cf0', 1, 0)
2025-05-12 22:43:06,345 - app.utils.jwt_callbacks - INFO - Token eaacc53b-a740-4376-9507-7103b1505cf0 is valid
2025-05-12 22:43:06,345 - app.utils.jwt_callbacks - INFO - Token eaacc53b-a740-4376-9507-7103b1505cf0 is valid
2025-05-12 22:43:06,346 - app.utils.jwt_callbacks - INFO - Verifying token
2025-05-12 22:43:06,347 - app.utils.jwt_callbacks - INFO - Verifying token
2025-05-12 22:43:06,347 - app.utils.jwt_callbacks - INFO - JWT Header: {'alg': 'HS256', 'typ': 'JWT'}
2025-05-12 22:43:06,348 - app.utils.jwt_callbacks - INFO - JWT Header: {'alg': 'HS256', 'typ': 'JWT'}
2025-05-12 22:43:06,348 - app.utils.jwt_callbacks - INFO - JWT Data: {'fresh': False, 'iat': 1747060928, 'jti': 'eaacc53b-a740-4376-9507-7103b1505cf0', 'type': 'access', 'sub': 1, 'nbf': 1747060928, 'csrf': 'ImJjZTY3ZWZjOTFiZmIxYjViMTc1YTE3Nzc0MTdlYzI1MTQwYjI0YjQi.aCIIwA.zLlsxod81xqihYaD74jKC2BLMGs', 'exp': 1747064528, 'aud': 'task_management_system', 'user_claims': {'username': 'admin', 'roles': ['admin'], 'permissions': ['manage_users', 'manage_roles', 'manage_all_projects', 'manage_project', 'manage_all_tasks', 'manage_task', 'view_project', 'view_task', 'manage_resources', 'manage_risks', 'view_reports', 'create_task', 'assign_task', 'change_project_status', 'change_task_status', 'create_project'], 'is_active': True}, 'roles': ['admin'], 'admin': True}
2025-05-12 22:43:06,349 - app.utils.jwt_callbacks - INFO - JWT Data: {'fresh': False, 'iat': 1747060928, 'jti': 'eaacc53b-a740-4376-9507-7103b1505cf0', 'type': 'access', 'sub': 1, 'nbf': 1747060928, 'csrf': 'ImJjZTY3ZWZjOTFiZmIxYjViMTc1YTE3Nzc0MTdlYzI1MTQwYjI0YjQi.aCIIwA.zLlsxod81xqihYaD74jKC2BLMGs', 'exp': 1747064528, 'aud': 'task_management_system', 'user_claims': {'username': 'admin', 'roles': ['admin'], 'permissions': ['manage_users', 'manage_roles', 'manage_all_projects', 'manage_project', 'manage_all_tasks', 'manage_task', 'view_project', 'view_task', 'manage_resources', 'manage_risks', 'view_reports', 'create_task', 'assign_task', 'change_project_status', 'change_task_status', 'create_project'], 'is_active': True}, 'roles': ['admin'], 'admin': True}
2025-05-12 22:43:06,349 - app.utils.jwt_callbacks - INFO - Token time difference: -58.349869 seconds
2025-05-12 22:43:06,350 - app.utils.jwt_callbacks - INFO - Token time difference: -58.350919 seconds
2025-05-12 22:43:06,350 - app.utils.jwt_callbacks - INFO - Token verification successful
2025-05-12 22:43:06,352 - app.utils.jwt_callbacks - INFO - Token verification successful
2025-05-12 22:43:06,352 - app.utils.jwt_callbacks - INFO - Looking up user with identity: 1
2025-05-12 22:43:06,352 - app.utils.jwt_callbacks - INFO - Looking up user with identity: 1
2025-05-12 22:43:06,353 - app.utils.jwt_callbacks - INFO - User found: admin
2025-05-12 22:43:06,353 - app.utils.jwt_callbacks - INFO - User found: admin
2025-05-12 22:43:06,354 - app.utils.jwt_callbacks - INFO - User roles: ['admin']
2025-05-12 22:43:06,354 - app.utils.jwt_callbacks - INFO - User roles: ['admin']
2025-05-12 22:43:06,354 - app.utils.jwt_callbacks - INFO - User permissions: ['manage_users', 'manage_roles', 'manage_all_projects', 'manage_project', 'manage_all_tasks', 'manage_task', 'view_project', 'view_task', 'manage_resources', 'manage_risks', 'view_reports', 'create_task', 'assign_task', 'change_project_status', 'change_task_status', 'create_project']
2025-05-12 22:43:06,355 - app.utils.jwt_callbacks - INFO - User permissions: ['manage_users', 'manage_roles', 'manage_all_projects', 'manage_project', 'manage_all_tasks', 'manage_task', 'view_project', 'view_task', 'manage_resources', 'manage_risks', 'view_reports', 'create_task', 'assign_task', 'change_project_status', 'change_task_status', 'create_project']
2025-05-12 22:43:06,355 - sqlalchemy.engine.Engine - INFO - SELECT risks.id AS risks_id, risks.title AS risks_title, risks.description AS risks_description, risks.status AS risks_status, risks.severity AS risks_severity, risks.probability AS risks_probability, risks.impact AS risks_impact, risks.mitigation_plan AS risks_mitigation_plan, risks.contingency_plan AS risks_contingency_plan, risks.created_at AS risks_created_at, risks.updated_at AS risks_updated_at, risks.project_id AS risks_project_id, risks.owner_id AS risks_owner_id, risks.task_id AS risks_task_id 
FROM risks
2025-05-12 22:43:06,356 - sqlalchemy.engine.Engine - INFO - SELECT risks.id AS risks_id, risks.title AS risks_title, risks.description AS risks_description, risks.status AS risks_status, risks.severity AS risks_severity, risks.probability AS risks_probability, risks.impact AS risks_impact, risks.mitigation_plan AS risks_mitigation_plan, risks.contingency_plan AS risks_contingency_plan, risks.created_at AS risks_created_at, risks.updated_at AS risks_updated_at, risks.project_id AS risks_project_id, risks.owner_id AS risks_owner_id, risks.task_id AS risks_task_id 
FROM risks
2025-05-12 22:43:06,356 - sqlalchemy.engine.Engine - INFO - [cached since 3691s ago] ()
2025-05-12 22:43:06,357 - sqlalchemy.engine.Engine - INFO - [cached since 3691s ago] ()
2025-05-12 22:43:06,359 - sqlalchemy.engine.Engine - INFO - SELECT projects.id AS projects_id, projects.name AS projects_name, projects.description AS projects_description, projects.status AS projects_status, projects.start_date AS projects_start_date, projects.end_date AS projects_end_date, projects.progress AS projects_progress, projects.created_at AS projects_created_at, projects.updated_at AS projects_updated_at, projects.manager_id AS projects_manager_id, projects.owner_id AS projects_owner_id 
FROM projects 
WHERE projects.id = ?
2025-05-12 22:43:06,360 - sqlalchemy.engine.Engine - INFO - SELECT projects.id AS projects_id, projects.name AS projects_name, projects.description AS projects_description, projects.status AS projects_status, projects.start_date AS projects_start_date, projects.end_date AS projects_end_date, projects.progress AS projects_progress, projects.created_at AS projects_created_at, projects.updated_at AS projects_updated_at, projects.manager_id AS projects_manager_id, projects.owner_id AS projects_owner_id 
FROM projects 
WHERE projects.id = ?
2025-05-12 22:43:06,360 - sqlalchemy.engine.Engine - INFO - [cached since 3691s ago] (2,)
2025-05-12 22:43:06,361 - sqlalchemy.engine.Engine - INFO - [cached since 3691s ago] (2,)
2025-05-12 22:43:06,362 - sqlalchemy.engine.Engine - INFO - SELECT projects.id AS projects_id, projects.name AS projects_name, projects.description AS projects_description, projects.status AS projects_status, projects.start_date AS projects_start_date, projects.end_date AS projects_end_date, projects.progress AS projects_progress, projects.created_at AS projects_created_at, projects.updated_at AS projects_updated_at, projects.manager_id AS projects_manager_id, projects.owner_id AS projects_owner_id 
FROM projects 
WHERE projects.id = ?
2025-05-12 22:43:06,363 - sqlalchemy.engine.Engine - INFO - SELECT projects.id AS projects_id, projects.name AS projects_name, projects.description AS projects_description, projects.status AS projects_status, projects.start_date AS projects_start_date, projects.end_date AS projects_end_date, projects.progress AS projects_progress, projects.created_at AS projects_created_at, projects.updated_at AS projects_updated_at, projects.manager_id AS projects_manager_id, projects.owner_id AS projects_owner_id 
FROM projects 
WHERE projects.id = ?
2025-05-12 22:43:06,363 - sqlalchemy.engine.Engine - INFO - [cached since 3691s ago] (3,)
2025-05-12 22:43:06,364 - sqlalchemy.engine.Engine - INFO - [cached since 3691s ago] (3,)
2025-05-12 22:43:06,365 - sqlalchemy.engine.Engine - INFO - SELECT projects.id AS projects_id, projects.name AS projects_name, projects.description AS projects_description, projects.status AS projects_status, projects.start_date AS projects_start_date, projects.end_date AS projects_end_date, projects.progress AS projects_progress, projects.created_at AS projects_created_at, projects.updated_at AS projects_updated_at, projects.manager_id AS projects_manager_id, projects.owner_id AS projects_owner_id 
FROM projects 
WHERE projects.id = ?
2025-05-12 22:43:06,366 - sqlalchemy.engine.Engine - INFO - SELECT projects.id AS projects_id, projects.name AS projects_name, projects.description AS projects_description, projects.status AS projects_status, projects.start_date AS projects_start_date, projects.end_date AS projects_end_date, projects.progress AS projects_progress, projects.created_at AS projects_created_at, projects.updated_at AS projects_updated_at, projects.manager_id AS projects_manager_id, projects.owner_id AS projects_owner_id 
FROM projects 
WHERE projects.id = ?
2025-05-12 22:43:06,367 - sqlalchemy.engine.Engine - INFO - [cached since 3691s ago] (1,)
2025-05-12 22:43:06,367 - sqlalchemy.engine.Engine - INFO - [cached since 3691s ago] (1,)
2025-05-12 22:43:06,368 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-05-12 22:43:06,369 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-05-12 22:43:06,368 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 22:43:06] "GET /api/risks?project_id=1&bypass_jwt=true&_=1747060986250 HTTP/1.1" 200 -
2025-05-12 22:43:06,369 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 22:43:06] "GET /api/risks?project_id=1&bypass_jwt=true&_=1747060986251 HTTP/1.1" 200 -
2025-05-12 22:43:23,248 - app - WARNING - 绕过JWT验证: /api/tasks
2025-05-12 22:43:23,249 - app - WARNING - 设置请求CSRF验证令牌: /api/tasks
2025-05-12 22:43:23,251 - app - INFO - 设置请求的_csrf_token属性
2025-05-12 22:43:23,252 - app - INFO - 请求方法: POST
2025-05-12 22:43:23,252 - app - INFO - 请求路径: /api/tasks
2025-05-12 22:43:23,253 - app - INFO - 请求头: {'Host': '127.0.0.1:5000', 'Connection': 'keep-alive', 'Content-Length': '130', 'Sec-Ch-Ua-Platform': '"Windows"', 'X-Requested-With': 'XMLHttpRequest', 'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36 Edg/136.0.0.0', 'Accept': 'application/json', 'Sec-Ch-Ua': '"Chromium";v="136", "Microsoft Edge";v="136", "Not.A/Brand";v="99"', 'Content-Type': 'application/json', 'Sec-Ch-Ua-Mobile': '?0', 'Origin': 'http://127.0.0.1:5000', 'Sec-Fetch-Site': 'same-origin', 'Sec-Fetch-Mode': 'cors', 'Sec-Fetch-Dest': 'empty', 'Referer': 'http://127.0.0.1:5000/projects/detail/1?no_redirect=true&bypass_jwt=true', 'Accept-Encoding': 'gzip, deflate, br, zstd', 'Accept-Language': 'zh-CN,zh;q=0.9,en;q=0.8,en-GB;q=0.7,en-US;q=0.6', 'Cookie': 'access_token_cookie=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJmcmVzaCI6ZmFsc2UsImlhdCI6MTc0NzA2MDkyOCwianRpIjoiZWFhY2M1M2ItYTc0MC00Mzc2LTk1MDctNzEwM2IxNTA1Y2YwIiwidHlwZSI6ImFjY2VzcyIsInN1YiI6MSwibmJmIjoxNzQ3MDYwOTI4LCJjc3JmIjoiSW1KalpUWTNaV1pqT1RGaVptSXhZalZpTVRjMVlURTNOemMwTVRkbFl6STFNVFF3WWpJMFlqUWkuYUNJSXdBLnpMbHN4b2Q4MXhxaWhZYUQ3NGpLQzJCTE1HcyIsImV4cCI6MTc0NzA2NDUyOCwiYXVkIjoidGFza19tYW5hZ2VtZW50X3N5c3RlbSIsInVzZXJfY2xhaW1zIjp7InVzZXJuYW1lIjoiYWRtaW4iLCJyb2xlcyI6WyJhZG1pbiJdLCJwZXJtaXNzaW9ucyI6WyJtYW5hZ2VfdXNlcnMiLCJtYW5hZ2Vfcm9sZXMiLCJtYW5hZ2VfYWxsX3Byb2plY3RzIiwibWFuYWdlX3Byb2plY3QiLCJtYW5hZ2VfYWxsX3Rhc2tzIiwibWFuYWdlX3Rhc2siLCJ2aWV3X3Byb2plY3QiLCJ2aWV3X3Rhc2siLCJtYW5hZ2VfcmVzb3VyY2VzIiwibWFuYWdlX3Jpc2tzIiwidmlld19yZXBvcnRzIiwiY3JlYXRlX3Rhc2siLCJhc3NpZ25fdGFzayIsImNoYW5nZV9wcm9qZWN0X3N0YXR1cyIsImNoYW5nZV90YXNrX3N0YXR1cyIsImNyZWF0ZV9wcm9qZWN0Il0sImlzX2FjdGl2ZSI6dHJ1ZX0sInJvbGVzIjpbImFkbWluIl0sImFkbWluIjp0cnVlfQ.DS0SKfLCjx3ijIfgf4q5ihx8ElcLonOOM7DuqFCGvhA; csrf_access_token=ImJjZTY3ZWZjOTFiZmIxYjViMTc1YTE3Nzc0MTdlYzI1MTQwYjI0YjQi.aCIIwA.zLlsxod81xqihYaD74jKC2BLMGs; user_roles=admin; is_admin=true; admin=true; admin_role=true; session=eyJjc3JmX3Rva2VuIjoiYmNlNjdlZmM5MWJmYjFiNWIxNzVhMTc3NzQxN2VjMjUxNDBiMjRiNCJ9.aCII-g.FAH09IqA2cHJt2sqLLVrLIpe6iw'}
2025-05-12 22:43:23,254 - app - INFO - 请求数据: {'title': 'ffffff', 'description': 'gggggg', 'project_id': 1, 'assignee_id': '1', 'due_date': '2025-06-13', 'priority': '2', 'status': 'to_do'}
2025-05-12 22:43:23,256 - app - INFO - 访问任务CSRF豁免路由: /api/tasks, 方法: POST
2025-05-12 22:43:23,256 - app - INFO - 绕过JWT验证: /api/tasks
2025-05-12 22:43:23,257 - app - ERROR - 处理任务API豁免路由出错: Missing CSRF token
Traceback (most recent call last):
  File "D:\tmp\work\app\__init__.py", line 304, in task_api_exempt_route
    elif request.method == 'POST':
               ^^^^^^^^^^^^^
  File "D:\tmp\work\venv\Lib\site-packages\flask_jwt_extended\view_decorators.py", line 167, in decorator
    verify_jwt_in_request(
  File "D:\tmp\work\venv\Lib\site-packages\flask_jwt_extended\view_decorators.py", line 94, in verify_jwt_in_request
    jwt_data, jwt_header, jwt_location = _decode_jwt_from_request(
                                         ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\tmp\work\venv\Lib\site-packages\flask_jwt_extended\view_decorators.py", line 339, in _decode_jwt_from_request
    encoded_token, csrf_token = get_encoded_token_function()
                                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\tmp\work\venv\Lib\site-packages\flask_jwt_extended\view_decorators.py", line 318, in <lambda>
    (location, lambda: _decode_jwt_from_cookies(refresh))
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\tmp\work\venv\Lib\site-packages\flask_jwt_extended\view_decorators.py", line 252, in _decode_jwt_from_cookies
    raise CSRFError("Missing CSRF token")
flask_jwt_extended.exceptions.CSRFError: Missing CSRF token
2025-05-12 22:43:23,259 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 22:43:23] "[35m[1mPOST /api/tasks?bypass_jwt=true&_=1747061003243 HTTP/1.1[0m" 500 -
2025-05-12 22:43:23,267 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 22:43:23] "[31m[1mPOST /api/noauth/tasks?bypass_jwt=true&_=1747061003243 HTTP/1.1[0m" 405 -
2025-05-12 22:43:23,273 - app - WARNING - 绕过JWT验证和CSRF保护: /api/projects/1/tasks
2025-05-12 22:43:23,274 - app - INFO - CSRF绕过详细信息: {'path': '/api/projects/1/tasks', 'method': 'POST', 'has_csrf_token': False, 'headers': {'Host': '127.0.0.1:5000', 'Connection': 'keep-alive', 'Content-Length': '130', 'Sec-Ch-Ua-Platform': '"Windows"', 'X-Requested-With': 'XMLHttpRequest', 'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36 Edg/136.0.0.0', 'Accept': 'application/json', 'Sec-Ch-Ua': '"Chromium";v="136", "Microsoft Edge";v="136", "Not.A/Brand";v="99"', 'Content-Type': 'application/json', 'Sec-Ch-Ua-Mobile': '?0', 'Origin': 'http://127.0.0.1:5000', 'Sec-Fetch-Site': 'same-origin', 'Sec-Fetch-Mode': 'cors', 'Sec-Fetch-Dest': 'empty', 'Referer': 'http://127.0.0.1:5000/projects/detail/1?no_redirect=true&bypass_jwt=true', 'Accept-Encoding': 'gzip, deflate, br, zstd', 'Accept-Language': 'zh-CN,zh;q=0.9,en;q=0.8,en-GB;q=0.7,en-US;q=0.6'}, 'url_params': {'bypass_jwt': 'true', '_': '1747061003243'}, 'cookies': {'access_token_cookie': 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJmcmVzaCI6ZmFsc2UsImlhdCI6MTc0NzA2MDkyOCwianRpIjoiZWFhY2M1M2ItYTc0MC00Mzc2LTk1MDctNzEwM2IxNTA1Y2YwIiwidHlwZSI6ImFjY2VzcyIsInN1YiI6MSwibmJmIjoxNzQ3MDYwOTI4LCJjc3JmIjoiSW1KalpUWTNaV1pqT1RGaVptSXhZalZpTVRjMVlURTNOemMwTVRkbFl6STFNVFF3WWpJMFlqUWkuYUNJSXdBLnpMbHN4b2Q4MXhxaWhZYUQ3NGpLQzJCTE1HcyIsImV4cCI6MTc0NzA2NDUyOCwiYXVkIjoidGFza19tYW5hZ2VtZW50X3N5c3RlbSIsInVzZXJfY2xhaW1zIjp7InVzZXJuYW1lIjoiYWRtaW4iLCJyb2xlcyI6WyJhZG1pbiJdLCJwZXJtaXNzaW9ucyI6WyJtYW5hZ2VfdXNlcnMiLCJtYW5hZ2Vfcm9sZXMiLCJtYW5hZ2VfYWxsX3Byb2plY3RzIiwibWFuYWdlX3Byb2plY3QiLCJtYW5hZ2VfYWxsX3Rhc2tzIiwibWFuYWdlX3Rhc2siLCJ2aWV3X3Byb2plY3QiLCJ2aWV3X3Rhc2siLCJtYW5hZ2VfcmVzb3VyY2VzIiwibWFuYWdlX3Jpc2tzIiwidmlld19yZXBvcnRzIiwiY3JlYXRlX3Rhc2siLCJhc3NpZ25fdGFzayIsImNoYW5nZV9wcm9qZWN0X3N0YXR1cyIsImNoYW5nZV90YXNrX3N0YXR1cyIsImNyZWF0ZV9wcm9qZWN0Il0sImlzX2FjdGl2ZSI6dHJ1ZX0sInJvbGVzIjpbImFkbWluIl0sImFkbWluIjp0cnVlfQ.DS0SKfLCjx3ijIfgf4q5ihx8ElcLonOOM7DuqFCGvhA', 'csrf_access_token': 'ImJjZTY3ZWZjOTFiZmIxYjViMTc1YTE3Nzc0MTdlYzI1MTQwYjI0YjQi.aCIIwA.zLlsxod81xqihYaD74jKC2BLMGs', 'user_roles': 'admin', 'is_admin': 'true', 'admin': 'true', 'admin_role': 'true'}}
2025-05-12 22:43:23,276 - app - INFO - JSON请求数据: {'title': 'ffffff', 'description': 'gggggg', 'project_id': 1, 'assignee_id': '1', 'due_date': '2025-06-13', 'priority': '2', 'status': 'to_do'}
2025-05-12 22:43:23,277 - app - WARNING - 未找到CSRF令牌，将在响应中添加新的令牌
2025-05-12 22:43:23,278 - app - ERROR - Exception on /api/projects/1/tasks [POST]
Traceback (most recent call last):
  File "D:\tmp\work\venv\Lib\site-packages\flask\app.py", line 1511, in wsgi_app
    response = self.full_dispatch_request()
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\tmp\work\venv\Lib\site-packages\flask\app.py", line 919, in full_dispatch_request
    rv = self.handle_user_exception(e)
         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\tmp\work\venv\Lib\site-packages\flask_cors\extension.py", line 176, in wrapped_function
    return cors_after_request(app.make_response(f(*args, **kwargs)))
                                                ^^^^^^^^^^^^^^^^^^
  File "D:\tmp\work\venv\Lib\site-packages\flask\app.py", line 915, in full_dispatch_request
    rv = self.preprocess_request()
         ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\tmp\work\venv\Lib\site-packages\flask\app.py", line 1291, in preprocess_request
    rv = self.ensure_sync(before_func)()
         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\tmp\work\app\__init__.py", line 499, in bypass_csrf_with_jwt_bypass
    # 如果没有CSRF令牌，尝试生成一个并添加到响应中
        ^^^^^^^^^^^^^^
  File "D:\tmp\work\venv\Lib\site-packages\flask\sansio\scaffold.py", line 46, in wrapper_func
    self._check_setup_finished(f_name)
  File "D:\tmp\work\venv\Lib\site-packages\flask\sansio\app.py", line 415, in _check_setup_finished
    raise AssertionError(
AssertionError: The setup method 'after_request' can no longer be called on the application. It has already handled its first request, any changes will not be applied consistently.
Make sure all imports, decorators, functions, etc. needed to set up the application are done before running it.
2025-05-12 22:43:23,281 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 22:43:23] "[35m[1mPOST /api/projects/1/tasks?bypass_jwt=true&_=1747061003243 HTTP/1.1[0m" 500 -
2025-05-12 22:48:28,398 - app - INFO - 未匹配的路径 /login，重定向到登录页面
2025-05-12 22:48:28,398 - app - INFO - 设置重定向跟踪: 路径=/login, 计数=1
2025-05-12 22:48:28,399 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 22:48:28] "[32mGET /login HTTP/1.1[0m" 302 -
2025-05-12 22:48:28,409 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 22:48:28] "GET /auth/login HTTP/1.1" 200 -
2025-05-12 22:48:28,447 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 22:48:28] "GET /static/css/bootstrap.min.css HTTP/1.1" 200 -
2025-05-12 22:48:28,448 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 22:48:28] "GET /static/css/bootstrap-icons.css HTTP/1.1" 200 -
2025-05-12 22:48:28,449 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 22:48:28] "GET /static/css/style.css HTTP/1.1" 200 -
2025-05-12 22:48:28,452 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 22:48:28] "GET /static/js/jquery.min.js HTTP/1.1" 200 -
2025-05-12 22:48:28,453 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 22:48:28] "GET /static/js/bootstrap.bundle.min.js HTTP/1.1" 200 -
2025-05-12 22:48:28,455 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 22:48:28] "GET /static/js/utils.js HTTP/1.1" 200 -
2025-05-12 22:48:28,463 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 22:48:28] "GET /static/js/auth.js HTTP/1.1" 200 -
2025-05-12 22:48:28,465 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 22:48:28] "GET /static/images/background.png HTTP/1.1" 200 -
2025-05-12 22:48:28,480 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 22:48:28] "GET /static/js/fix-modals.js HTTP/1.1" 200 -
2025-05-12 22:48:28,485 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 22:48:28] "GET /static/js/csrf.js HTTP/1.1" 200 -
2025-05-12 22:48:28,485 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 22:48:28] "GET /static/js/background-helper.js HTTP/1.1" 200 -
2025-05-12 22:48:28,485 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 22:48:28] "GET /static/js/user-profile.js HTTP/1.1" 200 -
2025-05-12 22:48:28,489 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 22:48:28] "[33mGET /static/uploads/background.png HTTP/1.1[0m" 404 -
2025-05-12 22:48:28,514 - app - WARNING - 绕过JWT验证: /auth/user_info
2025-05-12 22:48:28,517 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 22:48:28] "[33mGET /static/uploads/background.png HTTP/1.1[0m" 404 -
2025-05-12 22:48:28,517 - app.utils.jwt_callbacks - ERROR - Missing token: Missing JWT in headers, cookies or query_string (Missing Authorization Header; Missing cookie "access_token_cookie"; Missing 'jwt' query paramater)
2025-05-12 22:48:28,518 - app.utils.jwt_callbacks - INFO - Redirecting to login page
2025-05-12 22:48:28,519 - app - INFO - 设置重定向跟踪: 路径=/auth/user_info, 计数=1
2025-05-12 22:48:28,519 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 22:48:28] "[32mGET /auth/user_info?_=1747061308510&bypass_jwt=true HTTP/1.1[0m" 302 -
2025-05-12 22:48:28,527 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 22:48:28] "GET /auth/login HTTP/1.1" 200 -
2025-05-12 22:48:28,538 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 22:48:28] "GET /static/favicon.ico HTTP/1.1" 200 -
2025-05-12 22:48:29,527 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 22:48:29] "[33mGET /static/uploads/background.png HTTP/1.1[0m" 404 -
2025-05-12 23:01:03,907 - app - INFO - 登录请求 - 方法: POST, 内容类型: application/x-www-form-urlencoded
2025-05-12 23:01:03,907 - app - INFO - 请求头: {'Host': '127.0.0.1:5000', 'Connection': 'keep-alive', 'Content-Length': '135', 'Cache-Control': 'max-age=0', 'Sec-Ch-Ua': '"Chromium";v="136", "Microsoft Edge";v="136", "Not.A/Brand";v="99"', 'Sec-Ch-Ua-Mobile': '?0', 'Sec-Ch-Ua-Platform': '"Windows"', 'Origin': 'http://127.0.0.1:5000', 'Content-Type': 'application/x-www-form-urlencoded', 'Upgrade-Insecure-Requests': '1', 'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36 Edg/136.0.0.0', 'Accept': 'text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.7', 'Sec-Fetch-Site': 'same-origin', 'Sec-Fetch-Mode': 'navigate', 'Sec-Fetch-User': '?1', 'Sec-Fetch-Dest': 'document', 'Referer': 'http://127.0.0.1:5000/auth/login', 'Accept-Encoding': 'gzip, deflate, br, zstd', 'Accept-Language': 'zh-CN,zh;q=0.9,en;q=0.8,en-GB;q=0.7,en-US;q=0.6', 'Cookie': 'redirect_count=1; redirect_path=/auth/user_info; session=eyJjc3JmX3Rva2VuIjoiMzQ5NGNlNmZmZTFjNjBhYTExYTRmZWUwYzNjMTc0ODk2OTEwODlhMSJ9.aCIKPQ.R18bJ7FCym83Nzl75CUGsRy46Qk'}
2025-05-12 23:01:03,908 - app - INFO - 处理表单格式的登录请求
2025-05-12 23:01:03,909 - app - INFO - 表单数据: username=admin, password=********
2025-05-12 23:01:03,913 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-05-12 23:01:03,914 - sqlalchemy.engine.Engine - INFO - SELECT users.id AS users_id, users.username AS users_username, users.email AS users_email, users.name AS users_name, users.password_hash AS users_password_hash, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.last_login AS users_last_login 
FROM users 
WHERE users.username = ?
 LIMIT ? OFFSET ?
2025-05-12 23:01:03,914 - sqlalchemy.engine.Engine - INFO - [cached since 4771s ago] ('admin', 1, 0)
2025-05-12 23:01:04,270 - app - INFO - 已生成CSRF令牌: IjM0OTRjZT...
2025-05-12 23:01:04,273 - sqlalchemy.engine.Engine - INFO - SELECT roles.id AS roles_id, roles.name AS roles_name, roles.description AS roles_description, roles.created_at AS roles_created_at 
FROM roles, user_roles 
WHERE ? = user_roles.user_id AND roles.id = user_roles.role_id
2025-05-12 23:01:04,273 - sqlalchemy.engine.Engine - INFO - [cached since 4771s ago] (1,)
2025-05-12 23:01:04,274 - app - INFO - 用户 admin 的角色: ['admin']
2025-05-12 23:01:04,275 - app - INFO - 用户 admin 是否是管理员: True
2025-05-12 23:01:04,282 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions, role_permissions 
WHERE ? = role_permissions.role_id AND permissions.id = role_permissions.permission_id
2025-05-12 23:01:04,283 - sqlalchemy.engine.Engine - INFO - [cached since 4775s ago] (1,)
2025-05-12 23:01:04,287 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions 
WHERE permissions.name = ?
 LIMIT ? OFFSET ?
2025-05-12 23:01:04,288 - sqlalchemy.engine.Engine - INFO - [cached since 4775s ago] ('manage_users', 1, 0)
2025-05-12 23:01:04,291 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions 
WHERE permissions.name = ?
 LIMIT ? OFFSET ?
2025-05-12 23:01:04,291 - sqlalchemy.engine.Engine - INFO - [cached since 4775s ago] ('manage_roles', 1, 0)
2025-05-12 23:01:04,293 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions 
WHERE permissions.name = ?
 LIMIT ? OFFSET ?
2025-05-12 23:01:04,294 - sqlalchemy.engine.Engine - INFO - [cached since 4775s ago] ('manage_all_projects', 1, 0)
2025-05-12 23:01:04,296 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions 
WHERE permissions.name = ?
 LIMIT ? OFFSET ?
2025-05-12 23:01:04,300 - sqlalchemy.engine.Engine - INFO - [cached since 4775s ago] ('manage_project', 1, 0)
2025-05-12 23:01:04,302 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions 
WHERE permissions.name = ?
 LIMIT ? OFFSET ?
2025-05-12 23:01:04,303 - sqlalchemy.engine.Engine - INFO - [cached since 4775s ago] ('manage_all_tasks', 1, 0)
2025-05-12 23:01:04,305 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions 
WHERE permissions.name = ?
 LIMIT ? OFFSET ?
2025-05-12 23:01:04,306 - sqlalchemy.engine.Engine - INFO - [cached since 4775s ago] ('manage_task', 1, 0)
2025-05-12 23:01:04,309 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions 
WHERE permissions.name = ?
 LIMIT ? OFFSET ?
2025-05-12 23:01:04,309 - sqlalchemy.engine.Engine - INFO - [cached since 4775s ago] ('view_project', 1, 0)
2025-05-12 23:01:04,311 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions 
WHERE permissions.name = ?
 LIMIT ? OFFSET ?
2025-05-12 23:01:04,314 - sqlalchemy.engine.Engine - INFO - [cached since 4775s ago] ('view_task', 1, 0)
2025-05-12 23:01:04,317 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions 
WHERE permissions.name = ?
 LIMIT ? OFFSET ?
2025-05-12 23:01:04,317 - sqlalchemy.engine.Engine - INFO - [cached since 4775s ago] ('manage_resources', 1, 0)
2025-05-12 23:01:04,320 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions 
WHERE permissions.name = ?
 LIMIT ? OFFSET ?
2025-05-12 23:01:04,321 - sqlalchemy.engine.Engine - INFO - [cached since 4775s ago] ('manage_risks', 1, 0)
2025-05-12 23:01:04,323 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions 
WHERE permissions.name = ?
 LIMIT ? OFFSET ?
2025-05-12 23:01:04,324 - sqlalchemy.engine.Engine - INFO - [cached since 4775s ago] ('view_reports', 1, 0)
2025-05-12 23:01:04,326 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions 
WHERE permissions.name = ?
 LIMIT ? OFFSET ?
2025-05-12 23:01:04,329 - sqlalchemy.engine.Engine - INFO - [cached since 4775s ago] ('create_task', 1, 0)
2025-05-12 23:01:04,332 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions 
WHERE permissions.name = ?
 LIMIT ? OFFSET ?
2025-05-12 23:01:04,333 - sqlalchemy.engine.Engine - INFO - [cached since 4775s ago] ('create_project', 1, 0)
2025-05-12 23:01:04,335 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions 
WHERE permissions.name = ?
 LIMIT ? OFFSET ?
2025-05-12 23:01:04,336 - sqlalchemy.engine.Engine - INFO - [cached since 4775s ago] ('assign_task', 1, 0)
2025-05-12 23:01:04,338 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions 
WHERE permissions.name = ?
 LIMIT ? OFFSET ?
2025-05-12 23:01:04,339 - sqlalchemy.engine.Engine - INFO - [cached since 4775s ago] ('change_project_status', 1, 0)
2025-05-12 23:01:04,341 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions 
WHERE permissions.name = ?
 LIMIT ? OFFSET ?
2025-05-12 23:01:04,342 - sqlalchemy.engine.Engine - INFO - [cached since 4775s ago] ('change_task_status', 1, 0)
2025-05-12 23:01:04,345 - app.utils.jwt_callbacks - INFO - Adding additional claims for user 1
2025-05-12 23:01:04,347 - app.utils.jwt_callbacks - INFO - Added claims for user 1: {'aud': 'task_management_system', 'user_claims': {'username': 'admin', 'roles': ['admin'], 'permissions': ['manage_users', 'manage_roles', 'manage_all_projects', 'manage_project', 'manage_all_tasks', 'manage_task', 'view_project', 'view_task', 'manage_resources', 'manage_risks', 'view_reports', 'create_task', 'assign_task', 'change_project_status', 'change_task_status', 'create_project'], 'is_active': True}}
2025-05-12 23:01:04,349 - app.utils.jwt_callbacks - INFO - Adding additional claims for user 1
2025-05-12 23:01:04,350 - app.utils.jwt_callbacks - INFO - Added claims for user 1: {'aud': 'task_management_system', 'user_claims': {'username': 'admin', 'roles': ['admin'], 'permissions': ['manage_users', 'manage_roles', 'manage_all_projects', 'manage_project', 'manage_all_tasks', 'manage_task', 'view_project', 'view_task', 'manage_resources', 'manage_risks', 'view_reports', 'create_task', 'assign_task', 'change_project_status', 'change_task_status', 'create_project'], 'is_active': True}}
2025-05-12 23:01:04,355 - sqlalchemy.engine.Engine - INFO - UPDATE users SET updated_at=?, last_login=? WHERE users.id = ?
2025-05-12 23:01:04,356 - sqlalchemy.engine.Engine - INFO - [cached since 4771s ago] ('2025-05-12 15:01:04.355623', '2025-05-12 15:01:04.353603', 1)
2025-05-12 23:01:04,366 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-05-12 23:01:04,373 - app - INFO - 用户登录成功: admin
2025-05-12 23:01:04,377 - app - INFO - 设置重定向跟踪: 路径=/auth/login, 计数=1
2025-05-12 23:01:04,380 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 23:01:04] "[32mPOST /auth/login HTTP/1.1[0m" 302 -
2025-05-12 23:01:04,397 - app.utils.jwt_callbacks - INFO - Checking if token 7bf5fc05-1a66-4438-8b8f-45bd472b399d is in blocklist
2025-05-12 23:01:04,409 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-05-12 23:01:04,411 - sqlalchemy.engine.Engine - INFO - SELECT token_blacklist.id AS token_blacklist_id, token_blacklist.jti AS token_blacklist_jti, token_blacklist.token_type AS token_blacklist_token_type, token_blacklist.user_id AS token_blacklist_user_id, token_blacklist.revoked_at AS token_blacklist_revoked_at, token_blacklist.expires_at AS token_blacklist_expires_at 
FROM token_blacklist 
WHERE token_blacklist.jti = ?
 LIMIT ? OFFSET ?
2025-05-12 23:01:04,412 - sqlalchemy.engine.Engine - INFO - [cached since 4771s ago] ('7bf5fc05-1a66-4438-8b8f-45bd472b399d', 1, 0)
2025-05-12 23:01:04,415 - app.utils.jwt_callbacks - INFO - Token 7bf5fc05-1a66-4438-8b8f-45bd472b399d is valid
2025-05-12 23:01:04,416 - app.utils.jwt_callbacks - INFO - Verifying token
2025-05-12 23:01:04,419 - app.utils.jwt_callbacks - INFO - JWT Header: {'alg': 'HS256', 'typ': 'JWT'}
2025-05-12 23:01:04,420 - app.utils.jwt_callbacks - INFO - JWT Data: {'fresh': False, 'iat': 1747062064, 'jti': '7bf5fc05-1a66-4438-8b8f-45bd472b399d', 'type': 'access', 'sub': 1, 'nbf': 1747062064, 'csrf': 'IjM0OTRjZTZmZmUxYzYwYWExMWE0ZmVlMGMzYzE3NDg5NjkxMDg5YTEi.aCINMA.5evT3dCHuJ1HyIPnKfmNAzm4fsg', 'exp': 1747065664, 'aud': 'task_management_system', 'user_claims': {'username': 'admin', 'roles': ['admin'], 'permissions': ['manage_users', 'manage_roles', 'manage_all_projects', 'manage_project', 'manage_all_tasks', 'manage_task', 'view_project', 'view_task', 'manage_resources', 'manage_risks', 'view_reports', 'create_task', 'assign_task', 'change_project_status', 'change_task_status', 'create_project'], 'is_active': True}, 'roles': ['admin'], 'admin': True}
2025-05-12 23:01:04,422 - app.utils.jwt_callbacks - INFO - Token time difference: -0.422897 seconds
2025-05-12 23:01:04,425 - app.utils.jwt_callbacks - INFO - Token verification successful
2025-05-12 23:01:04,428 - app.utils.jwt_callbacks - INFO - Looking up user with identity: 1
2025-05-12 23:01:04,430 - sqlalchemy.engine.Engine - INFO - SELECT users.id AS users_id, users.username AS users_username, users.email AS users_email, users.name AS users_name, users.password_hash AS users_password_hash, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.last_login AS users_last_login 
FROM users 
WHERE users.id = ?
2025-05-12 23:01:04,431 - sqlalchemy.engine.Engine - INFO - [cached since 4771s ago] (1,)
2025-05-12 23:01:04,434 - app.utils.jwt_callbacks - INFO - User found: admin
2025-05-12 23:01:04,436 - sqlalchemy.engine.Engine - INFO - SELECT roles.id AS roles_id, roles.name AS roles_name, roles.description AS roles_description, roles.created_at AS roles_created_at 
FROM roles, user_roles 
WHERE ? = user_roles.user_id AND roles.id = user_roles.role_id
2025-05-12 23:01:04,438 - sqlalchemy.engine.Engine - INFO - [cached since 4771s ago] (1,)
2025-05-12 23:01:04,440 - app.utils.jwt_callbacks - INFO - User roles: ['admin']
2025-05-12 23:01:04,441 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions, role_permissions 
WHERE ? = role_permissions.role_id AND permissions.id = role_permissions.permission_id
2025-05-12 23:01:04,442 - sqlalchemy.engine.Engine - INFO - [cached since 4775s ago] (1,)
2025-05-12 23:01:04,444 - app.utils.jwt_callbacks - INFO - User permissions: ['manage_users', 'manage_roles', 'manage_all_projects', 'manage_project', 'manage_all_tasks', 'manage_task', 'view_project', 'view_task', 'manage_resources', 'manage_risks', 'view_reports', 'create_task', 'assign_task', 'change_project_status', 'change_task_status', 'create_project']
2025-05-12 23:01:04,450 - app.utils.jwt_callbacks - INFO - Checking if token 7bf5fc05-1a66-4438-8b8f-45bd472b399d is in blocklist
2025-05-12 23:01:04,453 - sqlalchemy.engine.Engine - INFO - SELECT token_blacklist.id AS token_blacklist_id, token_blacklist.jti AS token_blacklist_jti, token_blacklist.token_type AS token_blacklist_token_type, token_blacklist.user_id AS token_blacklist_user_id, token_blacklist.revoked_at AS token_blacklist_revoked_at, token_blacklist.expires_at AS token_blacklist_expires_at 
FROM token_blacklist 
WHERE token_blacklist.jti = ?
 LIMIT ? OFFSET ?
2025-05-12 23:01:04,454 - sqlalchemy.engine.Engine - INFO - [cached since 4771s ago] ('7bf5fc05-1a66-4438-8b8f-45bd472b399d', 1, 0)
2025-05-12 23:01:04,455 - app.utils.jwt_callbacks - INFO - Token 7bf5fc05-1a66-4438-8b8f-45bd472b399d is valid
2025-05-12 23:01:04,456 - app.utils.jwt_callbacks - INFO - Verifying token
2025-05-12 23:01:04,457 - app.utils.jwt_callbacks - INFO - JWT Header: {'alg': 'HS256', 'typ': 'JWT'}
2025-05-12 23:01:04,458 - app.utils.jwt_callbacks - INFO - JWT Data: {'fresh': False, 'iat': 1747062064, 'jti': '7bf5fc05-1a66-4438-8b8f-45bd472b399d', 'type': 'access', 'sub': 1, 'nbf': 1747062064, 'csrf': 'IjM0OTRjZTZmZmUxYzYwYWExMWE0ZmVlMGMzYzE3NDg5NjkxMDg5YTEi.aCINMA.5evT3dCHuJ1HyIPnKfmNAzm4fsg', 'exp': 1747065664, 'aud': 'task_management_system', 'user_claims': {'username': 'admin', 'roles': ['admin'], 'permissions': ['manage_users', 'manage_roles', 'manage_all_projects', 'manage_project', 'manage_all_tasks', 'manage_task', 'view_project', 'view_task', 'manage_resources', 'manage_risks', 'view_reports', 'create_task', 'assign_task', 'change_project_status', 'change_task_status', 'create_project'], 'is_active': True}, 'roles': ['admin'], 'admin': True}
2025-05-12 23:01:04,461 - app.utils.jwt_callbacks - INFO - Token time difference: -0.461009 seconds
2025-05-12 23:01:04,464 - app.utils.jwt_callbacks - INFO - Token verification successful
2025-05-12 23:01:04,466 - app.utils.jwt_callbacks - INFO - Looking up user with identity: 1
2025-05-12 23:01:04,470 - app.utils.jwt_callbacks - INFO - User found: admin
2025-05-12 23:01:04,472 - app.utils.jwt_callbacks - INFO - User roles: ['admin']
2025-05-12 23:01:04,473 - app.utils.jwt_callbacks - INFO - User permissions: ['manage_users', 'manage_roles', 'manage_all_projects', 'manage_project', 'manage_all_tasks', 'manage_task', 'view_project', 'view_task', 'manage_resources', 'manage_risks', 'view_reports', 'create_task', 'assign_task', 'change_project_status', 'change_task_status', 'create_project']
2025-05-12 23:01:04,474 - app - INFO - Dashboard access with user ID: 1
2025-05-12 23:01:04,476 - app - INFO - 用户 admin 是否为管理员: True
2025-05-12 23:01:04,477 - app - INFO - Token found in: cookies
2025-05-12 23:01:04,478 - app - INFO - Dashboard for user admin: roles=['admin'], permissions=['manage_users', 'view_project', 'manage_risks', 'manage_all_tasks', 'assign_task', 'manage_task', 'change_project_status', 'create_project', 'change_task_status', 'manage_roles', 'manage_all_projects', 'manage_resources', 'create_task', 'manage_project', 'view_reports', 'view_task']
2025-05-12 23:01:04,484 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-05-12 23:01:04,485 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 23:01:04] "GET /dashboard HTTP/1.1" 200 -
2025-05-12 23:01:04,532 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 23:01:04] "[36mGET /static/css/style.css HTTP/1.1[0m" 304 -
2025-05-12 23:01:04,533 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 23:01:04] "[36mGET /static/css/bootstrap.min.css HTTP/1.1[0m" 304 -
2025-05-12 23:01:04,534 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 23:01:04] "[36mGET /static/css/bootstrap-icons.css HTTP/1.1[0m" 304 -
2025-05-12 23:01:04,546 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 23:01:04] "[36mGET /static/js/utils.js HTTP/1.1[0m" 304 -
2025-05-12 23:01:04,548 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 23:01:04] "[36mGET /static/js/bootstrap.bundle.min.js HTTP/1.1[0m" 304 -
2025-05-12 23:01:04,551 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 23:01:04] "[36mGET /static/js/auth.js HTTP/1.1[0m" 304 -
2025-05-12 23:01:04,555 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 23:01:04] "[36mGET /static/js/fix-modals.js HTTP/1.1[0m" 304 -
2025-05-12 23:01:04,565 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 23:01:04] "[36mGET /static/js/csrf.js HTTP/1.1[0m" 304 -
2025-05-12 23:01:04,570 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 23:01:04] "[36mGET /static/js/user-profile.js HTTP/1.1[0m" 304 -
2025-05-12 23:01:04,596 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 23:01:04] "[36mGET /static/js/jquery.min.js HTTP/1.1[0m" 304 -
2025-05-12 23:01:04,625 - app - WARNING - 绕过JWT验证: /auth/user_info
2025-05-12 23:01:04,626 - app.utils.jwt_callbacks - INFO - Checking if token 7bf5fc05-1a66-4438-8b8f-45bd472b399d is in blocklist
2025-05-12 23:01:04,627 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-05-12 23:01:04,628 - sqlalchemy.engine.Engine - INFO - SELECT token_blacklist.id AS token_blacklist_id, token_blacklist.jti AS token_blacklist_jti, token_blacklist.token_type AS token_blacklist_token_type, token_blacklist.user_id AS token_blacklist_user_id, token_blacklist.revoked_at AS token_blacklist_revoked_at, token_blacklist.expires_at AS token_blacklist_expires_at 
FROM token_blacklist 
WHERE token_blacklist.jti = ?
 LIMIT ? OFFSET ?
2025-05-12 23:01:04,628 - sqlalchemy.engine.Engine - INFO - [cached since 4771s ago] ('7bf5fc05-1a66-4438-8b8f-45bd472b399d', 1, 0)
2025-05-12 23:01:04,629 - app.utils.jwt_callbacks - INFO - Token 7bf5fc05-1a66-4438-8b8f-45bd472b399d is valid
2025-05-12 23:01:04,630 - app.utils.jwt_callbacks - INFO - Verifying token
2025-05-12 23:01:04,630 - app.utils.jwt_callbacks - INFO - JWT Header: {'alg': 'HS256', 'typ': 'JWT'}
2025-05-12 23:01:04,632 - app.utils.jwt_callbacks - INFO - JWT Data: {'fresh': False, 'iat': 1747062064, 'jti': '7bf5fc05-1a66-4438-8b8f-45bd472b399d', 'type': 'access', 'sub': 1, 'nbf': 1747062064, 'csrf': 'IjM0OTRjZTZmZmUxYzYwYWExMWE0ZmVlMGMzYzE3NDg5NjkxMDg5YTEi.aCINMA.5evT3dCHuJ1HyIPnKfmNAzm4fsg', 'exp': 1747065664, 'aud': 'task_management_system', 'user_claims': {'username': 'admin', 'roles': ['admin'], 'permissions': ['manage_users', 'manage_roles', 'manage_all_projects', 'manage_project', 'manage_all_tasks', 'manage_task', 'view_project', 'view_task', 'manage_resources', 'manage_risks', 'view_reports', 'create_task', 'assign_task', 'change_project_status', 'change_task_status', 'create_project'], 'is_active': True}, 'roles': ['admin'], 'admin': True}
2025-05-12 23:01:04,632 - app.utils.jwt_callbacks - INFO - Token time difference: -0.632108 seconds
2025-05-12 23:01:04,633 - app.utils.jwt_callbacks - INFO - Token verification successful
2025-05-12 23:01:04,634 - app.utils.jwt_callbacks - INFO - Looking up user with identity: 1
2025-05-12 23:01:04,635 - sqlalchemy.engine.Engine - INFO - SELECT users.id AS users_id, users.username AS users_username, users.email AS users_email, users.name AS users_name, users.password_hash AS users_password_hash, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.last_login AS users_last_login 
FROM users 
WHERE users.id = ?
2025-05-12 23:01:04,635 - sqlalchemy.engine.Engine - INFO - [cached since 4771s ago] (1,)
2025-05-12 23:01:04,636 - app.utils.jwt_callbacks - INFO - User found: admin
2025-05-12 23:01:04,637 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 23:01:04] "GET /static/css/fonts/bootstrap-icons.woff2 HTTP/1.1" 200 -
2025-05-12 23:01:04,638 - sqlalchemy.engine.Engine - INFO - SELECT roles.id AS roles_id, roles.name AS roles_name, roles.description AS roles_description, roles.created_at AS roles_created_at 
FROM roles, user_roles 
WHERE ? = user_roles.user_id AND roles.id = user_roles.role_id
2025-05-12 23:01:04,639 - sqlalchemy.engine.Engine - INFO - [cached since 4771s ago] (1,)
2025-05-12 23:01:04,640 - app.utils.jwt_callbacks - INFO - User roles: ['admin']
2025-05-12 23:01:04,641 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions, role_permissions 
WHERE ? = role_permissions.role_id AND permissions.id = role_permissions.permission_id
2025-05-12 23:01:04,642 - sqlalchemy.engine.Engine - INFO - [cached since 4775s ago] (1,)
2025-05-12 23:01:04,644 - app.utils.jwt_callbacks - INFO - User permissions: ['manage_users', 'manage_roles', 'manage_all_projects', 'manage_project', 'manage_all_tasks', 'manage_task', 'view_project', 'view_task', 'manage_resources', 'manage_risks', 'view_reports', 'create_task', 'assign_task', 'change_project_status', 'change_task_status', 'create_project']
2025-05-12 23:01:04,645 - app - INFO - 获取用户信息...
2025-05-12 23:01:04,647 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions 
WHERE permissions.name = ?
 LIMIT ? OFFSET ?
2025-05-12 23:01:04,648 - sqlalchemy.engine.Engine - INFO - [cached since 4775s ago] ('manage_users', 1, 0)
2025-05-12 23:01:04,651 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions 
WHERE permissions.name = ?
 LIMIT ? OFFSET ?
2025-05-12 23:01:04,651 - sqlalchemy.engine.Engine - INFO - [cached since 4775s ago] ('manage_roles', 1, 0)
2025-05-12 23:01:04,652 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions 
WHERE permissions.name = ?
 LIMIT ? OFFSET ?
2025-05-12 23:01:04,653 - sqlalchemy.engine.Engine - INFO - [cached since 4775s ago] ('manage_all_projects', 1, 0)
2025-05-12 23:01:04,654 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions 
WHERE permissions.name = ?
 LIMIT ? OFFSET ?
2025-05-12 23:01:04,656 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 23:01:04] "[36mGET /static/favicon.ico HTTP/1.1[0m" 304 -
2025-05-12 23:01:04,657 - sqlalchemy.engine.Engine - INFO - [cached since 4775s ago] ('manage_project', 1, 0)
2025-05-12 23:01:04,660 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions 
WHERE permissions.name = ?
 LIMIT ? OFFSET ?
2025-05-12 23:01:04,661 - sqlalchemy.engine.Engine - INFO - [cached since 4775s ago] ('manage_all_tasks', 1, 0)
2025-05-12 23:01:04,662 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions 
WHERE permissions.name = ?
 LIMIT ? OFFSET ?
2025-05-12 23:01:04,662 - sqlalchemy.engine.Engine - INFO - [cached since 4775s ago] ('manage_task', 1, 0)
2025-05-12 23:01:04,663 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions 
WHERE permissions.name = ?
 LIMIT ? OFFSET ?
2025-05-12 23:01:04,664 - sqlalchemy.engine.Engine - INFO - [cached since 4775s ago] ('view_project', 1, 0)
2025-05-12 23:01:04,665 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions 
WHERE permissions.name = ?
 LIMIT ? OFFSET ?
2025-05-12 23:01:04,666 - sqlalchemy.engine.Engine - INFO - [cached since 4775s ago] ('view_task', 1, 0)
2025-05-12 23:01:04,667 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions 
WHERE permissions.name = ?
 LIMIT ? OFFSET ?
2025-05-12 23:01:04,667 - sqlalchemy.engine.Engine - INFO - [cached since 4775s ago] ('manage_resources', 1, 0)
2025-05-12 23:01:04,668 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions 
WHERE permissions.name = ?
 LIMIT ? OFFSET ?
2025-05-12 23:01:04,668 - sqlalchemy.engine.Engine - INFO - [cached since 4775s ago] ('manage_risks', 1, 0)
2025-05-12 23:01:04,669 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions 
WHERE permissions.name = ?
 LIMIT ? OFFSET ?
2025-05-12 23:01:04,669 - sqlalchemy.engine.Engine - INFO - [cached since 4775s ago] ('view_reports', 1, 0)
2025-05-12 23:01:04,671 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions 
WHERE permissions.name = ?
 LIMIT ? OFFSET ?
2025-05-12 23:01:04,671 - sqlalchemy.engine.Engine - INFO - [cached since 4775s ago] ('create_task', 1, 0)
2025-05-12 23:01:04,673 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions 
WHERE permissions.name = ?
 LIMIT ? OFFSET ?
2025-05-12 23:01:04,673 - sqlalchemy.engine.Engine - INFO - [cached since 4775s ago] ('create_project', 1, 0)
2025-05-12 23:01:04,675 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions 
WHERE permissions.name = ?
 LIMIT ? OFFSET ?
2025-05-12 23:01:04,675 - sqlalchemy.engine.Engine - INFO - [cached since 4775s ago] ('assign_task', 1, 0)
2025-05-12 23:01:04,677 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions 
WHERE permissions.name = ?
 LIMIT ? OFFSET ?
2025-05-12 23:01:04,677 - sqlalchemy.engine.Engine - INFO - [cached since 4775s ago] ('change_project_status', 1, 0)
2025-05-12 23:01:04,679 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions 
WHERE permissions.name = ?
 LIMIT ? OFFSET ?
2025-05-12 23:01:04,679 - sqlalchemy.engine.Engine - INFO - [cached since 4775s ago] ('change_task_status', 1, 0)
2025-05-12 23:01:04,682 - app - INFO - ================== 用户信息API详情 ==================
2025-05-12 23:01:04,683 - app - INFO - 用户ID: 1
2025-05-12 23:01:04,683 - app - INFO - 用户名: admin
2025-05-12 23:01:04,684 - app - INFO - 用户角色: ['admin']
2025-05-12 23:01:04,684 - app - INFO - 是否admin: True
2025-05-12 23:01:04,685 - app - INFO - JWT声明: {'fresh': False, 'iat': 1747062064, 'jti': '7bf5fc05-1a66-4438-8b8f-45bd472b399d', 'type': 'access', 'sub': 1, 'nbf': 1747062064, 'csrf': 'IjM0OTRjZTZmZmUxYzYwYWExMWE0ZmVlMGMzYzE3NDg5NjkxMDg5YTEi.aCINMA.5evT3dCHuJ1HyIPnKfmNAzm4fsg', 'exp': 1747065664, 'aud': 'task_management_system', 'user_claims': {'username': 'admin', 'roles': ['admin'], 'permissions': ['manage_users', 'manage_roles', 'manage_all_projects', 'manage_project', 'manage_all_tasks', 'manage_task', 'view_project', 'view_task', 'manage_resources', 'manage_risks', 'view_reports', 'create_task', 'assign_task', 'change_project_status', 'change_task_status', 'create_project'], 'is_active': True}, 'roles': ['admin'], 'admin': True}
2025-05-12 23:01:04,686 - app - INFO - 确认admin用户身份，更新角色: ['admin']
2025-05-12 23:01:04,687 - app - INFO - 成功获取用户 admin 的信息
2025-05-12 23:01:04,688 - app - INFO - ================== 用户信息API结束 ==================
2025-05-12 23:01:04,689 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-05-12 23:01:04,690 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 23:01:04] "GET /auth/user_info?_=1747062064622&bypass_jwt=true HTTP/1.1" 200 -
2025-05-12 23:01:06,229 - app - WARNING - 绕过JWT验证: /projects
2025-05-12 23:01:06,230 - app.utils.jwt_callbacks - INFO - Checking if token 7bf5fc05-1a66-4438-8b8f-45bd472b399d is in blocklist
2025-05-12 23:01:06,232 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-05-12 23:01:06,232 - sqlalchemy.engine.Engine - INFO - SELECT token_blacklist.id AS token_blacklist_id, token_blacklist.jti AS token_blacklist_jti, token_blacklist.token_type AS token_blacklist_token_type, token_blacklist.user_id AS token_blacklist_user_id, token_blacklist.revoked_at AS token_blacklist_revoked_at, token_blacklist.expires_at AS token_blacklist_expires_at 
FROM token_blacklist 
WHERE token_blacklist.jti = ?
 LIMIT ? OFFSET ?
2025-05-12 23:01:06,233 - sqlalchemy.engine.Engine - INFO - [cached since 4773s ago] ('7bf5fc05-1a66-4438-8b8f-45bd472b399d', 1, 0)
2025-05-12 23:01:06,234 - app.utils.jwt_callbacks - INFO - Token 7bf5fc05-1a66-4438-8b8f-45bd472b399d is valid
2025-05-12 23:01:06,234 - app.utils.jwt_callbacks - INFO - Verifying token
2025-05-12 23:01:06,235 - app.utils.jwt_callbacks - INFO - JWT Header: {'alg': 'HS256', 'typ': 'JWT'}
2025-05-12 23:01:06,236 - app.utils.jwt_callbacks - INFO - JWT Data: {'fresh': False, 'iat': 1747062064, 'jti': '7bf5fc05-1a66-4438-8b8f-45bd472b399d', 'type': 'access', 'sub': 1, 'nbf': 1747062064, 'csrf': 'IjM0OTRjZTZmZmUxYzYwYWExMWE0ZmVlMGMzYzE3NDg5NjkxMDg5YTEi.aCINMA.5evT3dCHuJ1HyIPnKfmNAzm4fsg', 'exp': 1747065664, 'aud': 'task_management_system', 'user_claims': {'username': 'admin', 'roles': ['admin'], 'permissions': ['manage_users', 'manage_roles', 'manage_all_projects', 'manage_project', 'manage_all_tasks', 'manage_task', 'view_project', 'view_task', 'manage_resources', 'manage_risks', 'view_reports', 'create_task', 'assign_task', 'change_project_status', 'change_task_status', 'create_project'], 'is_active': True}, 'roles': ['admin'], 'admin': True}
2025-05-12 23:01:06,237 - app.utils.jwt_callbacks - INFO - Token time difference: -2.237942 seconds
2025-05-12 23:01:06,239 - app.utils.jwt_callbacks - INFO - Token verification successful
2025-05-12 23:01:06,239 - app.utils.jwt_callbacks - INFO - Looking up user with identity: 1
2025-05-12 23:01:06,241 - sqlalchemy.engine.Engine - INFO - SELECT users.id AS users_id, users.username AS users_username, users.email AS users_email, users.name AS users_name, users.password_hash AS users_password_hash, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.last_login AS users_last_login 
FROM users 
WHERE users.id = ?
2025-05-12 23:01:06,241 - sqlalchemy.engine.Engine - INFO - [cached since 4772s ago] (1,)
2025-05-12 23:01:06,242 - app.utils.jwt_callbacks - INFO - User found: admin
2025-05-12 23:01:06,244 - sqlalchemy.engine.Engine - INFO - SELECT roles.id AS roles_id, roles.name AS roles_name, roles.description AS roles_description, roles.created_at AS roles_created_at 
FROM roles, user_roles 
WHERE ? = user_roles.user_id AND roles.id = user_roles.role_id
2025-05-12 23:01:06,244 - sqlalchemy.engine.Engine - INFO - [cached since 4773s ago] (1,)
2025-05-12 23:01:06,245 - app.utils.jwt_callbacks - INFO - User roles: ['admin']
2025-05-12 23:01:06,247 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions, role_permissions 
WHERE ? = role_permissions.role_id AND permissions.id = role_permissions.permission_id
2025-05-12 23:01:06,247 - sqlalchemy.engine.Engine - INFO - [cached since 4777s ago] (1,)
2025-05-12 23:01:06,249 - app.utils.jwt_callbacks - INFO - User permissions: ['manage_users', 'manage_roles', 'manage_all_projects', 'manage_project', 'manage_all_tasks', 'manage_task', 'view_project', 'view_task', 'manage_resources', 'manage_risks', 'view_reports', 'create_task', 'assign_task', 'change_project_status', 'change_task_status', 'create_project']
2025-05-12 23:01:06,249 - app.routes.main - INFO - JWT bypass enabled for projects - Using test user
2025-05-12 23:01:06,250 - sqlalchemy.engine.Engine - INFO - SELECT projects.id AS projects_id, projects.name AS projects_name, projects.description AS projects_description, projects.status AS projects_status, projects.start_date AS projects_start_date, projects.end_date AS projects_end_date, projects.progress AS projects_progress, projects.created_at AS projects_created_at, projects.updated_at AS projects_updated_at, projects.manager_id AS projects_manager_id, projects.owner_id AS projects_owner_id 
FROM projects
2025-05-12 23:01:06,250 - sqlalchemy.engine.Engine - INFO - [cached since 3811s ago] ()
2025-05-12 23:01:06,253 - sqlalchemy.engine.Engine - INFO - SELECT users.id AS users_id, users.username AS users_username, users.email AS users_email, users.name AS users_name, users.password_hash AS users_password_hash, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.last_login AS users_last_login 
FROM users 
WHERE users.id = ?
2025-05-12 23:01:06,254 - sqlalchemy.engine.Engine - INFO - [cached since 4773s ago] (3,)
2025-05-12 23:01:06,255 - sqlalchemy.engine.Engine - INFO - SELECT users.id AS users_id, users.username AS users_username, users.email AS users_email, users.name AS users_name, users.password_hash AS users_password_hash, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.last_login AS users_last_login 
FROM users 
WHERE users.id = ?
2025-05-12 23:01:06,256 - sqlalchemy.engine.Engine - INFO - [cached since 4773s ago] (5,)
2025-05-12 23:01:06,258 - sqlalchemy.engine.Engine - INFO - SELECT users.id AS users_id, users.username AS users_username, users.email AS users_email, users.name AS users_name, users.password_hash AS users_password_hash, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.last_login AS users_last_login 
FROM users 
WHERE users.id = ?
2025-05-12 23:01:06,258 - sqlalchemy.engine.Engine - INFO - [cached since 4773s ago] (8,)
2025-05-12 23:01:06,260 - sqlalchemy.engine.Engine - INFO - SELECT users.id AS users_id, users.username AS users_username, users.email AS users_email, users.name AS users_name, users.password_hash AS users_password_hash, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.last_login AS users_last_login 
FROM users 
WHERE users.id = ?
2025-05-12 23:01:06,260 - sqlalchemy.engine.Engine - INFO - [cached since 4773s ago] (5,)
2025-05-12 23:01:06,262 - sqlalchemy.engine.Engine - INFO - SELECT users.id AS users_id, users.username AS users_username, users.email AS users_email, users.name AS users_name, users.password_hash AS users_password_hash, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.last_login AS users_last_login 
FROM users 
WHERE users.id = ?
2025-05-12 23:01:06,263 - sqlalchemy.engine.Engine - INFO - [cached since 4773s ago] (9,)
2025-05-12 23:01:06,266 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-05-12 23:01:06,266 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 23:01:06] "GET /projects?bypass_jwt=true HTTP/1.1" 200 -
2025-05-12 23:01:06,294 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 23:01:06] "[36mGET /static/css/bootstrap.min.css HTTP/1.1[0m" 304 -
2025-05-12 23:01:06,295 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 23:01:06] "[36mGET /static/css/bootstrap-icons.css HTTP/1.1[0m" 304 -
2025-05-12 23:01:06,297 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 23:01:06] "[36mGET /static/css/style.css HTTP/1.1[0m" 304 -
2025-05-12 23:01:06,305 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 23:01:06] "[36mGET /static/js/jquery.min.js HTTP/1.1[0m" 304 -
2025-05-12 23:01:06,308 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 23:01:06] "[36mGET /static/js/bootstrap.bundle.min.js HTTP/1.1[0m" 304 -
2025-05-12 23:01:06,309 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 23:01:06] "[36mGET /static/js/utils.js HTTP/1.1[0m" 304 -
2025-05-12 23:01:06,311 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 23:01:06] "[36mGET /static/js/auth.js HTTP/1.1[0m" 304 -
2025-05-12 23:01:06,318 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 23:01:06] "[36mGET /static/js/fix-modals.js HTTP/1.1[0m" 304 -
2025-05-12 23:01:06,320 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 23:01:06] "GET /static/css/frappe-gantt.css HTTP/1.1" 200 -
2025-05-12 23:01:06,320 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 23:01:06] "[36mGET /static/js/csrf.js HTTP/1.1[0m" 304 -
2025-05-12 23:01:06,323 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 23:01:06] "[36mGET /static/js/user-profile.js HTTP/1.1[0m" 304 -
2025-05-12 23:01:06,347 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 23:01:06] "GET /static/js/frappe-gantt.min.js HTTP/1.1" 200 -
2025-05-12 23:01:06,360 - app - WARNING - 绕过JWT验证: /api/global/users
2025-05-12 23:01:06,361 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 23:01:06] "[33mGET /api/global/users?bypass_jwt=true&_=1747062066355 HTTP/1.1[0m" 404 -
2025-05-12 23:01:06,366 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 23:01:06] "[36mGET /static/favicon.ico HTTP/1.1[0m" 304 -
2025-05-12 23:01:06,371 - app - WARNING - 绕过JWT验证: /api/project-managers
2025-05-12 23:01:06,372 - app - INFO - 直接访问项目经理列表API
2025-05-12 23:01:06,373 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-05-12 23:01:06,373 - sqlalchemy.engine.Engine - INFO - SELECT users.id AS users_id, users.username AS users_username, users.email AS users_email, users.name AS users_name, users.password_hash AS users_password_hash, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.last_login AS users_last_login 
FROM users 
WHERE users.is_active = 1
2025-05-12 23:01:06,374 - sqlalchemy.engine.Engine - INFO - [cached since 3811s ago] ()
2025-05-12 23:01:06,375 - app - INFO - 已找到 9 个活跃用户用于项目经理选择
2025-05-12 23:01:06,376 - app - INFO - 返回 9 个可选的项目负责人
2025-05-12 23:01:06,378 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-05-12 23:01:06,379 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 23:01:06] "GET /api/project-managers?bypass_jwt=true&_=1747062066364 HTTP/1.1" 200 -
2025-05-12 23:01:08,778 - app - WARNING - 绕过JWT验证: /api/global/users
2025-05-12 23:01:08,779 - app - WARNING - 绕过JWT验证: /api/global/users
2025-05-12 23:01:08,780 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 23:01:08] "[33mGET /api/global/users?bypass_jwt=true&_=1747062068773 HTTP/1.1[0m" 404 -
2025-05-12 23:01:08,782 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 23:01:08] "[33mGET /api/global/users?bypass_jwt=true&_=1747062068774 HTTP/1.1[0m" 404 -
2025-05-12 23:01:08,793 - app - WARNING - 绕过JWT验证: /api/project-managers
2025-05-12 23:01:08,795 - app - INFO - 直接访问项目经理列表API
2025-05-12 23:01:08,797 - app - WARNING - 绕过JWT验证: /api/project-managers
2025-05-12 23:01:08,799 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-05-12 23:01:08,799 - app - INFO - 直接访问项目经理列表API
2025-05-12 23:01:08,801 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-05-12 23:01:08,802 - sqlalchemy.engine.Engine - INFO - SELECT users.id AS users_id, users.username AS users_username, users.email AS users_email, users.name AS users_name, users.password_hash AS users_password_hash, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.last_login AS users_last_login 
FROM users 
WHERE users.is_active = 1
2025-05-12 23:01:08,802 - sqlalchemy.engine.Engine - INFO - SELECT users.id AS users_id, users.username AS users_username, users.email AS users_email, users.name AS users_name, users.password_hash AS users_password_hash, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.last_login AS users_last_login 
FROM users 
WHERE users.is_active = 1
2025-05-12 23:01:08,803 - sqlalchemy.engine.Engine - INFO - [cached since 3813s ago] ()
2025-05-12 23:01:08,803 - sqlalchemy.engine.Engine - INFO - [cached since 3813s ago] ()
2025-05-12 23:01:08,805 - app - INFO - 已找到 9 个活跃用户用于项目经理选择
2025-05-12 23:01:08,806 - app - INFO - 已找到 9 个活跃用户用于项目经理选择
2025-05-12 23:01:08,807 - app - INFO - 返回 9 个可选的项目负责人
2025-05-12 23:01:08,808 - app - INFO - 返回 9 个可选的项目负责人
2025-05-12 23:01:08,811 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-05-12 23:01:08,813 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-05-12 23:01:08,813 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 23:01:08] "GET /api/project-managers?bypass_jwt=true&_=1747062068792 HTTP/1.1" 200 -
2025-05-12 23:01:08,814 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 23:01:08] "GET /api/project-managers?bypass_jwt=true&_=1747062068787 HTTP/1.1" 200 -
2025-05-12 23:01:20,662 - app - WARNING - 绕过JWT验证: /api/projects
2025-05-12 23:01:20,663 - app - WARNING - 绕过JWT验证: /api/projects
2025-05-12 23:01:20,665 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 23:01:20] "[31m[1mPOST /api/projects?bypass_jwt=true&_=1747062080658 HTTP/1.1[0m" 405 -
2025-05-12 23:01:20,666 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 23:01:20] "[31m[1mPOST /api/projects?bypass_jwt=true&_=1747062080659 HTTP/1.1[0m" 405 -
2025-05-12 23:01:50,619 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 23:01:50] "[36mGET /static/css/bootstrap.min.css HTTP/1.1[0m" 304 -
2025-05-12 23:01:50,621 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 23:01:50] "[36mGET /static/css/bootstrap-icons.css HTTP/1.1[0m" 304 -
2025-05-12 23:01:50,622 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 23:01:50] "[36mGET /static/css/style.css HTTP/1.1[0m" 304 -
2025-05-12 23:01:50,623 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 23:01:50] "[36mGET /static/css/frappe-gantt.css HTTP/1.1[0m" 304 -
2025-05-12 23:01:50,629 - app.utils.jwt_callbacks - INFO - Checking if token 7bf5fc05-1a66-4438-8b8f-45bd472b399d is in blocklist
2025-05-12 23:01:50,630 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-05-12 23:01:50,630 - sqlalchemy.engine.Engine - INFO - SELECT token_blacklist.id AS token_blacklist_id, token_blacklist.jti AS token_blacklist_jti, token_blacklist.token_type AS token_blacklist_token_type, token_blacklist.user_id AS token_blacklist_user_id, token_blacklist.revoked_at AS token_blacklist_revoked_at, token_blacklist.expires_at AS token_blacklist_expires_at 
FROM token_blacklist 
WHERE token_blacklist.jti = ?
 LIMIT ? OFFSET ?
2025-05-12 23:01:50,631 - sqlalchemy.engine.Engine - INFO - [cached since 4817s ago] ('7bf5fc05-1a66-4438-8b8f-45bd472b399d', 1, 0)
2025-05-12 23:01:50,631 - app.utils.jwt_callbacks - INFO - Token 7bf5fc05-1a66-4438-8b8f-45bd472b399d is valid
2025-05-12 23:01:50,631 - app.utils.jwt_callbacks - INFO - Verifying token
2025-05-12 23:01:50,632 - app.utils.jwt_callbacks - INFO - JWT Header: {'alg': 'HS256', 'typ': 'JWT'}
2025-05-12 23:01:50,632 - app.utils.jwt_callbacks - INFO - JWT Data: {'fresh': False, 'iat': 1747062064, 'jti': '7bf5fc05-1a66-4438-8b8f-45bd472b399d', 'type': 'access', 'sub': 1, 'nbf': 1747062064, 'csrf': 'IjM0OTRjZTZmZmUxYzYwYWExMWE0ZmVlMGMzYzE3NDg5NjkxMDg5YTEi.aCINMA.5evT3dCHuJ1HyIPnKfmNAzm4fsg', 'exp': 1747065664, 'aud': 'task_management_system', 'user_claims': {'username': 'admin', 'roles': ['admin'], 'permissions': ['manage_users', 'manage_roles', 'manage_all_projects', 'manage_project', 'manage_all_tasks', 'manage_task', 'view_project', 'view_task', 'manage_resources', 'manage_risks', 'view_reports', 'create_task', 'assign_task', 'change_project_status', 'change_task_status', 'create_project'], 'is_active': True}, 'roles': ['admin'], 'admin': True}
2025-05-12 23:01:50,633 - app.utils.jwt_callbacks - INFO - Token time difference: -46.633169 seconds
2025-05-12 23:01:50,633 - app.utils.jwt_callbacks - INFO - Token verification successful
2025-05-12 23:01:50,633 - app.utils.jwt_callbacks - INFO - Looking up user with identity: 1
2025-05-12 23:01:50,634 - sqlalchemy.engine.Engine - INFO - SELECT users.id AS users_id, users.username AS users_username, users.email AS users_email, users.name AS users_name, users.password_hash AS users_password_hash, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.last_login AS users_last_login 
FROM users 
WHERE users.id = ?
2025-05-12 23:01:50,635 - sqlalchemy.engine.Engine - INFO - [cached since 4817s ago] (1,)
2025-05-12 23:01:50,636 - app.utils.jwt_callbacks - INFO - User found: admin
2025-05-12 23:01:50,636 - sqlalchemy.engine.Engine - INFO - SELECT roles.id AS roles_id, roles.name AS roles_name, roles.description AS roles_description, roles.created_at AS roles_created_at 
FROM roles, user_roles 
WHERE ? = user_roles.user_id AND roles.id = user_roles.role_id
2025-05-12 23:01:50,637 - sqlalchemy.engine.Engine - INFO - [cached since 4817s ago] (1,)
2025-05-12 23:01:50,637 - app.utils.jwt_callbacks - INFO - User roles: ['admin']
2025-05-12 23:01:50,638 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions, role_permissions 
WHERE ? = role_permissions.role_id AND permissions.id = role_permissions.permission_id
2025-05-12 23:01:50,639 - sqlalchemy.engine.Engine - INFO - [cached since 4821s ago] (1,)
2025-05-12 23:01:50,639 - app.utils.jwt_callbacks - INFO - User permissions: ['manage_users', 'manage_roles', 'manage_all_projects', 'manage_project', 'manage_all_tasks', 'manage_task', 'view_project', 'view_task', 'manage_resources', 'manage_risks', 'view_reports', 'create_task', 'assign_task', 'change_project_status', 'change_task_status', 'create_project']
2025-05-12 23:01:50,640 - app.utils.jwt_callbacks - INFO - Checking if token 7bf5fc05-1a66-4438-8b8f-45bd472b399d is in blocklist
2025-05-12 23:01:50,641 - sqlalchemy.engine.Engine - INFO - SELECT token_blacklist.id AS token_blacklist_id, token_blacklist.jti AS token_blacklist_jti, token_blacklist.token_type AS token_blacklist_token_type, token_blacklist.user_id AS token_blacklist_user_id, token_blacklist.revoked_at AS token_blacklist_revoked_at, token_blacklist.expires_at AS token_blacklist_expires_at 
FROM token_blacklist 
WHERE token_blacklist.jti = ?
 LIMIT ? OFFSET ?
2025-05-12 23:01:50,641 - sqlalchemy.engine.Engine - INFO - [cached since 4817s ago] ('7bf5fc05-1a66-4438-8b8f-45bd472b399d', 1, 0)
2025-05-12 23:01:50,641 - app.utils.jwt_callbacks - INFO - Token 7bf5fc05-1a66-4438-8b8f-45bd472b399d is valid
2025-05-12 23:01:50,642 - app.utils.jwt_callbacks - INFO - Verifying token
2025-05-12 23:01:50,642 - app.utils.jwt_callbacks - INFO - JWT Header: {'alg': 'HS256', 'typ': 'JWT'}
2025-05-12 23:01:50,642 - app.utils.jwt_callbacks - INFO - JWT Data: {'fresh': False, 'iat': 1747062064, 'jti': '7bf5fc05-1a66-4438-8b8f-45bd472b399d', 'type': 'access', 'sub': 1, 'nbf': 1747062064, 'csrf': 'IjM0OTRjZTZmZmUxYzYwYWExMWE0ZmVlMGMzYzE3NDg5NjkxMDg5YTEi.aCINMA.5evT3dCHuJ1HyIPnKfmNAzm4fsg', 'exp': 1747065664, 'aud': 'task_management_system', 'user_claims': {'username': 'admin', 'roles': ['admin'], 'permissions': ['manage_users', 'manage_roles', 'manage_all_projects', 'manage_project', 'manage_all_tasks', 'manage_task', 'view_project', 'view_task', 'manage_resources', 'manage_risks', 'view_reports', 'create_task', 'assign_task', 'change_project_status', 'change_task_status', 'create_project'], 'is_active': True}, 'roles': ['admin'], 'admin': True}
2025-05-12 23:01:50,643 - app.utils.jwt_callbacks - INFO - Token time difference: -46.643925 seconds
2025-05-12 23:01:50,643 - app.utils.jwt_callbacks - INFO - Token verification successful
2025-05-12 23:01:50,644 - app.utils.jwt_callbacks - INFO - Looking up user with identity: 1
2025-05-12 23:01:50,645 - app.utils.jwt_callbacks - INFO - User found: admin
2025-05-12 23:01:50,645 - app.utils.jwt_callbacks - INFO - User roles: ['admin']
2025-05-12 23:01:50,645 - app.utils.jwt_callbacks - INFO - User permissions: ['manage_users', 'manage_roles', 'manage_all_projects', 'manage_project', 'manage_all_tasks', 'manage_task', 'view_project', 'view_task', 'manage_resources', 'manage_risks', 'view_reports', 'create_task', 'assign_task', 'change_project_status', 'change_task_status', 'create_project']
2025-05-12 23:01:50,646 - app - INFO - 用户已认证，重定向到仪表板页面: /.well-known/appspecific/com.chrome.devtools.json
2025-05-12 23:01:50,646 - app - INFO - 设置重定向跟踪: 路径=/.well-known/appspecific/com.chrome.devtools.json, 计数=1
2025-05-12 23:01:50,648 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-05-12 23:01:50,648 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 23:01:50] "[32mGET /.well-known/appspecific/com.chrome.devtools.json HTTP/1.1[0m" 302 -
2025-05-12 23:01:50,651 - app.utils.jwt_callbacks - INFO - Checking if token 7bf5fc05-1a66-4438-8b8f-45bd472b399d is in blocklist
2025-05-12 23:01:50,652 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-05-12 23:01:50,653 - sqlalchemy.engine.Engine - INFO - SELECT token_blacklist.id AS token_blacklist_id, token_blacklist.jti AS token_blacklist_jti, token_blacklist.token_type AS token_blacklist_token_type, token_blacklist.user_id AS token_blacklist_user_id, token_blacklist.revoked_at AS token_blacklist_revoked_at, token_blacklist.expires_at AS token_blacklist_expires_at 
FROM token_blacklist 
WHERE token_blacklist.jti = ?
 LIMIT ? OFFSET ?
2025-05-12 23:01:50,653 - sqlalchemy.engine.Engine - INFO - [cached since 4817s ago] ('7bf5fc05-1a66-4438-8b8f-45bd472b399d', 1, 0)
2025-05-12 23:01:50,653 - app.utils.jwt_callbacks - INFO - Token 7bf5fc05-1a66-4438-8b8f-45bd472b399d is valid
2025-05-12 23:01:50,654 - app.utils.jwt_callbacks - INFO - Verifying token
2025-05-12 23:01:50,654 - app.utils.jwt_callbacks - INFO - JWT Header: {'alg': 'HS256', 'typ': 'JWT'}
2025-05-12 23:01:50,654 - app.utils.jwt_callbacks - INFO - JWT Data: {'fresh': False, 'iat': 1747062064, 'jti': '7bf5fc05-1a66-4438-8b8f-45bd472b399d', 'type': 'access', 'sub': 1, 'nbf': 1747062064, 'csrf': 'IjM0OTRjZTZmZmUxYzYwYWExMWE0ZmVlMGMzYzE3NDg5NjkxMDg5YTEi.aCINMA.5evT3dCHuJ1HyIPnKfmNAzm4fsg', 'exp': 1747065664, 'aud': 'task_management_system', 'user_claims': {'username': 'admin', 'roles': ['admin'], 'permissions': ['manage_users', 'manage_roles', 'manage_all_projects', 'manage_project', 'manage_all_tasks', 'manage_task', 'view_project', 'view_task', 'manage_resources', 'manage_risks', 'view_reports', 'create_task', 'assign_task', 'change_project_status', 'change_task_status', 'create_project'], 'is_active': True}, 'roles': ['admin'], 'admin': True}
2025-05-12 23:01:50,655 - app.utils.jwt_callbacks - INFO - Token time difference: -46.65562 seconds
2025-05-12 23:01:50,655 - app.utils.jwt_callbacks - INFO - Token verification successful
2025-05-12 23:01:50,655 - app.utils.jwt_callbacks - INFO - Looking up user with identity: 1
2025-05-12 23:01:50,656 - sqlalchemy.engine.Engine - INFO - SELECT users.id AS users_id, users.username AS users_username, users.email AS users_email, users.name AS users_name, users.password_hash AS users_password_hash, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.last_login AS users_last_login 
FROM users 
WHERE users.id = ?
2025-05-12 23:01:50,656 - sqlalchemy.engine.Engine - INFO - [cached since 4817s ago] (1,)
2025-05-12 23:01:50,657 - app.utils.jwt_callbacks - INFO - User found: admin
2025-05-12 23:01:50,658 - sqlalchemy.engine.Engine - INFO - SELECT roles.id AS roles_id, roles.name AS roles_name, roles.description AS roles_description, roles.created_at AS roles_created_at 
FROM roles, user_roles 
WHERE ? = user_roles.user_id AND roles.id = user_roles.role_id
2025-05-12 23:01:50,658 - sqlalchemy.engine.Engine - INFO - [cached since 4817s ago] (1,)
2025-05-12 23:01:50,658 - app.utils.jwt_callbacks - INFO - User roles: ['admin']
2025-05-12 23:01:50,659 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions, role_permissions 
WHERE ? = role_permissions.role_id AND permissions.id = role_permissions.permission_id
2025-05-12 23:01:50,659 - sqlalchemy.engine.Engine - INFO - [cached since 4821s ago] (1,)
2025-05-12 23:01:50,659 - app.utils.jwt_callbacks - INFO - User permissions: ['manage_users', 'manage_roles', 'manage_all_projects', 'manage_project', 'manage_all_tasks', 'manage_task', 'view_project', 'view_task', 'manage_resources', 'manage_risks', 'view_reports', 'create_task', 'assign_task', 'change_project_status', 'change_task_status', 'create_project']
2025-05-12 23:01:50,662 - app.utils.jwt_callbacks - INFO - Checking if token 7bf5fc05-1a66-4438-8b8f-45bd472b399d is in blocklist
2025-05-12 23:01:50,663 - sqlalchemy.engine.Engine - INFO - SELECT token_blacklist.id AS token_blacklist_id, token_blacklist.jti AS token_blacklist_jti, token_blacklist.token_type AS token_blacklist_token_type, token_blacklist.user_id AS token_blacklist_user_id, token_blacklist.revoked_at AS token_blacklist_revoked_at, token_blacklist.expires_at AS token_blacklist_expires_at 
FROM token_blacklist 
WHERE token_blacklist.jti = ?
 LIMIT ? OFFSET ?
2025-05-12 23:01:50,663 - sqlalchemy.engine.Engine - INFO - [cached since 4817s ago] ('7bf5fc05-1a66-4438-8b8f-45bd472b399d', 1, 0)
2025-05-12 23:01:50,664 - app.utils.jwt_callbacks - INFO - Token 7bf5fc05-1a66-4438-8b8f-45bd472b399d is valid
2025-05-12 23:01:50,664 - app.utils.jwt_callbacks - INFO - Verifying token
2025-05-12 23:01:50,665 - app.utils.jwt_callbacks - INFO - JWT Header: {'alg': 'HS256', 'typ': 'JWT'}
2025-05-12 23:01:50,665 - app.utils.jwt_callbacks - INFO - JWT Data: {'fresh': False, 'iat': 1747062064, 'jti': '7bf5fc05-1a66-4438-8b8f-45bd472b399d', 'type': 'access', 'sub': 1, 'nbf': 1747062064, 'csrf': 'IjM0OTRjZTZmZmUxYzYwYWExMWE0ZmVlMGMzYzE3NDg5NjkxMDg5YTEi.aCINMA.5evT3dCHuJ1HyIPnKfmNAzm4fsg', 'exp': 1747065664, 'aud': 'task_management_system', 'user_claims': {'username': 'admin', 'roles': ['admin'], 'permissions': ['manage_users', 'manage_roles', 'manage_all_projects', 'manage_project', 'manage_all_tasks', 'manage_task', 'view_project', 'view_task', 'manage_resources', 'manage_risks', 'view_reports', 'create_task', 'assign_task', 'change_project_status', 'change_task_status', 'create_project'], 'is_active': True}, 'roles': ['admin'], 'admin': True}
2025-05-12 23:01:50,665 - app.utils.jwt_callbacks - INFO - Token time difference: -46.665078 seconds
2025-05-12 23:01:50,666 - app.utils.jwt_callbacks - INFO - Token verification successful
2025-05-12 23:01:50,666 - app.utils.jwt_callbacks - INFO - Looking up user with identity: 1
2025-05-12 23:01:50,666 - app.utils.jwt_callbacks - INFO - User found: admin
2025-05-12 23:01:50,666 - app.utils.jwt_callbacks - INFO - User roles: ['admin']
2025-05-12 23:01:50,667 - app.utils.jwt_callbacks - INFO - User permissions: ['manage_users', 'manage_roles', 'manage_all_projects', 'manage_project', 'manage_all_tasks', 'manage_task', 'view_project', 'view_task', 'manage_resources', 'manage_risks', 'view_reports', 'create_task', 'assign_task', 'change_project_status', 'change_task_status', 'create_project']
2025-05-12 23:01:50,667 - app - INFO - Dashboard access with user ID: 1
2025-05-12 23:01:50,667 - app - INFO - 用户 admin 是否为管理员: True
2025-05-12 23:01:50,668 - app - INFO - Token found in: cookies
2025-05-12 23:01:50,668 - app - INFO - Dashboard for user admin: roles=['admin'], permissions=['manage_users', 'view_project', 'manage_risks', 'manage_all_tasks', 'assign_task', 'manage_task', 'change_project_status', 'create_project', 'change_task_status', 'manage_roles', 'manage_all_projects', 'manage_resources', 'create_task', 'manage_project', 'view_reports', 'view_task']
2025-05-12 23:01:50,669 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-05-12 23:01:50,669 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 23:01:50] "GET /dashboard HTTP/1.1" 200 -
2025-05-12 23:01:50,716 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 23:01:50] "GET /static/css/bootstrap.min.css.map HTTP/1.1" 200 -
2025-05-12 23:01:50,848 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 23:01:50] "GET /static/js/bootstrap.bundle.min.js.map HTTP/1.1" 200 -
2025-05-12 23:12:30,933 - app.utils.jwt_callbacks - INFO - Checking if token 7bf5fc05-1a66-4438-8b8f-45bd472b399d is in blocklist
2025-05-12 23:12:30,935 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-05-12 23:12:30,935 - sqlalchemy.engine.Engine - INFO - SELECT token_blacklist.id AS token_blacklist_id, token_blacklist.jti AS token_blacklist_jti, token_blacklist.token_type AS token_blacklist_token_type, token_blacklist.user_id AS token_blacklist_user_id, token_blacklist.revoked_at AS token_blacklist_revoked_at, token_blacklist.expires_at AS token_blacklist_expires_at 
FROM token_blacklist 
WHERE token_blacklist.jti = ?
 LIMIT ? OFFSET ?
2025-05-12 23:12:30,936 - sqlalchemy.engine.Engine - INFO - [cached since 5457s ago] ('7bf5fc05-1a66-4438-8b8f-45bd472b399d', 1, 0)
2025-05-12 23:12:30,937 - app.utils.jwt_callbacks - INFO - Token 7bf5fc05-1a66-4438-8b8f-45bd472b399d is valid
2025-05-12 23:12:30,937 - app.utils.jwt_callbacks - INFO - Verifying token
2025-05-12 23:12:30,938 - app.utils.jwt_callbacks - INFO - JWT Header: {'alg': 'HS256', 'typ': 'JWT'}
2025-05-12 23:12:30,939 - app.utils.jwt_callbacks - INFO - JWT Data: {'fresh': False, 'iat': 1747062064, 'jti': '7bf5fc05-1a66-4438-8b8f-45bd472b399d', 'type': 'access', 'sub': 1, 'nbf': 1747062064, 'csrf': 'IjM0OTRjZTZmZmUxYzYwYWExMWE0ZmVlMGMzYzE3NDg5NjkxMDg5YTEi.aCINMA.5evT3dCHuJ1HyIPnKfmNAzm4fsg', 'exp': 1747065664, 'aud': 'task_management_system', 'user_claims': {'username': 'admin', 'roles': ['admin'], 'permissions': ['manage_users', 'manage_roles', 'manage_all_projects', 'manage_project', 'manage_all_tasks', 'manage_task', 'view_project', 'view_task', 'manage_resources', 'manage_risks', 'view_reports', 'create_task', 'assign_task', 'change_project_status', 'change_task_status', 'create_project'], 'is_active': True}, 'roles': ['admin'], 'admin': True}
2025-05-12 23:12:30,939 - app.utils.jwt_callbacks - INFO - Token time difference: -686.939934 seconds
2025-05-12 23:12:30,940 - app.utils.jwt_callbacks - INFO - Token verification successful
2025-05-12 23:12:30,940 - app.utils.jwt_callbacks - INFO - Looking up user with identity: 1
2025-05-12 23:12:30,942 - sqlalchemy.engine.Engine - INFO - SELECT users.id AS users_id, users.username AS users_username, users.email AS users_email, users.name AS users_name, users.password_hash AS users_password_hash, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.last_login AS users_last_login 
FROM users 
WHERE users.id = ?
2025-05-12 23:12:30,943 - sqlalchemy.engine.Engine - INFO - [cached since 5457s ago] (1,)
2025-05-12 23:12:30,944 - app.utils.jwt_callbacks - INFO - User found: admin
2025-05-12 23:12:30,945 - sqlalchemy.engine.Engine - INFO - SELECT roles.id AS roles_id, roles.name AS roles_name, roles.description AS roles_description, roles.created_at AS roles_created_at 
FROM roles, user_roles 
WHERE ? = user_roles.user_id AND roles.id = user_roles.role_id
2025-05-12 23:12:30,946 - sqlalchemy.engine.Engine - INFO - [cached since 5457s ago] (1,)
2025-05-12 23:12:30,947 - app.utils.jwt_callbacks - INFO - User roles: ['admin']
2025-05-12 23:12:30,948 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions, role_permissions 
WHERE ? = role_permissions.role_id AND permissions.id = role_permissions.permission_id
2025-05-12 23:12:30,949 - sqlalchemy.engine.Engine - INFO - [cached since 5461s ago] (1,)
2025-05-12 23:12:30,951 - app.utils.jwt_callbacks - INFO - User permissions: ['manage_users', 'manage_roles', 'manage_all_projects', 'manage_project', 'manage_all_tasks', 'manage_task', 'view_project', 'view_task', 'manage_resources', 'manage_risks', 'view_reports', 'create_task', 'assign_task', 'change_project_status', 'change_task_status', 'create_project']
2025-05-12 23:12:30,951 - app - INFO - 用户已认证，重定向到仪表板页面: /login
2025-05-12 23:12:30,952 - app - INFO - 设置重定向跟踪: 路径=/login, 计数=1
2025-05-12 23:12:30,952 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-05-12 23:12:30,952 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 23:12:30] "[32mGET /login HTTP/1.1[0m" 302 -
2025-05-12 23:12:30,967 - app.utils.jwt_callbacks - INFO - Checking if token 7bf5fc05-1a66-4438-8b8f-45bd472b399d is in blocklist
2025-05-12 23:12:30,968 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-05-12 23:12:30,968 - sqlalchemy.engine.Engine - INFO - SELECT token_blacklist.id AS token_blacklist_id, token_blacklist.jti AS token_blacklist_jti, token_blacklist.token_type AS token_blacklist_token_type, token_blacklist.user_id AS token_blacklist_user_id, token_blacklist.revoked_at AS token_blacklist_revoked_at, token_blacklist.expires_at AS token_blacklist_expires_at 
FROM token_blacklist 
WHERE token_blacklist.jti = ?
 LIMIT ? OFFSET ?
2025-05-12 23:12:30,970 - sqlalchemy.engine.Engine - INFO - [cached since 5457s ago] ('7bf5fc05-1a66-4438-8b8f-45bd472b399d', 1, 0)
2025-05-12 23:12:30,970 - app.utils.jwt_callbacks - INFO - Token 7bf5fc05-1a66-4438-8b8f-45bd472b399d is valid
2025-05-12 23:12:30,972 - app.utils.jwt_callbacks - INFO - Verifying token
2025-05-12 23:12:30,972 - app.utils.jwt_callbacks - INFO - JWT Header: {'alg': 'HS256', 'typ': 'JWT'}
2025-05-12 23:12:30,972 - app.utils.jwt_callbacks - INFO - JWT Data: {'fresh': False, 'iat': 1747062064, 'jti': '7bf5fc05-1a66-4438-8b8f-45bd472b399d', 'type': 'access', 'sub': 1, 'nbf': 1747062064, 'csrf': 'IjM0OTRjZTZmZmUxYzYwYWExMWE0ZmVlMGMzYzE3NDg5NjkxMDg5YTEi.aCINMA.5evT3dCHuJ1HyIPnKfmNAzm4fsg', 'exp': 1747065664, 'aud': 'task_management_system', 'user_claims': {'username': 'admin', 'roles': ['admin'], 'permissions': ['manage_users', 'manage_roles', 'manage_all_projects', 'manage_project', 'manage_all_tasks', 'manage_task', 'view_project', 'view_task', 'manage_resources', 'manage_risks', 'view_reports', 'create_task', 'assign_task', 'change_project_status', 'change_task_status', 'create_project'], 'is_active': True}, 'roles': ['admin'], 'admin': True}
2025-05-12 23:12:30,973 - app.utils.jwt_callbacks - INFO - Token time difference: -686.97395 seconds
2025-05-12 23:12:30,973 - app.utils.jwt_callbacks - INFO - Token verification successful
2025-05-12 23:12:30,975 - app.utils.jwt_callbacks - INFO - Looking up user with identity: 1
2025-05-12 23:12:30,977 - sqlalchemy.engine.Engine - INFO - SELECT users.id AS users_id, users.username AS users_username, users.email AS users_email, users.name AS users_name, users.password_hash AS users_password_hash, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.last_login AS users_last_login 
FROM users 
WHERE users.id = ?
2025-05-12 23:12:30,978 - sqlalchemy.engine.Engine - INFO - [cached since 5457s ago] (1,)
2025-05-12 23:12:30,979 - app.utils.jwt_callbacks - INFO - User found: admin
2025-05-12 23:12:30,980 - sqlalchemy.engine.Engine - INFO - SELECT roles.id AS roles_id, roles.name AS roles_name, roles.description AS roles_description, roles.created_at AS roles_created_at 
FROM roles, user_roles 
WHERE ? = user_roles.user_id AND roles.id = user_roles.role_id
2025-05-12 23:12:30,980 - sqlalchemy.engine.Engine - INFO - [cached since 5457s ago] (1,)
2025-05-12 23:12:30,981 - app.utils.jwt_callbacks - INFO - User roles: ['admin']
2025-05-12 23:12:30,981 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions, role_permissions 
WHERE ? = role_permissions.role_id AND permissions.id = role_permissions.permission_id
2025-05-12 23:12:30,982 - sqlalchemy.engine.Engine - INFO - [cached since 5461s ago] (1,)
2025-05-12 23:12:30,983 - app.utils.jwt_callbacks - INFO - User permissions: ['manage_users', 'manage_roles', 'manage_all_projects', 'manage_project', 'manage_all_tasks', 'manage_task', 'view_project', 'view_task', 'manage_resources', 'manage_risks', 'view_reports', 'create_task', 'assign_task', 'change_project_status', 'change_task_status', 'create_project']
2025-05-12 23:12:30,984 - app.utils.jwt_callbacks - INFO - Checking if token 7bf5fc05-1a66-4438-8b8f-45bd472b399d is in blocklist
2025-05-12 23:12:30,986 - sqlalchemy.engine.Engine - INFO - SELECT token_blacklist.id AS token_blacklist_id, token_blacklist.jti AS token_blacklist_jti, token_blacklist.token_type AS token_blacklist_token_type, token_blacklist.user_id AS token_blacklist_user_id, token_blacklist.revoked_at AS token_blacklist_revoked_at, token_blacklist.expires_at AS token_blacklist_expires_at 
FROM token_blacklist 
WHERE token_blacklist.jti = ?
 LIMIT ? OFFSET ?
2025-05-12 23:12:30,986 - sqlalchemy.engine.Engine - INFO - [cached since 5457s ago] ('7bf5fc05-1a66-4438-8b8f-45bd472b399d', 1, 0)
2025-05-12 23:12:30,987 - app.utils.jwt_callbacks - INFO - Token 7bf5fc05-1a66-4438-8b8f-45bd472b399d is valid
2025-05-12 23:12:30,988 - app.utils.jwt_callbacks - INFO - Verifying token
2025-05-12 23:12:30,989 - app.utils.jwt_callbacks - INFO - JWT Header: {'alg': 'HS256', 'typ': 'JWT'}
2025-05-12 23:12:30,989 - app.utils.jwt_callbacks - INFO - JWT Data: {'fresh': False, 'iat': 1747062064, 'jti': '7bf5fc05-1a66-4438-8b8f-45bd472b399d', 'type': 'access', 'sub': 1, 'nbf': 1747062064, 'csrf': 'IjM0OTRjZTZmZmUxYzYwYWExMWE0ZmVlMGMzYzE3NDg5NjkxMDg5YTEi.aCINMA.5evT3dCHuJ1HyIPnKfmNAzm4fsg', 'exp': 1747065664, 'aud': 'task_management_system', 'user_claims': {'username': 'admin', 'roles': ['admin'], 'permissions': ['manage_users', 'manage_roles', 'manage_all_projects', 'manage_project', 'manage_all_tasks', 'manage_task', 'view_project', 'view_task', 'manage_resources', 'manage_risks', 'view_reports', 'create_task', 'assign_task', 'change_project_status', 'change_task_status', 'create_project'], 'is_active': True}, 'roles': ['admin'], 'admin': True}
2025-05-12 23:12:30,990 - app.utils.jwt_callbacks - INFO - Token time difference: -686.990751 seconds
2025-05-12 23:12:30,991 - app.utils.jwt_callbacks - INFO - Token verification successful
2025-05-12 23:12:30,991 - app.utils.jwt_callbacks - INFO - Looking up user with identity: 1
2025-05-12 23:12:30,993 - app.utils.jwt_callbacks - INFO - User found: admin
2025-05-12 23:12:30,993 - app.utils.jwt_callbacks - INFO - User roles: ['admin']
2025-05-12 23:12:30,994 - app.utils.jwt_callbacks - INFO - User permissions: ['manage_users', 'manage_roles', 'manage_all_projects', 'manage_project', 'manage_all_tasks', 'manage_task', 'view_project', 'view_task', 'manage_resources', 'manage_risks', 'view_reports', 'create_task', 'assign_task', 'change_project_status', 'change_task_status', 'create_project']
2025-05-12 23:12:30,995 - app - INFO - Dashboard access with user ID: 1
2025-05-12 23:12:30,995 - app - INFO - 用户 admin 是否为管理员: True
2025-05-12 23:12:30,997 - app - INFO - Token found in: cookies
2025-05-12 23:12:30,997 - app - INFO - Dashboard for user admin: roles=['admin'], permissions=['manage_users', 'view_project', 'manage_risks', 'manage_all_tasks', 'assign_task', 'manage_task', 'change_project_status', 'create_project', 'change_task_status', 'manage_roles', 'manage_all_projects', 'manage_resources', 'create_task', 'manage_project', 'view_reports', 'view_task']
2025-05-12 23:12:30,999 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-05-12 23:12:31,000 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 23:12:31] "GET /dashboard HTTP/1.1" 200 -
2025-05-12 23:12:31,041 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 23:12:31] "[36mGET /static/css/bootstrap.min.css HTTP/1.1[0m" 304 -
2025-05-12 23:12:31,042 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 23:12:31] "[36mGET /static/css/bootstrap-icons.css HTTP/1.1[0m" 304 -
2025-05-12 23:12:31,044 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 23:12:31] "[36mGET /static/css/style.css HTTP/1.1[0m" 304 -
2025-05-12 23:12:31,047 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 23:12:31] "[36mGET /static/js/jquery.min.js HTTP/1.1[0m" 304 -
2025-05-12 23:12:31,050 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 23:12:31] "[36mGET /static/js/bootstrap.bundle.min.js HTTP/1.1[0m" 304 -
2025-05-12 23:12:31,054 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 23:12:31] "[36mGET /static/js/utils.js HTTP/1.1[0m" 304 -
2025-05-12 23:12:31,055 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 23:12:31] "[36mGET /static/js/auth.js HTTP/1.1[0m" 304 -
2025-05-12 23:12:31,058 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 23:12:31] "[36mGET /static/js/fix-modals.js HTTP/1.1[0m" 304 -
2025-05-12 23:12:31,063 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 23:12:31] "[36mGET /static/js/csrf.js HTTP/1.1[0m" 304 -
2025-05-12 23:12:31,064 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 23:12:31] "[36mGET /static/js/user-profile.js HTTP/1.1[0m" 304 -
2025-05-12 23:12:31,104 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 23:12:31] "[36mGET /static/css/fonts/bootstrap-icons.woff2 HTTP/1.1[0m" 304 -
2025-05-12 23:12:31,134 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 23:12:31] "[36mGET /static/favicon.ico HTTP/1.1[0m" 304 -
2025-05-12 23:12:32,318 - app - WARNING - 绕过JWT验证: /projects
2025-05-12 23:12:32,319 - app.utils.jwt_callbacks - INFO - Checking if token 7bf5fc05-1a66-4438-8b8f-45bd472b399d is in blocklist
2025-05-12 23:12:32,320 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-05-12 23:12:32,320 - sqlalchemy.engine.Engine - INFO - SELECT token_blacklist.id AS token_blacklist_id, token_blacklist.jti AS token_blacklist_jti, token_blacklist.token_type AS token_blacklist_token_type, token_blacklist.user_id AS token_blacklist_user_id, token_blacklist.revoked_at AS token_blacklist_revoked_at, token_blacklist.expires_at AS token_blacklist_expires_at 
FROM token_blacklist 
WHERE token_blacklist.jti = ?
 LIMIT ? OFFSET ?
2025-05-12 23:12:32,320 - sqlalchemy.engine.Engine - INFO - [cached since 5459s ago] ('7bf5fc05-1a66-4438-8b8f-45bd472b399d', 1, 0)
2025-05-12 23:12:32,321 - app.utils.jwt_callbacks - INFO - Token 7bf5fc05-1a66-4438-8b8f-45bd472b399d is valid
2025-05-12 23:12:32,321 - app.utils.jwt_callbacks - INFO - Verifying token
2025-05-12 23:12:32,322 - app.utils.jwt_callbacks - INFO - JWT Header: {'alg': 'HS256', 'typ': 'JWT'}
2025-05-12 23:12:32,322 - app.utils.jwt_callbacks - INFO - JWT Data: {'fresh': False, 'iat': 1747062064, 'jti': '7bf5fc05-1a66-4438-8b8f-45bd472b399d', 'type': 'access', 'sub': 1, 'nbf': 1747062064, 'csrf': 'IjM0OTRjZTZmZmUxYzYwYWExMWE0ZmVlMGMzYzE3NDg5NjkxMDg5YTEi.aCINMA.5evT3dCHuJ1HyIPnKfmNAzm4fsg', 'exp': 1747065664, 'aud': 'task_management_system', 'user_claims': {'username': 'admin', 'roles': ['admin'], 'permissions': ['manage_users', 'manage_roles', 'manage_all_projects', 'manage_project', 'manage_all_tasks', 'manage_task', 'view_project', 'view_task', 'manage_resources', 'manage_risks', 'view_reports', 'create_task', 'assign_task', 'change_project_status', 'change_task_status', 'create_project'], 'is_active': True}, 'roles': ['admin'], 'admin': True}
2025-05-12 23:12:32,322 - app.utils.jwt_callbacks - INFO - Token time difference: -688.322533 seconds
2025-05-12 23:12:32,323 - app.utils.jwt_callbacks - INFO - Token verification successful
2025-05-12 23:12:32,323 - app.utils.jwt_callbacks - INFO - Looking up user with identity: 1
2025-05-12 23:12:32,324 - sqlalchemy.engine.Engine - INFO - SELECT users.id AS users_id, users.username AS users_username, users.email AS users_email, users.name AS users_name, users.password_hash AS users_password_hash, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.last_login AS users_last_login 
FROM users 
WHERE users.id = ?
2025-05-12 23:12:32,325 - sqlalchemy.engine.Engine - INFO - [cached since 5459s ago] (1,)
2025-05-12 23:12:32,326 - app.utils.jwt_callbacks - INFO - User found: admin
2025-05-12 23:12:32,327 - sqlalchemy.engine.Engine - INFO - SELECT roles.id AS roles_id, roles.name AS roles_name, roles.description AS roles_description, roles.created_at AS roles_created_at 
FROM roles, user_roles 
WHERE ? = user_roles.user_id AND roles.id = user_roles.role_id
2025-05-12 23:12:32,327 - sqlalchemy.engine.Engine - INFO - [cached since 5459s ago] (1,)
2025-05-12 23:12:32,328 - app.utils.jwt_callbacks - INFO - User roles: ['admin']
2025-05-12 23:12:32,328 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions, role_permissions 
WHERE ? = role_permissions.role_id AND permissions.id = role_permissions.permission_id
2025-05-12 23:12:32,329 - sqlalchemy.engine.Engine - INFO - [cached since 5463s ago] (1,)
2025-05-12 23:12:32,330 - app.utils.jwt_callbacks - INFO - User permissions: ['manage_users', 'manage_roles', 'manage_all_projects', 'manage_project', 'manage_all_tasks', 'manage_task', 'view_project', 'view_task', 'manage_resources', 'manage_risks', 'view_reports', 'create_task', 'assign_task', 'change_project_status', 'change_task_status', 'create_project']
2025-05-12 23:12:32,331 - app.routes.main - INFO - JWT bypass enabled for projects - Using test user
2025-05-12 23:12:32,332 - sqlalchemy.engine.Engine - INFO - SELECT projects.id AS projects_id, projects.name AS projects_name, projects.description AS projects_description, projects.status AS projects_status, projects.start_date AS projects_start_date, projects.end_date AS projects_end_date, projects.progress AS projects_progress, projects.created_at AS projects_created_at, projects.updated_at AS projects_updated_at, projects.manager_id AS projects_manager_id, projects.owner_id AS projects_owner_id 
FROM projects
2025-05-12 23:12:32,334 - sqlalchemy.engine.Engine - INFO - [cached since 4497s ago] ()
2025-05-12 23:12:32,335 - sqlalchemy.engine.Engine - INFO - SELECT users.id AS users_id, users.username AS users_username, users.email AS users_email, users.name AS users_name, users.password_hash AS users_password_hash, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.last_login AS users_last_login 
FROM users 
WHERE users.id = ?
2025-05-12 23:12:32,335 - sqlalchemy.engine.Engine - INFO - [cached since 5459s ago] (3,)
2025-05-12 23:12:32,337 - sqlalchemy.engine.Engine - INFO - SELECT users.id AS users_id, users.username AS users_username, users.email AS users_email, users.name AS users_name, users.password_hash AS users_password_hash, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.last_login AS users_last_login 
FROM users 
WHERE users.id = ?
2025-05-12 23:12:32,337 - sqlalchemy.engine.Engine - INFO - [cached since 5459s ago] (5,)
2025-05-12 23:12:32,338 - sqlalchemy.engine.Engine - INFO - SELECT users.id AS users_id, users.username AS users_username, users.email AS users_email, users.name AS users_name, users.password_hash AS users_password_hash, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.last_login AS users_last_login 
FROM users 
WHERE users.id = ?
2025-05-12 23:12:32,338 - sqlalchemy.engine.Engine - INFO - [cached since 5459s ago] (8,)
2025-05-12 23:12:32,339 - sqlalchemy.engine.Engine - INFO - SELECT users.id AS users_id, users.username AS users_username, users.email AS users_email, users.name AS users_name, users.password_hash AS users_password_hash, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.last_login AS users_last_login 
FROM users 
WHERE users.id = ?
2025-05-12 23:12:32,339 - sqlalchemy.engine.Engine - INFO - [cached since 5459s ago] (5,)
2025-05-12 23:12:32,341 - sqlalchemy.engine.Engine - INFO - SELECT users.id AS users_id, users.username AS users_username, users.email AS users_email, users.name AS users_name, users.password_hash AS users_password_hash, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.last_login AS users_last_login 
FROM users 
WHERE users.id = ?
2025-05-12 23:12:32,342 - sqlalchemy.engine.Engine - INFO - [cached since 5459s ago] (9,)
2025-05-12 23:12:32,346 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-05-12 23:12:32,347 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 23:12:32] "GET /projects?bypass_jwt=true HTTP/1.1" 200 -
2025-05-12 23:12:32,375 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 23:12:32] "[36mGET /static/css/bootstrap.min.css HTTP/1.1[0m" 304 -
2025-05-12 23:12:32,376 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 23:12:32] "[36mGET /static/css/bootstrap-icons.css HTTP/1.1[0m" 304 -
2025-05-12 23:12:32,378 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 23:12:32] "[36mGET /static/css/style.css HTTP/1.1[0m" 304 -
2025-05-12 23:12:32,380 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 23:12:32] "[36mGET /static/js/jquery.min.js HTTP/1.1[0m" 304 -
2025-05-12 23:12:32,382 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 23:12:32] "[36mGET /static/css/frappe-gantt.css HTTP/1.1[0m" 304 -
2025-05-12 23:12:32,384 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 23:12:32] "[36mGET /static/js/bootstrap.bundle.min.js HTTP/1.1[0m" 304 -
2025-05-12 23:12:32,390 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 23:12:32] "[36mGET /static/js/utils.js HTTP/1.1[0m" 304 -
2025-05-12 23:12:32,392 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 23:12:32] "[36mGET /static/js/auth.js HTTP/1.1[0m" 304 -
2025-05-12 23:12:32,396 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 23:12:32] "[36mGET /static/js/fix-modals.js HTTP/1.1[0m" 304 -
2025-05-12 23:12:32,398 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 23:12:32] "[36mGET /static/js/csrf.js HTTP/1.1[0m" 304 -
2025-05-12 23:12:32,402 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 23:12:32] "[36mGET /static/js/frappe-gantt.min.js HTTP/1.1[0m" 304 -
2025-05-12 23:12:32,403 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 23:12:32] "[36mGET /static/js/user-profile.js HTTP/1.1[0m" 304 -
2025-05-12 23:12:32,427 - app - WARNING - 绕过JWT验证: /api/global/users
2025-05-12 23:12:32,428 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 23:12:32] "[33mGET /api/global/users?bypass_jwt=true&_=1747062752422 HTTP/1.1[0m" 404 -
2025-05-12 23:12:32,433 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 23:12:32] "[36mGET /static/favicon.ico HTTP/1.1[0m" 304 -
2025-05-12 23:12:32,434 - app - WARNING - 绕过JWT验证: /api/project-managers
2025-05-12 23:12:32,435 - app - INFO - 直接访问项目经理列表API
2025-05-12 23:12:32,436 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-05-12 23:12:32,438 - sqlalchemy.engine.Engine - INFO - SELECT users.id AS users_id, users.username AS users_username, users.email AS users_email, users.name AS users_name, users.password_hash AS users_password_hash, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.last_login AS users_last_login 
FROM users 
WHERE users.is_active = 1
2025-05-12 23:12:32,438 - sqlalchemy.engine.Engine - INFO - [cached since 4497s ago] ()
2025-05-12 23:12:32,439 - app - INFO - 已找到 9 个活跃用户用于项目经理选择
2025-05-12 23:12:32,440 - app - INFO - 返回 9 个可选的项目负责人
2025-05-12 23:12:32,441 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-05-12 23:12:32,441 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 23:12:32] "GET /api/project-managers?bypass_jwt=true&_=1747062752431 HTTP/1.1" 200 -
2025-05-12 23:12:34,116 - app - WARNING - 绕过JWT验证: /api/global/users
2025-05-12 23:12:34,117 - app - WARNING - 绕过JWT验证: /api/global/users
2025-05-12 23:12:34,121 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 23:12:34] "[33mGET /api/global/users?bypass_jwt=true&_=1747062754108 HTTP/1.1[0m" 404 -
2025-05-12 23:12:34,122 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 23:12:34] "[33mGET /api/global/users?bypass_jwt=true&_=1747062754107 HTTP/1.1[0m" 404 -
2025-05-12 23:12:34,134 - app - WARNING - 绕过JWT验证: /api/project-managers
2025-05-12 23:12:34,135 - app - WARNING - 绕过JWT验证: /api/project-managers
2025-05-12 23:12:34,136 - app - INFO - 直接访问项目经理列表API
2025-05-12 23:12:34,136 - app - INFO - 直接访问项目经理列表API
2025-05-12 23:12:34,136 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-05-12 23:12:34,137 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-05-12 23:12:34,137 - sqlalchemy.engine.Engine - INFO - SELECT users.id AS users_id, users.username AS users_username, users.email AS users_email, users.name AS users_name, users.password_hash AS users_password_hash, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.last_login AS users_last_login 
FROM users 
WHERE users.is_active = 1
2025-05-12 23:12:34,137 - sqlalchemy.engine.Engine - INFO - SELECT users.id AS users_id, users.username AS users_username, users.email AS users_email, users.name AS users_name, users.password_hash AS users_password_hash, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.last_login AS users_last_login 
FROM users 
WHERE users.is_active = 1
2025-05-12 23:12:34,137 - sqlalchemy.engine.Engine - INFO - [cached since 4499s ago] ()
2025-05-12 23:12:34,137 - sqlalchemy.engine.Engine - INFO - [cached since 4499s ago] ()
2025-05-12 23:12:34,138 - app - INFO - 已找到 9 个活跃用户用于项目经理选择
2025-05-12 23:12:34,138 - app - INFO - 已找到 9 个活跃用户用于项目经理选择
2025-05-12 23:12:34,138 - app - INFO - 返回 9 个可选的项目负责人
2025-05-12 23:12:34,139 - app - INFO - 返回 9 个可选的项目负责人
2025-05-12 23:12:34,139 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-05-12 23:12:34,140 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-05-12 23:12:34,140 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 23:12:34] "GET /api/project-managers?bypass_jwt=true&_=1747062754131 HTTP/1.1" 200 -
2025-05-12 23:12:34,140 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 23:12:34] "GET /api/project-managers?bypass_jwt=true&_=1747062754131 HTTP/1.1" 200 -
2025-05-12 23:12:47,602 - app - WARNING - 绕过JWT验证: /api/projects
2025-05-12 23:12:47,604 - app - WARNING - 绕过JWT验证: /api/projects
2025-05-12 23:12:47,605 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 23:12:47] "[31m[1mPOST /api/projects?bypass_jwt=true&_=1747062767596 HTTP/1.1[0m" 405 -
2025-05-12 23:12:47,606 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 23:12:47] "[31m[1mPOST /api/projects?bypass_jwt=true&_=1747062767597 HTTP/1.1[0m" 405 -
2025-05-12 23:16:34,906 - werkzeug - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2025-05-12 23:16:34,906 - werkzeug - INFO - [33mPress CTRL+C to quit[0m
2025-05-12 23:17:15,432 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 23:17:15] "[33mGET /login HTTP/1.1[0m" 404 -
2025-05-12 23:17:15,485 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 23:17:15] "[33mGET /favicon.ico HTTP/1.1[0m" 404 -
2025-05-12 23:18:11,969 - werkzeug - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2025-05-12 23:18:11,969 - werkzeug - INFO - [33mPress CTRL+C to quit[0m
2025-05-12 23:18:18,902 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 23:18:18] "[33mGET /login HTTP/1.1[0m" 404 -
2025-05-12 23:18:20,430 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 23:18:20] "[33mGET /login HTTP/1.1[0m" 404 -
2025-05-12 23:18:33,983 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 23:18:33] "[33mGET /login HTTP/1.1[0m" 404 -
2025-05-12 23:19:22,941 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 23:19:22] "[33mGET /login HTTP/1.1[0m" 404 -
2025-05-12 23:19:37,004 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 23:19:37] "[33mGET /login HTTP/1.1[0m" 404 -
2025-05-12 23:31:35,574 - werkzeug - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2025-05-12 23:31:35,574 - werkzeug - INFO - [33mPress CTRL+C to quit[0m
2025-05-12 23:31:51,618 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 23:31:51] "GET /login HTTP/1.1" 200 -
2025-05-12 23:31:51,733 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 23:31:51] "GET /static/css/bootstrap.min.css HTTP/1.1" 200 -
2025-05-12 23:31:51,736 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 23:31:51] "GET /static/css/bootstrap-icons.css HTTP/1.1" 200 -
2025-05-12 23:31:51,736 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 23:31:51] "GET /static/css/style.css HTTP/1.1" 200 -
2025-05-12 23:31:51,739 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 23:31:51] "GET /static/js/bootstrap.bundle.min.js HTTP/1.1" 200 -
2025-05-12 23:31:51,740 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 23:31:51] "GET /static/js/jquery.min.js HTTP/1.1" 200 -
2025-05-12 23:31:51,740 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 23:31:51] "GET /static/js/utils.js HTTP/1.1" 200 -
2025-05-12 23:31:51,743 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 23:31:51] "GET /static/js/auth.js HTTP/1.1" 200 -
2025-05-12 23:31:51,753 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 23:31:51] "GET /static/js/fix-modals.js HTTP/1.1" 200 -
2025-05-12 23:31:51,760 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 23:31:51] "GET /static/images/background.png HTTP/1.1" 200 -
2025-05-12 23:31:51,764 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 23:31:51] "GET /static/js/csrf.js HTTP/1.1" 200 -
2025-05-12 23:31:51,766 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 23:31:51] "GET /static/js/user-profile.js HTTP/1.1" 200 -
2025-05-12 23:31:51,766 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 23:31:51] "[33mGET /static/uploads/background.png HTTP/1.1[0m" 404 -
2025-05-12 23:31:51,766 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 23:31:51] "GET /static/js/background-helper.js HTTP/1.1" 200 -
2025-05-12 23:31:51,798 - app - ERROR - Exception on /auth/user_info [GET]
Traceback (most recent call last):
  File "D:\tmp\work\venv\Lib\site-packages\flask\app.py", line 1511, in wsgi_app
    response = self.full_dispatch_request()
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\tmp\work\venv\Lib\site-packages\flask\app.py", line 919, in full_dispatch_request
    rv = self.handle_user_exception(e)
         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\tmp\work\venv\Lib\site-packages\flask\app.py", line 915, in full_dispatch_request
    rv = self.preprocess_request()
         ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\tmp\work\venv\Lib\site-packages\flask\app.py", line 1291, in preprocess_request
    rv = self.ensure_sync(before_func)()
         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\tmp\work\app\__init__.py", line 59, in bypass_csrf_with_jwt_bypass
    logger.warning(f"绕过JWT验证: {request.path}")
    ^^^^^^
NameError: name 'logger' is not defined
2025-05-12 23:31:51,799 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 23:31:51] "[33mGET /static/uploads/background.png HTTP/1.1[0m" 404 -
2025-05-12 23:31:51,802 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 23:31:51] "[35m[1mGET /auth/user_info?_=1747063911790&bypass_jwt=true HTTP/1.1[0m" 500 -
2025-05-12 23:31:51,816 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 23:31:51] "GET /static/favicon.ico HTTP/1.1" 200 -
2025-05-12 23:31:52,796 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 23:31:52] "[33mGET /static/uploads/background.png HTTP/1.1[0m" 404 -
2025-05-12 23:31:52,938 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 23:31:52] "[33mPOST /auth/login HTTP/1.1[0m" 404 -
2025-05-12 23:31:57,031 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 23:31:57] "[33mPOST /auth/login HTTP/1.1[0m" 404 -
2025-05-12 23:35:19,986 - werkzeug - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2025-05-12 23:35:19,986 - werkzeug - INFO - [33mPress CTRL+C to quit[0m
2025-05-12 23:36:56,031 - werkzeug - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2025-05-12 23:36:56,031 - werkzeug - INFO - [33mPress CTRL+C to quit[0m
2025-05-12 23:37:09,965 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 23:37:09] "[36mGET /static/favicon.ico HTTP/1.1[0m" 304 -
2025-05-12 23:37:11,196 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 23:37:11] "[33mPOST /auth/login HTTP/1.1[0m" 404 -
2025-05-12 23:37:29,012 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 23:37:29] "GET /login HTTP/1.1" 200 -
2025-05-12 23:37:29,051 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 23:37:29] "GET /static/css/bootstrap.min.css HTTP/1.1" 200 -
2025-05-12 23:37:29,053 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 23:37:29] "GET /static/css/bootstrap-icons.css HTTP/1.1" 200 -
2025-05-12 23:37:29,054 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 23:37:29] "GET /static/css/style.css HTTP/1.1" 200 -
2025-05-12 23:37:29,057 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 23:37:29] "GET /static/js/jquery.min.js HTTP/1.1" 200 -
2025-05-12 23:37:29,060 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 23:37:29] "GET /static/js/bootstrap.bundle.min.js HTTP/1.1" 200 -
2025-05-12 23:37:29,061 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 23:37:29] "GET /static/js/utils.js HTTP/1.1" 200 -
2025-05-12 23:37:29,064 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 23:37:29] "GET /static/images/background.png HTTP/1.1" 200 -
2025-05-12 23:37:29,064 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 23:37:29] "GET /static/js/auth.js HTTP/1.1" 200 -
2025-05-12 23:37:29,083 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 23:37:29] "GET /static/js/fix-modals.js HTTP/1.1" 200 -
2025-05-12 23:37:29,084 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 23:37:29] "GET /static/js/csrf.js HTTP/1.1" 200 -
2025-05-12 23:37:29,090 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 23:37:29] "GET /static/js/user-profile.js HTTP/1.1" 200 -
2025-05-12 23:37:29,092 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 23:37:29] "[33mGET /static/uploads/background.png HTTP/1.1[0m" 404 -
2025-05-12 23:37:29,093 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 23:37:29] "GET /static/js/background-helper.js HTTP/1.1" 200 -
2025-05-12 23:37:29,116 - app - WARNING - 绕过JWT验证: /auth/user_info
2025-05-12 23:37:29,118 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 23:37:29] "[33mGET /auth/user_info?_=1747064249113&bypass_jwt=true HTTP/1.1[0m" 404 -
2025-05-12 23:37:29,119 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 23:37:29] "[33mGET /static/uploads/background.png HTTP/1.1[0m" 404 -
2025-05-12 23:37:29,132 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 23:37:29] "GET /static/favicon.ico HTTP/1.1" 200 -
2025-05-12 23:37:30,121 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 23:37:30] "[33mGET /static/uploads/background.png HTTP/1.1[0m" 404 -
2025-05-12 23:37:30,421 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 23:37:30] "[33mPOST /auth/login HTTP/1.1[0m" 404 -
2025-05-12 23:39:36,471 - werkzeug - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2025-05-12 23:39:36,472 - werkzeug - INFO - [33mPress CTRL+C to quit[0m
2025-05-12 23:41:37,401 - werkzeug - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2025-05-12 23:41:37,401 - werkzeug - INFO - [33mPress CTRL+C to quit[0m
2025-05-12 23:45:43,582 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 23:45:43] "GET /login HTTP/1.1" 200 -
2025-05-12 23:45:43,833 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 23:45:43] "GET /static/css/bootstrap-icons.css HTTP/1.1" 200 -
2025-05-12 23:45:43,834 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 23:45:43] "GET /static/css/bootstrap.min.css HTTP/1.1" 200 -
2025-05-12 23:45:43,843 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 23:45:43] "GET /static/images/background.png HTTP/1.1" 200 -
2025-05-12 23:45:43,844 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 23:45:43] "GET /static/js/auth.js HTTP/1.1" 200 -
2025-05-12 23:45:43,847 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 23:45:43] "GET /static/js/bootstrap.bundle.min.js HTTP/1.1" 200 -
2025-05-12 23:45:43,850 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 23:45:43] "GET /static/js/jquery.min.js HTTP/1.1" 200 -
2025-05-12 23:45:43,850 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 23:45:43] "GET /static/js/utils.js HTTP/1.1" 200 -
2025-05-12 23:45:43,851 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 23:45:43] "GET /static/css/style.css HTTP/1.1" 200 -
2025-05-12 23:45:43,860 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 23:45:43] "GET /static/js/fix-modals.js HTTP/1.1" 200 -
2025-05-12 23:45:43,873 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 23:45:43] "GET /static/js/csrf.js HTTP/1.1" 200 -
2025-05-12 23:45:43,874 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 23:45:43] "GET /static/js/user-profile.js HTTP/1.1" 200 -
2025-05-12 23:45:43,876 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 23:45:43] "[33mGET /static/uploads/background.png HTTP/1.1[0m" 404 -
2025-05-12 23:45:43,876 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 23:45:43] "GET /static/js/background-helper.js HTTP/1.1" 200 -
2025-05-12 23:45:43,902 - app - WARNING - 绕过JWT验证: /auth/user_info
2025-05-12 23:45:43,904 - app - INFO - 获取用户信息 - bypass_jwt: True
2025-05-12 23:45:43,904 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 23:45:43] "[33mGET /static/uploads/background.png HTTP/1.1[0m" 404 -
2025-05-12 23:45:43,904 - app - INFO - 使用默认管理员用户(ID=1)
2025-05-12 23:45:44,016 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 23:45:44] "GET /static/favicon.ico HTTP/1.1" 200 -
2025-05-12 23:45:44,174 - app - INFO - 成功获取用户 admin 的信息
2025-05-12 23:45:44,175 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 23:45:44] "GET /auth/user_info?_=1747064743898&bypass_jwt=true HTTP/1.1" 200 -
2025-05-12 23:45:44,907 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 23:45:44] "[33mGET /static/uploads/background.png HTTP/1.1[0m" 404 -
2025-05-12 23:45:45,150 - app - INFO - 登录请求 - 方法: POST, 内容类型: application/x-www-form-urlencoded
2025-05-12 23:45:45,151 - app - INFO - 请求头: {'Host': '127.0.0.1:5000', 'Connection': 'keep-alive', 'Content-Length': '135', 'Cache-Control': 'max-age=0', 'Sec-Ch-Ua': '"Chromium";v="136", "Microsoft Edge";v="136", "Not.A/Brand";v="99"', 'Sec-Ch-Ua-Mobile': '?0', 'Sec-Ch-Ua-Platform': '"Windows"', 'Origin': 'http://127.0.0.1:5000', 'Content-Type': 'application/x-www-form-urlencoded', 'Upgrade-Insecure-Requests': '1', 'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36 Edg/136.0.0.0', 'Accept': 'text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.7', 'Sec-Fetch-Site': 'same-origin', 'Sec-Fetch-Mode': 'navigate', 'Sec-Fetch-User': '?1', 'Sec-Fetch-Dest': 'document', 'Referer': 'http://127.0.0.1:5000/login', 'Accept-Encoding': 'gzip, deflate, br, zstd', 'Accept-Language': 'zh-CN,zh;q=0.9,en;q=0.8,en-GB;q=0.7,en-US;q=0.6', 'Cookie': 'session=eyJjc3JmX3Rva2VuIjoiZmEyYjc4OWZjMTcxYjM3NjQ1YmIwNGFjN2M3OTdjN2JjMjhmNWM3NCJ9.aCIXpw.jiDg1wbqXgRKlTGW_4tGy-DfVEY; user_roles=admin; is_admin=true; admin=true'}
2025-05-12 23:45:45,151 - app - INFO - 处理表单格式的登录请求
2025-05-12 23:45:45,151 - app - INFO - 表单数据: username=admin, password=********
2025-05-12 23:45:45,639 - app - INFO - 已生成CSRF令牌: ImZhMmI3OD...
2025-05-12 23:45:45,641 - app - INFO - 用户 admin 的角色: ['admin']
2025-05-12 23:45:45,641 - app - INFO - 用户 admin 是否是管理员: True
2025-05-12 23:45:45,682 - app - INFO - 用户登录成功: admin
2025-05-12 23:45:45,692 - app - ERROR - 登录过程出错: Could not build url for endpoint 'main.dashboard'. Did you mean 'auth.dashboard' instead?
Traceback (most recent call last):
  File "D:\tmp\work\app\routes\auth.py", line 216, in login
    response = redirect(url_for('main.dashboard'))  # 修改：重定向到仪表板，而不是项目列表
                        ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\tmp\work\venv\Lib\site-packages\flask\helpers.py", line 232, in url_for
    return current_app.url_for(
           ^^^^^^^^^^^^^^^^^^^^
  File "D:\tmp\work\venv\Lib\site-packages\flask\app.py", line 1121, in url_for
    return self.handle_url_build_error(error, endpoint, values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\tmp\work\venv\Lib\site-packages\flask\app.py", line 1110, in url_for
    rv = url_adapter.build(  # type: ignore[union-attr]
         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\tmp\work\venv\Lib\site-packages\werkzeug\routing\map.py", line 924, in build
    raise BuildError(endpoint, values, method, self)
werkzeug.routing.exceptions.BuildError: Could not build url for endpoint 'main.dashboard'. Did you mean 'auth.dashboard' instead?
2025-05-12 23:45:45,701 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 23:45:45] "[32mPOST /auth/login HTTP/1.1[0m" 302 -
2025-05-12 23:45:45,712 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 23:45:45] "GET /login HTTP/1.1" 200 -
2025-05-12 23:45:45,739 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 23:45:45] "[36mGET /static/css/bootstrap.min.css HTTP/1.1[0m" 304 -
2025-05-12 23:45:45,741 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 23:45:45] "[36mGET /static/css/bootstrap-icons.css HTTP/1.1[0m" 304 -
2025-05-12 23:45:45,742 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 23:45:45] "[36mGET /static/css/style.css HTTP/1.1[0m" 304 -
2025-05-12 23:45:45,746 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 23:45:45] "[36mGET /static/js/jquery.min.js HTTP/1.1[0m" 304 -
2025-05-12 23:45:45,748 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 23:45:45] "[36mGET /static/js/bootstrap.bundle.min.js HTTP/1.1[0m" 304 -
2025-05-12 23:45:45,750 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 23:45:45] "[36mGET /static/js/utils.js HTTP/1.1[0m" 304 -
2025-05-12 23:45:45,753 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 23:45:45] "[36mGET /static/js/auth.js HTTP/1.1[0m" 304 -
2025-05-12 23:45:45,754 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 23:45:45] "[36mGET /static/images/background.png HTTP/1.1[0m" 304 -
2025-05-12 23:45:45,765 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 23:45:45] "[36mGET /static/js/fix-modals.js HTTP/1.1[0m" 304 -
2025-05-12 23:45:45,768 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 23:45:45] "[36mGET /static/js/user-profile.js HTTP/1.1[0m" 304 -
2025-05-12 23:45:45,769 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 23:45:45] "[36mGET /static/js/csrf.js HTTP/1.1[0m" 304 -
2025-05-12 23:45:45,771 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 23:45:45] "[33mGET /static/uploads/background.png HTTP/1.1[0m" 404 -
2025-05-12 23:45:45,772 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 23:45:45] "[36mGET /static/js/background-helper.js HTTP/1.1[0m" 304 -
2025-05-12 23:45:45,787 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 23:45:45] "[33mGET /static/uploads/background.png HTTP/1.1[0m" 404 -
2025-05-12 23:45:45,799 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 23:45:45] "[36mGET /static/favicon.ico HTTP/1.1[0m" 304 -
2025-05-12 23:45:46,811 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 23:45:46] "[33mGET /static/uploads/background.png HTTP/1.1[0m" 404 -
2025-05-12 23:45:48,051 - app - INFO - 登录请求 - 方法: POST, 内容类型: application/x-www-form-urlencoded
2025-05-12 23:45:48,051 - app - INFO - 请求头: {'Host': '127.0.0.1:5000', 'Connection': 'keep-alive', 'Content-Length': '135', 'Cache-Control': 'max-age=0', 'Sec-Ch-Ua': '"Chromium";v="136", "Microsoft Edge";v="136", "Not.A/Brand";v="99"', 'Sec-Ch-Ua-Mobile': '?0', 'Sec-Ch-Ua-Platform': '"Windows"', 'Origin': 'http://127.0.0.1:5000', 'Content-Type': 'application/x-www-form-urlencoded', 'Upgrade-Insecure-Requests': '1', 'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36 Edg/136.0.0.0', 'Accept': 'text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.7', 'Sec-Fetch-Site': 'same-origin', 'Sec-Fetch-Mode': 'navigate', 'Sec-Fetch-User': '?1', 'Sec-Fetch-Dest': 'document', 'Referer': 'http://127.0.0.1:5000/login', 'Accept-Encoding': 'gzip, deflate, br, zstd', 'Accept-Language': 'zh-CN,zh;q=0.9,en;q=0.8,en-GB;q=0.7,en-US;q=0.6', 'Cookie': 'user_roles=admin; is_admin=true; admin=true; session=eyJjc3JmX3Rva2VuIjoiZmEyYjc4OWZjMTcxYjM3NjQ1YmIwNGFjN2M3OTdjN2JjMjhmNWM3NCJ9.aCIXqQ.YOni9QZDxZuNxc8a-FSeyG9PTrc; admin_role=true'}
2025-05-12 23:45:48,052 - app - INFO - 处理表单格式的登录请求
2025-05-12 23:45:48,052 - app - INFO - 表单数据: username=admin, password=********
2025-05-12 23:45:48,545 - app - INFO - 已生成CSRF令牌: ImZhMmI3OD...
2025-05-12 23:45:48,547 - app - INFO - 用户 admin 的角色: ['admin']
2025-05-12 23:45:48,548 - app - INFO - 用户 admin 是否是管理员: True
2025-05-12 23:45:48,583 - app - INFO - 用户登录成功: admin
2025-05-12 23:45:48,587 - app - ERROR - 登录过程出错: Could not build url for endpoint 'main.dashboard'. Did you mean 'auth.dashboard' instead?
Traceback (most recent call last):
  File "D:\tmp\work\app\routes\auth.py", line 216, in login
    response = redirect(url_for('main.dashboard'))  # 修改：重定向到仪表板，而不是项目列表
                        ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\tmp\work\venv\Lib\site-packages\flask\helpers.py", line 232, in url_for
    return current_app.url_for(
           ^^^^^^^^^^^^^^^^^^^^
  File "D:\tmp\work\venv\Lib\site-packages\flask\app.py", line 1121, in url_for
    return self.handle_url_build_error(error, endpoint, values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\tmp\work\venv\Lib\site-packages\flask\app.py", line 1110, in url_for
    rv = url_adapter.build(  # type: ignore[union-attr]
         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\tmp\work\venv\Lib\site-packages\werkzeug\routing\map.py", line 924, in build
    raise BuildError(endpoint, values, method, self)
werkzeug.routing.exceptions.BuildError: Could not build url for endpoint 'main.dashboard'. Did you mean 'auth.dashboard' instead?
2025-05-12 23:45:48,591 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 23:45:48] "[32mPOST /auth/login HTTP/1.1[0m" 302 -
2025-05-12 23:45:48,602 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 23:45:48] "GET /login HTTP/1.1" 200 -
2025-05-12 23:45:48,625 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 23:45:48] "[36mGET /static/css/bootstrap.min.css HTTP/1.1[0m" 304 -
2025-05-12 23:45:48,627 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 23:45:48] "[36mGET /static/css/bootstrap-icons.css HTTP/1.1[0m" 304 -
2025-05-12 23:45:48,628 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 23:45:48] "[36mGET /static/css/style.css HTTP/1.1[0m" 304 -
2025-05-12 23:45:48,632 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 23:45:48] "[36mGET /static/js/jquery.min.js HTTP/1.1[0m" 304 -
2025-05-12 23:45:48,633 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 23:45:48] "[36mGET /static/js/bootstrap.bundle.min.js HTTP/1.1[0m" 304 -
2025-05-12 23:45:48,636 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 23:45:48] "[36mGET /static/js/utils.js HTTP/1.1[0m" 304 -
2025-05-12 23:45:48,636 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 23:45:48] "[36mGET /static/js/auth.js HTTP/1.1[0m" 304 -
2025-05-12 23:45:48,642 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 23:45:48] "[36mGET /static/images/background.png HTTP/1.1[0m" 304 -
2025-05-12 23:45:48,649 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 23:45:48] "[36mGET /static/js/fix-modals.js HTTP/1.1[0m" 304 -
2025-05-12 23:45:48,651 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 23:45:48] "[36mGET /static/js/csrf.js HTTP/1.1[0m" 304 -
2025-05-12 23:45:48,651 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 23:45:48] "[36mGET /static/js/user-profile.js HTTP/1.1[0m" 304 -
2025-05-12 23:45:48,654 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 23:45:48] "[33mGET /static/uploads/background.png HTTP/1.1[0m" 404 -
2025-05-12 23:45:48,655 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 23:45:48] "[36mGET /static/js/background-helper.js HTTP/1.1[0m" 304 -
2025-05-12 23:45:48,665 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 23:45:48] "[33mGET /static/uploads/background.png HTTP/1.1[0m" 404 -
2025-05-12 23:45:48,684 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 23:45:48] "[36mGET /static/favicon.ico HTTP/1.1[0m" 304 -
2025-05-12 23:45:49,669 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 23:45:49] "[33mGET /static/uploads/background.png HTTP/1.1[0m" 404 -
2025-05-12 23:47:57,816 - werkzeug - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2025-05-12 23:47:57,816 - werkzeug - INFO - [33mPress CTRL+C to quit[0m
2025-05-12 23:49:23,400 - werkzeug - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2025-05-12 23:49:23,402 - werkzeug - INFO - [33mPress CTRL+C to quit[0m
2025-05-12 23:49:28,713 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 23:49:28] "GET /login HTTP/1.1" 200 -
2025-05-12 23:49:28,950 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 23:49:28] "[36mGET /static/css/bootstrap.min.css HTTP/1.1[0m" 304 -
2025-05-12 23:49:28,956 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 23:49:28] "[36mGET /static/css/style.css HTTP/1.1[0m" 304 -
2025-05-12 23:49:28,959 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 23:49:28] "[36mGET /static/js/auth.js HTTP/1.1[0m" 304 -
2025-05-12 23:49:28,959 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 23:49:28] "[36mGET /static/css/bootstrap-icons.css HTTP/1.1[0m" 304 -
2025-05-12 23:49:28,964 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 23:49:28] "[36mGET /static/js/bootstrap.bundle.min.js HTTP/1.1[0m" 304 -
2025-05-12 23:49:28,967 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 23:49:28] "[36mGET /static/images/background.png HTTP/1.1[0m" 304 -
2025-05-12 23:49:28,968 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 23:49:28] "[36mGET /static/js/jquery.min.js HTTP/1.1[0m" 304 -
2025-05-12 23:49:28,968 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 23:49:28] "[36mGET /static/js/utils.js HTTP/1.1[0m" 304 -
2025-05-12 23:49:28,971 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 23:49:28] "[36mGET /static/js/fix-modals.js HTTP/1.1[0m" 304 -
2025-05-12 23:49:28,979 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 23:49:28] "[36mGET /static/js/csrf.js HTTP/1.1[0m" 304 -
2025-05-12 23:49:28,981 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 23:49:28] "[36mGET /static/js/user-profile.js HTTP/1.1[0m" 304 -
2025-05-12 23:49:28,987 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 23:49:28] "[36mGET /static/js/background-helper.js HTTP/1.1[0m" 304 -
2025-05-12 23:49:28,988 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 23:49:28] "[33mGET /static/uploads/background.png HTTP/1.1[0m" 404 -
2025-05-12 23:49:28,997 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 23:49:28] "[33mGET /static/uploads/background.png HTTP/1.1[0m" 404 -
2025-05-12 23:49:29,011 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 23:49:29] "[36mGET /static/favicon.ico HTTP/1.1[0m" 304 -
2025-05-12 23:49:30,005 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 23:49:30] "[33mGET /static/uploads/background.png HTTP/1.1[0m" 404 -
2025-05-12 23:49:30,407 - app - INFO - 登录请求 - 方法: POST, 内容类型: application/x-www-form-urlencoded
2025-05-12 23:49:30,408 - app - INFO - 请求头: {'Host': '127.0.0.1:5000', 'Connection': 'keep-alive', 'Content-Length': '135', 'Cache-Control': 'max-age=0', 'Sec-Ch-Ua': '"Chromium";v="136", "Microsoft Edge";v="136", "Not.A/Brand";v="99"', 'Sec-Ch-Ua-Mobile': '?0', 'Sec-Ch-Ua-Platform': '"Windows"', 'Origin': 'http://127.0.0.1:5000', 'Content-Type': 'application/x-www-form-urlencoded', 'Upgrade-Insecure-Requests': '1', 'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36 Edg/136.0.0.0', 'Accept': 'text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.7', 'Sec-Fetch-Site': 'same-origin', 'Sec-Fetch-Mode': 'navigate', 'Sec-Fetch-User': '?1', 'Sec-Fetch-Dest': 'document', 'Referer': 'http://127.0.0.1:5000/login', 'Accept-Encoding': 'gzip, deflate, br, zstd', 'Accept-Language': 'zh-CN,zh;q=0.9,en;q=0.8,en-GB;q=0.7,en-US;q=0.6', 'Cookie': 'user_roles=admin; is_admin=true; admin=true; admin_role=true; session=eyJjc3JmX3Rva2VuIjoiZmEyYjc4OWZjMTcxYjM3NjQ1YmIwNGFjN2M3OTdjN2JjMjhmNWM3NCJ9.aCIXrA.M7xMNdSySUF4E8Kf8S8noYEuSOU'}
2025-05-12 23:49:30,408 - app - INFO - 处理表单格式的登录请求
2025-05-12 23:49:30,408 - app - INFO - 表单数据: username=admin, password=********
2025-05-12 23:49:31,078 - app - INFO - 已生成CSRF令牌: ImZhMmI3OD...
2025-05-12 23:49:31,085 - app - INFO - 用户 admin 的角色: ['admin']
2025-05-12 23:49:31,085 - app - INFO - 用户 admin 是否是管理员: True
2025-05-12 23:49:31,110 - app - INFO - 用户登录成功: admin
2025-05-12 23:49:31,111 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 23:49:31] "[32mPOST /auth/login HTTP/1.1[0m" 302 -
2025-05-12 23:49:31,119 - app - DEBUG - Dashboard route accessed
2025-05-12 23:49:31,119 - app - DEBUG - Current user ID: 1
2025-05-12 23:49:31,127 - app - ERROR - Error accessing dashboard: name 'Task' is not defined
Traceback (most recent call last):
  File "D:\tmp\work\app\routes\auth.py", line 1265, in dashboard
    tasks = Task.query.filter_by(assignee_id=current_user_id).all()
            ^^^^
NameError: name 'Task' is not defined
2025-05-12 23:49:31,134 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 23:49:31] "GET /dashboard HTTP/1.1" 200 -
2025-05-12 23:49:31,159 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 23:49:31] "[36mGET /static/css/bootstrap.min.css HTTP/1.1[0m" 304 -
2025-05-12 23:49:31,160 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 23:49:31] "[36mGET /static/css/bootstrap-icons.css HTTP/1.1[0m" 304 -
2025-05-12 23:49:31,160 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 23:49:31] "[36mGET /static/css/style.css HTTP/1.1[0m" 304 -
2025-05-12 23:49:31,168 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 23:49:31] "[36mGET /static/js/bootstrap.bundle.min.js HTTP/1.1[0m" 304 -
2025-05-12 23:49:31,169 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 23:49:31] "[36mGET /static/js/jquery.min.js HTTP/1.1[0m" 304 -
2025-05-12 23:49:31,169 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 23:49:31] "[36mGET /static/js/utils.js HTTP/1.1[0m" 304 -
2025-05-12 23:49:31,177 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 23:49:31] "[36mGET /static/js/auth.js HTTP/1.1[0m" 304 -
2025-05-12 23:49:31,178 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 23:49:31] "[36mGET /static/images/background.png HTTP/1.1[0m" 304 -
2025-05-12 23:49:31,191 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 23:49:31] "[36mGET /static/js/fix-modals.js HTTP/1.1[0m" 304 -
2025-05-12 23:49:31,193 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 23:49:31] "[36mGET /static/js/csrf.js HTTP/1.1[0m" 304 -
2025-05-12 23:49:31,195 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 23:49:31] "[36mGET /static/js/user-profile.js HTTP/1.1[0m" 304 -
2025-05-12 23:49:31,196 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 23:49:31] "[36mGET /static/js/background-helper.js HTTP/1.1[0m" 304 -
2025-05-12 23:49:31,198 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 23:49:31] "[33mGET /static/uploads/background.png HTTP/1.1[0m" 404 -
2025-05-12 23:49:31,209 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 23:49:31] "[33mGET /static/uploads/background.png HTTP/1.1[0m" 404 -
2025-05-12 23:49:31,223 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 23:49:31] "[36mGET /static/favicon.ico HTTP/1.1[0m" 304 -
2025-05-12 23:49:32,217 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 23:49:32] "[33mGET /static/uploads/background.png HTTP/1.1[0m" 404 -
2025-05-12 23:49:33,244 - app - INFO - 登录请求 - 方法: POST, 内容类型: application/x-www-form-urlencoded
2025-05-12 23:49:33,244 - app - INFO - 请求头: {'Host': '127.0.0.1:5000', 'Connection': 'keep-alive', 'Content-Length': '135', 'Cache-Control': 'max-age=0', 'Sec-Ch-Ua': '"Chromium";v="136", "Microsoft Edge";v="136", "Not.A/Brand";v="99"', 'Sec-Ch-Ua-Mobile': '?0', 'Sec-Ch-Ua-Platform': '"Windows"', 'Origin': 'http://127.0.0.1:5000', 'Content-Type': 'application/x-www-form-urlencoded', 'Upgrade-Insecure-Requests': '1', 'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36 Edg/136.0.0.0', 'Accept': 'text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.7', 'Sec-Fetch-Site': 'same-origin', 'Sec-Fetch-Mode': 'navigate', 'Sec-Fetch-User': '?1', 'Sec-Fetch-Dest': 'document', 'Referer': 'http://127.0.0.1:5000/dashboard', 'Accept-Encoding': 'gzip, deflate, br, zstd', 'Accept-Language': 'zh-CN,zh;q=0.9,en;q=0.8,en-GB;q=0.7,en-US;q=0.6', 'Cookie': 'csrf_token=ImZhMmI3ODlmYzE3MWIzNzY0NWJiMDRhYzdjNzk3YzdiYzI4ZjVjNzQi.aCIYiw.S6V5Nd2w_-SSTG-fO2YlGFgmDWE; user_roles=admin; is_admin=true; user_roles=admin; is_admin=true; admin=true; admin_role=true; session=eyJjc3JmX3Rva2VuIjoiZmEyYjc4OWZjMTcxYjM3NjQ1YmIwNGFjN2M3OTdjN2JjMjhmNWM3NCJ9.aCIXrA.M7xMNdSySUF4E8Kf8S8noYEuSOU; access_token_cookie=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJmcmVzaCI6ZmFsc2UsImlhdCI6MTc0NzA2NDk3MSwianRpIjoiZGFjNzc0MWUtNzE4MC00M2Q4LWIzMTMtYmM3MDcyMGQyNmY4IiwidHlwZSI6ImFjY2VzcyIsInN1YiI6MSwibmJmIjoxNzQ3MDY0OTcxLCJjc3JmIjoiSW1aaE1tSTNPRGxtWXpFM01XSXpOelkwTldKaU1EUmhZemRqTnprM1l6ZGlZekk0WmpWak56UWkuYUNJWWl3LlM2VjVOZDJ3Xy1TU1RHLWZPMllsR0ZnbURXRSIsImV4cCI6MTc0NzA2ODU3MSwicm9sZXMiOlsiYWRtaW4iXSwiYWRtaW4iOnRydWUsInVzZXJfY2xhaW1zIjp7InVzZXJuYW1lIjoiYWRtaW4iLCJyb2xlcyI6WyJhZG1pbiJdLCJwZXJtaXNzaW9ucyI6WyJtYW5hZ2VfdXNlcnMiLCJtYW5hZ2Vfcm9sZXMiLCJtYW5hZ2VfYWxsX3Byb2plY3RzIiwibWFuYWdlX3Byb2plY3QiLCJtYW5hZ2VfYWxsX3Rhc2tzIiwibWFuYWdlX3Rhc2siLCJ2aWV3X3Byb2plY3QiLCJ2aWV3X3Rhc2siLCJtYW5hZ2VfcmVzb3VyY2VzIiwibWFuYWdlX3Jpc2tzIiwidmlld19yZXBvcnRzIiwiY3JlYXRlX3Rhc2siLCJhc3NpZ25fdGFzayIsImNoYW5nZV9wcm9qZWN0X3N0YXR1cyIsImNoYW5nZV90YXNrX3N0YXR1cyIsImNyZWF0ZV9wcm9qZWN0Il0sImlzX2FjdGl2ZSI6dHJ1ZX19.UcImlQURzgl_dUC3UcIoqD_kOxTqufZlDPjXq1OBzqM; csrf_access_token=ImZhMmI3ODlmYzE3MWIzNzY0NWJiMDRhYzdjNzk3YzdiYzI4ZjVjNzQi.aCIYiw.S6V5Nd2w_-SSTG-fO2YlGFgmDWE'}
2025-05-12 23:49:33,245 - app - INFO - 处理表单格式的登录请求
2025-05-12 23:49:33,245 - app - INFO - 表单数据: username=admin, password=********
2025-05-12 23:49:33,580 - app - INFO - 已生成CSRF令牌: ImZhMmI3OD...
2025-05-12 23:49:33,582 - app - INFO - 用户 admin 的角色: ['admin']
2025-05-12 23:49:33,583 - app - INFO - 用户 admin 是否是管理员: True
2025-05-12 23:49:33,600 - app - INFO - 用户登录成功: admin
2025-05-12 23:49:33,601 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 23:49:33] "[32mPOST /auth/login HTTP/1.1[0m" 302 -
2025-05-12 23:49:33,608 - app - DEBUG - Dashboard route accessed
2025-05-12 23:49:33,608 - app - DEBUG - Current user ID: 1
2025-05-12 23:49:33,609 - app - ERROR - Error accessing dashboard: name 'Task' is not defined
Traceback (most recent call last):
  File "D:\tmp\work\app\routes\auth.py", line 1265, in dashboard
    tasks = Task.query.filter_by(assignee_id=current_user_id).all()
            ^^^^
NameError: name 'Task' is not defined
2025-05-12 23:49:33,614 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 23:49:33] "GET /dashboard HTTP/1.1" 200 -
2025-05-12 23:49:33,640 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 23:49:33] "[36mGET /static/css/bootstrap.min.css HTTP/1.1[0m" 304 -
2025-05-12 23:49:33,641 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 23:49:33] "[36mGET /static/css/bootstrap-icons.css HTTP/1.1[0m" 304 -
2025-05-12 23:49:33,644 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 23:49:33] "[36mGET /static/css/style.css HTTP/1.1[0m" 304 -
2025-05-12 23:49:33,649 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 23:49:33] "[36mGET /static/js/jquery.min.js HTTP/1.1[0m" 304 -
2025-05-12 23:49:33,652 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 23:49:33] "[36mGET /static/js/bootstrap.bundle.min.js HTTP/1.1[0m" 304 -
2025-05-12 23:49:33,657 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 23:49:33] "[36mGET /static/js/utils.js HTTP/1.1[0m" 304 -
2025-05-12 23:49:33,658 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 23:49:33] "[36mGET /static/js/auth.js HTTP/1.1[0m" 304 -
2025-05-12 23:49:33,660 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 23:49:33] "[36mGET /static/images/background.png HTTP/1.1[0m" 304 -
2025-05-12 23:49:33,670 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 23:49:33] "[36mGET /static/js/fix-modals.js HTTP/1.1[0m" 304 -
2025-05-12 23:49:33,672 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 23:49:33] "[36mGET /static/js/csrf.js HTTP/1.1[0m" 304 -
2025-05-12 23:49:33,674 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 23:49:33] "[36mGET /static/js/user-profile.js HTTP/1.1[0m" 304 -
2025-05-12 23:49:33,677 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 23:49:33] "[36mGET /static/js/background-helper.js HTTP/1.1[0m" 304 -
2025-05-12 23:49:33,680 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 23:49:33] "[33mGET /static/uploads/background.png HTTP/1.1[0m" 404 -
2025-05-12 23:49:33,697 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 23:49:33] "[36mGET /static/favicon.ico HTTP/1.1[0m" 304 -
2025-05-12 23:49:34,699 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 23:49:34] "[33mGET /static/uploads/background.png HTTP/1.1[0m" 404 -
2025-05-12 23:51:43,171 - werkzeug - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2025-05-12 23:51:43,171 - werkzeug - INFO - [33mPress CTRL+C to quit[0m
2025-05-12 23:52:12,602 - werkzeug - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2025-05-12 23:52:12,602 - werkzeug - INFO - [33mPress CTRL+C to quit[0m
2025-05-12 23:52:23,527 - app - DEBUG - Dashboard route accessed
2025-05-12 23:52:23,527 - app - DEBUG - Current user ID: 1
2025-05-12 23:52:23,609 - app - DEBUG - Dashboard data prepared for user: admin
2025-05-12 23:52:23,633 - app - ERROR - Error accessing dashboard: 'current_user_data' is undefined
Traceback (most recent call last):
  File "D:\tmp\work\app\routes\auth.py", line 1294, in dashboard
    return render_template(
           ^^^^^^^^^^^^^^^^
  File "D:\tmp\work\venv\Lib\site-packages\flask\templating.py", line 150, in render_template
    return _render(app, template, context)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\tmp\work\venv\Lib\site-packages\flask\templating.py", line 131, in _render
    rv = template.render(context)
         ^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\tmp\work\venv\Lib\site-packages\jinja2\environment.py", line 1301, in render
    self.environment.handle_exception()
  File "D:\tmp\work\venv\Lib\site-packages\jinja2\environment.py", line 936, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "D:\tmp\work\app\templates\dashboard.html", line 1, in top-level template code
    {% extends "base.html" %}
  File "D:\tmp\work\app\templates\base.html", line 1448, in top-level template code
    {% block content %}{% endblock %}
    ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\tmp\work\app\templates\dashboard.html", line 29, in block 'content'
    <div class="col-md-{% if 'manage_risks' in current_user_data.permissions or 'manage_resources' in current_user_data.permissions or 'admin' in current_user_data.roles %}3{% else %}6{% endif %} mb-3">
    ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\tmp\work\venv\Lib\site-packages\jinja2\environment.py", line 485, in getattr
    return getattr(obj, attribute)
           ^^^^^^^^^^^^^^^^^^^^^^^
jinja2.exceptions.UndefinedError: 'current_user_data' is undefined
2025-05-12 23:52:23,640 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 23:52:23] "GET /dashboard HTTP/1.1" 200 -
2025-05-12 23:52:23,761 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 23:52:23] "[36mGET /static/css/bootstrap-icons.css HTTP/1.1[0m" 304 -
2025-05-12 23:52:23,764 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 23:52:23] "[36mGET /static/css/bootstrap.min.css HTTP/1.1[0m" 304 -
2025-05-12 23:52:23,766 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 23:52:23] "[36mGET /static/js/auth.js HTTP/1.1[0m" 304 -
2025-05-12 23:52:23,768 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 23:52:23] "[36mGET /static/js/jquery.min.js HTTP/1.1[0m" 304 -
2025-05-12 23:52:23,769 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 23:52:23] "[36mGET /static/js/bootstrap.bundle.min.js HTTP/1.1[0m" 304 -
2025-05-12 23:52:23,770 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 23:52:23] "[36mGET /static/css/style.css HTTP/1.1[0m" 304 -
2025-05-12 23:52:23,771 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 23:52:23] "[36mGET /static/js/utils.js HTTP/1.1[0m" 304 -
2025-05-12 23:52:23,773 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 23:52:23] "[36mGET /static/js/fix-modals.js HTTP/1.1[0m" 304 -
2025-05-12 23:52:23,774 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 23:52:23] "[36mGET /static/images/background.png HTTP/1.1[0m" 304 -
2025-05-12 23:52:23,774 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 23:52:23] "[36mGET /static/js/csrf.js HTTP/1.1[0m" 304 -
2025-05-12 23:52:23,789 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 23:52:23] "[36mGET /static/js/user-profile.js HTTP/1.1[0m" 304 -
2025-05-12 23:52:23,790 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 23:52:23] "[36mGET /static/js/background-helper.js HTTP/1.1[0m" 304 -
2025-05-12 23:52:23,806 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 23:52:23] "GET /static/uploads/background.png HTTP/1.1" 200 -
2025-05-12 23:52:23,823 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 23:52:23] "[36mGET /static/favicon.ico HTTP/1.1[0m" 304 -
2025-05-12 23:52:25,133 - app - INFO - 登录请求 - 方法: POST, 内容类型: application/x-www-form-urlencoded
2025-05-12 23:52:25,133 - app - INFO - 请求头: {'Host': '127.0.0.1:5000', 'Connection': 'keep-alive', 'Content-Length': '135', 'Cache-Control': 'max-age=0', 'Sec-Ch-Ua': '"Chromium";v="136", "Microsoft Edge";v="136", "Not.A/Brand";v="99"', 'Sec-Ch-Ua-Mobile': '?0', 'Sec-Ch-Ua-Platform': '"Windows"', 'Origin': 'http://127.0.0.1:5000', 'Content-Type': 'application/x-www-form-urlencoded', 'Upgrade-Insecure-Requests': '1', 'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36 Edg/136.0.0.0', 'Accept': 'text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.7', 'Sec-Fetch-Site': 'same-origin', 'Sec-Fetch-Mode': 'navigate', 'Sec-Fetch-User': '?1', 'Sec-Fetch-Dest': 'document', 'Referer': 'http://127.0.0.1:5000/dashboard', 'Accept-Encoding': 'gzip, deflate, br, zstd', 'Accept-Language': 'zh-CN,zh;q=0.9,en;q=0.8,en-GB;q=0.7,en-US;q=0.6', 'Cookie': 'user_roles=admin; is_admin=true; csrf_token=ImZhMmI3ODlmYzE3MWIzNzY0NWJiMDRhYzdjNzk3YzdiYzI4ZjVjNzQi.aCIYjQ.3hkuVrC3YYANMpNzTlNTWx-mpxk; user_roles=admin; is_admin=true; admin=true; admin_role=true; session=eyJjc3JmX3Rva2VuIjoiZmEyYjc4OWZjMTcxYjM3NjQ1YmIwNGFjN2M3OTdjN2JjMjhmNWM3NCJ9.aCIXrA.M7xMNdSySUF4E8Kf8S8noYEuSOU; access_token_cookie=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJmcmVzaCI6ZmFsc2UsImlhdCI6MTc0NzA2NDk3MywianRpIjoiZWIyNTE0MTYtOGY2My00YWU5LTg0ZTQtNjcxODZkMzIxZmM3IiwidHlwZSI6ImFjY2VzcyIsInN1YiI6MSwibmJmIjoxNzQ3MDY0OTczLCJjc3JmIjoiSW1aaE1tSTNPRGxtWXpFM01XSXpOelkwTldKaU1EUmhZemRqTnprM1l6ZGlZekk0WmpWak56UWkuYUNJWWpRLjNoa3VWckMzWVlBTk1wTnpUbE5UV3gtbXB4ayIsImV4cCI6MTc0NzA2ODU3Mywicm9sZXMiOlsiYWRtaW4iXSwiYWRtaW4iOnRydWUsInVzZXJfY2xhaW1zIjp7InVzZXJuYW1lIjoiYWRtaW4iLCJyb2xlcyI6WyJhZG1pbiJdLCJwZXJtaXNzaW9ucyI6WyJtYW5hZ2VfdXNlcnMiLCJtYW5hZ2Vfcm9sZXMiLCJtYW5hZ2VfYWxsX3Byb2plY3RzIiwibWFuYWdlX3Byb2plY3QiLCJtYW5hZ2VfYWxsX3Rhc2tzIiwibWFuYWdlX3Rhc2siLCJ2aWV3X3Byb2plY3QiLCJ2aWV3X3Rhc2siLCJtYW5hZ2VfcmVzb3VyY2VzIiwibWFuYWdlX3Jpc2tzIiwidmlld19yZXBvcnRzIiwiY3JlYXRlX3Rhc2siLCJhc3NpZ25fdGFzayIsImNoYW5nZV9wcm9qZWN0X3N0YXR1cyIsImNoYW5nZV90YXNrX3N0YXR1cyIsImNyZWF0ZV9wcm9qZWN0Il0sImlzX2FjdGl2ZSI6dHJ1ZX19.6Oy0tBTZpoDm2wAC8r-9mYrBrjf2WLfOqRpub0VZiWU; csrf_access_token=ImZhMmI3ODlmYzE3MWIzNzY0NWJiMDRhYzdjNzk3YzdiYzI4ZjVjNzQi.aCIYjQ.3hkuVrC3YYANMpNzTlNTWx-mpxk'}
2025-05-12 23:52:25,134 - app - INFO - 处理表单格式的登录请求
2025-05-12 23:52:25,134 - app - INFO - 表单数据: username=admin, password=********
2025-05-12 23:52:25,310 - app - INFO - 已生成CSRF令牌: ImZhMmI3OD...
2025-05-12 23:52:25,311 - app - INFO - 用户 admin 的角色: ['admin']
2025-05-12 23:52:25,311 - app - INFO - 用户 admin 是否是管理员: True
2025-05-12 23:52:25,322 - app - INFO - 用户登录成功: admin
2025-05-12 23:52:25,324 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 23:52:25] "[32mPOST /auth/login HTTP/1.1[0m" 302 -
2025-05-12 23:52:25,329 - app - DEBUG - Dashboard route accessed
2025-05-12 23:52:25,331 - app - DEBUG - Current user ID: 1
2025-05-12 23:52:25,340 - app - DEBUG - Dashboard data prepared for user: admin
2025-05-12 23:52:25,341 - app - ERROR - Error accessing dashboard: 'current_user_data' is undefined
Traceback (most recent call last):
  File "D:\tmp\work\app\routes\auth.py", line 1294, in dashboard
    return render_template(
           ^^^^^^^^^^^^^^^^
  File "D:\tmp\work\venv\Lib\site-packages\flask\templating.py", line 150, in render_template
    return _render(app, template, context)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\tmp\work\venv\Lib\site-packages\flask\templating.py", line 131, in _render
    rv = template.render(context)
         ^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\tmp\work\venv\Lib\site-packages\jinja2\environment.py", line 1301, in render
    self.environment.handle_exception()
  File "D:\tmp\work\venv\Lib\site-packages\jinja2\environment.py", line 936, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "D:\tmp\work\app\templates\dashboard.html", line 1, in top-level template code
    {% extends "base.html" %}
  File "D:\tmp\work\app\templates\base.html", line 1448, in top-level template code
    {% block content %}{% endblock %}
    ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\tmp\work\app\templates\dashboard.html", line 29, in block 'content'
    <div class="col-md-{% if 'manage_risks' in current_user_data.permissions or 'manage_resources' in current_user_data.permissions or 'admin' in current_user_data.roles %}3{% else %}6{% endif %} mb-3">
    ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\tmp\work\venv\Lib\site-packages\jinja2\environment.py", line 485, in getattr
    return getattr(obj, attribute)
           ^^^^^^^^^^^^^^^^^^^^^^^
jinja2.exceptions.UndefinedError: 'current_user_data' is undefined
2025-05-12 23:52:25,342 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 23:52:25] "GET /dashboard HTTP/1.1" 200 -
2025-05-12 23:52:25,365 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 23:52:25] "[36mGET /static/css/bootstrap.min.css HTTP/1.1[0m" 304 -
2025-05-12 23:52:25,366 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 23:52:25] "[36mGET /static/css/bootstrap-icons.css HTTP/1.1[0m" 304 -
2025-05-12 23:52:25,367 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 23:52:25] "[36mGET /static/css/style.css HTTP/1.1[0m" 304 -
2025-05-12 23:52:25,370 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 23:52:25] "[36mGET /static/js/jquery.min.js HTTP/1.1[0m" 304 -
2025-05-12 23:52:25,372 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 23:52:25] "[36mGET /static/js/bootstrap.bundle.min.js HTTP/1.1[0m" 304 -
2025-05-12 23:52:25,373 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 23:52:25] "[36mGET /static/js/utils.js HTTP/1.1[0m" 304 -
2025-05-12 23:52:25,376 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 23:52:25] "[36mGET /static/js/auth.js HTTP/1.1[0m" 304 -
2025-05-12 23:52:25,377 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 23:52:25] "[36mGET /static/images/background.png HTTP/1.1[0m" 304 -
2025-05-12 23:52:25,385 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 23:52:25] "[36mGET /static/js/fix-modals.js HTTP/1.1[0m" 304 -
2025-05-12 23:52:25,386 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 23:52:25] "[36mGET /static/js/csrf.js HTTP/1.1[0m" 304 -
2025-05-12 23:52:25,387 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 23:52:25] "[36mGET /static/js/user-profile.js HTTP/1.1[0m" 304 -
2025-05-12 23:52:25,391 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 23:52:25] "[36mGET /static/js/background-helper.js HTTP/1.1[0m" 304 -
2025-05-12 23:52:25,393 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 23:52:25] "[36mGET /static/uploads/background.png HTTP/1.1[0m" 304 -
2025-05-12 23:52:25,411 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 23:52:25] "[36mGET /static/favicon.ico HTTP/1.1[0m" 304 -
2025-05-12 23:52:26,585 - app - INFO - 登录请求 - 方法: POST, 内容类型: application/x-www-form-urlencoded
2025-05-12 23:52:26,587 - app - INFO - 请求头: {'Host': '127.0.0.1:5000', 'Connection': 'keep-alive', 'Content-Length': '135', 'Cache-Control': 'max-age=0', 'Sec-Ch-Ua': '"Chromium";v="136", "Microsoft Edge";v="136", "Not.A/Brand";v="99"', 'Sec-Ch-Ua-Mobile': '?0', 'Sec-Ch-Ua-Platform': '"Windows"', 'Origin': 'http://127.0.0.1:5000', 'Content-Type': 'application/x-www-form-urlencoded', 'Upgrade-Insecure-Requests': '1', 'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36 Edg/136.0.0.0', 'Accept': 'text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.7', 'Sec-Fetch-Site': 'same-origin', 'Sec-Fetch-Mode': 'navigate', 'Sec-Fetch-User': '?1', 'Sec-Fetch-Dest': 'document', 'Referer': 'http://127.0.0.1:5000/dashboard', 'Accept-Encoding': 'gzip, deflate, br, zstd', 'Accept-Language': 'zh-CN,zh;q=0.9,en;q=0.8,en-GB;q=0.7,en-US;q=0.6', 'Cookie': 'user_roles=admin; is_admin=true; csrf_token=ImZhMmI3ODlmYzE3MWIzNzY0NWJiMDRhYzdjNzk3YzdiYzI4ZjVjNzQi.aCIZOQ.qRjsgUGV7y51HycA-hwLHF8rqMc; user_roles=admin; is_admin=true; admin=true; admin_role=true; session=eyJjc3JmX3Rva2VuIjoiZmEyYjc4OWZjMTcxYjM3NjQ1YmIwNGFjN2M3OTdjN2JjMjhmNWM3NCJ9.aCIXrA.M7xMNdSySUF4E8Kf8S8noYEuSOU; access_token_cookie=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJmcmVzaCI6ZmFsc2UsImlhdCI6MTc0NzA2NTE0NSwianRpIjoiNjM0YTFhNjgtY2I2Yy00MWIzLTk2YTctYTY1NzEwNmMwMTBhIiwidHlwZSI6ImFjY2VzcyIsInN1YiI6MSwibmJmIjoxNzQ3MDY1MTQ1LCJjc3JmIjoiSW1aaE1tSTNPRGxtWXpFM01XSXpOelkwTldKaU1EUmhZemRqTnprM1l6ZGlZekk0WmpWak56UWkuYUNJWk9RLnFSanNnVUdWN3k1MUh5Y0EtaHdMSEY4cnFNYyIsImV4cCI6MTc0NzA2ODc0NSwicm9sZXMiOlsiYWRtaW4iXSwiYWRtaW4iOnRydWUsInVzZXJfY2xhaW1zIjp7InVzZXJuYW1lIjoiYWRtaW4iLCJyb2xlcyI6WyJhZG1pbiJdLCJwZXJtaXNzaW9ucyI6WyJtYW5hZ2VfdXNlcnMiLCJtYW5hZ2Vfcm9sZXMiLCJtYW5hZ2VfYWxsX3Byb2plY3RzIiwibWFuYWdlX3Byb2plY3QiLCJtYW5hZ2VfYWxsX3Rhc2tzIiwibWFuYWdlX3Rhc2siLCJ2aWV3X3Byb2plY3QiLCJ2aWV3X3Rhc2siLCJtYW5hZ2VfcmVzb3VyY2VzIiwibWFuYWdlX3Jpc2tzIiwidmlld19yZXBvcnRzIiwiY3JlYXRlX3Rhc2siLCJhc3NpZ25fdGFzayIsImNoYW5nZV9wcm9qZWN0X3N0YXR1cyIsImNoYW5nZV90YXNrX3N0YXR1cyIsImNyZWF0ZV9wcm9qZWN0Il0sImlzX2FjdGl2ZSI6dHJ1ZX19.bm2ys8TRlJIziRvQ5cqtF5lU8L-oJXeXWNLEEKDxUtM; csrf_access_token=ImZhMmI3ODlmYzE3MWIzNzY0NWJiMDRhYzdjNzk3YzdiYzI4ZjVjNzQi.aCIZOQ.qRjsgUGV7y51HycA-hwLHF8rqMc'}
2025-05-12 23:52:26,587 - app - INFO - 处理表单格式的登录请求
2025-05-12 23:52:26,588 - app - INFO - 表单数据: username=admin, password=********
2025-05-12 23:52:27,037 - app - INFO - 已生成CSRF令牌: ImZhMmI3OD...
2025-05-12 23:52:27,040 - app - INFO - 用户 admin 的角色: ['admin']
2025-05-12 23:52:27,040 - app - INFO - 用户 admin 是否是管理员: True
2025-05-12 23:52:27,065 - app - INFO - 用户登录成功: admin
2025-05-12 23:52:27,067 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 23:52:27] "[32mPOST /auth/login HTTP/1.1[0m" 302 -
2025-05-12 23:52:27,078 - app - DEBUG - Dashboard route accessed
2025-05-12 23:52:27,078 - app - DEBUG - Current user ID: 1
2025-05-12 23:52:27,113 - app - DEBUG - Dashboard data prepared for user: admin
2025-05-12 23:52:27,115 - app - ERROR - Error accessing dashboard: 'current_user_data' is undefined
Traceback (most recent call last):
  File "D:\tmp\work\app\routes\auth.py", line 1294, in dashboard
    return render_template(
           ^^^^^^^^^^^^^^^^
  File "D:\tmp\work\venv\Lib\site-packages\flask\templating.py", line 150, in render_template
    return _render(app, template, context)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\tmp\work\venv\Lib\site-packages\flask\templating.py", line 131, in _render
    rv = template.render(context)
         ^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\tmp\work\venv\Lib\site-packages\jinja2\environment.py", line 1301, in render
    self.environment.handle_exception()
  File "D:\tmp\work\venv\Lib\site-packages\jinja2\environment.py", line 936, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "D:\tmp\work\app\templates\dashboard.html", line 1, in top-level template code
    {% extends "base.html" %}
  File "D:\tmp\work\app\templates\base.html", line 1448, in top-level template code
    {% block content %}{% endblock %}
    ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\tmp\work\app\templates\dashboard.html", line 29, in block 'content'
    <div class="col-md-{% if 'manage_risks' in current_user_data.permissions or 'manage_resources' in current_user_data.permissions or 'admin' in current_user_data.roles %}3{% else %}6{% endif %} mb-3">
    ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\tmp\work\venv\Lib\site-packages\jinja2\environment.py", line 485, in getattr
    return getattr(obj, attribute)
           ^^^^^^^^^^^^^^^^^^^^^^^
jinja2.exceptions.UndefinedError: 'current_user_data' is undefined
2025-05-12 23:52:27,121 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 23:52:27] "GET /dashboard HTTP/1.1" 200 -
2025-05-12 23:52:27,153 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 23:52:27] "[36mGET /static/css/bootstrap.min.css HTTP/1.1[0m" 304 -
2025-05-12 23:52:27,154 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 23:52:27] "[36mGET /static/css/bootstrap-icons.css HTTP/1.1[0m" 304 -
2025-05-12 23:52:27,158 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 23:52:27] "[36mGET /static/css/style.css HTTP/1.1[0m" 304 -
2025-05-12 23:52:27,159 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 23:52:27] "[36mGET /static/js/jquery.min.js HTTP/1.1[0m" 304 -
2025-05-12 23:52:27,160 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 23:52:27] "[36mGET /static/js/bootstrap.bundle.min.js HTTP/1.1[0m" 304 -
2025-05-12 23:52:27,163 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 23:52:27] "[36mGET /static/js/utils.js HTTP/1.1[0m" 304 -
2025-05-12 23:52:27,166 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 23:52:27] "[36mGET /static/js/auth.js HTTP/1.1[0m" 304 -
2025-05-12 23:52:27,167 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 23:52:27] "[36mGET /static/js/fix-modals.js HTTP/1.1[0m" 304 -
2025-05-12 23:52:27,170 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 23:52:27] "[36mGET /static/images/background.png HTTP/1.1[0m" 304 -
2025-05-12 23:52:27,177 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 23:52:27] "[36mGET /static/js/csrf.js HTTP/1.1[0m" 304 -
2025-05-12 23:52:27,177 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 23:52:27] "[36mGET /static/js/user-profile.js HTTP/1.1[0m" 304 -
2025-05-12 23:52:27,181 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 23:52:27] "[36mGET /static/js/background-helper.js HTTP/1.1[0m" 304 -
2025-05-12 23:52:27,182 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 23:52:27] "[36mGET /static/uploads/background.png HTTP/1.1[0m" 304 -
2025-05-12 23:52:27,200 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 23:52:27] "[36mGET /static/favicon.ico HTTP/1.1[0m" 304 -
2025-05-12 23:54:49,289 - werkzeug - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2025-05-12 23:54:49,290 - werkzeug - INFO - [33mPress CTRL+C to quit[0m
2025-05-12 23:55:17,292 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 23:55:17] "[31m[1mGET /dashboard HTTP/1.1[0m" 401 -
2025-05-12 23:57:11,231 - app - WARNING - 绕过JWT验证: /dashboard
2025-05-12 23:57:11,233 - werkzeug - INFO - 127.0.0.1 - - [12/May/2025 23:57:11] "[31m[1mGET /dashboard?bypass_jwt=true HTTP/1.1[0m" 401 -
2025-05-12 23:59:14,466 - werkzeug - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2025-05-12 23:59:14,467 - werkzeug - INFO - [33mPress CTRL+C to quit[0m
2025-05-13 00:01:28,286 - app - WARNING - 绕过JWT验证: /dashboard
2025-05-13 00:01:28,288 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 00:01:28] "[31m[1mGET /dashboard?bypass_jwt=true HTTP/1.1[0m" 401 -
2025-05-13 00:03:13,041 - werkzeug - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2025-05-13 00:03:13,042 - werkzeug - INFO - [33mPress CTRL+C to quit[0m
2025-05-13 00:04:49,140 - app - WARNING - 绕过JWT验证: /dashboard
2025-05-13 00:04:49,140 - app.utils.jwt_callbacks - WARNING - JWT验证已被绕过: /dashboard
2025-05-13 00:04:49,140 - app - DEBUG - Dashboard route accessed
2025-05-13 00:04:49,140 - app.utils.jwt_callbacks - WARNING - 使用bypass_jwt返回默认用户ID: 1
2025-05-13 00:04:49,140 - app - DEBUG - Current user ID: 1
2025-05-13 00:04:49,231 - app - DEBUG - Dashboard data prepared for user: admin
2025-05-13 00:04:49,257 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 00:04:49] "GET /dashboard?bypass_jwt=true HTTP/1.1" 200 -
2025-05-13 00:07:28,920 - flask_wtf.csrf - INFO - The CSRF token is missing.
2025-05-13 00:07:28,922 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 00:07:28] "[31m[1mPOST /api/projects?bypass_jwt=true HTTP/1.1[0m" 400 -
2025-05-13 00:08:29,611 - werkzeug - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2025-05-13 00:08:29,611 - werkzeug - INFO - [33mPress CTRL+C to quit[0m
2025-05-13 00:09:54,906 - flask_wtf.csrf - INFO - The CSRF token is missing.
2025-05-13 00:09:54,907 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 00:09:54] "[31m[1mPOST /api/projects?bypass_jwt=true HTTP/1.1[0m" 400 -
2025-05-13 00:11:31,044 - werkzeug - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2025-05-13 00:11:31,045 - werkzeug - INFO - [33mPress CTRL+C to quit[0m
2025-05-13 00:12:35,258 - flask_wtf.csrf - INFO - The CSRF token is missing.
2025-05-13 00:12:35,259 - app - WARNING - CSRF验证失败: 400 Bad Request: The CSRF token is missing.
2025-05-13 00:12:35,259 - app - WARNING - 由于bypass_jwt参数，忽略CSRF验证错误: /api/projects
2025-05-13 00:12:35,259 - app - ERROR - Exception on /api/projects [POST]
Traceback (most recent call last):
  File "D:\tmp\work\venv\Lib\site-packages\flask\app.py", line 1511, in wsgi_app
    response = self.full_dispatch_request()
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\tmp\work\venv\Lib\site-packages\flask\app.py", line 920, in full_dispatch_request
    return self.finalize_request(rv)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\tmp\work\venv\Lib\site-packages\flask\app.py", line 939, in finalize_request
    response = self.make_response(rv)
               ^^^^^^^^^^^^^^^^^^^^^^
  File "D:\tmp\work\venv\Lib\site-packages\flask\app.py", line 1212, in make_response
    raise TypeError(
TypeError: The view function for 'projects.handle_projects' did not return a valid response. The function either returned None or ended without a return statement.
2025-05-13 00:12:35,261 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 00:12:35] "[35m[1mPOST /api/projects?bypass_jwt=true HTTP/1.1[0m" 500 -
2025-05-13 00:14:42,126 - werkzeug - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2025-05-13 00:14:42,126 - werkzeug - INFO - [33mPress CTRL+C to quit[0m
2025-05-13 00:15:55,953 - flask_wtf.csrf - INFO - The CSRF token is missing.
2025-05-13 00:15:55,953 - app - WARNING - CSRF验证失败: 400 Bad Request: The CSRF token is missing.
2025-05-13 00:15:55,953 - app - WARNING - 由于bypass_jwt参数，忽略CSRF验证错误: /api/projects
2025-05-13 00:15:55,953 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 00:15:55] "POST /api/projects?bypass_jwt=true HTTP/1.1" 200 -
2025-05-13 00:16:25,245 - app - WARNING - 绕过JWT验证: /api/projects
2025-05-13 00:16:25,322 - app.routes.projects - INFO - API获取项目列表成功，返回 6 个项目
2025-05-13 00:16:25,322 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 00:16:25] "GET /api/projects?bypass_jwt=true HTTP/1.1" 200 -
2025-05-13 00:16:44,897 - app - DEBUG - Dashboard route accessed
2025-05-13 00:16:44,897 - app - DEBUG - Current user ID: 1
2025-05-13 00:16:44,912 - app - DEBUG - Dashboard data prepared for user: admin
2025-05-13 00:16:44,936 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 00:16:44] "GET /dashboard HTTP/1.1" 200 -
2025-05-13 00:16:45,030 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 00:16:45] "[36mGET /static/css/bootstrap.min.css HTTP/1.1[0m" 304 -
2025-05-13 00:16:45,034 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 00:16:45] "[36mGET /static/js/auth.js HTTP/1.1[0m" 304 -
2025-05-13 00:16:45,035 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 00:16:45] "[36mGET /static/js/fix-modals.js HTTP/1.1[0m" 304 -
2025-05-13 00:16:45,039 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 00:16:45] "[36mGET /static/js/csrf.js HTTP/1.1[0m" 304 -
2025-05-13 00:16:45,043 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 00:16:45] "[36mGET /static/js/user-profile.js HTTP/1.1[0m" 304 -
2025-05-13 00:16:45,053 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 00:16:45] "[36mGET /static/css/bootstrap-icons.css HTTP/1.1[0m" 304 -
2025-05-13 00:16:45,054 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 00:16:45] "[36mGET /static/js/bootstrap.bundle.min.js HTTP/1.1[0m" 304 -
2025-05-13 00:16:45,055 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 00:16:45] "[36mGET /static/js/jquery.min.js HTTP/1.1[0m" 304 -
2025-05-13 00:16:45,059 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 00:16:45] "[36mGET /static/js/utils.js HTTP/1.1[0m" 304 -
2025-05-13 00:16:45,060 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 00:16:45] "[36mGET /static/css/style.css HTTP/1.1[0m" 304 -
2025-05-13 00:16:45,085 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 00:16:45] "GET /static/css/fonts/bootstrap-icons.woff2 HTTP/1.1" 200 -
2025-05-13 00:16:45,098 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 00:16:45] "[36mGET /static/favicon.ico HTTP/1.1[0m" 304 -
2025-05-13 00:16:46,214 - app - WARNING - 绕过JWT验证: /projects
2025-05-13 00:16:46,214 - app.utils.jwt_callbacks - WARNING - JWT验证已被绕过: /projects
2025-05-13 00:16:46,214 - app.routes.main - INFO - JWT bypass enabled for projects - Using test user
2025-05-13 00:16:46,226 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 00:16:46] "GET /projects?bypass_jwt=true HTTP/1.1" 200 -
2025-05-13 00:16:46,251 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 00:16:46] "[36mGET /static/css/bootstrap.min.css HTTP/1.1[0m" 304 -
2025-05-13 00:16:46,252 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 00:16:46] "[36mGET /static/css/bootstrap-icons.css HTTP/1.1[0m" 304 -
2025-05-13 00:16:46,254 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 00:16:46] "GET /static/css/frappe-gantt.css HTTP/1.1" 200 -
2025-05-13 00:16:46,255 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 00:16:46] "[36mGET /static/css/style.css HTTP/1.1[0m" 304 -
2025-05-13 00:16:46,256 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 00:16:46] "[36mGET /static/js/jquery.min.js HTTP/1.1[0m" 304 -
2025-05-13 00:16:46,257 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 00:16:46] "[36mGET /static/js/bootstrap.bundle.min.js HTTP/1.1[0m" 304 -
2025-05-13 00:16:46,261 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 00:16:46] "[36mGET /static/js/utils.js HTTP/1.1[0m" 304 -
2025-05-13 00:16:46,264 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 00:16:46] "[36mGET /static/js/auth.js HTTP/1.1[0m" 304 -
2025-05-13 00:16:46,264 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 00:16:46] "GET /static/js/frappe-gantt.min.js HTTP/1.1" 200 -
2025-05-13 00:16:46,266 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 00:16:46] "[36mGET /static/js/fix-modals.js HTTP/1.1[0m" 304 -
2025-05-13 00:16:46,268 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 00:16:46] "[36mGET /static/js/csrf.js HTTP/1.1[0m" 304 -
2025-05-13 00:16:46,269 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 00:16:46] "[36mGET /static/js/user-profile.js HTTP/1.1[0m" 304 -
2025-05-13 00:16:46,290 - app - WARNING - 绕过JWT验证: /api/global/users
2025-05-13 00:16:46,292 - app - ERROR - 获取用户列表失败: type object 'User' has no attribute 'status'
2025-05-13 00:16:46,292 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 00:16:46] "[35m[1mGET /api/global/users?bypass_jwt=true&_=1747066606287 HTTP/1.1[0m" 500 -
2025-05-13 00:16:46,299 - app - WARNING - 绕过JWT验证: /api/project-managers
2025-05-13 00:16:46,300 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 00:16:46] "[33mGET /api/project-managers?bypass_jwt=true&_=1747066606295 HTTP/1.1[0m" 404 -
2025-05-13 00:16:46,301 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 00:16:46] "[36mGET /static/favicon.ico HTTP/1.1[0m" 304 -
2025-05-13 00:16:46,307 - app - WARNING - 绕过JWT验证: /api/global/project-managers
2025-05-13 00:16:46,307 - app.routes.projects - ERROR - 获取项目经理列表失败: type object 'User' has no attribute 'active'
2025-05-13 00:16:46,308 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 00:16:46] "[35m[1mGET /api/global/project-managers?bypass_jwt=true&_=1747066606295 HTTP/1.1[0m" 500 -
2025-05-13 00:16:46,313 - app - WARNING - 绕过JWT验证: /api/noauth/project-managers
2025-05-13 00:16:46,314 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 00:16:46] "[33mGET /api/noauth/project-managers?bypass_jwt=true&_=1747066606295 HTTP/1.1[0m" 404 -
2025-05-13 00:16:47,939 - app - WARNING - 绕过JWT验证: /projects/detail/1
2025-05-13 00:16:47,940 - app - INFO - 直接调用项目详情视图函数，不进行重定向: 项目ID=1
2025-05-13 00:16:47,940 - app.utils.jwt_callbacks - WARNING - JWT验证已被绕过: /projects/detail/1
2025-05-13 00:16:47,940 - app.utils.jwt_callbacks - WARNING - 使用bypass_jwt返回默认用户ID: 1
2025-05-13 00:16:47,940 - app.routes.projects - INFO - 获取项目 1 详情页面 - 用户ID: 1, URL: http://127.0.0.1:5000/projects/detail/1?no_redirect=true&bypass_jwt=true
2025-05-13 00:16:47,966 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 00:16:47] "GET /projects/detail/1?no_redirect=true&bypass_jwt=true HTTP/1.1" 200 -
2025-05-13 00:16:47,994 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 00:16:47] "[36mGET /static/css/bootstrap.min.css HTTP/1.1[0m" 304 -
2025-05-13 00:16:47,995 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 00:16:47] "[36mGET /static/css/bootstrap-icons.css HTTP/1.1[0m" 304 -
2025-05-13 00:16:47,996 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 00:16:47] "[36mGET /static/css/style.css HTTP/1.1[0m" 304 -
2025-05-13 00:16:47,996 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 00:16:47] "[36mGET /static/js/jquery.min.js HTTP/1.1[0m" 304 -
2025-05-13 00:16:47,998 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 00:16:47] "[36mGET /static/js/bootstrap.bundle.min.js HTTP/1.1[0m" 304 -
2025-05-13 00:16:47,999 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 00:16:47] "[36mGET /static/js/utils.js HTTP/1.1[0m" 304 -
2025-05-13 00:16:48,001 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 00:16:48] "[36mGET /static/js/auth.js HTTP/1.1[0m" 304 -
2025-05-13 00:16:48,002 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 00:16:48] "[36mGET /static/js/fix-modals.js HTTP/1.1[0m" 304 -
2025-05-13 00:16:48,002 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 00:16:48] "[36mGET /static/js/csrf.js HTTP/1.1[0m" 304 -
2025-05-13 00:16:48,004 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 00:16:48] "[36mGET /static/js/user-profile.js HTTP/1.1[0m" 304 -
2025-05-13 00:16:48,033 - app - WARNING - 绕过JWT验证: /api/global/users
2025-05-13 00:16:48,035 - app - ERROR - 获取用户列表失败: type object 'User' has no attribute 'status'
2025-05-13 00:16:48,035 - app - WARNING - 绕过JWT验证: /api/projects/1/risks
2025-05-13 00:16:48,036 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 00:16:48] "[35m[1mGET /api/global/users?bypass_jwt=true&_=1747066608029 HTTP/1.1[0m" 500 -
2025-05-13 00:16:48,036 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 00:16:48] "[33mGET /api/projects/1/risks?bypass_jwt=true&_=1747066608030 HTTP/1.1[0m" 404 -
2025-05-13 00:16:48,037 - app - WARNING - 绕过JWT验证: /api/global/users
2025-05-13 00:16:48,037 - app - WARNING - 绕过JWT验证: /api/projects/1/risks
2025-05-13 00:16:48,038 - app - ERROR - 获取用户列表失败: type object 'User' has no attribute 'status'
2025-05-13 00:16:48,038 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 00:16:48] "[33mGET /api/projects/1/risks?bypass_jwt=true&_=1747066608031 HTTP/1.1[0m" 404 -
2025-05-13 00:16:48,038 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 00:16:48] "[35m[1mGET /api/global/users?bypass_jwt=true&_=1747066608030 HTTP/1.1[0m" 500 -
2025-05-13 00:16:48,045 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 00:16:48] "[36mGET /static/favicon.ico HTTP/1.1[0m" 304 -
2025-05-13 00:16:48,046 - app - WARNING - 绕过JWT验证: /api/users
2025-05-13 00:16:48,047 - app - WARNING - 绕过JWT验证: /api/risks
2025-05-13 00:16:48,047 - app.utils.jwt_callbacks - WARNING - JWT验证已被绕过: /api/users
2025-05-13 00:16:48,049 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 00:16:48] "[33mGET /api/risks?project_id=1&bypass_jwt=true&_=1747066608030 HTTP/1.1[0m" 404 -
2025-05-13 00:16:48,049 - app - INFO - JWT bypass enabled for getting users
2025-05-13 00:16:48,050 - app - WARNING - 绕过JWT验证: /api/risks
2025-05-13 00:16:48,050 - app - WARNING - 绕过JWT验证: /api/users
2025-05-13 00:16:48,051 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 00:16:48] "[33mGET /api/risks?project_id=1&bypass_jwt=true&_=1747066608031 HTTP/1.1[0m" 404 -
2025-05-13 00:16:48,051 - app.utils.jwt_callbacks - WARNING - JWT验证已被绕过: /api/users
2025-05-13 00:16:48,053 - app - INFO - JWT bypass enabled for getting users
2025-05-13 00:16:48,055 - app - WARNING - 绕过JWT验证: /api/auth/risks
2025-05-13 00:16:48,057 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 00:16:48] "[33mGET /api/auth/risks?project_id=1&bypass_jwt=true&_=1747066608030 HTTP/1.1[0m" 404 -
2025-05-13 00:16:48,058 - app - WARNING - 绕过JWT验证: /api/auth/risks
2025-05-13 00:16:48,060 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 00:16:48] "[33mGET /api/auth/risks?project_id=1&bypass_jwt=true&_=1747066608031 HTTP/1.1[0m" 404 -
2025-05-13 00:16:48,064 - app - WARNING - 绕过JWT验证: /api/noauth/risks
2025-05-13 00:16:48,065 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 00:16:48] "[33mGET /api/noauth/risks?project_id=1&bypass_jwt=true&_=1747066608030 HTTP/1.1[0m" 404 -
2025-05-13 00:16:48,067 - app - WARNING - 绕过JWT验证: /api/noauth/risks
2025-05-13 00:16:48,069 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 00:16:48] "[33mGET /api/noauth/risks?project_id=1&bypass_jwt=true&_=1747066608031 HTTP/1.1[0m" 404 -
2025-05-13 00:16:48,087 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 00:16:48] "GET /api/users?bypass_jwt=true&_=1747066608029 HTTP/1.1" 200 -
2025-05-13 00:16:48,089 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 00:16:48] "GET /api/users?bypass_jwt=true&_=1747066608030 HTTP/1.1" 200 -
2025-05-13 00:16:49,199 - app - WARNING - 绕过JWT验证: /api/global/users
2025-05-13 00:16:49,201 - app - WARNING - 绕过JWT验证: /api/global/users
2025-05-13 00:16:49,201 - app - ERROR - 获取用户列表失败: type object 'User' has no attribute 'status'
2025-05-13 00:16:49,202 - app - WARNING - 绕过JWT验证: /api/global/users
2025-05-13 00:16:49,203 - app - ERROR - 获取用户列表失败: type object 'User' has no attribute 'status'
2025-05-13 00:16:49,203 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 00:16:49] "[35m[1mGET /api/global/users?bypass_jwt=true&_=1747066609197 HTTP/1.1[0m" 500 -
2025-05-13 00:16:49,204 - app - WARNING - 绕过JWT验证: /api/global/users
2025-05-13 00:16:49,204 - app - ERROR - 获取用户列表失败: type object 'User' has no attribute 'status'
2025-05-13 00:16:49,204 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 00:16:49] "[35m[1mGET /api/global/users?bypass_jwt=true&_=1747066609198 HTTP/1.1[0m" 500 -
2025-05-13 00:16:49,205 - app - WARNING - 绕过JWT验证: /api/global/users
2025-05-13 00:16:49,205 - app - WARNING - 绕过JWT验证: /api/global/users
2025-05-13 00:16:49,206 - app - ERROR - 获取用户列表失败: type object 'User' has no attribute 'status'
2025-05-13 00:16:49,207 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 00:16:49] "[35m[1mGET /api/global/users?bypass_jwt=true&_=1747066609199 HTTP/1.1[0m" 500 -
2025-05-13 00:16:49,209 - app - ERROR - 获取用户列表失败: type object 'User' has no attribute 'status'
2025-05-13 00:16:49,209 - app - ERROR - 获取用户列表失败: type object 'User' has no attribute 'status'
2025-05-13 00:16:49,209 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 00:16:49] "[35m[1mGET /api/global/users?bypass_jwt=true&_=1747066609200 HTTP/1.1[0m" 500 -
2025-05-13 00:16:49,210 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 00:16:49] "[35m[1mGET /api/global/users?bypass_jwt=true&_=1747066609201 HTTP/1.1[0m" 500 -
2025-05-13 00:16:49,210 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 00:16:49] "[35m[1mGET /api/global/users?bypass_jwt=true&_=1747066609202 HTTP/1.1[0m" 500 -
2025-05-13 00:16:49,215 - app - WARNING - 绕过JWT验证: /api/global/users
2025-05-13 00:16:49,217 - app - ERROR - 获取用户列表失败: type object 'User' has no attribute 'status'
2025-05-13 00:16:49,217 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 00:16:49] "[35m[1mGET /api/global/users?bypass_jwt=true&_=1747066609199 HTTP/1.1[0m" 500 -
2025-05-13 08:43:48,980 - app.utils.permissions - INFO - 更新权限: manage_users
2025-05-13 08:43:48,980 - app.utils.permissions - INFO - 更新权限: manage_roles
2025-05-13 08:43:48,981 - app.utils.permissions - INFO - 更新权限: manage_all_projects
2025-05-13 08:43:48,981 - app.utils.permissions - INFO - 更新权限: manage_project
2025-05-13 08:43:48,982 - app.utils.permissions - INFO - 更新权限: manage_all_tasks
2025-05-13 08:43:48,982 - app.utils.permissions - INFO - 更新权限: manage_task
2025-05-13 08:43:48,982 - app.utils.permissions - INFO - 更新权限: view_project
2025-05-13 08:43:48,983 - app.utils.permissions - INFO - 更新权限: view_task
2025-05-13 08:43:48,983 - app.utils.permissions - INFO - 更新权限: manage_resources
2025-05-13 08:43:48,983 - app.utils.permissions - INFO - 更新权限: manage_risks
2025-05-13 08:43:48,984 - app.utils.permissions - INFO - 更新权限: view_reports
2025-05-13 08:43:48,984 - app.utils.permissions - INFO - 更新权限: create_task
2025-05-13 08:43:48,984 - app.utils.permissions - INFO - 更新权限: create_project
2025-05-13 08:43:48,985 - app.utils.permissions - INFO - 更新权限: assign_task
2025-05-13 08:43:48,985 - app.utils.permissions - INFO - 更新权限: change_project_status
2025-05-13 08:43:48,985 - app.utils.permissions - INFO - 更新权限: change_task_status
2025-05-13 08:43:48,987 - app.utils.permissions - INFO - 更新角色: admin
2025-05-13 08:43:48,990 - app.utils.permissions - INFO - 为管理员角色添加所有权限: 16个
2025-05-13 08:43:48,990 - app.utils.permissions - INFO - 更新角色: manager
2025-05-13 08:43:48,991 - app.utils.permissions - INFO - 为角色 manager 添加权限: manage_project
2025-05-13 08:43:48,991 - app.utils.permissions - INFO - 为角色 manager 添加权限: manage_task
2025-05-13 08:43:48,991 - app.utils.permissions - INFO - 为角色 manager 添加权限: view_project
2025-05-13 08:43:48,991 - app.utils.permissions - INFO - 为角色 manager 添加权限: view_task
2025-05-13 08:43:48,992 - app.utils.permissions - INFO - 为角色 manager 添加权限: manage_resources
2025-05-13 08:43:48,992 - app.utils.permissions - INFO - 为角色 manager 添加权限: manage_risks
2025-05-13 08:43:48,992 - app.utils.permissions - INFO - 为角色 manager 添加权限: view_reports
2025-05-13 08:43:48,992 - app.utils.permissions - INFO - 为角色 manager 添加权限: create_project
2025-05-13 08:43:48,992 - app.utils.permissions - INFO - 为角色 manager 添加权限: create_task
2025-05-13 08:43:48,992 - app.utils.permissions - INFO - 为角色 manager 添加权限: assign_task
2025-05-13 08:43:48,992 - app.utils.permissions - INFO - 为角色 manager 添加权限: change_project_status
2025-05-13 08:43:48,992 - app.utils.permissions - INFO - 为角色 manager 添加权限: change_task_status
2025-05-13 08:43:48,993 - app.utils.permissions - INFO - 更新角色: user
2025-05-13 08:43:48,995 - app.utils.permissions - INFO - 为角色 user 添加权限: view_project
2025-05-13 08:43:48,995 - app.utils.permissions - INFO - 为角色 user 添加权限: view_task
2025-05-13 08:43:48,995 - app.utils.permissions - INFO - 为角色 user 添加权限: view_reports
2025-05-13 08:43:48,995 - app.utils.permissions - INFO - 角色和权限初始化完成
2025-05-13 08:43:48,995 - __main__ - INFO - 角色和权限初始化成功
2025-05-13 08:43:48,998 - __main__ - INFO - 数据库初始化完成
2025-05-13 08:43:49,007 - __main__ - INFO - 系统资源检查完成
2025-05-13 08:43:49,008 - __main__ - INFO - 开始清理旧数据
2025-05-13 08:43:49,010 - __main__ - INFO - 删除了 0 条过期的资源使用记录
2025-05-13 08:43:49,011 - __main__ - INFO - 删除了 0 条已解决的过期警报
2025-05-13 08:43:49,011 - __main__ - INFO - 旧数据清理完成
2025-05-13 08:43:49,029 - werkzeug - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:5000
 * Running on http://192.168.0.66:5000
2025-05-13 08:43:49,030 - werkzeug - INFO - [33mPress CTRL+C to quit[0m
2025-05-13 08:43:49,030 - werkzeug - INFO -  * Restarting with stat
2025-05-13 08:43:50,059 - app.utils.permissions - INFO - 更新权限: manage_users
2025-05-13 08:43:50,059 - app.utils.permissions - INFO - 更新权限: manage_roles
2025-05-13 08:43:50,061 - app.utils.permissions - INFO - 更新权限: manage_all_projects
2025-05-13 08:43:50,061 - app.utils.permissions - INFO - 更新权限: manage_project
2025-05-13 08:43:50,062 - app.utils.permissions - INFO - 更新权限: manage_all_tasks
2025-05-13 08:43:50,062 - app.utils.permissions - INFO - 更新权限: manage_task
2025-05-13 08:43:50,063 - app.utils.permissions - INFO - 更新权限: view_project
2025-05-13 08:43:50,063 - app.utils.permissions - INFO - 更新权限: view_task
2025-05-13 08:43:50,063 - app.utils.permissions - INFO - 更新权限: manage_resources
2025-05-13 08:43:50,064 - app.utils.permissions - INFO - 更新权限: manage_risks
2025-05-13 08:43:50,064 - app.utils.permissions - INFO - 更新权限: view_reports
2025-05-13 08:43:50,064 - app.utils.permissions - INFO - 更新权限: create_task
2025-05-13 08:43:50,065 - app.utils.permissions - INFO - 更新权限: create_project
2025-05-13 08:43:50,065 - app.utils.permissions - INFO - 更新权限: assign_task
2025-05-13 08:43:50,066 - app.utils.permissions - INFO - 更新权限: change_project_status
2025-05-13 08:43:50,066 - app.utils.permissions - INFO - 更新权限: change_task_status
2025-05-13 08:43:50,068 - app.utils.permissions - INFO - 更新角色: admin
2025-05-13 08:43:50,070 - app.utils.permissions - INFO - 为管理员角色添加所有权限: 16个
2025-05-13 08:43:50,071 - app.utils.permissions - INFO - 更新角色: manager
2025-05-13 08:43:50,072 - app.utils.permissions - INFO - 为角色 manager 添加权限: manage_project
2025-05-13 08:43:50,072 - app.utils.permissions - INFO - 为角色 manager 添加权限: manage_task
2025-05-13 08:43:50,072 - app.utils.permissions - INFO - 为角色 manager 添加权限: view_project
2025-05-13 08:43:50,072 - app.utils.permissions - INFO - 为角色 manager 添加权限: view_task
2025-05-13 08:43:50,072 - app.utils.permissions - INFO - 为角色 manager 添加权限: manage_resources
2025-05-13 08:43:50,072 - app.utils.permissions - INFO - 为角色 manager 添加权限: manage_risks
2025-05-13 08:43:50,072 - app.utils.permissions - INFO - 为角色 manager 添加权限: view_reports
2025-05-13 08:43:50,072 - app.utils.permissions - INFO - 为角色 manager 添加权限: create_project
2025-05-13 08:43:50,072 - app.utils.permissions - INFO - 为角色 manager 添加权限: create_task
2025-05-13 08:43:50,072 - app.utils.permissions - INFO - 为角色 manager 添加权限: assign_task
2025-05-13 08:43:50,072 - app.utils.permissions - INFO - 为角色 manager 添加权限: change_project_status
2025-05-13 08:43:50,073 - app.utils.permissions - INFO - 为角色 manager 添加权限: change_task_status
2025-05-13 08:43:50,073 - app.utils.permissions - INFO - 更新角色: user
2025-05-13 08:43:50,073 - app.utils.permissions - INFO - 为角色 user 添加权限: view_project
2025-05-13 08:43:50,074 - app.utils.permissions - INFO - 为角色 user 添加权限: view_task
2025-05-13 08:43:50,074 - app.utils.permissions - INFO - 为角色 user 添加权限: view_reports
2025-05-13 08:43:50,074 - app.utils.permissions - INFO - 角色和权限初始化完成
2025-05-13 08:43:50,074 - __main__ - INFO - 角色和权限初始化成功
2025-05-13 08:43:50,077 - __main__ - INFO - 数据库初始化完成
2025-05-13 08:43:50,090 - __main__ - INFO - 系统资源检查完成
2025-05-13 08:43:50,091 - __main__ - INFO - 开始清理旧数据
2025-05-13 08:43:50,093 - __main__ - INFO - 删除了 0 条过期的资源使用记录
2025-05-13 08:43:50,095 - __main__ - INFO - 删除了 0 条已解决的过期警报
2025-05-13 08:43:50,095 - __main__ - INFO - 旧数据清理完成
2025-05-13 08:43:50,102 - werkzeug - WARNING -  * Debugger is active!
2025-05-13 08:43:50,106 - werkzeug - INFO -  * Debugger PIN: 670-037-726
2025-05-13 08:45:09,899 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 08:45:09] "GET /login HTTP/1.1" 200 -
2025-05-13 08:45:10,143 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 08:45:10] "GET /static/css/style.css HTTP/1.1" 200 -
2025-05-13 08:45:10,146 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 08:45:10] "GET /static/css/bootstrap.min.css HTTP/1.1" 200 -
2025-05-13 08:45:10,148 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 08:45:10] "GET /static/js/auth.js HTTP/1.1" 200 -
2025-05-13 08:45:10,148 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 08:45:10] "GET /static/js/bootstrap.bundle.min.js HTTP/1.1" 200 -
2025-05-13 08:45:10,149 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 08:45:10] "GET /static/js/utils.js HTTP/1.1" 200 -
2025-05-13 08:45:10,150 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 08:45:10] "GET /static/css/bootstrap-icons.css HTTP/1.1" 200 -
2025-05-13 08:45:10,150 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 08:45:10] "GET /static/js/jquery.min.js HTTP/1.1" 200 -
2025-05-13 08:45:10,152 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 08:45:10] "GET /static/images/background.png HTTP/1.1" 200 -
2025-05-13 08:45:10,158 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 08:45:10] "GET /static/js/fix-modals.js HTTP/1.1" 200 -
2025-05-13 08:45:10,172 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 08:45:10] "GET /static/js/csrf.js HTTP/1.1" 200 -
2025-05-13 08:45:10,173 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 08:45:10] "GET /static/js/user-profile.js HTTP/1.1" 200 -
2025-05-13 08:45:10,175 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 08:45:10] "GET /static/js/background-helper.js HTTP/1.1" 200 -
2025-05-13 08:45:10,176 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 08:45:10] "GET /static/uploads/background.png HTTP/1.1" 200 -
2025-05-13 08:45:10,202 - app - WARNING - 绕过JWT验证: /auth/user_info
2025-05-13 08:45:10,203 - app.utils.jwt_callbacks - WARNING - JWT验证已被绕过: /auth/user_info
2025-05-13 08:45:10,203 - app - INFO - 获取用户信息 - bypass_jwt: True
2025-05-13 08:45:10,203 - app - INFO - 使用默认管理员用户(ID=1)
2025-05-13 08:45:10,220 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 08:45:10] "GET /static/favicon.ico HTTP/1.1" 200 -
2025-05-13 08:45:10,221 - app - INFO - 成功获取用户 admin 的信息
2025-05-13 08:45:10,222 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 08:45:10] "GET /auth/user_info?_=1747097110199&bypass_jwt=true HTTP/1.1" 200 -
2025-05-13 08:45:11,668 - app - INFO - 登录请求 - 方法: POST, 内容类型: application/x-www-form-urlencoded
2025-05-13 08:45:11,668 - app - INFO - 请求头: {'Host': '127.0.0.1:5000', 'Connection': 'keep-alive', 'Content-Length': '135', 'Cache-Control': 'max-age=0', 'Sec-Ch-Ua': '"Chromium";v="136", "Microsoft Edge";v="136", "Not.A/Brand";v="99"', 'Sec-Ch-Ua-Mobile': '?0', 'Sec-Ch-Ua-Platform': '"Windows"', 'Origin': 'http://127.0.0.1:5000', 'Content-Type': 'application/x-www-form-urlencoded', 'Upgrade-Insecure-Requests': '1', 'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36 Edg/136.0.0.0', 'Accept': 'text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.7', 'Sec-Fetch-Site': 'same-origin', 'Sec-Fetch-Mode': 'navigate', 'Sec-Fetch-User': '?1', 'Sec-Fetch-Dest': 'document', 'Referer': 'http://127.0.0.1:5000/login', 'Accept-Encoding': 'gzip, deflate, br, zstd', 'Accept-Language': 'zh-CN,zh;q=0.9,en;q=0.8,en-GB;q=0.7,en-US;q=0.6', 'Cookie': 'session=eyJjc3JmX3Rva2VuIjoiYTlhNjM0NTExZTM3MDEzNDJhMTMwYzYwZGEyNWY0Y2FmMTgwZDBjMCJ9.aCKWFQ.Dd-3qe8luJIy-cZzzSSLkLK1Wk0; user_roles=admin; is_admin=true; admin=true'}
2025-05-13 08:45:11,669 - app - INFO - 处理表单格式的登录请求
2025-05-13 08:45:11,669 - app - INFO - 表单数据: username=admin, password=********
2025-05-13 08:45:12,176 - app - INFO - 已生成CSRF令牌: ImE5YTYzND...
2025-05-13 08:45:12,179 - app - INFO - 用户 admin 的角色: ['admin']
2025-05-13 08:45:12,179 - app - INFO - 用户 admin 是否是管理员: True
2025-05-13 08:45:12,204 - app - INFO - 用户登录成功: admin
2025-05-13 08:45:12,205 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 08:45:12] "[32mPOST /auth/login HTTP/1.1[0m" 302 -
2025-05-13 08:45:12,216 - app - DEBUG - Dashboard route accessed
2025-05-13 08:45:12,216 - app - DEBUG - Current user ID: 1
2025-05-13 08:45:12,229 - app - DEBUG - Dashboard data prepared for user: admin
2025-05-13 08:45:12,250 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 08:45:12] "GET /dashboard HTTP/1.1" 200 -
2025-05-13 08:45:12,273 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 08:45:12] "[36mGET /static/css/bootstrap.min.css HTTP/1.1[0m" 304 -
2025-05-13 08:45:12,275 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 08:45:12] "[36mGET /static/css/bootstrap-icons.css HTTP/1.1[0m" 304 -
2025-05-13 08:45:12,281 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 08:45:12] "[36mGET /static/js/jquery.min.js HTTP/1.1[0m" 304 -
2025-05-13 08:45:12,281 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 08:45:12] "[36mGET /static/css/style.css HTTP/1.1[0m" 304 -
2025-05-13 08:45:12,286 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 08:45:12] "[36mGET /static/js/bootstrap.bundle.min.js HTTP/1.1[0m" 304 -
2025-05-13 08:45:12,291 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 08:45:12] "[36mGET /static/js/utils.js HTTP/1.1[0m" 304 -
2025-05-13 08:45:12,292 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 08:45:12] "[36mGET /static/js/fix-modals.js HTTP/1.1[0m" 304 -
2025-05-13 08:45:12,293 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 08:45:12] "[36mGET /static/js/auth.js HTTP/1.1[0m" 304 -
2025-05-13 08:45:12,296 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 08:45:12] "[36mGET /static/js/csrf.js HTTP/1.1[0m" 304 -
2025-05-13 08:45:12,300 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 08:45:12] "[36mGET /static/js/user-profile.js HTTP/1.1[0m" 304 -
2025-05-13 08:45:12,319 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 08:45:12] "GET /static/css/fonts/bootstrap-icons.woff2 HTTP/1.1" 200 -
2025-05-13 08:45:12,335 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 08:45:12] "[36mGET /static/favicon.ico HTTP/1.1[0m" 304 -
2025-05-13 08:45:13,578 - app - WARNING - 绕过JWT验证: /projects
2025-05-13 08:45:13,579 - app.utils.jwt_callbacks - WARNING - JWT验证已被绕过: /projects
2025-05-13 08:45:13,579 - app.routes.main - INFO - JWT bypass enabled for projects - Using test user
2025-05-13 08:45:13,609 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 08:45:13] "GET /projects?bypass_jwt=true HTTP/1.1" 200 -
2025-05-13 08:45:13,634 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 08:45:13] "[36mGET /static/css/bootstrap.min.css HTTP/1.1[0m" 304 -
2025-05-13 08:45:13,635 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 08:45:13] "[36mGET /static/css/bootstrap-icons.css HTTP/1.1[0m" 304 -
2025-05-13 08:45:13,636 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 08:45:13] "[36mGET /static/css/style.css HTTP/1.1[0m" 304 -
2025-05-13 08:45:13,639 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 08:45:13] "[36mGET /static/js/jquery.min.js HTTP/1.1[0m" 304 -
2025-05-13 08:45:13,640 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 08:45:13] "GET /static/css/frappe-gantt.css HTTP/1.1" 200 -
2025-05-13 08:45:13,642 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 08:45:13] "[36mGET /static/js/bootstrap.bundle.min.js HTTP/1.1[0m" 304 -
2025-05-13 08:45:13,644 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 08:45:13] "[36mGET /static/js/utils.js HTTP/1.1[0m" 304 -
2025-05-13 08:45:13,645 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 08:45:13] "GET /static/js/frappe-gantt.min.js HTTP/1.1" 200 -
2025-05-13 08:45:13,648 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 08:45:13] "[36mGET /static/js/auth.js HTTP/1.1[0m" 304 -
2025-05-13 08:45:13,650 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 08:45:13] "[36mGET /static/js/fix-modals.js HTTP/1.1[0m" 304 -
2025-05-13 08:45:13,655 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 08:45:13] "[36mGET /static/js/user-profile.js HTTP/1.1[0m" 304 -
2025-05-13 08:45:13,656 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 08:45:13] "[36mGET /static/js/csrf.js HTTP/1.1[0m" 304 -
2025-05-13 08:45:13,674 - app - WARNING - 绕过JWT验证: /api/global/users
2025-05-13 08:45:13,674 - app - ERROR - 获取用户列表失败: type object 'User' has no attribute 'status'
2025-05-13 08:45:13,676 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 08:45:13] "[35m[1mGET /api/global/users?bypass_jwt=true&_=1747097113671 HTTP/1.1[0m" 500 -
2025-05-13 08:45:13,685 - app - WARNING - 绕过JWT验证: /api/project-managers
2025-05-13 08:45:13,686 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 08:45:13] "[36mGET /static/favicon.ico HTTP/1.1[0m" 304 -
2025-05-13 08:45:13,687 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 08:45:13] "[33mGET /api/project-managers?bypass_jwt=true&_=1747097113682 HTTP/1.1[0m" 404 -
2025-05-13 08:45:13,694 - app - WARNING - 绕过JWT验证: /api/global/project-managers
2025-05-13 08:45:13,696 - app.routes.projects - ERROR - 获取项目经理列表失败: type object 'User' has no attribute 'active'
2025-05-13 08:45:13,696 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 08:45:13] "[35m[1mGET /api/global/project-managers?bypass_jwt=true&_=1747097113682 HTTP/1.1[0m" 500 -
2025-05-13 08:45:13,703 - app - WARNING - 绕过JWT验证: /api/noauth/project-managers
2025-05-13 08:45:13,704 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 08:45:13] "[33mGET /api/noauth/project-managers?bypass_jwt=true&_=1747097113682 HTTP/1.1[0m" 404 -
2025-05-13 08:45:17,509 - app - WARNING - 绕过JWT验证: /api/global/users
2025-05-13 08:45:17,510 - app - WARNING - 绕过JWT验证: /api/global/users
2025-05-13 08:45:17,515 - app - ERROR - 获取用户列表失败: type object 'User' has no attribute 'status'
2025-05-13 08:45:17,515 - app - ERROR - 获取用户列表失败: type object 'User' has no attribute 'status'
2025-05-13 08:45:17,517 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 08:45:17] "[35m[1mGET /api/global/users?bypass_jwt=true&_=1747097117503 HTTP/1.1[0m" 500 -
2025-05-13 08:45:17,518 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 08:45:17] "[35m[1mGET /api/global/users?bypass_jwt=true&_=1747097117504 HTTP/1.1[0m" 500 -
2025-05-13 08:45:17,530 - app - WARNING - 绕过JWT验证: /api/project-managers
2025-05-13 08:45:17,531 - app - WARNING - 绕过JWT验证: /api/project-managers
2025-05-13 08:45:17,532 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 08:45:17] "[33mGET /api/project-managers?bypass_jwt=true&_=1747097117524 HTTP/1.1[0m" 404 -
2025-05-13 08:45:17,534 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 08:45:17] "[33mGET /api/project-managers?bypass_jwt=true&_=1747097117525 HTTP/1.1[0m" 404 -
2025-05-13 08:45:17,540 - app - WARNING - 绕过JWT验证: /api/global/project-managers
2025-05-13 08:45:17,541 - app - WARNING - 绕过JWT验证: /api/global/project-managers
2025-05-13 08:45:17,542 - app.routes.projects - ERROR - 获取项目经理列表失败: type object 'User' has no attribute 'active'
2025-05-13 08:45:17,543 - app.routes.projects - ERROR - 获取项目经理列表失败: type object 'User' has no attribute 'active'
2025-05-13 08:45:17,545 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 08:45:17] "[35m[1mGET /api/global/project-managers?bypass_jwt=true&_=1747097117525 HTTP/1.1[0m" 500 -
2025-05-13 08:45:17,545 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 08:45:17] "[35m[1mGET /api/global/project-managers?bypass_jwt=true&_=1747097117524 HTTP/1.1[0m" 500 -
2025-05-13 08:45:17,550 - app - WARNING - 绕过JWT验证: /api/noauth/project-managers
2025-05-13 08:45:17,552 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 08:45:17] "[33mGET /api/noauth/project-managers?bypass_jwt=true&_=1747097117525 HTTP/1.1[0m" 404 -
2025-05-13 08:45:17,554 - app - WARNING - 绕过JWT验证: /api/noauth/project-managers
2025-05-13 08:45:17,555 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 08:45:17] "[33mGET /api/noauth/project-managers?bypass_jwt=true&_=1747097117524 HTTP/1.1[0m" 404 -
2025-05-13 08:45:37,588 - app - WARNING - 绕过JWT验证: /api/auth/projects
2025-05-13 08:45:37,590 - app - WARNING - 绕过JWT验证: /api/auth/projects
2025-05-13 08:45:37,590 - app.utils.jwt_callbacks - WARNING - JWT验证已被绕过: /api/auth/projects
2025-05-13 08:45:37,590 - app.utils.jwt_callbacks - WARNING - JWT验证已被绕过: /api/auth/projects
2025-05-13 08:45:37,590 - app.routes.projects - INFO - API创建项目 - 使用测试用户
2025-05-13 08:45:37,591 - app.routes.projects - INFO - API创建项目 - 使用测试用户
2025-05-13 08:45:37,591 - app.routes.projects - INFO - API创建项目: 收到数据 {'name': 'ttttt', 'manager_id': '2', 'start_date': '2025-05-13', 'end_date': '2025-08-21', 'description': 'bbbbbb', 'status': 'planning'}
2025-05-13 08:45:37,591 - app.routes.projects - INFO - API创建项目: 收到数据 {'name': 'ttttt', 'manager_id': '2', 'start_date': '2025-05-13', 'end_date': '2025-08-21', 'description': 'bbbbbb', 'status': 'planning'}
2025-05-13 08:45:37,609 - app.routes.projects - INFO - API创建项目成功: 7 - ttttt
2025-05-13 08:45:37,609 - app.routes.projects - WARNING - API创建项目: 项目名称已存在 'ttttt'
2025-05-13 08:45:37,610 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 08:45:37] "[35m[1mPOST /api/auth/projects?bypass_jwt=true&_=1747097137582 HTTP/1.1[0m" 201 -
2025-05-13 08:45:37,610 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 08:45:37] "[31m[1mPOST /api/auth/projects?bypass_jwt=true&_=1747097137583 HTTP/1.1[0m" 400 -
2025-05-13 08:45:39,260 - app - WARNING - 绕过JWT验证: /projects
2025-05-13 08:45:39,261 - app.utils.jwt_callbacks - WARNING - JWT验证已被绕过: /projects
2025-05-13 08:45:39,261 - app.routes.main - INFO - JWT bypass enabled for projects - Using test user
2025-05-13 08:45:39,271 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 08:45:39] "GET /projects?bypass_jwt=true HTTP/1.1" 200 -
2025-05-13 08:47:46,953 - werkzeug - INFO -  * Detected change in 'D:\\tmp\\work\\app\\routes\\projects.py', reloading
2025-05-13 08:47:47,142 - werkzeug - INFO -  * Restarting with stat
2025-05-13 08:47:48,150 - app.utils.permissions - INFO - 更新权限: manage_users
2025-05-13 08:47:48,150 - app.utils.permissions - INFO - 更新权限: manage_roles
2025-05-13 08:47:48,151 - app.utils.permissions - INFO - 更新权限: manage_all_projects
2025-05-13 08:47:48,151 - app.utils.permissions - INFO - 更新权限: manage_project
2025-05-13 08:47:48,152 - app.utils.permissions - INFO - 更新权限: manage_all_tasks
2025-05-13 08:47:48,152 - app.utils.permissions - INFO - 更新权限: manage_task
2025-05-13 08:47:48,153 - app.utils.permissions - INFO - 更新权限: view_project
2025-05-13 08:47:48,153 - app.utils.permissions - INFO - 更新权限: view_task
2025-05-13 08:47:48,153 - app.utils.permissions - INFO - 更新权限: manage_resources
2025-05-13 08:47:48,154 - app.utils.permissions - INFO - 更新权限: manage_risks
2025-05-13 08:47:48,154 - app.utils.permissions - INFO - 更新权限: view_reports
2025-05-13 08:47:48,154 - app.utils.permissions - INFO - 更新权限: create_task
2025-05-13 08:47:48,155 - app.utils.permissions - INFO - 更新权限: create_project
2025-05-13 08:47:48,155 - app.utils.permissions - INFO - 更新权限: assign_task
2025-05-13 08:47:48,156 - app.utils.permissions - INFO - 更新权限: change_project_status
2025-05-13 08:47:48,156 - app.utils.permissions - INFO - 更新权限: change_task_status
2025-05-13 08:47:48,159 - app.utils.permissions - INFO - 更新角色: admin
2025-05-13 08:47:48,160 - app.utils.permissions - INFO - 为管理员角色添加所有权限: 16个
2025-05-13 08:47:48,160 - app.utils.permissions - INFO - 更新角色: manager
2025-05-13 08:47:48,161 - app.utils.permissions - INFO - 为角色 manager 添加权限: manage_project
2025-05-13 08:47:48,161 - app.utils.permissions - INFO - 为角色 manager 添加权限: manage_task
2025-05-13 08:47:48,161 - app.utils.permissions - INFO - 为角色 manager 添加权限: view_project
2025-05-13 08:47:48,162 - app.utils.permissions - INFO - 为角色 manager 添加权限: view_task
2025-05-13 08:47:48,162 - app.utils.permissions - INFO - 为角色 manager 添加权限: manage_resources
2025-05-13 08:47:48,162 - app.utils.permissions - INFO - 为角色 manager 添加权限: manage_risks
2025-05-13 08:47:48,162 - app.utils.permissions - INFO - 为角色 manager 添加权限: view_reports
2025-05-13 08:47:48,162 - app.utils.permissions - INFO - 为角色 manager 添加权限: create_project
2025-05-13 08:47:48,163 - app.utils.permissions - INFO - 为角色 manager 添加权限: create_task
2025-05-13 08:47:48,163 - app.utils.permissions - INFO - 为角色 manager 添加权限: assign_task
2025-05-13 08:47:48,163 - app.utils.permissions - INFO - 为角色 manager 添加权限: change_project_status
2025-05-13 08:47:48,163 - app.utils.permissions - INFO - 为角色 manager 添加权限: change_task_status
2025-05-13 08:47:48,164 - app.utils.permissions - INFO - 更新角色: user
2025-05-13 08:47:48,164 - app.utils.permissions - INFO - 为角色 user 添加权限: view_project
2025-05-13 08:47:48,164 - app.utils.permissions - INFO - 为角色 user 添加权限: view_task
2025-05-13 08:47:48,165 - app.utils.permissions - INFO - 为角色 user 添加权限: view_reports
2025-05-13 08:47:48,165 - app.utils.permissions - INFO - 角色和权限初始化完成
2025-05-13 08:47:48,165 - __main__ - INFO - 角色和权限初始化成功
2025-05-13 08:47:48,169 - __main__ - INFO - 数据库初始化完成
2025-05-13 08:47:48,180 - __main__ - INFO - 系统资源检查完成
2025-05-13 08:47:48,180 - __main__ - INFO - 开始清理旧数据
2025-05-13 08:47:48,183 - __main__ - INFO - 删除了 0 条过期的资源使用记录
2025-05-13 08:47:48,184 - __main__ - INFO - 删除了 0 条已解决的过期警报
2025-05-13 08:47:48,184 - __main__ - INFO - 旧数据清理完成
2025-05-13 08:47:48,190 - werkzeug - WARNING -  * Debugger is active!
2025-05-13 08:47:48,192 - werkzeug - INFO -  * Debugger PIN: 670-037-726
2025-05-13 08:47:55,304 - werkzeug - INFO -  * Detected change in 'D:\\tmp\\work\\app\\routes\\projects.py', reloading
2025-05-13 08:47:55,496 - werkzeug - INFO -  * Restarting with stat
2025-05-13 08:47:56,478 - app.utils.permissions - INFO - 更新权限: manage_users
2025-05-13 08:47:56,479 - app.utils.permissions - INFO - 更新权限: manage_roles
2025-05-13 08:47:56,480 - app.utils.permissions - INFO - 更新权限: manage_all_projects
2025-05-13 08:47:56,481 - app.utils.permissions - INFO - 更新权限: manage_project
2025-05-13 08:47:56,481 - app.utils.permissions - INFO - 更新权限: manage_all_tasks
2025-05-13 08:47:56,482 - app.utils.permissions - INFO - 更新权限: manage_task
2025-05-13 08:47:56,482 - app.utils.permissions - INFO - 更新权限: view_project
2025-05-13 08:47:56,482 - app.utils.permissions - INFO - 更新权限: view_task
2025-05-13 08:47:56,483 - app.utils.permissions - INFO - 更新权限: manage_resources
2025-05-13 08:47:56,483 - app.utils.permissions - INFO - 更新权限: manage_risks
2025-05-13 08:47:56,484 - app.utils.permissions - INFO - 更新权限: view_reports
2025-05-13 08:47:56,484 - app.utils.permissions - INFO - 更新权限: create_task
2025-05-13 08:47:56,485 - app.utils.permissions - INFO - 更新权限: create_project
2025-05-13 08:47:56,485 - app.utils.permissions - INFO - 更新权限: assign_task
2025-05-13 08:47:56,485 - app.utils.permissions - INFO - 更新权限: change_project_status
2025-05-13 08:47:56,486 - app.utils.permissions - INFO - 更新权限: change_task_status
2025-05-13 08:47:56,487 - app.utils.permissions - INFO - 更新角色: admin
2025-05-13 08:47:56,489 - app.utils.permissions - INFO - 为管理员角色添加所有权限: 16个
2025-05-13 08:47:56,489 - app.utils.permissions - INFO - 更新角色: manager
2025-05-13 08:47:56,490 - app.utils.permissions - INFO - 为角色 manager 添加权限: manage_project
2025-05-13 08:47:56,490 - app.utils.permissions - INFO - 为角色 manager 添加权限: manage_task
2025-05-13 08:47:56,490 - app.utils.permissions - INFO - 为角色 manager 添加权限: view_project
2025-05-13 08:47:56,490 - app.utils.permissions - INFO - 为角色 manager 添加权限: view_task
2025-05-13 08:47:56,492 - app.utils.permissions - INFO - 为角色 manager 添加权限: manage_resources
2025-05-13 08:47:56,492 - app.utils.permissions - INFO - 为角色 manager 添加权限: manage_risks
2025-05-13 08:47:56,492 - app.utils.permissions - INFO - 为角色 manager 添加权限: view_reports
2025-05-13 08:47:56,492 - app.utils.permissions - INFO - 为角色 manager 添加权限: create_project
2025-05-13 08:47:56,492 - app.utils.permissions - INFO - 为角色 manager 添加权限: create_task
2025-05-13 08:47:56,492 - app.utils.permissions - INFO - 为角色 manager 添加权限: assign_task
2025-05-13 08:47:56,492 - app.utils.permissions - INFO - 为角色 manager 添加权限: change_project_status
2025-05-13 08:47:56,493 - app.utils.permissions - INFO - 为角色 manager 添加权限: change_task_status
2025-05-13 08:47:56,493 - app.utils.permissions - INFO - 更新角色: user
2025-05-13 08:47:56,494 - app.utils.permissions - INFO - 为角色 user 添加权限: view_project
2025-05-13 08:47:56,494 - app.utils.permissions - INFO - 为角色 user 添加权限: view_task
2025-05-13 08:47:56,494 - app.utils.permissions - INFO - 为角色 user 添加权限: view_reports
2025-05-13 08:47:56,494 - app.utils.permissions - INFO - 角色和权限初始化完成
2025-05-13 08:47:56,494 - __main__ - INFO - 角色和权限初始化成功
2025-05-13 08:47:56,497 - __main__ - INFO - 数据库初始化完成
2025-05-13 08:47:56,514 - __main__ - INFO - 系统资源检查完成
2025-05-13 08:47:56,514 - __main__ - INFO - 开始清理旧数据
2025-05-13 08:47:56,517 - __main__ - INFO - 删除了 0 条过期的资源使用记录
2025-05-13 08:47:56,517 - __main__ - INFO - 删除了 0 条已解决的过期警报
2025-05-13 08:47:56,518 - __main__ - INFO - 旧数据清理完成
2025-05-13 08:47:56,524 - werkzeug - WARNING -  * Debugger is active!
2025-05-13 08:47:56,526 - werkzeug - INFO -  * Debugger PIN: 670-037-726
2025-05-13 08:57:05,577 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 08:57:05] "[36mGET /static/css/style.css HTTP/1.1[0m" 304 -
2025-05-13 08:57:05,578 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 08:57:05] "[36mGET /static/css/bootstrap-icons.css HTTP/1.1[0m" 304 -
2025-05-13 08:57:05,579 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 08:57:05] "[36mGET /static/css/bootstrap.min.css HTTP/1.1[0m" 304 -
2025-05-13 08:57:05,579 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 08:57:05] "[36mGET /static/js/jquery.min.js HTTP/1.1[0m" 304 -
2025-05-13 08:57:05,582 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 08:57:05] "[36mGET /static/js/bootstrap.bundle.min.js HTTP/1.1[0m" 304 -
2025-05-13 08:57:05,583 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 08:57:05] "[36mGET /static/js/utils.js HTTP/1.1[0m" 304 -
2025-05-13 08:57:05,585 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 08:57:05] "[36mGET /static/css/frappe-gantt.css HTTP/1.1[0m" 304 -
2025-05-13 08:57:05,585 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 08:57:05] "[36mGET /static/js/auth.js HTTP/1.1[0m" 304 -
2025-05-13 08:57:05,587 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 08:57:05] "[36mGET /static/js/fix-modals.js HTTP/1.1[0m" 304 -
2025-05-13 08:57:05,588 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 08:57:05] "[36mGET /static/js/csrf.js HTTP/1.1[0m" 304 -
2025-05-13 08:57:05,589 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 08:57:05] "[36mGET /static/js/user-profile.js HTTP/1.1[0m" 304 -
2025-05-13 08:57:05,590 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 08:57:05] "[36mGET /static/js/frappe-gantt.min.js HTTP/1.1[0m" 304 -
2025-05-13 08:57:05,607 - app - WARNING - 绕过JWT验证: /api/global/users
2025-05-13 08:57:05,608 - app - ERROR - 获取用户列表失败: type object 'User' has no attribute 'status'
2025-05-13 08:57:05,608 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 08:57:05] "[35m[1mGET /api/global/users?bypass_jwt=true&_=1747097825602 HTTP/1.1[0m" 500 -
2025-05-13 08:57:05,612 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 08:57:05] "[36mGET /static/favicon.ico HTTP/1.1[0m" 304 -
2025-05-13 08:57:05,614 - app - WARNING - 绕过JWT验证: /api/project-managers
2025-05-13 08:57:05,614 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 08:57:05] "[33mGET /api/project-managers?bypass_jwt=true&_=1747097825611 HTTP/1.1[0m" 404 -
2025-05-13 08:57:05,626 - app - WARNING - 绕过JWT验证: /api/global/project-managers
2025-05-13 08:57:05,629 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 08:57:05] "GET /api/global/project-managers?bypass_jwt=true&_=1747097825611 HTTP/1.1" 200 -
2025-05-13 08:57:22,779 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 08:57:22] "GET /login HTTP/1.1" 200 -
2025-05-13 08:57:22,828 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 08:57:22] "GET /static/css/style.css HTTP/1.1" 200 -
2025-05-13 08:57:22,829 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 08:57:22] "GET /static/js/jquery.min.js HTTP/1.1" 200 -
2025-05-13 08:57:22,829 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 08:57:22] "GET /static/css/bootstrap.min.css HTTP/1.1" 200 -
2025-05-13 08:57:22,830 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 08:57:22] "GET /static/css/bootstrap-icons.css HTTP/1.1" 200 -
2025-05-13 08:57:22,831 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 08:57:22] "GET /static/js/bootstrap.bundle.min.js HTTP/1.1" 200 -
2025-05-13 08:57:22,832 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 08:57:22] "GET /static/js/utils.js HTTP/1.1" 200 -
2025-05-13 08:57:22,844 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 08:57:22] "GET /static/js/auth.js HTTP/1.1" 200 -
2025-05-13 08:57:22,844 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 08:57:22] "GET /static/images/background.png HTTP/1.1" 200 -
2025-05-13 08:57:22,859 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 08:57:22] "GET /static/js/fix-modals.js HTTP/1.1" 200 -
2025-05-13 08:57:22,861 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 08:57:22] "GET /static/js/csrf.js HTTP/1.1" 200 -
2025-05-13 08:57:22,863 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 08:57:22] "GET /static/js/user-profile.js HTTP/1.1" 200 -
2025-05-13 08:57:22,865 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 08:57:22] "GET /static/js/background-helper.js HTTP/1.1" 200 -
2025-05-13 08:57:22,866 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 08:57:22] "GET /static/uploads/background.png HTTP/1.1" 200 -
2025-05-13 08:57:22,892 - app - WARNING - 绕过JWT验证: /auth/user_info
2025-05-13 08:57:22,892 - app.utils.jwt_callbacks - WARNING - JWT验证已被绕过: /auth/user_info
2025-05-13 08:57:22,893 - app - INFO - 获取用户信息 - bypass_jwt: True
2025-05-13 08:57:22,893 - app - INFO - 使用默认管理员用户(ID=1)
2025-05-13 08:57:22,911 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 08:57:22] "GET /static/favicon.ico HTTP/1.1" 200 -
2025-05-13 08:57:22,914 - app - INFO - 成功获取用户 admin 的信息
2025-05-13 08:57:22,915 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 08:57:22] "GET /auth/user_info?_=1747097842883&bypass_jwt=true HTTP/1.1" 200 -
2025-05-13 08:57:24,790 - app - INFO - 登录请求 - 方法: POST, 内容类型: application/x-www-form-urlencoded
2025-05-13 08:57:24,790 - app - INFO - 请求头: {'Host': '127.0.0.1:5000', 'Connection': 'keep-alive', 'Content-Length': '135', 'Cache-Control': 'max-age=0', 'Sec-Ch-Ua': '"Chromium";v="136", "Microsoft Edge";v="136", "Not.A/Brand";v="99"', 'Sec-Ch-Ua-Mobile': '?0', 'Sec-Ch-Ua-Platform': '"Windows"', 'Origin': 'http://127.0.0.1:5000', 'Content-Type': 'application/x-www-form-urlencoded', 'Upgrade-Insecure-Requests': '1', 'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36 Edg/136.0.0.0', 'Accept': 'text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.7', 'Sec-Fetch-Site': 'same-origin', 'Sec-Fetch-Mode': 'navigate', 'Sec-Fetch-User': '?1', 'Sec-Fetch-Dest': 'document', 'Referer': 'http://127.0.0.1:5000/login', 'Accept-Encoding': 'gzip, deflate, br, zstd', 'Accept-Language': 'zh-CN,zh;q=0.9,en;q=0.8,en-GB;q=0.7,en-US;q=0.6', 'Cookie': 'session=eyJjc3JmX3Rva2VuIjoiNWI5ZjY5NWI5OTc3NjY5MzViMjhjN2M2MmY1NGJkYTQwODMwMWU3OSJ9.aCKY8g.wTZQmuaH7dluLxoNRHnOBDxf178; user_roles=admin; is_admin=true; admin=true'}
2025-05-13 08:57:24,791 - app - INFO - 处理表单格式的登录请求
2025-05-13 08:57:24,792 - app - INFO - 表单数据: username=admin, password=********
2025-05-13 08:57:25,254 - app - INFO - 已生成CSRF令牌: IjViOWY2OT...
2025-05-13 08:57:25,257 - app - INFO - 用户 admin 的角色: ['admin']
2025-05-13 08:57:25,258 - app - INFO - 用户 admin 是否是管理员: True
2025-05-13 08:57:25,280 - app - INFO - 用户登录成功: admin
2025-05-13 08:57:25,283 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 08:57:25] "[32mPOST /auth/login HTTP/1.1[0m" 302 -
2025-05-13 08:57:25,295 - app - DEBUG - Dashboard route accessed
2025-05-13 08:57:25,295 - app - DEBUG - Current user ID: 1
2025-05-13 08:57:25,328 - app - DEBUG - Dashboard data prepared for user: admin
2025-05-13 08:57:25,362 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 08:57:25] "GET /dashboard HTTP/1.1" 200 -
2025-05-13 08:57:25,391 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 08:57:25] "[36mGET /static/css/bootstrap.min.css HTTP/1.1[0m" 304 -
2025-05-13 08:57:25,392 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 08:57:25] "[36mGET /static/css/style.css HTTP/1.1[0m" 304 -
2025-05-13 08:57:25,393 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 08:57:25] "[36mGET /static/css/bootstrap-icons.css HTTP/1.1[0m" 304 -
2025-05-13 08:57:25,395 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 08:57:25] "[36mGET /static/js/jquery.min.js HTTP/1.1[0m" 304 -
2025-05-13 08:57:25,399 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 08:57:25] "[36mGET /static/js/bootstrap.bundle.min.js HTTP/1.1[0m" 304 -
2025-05-13 08:57:25,404 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 08:57:25] "[36mGET /static/js/utils.js HTTP/1.1[0m" 304 -
2025-05-13 08:57:25,405 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 08:57:25] "[36mGET /static/js/auth.js HTTP/1.1[0m" 304 -
2025-05-13 08:57:25,406 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 08:57:25] "[36mGET /static/js/fix-modals.js HTTP/1.1[0m" 304 -
2025-05-13 08:57:25,408 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 08:57:25] "[36mGET /static/js/csrf.js HTTP/1.1[0m" 304 -
2025-05-13 08:57:25,410 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 08:57:25] "[36mGET /static/js/user-profile.js HTTP/1.1[0m" 304 -
2025-05-13 08:57:25,434 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 08:57:25] "GET /static/css/fonts/bootstrap-icons.woff2 HTTP/1.1" 200 -
2025-05-13 08:57:25,453 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 08:57:25] "[36mGET /static/favicon.ico HTTP/1.1[0m" 304 -
2025-05-13 08:57:26,668 - app - WARNING - 绕过JWT验证: /projects
2025-05-13 08:57:26,669 - app.utils.jwt_callbacks - WARNING - JWT验证已被绕过: /projects
2025-05-13 08:57:26,669 - app.routes.main - INFO - JWT bypass enabled for projects - Using test user
2025-05-13 08:57:26,699 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 08:57:26] "GET /projects?bypass_jwt=true HTTP/1.1" 200 -
2025-05-13 08:57:26,730 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 08:57:26] "[36mGET /static/css/bootstrap-icons.css HTTP/1.1[0m" 304 -
2025-05-13 08:57:26,730 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 08:57:26] "[36mGET /static/css/bootstrap.min.css HTTP/1.1[0m" 304 -
2025-05-13 08:57:26,733 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 08:57:26] "GET /static/css/frappe-gantt.css HTTP/1.1" 200 -
2025-05-13 08:57:26,733 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 08:57:26] "[36mGET /static/css/style.css HTTP/1.1[0m" 304 -
2025-05-13 08:57:26,736 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 08:57:26] "GET /static/js/frappe-gantt.min.js HTTP/1.1" 200 -
2025-05-13 08:57:26,738 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 08:57:26] "[36mGET /static/js/jquery.min.js HTTP/1.1[0m" 304 -
2025-05-13 08:57:26,741 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 08:57:26] "[36mGET /static/js/bootstrap.bundle.min.js HTTP/1.1[0m" 304 -
2025-05-13 08:57:26,743 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 08:57:26] "[36mGET /static/js/utils.js HTTP/1.1[0m" 304 -
2025-05-13 08:57:26,744 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 08:57:26] "[36mGET /static/js/auth.js HTTP/1.1[0m" 304 -
2025-05-13 08:57:26,748 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 08:57:26] "[36mGET /static/js/fix-modals.js HTTP/1.1[0m" 304 -
2025-05-13 08:57:26,749 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 08:57:26] "[36mGET /static/js/csrf.js HTTP/1.1[0m" 304 -
2025-05-13 08:57:26,751 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 08:57:26] "[36mGET /static/js/user-profile.js HTTP/1.1[0m" 304 -
2025-05-13 08:57:26,769 - app - WARNING - 绕过JWT验证: /api/global/users
2025-05-13 08:57:26,770 - app - ERROR - 获取用户列表失败: type object 'User' has no attribute 'status'
2025-05-13 08:57:26,770 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 08:57:26] "[35m[1mGET /api/global/users?bypass_jwt=true&_=1747097846766 HTTP/1.1[0m" 500 -
2025-05-13 08:57:26,776 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 08:57:26] "[36mGET /static/favicon.ico HTTP/1.1[0m" 304 -
2025-05-13 08:57:26,779 - app - WARNING - 绕过JWT验证: /api/project-managers
2025-05-13 08:57:26,781 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 08:57:26] "[33mGET /api/project-managers?bypass_jwt=true&_=1747097846774 HTTP/1.1[0m" 404 -
2025-05-13 08:57:26,787 - app - WARNING - 绕过JWT验证: /api/global/project-managers
2025-05-13 08:57:26,790 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 08:57:26] "GET /api/global/project-managers?bypass_jwt=true&_=1747097846774 HTTP/1.1" 200 -
2025-05-13 08:57:28,859 - app - WARNING - 绕过JWT验证: /api/global/users
2025-05-13 08:57:28,861 - app - WARNING - 绕过JWT验证: /api/global/users
2025-05-13 08:57:28,863 - app - ERROR - 获取用户列表失败: type object 'User' has no attribute 'status'
2025-05-13 08:57:28,863 - app - ERROR - 获取用户列表失败: type object 'User' has no attribute 'status'
2025-05-13 08:57:28,864 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 08:57:28] "[35m[1mGET /api/global/users?bypass_jwt=true&_=1747097848850 HTTP/1.1[0m" 500 -
2025-05-13 08:57:28,867 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 08:57:28] "[35m[1mGET /api/global/users?bypass_jwt=true&_=1747097848852 HTTP/1.1[0m" 500 -
2025-05-13 08:57:28,877 - app - WARNING - 绕过JWT验证: /api/project-managers
2025-05-13 08:57:28,880 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 08:57:28] "[33mGET /api/project-managers?bypass_jwt=true&_=1747097848875 HTTP/1.1[0m" 404 -
2025-05-13 08:57:28,883 - app - WARNING - 绕过JWT验证: /api/project-managers
2025-05-13 08:57:28,885 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 08:57:28] "[33mGET /api/project-managers?bypass_jwt=true&_=1747097848878 HTTP/1.1[0m" 404 -
2025-05-13 08:57:28,888 - app - WARNING - 绕过JWT验证: /api/global/project-managers
2025-05-13 08:57:28,891 - app - WARNING - 绕过JWT验证: /api/global/project-managers
2025-05-13 08:57:28,895 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 08:57:28] "GET /api/global/project-managers?bypass_jwt=true&_=1747097848875 HTTP/1.1" 200 -
2025-05-13 08:57:28,900 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 08:57:28] "GET /api/global/project-managers?bypass_jwt=true&_=1747097848878 HTTP/1.1" 200 -
2025-05-13 08:57:51,361 - app - WARNING - 绕过JWT验证: /api/auth/projects
2025-05-13 08:57:51,363 - app - WARNING - 绕过JWT验证: /api/auth/projects
2025-05-13 08:57:51,363 - app.utils.jwt_callbacks - WARNING - JWT验证已被绕过: /api/auth/projects
2025-05-13 08:57:51,363 - app.utils.jwt_callbacks - WARNING - JWT验证已被绕过: /api/auth/projects
2025-05-13 08:57:51,364 - app.routes.projects - INFO - API创建项目 - 使用测试用户
2025-05-13 08:57:51,364 - app.routes.projects - INFO - API创建项目 - 使用测试用户
2025-05-13 08:57:51,364 - app.routes.projects - INFO - API创建项目: 收到数据 {'name': 'wode sadas', 'manager_id': '2', 'start_date': '2025-05-13', 'end_date': '2025-08-14', 'description': 'ffgbgbgbv', 'status': 'planning'}
2025-05-13 08:57:51,365 - app.routes.projects - INFO - API创建项目: 收到数据 {'name': 'wode sadas', 'manager_id': '2', 'start_date': '2025-05-13', 'end_date': '2025-08-14', 'description': 'ffgbgbgbv', 'status': 'planning'}
2025-05-13 08:57:51,378 - app.routes.projects - INFO - API创建项目成功: 8 - wode sadas
2025-05-13 08:57:51,379 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 08:57:51] "[35m[1mPOST /api/auth/projects?bypass_jwt=true&_=1747097871356 HTTP/1.1[0m" 201 -
2025-05-13 08:57:51,397 - app.routes.projects - INFO - API创建项目成功: 9 - wode sadas
2025-05-13 08:57:51,399 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 08:57:51] "[35m[1mPOST /api/auth/projects?bypass_jwt=true&_=1747097871357 HTTP/1.1[0m" 201 -
2025-05-13 08:57:53,462 - app - WARNING - 绕过JWT验证: /projects
2025-05-13 08:57:53,463 - app.utils.jwt_callbacks - WARNING - JWT验证已被绕过: /projects
2025-05-13 08:57:53,463 - app.routes.main - INFO - JWT bypass enabled for projects - Using test user
2025-05-13 08:57:53,476 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 08:57:53] "GET /projects?bypass_jwt=true HTTP/1.1" 200 -
2025-05-13 08:57:54,713 - app - WARNING - 绕过JWT验证: /projects
2025-05-13 08:57:54,713 - app.utils.jwt_callbacks - WARNING - JWT验证已被绕过: /projects
2025-05-13 08:57:54,714 - app.routes.main - INFO - JWT bypass enabled for projects - Using test user
2025-05-13 08:57:54,723 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 08:57:54] "GET /projects?bypass_jwt=true HTTP/1.1" 200 -
2025-05-13 08:57:54,749 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 08:57:54] "[36mGET /static/css/bootstrap.min.css HTTP/1.1[0m" 304 -
2025-05-13 08:57:54,749 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 08:57:54] "[36mGET /static/css/bootstrap-icons.css HTTP/1.1[0m" 304 -
2025-05-13 08:57:54,750 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 08:57:54] "[36mGET /static/css/style.css HTTP/1.1[0m" 304 -
2025-05-13 08:57:54,751 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 08:57:54] "[36mGET /static/js/jquery.min.js HTTP/1.1[0m" 304 -
2025-05-13 08:57:54,755 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 08:57:54] "[36mGET /static/js/bootstrap.bundle.min.js HTTP/1.1[0m" 304 -
2025-05-13 08:57:54,756 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 08:57:54] "[36mGET /static/js/utils.js HTTP/1.1[0m" 304 -
2025-05-13 08:57:54,758 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 08:57:54] "[36mGET /static/css/frappe-gantt.css HTTP/1.1[0m" 304 -
2025-05-13 08:57:54,760 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 08:57:54] "[36mGET /static/js/auth.js HTTP/1.1[0m" 304 -
2025-05-13 08:57:54,761 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 08:57:54] "[36mGET /static/js/fix-modals.js HTTP/1.1[0m" 304 -
2025-05-13 08:57:54,762 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 08:57:54] "[36mGET /static/js/csrf.js HTTP/1.1[0m" 304 -
2025-05-13 08:57:54,765 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 08:57:54] "[36mGET /static/js/user-profile.js HTTP/1.1[0m" 304 -
2025-05-13 08:57:54,766 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 08:57:54] "[36mGET /static/js/frappe-gantt.min.js HTTP/1.1[0m" 304 -
2025-05-13 08:57:54,777 - app - WARNING - 绕过JWT验证: /api/global/users
2025-05-13 08:57:54,778 - app - ERROR - 获取用户列表失败: type object 'User' has no attribute 'status'
2025-05-13 08:57:54,778 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 08:57:54] "[35m[1mGET /api/global/users?bypass_jwt=true&_=1747097874773 HTTP/1.1[0m" 500 -
2025-05-13 08:57:54,783 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 08:57:54] "[36mGET /static/favicon.ico HTTP/1.1[0m" 304 -
2025-05-13 08:57:54,784 - app - WARNING - 绕过JWT验证: /api/project-managers
2025-05-13 08:57:54,785 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 08:57:54] "[33mGET /api/project-managers?bypass_jwt=true&_=1747097874781 HTTP/1.1[0m" 404 -
2025-05-13 08:57:54,794 - app - WARNING - 绕过JWT验证: /api/global/project-managers
2025-05-13 08:57:54,797 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 08:57:54] "GET /api/global/project-managers?bypass_jwt=true&_=1747097874781 HTTP/1.1" 200 -
2025-05-13 08:58:02,750 - app - WARNING - 绕过JWT验证: /projects/detail/8
2025-05-13 08:58:02,750 - app - INFO - 直接调用项目详情视图函数，不进行重定向: 项目ID=8
2025-05-13 08:58:02,751 - app.utils.jwt_callbacks - WARNING - JWT验证已被绕过: /projects/detail/8
2025-05-13 08:58:02,751 - app.utils.jwt_callbacks - WARNING - 使用bypass_jwt返回默认用户ID: 1
2025-05-13 08:58:02,751 - app.routes.projects - INFO - 获取项目 8 详情页面 - 用户ID: 1, URL: http://127.0.0.1:5000/projects/detail/8?no_redirect=true&bypass_jwt=true
2025-05-13 08:58:02,915 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 08:58:02] "GET /projects/detail/8?no_redirect=true&bypass_jwt=true HTTP/1.1" 200 -
2025-05-13 08:58:02,943 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 08:58:02] "[36mGET /static/css/bootstrap.min.css HTTP/1.1[0m" 304 -
2025-05-13 08:58:02,947 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 08:58:02] "[36mGET /static/css/bootstrap-icons.css HTTP/1.1[0m" 304 -
2025-05-13 08:58:02,950 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 08:58:02] "[36mGET /static/css/style.css HTTP/1.1[0m" 304 -
2025-05-13 08:58:02,957 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 08:58:02] "[36mGET /static/js/bootstrap.bundle.min.js HTTP/1.1[0m" 304 -
2025-05-13 08:58:02,959 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 08:58:02] "[36mGET /static/js/utils.js HTTP/1.1[0m" 304 -
2025-05-13 08:58:02,959 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 08:58:02] "[36mGET /static/js/jquery.min.js HTTP/1.1[0m" 304 -
2025-05-13 08:58:02,964 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 08:58:02] "[36mGET /static/js/auth.js HTTP/1.1[0m" 304 -
2025-05-13 08:58:02,968 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 08:58:02] "[36mGET /static/js/fix-modals.js HTTP/1.1[0m" 304 -
2025-05-13 08:58:02,970 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 08:58:02] "[36mGET /static/js/csrf.js HTTP/1.1[0m" 304 -
2025-05-13 08:58:02,971 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 08:58:02] "[36mGET /static/js/user-profile.js HTTP/1.1[0m" 304 -
2025-05-13 08:58:02,995 - app - WARNING - 绕过JWT验证: /api/global/users
2025-05-13 08:58:02,996 - app - ERROR - 获取用户列表失败: type object 'User' has no attribute 'status'
2025-05-13 08:58:02,997 - app - WARNING - 绕过JWT验证: /api/projects/8/risks
2025-05-13 08:58:02,998 - app - WARNING - 绕过JWT验证: /api/global/users
2025-05-13 08:58:02,998 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 08:58:02] "[35m[1mGET /api/global/users?bypass_jwt=true&_=1747097882991 HTTP/1.1[0m" 500 -
2025-05-13 08:58:02,999 - app - WARNING - 绕过JWT验证: /api/projects/8/risks
2025-05-13 08:58:03,000 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 08:58:03] "[33mGET /api/projects/8/risks?bypass_jwt=true&_=1747097882991 HTTP/1.1[0m" 404 -
2025-05-13 08:58:03,000 - app - ERROR - 获取用户列表失败: type object 'User' has no attribute 'status'
2025-05-13 08:58:03,001 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 08:58:03] "[33mGET /api/projects/8/risks?bypass_jwt=true&_=1747097882992 HTTP/1.1[0m" 404 -
2025-05-13 08:58:03,002 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 08:58:03] "[35m[1mGET /api/global/users?bypass_jwt=true&_=1747097882992 HTTP/1.1[0m" 500 -
2025-05-13 08:58:03,006 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 08:58:03] "[36mGET /static/favicon.ico HTTP/1.1[0m" 304 -
2025-05-13 08:58:03,009 - app - WARNING - 绕过JWT验证: /api/users
2025-05-13 08:58:03,010 - app - WARNING - 绕过JWT验证: /api/risks
2025-05-13 08:58:03,010 - app.utils.jwt_callbacks - WARNING - JWT验证已被绕过: /api/users
2025-05-13 08:58:03,011 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 08:58:03] "[33mGET /api/risks?project_id=8&bypass_jwt=true&_=1747097882991 HTTP/1.1[0m" 404 -
2025-05-13 08:58:03,012 - app - WARNING - 绕过JWT验证: /api/risks
2025-05-13 08:58:03,012 - app - INFO - JWT bypass enabled for getting users
2025-05-13 08:58:03,014 - app - WARNING - 绕过JWT验证: /api/users
2025-05-13 08:58:03,015 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 08:58:03] "[33mGET /api/risks?project_id=8&bypass_jwt=true&_=1747097882992 HTTP/1.1[0m" 404 -
2025-05-13 08:58:03,016 - app.utils.jwt_callbacks - WARNING - JWT验证已被绕过: /api/users
2025-05-13 08:58:03,019 - app - INFO - JWT bypass enabled for getting users
2025-05-13 08:58:03,020 - app - WARNING - 绕过JWT验证: /api/auth/risks
2025-05-13 08:58:03,023 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 08:58:03] "[33mGET /api/auth/risks?project_id=8&bypass_jwt=true&_=1747097882991 HTTP/1.1[0m" 404 -
2025-05-13 08:58:03,026 - app - WARNING - 绕过JWT验证: /api/auth/risks
2025-05-13 08:58:03,030 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 08:58:03] "[33mGET /api/auth/risks?project_id=8&bypass_jwt=true&_=1747097882992 HTTP/1.1[0m" 404 -
2025-05-13 08:58:03,034 - app - WARNING - 绕过JWT验证: /api/noauth/risks
2025-05-13 08:58:03,038 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 08:58:03] "[33mGET /api/noauth/risks?project_id=8&bypass_jwt=true&_=1747097882991 HTTP/1.1[0m" 404 -
2025-05-13 08:58:03,038 - app - WARNING - 绕过JWT验证: /api/noauth/risks
2025-05-13 08:58:03,043 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 08:58:03] "[33mGET /api/noauth/risks?project_id=8&bypass_jwt=true&_=1747097882992 HTTP/1.1[0m" 404 -
2025-05-13 08:58:03,076 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 08:58:03] "GET /api/users?bypass_jwt=true&_=1747097882991 HTTP/1.1" 200 -
2025-05-13 08:58:03,081 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 08:58:03] "GET /api/users?bypass_jwt=true&_=1747097882992 HTTP/1.1" 200 -
2025-05-13 08:58:05,589 - app - WARNING - 绕过JWT验证: /projects
2025-05-13 08:58:05,589 - app.utils.jwt_callbacks - WARNING - JWT验证已被绕过: /projects
2025-05-13 08:58:05,589 - app.routes.main - INFO - JWT bypass enabled for projects - Using test user
2025-05-13 08:58:05,598 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 08:58:05] "GET /projects?bypass_jwt=true HTTP/1.1" 200 -
2025-05-13 08:58:05,624 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 08:58:05] "[36mGET /static/css/bootstrap.min.css HTTP/1.1[0m" 304 -
2025-05-13 08:58:05,626 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 08:58:05] "[36mGET /static/css/bootstrap-icons.css HTTP/1.1[0m" 304 -
2025-05-13 08:58:05,628 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 08:58:05] "[36mGET /static/css/style.css HTTP/1.1[0m" 304 -
2025-05-13 08:58:05,630 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 08:58:05] "[36mGET /static/css/frappe-gantt.css HTTP/1.1[0m" 304 -
2025-05-13 08:58:05,630 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 08:58:05] "[36mGET /static/js/jquery.min.js HTTP/1.1[0m" 304 -
2025-05-13 08:58:05,633 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 08:58:05] "[36mGET /static/js/bootstrap.bundle.min.js HTTP/1.1[0m" 304 -
2025-05-13 08:58:05,637 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 08:58:05] "[36mGET /static/js/utils.js HTTP/1.1[0m" 304 -
2025-05-13 08:58:05,638 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 08:58:05] "[36mGET /static/js/auth.js HTTP/1.1[0m" 304 -
2025-05-13 08:58:05,640 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 08:58:05] "[36mGET /static/js/csrf.js HTTP/1.1[0m" 304 -
2025-05-13 08:58:05,640 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 08:58:05] "[36mGET /static/js/fix-modals.js HTTP/1.1[0m" 304 -
2025-05-13 08:58:05,641 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 08:58:05] "[36mGET /static/js/user-profile.js HTTP/1.1[0m" 304 -
2025-05-13 08:58:05,643 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 08:58:05] "[36mGET /static/js/frappe-gantt.min.js HTTP/1.1[0m" 304 -
2025-05-13 08:58:05,655 - app - WARNING - 绕过JWT验证: /api/global/users
2025-05-13 08:58:05,655 - app - ERROR - 获取用户列表失败: type object 'User' has no attribute 'status'
2025-05-13 08:58:05,658 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 08:58:05] "[35m[1mGET /api/global/users?bypass_jwt=true&_=1747097885651 HTTP/1.1[0m" 500 -
2025-05-13 08:58:05,666 - app - WARNING - 绕过JWT验证: /api/project-managers
2025-05-13 08:58:05,667 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 08:58:05] "[36mGET /static/favicon.ico HTTP/1.1[0m" 304 -
2025-05-13 08:58:05,667 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 08:58:05] "[33mGET /api/project-managers?bypass_jwt=true&_=1747097885663 HTTP/1.1[0m" 404 -
2025-05-13 08:58:05,677 - app - WARNING - 绕过JWT验证: /api/global/project-managers
2025-05-13 08:58:05,681 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 08:58:05] "GET /api/global/project-managers?bypass_jwt=true&_=1747097885663 HTTP/1.1" 200 -
2025-05-13 08:58:07,341 - app - WARNING - 绕过JWT验证: /projects/detail/9
2025-05-13 08:58:07,342 - app - INFO - 直接调用项目详情视图函数，不进行重定向: 项目ID=9
2025-05-13 08:58:07,342 - app.utils.jwt_callbacks - WARNING - JWT验证已被绕过: /projects/detail/9
2025-05-13 08:58:07,342 - app.utils.jwt_callbacks - WARNING - 使用bypass_jwt返回默认用户ID: 1
2025-05-13 08:58:07,342 - app.routes.projects - INFO - 获取项目 9 详情页面 - 用户ID: 1, URL: http://127.0.0.1:5000/projects/detail/9?no_redirect=true&bypass_jwt=true
2025-05-13 08:58:07,355 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 08:58:07] "GET /projects/detail/9?no_redirect=true&bypass_jwt=true HTTP/1.1" 200 -
2025-05-13 08:58:07,379 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 08:58:07] "[36mGET /static/css/bootstrap.min.css HTTP/1.1[0m" 304 -
2025-05-13 08:58:07,381 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 08:58:07] "[36mGET /static/css/bootstrap-icons.css HTTP/1.1[0m" 304 -
2025-05-13 08:58:07,383 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 08:58:07] "[36mGET /static/css/style.css HTTP/1.1[0m" 304 -
2025-05-13 08:58:07,384 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 08:58:07] "[36mGET /static/js/jquery.min.js HTTP/1.1[0m" 304 -
2025-05-13 08:58:07,387 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 08:58:07] "[36mGET /static/js/bootstrap.bundle.min.js HTTP/1.1[0m" 304 -
2025-05-13 08:58:07,391 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 08:58:07] "[36mGET /static/js/utils.js HTTP/1.1[0m" 304 -
2025-05-13 08:58:07,393 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 08:58:07] "[36mGET /static/js/auth.js HTTP/1.1[0m" 304 -
2025-05-13 08:58:07,393 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 08:58:07] "[36mGET /static/js/fix-modals.js HTTP/1.1[0m" 304 -
2025-05-13 08:58:07,397 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 08:58:07] "[36mGET /static/js/csrf.js HTTP/1.1[0m" 304 -
2025-05-13 08:58:07,398 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 08:58:07] "[36mGET /static/js/user-profile.js HTTP/1.1[0m" 304 -
2025-05-13 08:58:07,417 - app - WARNING - 绕过JWT验证: /api/global/users
2025-05-13 08:58:07,418 - app - ERROR - 获取用户列表失败: type object 'User' has no attribute 'status'
2025-05-13 08:58:07,419 - app - WARNING - 绕过JWT验证: /api/projects/9/risks
2025-05-13 08:58:07,420 - app - WARNING - 绕过JWT验证: /api/global/users
2025-05-13 08:58:07,420 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 08:58:07] "[35m[1mGET /api/global/users?bypass_jwt=true&_=1747097887412 HTTP/1.1[0m" 500 -
2025-05-13 08:58:07,421 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 08:58:07] "[33mGET /api/projects/9/risks?bypass_jwt=true&_=1747097887413 HTTP/1.1[0m" 404 -
2025-05-13 08:58:07,421 - app - WARNING - 绕过JWT验证: /api/projects/9/risks
2025-05-13 08:58:07,422 - app - ERROR - 获取用户列表失败: type object 'User' has no attribute 'status'
2025-05-13 08:58:07,423 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 08:58:07] "[33mGET /api/projects/9/risks?bypass_jwt=true&_=1747097887414 HTTP/1.1[0m" 404 -
2025-05-13 08:58:07,423 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 08:58:07] "[35m[1mGET /api/global/users?bypass_jwt=true&_=1747097887413 HTTP/1.1[0m" 500 -
2025-05-13 08:58:07,431 - app - WARNING - 绕过JWT验证: /api/users
2025-05-13 08:58:07,432 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 08:58:07] "[36mGET /static/favicon.ico HTTP/1.1[0m" 304 -
2025-05-13 08:58:07,432 - app - WARNING - 绕过JWT验证: /api/risks
2025-05-13 08:58:07,433 - app.utils.jwt_callbacks - WARNING - JWT验证已被绕过: /api/users
2025-05-13 08:58:07,435 - app - WARNING - 绕过JWT验证: /api/risks
2025-05-13 08:58:07,436 - app - WARNING - 绕过JWT验证: /api/users
2025-05-13 08:58:07,436 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 08:58:07] "[33mGET /api/risks?project_id=9&bypass_jwt=true&_=1747097887413 HTTP/1.1[0m" 404 -
2025-05-13 08:58:07,437 - app - INFO - JWT bypass enabled for getting users
2025-05-13 08:58:07,437 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 08:58:07] "[33mGET /api/risks?project_id=9&bypass_jwt=true&_=1747097887414 HTTP/1.1[0m" 404 -
2025-05-13 08:58:07,438 - app.utils.jwt_callbacks - WARNING - JWT验证已被绕过: /api/users
2025-05-13 08:58:07,441 - app - INFO - JWT bypass enabled for getting users
2025-05-13 08:58:07,444 - app - WARNING - 绕过JWT验证: /api/auth/risks
2025-05-13 08:58:07,447 - app - WARNING - 绕过JWT验证: /api/auth/risks
2025-05-13 08:58:07,448 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 08:58:07] "[33mGET /api/auth/risks?project_id=9&bypass_jwt=true&_=1747097887413 HTTP/1.1[0m" 404 -
2025-05-13 08:58:07,449 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 08:58:07] "[33mGET /api/auth/risks?project_id=9&bypass_jwt=true&_=1747097887414 HTTP/1.1[0m" 404 -
2025-05-13 08:58:07,457 - app - WARNING - 绕过JWT验证: /api/noauth/risks
2025-05-13 08:58:07,460 - app - WARNING - 绕过JWT验证: /api/noauth/risks
2025-05-13 08:58:07,460 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 08:58:07] "[33mGET /api/noauth/risks?project_id=9&bypass_jwt=true&_=1747097887413 HTTP/1.1[0m" 404 -
2025-05-13 08:58:07,462 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 08:58:07] "[33mGET /api/noauth/risks?project_id=9&bypass_jwt=true&_=1747097887414 HTTP/1.1[0m" 404 -
2025-05-13 08:58:07,505 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 08:58:07] "GET /api/users?bypass_jwt=true&_=1747097887412 HTTP/1.1" 200 -
2025-05-13 08:58:07,507 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 08:58:07] "GET /api/users?bypass_jwt=true&_=1747097887413 HTTP/1.1" 200 -
2025-05-13 08:58:09,092 - app - WARNING - 绕过JWT验证: /projects
2025-05-13 08:58:09,092 - app.utils.jwt_callbacks - WARNING - JWT验证已被绕过: /projects
2025-05-13 08:58:09,092 - app.routes.main - INFO - JWT bypass enabled for projects - Using test user
2025-05-13 08:58:09,101 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 08:58:09] "GET /projects?bypass_jwt=true HTTP/1.1" 200 -
2025-05-13 08:58:09,130 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 08:58:09] "[36mGET /static/css/bootstrap.min.css HTTP/1.1[0m" 304 -
2025-05-13 08:58:09,131 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 08:58:09] "[36mGET /static/css/style.css HTTP/1.1[0m" 304 -
2025-05-13 08:58:09,131 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 08:58:09] "[36mGET /static/css/bootstrap-icons.css HTTP/1.1[0m" 304 -
2025-05-13 08:58:09,134 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 08:58:09] "[36mGET /static/js/bootstrap.bundle.min.js HTTP/1.1[0m" 304 -
2025-05-13 08:58:09,135 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 08:58:09] "[36mGET /static/js/jquery.min.js HTTP/1.1[0m" 304 -
2025-05-13 08:58:09,138 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 08:58:09] "[36mGET /static/js/utils.js HTTP/1.1[0m" 304 -
2025-05-13 08:58:09,140 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 08:58:09] "[36mGET /static/css/frappe-gantt.css HTTP/1.1[0m" 304 -
2025-05-13 08:58:09,141 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 08:58:09] "[36mGET /static/js/auth.js HTTP/1.1[0m" 304 -
2025-05-13 08:58:09,142 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 08:58:09] "[36mGET /static/js/fix-modals.js HTTP/1.1[0m" 304 -
2025-05-13 08:58:09,146 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 08:58:09] "[36mGET /static/js/csrf.js HTTP/1.1[0m" 304 -
2025-05-13 08:58:09,150 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 08:58:09] "[36mGET /static/js/user-profile.js HTTP/1.1[0m" 304 -
2025-05-13 08:58:09,151 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 08:58:09] "[36mGET /static/js/frappe-gantt.min.js HTTP/1.1[0m" 304 -
2025-05-13 08:58:09,158 - app - WARNING - 绕过JWT验证: /api/global/users
2025-05-13 08:58:09,159 - app - ERROR - 获取用户列表失败: type object 'User' has no attribute 'status'
2025-05-13 08:58:09,159 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 08:58:09] "[35m[1mGET /api/global/users?bypass_jwt=true&_=1747097889155 HTTP/1.1[0m" 500 -
2025-05-13 08:58:09,172 - app - WARNING - 绕过JWT验证: /api/project-managers
2025-05-13 08:58:09,174 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 08:58:09] "[33mGET /api/project-managers?bypass_jwt=true&_=1747097889165 HTTP/1.1[0m" 404 -
2025-05-13 08:58:09,175 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 08:58:09] "[36mGET /static/favicon.ico HTTP/1.1[0m" 304 -
2025-05-13 08:58:09,181 - app - WARNING - 绕过JWT验证: /api/global/project-managers
2025-05-13 08:58:09,184 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 08:58:09] "GET /api/global/project-managers?bypass_jwt=true&_=1747097889165 HTTP/1.1" 200 -
2025-05-13 08:58:11,940 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 08:58:11] "[31m[1mDELETE /api/noauth/projects/9 HTTP/1.1[0m" 405 -
2025-05-13 08:58:16,198 - app - WARNING - 绕过JWT验证: /projects
2025-05-13 08:58:16,198 - app.utils.jwt_callbacks - WARNING - JWT验证已被绕过: /projects
2025-05-13 08:58:16,198 - app.routes.main - INFO - JWT bypass enabled for projects - Using test user
2025-05-13 08:58:16,211 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 08:58:16] "GET /projects?bypass_jwt=true HTTP/1.1" 200 -
2025-05-13 08:58:16,237 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 08:58:16] "[36mGET /static/css/bootstrap.min.css HTTP/1.1[0m" 304 -
2025-05-13 08:58:16,239 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 08:58:16] "[36mGET /static/css/bootstrap-icons.css HTTP/1.1[0m" 304 -
2025-05-13 08:58:16,241 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 08:58:16] "[36mGET /static/css/style.css HTTP/1.1[0m" 304 -
2025-05-13 08:58:16,242 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 08:58:16] "[36mGET /static/css/frappe-gantt.css HTTP/1.1[0m" 304 -
2025-05-13 08:58:16,243 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 08:58:16] "[36mGET /static/js/jquery.min.js HTTP/1.1[0m" 304 -
2025-05-13 08:58:16,245 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 08:58:16] "[36mGET /static/js/bootstrap.bundle.min.js HTTP/1.1[0m" 304 -
2025-05-13 08:58:16,247 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 08:58:16] "[36mGET /static/js/utils.js HTTP/1.1[0m" 304 -
2025-05-13 08:58:16,251 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 08:58:16] "[36mGET /static/js/auth.js HTTP/1.1[0m" 304 -
2025-05-13 08:58:16,253 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 08:58:16] "[36mGET /static/js/csrf.js HTTP/1.1[0m" 304 -
2025-05-13 08:58:16,254 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 08:58:16] "[36mGET /static/js/fix-modals.js HTTP/1.1[0m" 304 -
2025-05-13 08:58:16,255 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 08:58:16] "[36mGET /static/js/user-profile.js HTTP/1.1[0m" 304 -
2025-05-13 08:58:16,259 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 08:58:16] "[36mGET /static/js/frappe-gantt.min.js HTTP/1.1[0m" 304 -
2025-05-13 08:58:16,269 - app - WARNING - 绕过JWT验证: /api/global/users
2025-05-13 08:58:16,269 - app - ERROR - 获取用户列表失败: type object 'User' has no attribute 'status'
2025-05-13 08:58:16,270 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 08:58:16] "[35m[1mGET /api/global/users?bypass_jwt=true&_=1747097896264 HTTP/1.1[0m" 500 -
2025-05-13 08:58:16,275 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 08:58:16] "[36mGET /static/favicon.ico HTTP/1.1[0m" 304 -
2025-05-13 08:58:16,276 - app - WARNING - 绕过JWT验证: /api/project-managers
2025-05-13 08:58:16,276 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 08:58:16] "[33mGET /api/project-managers?bypass_jwt=true&_=1747097896272 HTTP/1.1[0m" 404 -
2025-05-13 08:58:16,286 - app - WARNING - 绕过JWT验证: /api/global/project-managers
2025-05-13 08:58:16,291 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 08:58:16] "GET /api/global/project-managers?bypass_jwt=true&_=1747097896272 HTTP/1.1" 200 -
2025-05-13 09:08:31,612 - app - WARNING - 绕过JWT验证: /api/global/users
2025-05-13 09:08:31,613 - app - WARNING - 绕过JWT验证: /api/global/users
2025-05-13 09:08:31,614 - app - ERROR - 获取用户列表失败: type object 'User' has no attribute 'status'
2025-05-13 09:08:31,615 - app - ERROR - 获取用户列表失败: type object 'User' has no attribute 'status'
2025-05-13 09:08:31,616 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:08:31] "[35m[1mGET /api/global/users?bypass_jwt=true&_=1747098511603 HTTP/1.1[0m" 500 -
2025-05-13 09:08:31,618 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:08:31] "[35m[1mGET /api/global/users?bypass_jwt=true&_=1747098511605 HTTP/1.1[0m" 500 -
2025-05-13 09:08:31,628 - app - WARNING - 绕过JWT验证: /api/project-managers
2025-05-13 09:08:31,628 - app - WARNING - 绕过JWT验证: /api/project-managers
2025-05-13 09:08:31,630 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:08:31] "[33mGET /api/project-managers?bypass_jwt=true&_=1747098511621 HTTP/1.1[0m" 404 -
2025-05-13 09:08:31,632 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:08:31] "[33mGET /api/project-managers?bypass_jwt=true&_=1747098511622 HTTP/1.1[0m" 404 -
2025-05-13 09:08:31,640 - app - WARNING - 绕过JWT验证: /api/global/project-managers
2025-05-13 09:08:31,641 - app - WARNING - 绕过JWT验证: /api/global/project-managers
2025-05-13 09:08:31,646 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:08:31] "GET /api/global/project-managers?bypass_jwt=true&_=1747098511622 HTTP/1.1" 200 -
2025-05-13 09:08:31,647 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:08:31] "GET /api/global/project-managers?bypass_jwt=true&_=1747098511621 HTTP/1.1" 200 -
2025-05-13 09:10:28,893 - werkzeug - INFO -  * Detected change in 'D:\\tmp\\work\\app\\routes\\projects.py', reloading
2025-05-13 09:10:29,409 - werkzeug - INFO -  * Restarting with stat
2025-05-13 09:10:30,337 - app.utils.permissions - INFO - 更新权限: manage_users
2025-05-13 09:10:30,337 - app.utils.permissions - INFO - 更新权限: manage_roles
2025-05-13 09:10:30,338 - app.utils.permissions - INFO - 更新权限: manage_all_projects
2025-05-13 09:10:30,338 - app.utils.permissions - INFO - 更新权限: manage_project
2025-05-13 09:10:30,339 - app.utils.permissions - INFO - 更新权限: manage_all_tasks
2025-05-13 09:10:30,339 - app.utils.permissions - INFO - 更新权限: manage_task
2025-05-13 09:10:30,340 - app.utils.permissions - INFO - 更新权限: view_project
2025-05-13 09:10:30,341 - app.utils.permissions - INFO - 更新权限: view_task
2025-05-13 09:10:30,341 - app.utils.permissions - INFO - 更新权限: manage_resources
2025-05-13 09:10:30,342 - app.utils.permissions - INFO - 更新权限: manage_risks
2025-05-13 09:10:30,342 - app.utils.permissions - INFO - 更新权限: view_reports
2025-05-13 09:10:30,342 - app.utils.permissions - INFO - 更新权限: create_task
2025-05-13 09:10:30,343 - app.utils.permissions - INFO - 更新权限: create_project
2025-05-13 09:10:30,343 - app.utils.permissions - INFO - 更新权限: assign_task
2025-05-13 09:10:30,343 - app.utils.permissions - INFO - 更新权限: change_project_status
2025-05-13 09:10:30,344 - app.utils.permissions - INFO - 更新权限: change_task_status
2025-05-13 09:10:30,345 - app.utils.permissions - INFO - 更新角色: admin
2025-05-13 09:10:30,347 - app.utils.permissions - INFO - 为管理员角色添加所有权限: 16个
2025-05-13 09:10:30,348 - app.utils.permissions - INFO - 更新角色: manager
2025-05-13 09:10:30,348 - app.utils.permissions - INFO - 为角色 manager 添加权限: manage_project
2025-05-13 09:10:30,349 - app.utils.permissions - INFO - 为角色 manager 添加权限: manage_task
2025-05-13 09:10:30,349 - app.utils.permissions - INFO - 为角色 manager 添加权限: view_project
2025-05-13 09:10:30,349 - app.utils.permissions - INFO - 为角色 manager 添加权限: view_task
2025-05-13 09:10:30,349 - app.utils.permissions - INFO - 为角色 manager 添加权限: manage_resources
2025-05-13 09:10:30,349 - app.utils.permissions - INFO - 为角色 manager 添加权限: manage_risks
2025-05-13 09:10:30,349 - app.utils.permissions - INFO - 为角色 manager 添加权限: view_reports
2025-05-13 09:10:30,349 - app.utils.permissions - INFO - 为角色 manager 添加权限: create_project
2025-05-13 09:10:30,349 - app.utils.permissions - INFO - 为角色 manager 添加权限: create_task
2025-05-13 09:10:30,349 - app.utils.permissions - INFO - 为角色 manager 添加权限: assign_task
2025-05-13 09:10:30,349 - app.utils.permissions - INFO - 为角色 manager 添加权限: change_project_status
2025-05-13 09:10:30,350 - app.utils.permissions - INFO - 为角色 manager 添加权限: change_task_status
2025-05-13 09:10:30,350 - app.utils.permissions - INFO - 更新角色: user
2025-05-13 09:10:30,350 - app.utils.permissions - INFO - 为角色 user 添加权限: view_project
2025-05-13 09:10:30,350 - app.utils.permissions - INFO - 为角色 user 添加权限: view_task
2025-05-13 09:10:30,351 - app.utils.permissions - INFO - 为角色 user 添加权限: view_reports
2025-05-13 09:10:30,351 - app.utils.permissions - INFO - 角色和权限初始化完成
2025-05-13 09:10:30,351 - __main__ - INFO - 角色和权限初始化成功
2025-05-13 09:10:30,353 - __main__ - INFO - 数据库初始化完成
2025-05-13 09:10:30,362 - __main__ - INFO - 系统资源检查完成
2025-05-13 09:10:30,362 - __main__ - INFO - 开始清理旧数据
2025-05-13 09:10:30,364 - __main__ - INFO - 删除了 0 条过期的资源使用记录
2025-05-13 09:10:30,365 - __main__ - INFO - 删除了 0 条已解决的过期警报
2025-05-13 09:10:30,366 - __main__ - INFO - 旧数据清理完成
2025-05-13 09:10:30,373 - werkzeug - WARNING -  * Debugger is active!
2025-05-13 09:10:30,377 - werkzeug - INFO -  * Debugger PIN: 670-037-726
2025-05-13 09:12:37,907 - app - WARNING - 绕过JWT验证: /projects
2025-05-13 09:12:37,908 - app.utils.jwt_callbacks - WARNING - JWT验证已被绕过: /projects
2025-05-13 09:12:37,908 - app.routes.main - INFO - JWT bypass enabled for projects - Using test user
2025-05-13 09:12:38,006 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:12:38] "GET /projects?bypass_jwt=true HTTP/1.1" 200 -
2025-05-13 09:12:38,243 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:12:38] "[36mGET /static/css/bootstrap.min.css HTTP/1.1[0m" 304 -
2025-05-13 09:12:38,250 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:12:38] "[36mGET /static/js/utils.js HTTP/1.1[0m" 304 -
2025-05-13 09:12:38,255 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:12:38] "[36mGET /static/css/style.css HTTP/1.1[0m" 304 -
2025-05-13 09:12:38,257 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:12:38] "[36mGET /static/js/auth.js HTTP/1.1[0m" 304 -
2025-05-13 09:12:38,259 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:12:38] "[36mGET /static/css/frappe-gantt.css HTTP/1.1[0m" 304 -
2025-05-13 09:12:38,268 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:12:38] "[36mGET /static/js/fix-modals.js HTTP/1.1[0m" 304 -
2025-05-13 09:12:38,268 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:12:38] "[36mGET /static/css/bootstrap-icons.css HTTP/1.1[0m" 304 -
2025-05-13 09:12:38,268 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:12:38] "[36mGET /static/js/jquery.min.js HTTP/1.1[0m" 304 -
2025-05-13 09:12:38,271 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:12:38] "[36mGET /static/js/user-profile.js HTTP/1.1[0m" 304 -
2025-05-13 09:12:38,272 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:12:38] "[36mGET /static/js/csrf.js HTTP/1.1[0m" 304 -
2025-05-13 09:12:38,273 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:12:38] "[36mGET /static/js/bootstrap.bundle.min.js HTTP/1.1[0m" 304 -
2025-05-13 09:12:38,275 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:12:38] "[36mGET /static/js/frappe-gantt.min.js HTTP/1.1[0m" 304 -
2025-05-13 09:12:38,298 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:12:38] "[36mGET /static/css/fonts/bootstrap-icons.woff2 HTTP/1.1[0m" 304 -
2025-05-13 09:12:38,306 - app - WARNING - 绕过JWT验证: /api/global/users
2025-05-13 09:12:38,307 - app - ERROR - 获取用户列表失败: type object 'User' has no attribute 'status'
2025-05-13 09:12:38,307 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:12:38] "[35m[1mGET /api/global/users?bypass_jwt=true&_=1747098758299 HTTP/1.1[0m" 500 -
2025-05-13 09:12:38,317 - app - WARNING - 绕过JWT验证: /api/project-managers
2025-05-13 09:12:38,320 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:12:38] "[33mGET /api/project-managers?bypass_jwt=true&_=1747098758311 HTTP/1.1[0m" 404 -
2025-05-13 09:12:38,321 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:12:38] "[36mGET /static/favicon.ico HTTP/1.1[0m" 304 -
2025-05-13 09:12:38,326 - app - WARNING - 绕过JWT验证: /api/global/project-managers
2025-05-13 09:12:38,337 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:12:38] "GET /api/global/project-managers?bypass_jwt=true&_=1747098758311 HTTP/1.1" 200 -
2025-05-13 09:12:40,193 - app - WARNING - 绕过JWT验证: /api/global/users
2025-05-13 09:12:40,193 - app - WARNING - 绕过JWT验证: /api/projects/9/risks
2025-05-13 09:12:40,194 - app - ERROR - 获取用户列表失败: type object 'User' has no attribute 'status'
2025-05-13 09:12:40,195 - app - WARNING - 绕过JWT验证: /api/global/users
2025-05-13 09:12:40,195 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:12:40] "[33mGET /api/projects/9/risks?bypass_jwt=true&_=1747098760190 HTTP/1.1[0m" 404 -
2025-05-13 09:12:40,196 - app - WARNING - 绕过JWT验证: /api/projects/9/risks
2025-05-13 09:12:40,196 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:12:40] "[35m[1mGET /api/global/users?bypass_jwt=true&_=1747098760190 HTTP/1.1[0m" 500 -
2025-05-13 09:12:40,197 - app - ERROR - 获取用户列表失败: type object 'User' has no attribute 'status'
2025-05-13 09:12:40,197 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:12:40] "[33mGET /api/projects/9/risks?bypass_jwt=true&_=1747098760191 HTTP/1.1[0m" 404 -
2025-05-13 09:12:40,198 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:12:40] "[35m[1mGET /api/global/users?bypass_jwt=true&_=1747098760191 HTTP/1.1[0m" 500 -
2025-05-13 09:12:40,210 - app - WARNING - 绕过JWT验证: /api/risks
2025-05-13 09:12:40,211 - app - WARNING - 绕过JWT验证: /api/users
2025-05-13 09:12:40,211 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:12:40] "[33mGET /api/risks?project_id=9&bypass_jwt=true&_=1747098760190 HTTP/1.1[0m" 404 -
2025-05-13 09:12:40,213 - app - WARNING - 绕过JWT验证: /api/risks
2025-05-13 09:12:40,213 - app.utils.jwt_callbacks - WARNING - JWT验证已被绕过: /api/users
2025-05-13 09:12:40,214 - app - WARNING - 绕过JWT验证: /api/users
2025-05-13 09:12:40,218 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:12:40] "[33mGET /api/risks?project_id=9&bypass_jwt=true&_=1747098760191 HTTP/1.1[0m" 404 -
2025-05-13 09:12:40,218 - app - INFO - JWT bypass enabled for getting users
2025-05-13 09:12:40,218 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:12:40] "[36mGET /static/favicon.ico HTTP/1.1[0m" 304 -
2025-05-13 09:12:40,220 - app.utils.jwt_callbacks - WARNING - JWT验证已被绕过: /api/users
2025-05-13 09:12:40,221 - app - WARNING - 绕过JWT验证: /api/auth/risks
2025-05-13 09:12:40,227 - app - WARNING - 绕过JWT验证: /api/auth/risks
2025-05-13 09:12:40,228 - app - INFO - JWT bypass enabled for getting users
2025-05-13 09:12:40,230 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:12:40] "[33mGET /api/auth/risks?project_id=9&bypass_jwt=true&_=1747098760190 HTTP/1.1[0m" 404 -
2025-05-13 09:12:40,231 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:12:40] "[33mGET /api/auth/risks?project_id=9&bypass_jwt=true&_=1747098760191 HTTP/1.1[0m" 404 -
2025-05-13 09:12:40,240 - app - WARNING - 绕过JWT验证: /api/noauth/risks
2025-05-13 09:12:40,244 - app - WARNING - 绕过JWT验证: /api/noauth/risks
2025-05-13 09:12:40,245 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:12:40] "[33mGET /api/noauth/risks?project_id=9&bypass_jwt=true&_=1747098760190 HTTP/1.1[0m" 404 -
2025-05-13 09:12:40,246 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:12:40] "[33mGET /api/noauth/risks?project_id=9&bypass_jwt=true&_=1747098760191 HTTP/1.1[0m" 404 -
2025-05-13 09:12:40,291 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:12:40] "GET /api/users?bypass_jwt=true&_=1747098760190 HTTP/1.1" 200 -
2025-05-13 09:12:40,295 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:12:40] "GET /api/users?bypass_jwt=true&_=1747098760191 HTTP/1.1" 200 -
2025-05-13 09:13:02,275 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:13:02] "GET /login HTTP/1.1" 200 -
2025-05-13 09:13:02,316 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:13:02] "GET /static/css/bootstrap.min.css HTTP/1.1" 200 -
2025-05-13 09:13:02,317 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:13:02] "GET /static/css/bootstrap-icons.css HTTP/1.1" 200 -
2025-05-13 09:13:02,320 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:13:02] "GET /static/css/style.css HTTP/1.1" 200 -
2025-05-13 09:13:02,321 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:13:02] "GET /static/js/jquery.min.js HTTP/1.1" 200 -
2025-05-13 09:13:02,324 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:13:02] "GET /static/js/bootstrap.bundle.min.js HTTP/1.1" 200 -
2025-05-13 09:13:02,326 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:13:02] "GET /static/js/utils.js HTTP/1.1" 200 -
2025-05-13 09:13:02,329 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:13:02] "GET /static/js/auth.js HTTP/1.1" 200 -
2025-05-13 09:13:02,329 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:13:02] "GET /static/images/background.png HTTP/1.1" 200 -
2025-05-13 09:13:02,336 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:13:02] "GET /static/js/fix-modals.js HTTP/1.1" 200 -
2025-05-13 09:13:02,350 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:13:02] "GET /static/js/csrf.js HTTP/1.1" 200 -
2025-05-13 09:13:02,352 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:13:02] "GET /static/js/user-profile.js HTTP/1.1" 200 -
2025-05-13 09:13:02,353 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:13:02] "GET /static/js/background-helper.js HTTP/1.1" 200 -
2025-05-13 09:13:02,355 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:13:02] "GET /static/uploads/background.png HTTP/1.1" 200 -
2025-05-13 09:13:02,380 - app - WARNING - 绕过JWT验证: /auth/user_info
2025-05-13 09:13:02,380 - app.utils.jwt_callbacks - WARNING - JWT验证已被绕过: /auth/user_info
2025-05-13 09:13:02,380 - app - INFO - 获取用户信息 - bypass_jwt: True
2025-05-13 09:13:02,380 - app - INFO - 使用默认管理员用户(ID=1)
2025-05-13 09:13:02,393 - app - INFO - 成功获取用户 admin 的信息
2025-05-13 09:13:02,394 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:13:02] "GET /auth/user_info?_=1747098782376&bypass_jwt=true HTTP/1.1" 200 -
2025-05-13 09:13:02,399 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:13:02] "GET /static/favicon.ico HTTP/1.1" 200 -
2025-05-13 09:13:04,774 - app - INFO - 登录请求 - 方法: POST, 内容类型: application/x-www-form-urlencoded
2025-05-13 09:13:04,774 - app - INFO - 请求头: {'Host': '127.0.0.1:5000', 'Connection': 'keep-alive', 'Content-Length': '135', 'Cache-Control': 'max-age=0', 'Sec-Ch-Ua': '"Chromium";v="136", "Microsoft Edge";v="136", "Not.A/Brand";v="99"', 'Sec-Ch-Ua-Mobile': '?0', 'Sec-Ch-Ua-Platform': '"Windows"', 'Origin': 'http://127.0.0.1:5000', 'Content-Type': 'application/x-www-form-urlencoded', 'Upgrade-Insecure-Requests': '1', 'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36 Edg/136.0.0.0', 'Accept': 'text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.7', 'Sec-Fetch-Site': 'same-origin', 'Sec-Fetch-Mode': 'navigate', 'Sec-Fetch-User': '?1', 'Sec-Fetch-Dest': 'document', 'Referer': 'http://127.0.0.1:5000/login', 'Accept-Encoding': 'gzip, deflate, br, zstd', 'Accept-Language': 'zh-CN,zh;q=0.9,en;q=0.8,en-GB;q=0.7,en-US;q=0.6', 'Cookie': 'session=eyJjc3JmX3Rva2VuIjoiMzA3NjZiNDcxNjJlMDZiNDFjNDFlYWM1MTQ2NWYxYjhkMjk4MmJkZCJ9.aCKcng.3PvLeP56W9SHXkUrlYrJm8Epm7s; user_roles=admin; is_admin=true; admin=true'}
2025-05-13 09:13:04,775 - app - INFO - 处理表单格式的登录请求
2025-05-13 09:13:04,775 - app - INFO - 表单数据: username=admin, password=********
2025-05-13 09:13:05,263 - app - INFO - 已生成CSRF令牌: IjMwNzY2Yj...
2025-05-13 09:13:05,264 - app - INFO - 用户 admin 的角色: ['admin']
2025-05-13 09:13:05,266 - app - INFO - 用户 admin 是否是管理员: True
2025-05-13 09:13:05,296 - app - INFO - 用户登录成功: admin
2025-05-13 09:13:05,298 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:13:05] "[32mPOST /auth/login HTTP/1.1[0m" 302 -
2025-05-13 09:13:05,313 - app - DEBUG - Dashboard route accessed
2025-05-13 09:13:05,314 - app - DEBUG - Current user ID: 1
2025-05-13 09:13:05,354 - app - DEBUG - Dashboard data prepared for user: admin
2025-05-13 09:13:05,398 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:13:05] "GET /dashboard HTTP/1.1" 200 -
2025-05-13 09:13:05,426 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:13:05] "[36mGET /static/css/bootstrap.min.css HTTP/1.1[0m" 304 -
2025-05-13 09:13:05,429 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:13:05] "[36mGET /static/css/bootstrap-icons.css HTTP/1.1[0m" 304 -
2025-05-13 09:13:05,431 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:13:05] "[36mGET /static/css/style.css HTTP/1.1[0m" 304 -
2025-05-13 09:13:05,431 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:13:05] "[36mGET /static/js/jquery.min.js HTTP/1.1[0m" 304 -
2025-05-13 09:13:05,435 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:13:05] "[36mGET /static/js/bootstrap.bundle.min.js HTTP/1.1[0m" 304 -
2025-05-13 09:13:05,438 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:13:05] "[36mGET /static/js/utils.js HTTP/1.1[0m" 304 -
2025-05-13 09:13:05,438 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:13:05] "[36mGET /static/js/auth.js HTTP/1.1[0m" 304 -
2025-05-13 09:13:05,441 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:13:05] "[36mGET /static/js/fix-modals.js HTTP/1.1[0m" 304 -
2025-05-13 09:13:05,445 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:13:05] "[36mGET /static/js/csrf.js HTTP/1.1[0m" 304 -
2025-05-13 09:13:05,446 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:13:05] "[36mGET /static/js/user-profile.js HTTP/1.1[0m" 304 -
2025-05-13 09:13:05,472 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:13:05] "GET /static/css/fonts/bootstrap-icons.woff2 HTTP/1.1" 200 -
2025-05-13 09:13:05,493 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:13:05] "[36mGET /static/favicon.ico HTTP/1.1[0m" 304 -
2025-05-13 09:13:12,596 - app - WARNING - 绕过JWT验证: /projects
2025-05-13 09:13:12,597 - app.utils.jwt_callbacks - WARNING - JWT验证已被绕过: /projects
2025-05-13 09:13:12,597 - app.routes.main - INFO - JWT bypass enabled for projects - Using test user
2025-05-13 09:13:12,606 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:13:12] "GET /projects?bypass_jwt=true HTTP/1.1" 200 -
2025-05-13 09:13:12,636 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:13:12] "[36mGET /static/css/bootstrap.min.css HTTP/1.1[0m" 304 -
2025-05-13 09:13:12,638 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:13:12] "[36mGET /static/css/bootstrap-icons.css HTTP/1.1[0m" 304 -
2025-05-13 09:13:12,639 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:13:12] "[36mGET /static/css/style.css HTTP/1.1[0m" 304 -
2025-05-13 09:13:12,641 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:13:12] "[36mGET /static/js/jquery.min.js HTTP/1.1[0m" 304 -
2025-05-13 09:13:12,643 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:13:12] "GET /static/css/frappe-gantt.css HTTP/1.1" 200 -
2025-05-13 09:13:12,646 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:13:12] "GET /static/js/frappe-gantt.min.js HTTP/1.1" 200 -
2025-05-13 09:13:12,650 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:13:12] "[36mGET /static/js/bootstrap.bundle.min.js HTTP/1.1[0m" 304 -
2025-05-13 09:13:12,653 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:13:12] "[36mGET /static/js/auth.js HTTP/1.1[0m" 304 -
2025-05-13 09:13:12,651 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:13:12] "[36mGET /static/js/utils.js HTTP/1.1[0m" 304 -
2025-05-13 09:13:12,654 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:13:12] "[36mGET /static/js/fix-modals.js HTTP/1.1[0m" 304 -
2025-05-13 09:13:12,655 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:13:12] "[36mGET /static/js/csrf.js HTTP/1.1[0m" 304 -
2025-05-13 09:13:12,660 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:13:12] "[36mGET /static/js/user-profile.js HTTP/1.1[0m" 304 -
2025-05-13 09:13:12,687 - app - WARNING - 绕过JWT验证: /api/global/users
2025-05-13 09:13:12,688 - app - ERROR - 获取用户列表失败: type object 'User' has no attribute 'status'
2025-05-13 09:13:12,688 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:13:12] "[35m[1mGET /api/global/users?bypass_jwt=true&_=1747098792681 HTTP/1.1[0m" 500 -
2025-05-13 09:13:12,695 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:13:12] "[36mGET /static/favicon.ico HTTP/1.1[0m" 304 -
2025-05-13 09:13:12,696 - app - WARNING - 绕过JWT验证: /api/project-managers
2025-05-13 09:13:12,697 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:13:12] "[33mGET /api/project-managers?bypass_jwt=true&_=1747098792692 HTTP/1.1[0m" 404 -
2025-05-13 09:13:12,703 - app - WARNING - 绕过JWT验证: /api/global/project-managers
2025-05-13 09:13:12,710 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:13:12] "GET /api/global/project-managers?bypass_jwt=true&_=1747098792692 HTTP/1.1" 200 -
2025-05-13 09:13:15,849 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:13:15] "[31m[1mDELETE /api/noauth/projects/9 HTTP/1.1[0m" 405 -
2025-05-13 09:13:34,204 - app - WARNING - 绕过JWT验证: /api/global/users
2025-05-13 09:13:34,205 - app - WARNING - 绕过JWT验证: /api/global/users
2025-05-13 09:13:34,206 - app - ERROR - 获取用户列表失败: type object 'User' has no attribute 'status'
2025-05-13 09:13:34,207 - app - ERROR - 获取用户列表失败: type object 'User' has no attribute 'status'
2025-05-13 09:13:34,209 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:13:34] "[35m[1mGET /api/global/users?bypass_jwt=true&_=1747098814194 HTTP/1.1[0m" 500 -
2025-05-13 09:13:34,210 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:13:34] "[35m[1mGET /api/global/users?bypass_jwt=true&_=1747098814196 HTTP/1.1[0m" 500 -
2025-05-13 09:13:34,219 - app - WARNING - 绕过JWT验证: /api/project-managers
2025-05-13 09:13:34,221 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:13:34] "[33mGET /api/project-managers?bypass_jwt=true&_=1747098814216 HTTP/1.1[0m" 404 -
2025-05-13 09:13:34,223 - app - WARNING - 绕过JWT验证: /api/project-managers
2025-05-13 09:13:34,225 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:13:34] "[33mGET /api/project-managers?bypass_jwt=true&_=1747098814216 HTTP/1.1[0m" 404 -
2025-05-13 09:13:34,231 - app - WARNING - 绕过JWT验证: /api/global/project-managers
2025-05-13 09:13:34,232 - app - WARNING - 绕过JWT验证: /api/global/project-managers
2025-05-13 09:13:34,357 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:13:34] "GET /api/global/project-managers?bypass_jwt=true&_=1747098814216 HTTP/1.1" 200 -
2025-05-13 09:13:34,361 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:13:34] "GET /api/global/project-managers?bypass_jwt=true&_=1747098814216 HTTP/1.1" 200 -
2025-05-13 09:13:52,648 - app - WARNING - 绕过JWT验证: /api/auth/projects
2025-05-13 09:13:52,649 - app.utils.jwt_callbacks - WARNING - JWT验证已被绕过: /api/auth/projects
2025-05-13 09:13:52,650 - app - WARNING - 绕过JWT验证: /api/auth/projects
2025-05-13 09:13:52,651 - app.routes.projects - INFO - API创建项目 - 使用测试用户
2025-05-13 09:13:52,651 - app.utils.jwt_callbacks - WARNING - JWT验证已被绕过: /api/auth/projects
2025-05-13 09:13:52,651 - app.routes.projects - INFO - API创建项目: 收到数据 {'name': 'ddvfggoooo', 'manager_id': '1', 'start_date': '2025-05-13', 'end_date': '2025-08-21', 'description': 'dddddddccc', 'status': 'planning'}
2025-05-13 09:13:52,651 - app.routes.projects - INFO - API创建项目 - 使用测试用户
2025-05-13 09:13:52,652 - app.routes.projects - INFO - API创建项目: 收到数据 {'name': 'ddvfggoooo', 'manager_id': '1', 'start_date': '2025-05-13', 'end_date': '2025-08-21', 'description': 'dddddddccc', 'status': 'planning'}
2025-05-13 09:13:52,668 - app.routes.projects - INFO - API创建项目成功: 10 - ddvfggoooo
2025-05-13 09:13:52,669 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:13:52] "[35m[1mPOST /api/auth/projects?bypass_jwt=true&_=1747098832644 HTTP/1.1[0m" 201 -
2025-05-13 09:13:52,678 - app.routes.projects - INFO - API创建项目成功: 11 - ddvfggoooo
2025-05-13 09:13:52,679 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:13:52] "[35m[1mPOST /api/auth/projects?bypass_jwt=true&_=1747098832644 HTTP/1.1[0m" 201 -
2025-05-13 09:13:54,398 - app - WARNING - 绕过JWT验证: /projects
2025-05-13 09:13:54,398 - app.utils.jwt_callbacks - WARNING - JWT验证已被绕过: /projects
2025-05-13 09:13:54,398 - app.routes.main - INFO - JWT bypass enabled for projects - Using test user
2025-05-13 09:13:54,410 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:13:54] "GET /projects?bypass_jwt=true HTTP/1.1" 200 -
2025-05-13 09:13:55,828 - app - WARNING - 绕过JWT验证: /projects
2025-05-13 09:13:55,828 - app.utils.jwt_callbacks - WARNING - JWT验证已被绕过: /projects
2025-05-13 09:13:55,828 - app.routes.main - INFO - JWT bypass enabled for projects - Using test user
2025-05-13 09:13:55,839 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:13:55] "GET /projects?bypass_jwt=true HTTP/1.1" 200 -
2025-05-13 09:13:55,864 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:13:55] "[36mGET /static/css/bootstrap.min.css HTTP/1.1[0m" 304 -
2025-05-13 09:13:55,864 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:13:55] "[36mGET /static/css/bootstrap-icons.css HTTP/1.1[0m" 304 -
2025-05-13 09:13:55,864 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:13:55] "[36mGET /static/css/style.css HTTP/1.1[0m" 304 -
2025-05-13 09:13:55,869 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:13:55] "[36mGET /static/js/bootstrap.bundle.min.js HTTP/1.1[0m" 304 -
2025-05-13 09:13:55,870 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:13:55] "[36mGET /static/js/jquery.min.js HTTP/1.1[0m" 304 -
2025-05-13 09:13:55,874 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:13:55] "[36mGET /static/js/utils.js HTTP/1.1[0m" 304 -
2025-05-13 09:13:55,875 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:13:55] "[36mGET /static/css/frappe-gantt.css HTTP/1.1[0m" 304 -
2025-05-13 09:13:55,878 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:13:55] "[36mGET /static/js/auth.js HTTP/1.1[0m" 304 -
2025-05-13 09:13:55,882 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:13:55] "[36mGET /static/js/fix-modals.js HTTP/1.1[0m" 304 -
2025-05-13 09:13:55,883 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:13:55] "[36mGET /static/js/csrf.js HTTP/1.1[0m" 304 -
2025-05-13 09:13:55,886 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:13:55] "[36mGET /static/js/frappe-gantt.min.js HTTP/1.1[0m" 304 -
2025-05-13 09:13:55,887 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:13:55] "[36mGET /static/js/user-profile.js HTTP/1.1[0m" 304 -
2025-05-13 09:13:55,899 - app - WARNING - 绕过JWT验证: /api/global/users
2025-05-13 09:13:55,900 - app - ERROR - 获取用户列表失败: type object 'User' has no attribute 'status'
2025-05-13 09:13:55,901 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:13:55] "[35m[1mGET /api/global/users?bypass_jwt=true&_=1747098835895 HTTP/1.1[0m" 500 -
2025-05-13 09:13:55,909 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:13:55] "[36mGET /static/favicon.ico HTTP/1.1[0m" 304 -
2025-05-13 09:13:55,910 - app - WARNING - 绕过JWT验证: /api/project-managers
2025-05-13 09:13:55,911 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:13:55] "[33mGET /api/project-managers?bypass_jwt=true&_=1747098835906 HTTP/1.1[0m" 404 -
2025-05-13 09:13:55,916 - app - WARNING - 绕过JWT验证: /api/global/project-managers
2025-05-13 09:13:55,920 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:13:55] "GET /api/global/project-managers?bypass_jwt=true&_=1747098835906 HTTP/1.1" 200 -
2025-05-13 09:19:35,169 - werkzeug - INFO -  * Detected change in 'D:\\tmp\\work\\app\\routes\\projects.py', reloading
2025-05-13 09:19:35,595 - werkzeug - INFO -  * Restarting with stat
2025-05-13 09:19:36,602 - app.utils.permissions - INFO - 更新权限: manage_users
2025-05-13 09:19:36,604 - app.utils.permissions - INFO - 更新权限: manage_roles
2025-05-13 09:19:36,604 - app.utils.permissions - INFO - 更新权限: manage_all_projects
2025-05-13 09:19:36,605 - app.utils.permissions - INFO - 更新权限: manage_project
2025-05-13 09:19:36,605 - app.utils.permissions - INFO - 更新权限: manage_all_tasks
2025-05-13 09:19:36,606 - app.utils.permissions - INFO - 更新权限: manage_task
2025-05-13 09:19:36,606 - app.utils.permissions - INFO - 更新权限: view_project
2025-05-13 09:19:36,607 - app.utils.permissions - INFO - 更新权限: view_task
2025-05-13 09:19:36,608 - app.utils.permissions - INFO - 更新权限: manage_resources
2025-05-13 09:19:36,609 - app.utils.permissions - INFO - 更新权限: manage_risks
2025-05-13 09:19:36,609 - app.utils.permissions - INFO - 更新权限: view_reports
2025-05-13 09:19:36,610 - app.utils.permissions - INFO - 更新权限: create_task
2025-05-13 09:19:36,610 - app.utils.permissions - INFO - 更新权限: create_project
2025-05-13 09:19:36,611 - app.utils.permissions - INFO - 更新权限: assign_task
2025-05-13 09:19:36,611 - app.utils.permissions - INFO - 更新权限: change_project_status
2025-05-13 09:19:36,611 - app.utils.permissions - INFO - 更新权限: change_task_status
2025-05-13 09:19:36,613 - app.utils.permissions - INFO - 更新角色: admin
2025-05-13 09:19:36,615 - app.utils.permissions - INFO - 为管理员角色添加所有权限: 16个
2025-05-13 09:19:36,616 - app.utils.permissions - INFO - 更新角色: manager
2025-05-13 09:19:36,617 - app.utils.permissions - INFO - 为角色 manager 添加权限: manage_project
2025-05-13 09:19:36,617 - app.utils.permissions - INFO - 为角色 manager 添加权限: manage_task
2025-05-13 09:19:36,617 - app.utils.permissions - INFO - 为角色 manager 添加权限: view_project
2025-05-13 09:19:36,617 - app.utils.permissions - INFO - 为角色 manager 添加权限: view_task
2025-05-13 09:19:36,617 - app.utils.permissions - INFO - 为角色 manager 添加权限: manage_resources
2025-05-13 09:19:36,618 - app.utils.permissions - INFO - 为角色 manager 添加权限: manage_risks
2025-05-13 09:19:36,618 - app.utils.permissions - INFO - 为角色 manager 添加权限: view_reports
2025-05-13 09:19:36,618 - app.utils.permissions - INFO - 为角色 manager 添加权限: create_project
2025-05-13 09:19:36,619 - app.utils.permissions - INFO - 为角色 manager 添加权限: create_task
2025-05-13 09:19:36,621 - app.utils.permissions - INFO - 为角色 manager 添加权限: assign_task
2025-05-13 09:19:36,621 - app.utils.permissions - INFO - 为角色 manager 添加权限: change_project_status
2025-05-13 09:19:36,621 - app.utils.permissions - INFO - 为角色 manager 添加权限: change_task_status
2025-05-13 09:19:36,622 - app.utils.permissions - INFO - 更新角色: user
2025-05-13 09:19:36,622 - app.utils.permissions - INFO - 为角色 user 添加权限: view_project
2025-05-13 09:19:36,622 - app.utils.permissions - INFO - 为角色 user 添加权限: view_task
2025-05-13 09:19:36,624 - app.utils.permissions - INFO - 为角色 user 添加权限: view_reports
2025-05-13 09:19:36,624 - app.utils.permissions - INFO - 角色和权限初始化完成
2025-05-13 09:19:36,624 - __main__ - INFO - 角色和权限初始化成功
2025-05-13 09:19:36,626 - __main__ - INFO - 数据库初始化完成
2025-05-13 09:19:36,635 - __main__ - INFO - 系统资源检查完成
2025-05-13 09:19:36,635 - __main__ - INFO - 开始清理旧数据
2025-05-13 09:19:36,637 - __main__ - INFO - 删除了 0 条过期的资源使用记录
2025-05-13 09:19:36,637 - __main__ - INFO - 删除了 0 条已解决的过期警报
2025-05-13 09:19:36,638 - __main__ - INFO - 旧数据清理完成
2025-05-13 09:19:36,643 - werkzeug - WARNING -  * Debugger is active!
2025-05-13 09:19:36,645 - werkzeug - INFO -  * Debugger PIN: 670-037-726
2025-05-13 09:24:25,452 - app.utils.permissions - INFO - 更新权限: manage_users
2025-05-13 09:24:25,453 - app.utils.permissions - INFO - 更新权限: manage_roles
2025-05-13 09:24:25,454 - app.utils.permissions - INFO - 更新权限: manage_all_projects
2025-05-13 09:24:25,454 - app.utils.permissions - INFO - 更新权限: manage_project
2025-05-13 09:24:25,456 - app.utils.permissions - INFO - 更新权限: manage_all_tasks
2025-05-13 09:24:25,456 - app.utils.permissions - INFO - 更新权限: manage_task
2025-05-13 09:24:25,457 - app.utils.permissions - INFO - 更新权限: view_project
2025-05-13 09:24:25,457 - app.utils.permissions - INFO - 更新权限: view_task
2025-05-13 09:24:25,458 - app.utils.permissions - INFO - 更新权限: manage_resources
2025-05-13 09:24:25,458 - app.utils.permissions - INFO - 更新权限: manage_risks
2025-05-13 09:24:25,460 - app.utils.permissions - INFO - 更新权限: view_reports
2025-05-13 09:24:25,463 - app.utils.permissions - INFO - 更新权限: create_task
2025-05-13 09:24:25,463 - app.utils.permissions - INFO - 更新权限: create_project
2025-05-13 09:24:25,464 - app.utils.permissions - INFO - 更新权限: assign_task
2025-05-13 09:24:25,465 - app.utils.permissions - INFO - 更新权限: change_project_status
2025-05-13 09:24:25,466 - app.utils.permissions - INFO - 更新权限: change_task_status
2025-05-13 09:24:25,469 - app.utils.permissions - INFO - 更新角色: admin
2025-05-13 09:24:25,470 - app.utils.permissions - INFO - 为管理员角色添加所有权限: 16个
2025-05-13 09:24:25,471 - app.utils.permissions - INFO - 更新角色: manager
2025-05-13 09:24:25,471 - app.utils.permissions - INFO - 为角色 manager 添加权限: manage_project
2025-05-13 09:24:25,471 - app.utils.permissions - INFO - 为角色 manager 添加权限: manage_task
2025-05-13 09:24:25,471 - app.utils.permissions - INFO - 为角色 manager 添加权限: view_project
2025-05-13 09:24:25,472 - app.utils.permissions - INFO - 为角色 manager 添加权限: view_task
2025-05-13 09:24:25,472 - app.utils.permissions - INFO - 为角色 manager 添加权限: manage_resources
2025-05-13 09:24:25,472 - app.utils.permissions - INFO - 为角色 manager 添加权限: manage_risks
2025-05-13 09:24:25,472 - app.utils.permissions - INFO - 为角色 manager 添加权限: view_reports
2025-05-13 09:24:25,472 - app.utils.permissions - INFO - 为角色 manager 添加权限: create_project
2025-05-13 09:24:25,472 - app.utils.permissions - INFO - 为角色 manager 添加权限: create_task
2025-05-13 09:24:25,472 - app.utils.permissions - INFO - 为角色 manager 添加权限: assign_task
2025-05-13 09:24:25,472 - app.utils.permissions - INFO - 为角色 manager 添加权限: change_project_status
2025-05-13 09:24:25,472 - app.utils.permissions - INFO - 为角色 manager 添加权限: change_task_status
2025-05-13 09:24:25,473 - app.utils.permissions - INFO - 更新角色: user
2025-05-13 09:24:25,473 - app.utils.permissions - INFO - 为角色 user 添加权限: view_project
2025-05-13 09:24:25,473 - app.utils.permissions - INFO - 为角色 user 添加权限: view_task
2025-05-13 09:24:25,473 - app.utils.permissions - INFO - 为角色 user 添加权限: view_reports
2025-05-13 09:24:25,474 - app.utils.permissions - INFO - 角色和权限初始化完成
2025-05-13 09:24:25,474 - __main__ - INFO - 角色和权限初始化成功
2025-05-13 09:24:25,476 - __main__ - INFO - 数据库初始化完成
2025-05-13 09:24:25,548 - __main__ - INFO - 系统资源检查完成
2025-05-13 09:24:25,549 - __main__ - INFO - 开始清理旧数据
2025-05-13 09:24:25,550 - __main__ - INFO - 删除了 0 条过期的资源使用记录
2025-05-13 09:24:25,552 - __main__ - INFO - 删除了 0 条已解决的过期警报
2025-05-13 09:24:25,553 - __main__ - INFO - 旧数据清理完成
2025-05-13 09:24:25,566 - werkzeug - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:5000
 * Running on http://192.168.0.66:5000
2025-05-13 09:24:25,567 - werkzeug - INFO - [33mPress CTRL+C to quit[0m
2025-05-13 09:24:25,567 - werkzeug - INFO -  * Restarting with stat
2025-05-13 09:24:26,518 - app.utils.permissions - INFO - 更新权限: manage_users
2025-05-13 09:24:26,518 - app.utils.permissions - INFO - 更新权限: manage_roles
2025-05-13 09:24:26,520 - app.utils.permissions - INFO - 更新权限: manage_all_projects
2025-05-13 09:24:26,520 - app.utils.permissions - INFO - 更新权限: manage_project
2025-05-13 09:24:26,520 - app.utils.permissions - INFO - 更新权限: manage_all_tasks
2025-05-13 09:24:26,521 - app.utils.permissions - INFO - 更新权限: manage_task
2025-05-13 09:24:26,521 - app.utils.permissions - INFO - 更新权限: view_project
2025-05-13 09:24:26,522 - app.utils.permissions - INFO - 更新权限: view_task
2025-05-13 09:24:26,522 - app.utils.permissions - INFO - 更新权限: manage_resources
2025-05-13 09:24:26,522 - app.utils.permissions - INFO - 更新权限: manage_risks
2025-05-13 09:24:26,523 - app.utils.permissions - INFO - 更新权限: view_reports
2025-05-13 09:24:26,525 - app.utils.permissions - INFO - 更新权限: create_task
2025-05-13 09:24:26,526 - app.utils.permissions - INFO - 更新权限: create_project
2025-05-13 09:24:26,527 - app.utils.permissions - INFO - 更新权限: assign_task
2025-05-13 09:24:26,528 - app.utils.permissions - INFO - 更新权限: change_project_status
2025-05-13 09:24:26,529 - app.utils.permissions - INFO - 更新权限: change_task_status
2025-05-13 09:24:26,531 - app.utils.permissions - INFO - 更新角色: admin
2025-05-13 09:24:26,534 - app.utils.permissions - INFO - 为管理员角色添加所有权限: 16个
2025-05-13 09:24:26,534 - app.utils.permissions - INFO - 更新角色: manager
2025-05-13 09:24:26,535 - app.utils.permissions - INFO - 为角色 manager 添加权限: manage_project
2025-05-13 09:24:26,535 - app.utils.permissions - INFO - 为角色 manager 添加权限: manage_task
2025-05-13 09:24:26,535 - app.utils.permissions - INFO - 为角色 manager 添加权限: view_project
2025-05-13 09:24:26,535 - app.utils.permissions - INFO - 为角色 manager 添加权限: view_task
2025-05-13 09:24:26,535 - app.utils.permissions - INFO - 为角色 manager 添加权限: manage_resources
2025-05-13 09:24:26,535 - app.utils.permissions - INFO - 为角色 manager 添加权限: manage_risks
2025-05-13 09:24:26,535 - app.utils.permissions - INFO - 为角色 manager 添加权限: view_reports
2025-05-13 09:24:26,535 - app.utils.permissions - INFO - 为角色 manager 添加权限: create_project
2025-05-13 09:24:26,535 - app.utils.permissions - INFO - 为角色 manager 添加权限: create_task
2025-05-13 09:24:26,536 - app.utils.permissions - INFO - 为角色 manager 添加权限: assign_task
2025-05-13 09:24:26,536 - app.utils.permissions - INFO - 为角色 manager 添加权限: change_project_status
2025-05-13 09:24:26,536 - app.utils.permissions - INFO - 为角色 manager 添加权限: change_task_status
2025-05-13 09:24:26,536 - app.utils.permissions - INFO - 更新角色: user
2025-05-13 09:24:26,537 - app.utils.permissions - INFO - 为角色 user 添加权限: view_project
2025-05-13 09:24:26,537 - app.utils.permissions - INFO - 为角色 user 添加权限: view_task
2025-05-13 09:24:26,537 - app.utils.permissions - INFO - 为角色 user 添加权限: view_reports
2025-05-13 09:24:26,537 - app.utils.permissions - INFO - 角色和权限初始化完成
2025-05-13 09:24:26,537 - __main__ - INFO - 角色和权限初始化成功
2025-05-13 09:24:26,542 - __main__ - INFO - 数据库初始化完成
2025-05-13 09:24:26,551 - __main__ - INFO - 系统资源检查完成
2025-05-13 09:24:26,552 - __main__ - INFO - 开始清理旧数据
2025-05-13 09:24:26,552 - __main__ - INFO - 删除了 0 条过期的资源使用记录
2025-05-13 09:24:26,553 - __main__ - INFO - 删除了 0 条已解决的过期警报
2025-05-13 09:24:26,553 - __main__ - INFO - 旧数据清理完成
2025-05-13 09:24:26,560 - werkzeug - WARNING -  * Debugger is active!
2025-05-13 09:24:26,562 - werkzeug - INFO -  * Debugger PIN: 670-037-726
2025-05-13 09:24:45,231 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:24:45] "GET /login HTTP/1.1" 200 -
2025-05-13 09:24:45,486 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:24:45] "GET /static/css/bootstrap.min.css HTTP/1.1" 200 -
2025-05-13 09:24:45,492 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:24:45] "GET /static/css/style.css HTTP/1.1" 200 -
2025-05-13 09:24:45,495 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:24:45] "GET /static/js/bootstrap.bundle.min.js HTTP/1.1" 200 -
2025-05-13 09:24:45,496 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:24:45] "GET /static/css/bootstrap-icons.css HTTP/1.1" 200 -
2025-05-13 09:24:45,497 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:24:45] "GET /static/js/utils.js HTTP/1.1" 200 -
2025-05-13 09:24:45,497 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:24:45] "GET /static/js/jquery.min.js HTTP/1.1" 200 -
2025-05-13 09:24:45,503 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:24:45] "GET /static/js/auth.js HTTP/1.1" 200 -
2025-05-13 09:24:45,504 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:24:45] "GET /static/images/background.png HTTP/1.1" 200 -
2025-05-13 09:24:45,512 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:24:45] "GET /static/js/fix-modals.js HTTP/1.1" 200 -
2025-05-13 09:24:45,525 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:24:45] "GET /static/js/csrf.js HTTP/1.1" 200 -
2025-05-13 09:24:45,525 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:24:45] "GET /static/js/user-profile.js HTTP/1.1" 200 -
2025-05-13 09:24:45,527 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:24:45] "GET /static/js/background-helper.js HTTP/1.1" 200 -
2025-05-13 09:24:45,528 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:24:45] "GET /static/uploads/background.png HTTP/1.1" 200 -
2025-05-13 09:24:45,554 - app - WARNING - 绕过JWT验证: /auth/user_info
2025-05-13 09:24:45,555 - app.utils.jwt_callbacks - WARNING - JWT验证已被绕过: /auth/user_info
2025-05-13 09:24:45,555 - app - INFO - 获取用户信息 - bypass_jwt: True
2025-05-13 09:24:45,555 - app - INFO - 使用默认管理员用户(ID=1)
2025-05-13 09:24:45,570 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:24:45] "GET /static/favicon.ico HTTP/1.1" 200 -
2025-05-13 09:24:45,573 - app - INFO - 成功获取用户 admin 的信息
2025-05-13 09:24:45,574 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:24:45] "GET /auth/user_info?_=1747099485551&bypass_jwt=true HTTP/1.1" 200 -
2025-05-13 09:24:46,895 - app - INFO - 登录请求 - 方法: POST, 内容类型: application/x-www-form-urlencoded
2025-05-13 09:24:46,895 - app - INFO - 请求头: {'Host': '127.0.0.1:5000', 'Connection': 'keep-alive', 'Content-Length': '135', 'Cache-Control': 'max-age=0', 'Sec-Ch-Ua': '"Chromium";v="136", "Microsoft Edge";v="136", "Not.A/Brand";v="99"', 'Sec-Ch-Ua-Mobile': '?0', 'Sec-Ch-Ua-Platform': '"Windows"', 'Origin': 'http://127.0.0.1:5000', 'Content-Type': 'application/x-www-form-urlencoded', 'Upgrade-Insecure-Requests': '1', 'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36 Edg/136.0.0.0', 'Accept': 'text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.7', 'Sec-Fetch-Site': 'same-origin', 'Sec-Fetch-Mode': 'navigate', 'Sec-Fetch-User': '?1', 'Sec-Fetch-Dest': 'document', 'Referer': 'http://127.0.0.1:5000/login', 'Accept-Encoding': 'gzip, deflate, br, zstd', 'Accept-Language': 'zh-CN,zh;q=0.9,en;q=0.8,en-GB;q=0.7,en-US;q=0.6', 'Cookie': 'session=eyJjc3JmX3Rva2VuIjoiM2E0ODNkOTkyOTc0MWI5NGZhYzVlOWMzODVlMmZjYTkyOTM2ZGY2NiJ9.aCKfXQ.6wUNT2_gw_9tYiTbYybM9MWoSKQ; user_roles=admin; is_admin=true; admin=true'}
2025-05-13 09:24:46,896 - app - INFO - 处理表单格式的登录请求
2025-05-13 09:24:46,896 - app - INFO - 表单数据: username=admin, password=********
2025-05-13 09:24:47,366 - app - INFO - 已生成CSRF令牌: IjNhNDgzZD...
2025-05-13 09:24:47,368 - app - INFO - 用户 admin 的角色: ['admin']
2025-05-13 09:24:47,368 - app - INFO - 用户 admin 是否是管理员: True
2025-05-13 09:24:47,392 - app - INFO - 用户登录成功: admin
2025-05-13 09:24:47,394 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:24:47] "[32mPOST /auth/login HTTP/1.1[0m" 302 -
2025-05-13 09:24:47,406 - app - DEBUG - Dashboard route accessed
2025-05-13 09:24:47,406 - app - DEBUG - Current user ID: 1
2025-05-13 09:24:47,437 - app - DEBUG - Dashboard data prepared for user: admin
2025-05-13 09:24:47,472 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:24:47] "GET /dashboard HTTP/1.1" 200 -
2025-05-13 09:24:47,496 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:24:47] "[36mGET /static/css/bootstrap.min.css HTTP/1.1[0m" 304 -
2025-05-13 09:24:47,498 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:24:47] "[36mGET /static/css/bootstrap-icons.css HTTP/1.1[0m" 304 -
2025-05-13 09:24:47,501 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:24:47] "[36mGET /static/css/style.css HTTP/1.1[0m" 304 -
2025-05-13 09:24:47,502 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:24:47] "[36mGET /static/js/jquery.min.js HTTP/1.1[0m" 304 -
2025-05-13 09:24:47,505 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:24:47] "[36mGET /static/js/utils.js HTTP/1.1[0m" 304 -
2025-05-13 09:24:47,505 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:24:47] "[36mGET /static/js/bootstrap.bundle.min.js HTTP/1.1[0m" 304 -
2025-05-13 09:24:47,513 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:24:47] "[36mGET /static/js/auth.js HTTP/1.1[0m" 304 -
2025-05-13 09:24:47,516 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:24:47] "[36mGET /static/js/fix-modals.js HTTP/1.1[0m" 304 -
2025-05-13 09:24:47,517 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:24:47] "[36mGET /static/js/user-profile.js HTTP/1.1[0m" 304 -
2025-05-13 09:24:47,517 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:24:47] "[36mGET /static/js/csrf.js HTTP/1.1[0m" 304 -
2025-05-13 09:24:47,539 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:24:47] "GET /static/css/fonts/bootstrap-icons.woff2 HTTP/1.1" 200 -
2025-05-13 09:24:47,553 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:24:47] "[36mGET /static/favicon.ico HTTP/1.1[0m" 304 -
2025-05-13 09:24:48,485 - app - WARNING - 绕过JWT验证: /projects
2025-05-13 09:24:48,485 - app.utils.jwt_callbacks - WARNING - JWT验证已被绕过: /projects
2025-05-13 09:24:48,485 - app.routes.main - INFO - JWT bypass enabled for projects - Using test user
2025-05-13 09:24:48,516 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:24:48] "GET /projects?bypass_jwt=true HTTP/1.1" 200 -
2025-05-13 09:24:48,547 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:24:48] "[36mGET /static/css/bootstrap.min.css HTTP/1.1[0m" 304 -
2025-05-13 09:24:48,549 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:24:48] "[36mGET /static/css/bootstrap-icons.css HTTP/1.1[0m" 304 -
2025-05-13 09:24:48,550 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:24:48] "[36mGET /static/css/style.css HTTP/1.1[0m" 304 -
2025-05-13 09:24:48,551 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:24:48] "[36mGET /static/js/jquery.min.js HTTP/1.1[0m" 304 -
2025-05-13 09:24:48,552 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:24:48] "GET /static/css/frappe-gantt.css HTTP/1.1" 200 -
2025-05-13 09:24:48,554 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:24:48] "[36mGET /static/js/bootstrap.bundle.min.js HTTP/1.1[0m" 304 -
2025-05-13 09:24:48,558 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:24:48] "[36mGET /static/js/utils.js HTTP/1.1[0m" 304 -
2025-05-13 09:24:48,562 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:24:48] "[36mGET /static/js/fix-modals.js HTTP/1.1[0m" 304 -
2025-05-13 09:24:48,562 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:24:48] "GET /static/js/frappe-gantt.min.js HTTP/1.1" 200 -
2025-05-13 09:24:48,562 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:24:48] "[36mGET /static/js/auth.js HTTP/1.1[0m" 304 -
2025-05-13 09:24:48,565 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:24:48] "[36mGET /static/js/csrf.js HTTP/1.1[0m" 304 -
2025-05-13 09:24:48,571 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:24:48] "[36mGET /static/js/user-profile.js HTTP/1.1[0m" 304 -
2025-05-13 09:24:48,590 - app - WARNING - 绕过JWT验证: /api/global/users
2025-05-13 09:24:48,590 - app - ERROR - 获取用户列表失败: type object 'User' has no attribute 'status'
2025-05-13 09:24:48,591 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:24:48] "[35m[1mGET /api/global/users?bypass_jwt=true&_=1747099488585 HTTP/1.1[0m" 500 -
2025-05-13 09:24:48,600 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:24:48] "[36mGET /static/favicon.ico HTTP/1.1[0m" 304 -
2025-05-13 09:24:48,602 - app - WARNING - 绕过JWT验证: /api/project-managers
2025-05-13 09:24:48,602 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:24:48] "[33mGET /api/project-managers?bypass_jwt=true&_=1747099488597 HTTP/1.1[0m" 404 -
2025-05-13 09:24:48,608 - app - WARNING - 绕过JWT验证: /api/global/project-managers
2025-05-13 09:24:48,615 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:24:48] "GET /api/global/project-managers?bypass_jwt=true&_=1747099488597 HTTP/1.1" 200 -
2025-05-13 09:24:51,826 - app - WARNING - 绕过JWT验证: /projects/detail/8
2025-05-13 09:24:51,827 - app - INFO - 直接调用项目详情视图函数，不进行重定向: 项目ID=8
2025-05-13 09:24:51,827 - app.utils.jwt_callbacks - WARNING - JWT验证已被绕过: /projects/detail/8
2025-05-13 09:24:51,828 - app.utils.jwt_callbacks - WARNING - 使用bypass_jwt返回默认用户ID: 1
2025-05-13 09:24:51,828 - app.routes.projects - INFO - 获取项目 8 详情页面 - 用户ID: 1, URL: http://127.0.0.1:5000/projects/detail/8?no_redirect=true&bypass_jwt=true
2025-05-13 09:24:51,899 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:24:51] "GET /projects/detail/8?no_redirect=true&bypass_jwt=true HTTP/1.1" 200 -
2025-05-13 09:24:51,930 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:24:51] "[36mGET /static/css/bootstrap.min.css HTTP/1.1[0m" 304 -
2025-05-13 09:24:51,931 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:24:51] "[36mGET /static/css/bootstrap-icons.css HTTP/1.1[0m" 304 -
2025-05-13 09:24:51,934 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:24:51] "[36mGET /static/css/style.css HTTP/1.1[0m" 304 -
2025-05-13 09:24:51,936 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:24:51] "[36mGET /static/js/jquery.min.js HTTP/1.1[0m" 304 -
2025-05-13 09:24:51,940 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:24:51] "[36mGET /static/js/bootstrap.bundle.min.js HTTP/1.1[0m" 304 -
2025-05-13 09:24:51,943 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:24:51] "[36mGET /static/js/utils.js HTTP/1.1[0m" 304 -
2025-05-13 09:24:51,945 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:24:51] "[36mGET /static/js/auth.js HTTP/1.1[0m" 304 -
2025-05-13 09:24:51,947 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:24:51] "[36mGET /static/js/fix-modals.js HTTP/1.1[0m" 304 -
2025-05-13 09:24:51,948 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:24:51] "[36mGET /static/js/csrf.js HTTP/1.1[0m" 304 -
2025-05-13 09:24:51,951 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:24:51] "[36mGET /static/js/user-profile.js HTTP/1.1[0m" 304 -
2025-05-13 09:24:51,975 - app - WARNING - 绕过JWT验证: /api/global/users
2025-05-13 09:24:51,976 - app - WARNING - 绕过JWT验证: /api/projects/8/risks
2025-05-13 09:24:51,976 - app - ERROR - 获取用户列表失败: type object 'User' has no attribute 'status'
2025-05-13 09:24:51,978 - app - WARNING - 绕过JWT验证: /api/global/users
2025-05-13 09:24:51,979 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:24:51] "[33mGET /api/projects/8/risks?bypass_jwt=true&_=1747099491971 HTTP/1.1[0m" 404 -
2025-05-13 09:24:51,979 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:24:51] "[35m[1mGET /api/global/users?bypass_jwt=true&_=1747099491971 HTTP/1.1[0m" 500 -
2025-05-13 09:24:51,980 - app - WARNING - 绕过JWT验证: /api/projects/8/risks
2025-05-13 09:24:51,980 - app - ERROR - 获取用户列表失败: type object 'User' has no attribute 'status'
2025-05-13 09:24:51,982 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:24:51] "[33mGET /api/projects/8/risks?bypass_jwt=true&_=1747099491972 HTTP/1.1[0m" 404 -
2025-05-13 09:24:51,982 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:24:51] "[35m[1mGET /api/global/users?bypass_jwt=true&_=1747099491972 HTTP/1.1[0m" 500 -
2025-05-13 09:24:51,986 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:24:51] "[36mGET /static/favicon.ico HTTP/1.1[0m" 304 -
2025-05-13 09:24:51,988 - app - WARNING - 绕过JWT验证: /api/risks
2025-05-13 09:24:51,989 - app - WARNING - 绕过JWT验证: /api/users
2025-05-13 09:24:51,989 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:24:51] "[33mGET /api/risks?project_id=8&bypass_jwt=true&_=1747099491971 HTTP/1.1[0m" 404 -
2025-05-13 09:24:51,991 - app - WARNING - 绕过JWT验证: /api/risks
2025-05-13 09:24:51,991 - app.utils.jwt_callbacks - WARNING - JWT验证已被绕过: /api/users
2025-05-13 09:24:51,993 - app - WARNING - 绕过JWT验证: /api/users
2025-05-13 09:24:51,994 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:24:51] "[33mGET /api/risks?project_id=8&bypass_jwt=true&_=1747099491972 HTTP/1.1[0m" 404 -
2025-05-13 09:24:51,994 - app - INFO - JWT bypass enabled for getting users
2025-05-13 09:24:51,994 - app.utils.jwt_callbacks - WARNING - JWT验证已被绕过: /api/users
2025-05-13 09:24:51,995 - app - INFO - JWT bypass enabled for getting users
2025-05-13 09:24:52,001 - app - WARNING - 绕过JWT验证: /api/auth/risks
2025-05-13 09:24:52,003 - app - WARNING - 绕过JWT验证: /api/auth/risks
2025-05-13 09:24:52,004 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:24:52] "[33mGET /api/auth/risks?project_id=8&bypass_jwt=true&_=1747099491971 HTTP/1.1[0m" 404 -
2025-05-13 09:24:52,006 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:24:52] "[33mGET /api/auth/risks?project_id=8&bypass_jwt=true&_=1747099491972 HTTP/1.1[0m" 404 -
2025-05-13 09:24:52,018 - app - WARNING - 绕过JWT验证: /api/noauth/risks
2025-05-13 09:24:52,019 - app - WARNING - 绕过JWT验证: /api/noauth/risks
2025-05-13 09:24:52,021 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:24:52] "[33mGET /api/noauth/risks?project_id=8&bypass_jwt=true&_=1747099491971 HTTP/1.1[0m" 404 -
2025-05-13 09:24:52,023 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:24:52] "[33mGET /api/noauth/risks?project_id=8&bypass_jwt=true&_=1747099491972 HTTP/1.1[0m" 404 -
2025-05-13 09:24:52,149 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:24:52] "GET /api/users?bypass_jwt=true&_=1747099491971 HTTP/1.1" 200 -
2025-05-13 09:24:52,156 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:24:52] "GET /api/users?bypass_jwt=true&_=1747099491972 HTTP/1.1" 200 -
2025-05-13 09:24:53,768 - app - WARNING - 绕过JWT验证: /api/global/users
2025-05-13 09:24:53,769 - app - WARNING - 绕过JWT验证: /api/global/users
2025-05-13 09:24:53,770 - app - ERROR - 获取用户列表失败: type object 'User' has no attribute 'status'
2025-05-13 09:24:53,772 - app - WARNING - 绕过JWT验证: /api/global/users
2025-05-13 09:24:53,772 - app - ERROR - 获取用户列表失败: type object 'User' has no attribute 'status'
2025-05-13 09:24:53,772 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:24:53] "[35m[1mGET /api/global/users?bypass_jwt=true&_=1747099493764 HTTP/1.1[0m" 500 -
2025-05-13 09:24:53,773 - app - WARNING - 绕过JWT验证: /api/global/users
2025-05-13 09:24:53,773 - app - ERROR - 获取用户列表失败: type object 'User' has no attribute 'status'
2025-05-13 09:24:53,775 - app - WARNING - 绕过JWT验证: /api/global/users
2025-05-13 09:24:53,775 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:24:53] "[35m[1mGET /api/global/users?bypass_jwt=true&_=1747099493765 HTTP/1.1[0m" 500 -
2025-05-13 09:24:53,775 - app - WARNING - 绕过JWT验证: /api/global/users
2025-05-13 09:24:53,777 - app - ERROR - 获取用户列表失败: type object 'User' has no attribute 'status'
2025-05-13 09:24:53,777 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:24:53] "[35m[1mGET /api/global/users?bypass_jwt=true&_=1747099493766 HTTP/1.1[0m" 500 -
2025-05-13 09:24:53,777 - app - ERROR - 获取用户列表失败: type object 'User' has no attribute 'status'
2025-05-13 09:24:53,777 - app - ERROR - 获取用户列表失败: type object 'User' has no attribute 'status'
2025-05-13 09:24:53,778 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:24:53] "[35m[1mGET /api/global/users?bypass_jwt=true&_=1747099493767 HTTP/1.1[0m" 500 -
2025-05-13 09:24:53,779 - app - WARNING - 绕过JWT验证: /api/global/users
2025-05-13 09:24:53,780 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:24:53] "[35m[1mGET /api/global/users?bypass_jwt=true&_=1747099493768 HTTP/1.1[0m" 500 -
2025-05-13 09:24:53,781 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:24:53] "[35m[1mGET /api/global/users?bypass_jwt=true&_=1747099493769 HTTP/1.1[0m" 500 -
2025-05-13 09:24:53,783 - app - ERROR - 获取用户列表失败: type object 'User' has no attribute 'status'
2025-05-13 09:24:53,784 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:24:53] "[35m[1mGET /api/global/users?bypass_jwt=true&_=1747099493770 HTTP/1.1[0m" 500 -
2025-05-13 09:24:58,581 - app - WARNING - 绕过JWT验证: /api/noauth/projects/8
2025-05-13 09:24:58,582 - app.routes.projects - INFO - 无需认证更新项目API: 项目ID=8
2025-05-13 09:24:58,592 - app.routes.projects - INFO - 项目更新成功: 项目ID=8
2025-05-13 09:24:58,597 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:24:58] "PUT /api/noauth/projects/8?bypass_jwt=true&_=1747099498575 HTTP/1.1" 200 -
2025-05-13 09:24:59,618 - app - WARNING - 绕过JWT验证: /projects/detail/8
2025-05-13 09:24:59,619 - app - INFO - 直接调用项目详情视图函数，不进行重定向: 项目ID=8
2025-05-13 09:24:59,619 - app.utils.jwt_callbacks - WARNING - JWT验证已被绕过: /projects/detail/8
2025-05-13 09:24:59,619 - app.utils.jwt_callbacks - WARNING - 使用bypass_jwt返回默认用户ID: 1
2025-05-13 09:24:59,619 - app.routes.projects - INFO - 获取项目 8 详情页面 - 用户ID: 1, URL: http://127.0.0.1:5000/projects/detail/8?no_redirect=true&bypass_jwt=true
2025-05-13 09:24:59,626 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:24:59] "GET /projects/detail/8?no_redirect=true&bypass_jwt=true HTTP/1.1" 200 -
2025-05-13 09:24:59,652 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:24:59] "[36mGET /static/css/bootstrap.min.css HTTP/1.1[0m" 304 -
2025-05-13 09:24:59,654 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:24:59] "[36mGET /static/css/bootstrap-icons.css HTTP/1.1[0m" 304 -
2025-05-13 09:24:59,658 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:24:59] "[36mGET /static/css/style.css HTTP/1.1[0m" 304 -
2025-05-13 09:24:59,658 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:24:59] "[36mGET /static/js/jquery.min.js HTTP/1.1[0m" 304 -
2025-05-13 09:24:59,660 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:24:59] "[36mGET /static/js/bootstrap.bundle.min.js HTTP/1.1[0m" 304 -
2025-05-13 09:24:59,663 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:24:59] "[36mGET /static/js/utils.js HTTP/1.1[0m" 304 -
2025-05-13 09:24:59,666 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:24:59] "[36mGET /static/js/auth.js HTTP/1.1[0m" 304 -
2025-05-13 09:24:59,672 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:24:59] "[36mGET /static/js/csrf.js HTTP/1.1[0m" 304 -
2025-05-13 09:24:59,673 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:24:59] "[36mGET /static/js/fix-modals.js HTTP/1.1[0m" 304 -
2025-05-13 09:24:59,674 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:24:59] "[36mGET /static/js/user-profile.js HTTP/1.1[0m" 304 -
2025-05-13 09:24:59,690 - app - WARNING - 绕过JWT验证: /api/global/users
2025-05-13 09:24:59,691 - app - WARNING - 绕过JWT验证: /api/projects/8/risks
2025-05-13 09:24:59,691 - app - ERROR - 获取用户列表失败: type object 'User' has no attribute 'status'
2025-05-13 09:24:59,692 - app - WARNING - 绕过JWT验证: /api/global/users
2025-05-13 09:24:59,694 - app - WARNING - 绕过JWT验证: /api/projects/8/risks
2025-05-13 09:24:59,694 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:24:59] "[33mGET /api/projects/8/risks?bypass_jwt=true&_=1747099499686 HTTP/1.1[0m" 404 -
2025-05-13 09:24:59,695 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:24:59] "[35m[1mGET /api/global/users?bypass_jwt=true&_=1747099499686 HTTP/1.1[0m" 500 -
2025-05-13 09:24:59,695 - app - ERROR - 获取用户列表失败: type object 'User' has no attribute 'status'
2025-05-13 09:24:59,696 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:24:59] "[33mGET /api/projects/8/risks?bypass_jwt=true&_=1747099499687 HTTP/1.1[0m" 404 -
2025-05-13 09:24:59,697 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:24:59] "[35m[1mGET /api/global/users?bypass_jwt=true&_=1747099499687 HTTP/1.1[0m" 500 -
2025-05-13 09:24:59,703 - app - WARNING - 绕过JWT验证: /api/risks
2025-05-13 09:24:59,703 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:24:59] "[36mGET /static/favicon.ico HTTP/1.1[0m" 304 -
2025-05-13 09:24:59,704 - app - WARNING - 绕过JWT验证: /api/users
2025-05-13 09:24:59,705 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:24:59] "[33mGET /api/risks?project_id=8&bypass_jwt=true&_=1747099499686 HTTP/1.1[0m" 404 -
2025-05-13 09:24:59,707 - app - WARNING - 绕过JWT验证: /api/risks
2025-05-13 09:24:59,708 - app - WARNING - 绕过JWT验证: /api/users
2025-05-13 09:24:59,708 - app.utils.jwt_callbacks - WARNING - JWT验证已被绕过: /api/users
2025-05-13 09:24:59,709 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:24:59] "[33mGET /api/risks?project_id=8&bypass_jwt=true&_=1747099499687 HTTP/1.1[0m" 404 -
2025-05-13 09:24:59,709 - app.utils.jwt_callbacks - WARNING - JWT验证已被绕过: /api/users
2025-05-13 09:24:59,710 - app - INFO - JWT bypass enabled for getting users
2025-05-13 09:24:59,711 - app - INFO - JWT bypass enabled for getting users
2025-05-13 09:24:59,716 - app - WARNING - 绕过JWT验证: /api/auth/risks
2025-05-13 09:24:59,719 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:24:59] "[33mGET /api/auth/risks?project_id=8&bypass_jwt=true&_=1747099499686 HTTP/1.1[0m" 404 -
2025-05-13 09:24:59,720 - app - WARNING - 绕过JWT验证: /api/auth/risks
2025-05-13 09:24:59,723 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:24:59] "[33mGET /api/auth/risks?project_id=8&bypass_jwt=true&_=1747099499687 HTTP/1.1[0m" 404 -
2025-05-13 09:24:59,727 - app - WARNING - 绕过JWT验证: /api/noauth/risks
2025-05-13 09:24:59,729 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:24:59] "[33mGET /api/noauth/risks?project_id=8&bypass_jwt=true&_=1747099499686 HTTP/1.1[0m" 404 -
2025-05-13 09:24:59,731 - app - WARNING - 绕过JWT验证: /api/noauth/risks
2025-05-13 09:24:59,734 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:24:59] "[33mGET /api/noauth/risks?project_id=8&bypass_jwt=true&_=1747099499687 HTTP/1.1[0m" 404 -
2025-05-13 09:24:59,798 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:24:59] "GET /api/users?bypass_jwt=true&_=1747099499686 HTTP/1.1" 200 -
2025-05-13 09:24:59,803 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:24:59] "GET /api/users?bypass_jwt=true&_=1747099499687 HTTP/1.1" 200 -
2025-05-13 09:25:03,165 - app - WARNING - 绕过JWT验证: /api/global/users
2025-05-13 09:25:03,167 - app - WARNING - 绕过JWT验证: /api/global/users
2025-05-13 09:25:03,167 - app - ERROR - 获取用户列表失败: type object 'User' has no attribute 'status'
2025-05-13 09:25:03,168 - app - WARNING - 绕过JWT验证: /api/global/users
2025-05-13 09:25:03,168 - app - ERROR - 获取用户列表失败: type object 'User' has no attribute 'status'
2025-05-13 09:25:03,169 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:25:03] "[35m[1mGET /api/global/users?bypass_jwt=true&_=1747099503161 HTTP/1.1[0m" 500 -
2025-05-13 09:25:03,169 - app - WARNING - 绕过JWT验证: /api/global/users
2025-05-13 09:25:03,170 - app - ERROR - 获取用户列表失败: type object 'User' has no attribute 'status'
2025-05-13 09:25:03,170 - app - WARNING - 绕过JWT验证: /api/global/users
2025-05-13 09:25:03,171 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:25:03] "[35m[1mGET /api/global/users?bypass_jwt=true&_=1747099503163 HTTP/1.1[0m" 500 -
2025-05-13 09:25:03,171 - app - WARNING - 绕过JWT验证: /api/global/users
2025-05-13 09:25:03,171 - app - ERROR - 获取用户列表失败: type object 'User' has no attribute 'status'
2025-05-13 09:25:03,172 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:25:03] "[35m[1mGET /api/global/users?bypass_jwt=true&_=1747099503164 HTTP/1.1[0m" 500 -
2025-05-13 09:25:03,172 - app - ERROR - 获取用户列表失败: type object 'User' has no attribute 'status'
2025-05-13 09:25:03,173 - app - ERROR - 获取用户列表失败: type object 'User' has no attribute 'status'
2025-05-13 09:25:03,174 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:25:03] "[35m[1mGET /api/global/users?bypass_jwt=true&_=1747099503165 HTTP/1.1[0m" 500 -
2025-05-13 09:25:03,175 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:25:03] "[35m[1mGET /api/global/users?bypass_jwt=true&_=1747099503166 HTTP/1.1[0m" 500 -
2025-05-13 09:25:03,176 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:25:03] "[35m[1mGET /api/global/users?bypass_jwt=true&_=1747099503167 HTTP/1.1[0m" 500 -
2025-05-13 09:25:03,179 - app - WARNING - 绕过JWT验证: /api/global/users
2025-05-13 09:25:03,179 - app - ERROR - 获取用户列表失败: type object 'User' has no attribute 'status'
2025-05-13 09:25:03,181 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:25:03] "[35m[1mGET /api/global/users?bypass_jwt=true&_=1747099503166 HTTP/1.1[0m" 500 -
2025-05-13 09:25:06,965 - app - WARNING - 绕过JWT验证: /api/noauth/projects/8
2025-05-13 09:25:06,965 - app.routes.projects - INFO - 无需认证更新项目API: 项目ID=8
2025-05-13 09:25:06,977 - app.routes.projects - INFO - 项目更新成功: 项目ID=8
2025-05-13 09:25:06,980 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:25:06] "PUT /api/noauth/projects/8?bypass_jwt=true&_=1747099506959 HTTP/1.1" 200 -
2025-05-13 09:25:08,012 - app - WARNING - 绕过JWT验证: /projects/detail/8
2025-05-13 09:25:08,013 - app - INFO - 直接调用项目详情视图函数，不进行重定向: 项目ID=8
2025-05-13 09:25:08,014 - app.utils.jwt_callbacks - WARNING - JWT验证已被绕过: /projects/detail/8
2025-05-13 09:25:08,014 - app.utils.jwt_callbacks - WARNING - 使用bypass_jwt返回默认用户ID: 1
2025-05-13 09:25:08,014 - app.routes.projects - INFO - 获取项目 8 详情页面 - 用户ID: 1, URL: http://127.0.0.1:5000/projects/detail/8?no_redirect=true&bypass_jwt=true
2025-05-13 09:25:08,047 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:25:08] "GET /projects/detail/8?no_redirect=true&bypass_jwt=true HTTP/1.1" 200 -
2025-05-13 09:25:08,069 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:25:08] "[36mGET /static/css/bootstrap.min.css HTTP/1.1[0m" 304 -
2025-05-13 09:25:08,071 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:25:08] "[36mGET /static/css/bootstrap-icons.css HTTP/1.1[0m" 304 -
2025-05-13 09:25:08,076 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:25:08] "[36mGET /static/css/style.css HTTP/1.1[0m" 304 -
2025-05-13 09:25:08,077 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:25:08] "[36mGET /static/js/jquery.min.js HTTP/1.1[0m" 304 -
2025-05-13 09:25:08,079 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:25:08] "[36mGET /static/js/bootstrap.bundle.min.js HTTP/1.1[0m" 304 -
2025-05-13 09:25:08,083 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:25:08] "[36mGET /static/js/utils.js HTTP/1.1[0m" 304 -
2025-05-13 09:25:08,083 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:25:08] "[36mGET /static/js/auth.js HTTP/1.1[0m" 304 -
2025-05-13 09:25:08,088 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:25:08] "[36mGET /static/js/csrf.js HTTP/1.1[0m" 304 -
2025-05-13 09:25:08,088 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:25:08] "[36mGET /static/js/fix-modals.js HTTP/1.1[0m" 304 -
2025-05-13 09:25:08,090 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:25:08] "[36mGET /static/js/user-profile.js HTTP/1.1[0m" 304 -
2025-05-13 09:25:08,103 - app - WARNING - 绕过JWT验证: /api/global/users
2025-05-13 09:25:08,104 - app - ERROR - 获取用户列表失败: type object 'User' has no attribute 'status'
2025-05-13 09:25:08,105 - app - WARNING - 绕过JWT验证: /api/projects/8/risks
2025-05-13 09:25:08,105 - app - WARNING - 绕过JWT验证: /api/global/users
2025-05-13 09:25:08,106 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:25:08] "[35m[1mGET /api/global/users?bypass_jwt=true&_=1747099508098 HTTP/1.1[0m" 500 -
2025-05-13 09:25:08,107 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:25:08] "[33mGET /api/projects/8/risks?bypass_jwt=true&_=1747099508099 HTTP/1.1[0m" 404 -
2025-05-13 09:25:08,107 - app - WARNING - 绕过JWT验证: /api/projects/8/risks
2025-05-13 09:25:08,108 - app - ERROR - 获取用户列表失败: type object 'User' has no attribute 'status'
2025-05-13 09:25:08,109 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:25:08] "[33mGET /api/projects/8/risks?bypass_jwt=true&_=1747099508099 HTTP/1.1[0m" 404 -
2025-05-13 09:25:08,109 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:25:08] "[35m[1mGET /api/global/users?bypass_jwt=true&_=1747099508099 HTTP/1.1[0m" 500 -
2025-05-13 09:25:08,116 - app - WARNING - 绕过JWT验证: /api/users
2025-05-13 09:25:08,117 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:25:08] "[36mGET /static/favicon.ico HTTP/1.1[0m" 304 -
2025-05-13 09:25:08,118 - app - WARNING - 绕过JWT验证: /api/risks
2025-05-13 09:25:08,118 - app.utils.jwt_callbacks - WARNING - JWT验证已被绕过: /api/users
2025-05-13 09:25:08,119 - app - WARNING - 绕过JWT验证: /api/risks
2025-05-13 09:25:08,120 - app - WARNING - 绕过JWT验证: /api/users
2025-05-13 09:25:08,121 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:25:08] "[33mGET /api/risks?project_id=8&bypass_jwt=true&_=1747099508099 HTTP/1.1[0m" 404 -
2025-05-13 09:25:08,123 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:25:08] "[33mGET /api/risks?project_id=8&bypass_jwt=true&_=1747099508099 HTTP/1.1[0m" 404 -
2025-05-13 09:25:08,123 - app.utils.jwt_callbacks - WARNING - JWT验证已被绕过: /api/users
2025-05-13 09:25:08,124 - app - INFO - JWT bypass enabled for getting users
2025-05-13 09:25:08,127 - app - WARNING - 绕过JWT验证: /api/auth/risks
2025-05-13 09:25:08,129 - app - INFO - JWT bypass enabled for getting users
2025-05-13 09:25:08,132 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:25:08] "[33mGET /api/auth/risks?project_id=8&bypass_jwt=true&_=1747099508099 HTTP/1.1[0m" 404 -
2025-05-13 09:25:08,135 - app - WARNING - 绕过JWT验证: /api/auth/risks
2025-05-13 09:25:08,138 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:25:08] "[33mGET /api/auth/risks?project_id=8&bypass_jwt=true&_=1747099508099 HTTP/1.1[0m" 404 -
2025-05-13 09:25:08,140 - app - WARNING - 绕过JWT验证: /api/noauth/risks
2025-05-13 09:25:08,143 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:25:08] "[33mGET /api/noauth/risks?project_id=8&bypass_jwt=true&_=1747099508099 HTTP/1.1[0m" 404 -
2025-05-13 09:25:08,147 - app - WARNING - 绕过JWT验证: /api/noauth/risks
2025-05-13 09:25:08,153 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:25:08] "[33mGET /api/noauth/risks?project_id=8&bypass_jwt=true&_=1747099508099 HTTP/1.1[0m" 404 -
2025-05-13 09:25:08,197 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:25:08] "GET /api/users?bypass_jwt=true&_=1747099508098 HTTP/1.1" 200 -
2025-05-13 09:25:08,220 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:25:08] "GET /api/users?bypass_jwt=true&_=1747099508099 HTTP/1.1" 200 -
2025-05-13 09:25:21,396 - app - WARNING - 绕过JWT验证: /api/tasks
2025-05-13 09:25:21,397 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:25:21] "[33mPOST /api/tasks?bypass_jwt=true HTTP/1.1[0m" 404 -
2025-05-13 09:25:35,491 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:25:35] "[36mGET /static/css/bootstrap.min.css HTTP/1.1[0m" 304 -
2025-05-13 09:25:35,492 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:25:35] "[36mGET /static/css/bootstrap-icons.css HTTP/1.1[0m" 304 -
2025-05-13 09:25:35,492 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:25:35] "[36mGET /static/css/style.css HTTP/1.1[0m" 304 -
2025-05-13 09:25:35,506 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:25:35] "[33mGET /.well-known/appspecific/com.chrome.devtools.json HTTP/1.1[0m" 404 -
2025-05-13 09:25:35,593 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:25:35] "GET /static/css/bootstrap.min.css.map HTTP/1.1" 200 -
2025-05-13 09:25:35,596 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:25:35] "[36mGET /static/css/bootstrap.min.css.map HTTP/1.1[0m" 304 -
2025-05-13 09:25:35,675 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:25:35] "GET /static/js/bootstrap.bundle.min.js.map HTTP/1.1" 200 -
2025-05-13 09:26:56,505 - werkzeug - INFO -  * Detected change in 'D:\\tmp\\work\\app\\routes\\tasks.py', reloading
2025-05-13 09:26:57,012 - werkzeug - INFO -  * Restarting with stat
2025-05-13 09:26:57,982 - app.utils.permissions - INFO - 更新权限: manage_users
2025-05-13 09:26:57,984 - app.utils.permissions - INFO - 更新权限: manage_roles
2025-05-13 09:26:57,984 - app.utils.permissions - INFO - 更新权限: manage_all_projects
2025-05-13 09:26:57,984 - app.utils.permissions - INFO - 更新权限: manage_project
2025-05-13 09:26:57,986 - app.utils.permissions - INFO - 更新权限: manage_all_tasks
2025-05-13 09:26:57,986 - app.utils.permissions - INFO - 更新权限: manage_task
2025-05-13 09:26:57,987 - app.utils.permissions - INFO - 更新权限: view_project
2025-05-13 09:26:57,988 - app.utils.permissions - INFO - 更新权限: view_task
2025-05-13 09:26:57,988 - app.utils.permissions - INFO - 更新权限: manage_resources
2025-05-13 09:26:57,989 - app.utils.permissions - INFO - 更新权限: manage_risks
2025-05-13 09:26:57,989 - app.utils.permissions - INFO - 更新权限: view_reports
2025-05-13 09:26:57,989 - app.utils.permissions - INFO - 更新权限: create_task
2025-05-13 09:26:57,990 - app.utils.permissions - INFO - 更新权限: create_project
2025-05-13 09:26:57,990 - app.utils.permissions - INFO - 更新权限: assign_task
2025-05-13 09:26:57,990 - app.utils.permissions - INFO - 更新权限: change_project_status
2025-05-13 09:26:57,991 - app.utils.permissions - INFO - 更新权限: change_task_status
2025-05-13 09:26:57,994 - app.utils.permissions - INFO - 更新角色: admin
2025-05-13 09:26:57,995 - app.utils.permissions - INFO - 为管理员角色添加所有权限: 16个
2025-05-13 09:26:57,996 - app.utils.permissions - INFO - 更新角色: manager
2025-05-13 09:26:57,997 - app.utils.permissions - INFO - 为角色 manager 添加权限: manage_project
2025-05-13 09:26:57,997 - app.utils.permissions - INFO - 为角色 manager 添加权限: manage_task
2025-05-13 09:26:57,997 - app.utils.permissions - INFO - 为角色 manager 添加权限: view_project
2025-05-13 09:26:57,997 - app.utils.permissions - INFO - 为角色 manager 添加权限: view_task
2025-05-13 09:26:57,998 - app.utils.permissions - INFO - 为角色 manager 添加权限: manage_resources
2025-05-13 09:26:57,998 - app.utils.permissions - INFO - 为角色 manager 添加权限: manage_risks
2025-05-13 09:26:57,998 - app.utils.permissions - INFO - 为角色 manager 添加权限: view_reports
2025-05-13 09:26:57,998 - app.utils.permissions - INFO - 为角色 manager 添加权限: create_project
2025-05-13 09:26:57,998 - app.utils.permissions - INFO - 为角色 manager 添加权限: create_task
2025-05-13 09:26:57,998 - app.utils.permissions - INFO - 为角色 manager 添加权限: assign_task
2025-05-13 09:26:57,998 - app.utils.permissions - INFO - 为角色 manager 添加权限: change_project_status
2025-05-13 09:26:57,999 - app.utils.permissions - INFO - 为角色 manager 添加权限: change_task_status
2025-05-13 09:26:57,999 - app.utils.permissions - INFO - 更新角色: user
2025-05-13 09:26:57,999 - app.utils.permissions - INFO - 为角色 user 添加权限: view_project
2025-05-13 09:26:58,000 - app.utils.permissions - INFO - 为角色 user 添加权限: view_task
2025-05-13 09:26:58,000 - app.utils.permissions - INFO - 为角色 user 添加权限: view_reports
2025-05-13 09:26:58,000 - app.utils.permissions - INFO - 角色和权限初始化完成
2025-05-13 09:26:58,000 - __main__ - INFO - 角色和权限初始化成功
2025-05-13 09:26:58,002 - __main__ - INFO - 数据库初始化完成
2025-05-13 09:26:58,014 - __main__ - INFO - 系统资源检查完成
2025-05-13 09:26:58,014 - __main__ - INFO - 开始清理旧数据
2025-05-13 09:26:58,015 - __main__ - INFO - 删除了 0 条过期的资源使用记录
2025-05-13 09:26:58,016 - __main__ - INFO - 删除了 0 条已解决的过期警报
2025-05-13 09:26:58,016 - __main__ - INFO - 旧数据清理完成
2025-05-13 09:26:58,022 - werkzeug - WARNING -  * Debugger is active!
2025-05-13 09:26:58,024 - werkzeug - INFO -  * Debugger PIN: 670-037-726
2025-05-13 09:28:51,394 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:28:51] "[36mGET /static/favicon.ico HTTP/1.1[0m" 304 -
2025-05-13 09:29:20,012 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:29:20] "GET /login HTTP/1.1" 200 -
2025-05-13 09:29:20,055 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:29:20] "GET /static/css/bootstrap.min.css HTTP/1.1" 200 -
2025-05-13 09:29:20,056 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:29:20] "GET /static/css/bootstrap-icons.css HTTP/1.1" 200 -
2025-05-13 09:29:20,060 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:29:20] "GET /static/css/style.css HTTP/1.1" 200 -
2025-05-13 09:29:20,062 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:29:20] "GET /static/js/jquery.min.js HTTP/1.1" 200 -
2025-05-13 09:29:20,063 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:29:20] "GET /static/js/bootstrap.bundle.min.js HTTP/1.1" 200 -
2025-05-13 09:29:20,066 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:29:20] "GET /static/js/utils.js HTTP/1.1" 200 -
2025-05-13 09:29:20,067 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:29:20] "GET /static/js/auth.js HTTP/1.1" 200 -
2025-05-13 09:29:20,069 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:29:20] "GET /static/images/background.png HTTP/1.1" 200 -
2025-05-13 09:29:20,076 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:29:20] "GET /static/js/fix-modals.js HTTP/1.1" 200 -
2025-05-13 09:29:20,090 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:29:20] "GET /static/js/csrf.js HTTP/1.1" 200 -
2025-05-13 09:29:20,091 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:29:20] "GET /static/js/user-profile.js HTTP/1.1" 200 -
2025-05-13 09:29:20,093 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:29:20] "GET /static/js/background-helper.js HTTP/1.1" 200 -
2025-05-13 09:29:20,094 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:29:20] "GET /static/uploads/background.png HTTP/1.1" 200 -
2025-05-13 09:29:20,119 - app - WARNING - 绕过JWT验证: /auth/user_info
2025-05-13 09:29:20,120 - app.utils.jwt_callbacks - WARNING - JWT验证已被绕过: /auth/user_info
2025-05-13 09:29:20,120 - app - INFO - 获取用户信息 - bypass_jwt: True
2025-05-13 09:29:20,120 - app - INFO - 使用默认管理员用户(ID=1)
2025-05-13 09:29:20,136 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:29:20] "GET /static/favicon.ico HTTP/1.1" 200 -
2025-05-13 09:29:20,141 - app - INFO - 成功获取用户 admin 的信息
2025-05-13 09:29:20,142 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:29:20] "GET /auth/user_info?_=1747099760115&bypass_jwt=true HTTP/1.1" 200 -
2025-05-13 09:29:21,645 - app - INFO - 登录请求 - 方法: POST, 内容类型: application/x-www-form-urlencoded
2025-05-13 09:29:21,646 - app - INFO - 请求头: {'Host': '127.0.0.1:5000', 'Connection': 'keep-alive', 'Content-Length': '135', 'Cache-Control': 'max-age=0', 'Sec-Ch-Ua': '"Chromium";v="136", "Microsoft Edge";v="136", "Not.A/Brand";v="99"', 'Sec-Ch-Ua-Mobile': '?0', 'Sec-Ch-Ua-Platform': '"Windows"', 'Origin': 'http://127.0.0.1:5000', 'Content-Type': 'application/x-www-form-urlencoded', 'Upgrade-Insecure-Requests': '1', 'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36 Edg/136.0.0.0', 'Accept': 'text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.7', 'Sec-Fetch-Site': 'same-origin', 'Sec-Fetch-Mode': 'navigate', 'Sec-Fetch-User': '?1', 'Sec-Fetch-Dest': 'document', 'Referer': 'http://127.0.0.1:5000/login', 'Accept-Encoding': 'gzip, deflate, br, zstd', 'Accept-Language': 'zh-CN,zh;q=0.9,en;q=0.8,en-GB;q=0.7,en-US;q=0.6', 'Cookie': 'session=eyJjc3JmX3Rva2VuIjoiMzhjNmE5YTcwNDBhNzk1ZTI3YzNjYWMyZWNlNDFhZWE1NWNmYmIzMCJ9.aCKgcA.A7lU5hLes3PizJBV3K_Ddv66PD0; user_roles=admin; is_admin=true; admin=true'}
2025-05-13 09:29:21,646 - app - INFO - 处理表单格式的登录请求
2025-05-13 09:29:21,647 - app - INFO - 表单数据: username=admin, password=********
2025-05-13 09:29:22,147 - app - INFO - 已生成CSRF令牌: IjM4YzZhOW...
2025-05-13 09:29:22,149 - app - INFO - 用户 admin 的角色: ['admin']
2025-05-13 09:29:22,150 - app - INFO - 用户 admin 是否是管理员: True
2025-05-13 09:29:22,171 - app - INFO - 用户登录成功: admin
2025-05-13 09:29:22,175 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:29:22] "[32mPOST /auth/login HTTP/1.1[0m" 302 -
2025-05-13 09:29:22,188 - app - DEBUG - Dashboard route accessed
2025-05-13 09:29:22,189 - app - DEBUG - Current user ID: 1
2025-05-13 09:29:22,245 - app - DEBUG - Dashboard data prepared for user: admin
2025-05-13 09:29:22,285 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:29:22] "GET /dashboard HTTP/1.1" 200 -
2025-05-13 09:29:22,313 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:29:22] "[36mGET /static/css/bootstrap.min.css HTTP/1.1[0m" 304 -
2025-05-13 09:29:22,316 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:29:22] "[36mGET /static/css/style.css HTTP/1.1[0m" 304 -
2025-05-13 09:29:22,317 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:29:22] "[36mGET /static/js/jquery.min.js HTTP/1.1[0m" 304 -
2025-05-13 09:29:22,319 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:29:22] "[36mGET /static/css/bootstrap-icons.css HTTP/1.1[0m" 304 -
2025-05-13 09:29:22,322 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:29:22] "[36mGET /static/js/bootstrap.bundle.min.js HTTP/1.1[0m" 304 -
2025-05-13 09:29:22,323 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:29:22] "[36mGET /static/js/utils.js HTTP/1.1[0m" 304 -
2025-05-13 09:29:22,327 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:29:22] "[36mGET /static/js/auth.js HTTP/1.1[0m" 304 -
2025-05-13 09:29:22,328 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:29:22] "[36mGET /static/js/fix-modals.js HTTP/1.1[0m" 304 -
2025-05-13 09:29:22,329 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:29:22] "[36mGET /static/js/csrf.js HTTP/1.1[0m" 304 -
2025-05-13 09:29:22,331 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:29:22] "[36mGET /static/js/user-profile.js HTTP/1.1[0m" 304 -
2025-05-13 09:29:22,348 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:29:22] "GET /static/css/fonts/bootstrap-icons.woff2 HTTP/1.1" 200 -
2025-05-13 09:29:22,363 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:29:22] "[36mGET /static/favicon.ico HTTP/1.1[0m" 304 -
2025-05-13 09:29:23,314 - app - WARNING - 绕过JWT验证: /projects
2025-05-13 09:29:23,314 - app.utils.jwt_callbacks - WARNING - JWT验证已被绕过: /projects
2025-05-13 09:29:23,314 - app.routes.main - INFO - JWT bypass enabled for projects - Using test user
2025-05-13 09:29:23,351 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:29:23] "GET /projects?bypass_jwt=true HTTP/1.1" 200 -
2025-05-13 09:29:23,386 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:29:23] "[36mGET /static/css/bootstrap-icons.css HTTP/1.1[0m" 304 -
2025-05-13 09:29:23,387 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:29:23] "[36mGET /static/css/bootstrap.min.css HTTP/1.1[0m" 304 -
2025-05-13 09:29:23,388 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:29:23] "[36mGET /static/css/style.css HTTP/1.1[0m" 304 -
2025-05-13 09:29:23,394 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:29:23] "GET /static/css/frappe-gantt.css HTTP/1.1" 200 -
2025-05-13 09:29:23,399 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:29:23] "[36mGET /static/js/jquery.min.js HTTP/1.1[0m" 304 -
2025-05-13 09:29:23,400 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:29:23] "[36mGET /static/js/utils.js HTTP/1.1[0m" 304 -
2025-05-13 09:29:23,402 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:29:23] "[36mGET /static/js/auth.js HTTP/1.1[0m" 304 -
2025-05-13 09:29:23,403 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:29:23] "[36mGET /static/js/bootstrap.bundle.min.js HTTP/1.1[0m" 304 -
2025-05-13 09:29:23,405 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:29:23] "[36mGET /static/js/fix-modals.js HTTP/1.1[0m" 304 -
2025-05-13 09:29:23,408 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:29:23] "[36mGET /static/js/csrf.js HTTP/1.1[0m" 304 -
2025-05-13 09:29:23,408 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:29:23] "[36mGET /static/js/user-profile.js HTTP/1.1[0m" 304 -
2025-05-13 09:29:23,409 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:29:23] "GET /static/js/frappe-gantt.min.js HTTP/1.1" 200 -
2025-05-13 09:29:23,435 - app - WARNING - 绕过JWT验证: /api/global/users
2025-05-13 09:29:23,436 - app - ERROR - 获取用户列表失败: type object 'User' has no attribute 'status'
2025-05-13 09:29:23,437 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:29:23] "[35m[1mGET /api/global/users?bypass_jwt=true&_=1747099763432 HTTP/1.1[0m" 500 -
2025-05-13 09:29:23,444 - app - WARNING - 绕过JWT验证: /api/project-managers
2025-05-13 09:29:23,444 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:29:23] "[36mGET /static/favicon.ico HTTP/1.1[0m" 304 -
2025-05-13 09:29:23,445 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:29:23] "[33mGET /api/project-managers?bypass_jwt=true&_=1747099763440 HTTP/1.1[0m" 404 -
2025-05-13 09:29:23,453 - app - WARNING - 绕过JWT验证: /api/global/project-managers
2025-05-13 09:29:23,461 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:29:23] "GET /api/global/project-managers?bypass_jwt=true&_=1747099763440 HTTP/1.1" 200 -
2025-05-13 09:29:26,469 - app - WARNING - 绕过JWT验证: /api/global/users
2025-05-13 09:29:26,469 - app - WARNING - 绕过JWT验证: /api/global/users
2025-05-13 09:29:26,472 - app - ERROR - 获取用户列表失败: type object 'User' has no attribute 'status'
2025-05-13 09:29:26,474 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:29:26] "[35m[1mGET /api/global/users?bypass_jwt=true&_=1747099766465 HTTP/1.1[0m" 500 -
2025-05-13 09:29:26,476 - app - ERROR - 获取用户列表失败: type object 'User' has no attribute 'status'
2025-05-13 09:29:26,477 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:29:26] "[35m[1mGET /api/global/users?bypass_jwt=true&_=1747099766465 HTTP/1.1[0m" 500 -
2025-05-13 09:29:26,483 - app - WARNING - 绕过JWT验证: /api/project-managers
2025-05-13 09:29:26,485 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:29:26] "[33mGET /api/project-managers?bypass_jwt=true&_=1747099766478 HTTP/1.1[0m" 404 -
2025-05-13 09:29:26,486 - app - WARNING - 绕过JWT验证: /api/project-managers
2025-05-13 09:29:26,488 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:29:26] "[33mGET /api/project-managers?bypass_jwt=true&_=1747099766479 HTTP/1.1[0m" 404 -
2025-05-13 09:29:26,493 - app - WARNING - 绕过JWT验证: /api/global/project-managers
2025-05-13 09:29:26,496 - app - WARNING - 绕过JWT验证: /api/global/project-managers
2025-05-13 09:29:26,498 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:29:26] "GET /api/global/project-managers?bypass_jwt=true&_=1747099766478 HTTP/1.1" 200 -
2025-05-13 09:29:26,503 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:29:26] "GET /api/global/project-managers?bypass_jwt=true&_=1747099766479 HTTP/1.1" 200 -
2025-05-13 09:29:43,861 - app - WARNING - 绕过JWT验证: /api/auth/projects
2025-05-13 09:29:43,863 - app - WARNING - 绕过JWT验证: /api/auth/projects
2025-05-13 09:29:43,863 - app.utils.jwt_callbacks - WARNING - JWT验证已被绕过: /api/auth/projects
2025-05-13 09:29:43,863 - app.utils.jwt_callbacks - WARNING - JWT验证已被绕过: /api/auth/projects
2025-05-13 09:29:43,864 - app.routes.projects - INFO - API创建项目 - 使用测试用户
2025-05-13 09:29:43,864 - app.routes.projects - INFO - API创建项目 - 使用测试用户
2025-05-13 09:29:43,864 - app.routes.projects - INFO - API创建项目: 收到数据 {'name': 'ffff13', 'manager_id': '1', 'start_date': '2025-05-13', 'end_date': '2025-08-16', 'description': 'ddvdfvd', 'status': 'planning'}
2025-05-13 09:29:43,865 - app.routes.projects - INFO - API创建项目: 收到数据 {'name': 'ffff13', 'manager_id': '1', 'start_date': '2025-05-13', 'end_date': '2025-08-16', 'description': 'ddvdfvd', 'status': 'planning'}
2025-05-13 09:29:43,865 - app.routes.projects - INFO - 创建项目: 用户ID=1, 数据={'name': 'ffff13', 'manager_id': '1', 'start_date': '2025-05-13', 'end_date': '2025-08-16', 'description': 'ddvdfvd', 'status': 'planning'}
2025-05-13 09:29:43,865 - app.routes.projects - INFO - 创建项目: 用户ID=1, 数据={'name': 'ffff13', 'manager_id': '1', 'start_date': '2025-05-13', 'end_date': '2025-08-16', 'description': 'ddvdfvd', 'status': 'planning'}
2025-05-13 09:29:43,878 - app.routes.projects - INFO - 创建项目成功: 12 - ffff13
2025-05-13 09:29:43,879 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:29:43] "[35m[1mPOST /api/auth/projects?bypass_jwt=true&_=1747099783854 HTTP/1.1[0m" 201 -
2025-05-13 09:29:43,892 - app.routes.projects - INFO - 创建项目成功: 13 - ffff13
2025-05-13 09:29:43,892 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:29:43] "[35m[1mPOST /api/auth/projects?bypass_jwt=true&_=1747099783854 HTTP/1.1[0m" 201 -
2025-05-13 09:29:45,319 - app - WARNING - 绕过JWT验证: /projects
2025-05-13 09:29:45,319 - app.utils.jwt_callbacks - WARNING - JWT验证已被绕过: /projects
2025-05-13 09:29:45,319 - app.routes.main - INFO - JWT bypass enabled for projects - Using test user
2025-05-13 09:29:45,329 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:29:45] "GET /projects?bypass_jwt=true HTTP/1.1" 200 -
2025-05-13 09:29:46,615 - app - WARNING - 绕过JWT验证: /projects
2025-05-13 09:29:46,616 - app.utils.jwt_callbacks - WARNING - JWT验证已被绕过: /projects
2025-05-13 09:29:46,616 - app.routes.main - INFO - JWT bypass enabled for projects - Using test user
2025-05-13 09:29:46,628 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:29:46] "GET /projects?bypass_jwt=true HTTP/1.1" 200 -
2025-05-13 09:29:46,658 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:29:46] "[36mGET /static/css/bootstrap.min.css HTTP/1.1[0m" 304 -
2025-05-13 09:29:46,660 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:29:46] "[36mGET /static/css/bootstrap-icons.css HTTP/1.1[0m" 304 -
2025-05-13 09:29:46,661 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:29:46] "[36mGET /static/css/style.css HTTP/1.1[0m" 304 -
2025-05-13 09:29:46,662 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:29:46] "[36mGET /static/css/frappe-gantt.css HTTP/1.1[0m" 304 -
2025-05-13 09:29:46,665 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:29:46] "[36mGET /static/js/bootstrap.bundle.min.js HTTP/1.1[0m" 304 -
2025-05-13 09:29:46,666 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:29:46] "[36mGET /static/js/jquery.min.js HTTP/1.1[0m" 304 -
2025-05-13 09:29:46,668 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:29:46] "[36mGET /static/js/utils.js HTTP/1.1[0m" 304 -
2025-05-13 09:29:46,671 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:29:46] "[36mGET /static/js/auth.js HTTP/1.1[0m" 304 -
2025-05-13 09:29:46,673 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:29:46] "[36mGET /static/js/fix-modals.js HTTP/1.1[0m" 304 -
2025-05-13 09:29:46,673 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:29:46] "[36mGET /static/js/csrf.js HTTP/1.1[0m" 304 -
2025-05-13 09:29:46,676 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:29:46] "[36mGET /static/js/user-profile.js HTTP/1.1[0m" 304 -
2025-05-13 09:29:46,677 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:29:46] "[36mGET /static/js/frappe-gantt.min.js HTTP/1.1[0m" 304 -
2025-05-13 09:29:46,690 - app - WARNING - 绕过JWT验证: /api/global/users
2025-05-13 09:29:46,690 - app - ERROR - 获取用户列表失败: type object 'User' has no attribute 'status'
2025-05-13 09:29:46,691 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:29:46] "[35m[1mGET /api/global/users?bypass_jwt=true&_=1747099786685 HTTP/1.1[0m" 500 -
2025-05-13 09:29:46,701 - app - WARNING - 绕过JWT验证: /api/project-managers
2025-05-13 09:29:46,702 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:29:46] "[33mGET /api/project-managers?bypass_jwt=true&_=1747099786695 HTTP/1.1[0m" 404 -
2025-05-13 09:29:46,703 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:29:46] "[36mGET /static/favicon.ico HTTP/1.1[0m" 304 -
2025-05-13 09:29:46,709 - app - WARNING - 绕过JWT验证: /api/global/project-managers
2025-05-13 09:29:46,712 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:29:46] "GET /api/global/project-managers?bypass_jwt=true&_=1747099786695 HTTP/1.1" 200 -
2025-05-13 09:30:05,683 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:30:05] "[36mGET /static/css/bootstrap.min.css HTTP/1.1[0m" 304 -
2025-05-13 09:30:05,684 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:30:05] "[36mGET /static/css/bootstrap-icons.css HTTP/1.1[0m" 304 -
2025-05-13 09:30:05,685 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:30:05] "[36mGET /static/css/style.css HTTP/1.1[0m" 304 -
2025-05-13 09:30:05,686 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:30:05] "[36mGET /static/css/frappe-gantt.css HTTP/1.1[0m" 304 -
2025-05-13 09:30:05,691 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:30:05] "[33mGET /.well-known/appspecific/com.chrome.devtools.json HTTP/1.1[0m" 404 -
2025-05-13 09:30:05,768 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:30:05] "GET /static/css/bootstrap.min.css.map HTTP/1.1" 200 -
2025-05-13 09:30:05,888 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:30:05] "GET /static/js/bootstrap.bundle.min.js.map HTTP/1.1" 200 -
2025-05-13 09:32:11,859 - app - WARNING - 绕过JWT验证: /projects/detail/9
2025-05-13 09:32:11,860 - app - INFO - 直接调用项目详情视图函数，不进行重定向: 项目ID=9
2025-05-13 09:32:11,860 - app.utils.jwt_callbacks - WARNING - JWT验证已被绕过: /projects/detail/9
2025-05-13 09:32:11,861 - app.utils.jwt_callbacks - WARNING - 使用bypass_jwt返回默认用户ID: 1
2025-05-13 09:32:11,861 - app.routes.projects - INFO - 获取项目 9 详情页面 - 用户ID: 1, URL: http://127.0.0.1:5000/projects/detail/9?no_redirect=true&bypass_jwt=true
2025-05-13 09:32:11,939 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:32:11] "GET /projects/detail/9?no_redirect=true&bypass_jwt=true HTTP/1.1" 200 -
2025-05-13 09:32:11,965 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:32:11] "[33mGET /.well-known/appspecific/com.chrome.devtools.json HTTP/1.1[0m" 404 -
2025-05-13 09:32:11,978 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:32:11] "[36mGET /static/css/bootstrap.min.css HTTP/1.1[0m" 304 -
2025-05-13 09:32:11,980 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:32:11] "[36mGET /static/css/bootstrap-icons.css HTTP/1.1[0m" 304 -
2025-05-13 09:32:11,981 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:32:11] "[36mGET /static/css/style.css HTTP/1.1[0m" 304 -
2025-05-13 09:32:11,983 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:32:11] "[36mGET /static/js/jquery.min.js HTTP/1.1[0m" 304 -
2025-05-13 09:32:11,987 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:32:11] "[36mGET /static/js/bootstrap.bundle.min.js HTTP/1.1[0m" 304 -
2025-05-13 09:32:11,989 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:32:11] "[36mGET /static/js/utils.js HTTP/1.1[0m" 304 -
2025-05-13 09:32:11,992 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:32:11] "[36mGET /static/js/auth.js HTTP/1.1[0m" 304 -
2025-05-13 09:32:11,995 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:32:11] "[36mGET /static/js/fix-modals.js HTTP/1.1[0m" 304 -
2025-05-13 09:32:11,998 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:32:11] "[36mGET /static/js/csrf.js HTTP/1.1[0m" 304 -
2025-05-13 09:32:11,998 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:32:11] "[36mGET /static/js/user-profile.js HTTP/1.1[0m" 304 -
2025-05-13 09:32:12,001 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:32:12] "[36mGET /static/css/bootstrap.min.css.map HTTP/1.1[0m" 304 -
2025-05-13 09:32:12,013 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:32:12] "[36mGET /static/js/bootstrap.bundle.min.js.map HTTP/1.1[0m" 304 -
2025-05-13 09:32:12,052 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:32:12] "[36mGET /static/css/bootstrap.min.css.map HTTP/1.1[0m" 304 -
2025-05-13 09:32:12,057 - app - WARNING - 绕过JWT验证: /api/global/users
2025-05-13 09:32:12,059 - app - ERROR - 获取用户列表失败: type object 'User' has no attribute 'status'
2025-05-13 09:32:12,059 - app - WARNING - 绕过JWT验证: /api/projects/9/risks
2025-05-13 09:32:12,061 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:32:12] "[35m[1mGET /api/global/users?bypass_jwt=true&_=1747099932051 HTTP/1.1[0m" 500 -
2025-05-13 09:32:12,063 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:32:12] "[33mGET /api/projects/9/risks?bypass_jwt=true&_=1747099932052 HTTP/1.1[0m" 404 -
2025-05-13 09:32:12,064 - app - WARNING - 绕过JWT验证: /api/global/users
2025-05-13 09:32:12,066 - app - ERROR - 获取用户列表失败: type object 'User' has no attribute 'status'
2025-05-13 09:32:12,067 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:32:12] "[35m[1mGET /api/global/users?bypass_jwt=true&_=1747099932053 HTTP/1.1[0m" 500 -
2025-05-13 09:32:12,068 - app - WARNING - 绕过JWT验证: /api/projects/9/risks
2025-05-13 09:32:12,071 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:32:12] "[33mGET /api/projects/9/risks?bypass_jwt=true&_=1747099932054 HTTP/1.1[0m" 404 -
2025-05-13 09:32:12,077 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:32:12] "[36mGET /static/js/bootstrap.bundle.min.js.map HTTP/1.1[0m" 304 -
2025-05-13 09:32:12,103 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:32:12] "[36mGET /static/favicon.ico HTTP/1.1[0m" 304 -
2025-05-13 09:32:12,105 - app - WARNING - 绕过JWT验证: /api/users
2025-05-13 09:32:12,106 - app.utils.jwt_callbacks - WARNING - JWT验证已被绕过: /api/users
2025-05-13 09:32:12,106 - app - WARNING - 绕过JWT验证: /api/risks
2025-05-13 09:32:12,108 - app - WARNING - 绕过JWT验证: /api/users
2025-05-13 09:32:12,108 - app - INFO - JWT bypass enabled for getting users
2025-05-13 09:32:12,109 - app - WARNING - 绕过JWT验证: /api/risks
2025-05-13 09:32:12,110 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:32:12] "[33mGET /api/risks?project_id=9&bypass_jwt=true&_=1747099932052 HTTP/1.1[0m" 404 -
2025-05-13 09:32:12,110 - app.utils.jwt_callbacks - WARNING - JWT验证已被绕过: /api/users
2025-05-13 09:32:12,216 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:32:12] "[33mGET /api/risks?project_id=9&bypass_jwt=true&_=1747099932054 HTTP/1.1[0m" 404 -
2025-05-13 09:32:12,218 - app - INFO - JWT bypass enabled for getting users
2025-05-13 09:32:12,225 - app - WARNING - 绕过JWT验证: /api/auth/risks
2025-05-13 09:32:12,227 - app - WARNING - 绕过JWT验证: /api/auth/risks
2025-05-13 09:32:12,228 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:32:12] "[33mGET /api/auth/risks?project_id=9&bypass_jwt=true&_=1747099932052 HTTP/1.1[0m" 404 -
2025-05-13 09:32:12,229 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:32:12] "[33mGET /api/auth/risks?project_id=9&bypass_jwt=true&_=1747099932054 HTTP/1.1[0m" 404 -
2025-05-13 09:32:12,238 - app - WARNING - 绕过JWT验证: /api/noauth/risks
2025-05-13 09:32:12,241 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:32:12] "[33mGET /api/noauth/risks?project_id=9&bypass_jwt=true&_=1747099932052 HTTP/1.1[0m" 404 -
2025-05-13 09:32:12,242 - app - WARNING - 绕过JWT验证: /api/noauth/risks
2025-05-13 09:32:12,247 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:32:12] "[33mGET /api/noauth/risks?project_id=9&bypass_jwt=true&_=1747099932054 HTTP/1.1[0m" 404 -
2025-05-13 09:32:12,282 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:32:12] "GET /api/users?bypass_jwt=true&_=1747099932051 HTTP/1.1" 200 -
2025-05-13 09:32:12,286 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:32:12] "GET /api/users?bypass_jwt=true&_=1747099932053 HTTP/1.1" 200 -
2025-05-13 09:32:17,875 - app - WARNING - 绕过JWT验证: /projects
2025-05-13 09:32:17,876 - app.utils.jwt_callbacks - WARNING - JWT验证已被绕过: /projects
2025-05-13 09:32:17,876 - app.routes.main - INFO - JWT bypass enabled for projects - Using test user
2025-05-13 09:32:17,910 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:32:17] "GET /projects?bypass_jwt=true HTTP/1.1" 200 -
2025-05-13 09:32:17,936 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:32:17] "[33mGET /.well-known/appspecific/com.chrome.devtools.json HTTP/1.1[0m" 404 -
2025-05-13 09:32:17,950 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:32:17] "[36mGET /static/css/bootstrap.min.css HTTP/1.1[0m" 304 -
2025-05-13 09:32:17,952 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:32:17] "[36mGET /static/css/bootstrap-icons.css HTTP/1.1[0m" 304 -
2025-05-13 09:32:17,954 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:32:17] "[36mGET /static/css/style.css HTTP/1.1[0m" 304 -
2025-05-13 09:32:17,956 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:32:17] "[36mGET /static/js/jquery.min.js HTTP/1.1[0m" 304 -
2025-05-13 09:32:17,960 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:32:17] "[36mGET /static/js/bootstrap.bundle.min.js HTTP/1.1[0m" 304 -
2025-05-13 09:32:17,964 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:32:17] "[36mGET /static/css/frappe-gantt.css HTTP/1.1[0m" 304 -
2025-05-13 09:32:17,965 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:32:17] "[36mGET /static/js/utils.js HTTP/1.1[0m" 304 -
2025-05-13 09:32:17,967 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:32:17] "[36mGET /static/js/auth.js HTTP/1.1[0m" 304 -
2025-05-13 09:32:17,971 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:32:17] "[36mGET /static/js/csrf.js HTTP/1.1[0m" 304 -
2025-05-13 09:32:17,971 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:32:17] "[36mGET /static/js/fix-modals.js HTTP/1.1[0m" 304 -
2025-05-13 09:32:17,975 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:32:17] "[36mGET /static/js/user-profile.js HTTP/1.1[0m" 304 -
2025-05-13 09:32:17,977 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:32:17] "[36mGET /static/js/frappe-gantt.min.js HTTP/1.1[0m" 304 -
2025-05-13 09:32:17,981 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:32:17] "[36mGET /static/js/bootstrap.bundle.min.js.map HTTP/1.1[0m" 304 -
2025-05-13 09:32:18,008 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:32:18] "[36mGET /static/css/bootstrap.min.css.map HTTP/1.1[0m" 304 -
2025-05-13 09:32:18,008 - app - WARNING - 绕过JWT验证: /api/global/users
2025-05-13 09:32:18,010 - app - ERROR - 获取用户列表失败: type object 'User' has no attribute 'status'
2025-05-13 09:32:18,010 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:32:18] "[35m[1mGET /api/global/users?bypass_jwt=true&_=1747099938002 HTTP/1.1[0m" 500 -
2025-05-13 09:32:18,042 - app - WARNING - 绕过JWT验证: /api/project-managers
2025-05-13 09:32:18,042 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:32:18] "[33mGET /api/project-managers?bypass_jwt=true&_=1747099938026 HTTP/1.1[0m" 404 -
2025-05-13 09:32:18,044 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:32:18] "[36mGET /static/favicon.ico HTTP/1.1[0m" 304 -
2025-05-13 09:32:18,052 - app - WARNING - 绕过JWT验证: /api/global/project-managers
2025-05-13 09:32:18,056 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:32:18] "GET /api/global/project-managers?bypass_jwt=true&_=1747099938026 HTTP/1.1" 200 -
2025-05-13 09:32:36,344 - werkzeug - INFO -  * Detected change in 'D:\\tmp\\work\\app\\routes\\projects.py', reloading
2025-05-13 09:32:36,629 - werkzeug - INFO -  * Restarting with stat
2025-05-13 09:32:37,547 - app.utils.permissions - INFO - 更新权限: manage_users
2025-05-13 09:32:37,548 - app.utils.permissions - INFO - 更新权限: manage_roles
2025-05-13 09:32:37,548 - app.utils.permissions - INFO - 更新权限: manage_all_projects
2025-05-13 09:32:37,549 - app.utils.permissions - INFO - 更新权限: manage_project
2025-05-13 09:32:37,549 - app.utils.permissions - INFO - 更新权限: manage_all_tasks
2025-05-13 09:32:37,550 - app.utils.permissions - INFO - 更新权限: manage_task
2025-05-13 09:32:37,551 - app.utils.permissions - INFO - 更新权限: view_project
2025-05-13 09:32:37,551 - app.utils.permissions - INFO - 更新权限: view_task
2025-05-13 09:32:37,552 - app.utils.permissions - INFO - 更新权限: manage_resources
2025-05-13 09:32:37,552 - app.utils.permissions - INFO - 更新权限: manage_risks
2025-05-13 09:32:37,553 - app.utils.permissions - INFO - 更新权限: view_reports
2025-05-13 09:32:37,554 - app.utils.permissions - INFO - 更新权限: create_task
2025-05-13 09:32:37,554 - app.utils.permissions - INFO - 更新权限: create_project
2025-05-13 09:32:37,556 - app.utils.permissions - INFO - 更新权限: assign_task
2025-05-13 09:32:37,556 - app.utils.permissions - INFO - 更新权限: change_project_status
2025-05-13 09:32:37,557 - app.utils.permissions - INFO - 更新权限: change_task_status
2025-05-13 09:32:37,559 - app.utils.permissions - INFO - 更新角色: admin
2025-05-13 09:32:37,560 - app.utils.permissions - INFO - 为管理员角色添加所有权限: 16个
2025-05-13 09:32:37,561 - app.utils.permissions - INFO - 更新角色: manager
2025-05-13 09:32:37,562 - app.utils.permissions - INFO - 为角色 manager 添加权限: manage_project
2025-05-13 09:32:37,562 - app.utils.permissions - INFO - 为角色 manager 添加权限: manage_task
2025-05-13 09:32:37,562 - app.utils.permissions - INFO - 为角色 manager 添加权限: view_project
2025-05-13 09:32:37,562 - app.utils.permissions - INFO - 为角色 manager 添加权限: view_task
2025-05-13 09:32:37,563 - app.utils.permissions - INFO - 为角色 manager 添加权限: manage_resources
2025-05-13 09:32:37,563 - app.utils.permissions - INFO - 为角色 manager 添加权限: manage_risks
2025-05-13 09:32:37,563 - app.utils.permissions - INFO - 为角色 manager 添加权限: view_reports
2025-05-13 09:32:37,563 - app.utils.permissions - INFO - 为角色 manager 添加权限: create_project
2025-05-13 09:32:37,563 - app.utils.permissions - INFO - 为角色 manager 添加权限: create_task
2025-05-13 09:32:37,564 - app.utils.permissions - INFO - 为角色 manager 添加权限: assign_task
2025-05-13 09:32:37,564 - app.utils.permissions - INFO - 为角色 manager 添加权限: change_project_status
2025-05-13 09:32:37,564 - app.utils.permissions - INFO - 为角色 manager 添加权限: change_task_status
2025-05-13 09:32:37,565 - app.utils.permissions - INFO - 更新角色: user
2025-05-13 09:32:37,565 - app.utils.permissions - INFO - 为角色 user 添加权限: view_project
2025-05-13 09:32:37,567 - app.utils.permissions - INFO - 为角色 user 添加权限: view_task
2025-05-13 09:32:37,567 - app.utils.permissions - INFO - 为角色 user 添加权限: view_reports
2025-05-13 09:32:37,568 - app.utils.permissions - INFO - 角色和权限初始化完成
2025-05-13 09:32:37,568 - __main__ - INFO - 角色和权限初始化成功
2025-05-13 09:32:37,570 - __main__ - INFO - 数据库初始化完成
2025-05-13 09:32:37,581 - __main__ - INFO - 系统资源检查完成
2025-05-13 09:32:37,581 - __main__ - INFO - 开始清理旧数据
2025-05-13 09:32:37,583 - __main__ - INFO - 删除了 0 条过期的资源使用记录
2025-05-13 09:32:37,584 - __main__ - INFO - 删除了 0 条已解决的过期警报
2025-05-13 09:32:37,584 - __main__ - INFO - 旧数据清理完成
2025-05-13 09:32:37,590 - werkzeug - WARNING -  * Debugger is active!
2025-05-13 09:32:37,591 - werkzeug - INFO -  * Debugger PIN: 670-037-726
2025-05-13 09:33:43,989 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:33:43] "[36mGET /static/favicon.ico HTTP/1.1[0m" 304 -
2025-05-13 09:33:43,990 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:33:43] "[33mGET /.well-known/appspecific/com.chrome.devtools.json HTTP/1.1[0m" 404 -
2025-05-13 09:33:43,999 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:33:43] "[36mGET /static/css/bootstrap.min.css HTTP/1.1[0m" 304 -
2025-05-13 09:33:44,000 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:33:44] "[36mGET /static/css/bootstrap-icons.css HTTP/1.1[0m" 304 -
2025-05-13 09:33:44,001 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:33:44] "[36mGET /static/css/style.css HTTP/1.1[0m" 304 -
2025-05-13 09:33:44,008 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:33:44] "[33mGET /.well-known/appspecific/com.chrome.devtools.json HTTP/1.1[0m" 404 -
2025-05-13 09:33:44,010 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:33:44] "[36mGET /static/js/bootstrap.bundle.min.js.map HTTP/1.1[0m" 304 -
2025-05-13 09:33:44,013 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:33:44] "[36mGET /static/css/bootstrap.min.css.map HTTP/1.1[0m" 304 -
2025-05-13 09:33:44,013 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:33:44] "[36mGET /static/js/bootstrap.bundle.min.js.map HTTP/1.1[0m" 304 -
2025-05-13 09:33:44,018 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:33:44] "[36mGET /static/css/bootstrap.min.css.map HTTP/1.1[0m" 304 -
2025-05-13 09:33:44,038 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:33:44] "[36mGET /static/css/bootstrap.min.css.map HTTP/1.1[0m" 304 -
2025-05-13 09:33:44,041 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:33:44] "[36mGET /static/css/bootstrap.min.css.map HTTP/1.1[0m" 304 -
2025-05-13 09:34:50,414 - app.utils.permissions - INFO - 更新权限: manage_users
2025-05-13 09:34:50,415 - app.utils.permissions - INFO - 更新权限: manage_roles
2025-05-13 09:34:50,416 - app.utils.permissions - INFO - 更新权限: manage_all_projects
2025-05-13 09:34:50,417 - app.utils.permissions - INFO - 更新权限: manage_project
2025-05-13 09:34:50,417 - app.utils.permissions - INFO - 更新权限: manage_all_tasks
2025-05-13 09:34:50,418 - app.utils.permissions - INFO - 更新权限: manage_task
2025-05-13 09:34:50,418 - app.utils.permissions - INFO - 更新权限: view_project
2025-05-13 09:34:50,419 - app.utils.permissions - INFO - 更新权限: view_task
2025-05-13 09:34:50,420 - app.utils.permissions - INFO - 更新权限: manage_resources
2025-05-13 09:34:50,421 - app.utils.permissions - INFO - 更新权限: manage_risks
2025-05-13 09:34:50,421 - app.utils.permissions - INFO - 更新权限: view_reports
2025-05-13 09:34:50,422 - app.utils.permissions - INFO - 更新权限: create_task
2025-05-13 09:34:50,422 - app.utils.permissions - INFO - 更新权限: create_project
2025-05-13 09:34:50,423 - app.utils.permissions - INFO - 更新权限: assign_task
2025-05-13 09:34:50,423 - app.utils.permissions - INFO - 更新权限: change_project_status
2025-05-13 09:34:50,424 - app.utils.permissions - INFO - 更新权限: change_task_status
2025-05-13 09:34:50,426 - app.utils.permissions - INFO - 更新角色: admin
2025-05-13 09:34:50,427 - app.utils.permissions - INFO - 为管理员角色添加所有权限: 16个
2025-05-13 09:34:50,428 - app.utils.permissions - INFO - 更新角色: manager
2025-05-13 09:34:50,429 - app.utils.permissions - INFO - 为角色 manager 添加权限: manage_project
2025-05-13 09:34:50,429 - app.utils.permissions - INFO - 为角色 manager 添加权限: manage_task
2025-05-13 09:34:50,429 - app.utils.permissions - INFO - 为角色 manager 添加权限: view_project
2025-05-13 09:34:50,429 - app.utils.permissions - INFO - 为角色 manager 添加权限: view_task
2025-05-13 09:34:50,429 - app.utils.permissions - INFO - 为角色 manager 添加权限: manage_resources
2025-05-13 09:34:50,429 - app.utils.permissions - INFO - 为角色 manager 添加权限: manage_risks
2025-05-13 09:34:50,429 - app.utils.permissions - INFO - 为角色 manager 添加权限: view_reports
2025-05-13 09:34:50,430 - app.utils.permissions - INFO - 为角色 manager 添加权限: create_project
2025-05-13 09:34:50,430 - app.utils.permissions - INFO - 为角色 manager 添加权限: create_task
2025-05-13 09:34:50,430 - app.utils.permissions - INFO - 为角色 manager 添加权限: assign_task
2025-05-13 09:34:50,430 - app.utils.permissions - INFO - 为角色 manager 添加权限: change_project_status
2025-05-13 09:34:50,430 - app.utils.permissions - INFO - 为角色 manager 添加权限: change_task_status
2025-05-13 09:34:50,430 - app.utils.permissions - INFO - 更新角色: user
2025-05-13 09:34:50,431 - app.utils.permissions - INFO - 为角色 user 添加权限: view_project
2025-05-13 09:34:50,431 - app.utils.permissions - INFO - 为角色 user 添加权限: view_task
2025-05-13 09:34:50,431 - app.utils.permissions - INFO - 为角色 user 添加权限: view_reports
2025-05-13 09:34:50,433 - app.utils.permissions - INFO - 角色和权限初始化完成
2025-05-13 09:34:50,433 - __main__ - INFO - 角色和权限初始化成功
2025-05-13 09:34:50,440 - __main__ - INFO - 数据库初始化完成
2025-05-13 09:34:50,473 - __main__ - INFO - 系统资源检查完成
2025-05-13 09:34:50,475 - __main__ - INFO - 开始清理旧数据
2025-05-13 09:34:50,476 - __main__ - INFO - 删除了 0 条过期的资源使用记录
2025-05-13 09:34:50,477 - __main__ - INFO - 删除了 0 条已解决的过期警报
2025-05-13 09:34:50,477 - __main__ - INFO - 旧数据清理完成
2025-05-13 09:34:50,489 - werkzeug - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:5000
 * Running on http://192.168.0.66:5000
2025-05-13 09:34:50,489 - werkzeug - INFO - [33mPress CTRL+C to quit[0m
2025-05-13 09:34:50,489 - werkzeug - INFO -  * Restarting with stat
2025-05-13 09:34:51,320 - app.utils.permissions - INFO - 更新权限: manage_users
2025-05-13 09:34:51,321 - app.utils.permissions - INFO - 更新权限: manage_roles
2025-05-13 09:34:51,321 - app.utils.permissions - INFO - 更新权限: manage_all_projects
2025-05-13 09:34:51,322 - app.utils.permissions - INFO - 更新权限: manage_project
2025-05-13 09:34:51,322 - app.utils.permissions - INFO - 更新权限: manage_all_tasks
2025-05-13 09:34:51,322 - app.utils.permissions - INFO - 更新权限: manage_task
2025-05-13 09:34:51,323 - app.utils.permissions - INFO - 更新权限: view_project
2025-05-13 09:34:51,323 - app.utils.permissions - INFO - 更新权限: view_task
2025-05-13 09:34:51,324 - app.utils.permissions - INFO - 更新权限: manage_resources
2025-05-13 09:34:51,324 - app.utils.permissions - INFO - 更新权限: manage_risks
2025-05-13 09:34:51,325 - app.utils.permissions - INFO - 更新权限: view_reports
2025-05-13 09:34:51,325 - app.utils.permissions - INFO - 更新权限: create_task
2025-05-13 09:34:51,325 - app.utils.permissions - INFO - 更新权限: create_project
2025-05-13 09:34:51,326 - app.utils.permissions - INFO - 更新权限: assign_task
2025-05-13 09:34:51,326 - app.utils.permissions - INFO - 更新权限: change_project_status
2025-05-13 09:34:51,327 - app.utils.permissions - INFO - 更新权限: change_task_status
2025-05-13 09:34:51,330 - app.utils.permissions - INFO - 更新角色: admin
2025-05-13 09:34:51,332 - app.utils.permissions - INFO - 为管理员角色添加所有权限: 16个
2025-05-13 09:34:51,332 - app.utils.permissions - INFO - 更新角色: manager
2025-05-13 09:34:51,333 - app.utils.permissions - INFO - 为角色 manager 添加权限: manage_project
2025-05-13 09:34:51,333 - app.utils.permissions - INFO - 为角色 manager 添加权限: manage_task
2025-05-13 09:34:51,333 - app.utils.permissions - INFO - 为角色 manager 添加权限: view_project
2025-05-13 09:34:51,334 - app.utils.permissions - INFO - 为角色 manager 添加权限: view_task
2025-05-13 09:34:51,334 - app.utils.permissions - INFO - 为角色 manager 添加权限: manage_resources
2025-05-13 09:34:51,334 - app.utils.permissions - INFO - 为角色 manager 添加权限: manage_risks
2025-05-13 09:34:51,334 - app.utils.permissions - INFO - 为角色 manager 添加权限: view_reports
2025-05-13 09:34:51,334 - app.utils.permissions - INFO - 为角色 manager 添加权限: create_project
2025-05-13 09:34:51,334 - app.utils.permissions - INFO - 为角色 manager 添加权限: create_task
2025-05-13 09:34:51,334 - app.utils.permissions - INFO - 为角色 manager 添加权限: assign_task
2025-05-13 09:34:51,334 - app.utils.permissions - INFO - 为角色 manager 添加权限: change_project_status
2025-05-13 09:34:51,334 - app.utils.permissions - INFO - 为角色 manager 添加权限: change_task_status
2025-05-13 09:34:51,335 - app.utils.permissions - INFO - 更新角色: user
2025-05-13 09:34:51,335 - app.utils.permissions - INFO - 为角色 user 添加权限: view_project
2025-05-13 09:34:51,335 - app.utils.permissions - INFO - 为角色 user 添加权限: view_task
2025-05-13 09:34:51,335 - app.utils.permissions - INFO - 为角色 user 添加权限: view_reports
2025-05-13 09:34:51,336 - app.utils.permissions - INFO - 角色和权限初始化完成
2025-05-13 09:34:51,336 - __main__ - INFO - 角色和权限初始化成功
2025-05-13 09:34:51,338 - __main__ - INFO - 数据库初始化完成
2025-05-13 09:34:51,352 - __main__ - INFO - 系统资源检查完成
2025-05-13 09:34:51,352 - __main__ - INFO - 开始清理旧数据
2025-05-13 09:34:51,354 - __main__ - INFO - 删除了 0 条过期的资源使用记录
2025-05-13 09:34:51,355 - __main__ - INFO - 删除了 0 条已解决的过期警报
2025-05-13 09:34:51,355 - __main__ - INFO - 旧数据清理完成
2025-05-13 09:34:51,361 - werkzeug - WARNING -  * Debugger is active!
2025-05-13 09:34:51,363 - werkzeug - INFO -  * Debugger PIN: 670-037-726
2025-05-13 09:35:08,307 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:35:08] "GET /login HTTP/1.1" 200 -
2025-05-13 09:35:08,566 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:35:08] "GET /static/css/bootstrap.min.css HTTP/1.1" 200 -
2025-05-13 09:35:08,573 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:35:08] "GET /static/css/style.css HTTP/1.1" 200 -
2025-05-13 09:35:08,575 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:35:08] "GET /static/js/auth.js HTTP/1.1" 200 -
2025-05-13 09:35:08,577 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:35:08] "GET /static/js/utils.js HTTP/1.1" 200 -
2025-05-13 09:35:08,578 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:35:08] "GET /static/js/jquery.min.js HTTP/1.1" 200 -
2025-05-13 09:35:08,578 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:35:08] "GET /static/css/bootstrap-icons.css HTTP/1.1" 200 -
2025-05-13 09:35:08,580 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:35:08] "GET /static/js/bootstrap.bundle.min.js HTTP/1.1" 200 -
2025-05-13 09:35:08,583 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:35:08] "GET /static/images/background.png HTTP/1.1" 200 -
2025-05-13 09:35:08,589 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:35:08] "GET /static/js/fix-modals.js HTTP/1.1" 200 -
2025-05-13 09:35:08,603 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:35:08] "GET /static/js/csrf.js HTTP/1.1" 200 -
2025-05-13 09:35:08,604 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:35:08] "GET /static/js/user-profile.js HTTP/1.1" 200 -
2025-05-13 09:35:08,605 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:35:08] "GET /static/js/background-helper.js HTTP/1.1" 200 -
2025-05-13 09:35:08,606 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:35:08] "GET /static/uploads/background.png HTTP/1.1" 200 -
2025-05-13 09:35:08,634 - app - WARNING - 绕过JWT验证: /auth/user_info
2025-05-13 09:35:08,634 - app.utils.jwt_callbacks - WARNING - JWT验证已被绕过: /auth/user_info
2025-05-13 09:35:08,635 - app - INFO - 获取用户信息 - bypass_jwt: True
2025-05-13 09:35:08,635 - app - INFO - 使用默认管理员用户(ID=1)
2025-05-13 09:35:08,653 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:35:08] "GET /static/favicon.ico HTTP/1.1" 200 -
2025-05-13 09:35:08,654 - app - INFO - 成功获取用户 admin 的信息
2025-05-13 09:35:08,656 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:35:08] "GET /auth/user_info?_=1747100108629&bypass_jwt=true HTTP/1.1" 200 -
2025-05-13 09:35:09,886 - app - INFO - 登录请求 - 方法: POST, 内容类型: application/x-www-form-urlencoded
2025-05-13 09:35:09,886 - app - INFO - 请求头: {'Host': '127.0.0.1:5000', 'Connection': 'keep-alive', 'Content-Length': '135', 'Cache-Control': 'max-age=0', 'Sec-Ch-Ua': '"Chromium";v="136", "Microsoft Edge";v="136", "Not.A/Brand";v="99"', 'Sec-Ch-Ua-Mobile': '?0', 'Sec-Ch-Ua-Platform': '"Windows"', 'Origin': 'http://127.0.0.1:5000', 'Content-Type': 'application/x-www-form-urlencoded', 'Upgrade-Insecure-Requests': '1', 'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36 Edg/136.0.0.0', 'Accept': 'text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.7', 'Sec-Fetch-Site': 'same-origin', 'Sec-Fetch-Mode': 'navigate', 'Sec-Fetch-User': '?1', 'Sec-Fetch-Dest': 'document', 'Referer': 'http://127.0.0.1:5000/login', 'Accept-Encoding': 'gzip, deflate, br, zstd', 'Accept-Language': 'zh-CN,zh;q=0.9,en;q=0.8,en-GB;q=0.7,en-US;q=0.6', 'Cookie': 'session=eyJjc3JmX3Rva2VuIjoiY2Q3OGVmN2NhMDFjMzJkNmU0ODUxNjE1MDA4ZWI1OTk5ODU5Y2RlNyJ9.aCKhzA.xTNGw2XgnJnsDMBaPY6bsUObmqQ; user_roles=admin; is_admin=true; admin=true'}
2025-05-13 09:35:09,886 - app - INFO - 处理表单格式的登录请求
2025-05-13 09:35:09,887 - app - INFO - 表单数据: username=admin, password=********
2025-05-13 09:35:10,307 - app - INFO - 已生成CSRF令牌: ImNkNzhlZj...
2025-05-13 09:35:10,309 - app - INFO - 用户 admin 的角色: ['admin']
2025-05-13 09:35:10,310 - app - INFO - 用户 admin 是否是管理员: True
2025-05-13 09:35:10,339 - app - INFO - 用户登录成功: admin
2025-05-13 09:35:10,344 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:35:10] "[32mPOST /auth/login HTTP/1.1[0m" 302 -
2025-05-13 09:35:10,356 - app - DEBUG - Dashboard route accessed
2025-05-13 09:35:10,357 - app - DEBUG - Current user ID: 1
2025-05-13 09:35:10,410 - app - DEBUG - Dashboard data prepared for user: admin
2025-05-13 09:35:10,451 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:35:10] "GET /dashboard HTTP/1.1" 200 -
2025-05-13 09:35:10,481 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:35:10] "[36mGET /static/css/bootstrap.min.css HTTP/1.1[0m" 304 -
2025-05-13 09:35:10,482 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:35:10] "[36mGET /static/css/bootstrap-icons.css HTTP/1.1[0m" 304 -
2025-05-13 09:35:10,483 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:35:10] "[36mGET /static/css/style.css HTTP/1.1[0m" 304 -
2025-05-13 09:35:10,488 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:35:10] "[36mGET /static/js/bootstrap.bundle.min.js HTTP/1.1[0m" 304 -
2025-05-13 09:35:10,490 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:35:10] "[36mGET /static/js/jquery.min.js HTTP/1.1[0m" 304 -
2025-05-13 09:35:10,495 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:35:10] "[36mGET /static/js/utils.js HTTP/1.1[0m" 304 -
2025-05-13 09:35:10,496 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:35:10] "[36mGET /static/js/auth.js HTTP/1.1[0m" 304 -
2025-05-13 09:35:10,498 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:35:10] "[36mGET /static/js/csrf.js HTTP/1.1[0m" 304 -
2025-05-13 09:35:10,499 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:35:10] "[36mGET /static/js/fix-modals.js HTTP/1.1[0m" 304 -
2025-05-13 09:35:10,503 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:35:10] "[36mGET /static/js/user-profile.js HTTP/1.1[0m" 304 -
2025-05-13 09:35:10,521 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:35:10] "GET /static/css/fonts/bootstrap-icons.woff2 HTTP/1.1" 200 -
2025-05-13 09:35:10,538 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:35:10] "[36mGET /static/favicon.ico HTTP/1.1[0m" 304 -
2025-05-13 09:35:11,605 - app - WARNING - 绕过JWT验证: /projects
2025-05-13 09:35:11,606 - app.utils.jwt_callbacks - WARNING - JWT验证已被绕过: /projects
2025-05-13 09:35:11,606 - app.routes.main - INFO - JWT bypass enabled for projects - Using test user
2025-05-13 09:35:11,637 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:35:11] "GET /projects?bypass_jwt=true HTTP/1.1" 200 -
2025-05-13 09:35:11,665 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:35:11] "[36mGET /static/css/bootstrap.min.css HTTP/1.1[0m" 304 -
2025-05-13 09:35:11,669 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:35:11] "[36mGET /static/css/bootstrap-icons.css HTTP/1.1[0m" 304 -
2025-05-13 09:35:11,670 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:35:11] "[36mGET /static/css/style.css HTTP/1.1[0m" 304 -
2025-05-13 09:35:11,672 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:35:11] "GET /static/css/frappe-gantt.css HTTP/1.1" 200 -
2025-05-13 09:35:11,675 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:35:11] "[36mGET /static/js/jquery.min.js HTTP/1.1[0m" 304 -
2025-05-13 09:35:11,676 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:35:11] "[36mGET /static/js/bootstrap.bundle.min.js HTTP/1.1[0m" 304 -
2025-05-13 09:35:11,678 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:35:11] "[36mGET /static/js/utils.js HTTP/1.1[0m" 304 -
2025-05-13 09:35:11,679 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:35:11] "[36mGET /static/js/auth.js HTTP/1.1[0m" 304 -
2025-05-13 09:35:11,684 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:35:11] "[36mGET /static/js/fix-modals.js HTTP/1.1[0m" 304 -
2025-05-13 09:35:11,687 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:35:11] "GET /static/js/frappe-gantt.min.js HTTP/1.1" 200 -
2025-05-13 09:35:11,688 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:35:11] "[36mGET /static/js/csrf.js HTTP/1.1[0m" 304 -
2025-05-13 09:35:11,691 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:35:11] "[36mGET /static/js/user-profile.js HTTP/1.1[0m" 304 -
2025-05-13 09:35:11,714 - app - WARNING - 绕过JWT验证: /api/global/users
2025-05-13 09:35:11,715 - app - ERROR - 获取用户列表失败: type object 'User' has no attribute 'status'
2025-05-13 09:35:11,715 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:35:11] "[35m[1mGET /api/global/users?bypass_jwt=true&_=1747100111710 HTTP/1.1[0m" 500 -
2025-05-13 09:35:11,726 - app - WARNING - 绕过JWT验证: /api/project-managers
2025-05-13 09:35:11,727 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:35:11] "[36mGET /static/favicon.ico HTTP/1.1[0m" 304 -
2025-05-13 09:35:11,728 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:35:11] "[33mGET /api/project-managers?bypass_jwt=true&_=1747100111721 HTTP/1.1[0m" 404 -
2025-05-13 09:35:11,736 - app - WARNING - 绕过JWT验证: /api/global/project-managers
2025-05-13 09:35:11,745 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:35:11] "GET /api/global/project-managers?bypass_jwt=true&_=1747100111721 HTTP/1.1" 200 -
2025-05-13 09:35:15,447 - app - WARNING - 绕过JWT验证: /api/global/users
2025-05-13 09:35:15,448 - app - WARNING - 绕过JWT验证: /api/global/users
2025-05-13 09:35:15,449 - app - ERROR - 获取用户列表失败: type object 'User' has no attribute 'status'
2025-05-13 09:35:15,452 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:35:15] "[35m[1mGET /api/global/users?bypass_jwt=true&_=1747100115441 HTTP/1.1[0m" 500 -
2025-05-13 09:35:15,452 - app - ERROR - 获取用户列表失败: type object 'User' has no attribute 'status'
2025-05-13 09:35:15,461 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:35:15] "[35m[1mGET /api/global/users?bypass_jwt=true&_=1747100115442 HTTP/1.1[0m" 500 -
2025-05-13 09:35:15,470 - app - WARNING - 绕过JWT验证: /api/project-managers
2025-05-13 09:35:15,472 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:35:15] "[33mGET /api/project-managers?bypass_jwt=true&_=1747100115464 HTTP/1.1[0m" 404 -
2025-05-13 09:35:15,473 - app - WARNING - 绕过JWT验证: /api/project-managers
2025-05-13 09:35:15,475 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:35:15] "[33mGET /api/project-managers?bypass_jwt=true&_=1747100115466 HTTP/1.1[0m" 404 -
2025-05-13 09:35:15,480 - app - WARNING - 绕过JWT验证: /api/global/project-managers
2025-05-13 09:35:15,480 - app - WARNING - 绕过JWT验证: /api/global/project-managers
2025-05-13 09:35:15,486 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:35:15] "GET /api/global/project-managers?bypass_jwt=true&_=1747100115464 HTTP/1.1" 200 -
2025-05-13 09:35:15,489 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:35:15] "GET /api/global/project-managers?bypass_jwt=true&_=1747100115466 HTTP/1.1" 200 -
2025-05-13 09:35:27,485 - app - WARNING - 绕过JWT验证: /api/auth/projects
2025-05-13 09:35:27,485 - app.utils.jwt_callbacks - WARNING - JWT验证已被绕过: /api/auth/projects
2025-05-13 09:35:27,486 - app.routes.projects - INFO - API创建项目 - 使用测试用户
2025-05-13 09:35:27,486 - app.routes.projects - INFO - API创建项目: 收到数据 {'name': 'dhduiehi14', 'manager_id': '2', 'start_date': '2025-05-13', 'end_date': '2025-07-26', 'description': 'dddd', 'status': 'planning'}
2025-05-13 09:35:27,487 - app.routes.projects - INFO - 创建项目: 用户ID=1, 数据={'name': 'dhduiehi14', 'manager_id': '2', 'start_date': '2025-05-13', 'end_date': '2025-07-26', 'description': 'dddd', 'status': 'planning'}
2025-05-13 09:35:27,500 - app.routes.projects - INFO - 创建项目成功: 14 - dhduiehi14
2025-05-13 09:35:27,502 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:35:27] "[35m[1mPOST /api/auth/projects?bypass_jwt=true&_=1747100127478&req=505n8rzmlvi HTTP/1.1[0m" 201 -
2025-05-13 09:35:28,541 - app - WARNING - 绕过JWT验证: /projects
2025-05-13 09:35:28,542 - app.utils.jwt_callbacks - WARNING - JWT验证已被绕过: /projects
2025-05-13 09:35:28,542 - app.routes.main - INFO - JWT bypass enabled for projects - Using test user
2025-05-13 09:35:28,556 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:35:28] "GET /projects?bypass_jwt=true HTTP/1.1" 200 -
2025-05-13 09:35:28,584 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:35:28] "[36mGET /static/css/bootstrap-icons.css HTTP/1.1[0m" 304 -
2025-05-13 09:35:28,584 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:35:28] "[36mGET /static/css/bootstrap.min.css HTTP/1.1[0m" 304 -
2025-05-13 09:35:28,587 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:35:28] "[36mGET /static/css/style.css HTTP/1.1[0m" 304 -
2025-05-13 09:35:28,589 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:35:28] "[36mGET /static/js/jquery.min.js HTTP/1.1[0m" 304 -
2025-05-13 09:35:28,592 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:35:28] "[36mGET /static/js/bootstrap.bundle.min.js HTTP/1.1[0m" 304 -
2025-05-13 09:35:28,597 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:35:28] "[36mGET /static/css/frappe-gantt.css HTTP/1.1[0m" 304 -
2025-05-13 09:35:28,599 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:35:28] "[36mGET /static/js/utils.js HTTP/1.1[0m" 304 -
2025-05-13 09:35:28,603 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:35:28] "[36mGET /static/js/auth.js HTTP/1.1[0m" 304 -
2025-05-13 09:35:28,605 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:35:28] "[36mGET /static/js/fix-modals.js HTTP/1.1[0m" 304 -
2025-05-13 09:35:28,607 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:35:28] "[36mGET /static/js/csrf.js HTTP/1.1[0m" 304 -
2025-05-13 09:35:28,610 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:35:28] "[36mGET /static/js/frappe-gantt.min.js HTTP/1.1[0m" 304 -
2025-05-13 09:35:28,610 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:35:28] "[36mGET /static/js/user-profile.js HTTP/1.1[0m" 304 -
2025-05-13 09:35:28,623 - app - WARNING - 绕过JWT验证: /api/global/users
2025-05-13 09:35:28,623 - app - ERROR - 获取用户列表失败: type object 'User' has no attribute 'status'
2025-05-13 09:35:28,624 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:35:28] "[35m[1mGET /api/global/users?bypass_jwt=true&_=1747100128617 HTTP/1.1[0m" 500 -
2025-05-13 09:35:28,635 - app - WARNING - 绕过JWT验证: /api/project-managers
2025-05-13 09:35:28,637 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:35:28] "[33mGET /api/project-managers?bypass_jwt=true&_=1747100128626 HTTP/1.1[0m" 404 -
2025-05-13 09:35:28,637 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:35:28] "[36mGET /static/favicon.ico HTTP/1.1[0m" 304 -
2025-05-13 09:35:28,643 - app - WARNING - 绕过JWT验证: /api/global/project-managers
2025-05-13 09:35:28,646 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:35:28] "GET /api/global/project-managers?bypass_jwt=true&_=1747100128626 HTTP/1.1" 200 -
2025-05-13 09:35:33,798 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:35:33] "[31m[1mDELETE /api/noauth/projects/13 HTTP/1.1[0m" 405 -
2025-05-13 09:36:31,448 - werkzeug - INFO -  * Detected change in 'D:\\tmp\\work\\app\\routes\\projects.py', reloading
2025-05-13 09:36:31,970 - werkzeug - INFO -  * Restarting with stat
2025-05-13 09:36:32,930 - app.utils.permissions - INFO - 更新权限: manage_users
2025-05-13 09:36:32,930 - app.utils.permissions - INFO - 更新权限: manage_roles
2025-05-13 09:36:32,931 - app.utils.permissions - INFO - 更新权限: manage_all_projects
2025-05-13 09:36:32,931 - app.utils.permissions - INFO - 更新权限: manage_project
2025-05-13 09:36:32,931 - app.utils.permissions - INFO - 更新权限: manage_all_tasks
2025-05-13 09:36:32,932 - app.utils.permissions - INFO - 更新权限: manage_task
2025-05-13 09:36:32,933 - app.utils.permissions - INFO - 更新权限: view_project
2025-05-13 09:36:32,933 - app.utils.permissions - INFO - 更新权限: view_task
2025-05-13 09:36:32,934 - app.utils.permissions - INFO - 更新权限: manage_resources
2025-05-13 09:36:32,934 - app.utils.permissions - INFO - 更新权限: manage_risks
2025-05-13 09:36:32,934 - app.utils.permissions - INFO - 更新权限: view_reports
2025-05-13 09:36:32,935 - app.utils.permissions - INFO - 更新权限: create_task
2025-05-13 09:36:32,935 - app.utils.permissions - INFO - 更新权限: create_project
2025-05-13 09:36:32,936 - app.utils.permissions - INFO - 更新权限: assign_task
2025-05-13 09:36:32,939 - app.utils.permissions - INFO - 更新权限: change_project_status
2025-05-13 09:36:32,939 - app.utils.permissions - INFO - 更新权限: change_task_status
2025-05-13 09:36:32,942 - app.utils.permissions - INFO - 更新角色: admin
2025-05-13 09:36:32,943 - app.utils.permissions - INFO - 为管理员角色添加所有权限: 16个
2025-05-13 09:36:32,944 - app.utils.permissions - INFO - 更新角色: manager
2025-05-13 09:36:32,944 - app.utils.permissions - INFO - 为角色 manager 添加权限: manage_project
2025-05-13 09:36:32,946 - app.utils.permissions - INFO - 为角色 manager 添加权限: manage_task
2025-05-13 09:36:32,946 - app.utils.permissions - INFO - 为角色 manager 添加权限: view_project
2025-05-13 09:36:32,946 - app.utils.permissions - INFO - 为角色 manager 添加权限: view_task
2025-05-13 09:36:32,946 - app.utils.permissions - INFO - 为角色 manager 添加权限: manage_resources
2025-05-13 09:36:32,946 - app.utils.permissions - INFO - 为角色 manager 添加权限: manage_risks
2025-05-13 09:36:32,946 - app.utils.permissions - INFO - 为角色 manager 添加权限: view_reports
2025-05-13 09:36:32,946 - app.utils.permissions - INFO - 为角色 manager 添加权限: create_project
2025-05-13 09:36:32,946 - app.utils.permissions - INFO - 为角色 manager 添加权限: create_task
2025-05-13 09:36:32,946 - app.utils.permissions - INFO - 为角色 manager 添加权限: assign_task
2025-05-13 09:36:32,946 - app.utils.permissions - INFO - 为角色 manager 添加权限: change_project_status
2025-05-13 09:36:32,946 - app.utils.permissions - INFO - 为角色 manager 添加权限: change_task_status
2025-05-13 09:36:32,947 - app.utils.permissions - INFO - 更新角色: user
2025-05-13 09:36:32,947 - app.utils.permissions - INFO - 为角色 user 添加权限: view_project
2025-05-13 09:36:32,947 - app.utils.permissions - INFO - 为角色 user 添加权限: view_task
2025-05-13 09:36:32,947 - app.utils.permissions - INFO - 为角色 user 添加权限: view_reports
2025-05-13 09:36:32,948 - app.utils.permissions - INFO - 角色和权限初始化完成
2025-05-13 09:36:32,948 - __main__ - INFO - 角色和权限初始化成功
2025-05-13 09:36:32,950 - __main__ - INFO - 数据库初始化完成
2025-05-13 09:36:32,959 - __main__ - INFO - 系统资源检查完成
2025-05-13 09:36:32,960 - __main__ - INFO - 开始清理旧数据
2025-05-13 09:36:32,961 - __main__ - INFO - 删除了 0 条过期的资源使用记录
2025-05-13 09:36:32,962 - __main__ - INFO - 删除了 0 条已解决的过期警报
2025-05-13 09:36:32,964 - __main__ - INFO - 旧数据清理完成
2025-05-13 09:36:32,968 - werkzeug - WARNING -  * Debugger is active!
2025-05-13 09:36:32,971 - werkzeug - INFO -  * Debugger PIN: 670-037-726
2025-05-13 09:37:21,878 - werkzeug - INFO -  * Detected change in 'D:\\tmp\\work\\app\\routes\\projects.py', reloading
2025-05-13 09:37:22,465 - werkzeug - INFO -  * Restarting with stat
2025-05-13 09:37:23,332 - app.utils.permissions - INFO - 更新权限: manage_users
2025-05-13 09:37:23,332 - app.utils.permissions - INFO - 更新权限: manage_roles
2025-05-13 09:37:23,334 - app.utils.permissions - INFO - 更新权限: manage_all_projects
2025-05-13 09:37:23,334 - app.utils.permissions - INFO - 更新权限: manage_project
2025-05-13 09:37:23,336 - app.utils.permissions - INFO - 更新权限: manage_all_tasks
2025-05-13 09:37:23,336 - app.utils.permissions - INFO - 更新权限: manage_task
2025-05-13 09:37:23,336 - app.utils.permissions - INFO - 更新权限: view_project
2025-05-13 09:37:23,337 - app.utils.permissions - INFO - 更新权限: view_task
2025-05-13 09:37:23,337 - app.utils.permissions - INFO - 更新权限: manage_resources
2025-05-13 09:37:23,338 - app.utils.permissions - INFO - 更新权限: manage_risks
2025-05-13 09:37:23,338 - app.utils.permissions - INFO - 更新权限: view_reports
2025-05-13 09:37:23,339 - app.utils.permissions - INFO - 更新权限: create_task
2025-05-13 09:37:23,339 - app.utils.permissions - INFO - 更新权限: create_project
2025-05-13 09:37:23,340 - app.utils.permissions - INFO - 更新权限: assign_task
2025-05-13 09:37:23,340 - app.utils.permissions - INFO - 更新权限: change_project_status
2025-05-13 09:37:23,341 - app.utils.permissions - INFO - 更新权限: change_task_status
2025-05-13 09:37:23,342 - app.utils.permissions - INFO - 更新角色: admin
2025-05-13 09:37:23,344 - app.utils.permissions - INFO - 为管理员角色添加所有权限: 16个
2025-05-13 09:37:23,345 - app.utils.permissions - INFO - 更新角色: manager
2025-05-13 09:37:23,345 - app.utils.permissions - INFO - 为角色 manager 添加权限: manage_project
2025-05-13 09:37:23,346 - app.utils.permissions - INFO - 为角色 manager 添加权限: manage_task
2025-05-13 09:37:23,346 - app.utils.permissions - INFO - 为角色 manager 添加权限: view_project
2025-05-13 09:37:23,346 - app.utils.permissions - INFO - 为角色 manager 添加权限: view_task
2025-05-13 09:37:23,347 - app.utils.permissions - INFO - 为角色 manager 添加权限: manage_resources
2025-05-13 09:37:23,347 - app.utils.permissions - INFO - 为角色 manager 添加权限: manage_risks
2025-05-13 09:37:23,347 - app.utils.permissions - INFO - 为角色 manager 添加权限: view_reports
2025-05-13 09:37:23,347 - app.utils.permissions - INFO - 为角色 manager 添加权限: create_project
2025-05-13 09:37:23,347 - app.utils.permissions - INFO - 为角色 manager 添加权限: create_task
2025-05-13 09:37:23,348 - app.utils.permissions - INFO - 为角色 manager 添加权限: assign_task
2025-05-13 09:37:23,348 - app.utils.permissions - INFO - 为角色 manager 添加权限: change_project_status
2025-05-13 09:37:23,348 - app.utils.permissions - INFO - 为角色 manager 添加权限: change_task_status
2025-05-13 09:37:23,348 - app.utils.permissions - INFO - 更新角色: user
2025-05-13 09:37:23,349 - app.utils.permissions - INFO - 为角色 user 添加权限: view_project
2025-05-13 09:37:23,349 - app.utils.permissions - INFO - 为角色 user 添加权限: view_task
2025-05-13 09:37:23,349 - app.utils.permissions - INFO - 为角色 user 添加权限: view_reports
2025-05-13 09:37:23,350 - app.utils.permissions - INFO - 角色和权限初始化完成
2025-05-13 09:37:23,350 - __main__ - INFO - 角色和权限初始化成功
2025-05-13 09:37:23,353 - __main__ - INFO - 数据库初始化完成
2025-05-13 09:37:23,363 - __main__ - INFO - 系统资源检查完成
2025-05-13 09:37:23,363 - __main__ - INFO - 开始清理旧数据
2025-05-13 09:37:23,365 - __main__ - INFO - 删除了 0 条过期的资源使用记录
2025-05-13 09:37:23,368 - __main__ - INFO - 删除了 0 条已解决的过期警报
2025-05-13 09:37:23,369 - __main__ - INFO - 旧数据清理完成
2025-05-13 09:37:23,374 - werkzeug - WARNING -  * Debugger is active!
2025-05-13 09:37:23,376 - werkzeug - INFO -  * Debugger PIN: 670-037-726
2025-05-13 09:37:49,277 - werkzeug - INFO -  * Detected change in 'D:\\tmp\\work\\app\\routes\\projects.py', reloading
2025-05-13 09:37:49,744 - werkzeug - INFO -  * Restarting with stat
2025-05-13 09:37:50,598 - app.utils.permissions - INFO - 更新权限: manage_users
2025-05-13 09:37:50,599 - app.utils.permissions - INFO - 更新权限: manage_roles
2025-05-13 09:37:50,600 - app.utils.permissions - INFO - 更新权限: manage_all_projects
2025-05-13 09:37:50,601 - app.utils.permissions - INFO - 更新权限: manage_project
2025-05-13 09:37:50,601 - app.utils.permissions - INFO - 更新权限: manage_all_tasks
2025-05-13 09:37:50,602 - app.utils.permissions - INFO - 更新权限: manage_task
2025-05-13 09:37:50,606 - app.utils.permissions - INFO - 更新权限: view_project
2025-05-13 09:37:50,606 - app.utils.permissions - INFO - 更新权限: view_task
2025-05-13 09:37:50,607 - app.utils.permissions - INFO - 更新权限: manage_resources
2025-05-13 09:37:50,608 - app.utils.permissions - INFO - 更新权限: manage_risks
2025-05-13 09:37:50,608 - app.utils.permissions - INFO - 更新权限: view_reports
2025-05-13 09:37:50,609 - app.utils.permissions - INFO - 更新权限: create_task
2025-05-13 09:37:50,611 - app.utils.permissions - INFO - 更新权限: create_project
2025-05-13 09:37:50,612 - app.utils.permissions - INFO - 更新权限: assign_task
2025-05-13 09:37:50,612 - app.utils.permissions - INFO - 更新权限: change_project_status
2025-05-13 09:37:50,613 - app.utils.permissions - INFO - 更新权限: change_task_status
2025-05-13 09:37:50,615 - app.utils.permissions - INFO - 更新角色: admin
2025-05-13 09:37:50,616 - app.utils.permissions - INFO - 为管理员角色添加所有权限: 16个
2025-05-13 09:37:50,617 - app.utils.permissions - INFO - 更新角色: manager
2025-05-13 09:37:50,617 - app.utils.permissions - INFO - 为角色 manager 添加权限: manage_project
2025-05-13 09:37:50,617 - app.utils.permissions - INFO - 为角色 manager 添加权限: manage_task
2025-05-13 09:37:50,618 - app.utils.permissions - INFO - 为角色 manager 添加权限: view_project
2025-05-13 09:37:50,618 - app.utils.permissions - INFO - 为角色 manager 添加权限: view_task
2025-05-13 09:37:50,618 - app.utils.permissions - INFO - 为角色 manager 添加权限: manage_resources
2025-05-13 09:37:50,618 - app.utils.permissions - INFO - 为角色 manager 添加权限: manage_risks
2025-05-13 09:37:50,618 - app.utils.permissions - INFO - 为角色 manager 添加权限: view_reports
2025-05-13 09:37:50,618 - app.utils.permissions - INFO - 为角色 manager 添加权限: create_project
2025-05-13 09:37:50,618 - app.utils.permissions - INFO - 为角色 manager 添加权限: create_task
2025-05-13 09:37:50,618 - app.utils.permissions - INFO - 为角色 manager 添加权限: assign_task
2025-05-13 09:37:50,619 - app.utils.permissions - INFO - 为角色 manager 添加权限: change_project_status
2025-05-13 09:37:50,619 - app.utils.permissions - INFO - 为角色 manager 添加权限: change_task_status
2025-05-13 09:37:50,620 - app.utils.permissions - INFO - 更新角色: user
2025-05-13 09:37:50,621 - app.utils.permissions - INFO - 为角色 user 添加权限: view_project
2025-05-13 09:37:50,622 - app.utils.permissions - INFO - 为角色 user 添加权限: view_task
2025-05-13 09:37:50,622 - app.utils.permissions - INFO - 为角色 user 添加权限: view_reports
2025-05-13 09:37:50,622 - app.utils.permissions - INFO - 角色和权限初始化完成
2025-05-13 09:37:50,623 - __main__ - INFO - 角色和权限初始化成功
2025-05-13 09:37:50,626 - __main__ - INFO - 数据库初始化完成
2025-05-13 09:37:50,635 - __main__ - INFO - 系统资源检查完成
2025-05-13 09:37:50,635 - __main__ - INFO - 开始清理旧数据
2025-05-13 09:37:50,636 - __main__ - INFO - 删除了 0 条过期的资源使用记录
2025-05-13 09:37:50,637 - __main__ - INFO - 删除了 0 条已解决的过期警报
2025-05-13 09:37:50,638 - __main__ - INFO - 旧数据清理完成
2025-05-13 09:37:50,643 - werkzeug - WARNING -  * Debugger is active!
2025-05-13 09:37:50,645 - werkzeug - INFO -  * Debugger PIN: 670-037-726
2025-05-13 09:39:25,065 - app - WARNING - 绕过JWT验证: /api/global/users
2025-05-13 09:39:25,065 - app - WARNING - 绕过JWT验证: /api/global/users
2025-05-13 09:39:25,066 - app - ERROR - 获取用户列表失败: type object 'User' has no attribute 'status'
2025-05-13 09:39:25,066 - app - ERROR - 获取用户列表失败: type object 'User' has no attribute 'status'
2025-05-13 09:39:25,066 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:39:25] "[35m[1mGET /api/global/users?bypass_jwt=true&_=1747100365054 HTTP/1.1[0m" 500 -
2025-05-13 09:39:25,067 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:39:25] "[35m[1mGET /api/global/users?bypass_jwt=true&_=1747100365055 HTTP/1.1[0m" 500 -
2025-05-13 09:39:25,077 - app - WARNING - 绕过JWT验证: /api/project-managers
2025-05-13 09:39:25,078 - app - WARNING - 绕过JWT验证: /api/project-managers
2025-05-13 09:39:25,079 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:39:25] "[33mGET /api/project-managers?bypass_jwt=true&_=1747100365070 HTTP/1.1[0m" 404 -
2025-05-13 09:39:25,081 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:39:25] "[33mGET /api/project-managers?bypass_jwt=true&_=1747100365071 HTTP/1.1[0m" 404 -
2025-05-13 09:39:25,086 - app - WARNING - 绕过JWT验证: /api/global/project-managers
2025-05-13 09:39:25,090 - app - WARNING - 绕过JWT验证: /api/global/project-managers
2025-05-13 09:39:25,103 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:39:25] "GET /api/global/project-managers?bypass_jwt=true&_=1747100365071 HTTP/1.1" 200 -
2025-05-13 09:39:25,107 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:39:25] "GET /api/global/project-managers?bypass_jwt=true&_=1747100365070 HTTP/1.1" 200 -
2025-05-13 09:39:33,298 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:39:33] "[33mGET /.well-known/appspecific/com.chrome.devtools.json HTTP/1.1[0m" 404 -
2025-05-13 09:39:33,395 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:39:33] "[36mGET /static/css/bootstrap.min.css HTTP/1.1[0m" 304 -
2025-05-13 09:39:33,397 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:39:33] "[36mGET /static/css/style.css HTTP/1.1[0m" 304 -
2025-05-13 09:39:33,400 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:39:33] "[36mGET /static/css/frappe-gantt.css HTTP/1.1[0m" 304 -
2025-05-13 09:39:33,400 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:39:33] "[36mGET /static/css/bootstrap-icons.css HTTP/1.1[0m" 304 -
2025-05-13 09:39:33,425 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:39:33] "GET /static/css/bootstrap.min.css.map HTTP/1.1" 200 -
2025-05-13 09:39:33,448 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:39:33] "GET /static/js/bootstrap.bundle.min.js.map HTTP/1.1" 200 -
2025-05-13 09:39:49,073 - app - WARNING - 绕过JWT验证: /projects
2025-05-13 09:39:49,075 - app.utils.jwt_callbacks - WARNING - JWT验证已被绕过: /projects
2025-05-13 09:39:49,075 - app.routes.main - INFO - JWT bypass enabled for projects - Using test user
2025-05-13 09:39:49,167 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:39:49] "GET /projects?bypass_jwt=true HTTP/1.1" 200 -
2025-05-13 09:39:49,187 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:39:49] "[33mGET /.well-known/appspecific/com.chrome.devtools.json HTTP/1.1[0m" 404 -
2025-05-13 09:39:49,199 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:39:49] "[36mGET /static/css/bootstrap.min.css HTTP/1.1[0m" 304 -
2025-05-13 09:39:49,200 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:39:49] "[36mGET /static/css/style.css HTTP/1.1[0m" 304 -
2025-05-13 09:39:49,202 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:39:49] "[36mGET /static/css/bootstrap-icons.css HTTP/1.1[0m" 304 -
2025-05-13 09:39:49,203 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:39:49] "[36mGET /static/js/jquery.min.js HTTP/1.1[0m" 304 -
2025-05-13 09:39:49,207 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:39:49] "[36mGET /static/js/bootstrap.bundle.min.js HTTP/1.1[0m" 304 -
2025-05-13 09:39:49,210 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:39:49] "[36mGET /static/js/utils.js HTTP/1.1[0m" 304 -
2025-05-13 09:39:49,213 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:39:49] "[36mGET /static/css/frappe-gantt.css HTTP/1.1[0m" 304 -
2025-05-13 09:39:49,216 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:39:49] "[36mGET /static/js/auth.js HTTP/1.1[0m" 304 -
2025-05-13 09:39:49,217 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:39:49] "[36mGET /static/js/fix-modals.js HTTP/1.1[0m" 304 -
2025-05-13 09:39:49,222 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:39:49] "[36mGET /static/js/csrf.js HTTP/1.1[0m" 304 -
2025-05-13 09:39:49,224 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:39:49] "[36mGET /static/js/user-profile.js HTTP/1.1[0m" 304 -
2025-05-13 09:39:49,226 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:39:49] "[36mGET /static/js/frappe-gantt.min.js HTTP/1.1[0m" 304 -
2025-05-13 09:39:49,231 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:39:49] "[36mGET /static/js/bootstrap.bundle.min.js.map HTTP/1.1[0m" 304 -
2025-05-13 09:39:49,251 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:39:49] "[36mGET /static/css/fonts/bootstrap-icons.woff2 HTTP/1.1[0m" 304 -
2025-05-13 09:39:49,258 - app - WARNING - 绕过JWT验证: /api/global/users
2025-05-13 09:39:49,259 - app - ERROR - 获取用户列表失败: type object 'User' has no attribute 'status'
2025-05-13 09:39:49,259 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:39:49] "[35m[1mGET /api/global/users?bypass_jwt=true&_=1747100389254 HTTP/1.1[0m" 500 -
2025-05-13 09:39:49,265 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:39:49] "[36mGET /static/css/bootstrap.min.css.map HTTP/1.1[0m" 304 -
2025-05-13 09:39:49,295 - app - WARNING - 绕过JWT验证: /api/project-managers
2025-05-13 09:39:49,296 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:39:49] "[33mGET /api/project-managers?bypass_jwt=true&_=1747100389273 HTTP/1.1[0m" 404 -
2025-05-13 09:39:49,300 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:39:49] "[36mGET /static/favicon.ico HTTP/1.1[0m" 304 -
2025-05-13 09:39:49,308 - app - WARNING - 绕过JWT验证: /api/global/project-managers
2025-05-13 09:39:49,311 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:39:49] "GET /api/global/project-managers?bypass_jwt=true&_=1747100389273 HTTP/1.1" 200 -
2025-05-13 09:39:51,741 - app - WARNING - 绕过JWT验证: /projects/detail/1
2025-05-13 09:39:51,742 - app - INFO - 直接调用项目详情视图函数，不进行重定向: 项目ID=1
2025-05-13 09:39:51,742 - app.utils.jwt_callbacks - WARNING - JWT验证已被绕过: /projects/detail/1
2025-05-13 09:39:51,742 - app.utils.jwt_callbacks - WARNING - 使用bypass_jwt返回默认用户ID: 1
2025-05-13 09:39:51,743 - app.routes.projects - INFO - 获取项目 1 详情页面 - 用户ID: 1, URL: http://127.0.0.1:5000/projects/detail/1?no_redirect=true&bypass_jwt=true
2025-05-13 09:39:51,829 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:39:51] "GET /projects/detail/1?no_redirect=true&bypass_jwt=true HTTP/1.1" 200 -
2025-05-13 09:39:51,848 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:39:51] "[33mGET /.well-known/appspecific/com.chrome.devtools.json HTTP/1.1[0m" 404 -
2025-05-13 09:39:51,863 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:39:51] "[36mGET /static/css/bootstrap.min.css HTTP/1.1[0m" 304 -
2025-05-13 09:39:51,865 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:39:51] "[36mGET /static/css/bootstrap-icons.css HTTP/1.1[0m" 304 -
2025-05-13 09:39:51,867 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:39:51] "[36mGET /static/css/style.css HTTP/1.1[0m" 304 -
2025-05-13 09:39:51,870 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:39:51] "[36mGET /static/js/jquery.min.js HTTP/1.1[0m" 304 -
2025-05-13 09:39:51,872 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:39:51] "[36mGET /static/js/bootstrap.bundle.min.js HTTP/1.1[0m" 304 -
2025-05-13 09:39:51,873 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:39:51] "[36mGET /static/js/utils.js HTTP/1.1[0m" 304 -
2025-05-13 09:39:51,876 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:39:51] "[36mGET /static/js/auth.js HTTP/1.1[0m" 304 -
2025-05-13 09:39:51,881 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:39:51] "[36mGET /static/js/fix-modals.js HTTP/1.1[0m" 304 -
2025-05-13 09:39:51,883 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:39:51] "[36mGET /static/js/csrf.js HTTP/1.1[0m" 304 -
2025-05-13 09:39:51,887 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:39:51] "[36mGET /static/js/user-profile.js HTTP/1.1[0m" 304 -
2025-05-13 09:39:51,889 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:39:51] "[36mGET /static/css/bootstrap.min.css.map HTTP/1.1[0m" 304 -
2025-05-13 09:39:51,893 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:39:51] "[36mGET /static/js/bootstrap.bundle.min.js.map HTTP/1.1[0m" 304 -
2025-05-13 09:39:51,910 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:39:51] "[36mGET /static/css/bootstrap.min.css.map HTTP/1.1[0m" 304 -
2025-05-13 09:39:51,938 - app - WARNING - 绕过JWT验证: /api/global/users
2025-05-13 09:39:51,939 - app - WARNING - 绕过JWT验证: /api/projects/1/risks
2025-05-13 09:39:51,939 - app - ERROR - 获取用户列表失败: type object 'User' has no attribute 'status'
2025-05-13 09:39:51,941 - app - WARNING - 绕过JWT验证: /api/global/users
2025-05-13 09:39:51,942 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:39:51] "[33mGET /api/projects/1/risks?bypass_jwt=true&_=1747100391933 HTTP/1.1[0m" 404 -
2025-05-13 09:39:51,942 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:39:51] "[35m[1mGET /api/global/users?bypass_jwt=true&_=1747100391933 HTTP/1.1[0m" 500 -
2025-05-13 09:39:51,943 - app - WARNING - 绕过JWT验证: /api/projects/1/risks
2025-05-13 09:39:51,943 - app - ERROR - 获取用户列表失败: type object 'User' has no attribute 'status'
2025-05-13 09:39:51,945 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:39:51] "[33mGET /api/projects/1/risks?bypass_jwt=true&_=1747100391935 HTTP/1.1[0m" 404 -
2025-05-13 09:39:51,946 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:39:51] "[35m[1mGET /api/global/users?bypass_jwt=true&_=1747100391934 HTTP/1.1[0m" 500 -
2025-05-13 09:39:51,954 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:39:51] "[36mGET /static/js/bootstrap.bundle.min.js.map HTTP/1.1[0m" 304 -
2025-05-13 09:39:51,972 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:39:51] "[36mGET /static/favicon.ico HTTP/1.1[0m" 304 -
2025-05-13 09:39:51,974 - app - WARNING - 绕过JWT验证: /api/risks
2025-05-13 09:39:51,975 - app - WARNING - 绕过JWT验证: /api/users
2025-05-13 09:39:51,975 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:39:51] "[33mGET /api/risks?project_id=1&bypass_jwt=true&_=1747100391933 HTTP/1.1[0m" 404 -
2025-05-13 09:39:51,977 - app - WARNING - 绕过JWT验证: /api/risks
2025-05-13 09:39:51,977 - app.utils.jwt_callbacks - WARNING - JWT验证已被绕过: /api/users
2025-05-13 09:39:51,979 - app - WARNING - 绕过JWT验证: /api/users
2025-05-13 09:39:51,981 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:39:51] "[33mGET /api/risks?project_id=1&bypass_jwt=true&_=1747100391935 HTTP/1.1[0m" 404 -
2025-05-13 09:39:51,981 - app - INFO - JWT bypass enabled for getting users
2025-05-13 09:39:51,981 - app.utils.jwt_callbacks - WARNING - JWT验证已被绕过: /api/users
2025-05-13 09:39:51,984 - app - INFO - JWT bypass enabled for getting users
2025-05-13 09:39:51,987 - app - WARNING - 绕过JWT验证: /api/auth/risks
2025-05-13 09:39:51,990 - app - WARNING - 绕过JWT验证: /api/auth/risks
2025-05-13 09:39:51,992 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:39:51] "[33mGET /api/auth/risks?project_id=1&bypass_jwt=true&_=1747100391933 HTTP/1.1[0m" 404 -
2025-05-13 09:39:51,993 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:39:51] "[33mGET /api/auth/risks?project_id=1&bypass_jwt=true&_=1747100391935 HTTP/1.1[0m" 404 -
2025-05-13 09:39:52,002 - app - WARNING - 绕过JWT验证: /api/noauth/risks
2025-05-13 09:39:52,004 - app - WARNING - 绕过JWT验证: /api/noauth/risks
2025-05-13 09:39:52,013 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:39:52] "[33mGET /api/noauth/risks?project_id=1&bypass_jwt=true&_=1747100391933 HTTP/1.1[0m" 404 -
2025-05-13 09:39:52,014 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:39:52] "[33mGET /api/noauth/risks?project_id=1&bypass_jwt=true&_=1747100391935 HTTP/1.1[0m" 404 -
2025-05-13 09:39:52,056 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:39:52] "GET /api/users?bypass_jwt=true&_=1747100391933 HTTP/1.1" 200 -
2025-05-13 09:39:52,058 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:39:52] "GET /api/users?bypass_jwt=true&_=1747100391934 HTTP/1.1" 200 -
2025-05-13 09:39:54,605 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:39:54] "[36mGET /static/favicon.ico HTTP/1.1[0m" 304 -
2025-05-13 09:39:54,610 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:39:54] "[36mGET /static/css/bootstrap.min.css.map HTTP/1.1[0m" 304 -
2025-05-13 09:39:54,612 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:39:54] "[33mGET /.well-known/appspecific/com.chrome.devtools.json HTTP/1.1[0m" 404 -
2025-05-13 09:39:54,640 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:39:54] "[36mGET /static/css/bootstrap-icons.css HTTP/1.1[0m" 304 -
2025-05-13 09:39:54,640 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:39:54] "[36mGET /static/css/bootstrap.min.css HTTP/1.1[0m" 304 -
2025-05-13 09:39:54,643 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:39:54] "[36mGET /static/css/style.css HTTP/1.1[0m" 304 -
2025-05-13 09:39:54,645 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:39:54] "[33mGET /.well-known/appspecific/com.chrome.devtools.json HTTP/1.1[0m" 404 -
2025-05-13 09:39:54,645 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:39:54] "[36mGET /static/css/frappe-gantt.css HTTP/1.1[0m" 304 -
2025-05-13 09:39:54,651 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:39:54] "[36mGET /static/js/bootstrap.bundle.min.js.map HTTP/1.1[0m" 304 -
2025-05-13 09:39:54,662 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:39:54] "[36mGET /static/css/bootstrap.min.css.map HTTP/1.1[0m" 304 -
2025-05-13 09:39:56,772 - app - WARNING - 绕过JWT验证: /projects/detail/12
2025-05-13 09:39:56,773 - app - INFO - 直接调用项目详情视图函数，不进行重定向: 项目ID=12
2025-05-13 09:39:56,773 - app.utils.jwt_callbacks - WARNING - JWT验证已被绕过: /projects/detail/12
2025-05-13 09:39:56,773 - app.utils.jwt_callbacks - WARNING - 使用bypass_jwt返回默认用户ID: 1
2025-05-13 09:39:56,775 - app.routes.projects - INFO - 获取项目 12 详情页面 - 用户ID: 1, URL: http://127.0.0.1:5000/projects/detail/12?no_redirect=true&bypass_jwt=true
2025-05-13 09:39:56,906 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:39:56] "GET /projects/detail/12?no_redirect=true&bypass_jwt=true HTTP/1.1" 200 -
2025-05-13 09:39:56,927 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:39:56] "[33mGET /.well-known/appspecific/com.chrome.devtools.json HTTP/1.1[0m" 404 -
2025-05-13 09:39:56,944 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:39:56] "[36mGET /static/css/bootstrap.min.css HTTP/1.1[0m" 304 -
2025-05-13 09:39:56,945 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:39:56] "[36mGET /static/css/bootstrap-icons.css HTTP/1.1[0m" 304 -
2025-05-13 09:39:56,947 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:39:56] "[36mGET /static/css/style.css HTTP/1.1[0m" 304 -
2025-05-13 09:39:56,948 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:39:56] "[36mGET /static/js/jquery.min.js HTTP/1.1[0m" 304 -
2025-05-13 09:39:56,953 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:39:56] "[36mGET /static/js/bootstrap.bundle.min.js HTTP/1.1[0m" 304 -
2025-05-13 09:39:56,956 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:39:56] "[36mGET /static/js/utils.js HTTP/1.1[0m" 304 -
2025-05-13 09:39:56,961 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:39:56] "[36mGET /static/js/fix-modals.js HTTP/1.1[0m" 304 -
2025-05-13 09:39:56,961 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:39:56] "[36mGET /static/js/auth.js HTTP/1.1[0m" 304 -
2025-05-13 09:39:56,962 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:39:56] "[36mGET /static/js/csrf.js HTTP/1.1[0m" 304 -
2025-05-13 09:39:56,964 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:39:56] "[36mGET /static/js/user-profile.js HTTP/1.1[0m" 304 -
2025-05-13 09:39:56,969 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:39:56] "[36mGET /static/js/bootstrap.bundle.min.js.map HTTP/1.1[0m" 304 -
2025-05-13 09:39:56,998 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:39:56] "[36mGET /static/css/bootstrap.min.css.map HTTP/1.1[0m" 304 -
2025-05-13 09:39:57,006 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:39:57] "[36mGET /static/js/bootstrap.bundle.min.js.map HTTP/1.1[0m" 304 -
2025-05-13 09:39:57,009 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:39:57] "[36mGET /static/css/bootstrap.min.css.map HTTP/1.1[0m" 304 -
2025-05-13 09:39:57,010 - app - WARNING - 绕过JWT验证: /api/global/users
2025-05-13 09:39:57,011 - app - ERROR - 获取用户列表失败: type object 'User' has no attribute 'status'
2025-05-13 09:39:57,012 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:39:57] "[35m[1mGET /api/global/users?bypass_jwt=true&_=1747100396999 HTTP/1.1[0m" 500 -
2025-05-13 09:39:57,014 - app - WARNING - 绕过JWT验证: /api/projects/12/risks
2025-05-13 09:39:57,015 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:39:57] "[33mGET /api/projects/12/risks?bypass_jwt=true&_=1747100397000 HTTP/1.1[0m" 404 -
2025-05-13 09:39:57,022 - app - WARNING - 绕过JWT验证: /api/global/users
2025-05-13 09:39:57,022 - app - ERROR - 获取用户列表失败: type object 'User' has no attribute 'status'
2025-05-13 09:39:57,023 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:39:57] "[35m[1mGET /api/global/users?bypass_jwt=true&_=1747100397001 HTTP/1.1[0m" 500 -
2025-05-13 09:39:57,028 - app - WARNING - 绕过JWT验证: /api/projects/12/risks
2025-05-13 09:39:57,029 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:39:57] "[33mGET /api/projects/12/risks?bypass_jwt=true&_=1747100397001 HTTP/1.1[0m" 404 -
2025-05-13 09:39:57,047 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:39:57] "[36mGET /static/favicon.ico HTTP/1.1[0m" 304 -
2025-05-13 09:39:57,049 - app - WARNING - 绕过JWT验证: /api/users
2025-05-13 09:39:57,050 - app - WARNING - 绕过JWT验证: /api/risks
2025-05-13 09:39:57,050 - app.utils.jwt_callbacks - WARNING - JWT验证已被绕过: /api/users
2025-05-13 09:39:57,051 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:39:57] "[33mGET /api/risks?project_id=12&bypass_jwt=true&_=1747100397000 HTTP/1.1[0m" 404 -
2025-05-13 09:39:57,052 - app - WARNING - 绕过JWT验证: /api/users
2025-05-13 09:39:57,052 - app - INFO - JWT bypass enabled for getting users
2025-05-13 09:39:57,054 - app - WARNING - 绕过JWT验证: /api/risks
2025-05-13 09:39:57,054 - app.utils.jwt_callbacks - WARNING - JWT验证已被绕过: /api/users
2025-05-13 09:39:57,056 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:39:57] "[33mGET /api/risks?project_id=12&bypass_jwt=true&_=1747100397001 HTTP/1.1[0m" 404 -
2025-05-13 09:39:57,058 - app - INFO - JWT bypass enabled for getting users
2025-05-13 09:39:57,064 - app - WARNING - 绕过JWT验证: /api/auth/risks
2025-05-13 09:39:57,066 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:39:57] "[33mGET /api/auth/risks?project_id=12&bypass_jwt=true&_=1747100397000 HTTP/1.1[0m" 404 -
2025-05-13 09:39:57,071 - app - WARNING - 绕过JWT验证: /api/auth/risks
2025-05-13 09:39:57,073 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:39:57] "[33mGET /api/auth/risks?project_id=12&bypass_jwt=true&_=1747100397001 HTTP/1.1[0m" 404 -
2025-05-13 09:39:57,075 - app - WARNING - 绕过JWT验证: /api/noauth/risks
2025-05-13 09:39:57,079 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:39:57] "[33mGET /api/noauth/risks?project_id=12&bypass_jwt=true&_=1747100397000 HTTP/1.1[0m" 404 -
2025-05-13 09:39:57,089 - app - WARNING - 绕过JWT验证: /api/noauth/risks
2025-05-13 09:39:57,092 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:39:57] "[33mGET /api/noauth/risks?project_id=12&bypass_jwt=true&_=1747100397001 HTTP/1.1[0m" 404 -
2025-05-13 09:39:57,126 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:39:57] "GET /api/users?bypass_jwt=true&_=1747100396999 HTTP/1.1" 200 -
2025-05-13 09:39:57,129 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:39:57] "GET /api/users?bypass_jwt=true&_=1747100397001 HTTP/1.1" 200 -
2025-05-13 09:39:59,017 - app - WARNING - 绕过JWT验证: /api/global/users
2025-05-13 09:39:59,018 - app - ERROR - 获取用户列表失败: type object 'User' has no attribute 'status'
2025-05-13 09:39:59,018 - app - WARNING - 绕过JWT验证: /api/global/users
2025-05-13 09:39:59,020 - app - WARNING - 绕过JWT验证: /api/global/users
2025-05-13 09:39:59,020 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:39:59] "[35m[1mGET /api/global/users?bypass_jwt=true&_=1747100399014 HTTP/1.1[0m" 500 -
2025-05-13 09:39:59,021 - app - ERROR - 获取用户列表失败: type object 'User' has no attribute 'status'
2025-05-13 09:39:59,023 - app - WARNING - 绕过JWT验证: /api/global/users
2025-05-13 09:39:59,023 - app - ERROR - 获取用户列表失败: type object 'User' has no attribute 'status'
2025-05-13 09:39:59,024 - app - WARNING - 绕过JWT验证: /api/global/users
2025-05-13 09:39:59,025 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:39:59] "[35m[1mGET /api/global/users?bypass_jwt=true&_=1747100399015 HTTP/1.1[0m" 500 -
2025-05-13 09:39:59,026 - app - WARNING - 绕过JWT验证: /api/global/users
2025-05-13 09:39:59,028 - app - ERROR - 获取用户列表失败: type object 'User' has no attribute 'status'
2025-05-13 09:39:59,029 - app - WARNING - 绕过JWT验证: /api/global/users
2025-05-13 09:39:59,030 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:39:59] "[35m[1mGET /api/global/users?bypass_jwt=true&_=1747100399017 HTTP/1.1[0m" 500 -
2025-05-13 09:39:59,031 - app - ERROR - 获取用户列表失败: type object 'User' has no attribute 'status'
2025-05-13 09:39:59,031 - app - ERROR - 获取用户列表失败: type object 'User' has no attribute 'status'
2025-05-13 09:39:59,032 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:39:59] "[35m[1mGET /api/global/users?bypass_jwt=true&_=1747100399018 HTTP/1.1[0m" 500 -
2025-05-13 09:39:59,032 - app - ERROR - 获取用户列表失败: type object 'User' has no attribute 'status'
2025-05-13 09:39:59,035 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:39:59] "[35m[1mGET /api/global/users?bypass_jwt=true&_=1747100399019 HTTP/1.1[0m" 500 -
2025-05-13 09:39:59,036 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:39:59] "[35m[1mGET /api/global/users?bypass_jwt=true&_=1747100399020 HTTP/1.1[0m" 500 -
2025-05-13 09:39:59,037 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:39:59] "[35m[1mGET /api/global/users?bypass_jwt=true&_=1747100399022 HTTP/1.1[0m" 500 -
2025-05-13 09:41:11,417 - werkzeug - INFO -  * Detected change in 'D:\\tmp\\work\\app\\routes\\global_users.py', reloading
2025-05-13 09:41:11,656 - werkzeug - INFO -  * Restarting with stat
2025-05-13 09:41:12,606 - app.utils.permissions - INFO - 更新权限: manage_users
2025-05-13 09:41:12,606 - app.utils.permissions - INFO - 更新权限: manage_roles
2025-05-13 09:41:12,607 - app.utils.permissions - INFO - 更新权限: manage_all_projects
2025-05-13 09:41:12,607 - app.utils.permissions - INFO - 更新权限: manage_project
2025-05-13 09:41:12,607 - app.utils.permissions - INFO - 更新权限: manage_all_tasks
2025-05-13 09:41:12,608 - app.utils.permissions - INFO - 更新权限: manage_task
2025-05-13 09:41:12,608 - app.utils.permissions - INFO - 更新权限: view_project
2025-05-13 09:41:12,610 - app.utils.permissions - INFO - 更新权限: view_task
2025-05-13 09:41:12,610 - app.utils.permissions - INFO - 更新权限: manage_resources
2025-05-13 09:41:12,610 - app.utils.permissions - INFO - 更新权限: manage_risks
2025-05-13 09:41:12,611 - app.utils.permissions - INFO - 更新权限: view_reports
2025-05-13 09:41:12,611 - app.utils.permissions - INFO - 更新权限: create_task
2025-05-13 09:41:12,612 - app.utils.permissions - INFO - 更新权限: create_project
2025-05-13 09:41:12,612 - app.utils.permissions - INFO - 更新权限: assign_task
2025-05-13 09:41:12,612 - app.utils.permissions - INFO - 更新权限: change_project_status
2025-05-13 09:41:12,613 - app.utils.permissions - INFO - 更新权限: change_task_status
2025-05-13 09:41:12,614 - app.utils.permissions - INFO - 更新角色: admin
2025-05-13 09:41:12,616 - app.utils.permissions - INFO - 为管理员角色添加所有权限: 16个
2025-05-13 09:41:12,616 - app.utils.permissions - INFO - 更新角色: manager
2025-05-13 09:41:12,617 - app.utils.permissions - INFO - 为角色 manager 添加权限: manage_project
2025-05-13 09:41:12,617 - app.utils.permissions - INFO - 为角色 manager 添加权限: manage_task
2025-05-13 09:41:12,617 - app.utils.permissions - INFO - 为角色 manager 添加权限: view_project
2025-05-13 09:41:12,617 - app.utils.permissions - INFO - 为角色 manager 添加权限: view_task
2025-05-13 09:41:12,618 - app.utils.permissions - INFO - 为角色 manager 添加权限: manage_resources
2025-05-13 09:41:12,618 - app.utils.permissions - INFO - 为角色 manager 添加权限: manage_risks
2025-05-13 09:41:12,618 - app.utils.permissions - INFO - 为角色 manager 添加权限: view_reports
2025-05-13 09:41:12,618 - app.utils.permissions - INFO - 为角色 manager 添加权限: create_project
2025-05-13 09:41:12,618 - app.utils.permissions - INFO - 为角色 manager 添加权限: create_task
2025-05-13 09:41:12,618 - app.utils.permissions - INFO - 为角色 manager 添加权限: assign_task
2025-05-13 09:41:12,618 - app.utils.permissions - INFO - 为角色 manager 添加权限: change_project_status
2025-05-13 09:41:12,618 - app.utils.permissions - INFO - 为角色 manager 添加权限: change_task_status
2025-05-13 09:41:12,619 - app.utils.permissions - INFO - 更新角色: user
2025-05-13 09:41:12,619 - app.utils.permissions - INFO - 为角色 user 添加权限: view_project
2025-05-13 09:41:12,619 - app.utils.permissions - INFO - 为角色 user 添加权限: view_task
2025-05-13 09:41:12,619 - app.utils.permissions - INFO - 为角色 user 添加权限: view_reports
2025-05-13 09:41:12,620 - app.utils.permissions - INFO - 角色和权限初始化完成
2025-05-13 09:41:12,620 - __main__ - INFO - 角色和权限初始化成功
2025-05-13 09:41:12,622 - __main__ - INFO - 数据库初始化完成
2025-05-13 09:41:12,633 - __main__ - INFO - 系统资源检查完成
2025-05-13 09:41:12,633 - __main__ - INFO - 开始清理旧数据
2025-05-13 09:41:12,634 - __main__ - INFO - 删除了 0 条过期的资源使用记录
2025-05-13 09:41:12,635 - __main__ - INFO - 删除了 0 条已解决的过期警报
2025-05-13 09:41:12,635 - __main__ - INFO - 旧数据清理完成
2025-05-13 09:41:12,642 - werkzeug - WARNING -  * Debugger is active!
2025-05-13 09:41:12,644 - werkzeug - INFO -  * Debugger PIN: 670-037-726
2025-05-13 09:42:41,045 - werkzeug - INFO -  * Detected change in 'D:\\tmp\\work\\app\\routes\\users.py', reloading
2025-05-13 09:42:41,215 - werkzeug - INFO -  * Restarting with stat
2025-05-13 09:42:42,170 - app.utils.permissions - INFO - 更新权限: manage_users
2025-05-13 09:42:42,170 - app.utils.permissions - INFO - 更新权限: manage_roles
2025-05-13 09:42:42,172 - app.utils.permissions - INFO - 更新权限: manage_all_projects
2025-05-13 09:42:42,173 - app.utils.permissions - INFO - 更新权限: manage_project
2025-05-13 09:42:42,173 - app.utils.permissions - INFO - 更新权限: manage_all_tasks
2025-05-13 09:42:42,173 - app.utils.permissions - INFO - 更新权限: manage_task
2025-05-13 09:42:42,174 - app.utils.permissions - INFO - 更新权限: view_project
2025-05-13 09:42:42,174 - app.utils.permissions - INFO - 更新权限: view_task
2025-05-13 09:42:42,174 - app.utils.permissions - INFO - 更新权限: manage_resources
2025-05-13 09:42:42,176 - app.utils.permissions - INFO - 更新权限: manage_risks
2025-05-13 09:42:42,176 - app.utils.permissions - INFO - 更新权限: view_reports
2025-05-13 09:42:42,176 - app.utils.permissions - INFO - 更新权限: create_task
2025-05-13 09:42:42,177 - app.utils.permissions - INFO - 更新权限: create_project
2025-05-13 09:42:42,177 - app.utils.permissions - INFO - 更新权限: assign_task
2025-05-13 09:42:42,177 - app.utils.permissions - INFO - 更新权限: change_project_status
2025-05-13 09:42:42,177 - app.utils.permissions - INFO - 更新权限: change_task_status
2025-05-13 09:42:42,180 - app.utils.permissions - INFO - 更新角色: admin
2025-05-13 09:42:42,182 - app.utils.permissions - INFO - 为管理员角色添加所有权限: 16个
2025-05-13 09:42:42,182 - app.utils.permissions - INFO - 更新角色: manager
2025-05-13 09:42:42,183 - app.utils.permissions - INFO - 为角色 manager 添加权限: manage_project
2025-05-13 09:42:42,183 - app.utils.permissions - INFO - 为角色 manager 添加权限: manage_task
2025-05-13 09:42:42,183 - app.utils.permissions - INFO - 为角色 manager 添加权限: view_project
2025-05-13 09:42:42,183 - app.utils.permissions - INFO - 为角色 manager 添加权限: view_task
2025-05-13 09:42:42,183 - app.utils.permissions - INFO - 为角色 manager 添加权限: manage_resources
2025-05-13 09:42:42,183 - app.utils.permissions - INFO - 为角色 manager 添加权限: manage_risks
2025-05-13 09:42:42,185 - app.utils.permissions - INFO - 为角色 manager 添加权限: view_reports
2025-05-13 09:42:42,185 - app.utils.permissions - INFO - 为角色 manager 添加权限: create_project
2025-05-13 09:42:42,185 - app.utils.permissions - INFO - 为角色 manager 添加权限: create_task
2025-05-13 09:42:42,185 - app.utils.permissions - INFO - 为角色 manager 添加权限: assign_task
2025-05-13 09:42:42,185 - app.utils.permissions - INFO - 为角色 manager 添加权限: change_project_status
2025-05-13 09:42:42,185 - app.utils.permissions - INFO - 为角色 manager 添加权限: change_task_status
2025-05-13 09:42:42,185 - app.utils.permissions - INFO - 更新角色: user
2025-05-13 09:42:42,186 - app.utils.permissions - INFO - 为角色 user 添加权限: view_project
2025-05-13 09:42:42,186 - app.utils.permissions - INFO - 为角色 user 添加权限: view_task
2025-05-13 09:42:42,186 - app.utils.permissions - INFO - 为角色 user 添加权限: view_reports
2025-05-13 09:42:42,186 - app.utils.permissions - INFO - 角色和权限初始化完成
2025-05-13 09:42:42,187 - __main__ - INFO - 角色和权限初始化成功
2025-05-13 09:42:42,190 - __main__ - INFO - 数据库初始化完成
2025-05-13 09:42:42,202 - __main__ - INFO - 系统资源检查完成
2025-05-13 09:42:42,202 - __main__ - INFO - 开始清理旧数据
2025-05-13 09:42:42,203 - __main__ - INFO - 删除了 0 条过期的资源使用记录
2025-05-13 09:42:42,204 - __main__ - INFO - 删除了 0 条已解决的过期警报
2025-05-13 09:42:42,204 - __main__ - INFO - 旧数据清理完成
2025-05-13 09:42:42,209 - werkzeug - WARNING -  * Debugger is active!
2025-05-13 09:42:42,211 - werkzeug - INFO -  * Debugger PIN: 670-037-726
2025-05-13 09:43:51,030 - werkzeug - INFO -  * Detected change in 'D:\\tmp\\work\\app\\routes\\users.py', reloading
2025-05-13 09:43:51,197 - werkzeug - INFO -  * Restarting with stat
2025-05-13 09:43:52,118 - app.utils.permissions - INFO - 更新权限: manage_users
2025-05-13 09:43:52,120 - app.utils.permissions - INFO - 更新权限: manage_roles
2025-05-13 09:43:52,121 - app.utils.permissions - INFO - 更新权限: manage_all_projects
2025-05-13 09:43:52,121 - app.utils.permissions - INFO - 更新权限: manage_project
2025-05-13 09:43:52,121 - app.utils.permissions - INFO - 更新权限: manage_all_tasks
2025-05-13 09:43:52,123 - app.utils.permissions - INFO - 更新权限: manage_task
2025-05-13 09:43:52,123 - app.utils.permissions - INFO - 更新权限: view_project
2025-05-13 09:43:52,124 - app.utils.permissions - INFO - 更新权限: view_task
2025-05-13 09:43:52,124 - app.utils.permissions - INFO - 更新权限: manage_resources
2025-05-13 09:43:52,124 - app.utils.permissions - INFO - 更新权限: manage_risks
2025-05-13 09:43:52,125 - app.utils.permissions - INFO - 更新权限: view_reports
2025-05-13 09:43:52,125 - app.utils.permissions - INFO - 更新权限: create_task
2025-05-13 09:43:52,125 - app.utils.permissions - INFO - 更新权限: create_project
2025-05-13 09:43:52,126 - app.utils.permissions - INFO - 更新权限: assign_task
2025-05-13 09:43:52,126 - app.utils.permissions - INFO - 更新权限: change_project_status
2025-05-13 09:43:52,126 - app.utils.permissions - INFO - 更新权限: change_task_status
2025-05-13 09:43:52,129 - app.utils.permissions - INFO - 更新角色: admin
2025-05-13 09:43:52,130 - app.utils.permissions - INFO - 为管理员角色添加所有权限: 16个
2025-05-13 09:43:52,131 - app.utils.permissions - INFO - 更新角色: manager
2025-05-13 09:43:52,131 - app.utils.permissions - INFO - 为角色 manager 添加权限: manage_project
2025-05-13 09:43:52,131 - app.utils.permissions - INFO - 为角色 manager 添加权限: manage_task
2025-05-13 09:43:52,131 - app.utils.permissions - INFO - 为角色 manager 添加权限: view_project
2025-05-13 09:43:52,131 - app.utils.permissions - INFO - 为角色 manager 添加权限: view_task
2025-05-13 09:43:52,133 - app.utils.permissions - INFO - 为角色 manager 添加权限: manage_resources
2025-05-13 09:43:52,133 - app.utils.permissions - INFO - 为角色 manager 添加权限: manage_risks
2025-05-13 09:43:52,133 - app.utils.permissions - INFO - 为角色 manager 添加权限: view_reports
2025-05-13 09:43:52,133 - app.utils.permissions - INFO - 为角色 manager 添加权限: create_project
2025-05-13 09:43:52,133 - app.utils.permissions - INFO - 为角色 manager 添加权限: create_task
2025-05-13 09:43:52,133 - app.utils.permissions - INFO - 为角色 manager 添加权限: assign_task
2025-05-13 09:43:52,133 - app.utils.permissions - INFO - 为角色 manager 添加权限: change_project_status
2025-05-13 09:43:52,133 - app.utils.permissions - INFO - 为角色 manager 添加权限: change_task_status
2025-05-13 09:43:52,134 - app.utils.permissions - INFO - 更新角色: user
2025-05-13 09:43:52,134 - app.utils.permissions - INFO - 为角色 user 添加权限: view_project
2025-05-13 09:43:52,134 - app.utils.permissions - INFO - 为角色 user 添加权限: view_task
2025-05-13 09:43:52,134 - app.utils.permissions - INFO - 为角色 user 添加权限: view_reports
2025-05-13 09:43:52,135 - app.utils.permissions - INFO - 角色和权限初始化完成
2025-05-13 09:43:52,135 - __main__ - INFO - 角色和权限初始化成功
2025-05-13 09:43:52,137 - __main__ - INFO - 数据库初始化完成
2025-05-13 09:43:52,146 - __main__ - INFO - 系统资源检查完成
2025-05-13 09:43:52,148 - __main__ - INFO - 开始清理旧数据
2025-05-13 09:43:52,149 - __main__ - INFO - 删除了 0 条过期的资源使用记录
2025-05-13 09:43:52,150 - __main__ - INFO - 删除了 0 条已解决的过期警报
2025-05-13 09:43:52,150 - __main__ - INFO - 旧数据清理完成
2025-05-13 09:43:52,155 - werkzeug - WARNING -  * Debugger is active!
2025-05-13 09:43:52,157 - werkzeug - INFO -  * Debugger PIN: 670-037-726
2025-05-13 09:44:08,401 - werkzeug - INFO -  * Detected change in 'D:\\tmp\\work\\app\\routes\\global_users.py', reloading
2025-05-13 09:44:08,591 - werkzeug - INFO -  * Restarting with stat
2025-05-13 09:44:09,462 - app.utils.permissions - INFO - 更新权限: manage_users
2025-05-13 09:44:09,463 - app.utils.permissions - INFO - 更新权限: manage_roles
2025-05-13 09:44:09,464 - app.utils.permissions - INFO - 更新权限: manage_all_projects
2025-05-13 09:44:09,465 - app.utils.permissions - INFO - 更新权限: manage_project
2025-05-13 09:44:09,465 - app.utils.permissions - INFO - 更新权限: manage_all_tasks
2025-05-13 09:44:09,465 - app.utils.permissions - INFO - 更新权限: manage_task
2025-05-13 09:44:09,465 - app.utils.permissions - INFO - 更新权限: view_project
2025-05-13 09:44:09,467 - app.utils.permissions - INFO - 更新权限: view_task
2025-05-13 09:44:09,467 - app.utils.permissions - INFO - 更新权限: manage_resources
2025-05-13 09:44:09,467 - app.utils.permissions - INFO - 更新权限: manage_risks
2025-05-13 09:44:09,467 - app.utils.permissions - INFO - 更新权限: view_reports
2025-05-13 09:44:09,468 - app.utils.permissions - INFO - 更新权限: create_task
2025-05-13 09:44:09,468 - app.utils.permissions - INFO - 更新权限: create_project
2025-05-13 09:44:09,468 - app.utils.permissions - INFO - 更新权限: assign_task
2025-05-13 09:44:09,470 - app.utils.permissions - INFO - 更新权限: change_project_status
2025-05-13 09:44:09,470 - app.utils.permissions - INFO - 更新权限: change_task_status
2025-05-13 09:44:09,472 - app.utils.permissions - INFO - 更新角色: admin
2025-05-13 09:44:09,473 - app.utils.permissions - INFO - 为管理员角色添加所有权限: 16个
2025-05-13 09:44:09,474 - app.utils.permissions - INFO - 更新角色: manager
2025-05-13 09:44:09,474 - app.utils.permissions - INFO - 为角色 manager 添加权限: manage_project
2025-05-13 09:44:09,475 - app.utils.permissions - INFO - 为角色 manager 添加权限: manage_task
2025-05-13 09:44:09,475 - app.utils.permissions - INFO - 为角色 manager 添加权限: view_project
2025-05-13 09:44:09,475 - app.utils.permissions - INFO - 为角色 manager 添加权限: view_task
2025-05-13 09:44:09,475 - app.utils.permissions - INFO - 为角色 manager 添加权限: manage_resources
2025-05-13 09:44:09,475 - app.utils.permissions - INFO - 为角色 manager 添加权限: manage_risks
2025-05-13 09:44:09,475 - app.utils.permissions - INFO - 为角色 manager 添加权限: view_reports
2025-05-13 09:44:09,475 - app.utils.permissions - INFO - 为角色 manager 添加权限: create_project
2025-05-13 09:44:09,475 - app.utils.permissions - INFO - 为角色 manager 添加权限: create_task
2025-05-13 09:44:09,475 - app.utils.permissions - INFO - 为角色 manager 添加权限: assign_task
2025-05-13 09:44:09,475 - app.utils.permissions - INFO - 为角色 manager 添加权限: change_project_status
2025-05-13 09:44:09,475 - app.utils.permissions - INFO - 为角色 manager 添加权限: change_task_status
2025-05-13 09:44:09,476 - app.utils.permissions - INFO - 更新角色: user
2025-05-13 09:44:09,476 - app.utils.permissions - INFO - 为角色 user 添加权限: view_project
2025-05-13 09:44:09,476 - app.utils.permissions - INFO - 为角色 user 添加权限: view_task
2025-05-13 09:44:09,476 - app.utils.permissions - INFO - 为角色 user 添加权限: view_reports
2025-05-13 09:44:09,477 - app.utils.permissions - INFO - 角色和权限初始化完成
2025-05-13 09:44:09,477 - __main__ - INFO - 角色和权限初始化成功
2025-05-13 09:44:09,479 - __main__ - INFO - 数据库初始化完成
2025-05-13 09:44:09,489 - __main__ - INFO - 系统资源检查完成
2025-05-13 09:44:09,489 - __main__ - INFO - 开始清理旧数据
2025-05-13 09:44:09,490 - __main__ - INFO - 删除了 0 条过期的资源使用记录
2025-05-13 09:44:09,491 - __main__ - INFO - 删除了 0 条已解决的过期警报
2025-05-13 09:44:09,491 - __main__ - INFO - 旧数据清理完成
2025-05-13 09:44:09,496 - werkzeug - WARNING -  * Debugger is active!
2025-05-13 09:44:09,499 - werkzeug - INFO -  * Debugger PIN: 670-037-726
2025-05-13 09:47:05,645 - app - WARNING - 绕过JWT验证: /projects/detail/12
2025-05-13 09:47:05,646 - app - INFO - 直接调用项目详情视图函数，不进行重定向: 项目ID=12
2025-05-13 09:47:05,646 - app.utils.jwt_callbacks - WARNING - JWT验证已被绕过: /projects/detail/12
2025-05-13 09:47:05,646 - app.utils.jwt_callbacks - WARNING - 使用bypass_jwt返回默认用户ID: 1
2025-05-13 09:47:05,646 - app.routes.projects - INFO - 获取项目 12 详情页面 - 用户ID: 1, URL: http://127.0.0.1:5000/projects/detail/12?no_redirect=true&bypass_jwt=true
2025-05-13 09:47:05,695 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:47:05] "GET /projects/detail/12?no_redirect=true&bypass_jwt=true HTTP/1.1" 200 -
2025-05-13 09:47:05,821 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:47:05] "[36mGET /static/css/bootstrap.min.css HTTP/1.1[0m" 304 -
2025-05-13 09:47:05,825 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:47:05] "[36mGET /static/js/auth.js HTTP/1.1[0m" 304 -
2025-05-13 09:47:05,828 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:47:05] "[36mGET /static/js/fix-modals.js HTTP/1.1[0m" 304 -
2025-05-13 09:47:05,829 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:47:05] "[36mGET /static/js/jquery.min.js HTTP/1.1[0m" 304 -
2025-05-13 09:47:05,829 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:47:05] "[36mGET /static/css/style.css HTTP/1.1[0m" 304 -
2025-05-13 09:47:05,830 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:47:05] "[36mGET /static/css/bootstrap-icons.css HTTP/1.1[0m" 304 -
2025-05-13 09:47:05,831 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:47:05] "[36mGET /static/js/bootstrap.bundle.min.js HTTP/1.1[0m" 304 -
2025-05-13 09:47:05,836 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:47:05] "[36mGET /static/js/csrf.js HTTP/1.1[0m" 304 -
2025-05-13 09:47:05,836 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:47:05] "[36mGET /static/js/utils.js HTTP/1.1[0m" 304 -
2025-05-13 09:47:05,837 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:47:05] "[36mGET /static/js/user-profile.js HTTP/1.1[0m" 304 -
2025-05-13 09:47:05,862 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:47:05] "[36mGET /static/css/fonts/bootstrap-icons.woff2 HTTP/1.1[0m" 304 -
2025-05-13 09:47:05,874 - app - WARNING - 绕过JWT验证: /api/global/users
2025-05-13 09:47:05,875 - app - WARNING - 绕过JWT验证: /api/projects/12/risks
2025-05-13 09:47:05,877 - app - WARNING - 绕过JWT验证: /api/global/users
2025-05-13 09:47:05,878 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:47:05] "[33mGET /api/projects/12/risks?bypass_jwt=true&_=1747100825871 HTTP/1.1[0m" 404 -
2025-05-13 09:47:05,878 - app - WARNING - 绕过JWT验证: /api/projects/12/risks
2025-05-13 09:47:05,880 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:47:05] "GET /api/global/users?bypass_jwt=true&_=1747100825871 HTTP/1.1" 200 -
2025-05-13 09:47:05,880 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:47:05] "[33mGET /api/projects/12/risks?bypass_jwt=true&_=1747100825872 HTTP/1.1[0m" 404 -
2025-05-13 09:47:05,882 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:47:05] "GET /api/global/users?bypass_jwt=true&_=1747100825872 HTTP/1.1" 200 -
2025-05-13 09:47:05,891 - app - WARNING - 绕过JWT验证: /api/risks
2025-05-13 09:47:05,892 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:47:05] "[33mGET /api/risks?project_id=12&bypass_jwt=true&_=1747100825871 HTTP/1.1[0m" 404 -
2025-05-13 09:47:05,892 - app - WARNING - 绕过JWT验证: /api/risks
2025-05-13 09:47:05,894 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:47:05] "[36mGET /static/favicon.ico HTTP/1.1[0m" 304 -
2025-05-13 09:47:05,894 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:47:05] "[33mGET /api/risks?project_id=12&bypass_jwt=true&_=1747100825872 HTTP/1.1[0m" 404 -
2025-05-13 09:47:05,899 - app - WARNING - 绕过JWT验证: /api/auth/risks
2025-05-13 09:47:05,900 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:47:05] "[33mGET /api/auth/risks?project_id=12&bypass_jwt=true&_=1747100825871 HTTP/1.1[0m" 404 -
2025-05-13 09:47:05,900 - app - WARNING - 绕过JWT验证: /api/auth/risks
2025-05-13 09:47:05,901 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:47:05] "[33mGET /api/auth/risks?project_id=12&bypass_jwt=true&_=1747100825872 HTTP/1.1[0m" 404 -
2025-05-13 09:47:05,906 - app - WARNING - 绕过JWT验证: /api/noauth/risks
2025-05-13 09:47:05,907 - app - WARNING - 绕过JWT验证: /api/noauth/risks
2025-05-13 09:47:05,907 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:47:05] "[33mGET /api/noauth/risks?project_id=12&bypass_jwt=true&_=1747100825871 HTTP/1.1[0m" 404 -
2025-05-13 09:47:05,907 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:47:05] "[33mGET /api/noauth/risks?project_id=12&bypass_jwt=true&_=1747100825872 HTTP/1.1[0m" 404 -
2025-05-13 09:47:07,502 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:47:07] "[36mGET /static/favicon.ico HTTP/1.1[0m" 304 -
2025-05-13 09:47:22,185 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:47:22] "GET /login HTTP/1.1" 200 -
2025-05-13 09:47:22,226 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:47:22] "GET /static/css/bootstrap.min.css HTTP/1.1" 200 -
2025-05-13 09:47:22,229 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:47:22] "GET /static/css/bootstrap-icons.css HTTP/1.1" 200 -
2025-05-13 09:47:22,230 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:47:22] "GET /static/css/style.css HTTP/1.1" 200 -
2025-05-13 09:47:22,231 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:47:22] "GET /static/js/jquery.min.js HTTP/1.1" 200 -
2025-05-13 09:47:22,232 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:47:22] "GET /static/js/bootstrap.bundle.min.js HTTP/1.1" 200 -
2025-05-13 09:47:22,235 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:47:22] "GET /static/js/utils.js HTTP/1.1" 200 -
2025-05-13 09:47:22,237 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:47:22] "GET /static/js/auth.js HTTP/1.1" 200 -
2025-05-13 09:47:22,242 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:47:22] "GET /static/images/background.png HTTP/1.1" 200 -
2025-05-13 09:47:22,258 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:47:22] "GET /static/js/fix-modals.js HTTP/1.1" 200 -
2025-05-13 09:47:22,258 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:47:22] "GET /static/js/user-profile.js HTTP/1.1" 200 -
2025-05-13 09:47:22,258 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:47:22] "GET /static/js/csrf.js HTTP/1.1" 200 -
2025-05-13 09:47:22,259 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:47:22] "GET /static/uploads/background.png HTTP/1.1" 200 -
2025-05-13 09:47:22,259 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:47:22] "GET /static/js/background-helper.js HTTP/1.1" 200 -
2025-05-13 09:47:22,285 - app - WARNING - 绕过JWT验证: /auth/user_info
2025-05-13 09:47:22,286 - app.utils.jwt_callbacks - WARNING - JWT验证已被绕过: /auth/user_info
2025-05-13 09:47:22,286 - app - INFO - 获取用户信息 - bypass_jwt: True
2025-05-13 09:47:22,286 - app - INFO - 使用默认管理员用户(ID=1)
2025-05-13 09:47:22,293 - app - INFO - 成功获取用户 admin 的信息
2025-05-13 09:47:22,294 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:47:22] "GET /auth/user_info?_=1747100842283&bypass_jwt=true HTTP/1.1" 200 -
2025-05-13 09:47:22,300 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:47:22] "GET /static/favicon.ico HTTP/1.1" 200 -
2025-05-13 09:47:23,808 - app - INFO - 登录请求 - 方法: POST, 内容类型: application/x-www-form-urlencoded
2025-05-13 09:47:23,808 - app - INFO - 请求头: {'Host': '127.0.0.1:5000', 'Connection': 'keep-alive', 'Content-Length': '135', 'Cache-Control': 'max-age=0', 'Sec-Ch-Ua': '"Chromium";v="136", "Microsoft Edge";v="136", "Not.A/Brand";v="99"', 'Sec-Ch-Ua-Mobile': '?0', 'Sec-Ch-Ua-Platform': '"Windows"', 'Origin': 'http://127.0.0.1:5000', 'Content-Type': 'application/x-www-form-urlencoded', 'Upgrade-Insecure-Requests': '1', 'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36 Edg/136.0.0.0', 'Accept': 'text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.7', 'Sec-Fetch-Site': 'same-origin', 'Sec-Fetch-Mode': 'navigate', 'Sec-Fetch-User': '?1', 'Sec-Fetch-Dest': 'document', 'Referer': 'http://127.0.0.1:5000/login', 'Accept-Encoding': 'gzip, deflate, br, zstd', 'Accept-Language': 'zh-CN,zh;q=0.9,en;q=0.8,en-GB;q=0.7,en-US;q=0.6', 'Cookie': 'session=eyJjc3JmX3Rva2VuIjoiOTBmM2I1NjFjZWQyOWViZTcyOTJlYWY2MmUwZGNhOTZiYjQ5ZGQwOCJ9.aCKkqg.bIG3JCi8xV8gBtWbdKUy3ZGoa5s; user_roles=admin; is_admin=true; admin=true'}
2025-05-13 09:47:23,808 - app - INFO - 处理表单格式的登录请求
2025-05-13 09:47:23,808 - app - INFO - 表单数据: username=admin, password=********
2025-05-13 09:47:24,008 - app - INFO - 已生成CSRF令牌: IjkwZjNiNT...
2025-05-13 09:47:24,009 - app - INFO - 用户 admin 的角色: ['admin']
2025-05-13 09:47:24,009 - app - INFO - 用户 admin 是否是管理员: True
2025-05-13 09:47:24,021 - app - INFO - 用户登录成功: admin
2025-05-13 09:47:24,022 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:47:24] "[32mPOST /auth/login HTTP/1.1[0m" 302 -
2025-05-13 09:47:24,032 - app - DEBUG - Dashboard route accessed
2025-05-13 09:47:24,032 - app - DEBUG - Current user ID: 1
2025-05-13 09:47:24,044 - app - DEBUG - Dashboard data prepared for user: admin
2025-05-13 09:47:24,055 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:47:24] "GET /dashboard HTTP/1.1" 200 -
2025-05-13 09:47:24,086 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:47:24] "[36mGET /static/css/bootstrap.min.css HTTP/1.1[0m" 304 -
2025-05-13 09:47:24,088 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:47:24] "[36mGET /static/css/bootstrap-icons.css HTTP/1.1[0m" 304 -
2025-05-13 09:47:24,089 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:47:24] "[36mGET /static/css/style.css HTTP/1.1[0m" 304 -
2025-05-13 09:47:24,091 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:47:24] "[36mGET /static/js/jquery.min.js HTTP/1.1[0m" 304 -
2025-05-13 09:47:24,093 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:47:24] "[36mGET /static/js/bootstrap.bundle.min.js HTTP/1.1[0m" 304 -
2025-05-13 09:47:24,096 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:47:24] "[36mGET /static/js/utils.js HTTP/1.1[0m" 304 -
2025-05-13 09:47:24,100 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:47:24] "[36mGET /static/js/auth.js HTTP/1.1[0m" 304 -
2025-05-13 09:47:24,102 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:47:24] "[36mGET /static/js/fix-modals.js HTTP/1.1[0m" 304 -
2025-05-13 09:47:24,106 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:47:24] "[36mGET /static/js/csrf.js HTTP/1.1[0m" 304 -
2025-05-13 09:47:24,107 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:47:24] "[36mGET /static/js/user-profile.js HTTP/1.1[0m" 304 -
2025-05-13 09:47:24,131 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:47:24] "GET /static/css/fonts/bootstrap-icons.woff2 HTTP/1.1" 200 -
2025-05-13 09:47:24,146 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:47:24] "[36mGET /static/favicon.ico HTTP/1.1[0m" 304 -
2025-05-13 09:47:57,452 - app - WARNING - 绕过JWT验证: /projects
2025-05-13 09:47:57,452 - app.utils.jwt_callbacks - WARNING - JWT验证已被绕过: /projects
2025-05-13 09:47:57,452 - app.routes.main - INFO - JWT bypass enabled for projects - Using test user
2025-05-13 09:47:57,464 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:47:57] "GET /projects?bypass_jwt=true HTTP/1.1" 200 -
2025-05-13 09:47:57,493 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:47:57] "[36mGET /static/css/bootstrap.min.css HTTP/1.1[0m" 304 -
2025-05-13 09:47:57,495 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:47:57] "[36mGET /static/css/bootstrap-icons.css HTTP/1.1[0m" 304 -
2025-05-13 09:47:57,497 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:47:57] "[36mGET /static/css/style.css HTTP/1.1[0m" 304 -
2025-05-13 09:47:57,497 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:47:57] "GET /static/css/frappe-gantt.css HTTP/1.1" 200 -
2025-05-13 09:47:57,500 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:47:57] "[36mGET /static/js/jquery.min.js HTTP/1.1[0m" 304 -
2025-05-13 09:47:57,502 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:47:57] "[36mGET /static/js/bootstrap.bundle.min.js HTTP/1.1[0m" 304 -
2025-05-13 09:47:57,503 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:47:57] "[36mGET /static/js/utils.js HTTP/1.1[0m" 304 -
2025-05-13 09:47:57,505 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:47:57] "GET /static/js/frappe-gantt.min.js HTTP/1.1" 200 -
2025-05-13 09:47:57,507 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:47:57] "[36mGET /static/js/auth.js HTTP/1.1[0m" 304 -
2025-05-13 09:47:57,508 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:47:57] "[36mGET /static/js/fix-modals.js HTTP/1.1[0m" 304 -
2025-05-13 09:47:57,510 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:47:57] "[36mGET /static/js/csrf.js HTTP/1.1[0m" 304 -
2025-05-13 09:47:57,511 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:47:57] "[36mGET /static/js/user-profile.js HTTP/1.1[0m" 304 -
2025-05-13 09:47:57,536 - app - WARNING - 绕过JWT验证: /api/global/users
2025-05-13 09:47:57,537 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:47:57] "GET /api/global/users?bypass_jwt=true&_=1747100877531 HTTP/1.1" 200 -
2025-05-13 09:47:57,545 - app - WARNING - 绕过JWT验证: /api/project-managers
2025-05-13 09:47:57,546 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:47:57] "[33mGET /api/project-managers?bypass_jwt=true&_=1747100877543 HTTP/1.1[0m" 404 -
2025-05-13 09:47:57,548 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:47:57] "[36mGET /static/favicon.ico HTTP/1.1[0m" 304 -
2025-05-13 09:47:57,557 - app - WARNING - 绕过JWT验证: /api/global/project-managers
2025-05-13 09:47:57,560 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:47:57] "GET /api/global/project-managers?bypass_jwt=true&_=1747100877543 HTTP/1.1" 200 -
2025-05-13 09:48:03,449 - app - WARNING - 绕过JWT验证: /projects/detail/14
2025-05-13 09:48:03,449 - app - INFO - 直接调用项目详情视图函数，不进行重定向: 项目ID=14
2025-05-13 09:48:03,449 - app.utils.jwt_callbacks - WARNING - JWT验证已被绕过: /projects/detail/14
2025-05-13 09:48:03,449 - app.utils.jwt_callbacks - WARNING - 使用bypass_jwt返回默认用户ID: 1
2025-05-13 09:48:03,451 - app.routes.projects - INFO - 获取项目 14 详情页面 - 用户ID: 1, URL: http://127.0.0.1:5000/projects/detail/14?no_redirect=true&bypass_jwt=true
2025-05-13 09:48:03,457 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:48:03] "GET /projects/detail/14?no_redirect=true&bypass_jwt=true HTTP/1.1" 200 -
2025-05-13 09:48:03,492 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:48:03] "[36mGET /static/css/bootstrap.min.css HTTP/1.1[0m" 304 -
2025-05-13 09:48:03,494 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:48:03] "[36mGET /static/css/bootstrap-icons.css HTTP/1.1[0m" 304 -
2025-05-13 09:48:03,497 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:48:03] "[36mGET /static/css/style.css HTTP/1.1[0m" 304 -
2025-05-13 09:48:03,497 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:48:03] "[36mGET /static/js/jquery.min.js HTTP/1.1[0m" 304 -
2025-05-13 09:48:03,498 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:48:03] "[36mGET /static/js/bootstrap.bundle.min.js HTTP/1.1[0m" 304 -
2025-05-13 09:48:03,500 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:48:03] "[36mGET /static/js/utils.js HTTP/1.1[0m" 304 -
2025-05-13 09:48:03,502 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:48:03] "[36mGET /static/js/auth.js HTTP/1.1[0m" 304 -
2025-05-13 09:48:03,505 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:48:03] "[36mGET /static/js/fix-modals.js HTTP/1.1[0m" 304 -
2025-05-13 09:48:03,505 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:48:03] "[36mGET /static/js/csrf.js HTTP/1.1[0m" 304 -
2025-05-13 09:48:03,505 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:48:03] "[36mGET /static/js/user-profile.js HTTP/1.1[0m" 304 -
2025-05-13 09:48:03,533 - app - WARNING - 绕过JWT验证: /api/global/users
2025-05-13 09:48:03,534 - app - WARNING - 绕过JWT验证: /api/projects/14/risks
2025-05-13 09:48:03,535 - app - WARNING - 绕过JWT验证: /api/global/users
2025-05-13 09:48:03,536 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:48:03] "[33mGET /api/projects/14/risks?bypass_jwt=true&_=1747100883528 HTTP/1.1[0m" 404 -
2025-05-13 09:48:03,589 - app - WARNING - 绕过JWT验证: /api/projects/14/risks
2025-05-13 09:48:03,589 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:48:03] "GET /api/global/users?bypass_jwt=true&_=1747100883528 HTTP/1.1" 200 -
2025-05-13 09:48:03,591 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:48:03] "[36mGET /static/favicon.ico HTTP/1.1[0m" 304 -
2025-05-13 09:48:03,591 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:48:03] "[33mGET /api/projects/14/risks?bypass_jwt=true&_=1747100883529 HTTP/1.1[0m" 404 -
2025-05-13 09:48:03,591 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:48:03] "GET /api/global/users?bypass_jwt=true&_=1747100883529 HTTP/1.1" 200 -
2025-05-13 09:48:03,599 - app - WARNING - 绕过JWT验证: /api/risks
2025-05-13 09:48:03,599 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:48:03] "[33mGET /api/risks?project_id=14&bypass_jwt=true&_=1747100883528 HTTP/1.1[0m" 404 -
2025-05-13 09:48:03,600 - app - WARNING - 绕过JWT验证: /api/risks
2025-05-13 09:48:03,600 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:48:03] "[33mGET /api/risks?project_id=14&bypass_jwt=true&_=1747100883529 HTTP/1.1[0m" 404 -
2025-05-13 09:48:03,605 - app - WARNING - 绕过JWT验证: /api/auth/risks
2025-05-13 09:48:03,605 - app - WARNING - 绕过JWT验证: /api/auth/risks
2025-05-13 09:48:03,606 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:48:03] "[33mGET /api/auth/risks?project_id=14&bypass_jwt=true&_=1747100883528 HTTP/1.1[0m" 404 -
2025-05-13 09:48:03,606 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:48:03] "[33mGET /api/auth/risks?project_id=14&bypass_jwt=true&_=1747100883529 HTTP/1.1[0m" 404 -
2025-05-13 09:48:03,612 - app - WARNING - 绕过JWT验证: /api/noauth/risks
2025-05-13 09:48:03,612 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:48:03] "[33mGET /api/noauth/risks?project_id=14&bypass_jwt=true&_=1747100883528 HTTP/1.1[0m" 404 -
2025-05-13 09:48:03,612 - app - WARNING - 绕过JWT验证: /api/noauth/risks
2025-05-13 09:48:03,614 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:48:03] "[33mGET /api/noauth/risks?project_id=14&bypass_jwt=true&_=1747100883529 HTTP/1.1[0m" 404 -
2025-05-13 09:48:05,159 - app - WARNING - 绕过JWT验证: /api/global/users
2025-05-13 09:48:05,160 - app - WARNING - 绕过JWT验证: /api/global/users
2025-05-13 09:48:05,162 - app - WARNING - 绕过JWT验证: /api/global/users
2025-05-13 09:48:05,163 - app - WARNING - 绕过JWT验证: /api/global/users
2025-05-13 09:48:05,165 - app - WARNING - 绕过JWT验证: /api/global/users
2025-05-13 09:48:05,165 - app - WARNING - 绕过JWT验证: /api/global/users
2025-05-13 09:48:05,167 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:48:05] "GET /api/global/users?bypass_jwt=true&_=1747100885157 HTTP/1.1" 200 -
2025-05-13 09:48:05,167 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:48:05] "GET /api/global/users?bypass_jwt=true&_=1747100885158 HTTP/1.1" 200 -
2025-05-13 09:48:05,169 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:48:05] "GET /api/global/users?bypass_jwt=true&_=1747100885162 HTTP/1.1" 200 -
2025-05-13 09:48:05,171 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:48:05] "GET /api/global/users?bypass_jwt=true&_=1747100885159 HTTP/1.1" 200 -
2025-05-13 09:48:05,171 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:48:05] "GET /api/global/users?bypass_jwt=true&_=1747100885160 HTTP/1.1" 200 -
2025-05-13 09:48:05,172 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:48:05] "GET /api/global/users?bypass_jwt=true&_=1747100885161 HTTP/1.1" 200 -
2025-05-13 09:48:05,175 - app - WARNING - 绕过JWT验证: /api/global/users
2025-05-13 09:48:05,180 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:48:05] "GET /api/global/users?bypass_jwt=true&_=1747100885159 HTTP/1.1" 200 -
2025-05-13 09:48:24,325 - app - WARNING - 绕过JWT验证: /api/noauth/projects/14
2025-05-13 09:48:24,325 - app.routes.projects - INFO - 无需认证更新项目API: 项目ID=14
2025-05-13 09:48:24,334 - app.routes.projects - INFO - 项目更新成功: 项目ID=14
2025-05-13 09:48:24,335 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:48:24] "PUT /api/noauth/projects/14?bypass_jwt=true&_=1747100904319 HTTP/1.1" 200 -
2025-05-13 09:48:25,365 - app - WARNING - 绕过JWT验证: /projects/detail/14
2025-05-13 09:48:25,365 - app - INFO - 直接调用项目详情视图函数，不进行重定向: 项目ID=14
2025-05-13 09:48:25,365 - app.utils.jwt_callbacks - WARNING - JWT验证已被绕过: /projects/detail/14
2025-05-13 09:48:25,366 - app.utils.jwt_callbacks - WARNING - 使用bypass_jwt返回默认用户ID: 1
2025-05-13 09:48:25,366 - app.routes.projects - INFO - 获取项目 14 详情页面 - 用户ID: 1, URL: http://127.0.0.1:5000/projects/detail/14?no_redirect=true&bypass_jwt=true
2025-05-13 09:48:25,372 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:48:25] "GET /projects/detail/14?no_redirect=true&bypass_jwt=true HTTP/1.1" 200 -
2025-05-13 09:48:25,399 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:48:25] "[36mGET /static/css/bootstrap.min.css HTTP/1.1[0m" 304 -
2025-05-13 09:48:25,400 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:48:25] "[36mGET /static/css/bootstrap-icons.css HTTP/1.1[0m" 304 -
2025-05-13 09:48:25,401 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:48:25] "[36mGET /static/css/style.css HTTP/1.1[0m" 304 -
2025-05-13 09:48:25,403 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:48:25] "[36mGET /static/js/jquery.min.js HTTP/1.1[0m" 304 -
2025-05-13 09:48:25,406 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:48:25] "[36mGET /static/js/bootstrap.bundle.min.js HTTP/1.1[0m" 304 -
2025-05-13 09:48:25,407 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:48:25] "[36mGET /static/js/utils.js HTTP/1.1[0m" 304 -
2025-05-13 09:48:25,408 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:48:25] "[36mGET /static/js/auth.js HTTP/1.1[0m" 304 -
2025-05-13 09:48:25,409 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:48:25] "[36mGET /static/js/fix-modals.js HTTP/1.1[0m" 304 -
2025-05-13 09:48:25,413 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:48:25] "[36mGET /static/js/user-profile.js HTTP/1.1[0m" 304 -
2025-05-13 09:48:25,413 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:48:25] "[36mGET /static/js/csrf.js HTTP/1.1[0m" 304 -
2025-05-13 09:48:25,431 - app - WARNING - 绕过JWT验证: /api/global/users
2025-05-13 09:48:25,433 - app - WARNING - 绕过JWT验证: /api/projects/14/risks
2025-05-13 09:48:25,434 - app - WARNING - 绕过JWT验证: /api/global/users
2025-05-13 09:48:25,435 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:48:25] "[33mGET /api/projects/14/risks?bypass_jwt=true&_=1747100905426 HTTP/1.1[0m" 404 -
2025-05-13 09:48:25,435 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:48:25] "GET /api/global/users?bypass_jwt=true&_=1747100905426 HTTP/1.1" 200 -
2025-05-13 09:48:25,436 - app - WARNING - 绕过JWT验证: /api/projects/14/risks
2025-05-13 09:48:25,438 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:48:25] "GET /api/global/users?bypass_jwt=true&_=1747100905427 HTTP/1.1" 200 -
2025-05-13 09:48:25,438 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:48:25] "[33mGET /api/projects/14/risks?bypass_jwt=true&_=1747100905427 HTTP/1.1[0m" 404 -
2025-05-13 09:48:25,441 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:48:25] "[36mGET /static/favicon.ico HTTP/1.1[0m" 304 -
2025-05-13 09:48:25,444 - app - WARNING - 绕过JWT验证: /api/risks
2025-05-13 09:48:25,446 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:48:25] "[33mGET /api/risks?project_id=14&bypass_jwt=true&_=1747100905426 HTTP/1.1[0m" 404 -
2025-05-13 09:48:25,449 - app - WARNING - 绕过JWT验证: /api/risks
2025-05-13 09:48:25,450 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:48:25] "[33mGET /api/risks?project_id=14&bypass_jwt=true&_=1747100905427 HTTP/1.1[0m" 404 -
2025-05-13 09:48:25,452 - app - WARNING - 绕过JWT验证: /api/auth/risks
2025-05-13 09:48:25,452 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:48:25] "[33mGET /api/auth/risks?project_id=14&bypass_jwt=true&_=1747100905426 HTTP/1.1[0m" 404 -
2025-05-13 09:48:25,456 - app - WARNING - 绕过JWT验证: /api/auth/risks
2025-05-13 09:48:25,457 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:48:25] "[33mGET /api/auth/risks?project_id=14&bypass_jwt=true&_=1747100905427 HTTP/1.1[0m" 404 -
2025-05-13 09:48:25,457 - app - WARNING - 绕过JWT验证: /api/noauth/risks
2025-05-13 09:48:25,458 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:48:25] "[33mGET /api/noauth/risks?project_id=14&bypass_jwt=true&_=1747100905426 HTTP/1.1[0m" 404 -
2025-05-13 09:48:25,463 - app - WARNING - 绕过JWT验证: /api/noauth/risks
2025-05-13 09:48:25,464 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:48:25] "[33mGET /api/noauth/risks?project_id=14&bypass_jwt=true&_=1747100905427 HTTP/1.1[0m" 404 -
2025-05-13 09:48:41,531 - app - WARNING - 绕过JWT验证: /api/tasks
2025-05-13 09:48:41,532 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 09:48:41] "[33mPOST /api/tasks?bypass_jwt=true HTTP/1.1[0m" 404 -
2025-05-13 09:50:58,008 - werkzeug - INFO -  * Detected change in 'D:\\tmp\\work\\app\\__init__.py', reloading
2025-05-13 09:50:58,293 - werkzeug - INFO -  * Restarting with stat
2025-05-13 09:50:59,313 - app.utils.permissions - INFO - 更新权限: manage_users
2025-05-13 09:50:59,314 - app.utils.permissions - INFO - 更新权限: manage_roles
2025-05-13 09:50:59,314 - app.utils.permissions - INFO - 更新权限: manage_all_projects
2025-05-13 09:50:59,314 - app.utils.permissions - INFO - 更新权限: manage_project
2025-05-13 09:50:59,316 - app.utils.permissions - INFO - 更新权限: manage_all_tasks
2025-05-13 09:50:59,316 - app.utils.permissions - INFO - 更新权限: manage_task
2025-05-13 09:50:59,317 - app.utils.permissions - INFO - 更新权限: view_project
2025-05-13 09:50:59,317 - app.utils.permissions - INFO - 更新权限: view_task
2025-05-13 09:50:59,317 - app.utils.permissions - INFO - 更新权限: manage_resources
2025-05-13 09:50:59,317 - app.utils.permissions - INFO - 更新权限: manage_risks
2025-05-13 09:50:59,318 - app.utils.permissions - INFO - 更新权限: view_reports
2025-05-13 09:50:59,318 - app.utils.permissions - INFO - 更新权限: create_task
2025-05-13 09:50:59,318 - app.utils.permissions - INFO - 更新权限: create_project
2025-05-13 09:50:59,319 - app.utils.permissions - INFO - 更新权限: assign_task
2025-05-13 09:50:59,319 - app.utils.permissions - INFO - 更新权限: change_project_status
2025-05-13 09:50:59,320 - app.utils.permissions - INFO - 更新权限: change_task_status
2025-05-13 09:50:59,322 - app.utils.permissions - INFO - 更新角色: admin
2025-05-13 09:50:59,323 - app.utils.permissions - INFO - 为管理员角色添加所有权限: 16个
2025-05-13 09:50:59,325 - app.utils.permissions - INFO - 更新角色: manager
2025-05-13 09:50:59,326 - app.utils.permissions - INFO - 为角色 manager 添加权限: manage_project
2025-05-13 09:50:59,326 - app.utils.permissions - INFO - 为角色 manager 添加权限: manage_task
2025-05-13 09:50:59,326 - app.utils.permissions - INFO - 为角色 manager 添加权限: view_project
2025-05-13 09:50:59,326 - app.utils.permissions - INFO - 为角色 manager 添加权限: view_task
2025-05-13 09:50:59,326 - app.utils.permissions - INFO - 为角色 manager 添加权限: manage_resources
2025-05-13 09:50:59,326 - app.utils.permissions - INFO - 为角色 manager 添加权限: manage_risks
2025-05-13 09:50:59,326 - app.utils.permissions - INFO - 为角色 manager 添加权限: view_reports
2025-05-13 09:50:59,326 - app.utils.permissions - INFO - 为角色 manager 添加权限: create_project
2025-05-13 09:50:59,326 - app.utils.permissions - INFO - 为角色 manager 添加权限: create_task
2025-05-13 09:50:59,326 - app.utils.permissions - INFO - 为角色 manager 添加权限: assign_task
2025-05-13 09:50:59,326 - app.utils.permissions - INFO - 为角色 manager 添加权限: change_project_status
2025-05-13 09:50:59,326 - app.utils.permissions - INFO - 为角色 manager 添加权限: change_task_status
2025-05-13 09:50:59,327 - app.utils.permissions - INFO - 更新角色: user
2025-05-13 09:50:59,327 - app.utils.permissions - INFO - 为角色 user 添加权限: view_project
2025-05-13 09:50:59,327 - app.utils.permissions - INFO - 为角色 user 添加权限: view_task
2025-05-13 09:50:59,327 - app.utils.permissions - INFO - 为角色 user 添加权限: view_reports
2025-05-13 09:50:59,328 - app.utils.permissions - INFO - 角色和权限初始化完成
2025-05-13 09:50:59,328 - __main__ - INFO - 角色和权限初始化成功
2025-05-13 09:50:59,330 - __main__ - INFO - 数据库初始化完成
2025-05-13 09:50:59,342 - __main__ - INFO - 系统资源检查完成
2025-05-13 09:50:59,343 - __main__ - INFO - 开始清理旧数据
2025-05-13 09:50:59,344 - __main__ - INFO - 删除了 0 条过期的资源使用记录
2025-05-13 09:50:59,345 - __main__ - INFO - 删除了 0 条已解决的过期警报
2025-05-13 09:50:59,345 - __main__ - INFO - 旧数据清理完成
2025-05-13 09:50:59,353 - werkzeug - WARNING -  * Debugger is active!
2025-05-13 09:50:59,355 - werkzeug - INFO -  * Debugger PIN: 670-037-726
2025-05-13 10:35:24,286 - werkzeug - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2025-05-13 10:35:24,286 - werkzeug - INFO - [33mPress CTRL+C to quit[0m
2025-05-13 16:34:18,577 - app.utils.permissions - INFO - 更新权限: manage_users
2025-05-13 16:34:18,579 - app.utils.permissions - INFO - 更新权限: manage_roles
2025-05-13 16:34:18,579 - app.utils.permissions - INFO - 更新权限: manage_all_projects
2025-05-13 16:34:18,580 - app.utils.permissions - INFO - 更新权限: manage_project
2025-05-13 16:34:18,580 - app.utils.permissions - INFO - 更新权限: manage_all_tasks
2025-05-13 16:34:18,581 - app.utils.permissions - INFO - 更新权限: manage_task
2025-05-13 16:34:18,581 - app.utils.permissions - INFO - 更新权限: view_project
2025-05-13 16:34:18,582 - app.utils.permissions - INFO - 更新权限: view_task
2025-05-13 16:34:18,582 - app.utils.permissions - INFO - 更新权限: manage_resources
2025-05-13 16:34:18,582 - app.utils.permissions - INFO - 更新权限: manage_risks
2025-05-13 16:34:18,582 - app.utils.permissions - INFO - 更新权限: view_reports
2025-05-13 16:34:18,583 - app.utils.permissions - INFO - 更新权限: create_task
2025-05-13 16:34:18,583 - app.utils.permissions - INFO - 更新权限: create_project
2025-05-13 16:34:18,584 - app.utils.permissions - INFO - 更新权限: assign_task
2025-05-13 16:34:18,584 - app.utils.permissions - INFO - 更新权限: change_project_status
2025-05-13 16:34:18,585 - app.utils.permissions - INFO - 更新权限: change_task_status
2025-05-13 16:34:18,586 - app.utils.permissions - INFO - 更新角色: admin
2025-05-13 16:34:18,588 - app.utils.permissions - INFO - 为管理员角色添加所有权限: 16个
2025-05-13 16:34:18,588 - app.utils.permissions - INFO - 更新角色: manager
2025-05-13 16:34:18,589 - app.utils.permissions - INFO - 为角色 manager 添加权限: manage_project
2025-05-13 16:34:18,589 - app.utils.permissions - INFO - 为角色 manager 添加权限: manage_task
2025-05-13 16:34:18,590 - app.utils.permissions - INFO - 为角色 manager 添加权限: view_project
2025-05-13 16:34:18,590 - app.utils.permissions - INFO - 为角色 manager 添加权限: view_task
2025-05-13 16:34:18,590 - app.utils.permissions - INFO - 为角色 manager 添加权限: manage_resources
2025-05-13 16:34:18,590 - app.utils.permissions - INFO - 为角色 manager 添加权限: manage_risks
2025-05-13 16:34:18,590 - app.utils.permissions - INFO - 为角色 manager 添加权限: view_reports
2025-05-13 16:34:18,590 - app.utils.permissions - INFO - 为角色 manager 添加权限: create_project
2025-05-13 16:34:18,590 - app.utils.permissions - INFO - 为角色 manager 添加权限: create_task
2025-05-13 16:34:18,590 - app.utils.permissions - INFO - 为角色 manager 添加权限: assign_task
2025-05-13 16:34:18,590 - app.utils.permissions - INFO - 为角色 manager 添加权限: change_project_status
2025-05-13 16:34:18,592 - app.utils.permissions - INFO - 为角色 manager 添加权限: change_task_status
2025-05-13 16:34:18,592 - app.utils.permissions - INFO - 更新角色: user
2025-05-13 16:34:18,593 - app.utils.permissions - INFO - 为角色 user 添加权限: view_project
2025-05-13 16:34:18,593 - app.utils.permissions - INFO - 为角色 user 添加权限: view_task
2025-05-13 16:34:18,593 - app.utils.permissions - INFO - 为角色 user 添加权限: view_reports
2025-05-13 16:34:18,593 - app.utils.permissions - INFO - 角色和权限初始化完成
2025-05-13 16:34:18,593 - __main__ - INFO - 角色和权限初始化成功
2025-05-13 16:34:18,597 - __main__ - INFO - 数据库初始化完成
2025-05-13 16:34:18,607 - __main__ - INFO - 系统资源检查完成
2025-05-13 16:34:18,608 - __main__ - INFO - 开始清理旧数据
2025-05-13 16:34:18,610 - __main__ - INFO - 删除了 0 条过期的资源使用记录
2025-05-13 16:34:18,611 - __main__ - INFO - 删除了 0 条已解决的过期警报
2025-05-13 16:34:18,611 - __main__ - INFO - 旧数据清理完成
2025-05-13 16:34:18,645 - werkzeug - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:5000
 * Running on http://192.168.0.66:5000
2025-05-13 16:34:18,646 - werkzeug - INFO - [33mPress CTRL+C to quit[0m
2025-05-13 16:34:18,646 - werkzeug - INFO -  * Restarting with stat
2025-05-13 16:34:19,676 - app.utils.permissions - INFO - 更新权限: manage_users
2025-05-13 16:34:19,677 - app.utils.permissions - INFO - 更新权限: manage_roles
2025-05-13 16:34:19,677 - app.utils.permissions - INFO - 更新权限: manage_all_projects
2025-05-13 16:34:19,679 - app.utils.permissions - INFO - 更新权限: manage_project
2025-05-13 16:34:19,679 - app.utils.permissions - INFO - 更新权限: manage_all_tasks
2025-05-13 16:34:19,680 - app.utils.permissions - INFO - 更新权限: manage_task
2025-05-13 16:34:19,680 - app.utils.permissions - INFO - 更新权限: view_project
2025-05-13 16:34:19,680 - app.utils.permissions - INFO - 更新权限: view_task
2025-05-13 16:34:19,681 - app.utils.permissions - INFO - 更新权限: manage_resources
2025-05-13 16:34:19,681 - app.utils.permissions - INFO - 更新权限: manage_risks
2025-05-13 16:34:19,681 - app.utils.permissions - INFO - 更新权限: view_reports
2025-05-13 16:34:19,682 - app.utils.permissions - INFO - 更新权限: create_task
2025-05-13 16:34:19,682 - app.utils.permissions - INFO - 更新权限: create_project
2025-05-13 16:34:19,682 - app.utils.permissions - INFO - 更新权限: assign_task
2025-05-13 16:34:19,683 - app.utils.permissions - INFO - 更新权限: change_project_status
2025-05-13 16:34:19,683 - app.utils.permissions - INFO - 更新权限: change_task_status
2025-05-13 16:34:19,685 - app.utils.permissions - INFO - 更新角色: admin
2025-05-13 16:34:19,687 - app.utils.permissions - INFO - 为管理员角色添加所有权限: 16个
2025-05-13 16:34:19,689 - app.utils.permissions - INFO - 更新角色: manager
2025-05-13 16:34:19,689 - app.utils.permissions - INFO - 为角色 manager 添加权限: manage_project
2025-05-13 16:34:19,690 - app.utils.permissions - INFO - 为角色 manager 添加权限: manage_task
2025-05-13 16:34:19,690 - app.utils.permissions - INFO - 为角色 manager 添加权限: view_project
2025-05-13 16:34:19,690 - app.utils.permissions - INFO - 为角色 manager 添加权限: view_task
2025-05-13 16:34:19,690 - app.utils.permissions - INFO - 为角色 manager 添加权限: manage_resources
2025-05-13 16:34:19,690 - app.utils.permissions - INFO - 为角色 manager 添加权限: manage_risks
2025-05-13 16:34:19,691 - app.utils.permissions - INFO - 为角色 manager 添加权限: view_reports
2025-05-13 16:34:19,691 - app.utils.permissions - INFO - 为角色 manager 添加权限: create_project
2025-05-13 16:34:19,691 - app.utils.permissions - INFO - 为角色 manager 添加权限: create_task
2025-05-13 16:34:19,691 - app.utils.permissions - INFO - 为角色 manager 添加权限: assign_task
2025-05-13 16:34:19,691 - app.utils.permissions - INFO - 为角色 manager 添加权限: change_project_status
2025-05-13 16:34:19,691 - app.utils.permissions - INFO - 为角色 manager 添加权限: change_task_status
2025-05-13 16:34:19,692 - app.utils.permissions - INFO - 更新角色: user
2025-05-13 16:34:19,693 - app.utils.permissions - INFO - 为角色 user 添加权限: view_project
2025-05-13 16:34:19,693 - app.utils.permissions - INFO - 为角色 user 添加权限: view_task
2025-05-13 16:34:19,693 - app.utils.permissions - INFO - 为角色 user 添加权限: view_reports
2025-05-13 16:34:19,694 - app.utils.permissions - INFO - 角色和权限初始化完成
2025-05-13 16:34:19,694 - __main__ - INFO - 角色和权限初始化成功
2025-05-13 16:34:19,697 - __main__ - INFO - 数据库初始化完成
2025-05-13 16:34:19,708 - __main__ - INFO - 系统资源检查完成
2025-05-13 16:34:19,708 - __main__ - INFO - 开始清理旧数据
2025-05-13 16:34:19,710 - __main__ - INFO - 删除了 0 条过期的资源使用记录
2025-05-13 16:34:19,712 - __main__ - INFO - 删除了 0 条已解决的过期警报
2025-05-13 16:34:19,712 - __main__ - INFO - 旧数据清理完成
2025-05-13 16:34:19,719 - werkzeug - WARNING -  * Debugger is active!
2025-05-13 16:34:19,720 - werkzeug - INFO -  * Debugger PIN: 670-037-726
2025-05-13 16:34:48,697 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 16:34:48] "GET /login HTTP/1.1" 200 -
2025-05-13 16:34:48,942 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 16:34:48] "GET /static/css/bootstrap.min.css HTTP/1.1" 200 -
2025-05-13 16:34:48,949 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 16:34:48] "GET /static/js/auth.js HTTP/1.1" 200 -
2025-05-13 16:34:48,964 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 16:34:48] "GET /static/images/background.png HTTP/1.1" 200 -
2025-05-13 16:34:48,966 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 16:34:48] "GET /static/css/bootstrap-icons.css HTTP/1.1" 200 -
2025-05-13 16:34:48,972 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 16:34:48] "GET /static/js/jquery.min.js HTTP/1.1" 200 -
2025-05-13 16:34:48,972 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 16:34:48] "GET /static/js/bootstrap.bundle.min.js HTTP/1.1" 200 -
2025-05-13 16:34:48,972 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 16:34:48] "GET /static/js/fix-modals.js HTTP/1.1" 200 -
2025-05-13 16:34:48,973 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 16:34:48] "GET /static/css/style.css HTTP/1.1" 200 -
2025-05-13 16:34:48,976 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 16:34:48] "GET /static/js/utils.js HTTP/1.1" 200 -
2025-05-13 16:34:48,983 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 16:34:48] "GET /static/js/csrf.js HTTP/1.1" 200 -
2025-05-13 16:34:48,994 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 16:34:48] "GET /static/js/user-profile.js HTTP/1.1" 200 -
2025-05-13 16:34:48,996 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 16:34:48] "GET /static/js/background-helper.js HTTP/1.1" 200 -
2025-05-13 16:34:49,007 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 16:34:49] "GET /static/uploads/background.png HTTP/1.1" 200 -
2025-05-13 16:34:49,026 - app - WARNING - 绕过JWT验证: /auth/user_info
2025-05-13 16:34:49,028 - app.utils.jwt_callbacks - WARNING - JWT验证已被绕过: /auth/user_info
2025-05-13 16:34:49,028 - app - INFO - 获取用户信息 - bypass_jwt: True
2025-05-13 16:34:49,028 - app - INFO - 使用默认管理员用户(ID=1)
2025-05-13 16:34:49,044 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 16:34:49] "GET /static/favicon.ico HTTP/1.1" 200 -
2025-05-13 16:34:49,050 - app - INFO - 成功获取用户 admin 的信息
2025-05-13 16:34:49,052 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 16:34:49] "GET /auth/user_info?_=1747125289022&bypass_jwt=true HTTP/1.1" 200 -
2025-05-13 16:34:51,767 - app - INFO - 登录请求 - 方法: POST, 内容类型: application/x-www-form-urlencoded
2025-05-13 16:34:51,768 - app - INFO - 请求头: {'Host': '127.0.0.1:5000', 'Connection': 'keep-alive', 'Content-Length': '135', 'Cache-Control': 'max-age=0', 'Sec-Ch-Ua': '"Chromium";v="136", "Microsoft Edge";v="136", "Not.A/Brand";v="99"', 'Sec-Ch-Ua-Mobile': '?0', 'Sec-Ch-Ua-Platform': '"Windows"', 'Origin': 'http://127.0.0.1:5000', 'Content-Type': 'application/x-www-form-urlencoded', 'Upgrade-Insecure-Requests': '1', 'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36 Edg/136.0.0.0', 'Accept': 'text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.7', 'Sec-Fetch-Site': 'same-origin', 'Sec-Fetch-Mode': 'navigate', 'Sec-Fetch-User': '?1', 'Sec-Fetch-Dest': 'document', 'Referer': 'http://127.0.0.1:5000/login', 'Accept-Encoding': 'gzip, deflate, br, zstd', 'Accept-Language': 'zh-CN,zh;q=0.9,en;q=0.8,en-GB;q=0.7,en-US;q=0.6', 'Cookie': 'session=eyJjc3JmX3Rva2VuIjoiNDQ4MWY0NzhjNDZlZGYxMjI2NjU5NzU0ZjhkNGNkOGJiYzQxMmYzNyJ9.aCMEKA.6UzDvgQU0zWYLICvk6LJllhmjDk; user_roles=admin; is_admin=true; admin=true'}
2025-05-13 16:34:51,769 - app - INFO - 处理表单格式的登录请求
2025-05-13 16:34:51,769 - app - INFO - 表单数据: username=admin, password=********
2025-05-13 16:34:52,250 - app - INFO - 已生成CSRF令牌: IjQ0ODFmND...
2025-05-13 16:34:52,253 - app - INFO - 用户 admin 的角色: ['admin']
2025-05-13 16:34:52,254 - app - INFO - 用户 admin 是否是管理员: True
2025-05-13 16:34:52,280 - app - INFO - 用户登录成功: admin
2025-05-13 16:34:52,282 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 16:34:52] "[32mPOST /auth/login HTTP/1.1[0m" 302 -
2025-05-13 16:34:52,292 - app - DEBUG - Dashboard route accessed
2025-05-13 16:34:52,292 - app - DEBUG - Current user ID: 1
2025-05-13 16:34:52,334 - app - DEBUG - Dashboard data prepared for user: admin
2025-05-13 16:34:52,372 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 16:34:52] "GET /dashboard HTTP/1.1" 200 -
2025-05-13 16:34:52,404 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 16:34:52] "[36mGET /static/css/bootstrap.min.css HTTP/1.1[0m" 304 -
2025-05-13 16:34:52,405 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 16:34:52] "[36mGET /static/css/bootstrap-icons.css HTTP/1.1[0m" 304 -
2025-05-13 16:34:52,407 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 16:34:52] "[36mGET /static/css/style.css HTTP/1.1[0m" 304 -
2025-05-13 16:34:52,411 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 16:34:52] "[36mGET /static/js/jquery.min.js HTTP/1.1[0m" 304 -
2025-05-13 16:34:52,414 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 16:34:52] "[36mGET /static/js/utils.js HTTP/1.1[0m" 304 -
2025-05-13 16:34:52,414 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 16:34:52] "[36mGET /static/js/bootstrap.bundle.min.js HTTP/1.1[0m" 304 -
2025-05-13 16:34:52,414 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 16:34:52] "[36mGET /static/js/auth.js HTTP/1.1[0m" 304 -
2025-05-13 16:34:52,418 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 16:34:52] "[36mGET /static/js/fix-modals.js HTTP/1.1[0m" 304 -
2025-05-13 16:34:52,419 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 16:34:52] "[36mGET /static/js/csrf.js HTTP/1.1[0m" 304 -
2025-05-13 16:34:52,421 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 16:34:52] "[36mGET /static/js/user-profile.js HTTP/1.1[0m" 304 -
2025-05-13 16:34:52,462 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 16:34:52] "GET /static/css/fonts/bootstrap-icons.woff2 HTTP/1.1" 200 -
2025-05-13 16:34:52,484 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 16:34:52] "[36mGET /static/favicon.ico HTTP/1.1[0m" 304 -
2025-05-13 16:34:53,866 - app - WARNING - 绕过JWT验证: /projects
2025-05-13 16:34:53,867 - app.utils.jwt_callbacks - WARNING - JWT验证已被绕过: /projects
2025-05-13 16:34:53,867 - app.routes.main - INFO - JWT bypass enabled for projects - Using test user
2025-05-13 16:34:53,909 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 16:34:53] "GET /projects?bypass_jwt=true HTTP/1.1" 200 -
2025-05-13 16:34:53,936 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 16:34:53] "[36mGET /static/css/bootstrap.min.css HTTP/1.1[0m" 304 -
2025-05-13 16:34:53,940 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 16:34:53] "[36mGET /static/css/bootstrap-icons.css HTTP/1.1[0m" 304 -
2025-05-13 16:34:53,942 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 16:34:53] "[36mGET /static/css/style.css HTTP/1.1[0m" 304 -
2025-05-13 16:34:53,946 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 16:34:53] "[36mGET /static/js/jquery.min.js HTTP/1.1[0m" 304 -
2025-05-13 16:34:53,948 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 16:34:53] "GET /static/css/frappe-gantt.css HTTP/1.1" 200 -
2025-05-13 16:34:53,948 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 16:34:53] "[36mGET /static/js/bootstrap.bundle.min.js HTTP/1.1[0m" 304 -
2025-05-13 16:34:53,949 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 16:34:53] "GET /static/js/frappe-gantt.min.js HTTP/1.1" 200 -
2025-05-13 16:34:53,954 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 16:34:53] "[36mGET /static/js/auth.js HTTP/1.1[0m" 304 -
2025-05-13 16:34:53,955 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 16:34:53] "[36mGET /static/js/utils.js HTTP/1.1[0m" 304 -
2025-05-13 16:34:53,958 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 16:34:53] "[36mGET /static/js/fix-modals.js HTTP/1.1[0m" 304 -
2025-05-13 16:34:53,962 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 16:34:53] "[36mGET /static/js/user-profile.js HTTP/1.1[0m" 304 -
2025-05-13 16:34:53,958 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 16:34:53] "[36mGET /static/js/csrf.js HTTP/1.1[0m" 304 -
2025-05-13 16:34:53,991 - app - WARNING - 绕过JWT验证: /api/global/users
2025-05-13 16:34:53,996 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 16:34:53] "GET /api/global/users?bypass_jwt=true&_=1747125293987 HTTP/1.1" 200 -
2025-05-13 16:34:54,005 - app - WARNING - 绕过JWT验证: /api/project-managers
2025-05-13 16:34:54,006 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 16:34:54] "[36mGET /static/favicon.ico HTTP/1.1[0m" 304 -
2025-05-13 16:34:54,006 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 16:34:54] "[33mGET /api/project-managers?bypass_jwt=true&_=1747125294002 HTTP/1.1[0m" 404 -
2025-05-13 16:34:54,014 - app - WARNING - 绕过JWT验证: /api/global/project-managers
2025-05-13 16:34:54,023 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 16:34:54] "GET /api/global/project-managers?bypass_jwt=true&_=1747125294002 HTTP/1.1" 200 -
2025-05-13 16:34:58,042 - app - WARNING - 绕过JWT验证: /projects/detail/3
2025-05-13 16:34:58,043 - app - INFO - 直接调用项目详情视图函数，不进行重定向: 项目ID=3
2025-05-13 16:34:58,043 - app.utils.jwt_callbacks - WARNING - JWT验证已被绕过: /projects/detail/3
2025-05-13 16:34:58,043 - app.utils.jwt_callbacks - WARNING - 使用bypass_jwt返回默认用户ID: 1
2025-05-13 16:34:58,043 - app.routes.projects - INFO - 获取项目 3 详情页面 - 用户ID: 1, URL: http://127.0.0.1:5000/projects/detail/3?no_redirect=true&bypass_jwt=true
2025-05-13 16:34:58,260 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 16:34:58] "GET /projects/detail/3?no_redirect=true&bypass_jwt=true HTTP/1.1" 200 -
2025-05-13 16:34:58,295 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 16:34:58] "[36mGET /static/css/bootstrap.min.css HTTP/1.1[0m" 304 -
2025-05-13 16:34:58,299 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 16:34:58] "[36mGET /static/css/bootstrap-icons.css HTTP/1.1[0m" 304 -
2025-05-13 16:34:58,299 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 16:34:58] "[36mGET /static/css/style.css HTTP/1.1[0m" 304 -
2025-05-13 16:34:58,301 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 16:34:58] "[36mGET /static/js/jquery.min.js HTTP/1.1[0m" 304 -
2025-05-13 16:34:58,305 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 16:34:58] "[36mGET /static/js/bootstrap.bundle.min.js HTTP/1.1[0m" 304 -
2025-05-13 16:34:58,312 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 16:34:58] "[36mGET /static/js/auth.js HTTP/1.1[0m" 304 -
2025-05-13 16:34:58,314 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 16:34:58] "[36mGET /static/js/fix-modals.js HTTP/1.1[0m" 304 -
2025-05-13 16:34:58,316 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 16:34:58] "[36mGET /static/js/utils.js HTTP/1.1[0m" 304 -
2025-05-13 16:34:58,317 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 16:34:58] "[36mGET /static/js/csrf.js HTTP/1.1[0m" 304 -
2025-05-13 16:34:58,319 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 16:34:58] "[36mGET /static/js/user-profile.js HTTP/1.1[0m" 304 -
2025-05-13 16:34:58,349 - app - WARNING - 绕过JWT验证: /api/global/users
2025-05-13 16:34:58,350 - app - WARNING - 绕过JWT验证: /api/projects/3/risks
2025-05-13 16:34:58,352 - app - WARNING - 绕过JWT验证: /api/global/users
2025-05-13 16:34:58,352 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 16:34:58] "[33mGET /api/projects/3/risks?bypass_jwt=true&_=1747125298344 HTTP/1.1[0m" 404 -
2025-05-13 16:34:58,353 - app - WARNING - 绕过JWT验证: /api/projects/3/risks
2025-05-13 16:34:58,353 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 16:34:58] "GET /api/global/users?bypass_jwt=true&_=1747125298344 HTTP/1.1" 200 -
2025-05-13 16:34:58,355 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 16:34:58] "[33mGET /api/projects/3/risks?bypass_jwt=true&_=1747125298345 HTTP/1.1[0m" 404 -
2025-05-13 16:34:58,356 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 16:34:58] "GET /api/global/users?bypass_jwt=true&_=1747125298345 HTTP/1.1" 200 -
2025-05-13 16:34:58,360 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 16:34:58] "[36mGET /static/favicon.ico HTTP/1.1[0m" 304 -
2025-05-13 16:34:58,362 - app - WARNING - 绕过JWT验证: /api/risks
2025-05-13 16:34:58,365 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 16:34:58] "[33mGET /api/risks?project_id=3&bypass_jwt=true&_=1747125298344 HTTP/1.1[0m" 404 -
2025-05-13 16:34:58,366 - app - WARNING - 绕过JWT验证: /api/risks
2025-05-13 16:34:58,367 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 16:34:58] "[33mGET /api/risks?project_id=3&bypass_jwt=true&_=1747125298345 HTTP/1.1[0m" 404 -
2025-05-13 16:34:58,374 - app - WARNING - 绕过JWT验证: /api/auth/risks
2025-05-13 16:34:58,375 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 16:34:58] "[33mGET /api/auth/risks?project_id=3&bypass_jwt=true&_=1747125298344 HTTP/1.1[0m" 404 -
2025-05-13 16:34:58,376 - app - WARNING - 绕过JWT验证: /api/auth/risks
2025-05-13 16:34:58,377 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 16:34:58] "[33mGET /api/auth/risks?project_id=3&bypass_jwt=true&_=1747125298345 HTTP/1.1[0m" 404 -
2025-05-13 16:34:58,383 - app - WARNING - 绕过JWT验证: /api/noauth/risks
2025-05-13 16:34:58,384 - app - WARNING - 绕过JWT验证: /api/noauth/risks
2025-05-13 16:34:58,385 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 16:34:58] "[33mGET /api/noauth/risks?project_id=3&bypass_jwt=true&_=1747125298344 HTTP/1.1[0m" 404 -
2025-05-13 16:34:58,386 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 16:34:58] "[33mGET /api/noauth/risks?project_id=3&bypass_jwt=true&_=1747125298345 HTTP/1.1[0m" 404 -
2025-05-13 16:35:00,006 - app - WARNING - 绕过JWT验证: /api/global/users
2025-05-13 16:35:00,007 - app - WARNING - 绕过JWT验证: /api/global/users
2025-05-13 16:35:00,009 - app - WARNING - 绕过JWT验证: /api/global/users
2025-05-13 16:35:00,011 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 16:35:00] "GET /api/global/users?bypass_jwt=true&_=1747125300003 HTTP/1.1" 200 -
2025-05-13 16:35:00,014 - app - WARNING - 绕过JWT验证: /api/global/users
2025-05-13 16:35:00,015 - app - WARNING - 绕过JWT验证: /api/global/users
2025-05-13 16:35:00,020 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 16:35:00] "GET /api/global/users?bypass_jwt=true&_=1747125300005 HTTP/1.1" 200 -
2025-05-13 16:35:00,022 - app - WARNING - 绕过JWT验证: /api/global/users
2025-05-13 16:35:00,025 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 16:35:00] "GET /api/global/users?bypass_jwt=true&_=1747125300004 HTTP/1.1" 200 -
2025-05-13 16:35:00,030 - app - WARNING - 绕过JWT验证: /api/global/users
2025-05-13 16:35:00,032 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 16:35:00] "GET /api/global/users?bypass_jwt=true&_=1747125300006 HTTP/1.1" 200 -
2025-05-13 16:35:00,033 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 16:35:00] "GET /api/global/users?bypass_jwt=true&_=1747125300007 HTTP/1.1" 200 -
2025-05-13 16:35:00,038 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 16:35:00] "GET /api/global/users?bypass_jwt=true&_=1747125300008 HTTP/1.1" 200 -
2025-05-13 16:35:00,040 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 16:35:00] "GET /api/global/users?bypass_jwt=true&_=1747125300005 HTTP/1.1" 200 -
2025-05-13 16:37:06,346 - werkzeug - INFO -  * Detected change in 'D:\\tmp\\work\\app\\routes\\projects.py', reloading
2025-05-13 16:37:06,569 - werkzeug - INFO -  * Restarting with stat
2025-05-13 16:37:07,677 - app.utils.permissions - INFO - 更新权限: manage_users
2025-05-13 16:37:07,678 - app.utils.permissions - INFO - 更新权限: manage_roles
2025-05-13 16:37:07,678 - app.utils.permissions - INFO - 更新权限: manage_all_projects
2025-05-13 16:37:07,679 - app.utils.permissions - INFO - 更新权限: manage_project
2025-05-13 16:37:07,679 - app.utils.permissions - INFO - 更新权限: manage_all_tasks
2025-05-13 16:37:07,679 - app.utils.permissions - INFO - 更新权限: manage_task
2025-05-13 16:37:07,680 - app.utils.permissions - INFO - 更新权限: view_project
2025-05-13 16:37:07,680 - app.utils.permissions - INFO - 更新权限: view_task
2025-05-13 16:37:07,681 - app.utils.permissions - INFO - 更新权限: manage_resources
2025-05-13 16:37:07,681 - app.utils.permissions - INFO - 更新权限: manage_risks
2025-05-13 16:37:07,681 - app.utils.permissions - INFO - 更新权限: view_reports
2025-05-13 16:37:07,682 - app.utils.permissions - INFO - 更新权限: create_task
2025-05-13 16:37:07,682 - app.utils.permissions - INFO - 更新权限: create_project
2025-05-13 16:37:07,683 - app.utils.permissions - INFO - 更新权限: assign_task
2025-05-13 16:37:07,683 - app.utils.permissions - INFO - 更新权限: change_project_status
2025-05-13 16:37:07,683 - app.utils.permissions - INFO - 更新权限: change_task_status
2025-05-13 16:37:07,685 - app.utils.permissions - INFO - 更新角色: admin
2025-05-13 16:37:07,687 - app.utils.permissions - INFO - 为管理员角色添加所有权限: 16个
2025-05-13 16:37:07,688 - app.utils.permissions - INFO - 更新角色: manager
2025-05-13 16:37:07,689 - app.utils.permissions - INFO - 为角色 manager 添加权限: manage_project
2025-05-13 16:37:07,689 - app.utils.permissions - INFO - 为角色 manager 添加权限: manage_task
2025-05-13 16:37:07,689 - app.utils.permissions - INFO - 为角色 manager 添加权限: view_project
2025-05-13 16:37:07,689 - app.utils.permissions - INFO - 为角色 manager 添加权限: view_task
2025-05-13 16:37:07,689 - app.utils.permissions - INFO - 为角色 manager 添加权限: manage_resources
2025-05-13 16:37:07,689 - app.utils.permissions - INFO - 为角色 manager 添加权限: manage_risks
2025-05-13 16:37:07,689 - app.utils.permissions - INFO - 为角色 manager 添加权限: view_reports
2025-05-13 16:37:07,689 - app.utils.permissions - INFO - 为角色 manager 添加权限: create_project
2025-05-13 16:37:07,689 - app.utils.permissions - INFO - 为角色 manager 添加权限: create_task
2025-05-13 16:37:07,690 - app.utils.permissions - INFO - 为角色 manager 添加权限: assign_task
2025-05-13 16:37:07,690 - app.utils.permissions - INFO - 为角色 manager 添加权限: change_project_status
2025-05-13 16:37:07,690 - app.utils.permissions - INFO - 为角色 manager 添加权限: change_task_status
2025-05-13 16:37:07,690 - app.utils.permissions - INFO - 更新角色: user
2025-05-13 16:37:07,691 - app.utils.permissions - INFO - 为角色 user 添加权限: view_project
2025-05-13 16:37:07,691 - app.utils.permissions - INFO - 为角色 user 添加权限: view_task
2025-05-13 16:37:07,691 - app.utils.permissions - INFO - 为角色 user 添加权限: view_reports
2025-05-13 16:37:07,691 - app.utils.permissions - INFO - 角色和权限初始化完成
2025-05-13 16:37:07,692 - __main__ - INFO - 角色和权限初始化成功
2025-05-13 16:37:07,694 - __main__ - INFO - 数据库初始化完成
2025-05-13 16:37:07,708 - __main__ - INFO - 系统资源检查完成
2025-05-13 16:37:07,708 - __main__ - INFO - 开始清理旧数据
2025-05-13 16:37:07,709 - __main__ - INFO - 删除了 0 条过期的资源使用记录
2025-05-13 16:37:07,710 - __main__ - INFO - 删除了 0 条已解决的过期警报
2025-05-13 16:37:07,711 - __main__ - INFO - 旧数据清理完成
2025-05-13 16:37:07,719 - werkzeug - WARNING -  * Debugger is active!
2025-05-13 16:37:07,723 - werkzeug - INFO -  * Debugger PIN: 670-037-726
2025-05-13 16:37:55,607 - app.utils.permissions - INFO - 更新权限: manage_users
2025-05-13 16:37:55,608 - app.utils.permissions - INFO - 更新权限: manage_roles
2025-05-13 16:37:55,609 - app.utils.permissions - INFO - 更新权限: manage_all_projects
2025-05-13 16:37:55,609 - app.utils.permissions - INFO - 更新权限: manage_project
2025-05-13 16:37:55,609 - app.utils.permissions - INFO - 更新权限: manage_all_tasks
2025-05-13 16:37:55,610 - app.utils.permissions - INFO - 更新权限: manage_task
2025-05-13 16:37:55,610 - app.utils.permissions - INFO - 更新权限: view_project
2025-05-13 16:37:55,610 - app.utils.permissions - INFO - 更新权限: view_task
2025-05-13 16:37:55,611 - app.utils.permissions - INFO - 更新权限: manage_resources
2025-05-13 16:37:55,611 - app.utils.permissions - INFO - 更新权限: manage_risks
2025-05-13 16:37:55,612 - app.utils.permissions - INFO - 更新权限: view_reports
2025-05-13 16:37:55,613 - app.utils.permissions - INFO - 更新权限: create_task
2025-05-13 16:37:55,613 - app.utils.permissions - INFO - 更新权限: create_project
2025-05-13 16:37:55,614 - app.utils.permissions - INFO - 更新权限: assign_task
2025-05-13 16:37:55,614 - app.utils.permissions - INFO - 更新权限: change_project_status
2025-05-13 16:37:55,615 - app.utils.permissions - INFO - 更新权限: change_task_status
2025-05-13 16:37:55,617 - app.utils.permissions - INFO - 更新角色: admin
2025-05-13 16:37:55,621 - app.utils.permissions - INFO - 为管理员角色添加所有权限: 16个
2025-05-13 16:37:55,622 - app.utils.permissions - INFO - 更新角色: manager
2025-05-13 16:37:55,623 - app.utils.permissions - INFO - 为角色 manager 添加权限: manage_project
2025-05-13 16:37:55,623 - app.utils.permissions - INFO - 为角色 manager 添加权限: manage_task
2025-05-13 16:37:55,623 - app.utils.permissions - INFO - 为角色 manager 添加权限: view_project
2025-05-13 16:37:55,623 - app.utils.permissions - INFO - 为角色 manager 添加权限: view_task
2025-05-13 16:37:55,623 - app.utils.permissions - INFO - 为角色 manager 添加权限: manage_resources
2025-05-13 16:37:55,623 - app.utils.permissions - INFO - 为角色 manager 添加权限: manage_risks
2025-05-13 16:37:55,623 - app.utils.permissions - INFO - 为角色 manager 添加权限: view_reports
2025-05-13 16:37:55,624 - app.utils.permissions - INFO - 为角色 manager 添加权限: create_project
2025-05-13 16:37:55,624 - app.utils.permissions - INFO - 为角色 manager 添加权限: create_task
2025-05-13 16:37:55,624 - app.utils.permissions - INFO - 为角色 manager 添加权限: assign_task
2025-05-13 16:37:55,624 - app.utils.permissions - INFO - 为角色 manager 添加权限: change_project_status
2025-05-13 16:37:55,624 - app.utils.permissions - INFO - 为角色 manager 添加权限: change_task_status
2025-05-13 16:37:55,626 - app.utils.permissions - INFO - 更新角色: user
2025-05-13 16:37:55,628 - app.utils.permissions - INFO - 为角色 user 添加权限: view_project
2025-05-13 16:37:55,628 - app.utils.permissions - INFO - 为角色 user 添加权限: view_task
2025-05-13 16:37:55,629 - app.utils.permissions - INFO - 为角色 user 添加权限: view_reports
2025-05-13 16:37:55,631 - app.utils.permissions - INFO - 角色和权限初始化完成
2025-05-13 16:37:55,631 - __main__ - INFO - 角色和权限初始化成功
2025-05-13 16:37:55,635 - __main__ - INFO - 数据库初始化完成
2025-05-13 16:37:55,645 - __main__ - INFO - 系统资源检查完成
2025-05-13 16:37:55,646 - __main__ - INFO - 开始清理旧数据
2025-05-13 16:37:55,647 - __main__ - INFO - 删除了 0 条过期的资源使用记录
2025-05-13 16:37:55,648 - __main__ - INFO - 删除了 0 条已解决的过期警报
2025-05-13 16:37:55,648 - __main__ - INFO - 旧数据清理完成
2025-05-13 16:37:55,663 - werkzeug - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:5000
 * Running on http://192.168.0.66:5000
2025-05-13 16:37:55,663 - werkzeug - INFO - [33mPress CTRL+C to quit[0m
2025-05-13 16:37:55,664 - werkzeug - INFO -  * Restarting with stat
2025-05-13 16:37:56,589 - app.utils.permissions - INFO - 更新权限: manage_users
2025-05-13 16:37:56,590 - app.utils.permissions - INFO - 更新权限: manage_roles
2025-05-13 16:37:56,590 - app.utils.permissions - INFO - 更新权限: manage_all_projects
2025-05-13 16:37:56,590 - app.utils.permissions - INFO - 更新权限: manage_project
2025-05-13 16:37:56,591 - app.utils.permissions - INFO - 更新权限: manage_all_tasks
2025-05-13 16:37:56,591 - app.utils.permissions - INFO - 更新权限: manage_task
2025-05-13 16:37:56,591 - app.utils.permissions - INFO - 更新权限: view_project
2025-05-13 16:37:56,592 - app.utils.permissions - INFO - 更新权限: view_task
2025-05-13 16:37:56,592 - app.utils.permissions - INFO - 更新权限: manage_resources
2025-05-13 16:37:56,593 - app.utils.permissions - INFO - 更新权限: manage_risks
2025-05-13 16:37:56,593 - app.utils.permissions - INFO - 更新权限: view_reports
2025-05-13 16:37:56,593 - app.utils.permissions - INFO - 更新权限: create_task
2025-05-13 16:37:56,594 - app.utils.permissions - INFO - 更新权限: create_project
2025-05-13 16:37:56,595 - app.utils.permissions - INFO - 更新权限: assign_task
2025-05-13 16:37:56,596 - app.utils.permissions - INFO - 更新权限: change_project_status
2025-05-13 16:37:56,597 - app.utils.permissions - INFO - 更新权限: change_task_status
2025-05-13 16:37:56,599 - app.utils.permissions - INFO - 更新角色: admin
2025-05-13 16:37:56,601 - app.utils.permissions - INFO - 为管理员角色添加所有权限: 16个
2025-05-13 16:37:56,602 - app.utils.permissions - INFO - 更新角色: manager
2025-05-13 16:37:56,602 - app.utils.permissions - INFO - 为角色 manager 添加权限: manage_project
2025-05-13 16:37:56,603 - app.utils.permissions - INFO - 为角色 manager 添加权限: manage_task
2025-05-13 16:37:56,603 - app.utils.permissions - INFO - 为角色 manager 添加权限: view_project
2025-05-13 16:37:56,603 - app.utils.permissions - INFO - 为角色 manager 添加权限: view_task
2025-05-13 16:37:56,603 - app.utils.permissions - INFO - 为角色 manager 添加权限: manage_resources
2025-05-13 16:37:56,603 - app.utils.permissions - INFO - 为角色 manager 添加权限: manage_risks
2025-05-13 16:37:56,604 - app.utils.permissions - INFO - 为角色 manager 添加权限: view_reports
2025-05-13 16:37:56,604 - app.utils.permissions - INFO - 为角色 manager 添加权限: create_project
2025-05-13 16:37:56,604 - app.utils.permissions - INFO - 为角色 manager 添加权限: create_task
2025-05-13 16:37:56,604 - app.utils.permissions - INFO - 为角色 manager 添加权限: assign_task
2025-05-13 16:37:56,604 - app.utils.permissions - INFO - 为角色 manager 添加权限: change_project_status
2025-05-13 16:37:56,604 - app.utils.permissions - INFO - 为角色 manager 添加权限: change_task_status
2025-05-13 16:37:56,609 - app.utils.permissions - INFO - 更新角色: user
2025-05-13 16:37:56,610 - app.utils.permissions - INFO - 为角色 user 添加权限: view_project
2025-05-13 16:37:56,610 - app.utils.permissions - INFO - 为角色 user 添加权限: view_task
2025-05-13 16:37:56,611 - app.utils.permissions - INFO - 为角色 user 添加权限: view_reports
2025-05-13 16:37:56,611 - app.utils.permissions - INFO - 角色和权限初始化完成
2025-05-13 16:37:56,611 - __main__ - INFO - 角色和权限初始化成功
2025-05-13 16:37:56,615 - __main__ - INFO - 数据库初始化完成
2025-05-13 16:37:56,628 - __main__ - INFO - 系统资源检查完成
2025-05-13 16:37:56,629 - __main__ - INFO - 开始清理旧数据
2025-05-13 16:37:56,631 - __main__ - INFO - 删除了 0 条过期的资源使用记录
2025-05-13 16:37:56,632 - __main__ - INFO - 删除了 0 条已解决的过期警报
2025-05-13 16:37:56,632 - __main__ - INFO - 旧数据清理完成
2025-05-13 16:37:56,639 - werkzeug - WARNING -  * Debugger is active!
2025-05-13 16:37:56,642 - werkzeug - INFO -  * Debugger PIN: 670-037-726
2025-05-13 16:38:16,825 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 16:38:16] "GET /login HTTP/1.1" 200 -
2025-05-13 16:38:17,086 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 16:38:17] "GET /static/css/bootstrap.min.css HTTP/1.1" 200 -
2025-05-13 16:38:17,093 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 16:38:17] "GET /static/css/style.css HTTP/1.1" 200 -
2025-05-13 16:38:17,095 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 16:38:17] "GET /static/js/bootstrap.bundle.min.js HTTP/1.1" 200 -
2025-05-13 16:38:17,096 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 16:38:17] "GET /static/css/bootstrap-icons.css HTTP/1.1" 200 -
2025-05-13 16:38:17,097 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 16:38:17] "GET /static/js/auth.js HTTP/1.1" 200 -
2025-05-13 16:38:17,098 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 16:38:17] "GET /static/js/utils.js HTTP/1.1" 200 -
2025-05-13 16:38:17,099 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 16:38:17] "GET /static/js/jquery.min.js HTTP/1.1" 200 -
2025-05-13 16:38:17,103 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 16:38:17] "GET /static/images/background.png HTTP/1.1" 200 -
2025-05-13 16:38:17,108 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 16:38:17] "GET /static/js/fix-modals.js HTTP/1.1" 200 -
2025-05-13 16:38:17,122 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 16:38:17] "GET /static/js/csrf.js HTTP/1.1" 200 -
2025-05-13 16:38:17,125 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 16:38:17] "GET /static/js/user-profile.js HTTP/1.1" 200 -
2025-05-13 16:38:17,126 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 16:38:17] "GET /static/js/background-helper.js HTTP/1.1" 200 -
2025-05-13 16:38:17,127 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 16:38:17] "GET /static/uploads/background.png HTTP/1.1" 200 -
2025-05-13 16:38:17,151 - app - WARNING - 绕过JWT验证: /auth/user_info
2025-05-13 16:38:17,151 - app.utils.jwt_callbacks - WARNING - JWT验证已被绕过: /auth/user_info
2025-05-13 16:38:17,151 - app - INFO - 获取用户信息 - bypass_jwt: True
2025-05-13 16:38:17,152 - app - INFO - 使用默认管理员用户(ID=1)
2025-05-13 16:38:17,167 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 16:38:17] "GET /static/favicon.ico HTTP/1.1" 200 -
2025-05-13 16:38:17,169 - app - INFO - 成功获取用户 admin 的信息
2025-05-13 16:38:17,170 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 16:38:17] "GET /auth/user_info?_=1747125497148&bypass_jwt=true HTTP/1.1" 200 -
2025-05-13 16:38:18,716 - app - INFO - 登录请求 - 方法: POST, 内容类型: application/x-www-form-urlencoded
2025-05-13 16:38:18,716 - app - INFO - 请求头: {'Host': '127.0.0.1:5000', 'Connection': 'keep-alive', 'Content-Length': '135', 'Cache-Control': 'max-age=0', 'Sec-Ch-Ua': '"Chromium";v="136", "Microsoft Edge";v="136", "Not.A/Brand";v="99"', 'Sec-Ch-Ua-Mobile': '?0', 'Sec-Ch-Ua-Platform': '"Windows"', 'Origin': 'http://127.0.0.1:5000', 'Content-Type': 'application/x-www-form-urlencoded', 'Upgrade-Insecure-Requests': '1', 'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36 Edg/136.0.0.0', 'Accept': 'text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.7', 'Sec-Fetch-Site': 'same-origin', 'Sec-Fetch-Mode': 'navigate', 'Sec-Fetch-User': '?1', 'Sec-Fetch-Dest': 'document', 'Referer': 'http://127.0.0.1:5000/login', 'Accept-Encoding': 'gzip, deflate, br, zstd', 'Accept-Language': 'zh-CN,zh;q=0.9,en;q=0.8,en-GB;q=0.7,en-US;q=0.6', 'Cookie': 'session=eyJjc3JmX3Rva2VuIjoiMGYxZmVkODA0MTEwMmJhYjMxZDUyMjkzMDczM2JiNTc4ZmUzMWEyYiJ9.aCME-A.Y_S9NU1P2SJ617ezGC-HlBvwszw; user_roles=admin; is_admin=true; admin=true'}
2025-05-13 16:38:18,717 - app - INFO - 处理表单格式的登录请求
2025-05-13 16:38:18,717 - app - INFO - 表单数据: username=admin, password=********
2025-05-13 16:38:19,219 - app - INFO - 已生成CSRF令牌: IjBmMWZlZD...
2025-05-13 16:38:19,222 - app - INFO - 用户 admin 的角色: ['admin']
2025-05-13 16:38:19,223 - app - INFO - 用户 admin 是否是管理员: True
2025-05-13 16:38:19,250 - app - INFO - 用户登录成功: admin
2025-05-13 16:38:19,251 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 16:38:19] "[32mPOST /auth/login HTTP/1.1[0m" 302 -
2025-05-13 16:38:19,259 - app - DEBUG - Dashboard route accessed
2025-05-13 16:38:19,259 - app - DEBUG - Current user ID: 1
2025-05-13 16:38:19,295 - app - DEBUG - Dashboard data prepared for user: admin
2025-05-13 16:38:19,328 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 16:38:19] "GET /dashboard HTTP/1.1" 200 -
2025-05-13 16:38:19,360 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 16:38:19] "[36mGET /static/css/bootstrap.min.css HTTP/1.1[0m" 304 -
2025-05-13 16:38:19,362 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 16:38:19] "[36mGET /static/css/bootstrap-icons.css HTTP/1.1[0m" 304 -
2025-05-13 16:38:19,363 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 16:38:19] "[36mGET /static/css/style.css HTTP/1.1[0m" 304 -
2025-05-13 16:38:19,366 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 16:38:19] "[36mGET /static/js/jquery.min.js HTTP/1.1[0m" 304 -
2025-05-13 16:38:19,370 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 16:38:19] "[36mGET /static/js/bootstrap.bundle.min.js HTTP/1.1[0m" 304 -
2025-05-13 16:38:19,374 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 16:38:19] "[36mGET /static/js/utils.js HTTP/1.1[0m" 304 -
2025-05-13 16:38:19,376 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 16:38:19] "[36mGET /static/js/auth.js HTTP/1.1[0m" 304 -
2025-05-13 16:38:19,377 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 16:38:19] "[36mGET /static/js/fix-modals.js HTTP/1.1[0m" 304 -
2025-05-13 16:38:19,382 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 16:38:19] "[36mGET /static/js/csrf.js HTTP/1.1[0m" 304 -
2025-05-13 16:38:19,383 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 16:38:19] "[36mGET /static/js/user-profile.js HTTP/1.1[0m" 304 -
2025-05-13 16:38:19,397 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 16:38:19] "GET /static/css/fonts/bootstrap-icons.woff2 HTTP/1.1" 200 -
2025-05-13 16:38:19,413 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 16:38:19] "[36mGET /static/favicon.ico HTTP/1.1[0m" 304 -
2025-05-13 16:38:20,416 - app - WARNING - 绕过JWT验证: /projects
2025-05-13 16:38:20,416 - app.utils.jwt_callbacks - WARNING - JWT验证已被绕过: /projects
2025-05-13 16:38:20,416 - app.routes.main - INFO - JWT bypass enabled for projects - Using test user
2025-05-13 16:38:20,454 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 16:38:20] "GET /projects?bypass_jwt=true HTTP/1.1" 200 -
2025-05-13 16:38:20,482 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 16:38:20] "[36mGET /static/css/bootstrap.min.css HTTP/1.1[0m" 304 -
2025-05-13 16:38:20,483 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 16:38:20] "[36mGET /static/css/bootstrap-icons.css HTTP/1.1[0m" 304 -
2025-05-13 16:38:20,485 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 16:38:20] "[36mGET /static/css/style.css HTTP/1.1[0m" 304 -
2025-05-13 16:38:20,487 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 16:38:20] "[36mGET /static/js/jquery.min.js HTTP/1.1[0m" 304 -
2025-05-13 16:38:20,491 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 16:38:20] "GET /static/js/frappe-gantt.min.js HTTP/1.1" 200 -
2025-05-13 16:38:20,491 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 16:38:20] "GET /static/css/frappe-gantt.css HTTP/1.1" 200 -
2025-05-13 16:38:20,492 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 16:38:20] "[36mGET /static/js/bootstrap.bundle.min.js HTTP/1.1[0m" 304 -
2025-05-13 16:38:20,494 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 16:38:20] "[36mGET /static/js/utils.js HTTP/1.1[0m" 304 -
2025-05-13 16:38:20,495 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 16:38:20] "[36mGET /static/js/auth.js HTTP/1.1[0m" 304 -
2025-05-13 16:38:20,498 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 16:38:20] "[36mGET /static/js/fix-modals.js HTTP/1.1[0m" 304 -
2025-05-13 16:38:20,501 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 16:38:20] "[36mGET /static/js/csrf.js HTTP/1.1[0m" 304 -
2025-05-13 16:38:20,503 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 16:38:20] "[36mGET /static/js/user-profile.js HTTP/1.1[0m" 304 -
2025-05-13 16:38:20,526 - app - WARNING - 绕过JWT验证: /api/global/users
2025-05-13 16:38:20,530 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 16:38:20] "GET /api/global/users?bypass_jwt=true&_=1747125500522 HTTP/1.1" 200 -
2025-05-13 16:38:20,538 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 16:38:20] "[36mGET /static/favicon.ico HTTP/1.1[0m" 304 -
2025-05-13 16:38:20,540 - app - WARNING - 绕过JWT验证: /api/project-managers
2025-05-13 16:38:20,541 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 16:38:20] "[33mGET /api/project-managers?bypass_jwt=true&_=1747125500536 HTTP/1.1[0m" 404 -
2025-05-13 16:38:20,545 - app - WARNING - 绕过JWT验证: /api/global/project-managers
2025-05-13 16:38:20,554 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 16:38:20] "GET /api/global/project-managers?bypass_jwt=true&_=1747125500536 HTTP/1.1" 200 -
2025-05-13 16:38:23,195 - app - WARNING - 绕过JWT验证: /api/global/users
2025-05-13 16:38:23,199 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 16:38:23] "GET /api/global/users?bypass_jwt=true&_=1747125503191 HTTP/1.1" 200 -
2025-05-13 16:38:23,200 - app - WARNING - 绕过JWT验证: /api/global/users
2025-05-13 16:38:23,203 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 16:38:23] "GET /api/global/users?bypass_jwt=true&_=1747125503192 HTTP/1.1" 200 -
2025-05-13 16:38:23,206 - app - WARNING - 绕过JWT验证: /api/project-managers
2025-05-13 16:38:23,208 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 16:38:23] "[33mGET /api/project-managers?bypass_jwt=true&_=1747125503204 HTTP/1.1[0m" 404 -
2025-05-13 16:38:23,211 - app - WARNING - 绕过JWT验证: /api/project-managers
2025-05-13 16:38:23,213 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 16:38:23] "[33mGET /api/project-managers?bypass_jwt=true&_=1747125503208 HTTP/1.1[0m" 404 -
2025-05-13 16:38:23,214 - app - WARNING - 绕过JWT验证: /api/global/project-managers
2025-05-13 16:38:23,218 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 16:38:23] "GET /api/global/project-managers?bypass_jwt=true&_=1747125503204 HTTP/1.1" 200 -
2025-05-13 16:38:23,219 - app - WARNING - 绕过JWT验证: /api/global/project-managers
2025-05-13 16:38:23,222 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 16:38:23] "GET /api/global/project-managers?bypass_jwt=true&_=1747125503208 HTTP/1.1" 200 -
2025-05-13 16:38:32,609 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 16:38:32] "[36mGET /static/css/bootstrap.min.css HTTP/1.1[0m" 304 -
2025-05-13 16:38:32,611 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 16:38:32] "[36mGET /static/css/bootstrap-icons.css HTTP/1.1[0m" 304 -
2025-05-13 16:38:32,613 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 16:38:32] "[36mGET /static/css/style.css HTTP/1.1[0m" 304 -
2025-05-13 16:38:32,615 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 16:38:32] "[36mGET /static/css/frappe-gantt.css HTTP/1.1[0m" 304 -
2025-05-13 16:38:32,625 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 16:38:32] "[33mGET /.well-known/appspecific/com.chrome.devtools.json HTTP/1.1[0m" 404 -
2025-05-13 16:38:32,693 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 16:38:32] "GET /static/css/bootstrap.min.css.map HTTP/1.1" 200 -
2025-05-13 16:38:32,823 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 16:38:32] "GET /static/js/bootstrap.bundle.min.js.map HTTP/1.1" 200 -
2025-05-13 16:42:06,622 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 16:42:06] "GET /login HTTP/1.1" 200 -
2025-05-13 16:42:06,666 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 16:42:06] "GET /static/css/bootstrap.min.css HTTP/1.1" 200 -
2025-05-13 16:42:06,670 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 16:42:06] "GET /static/css/bootstrap-icons.css HTTP/1.1" 200 -
2025-05-13 16:42:06,676 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 16:42:06] "GET /static/css/style.css HTTP/1.1" 200 -
2025-05-13 16:42:06,684 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 16:42:06] "GET /static/js/jquery.min.js HTTP/1.1" 200 -
2025-05-13 16:42:06,687 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 16:42:06] "GET /static/js/bootstrap.bundle.min.js HTTP/1.1" 200 -
2025-05-13 16:42:06,693 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 16:42:06] "GET /static/js/utils.js HTTP/1.1" 200 -
2025-05-13 16:42:06,701 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 16:42:06] "GET /static/images/background.png HTTP/1.1" 200 -
2025-05-13 16:42:06,702 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 16:42:06] "GET /static/js/auth.js HTTP/1.1" 200 -
2025-05-13 16:42:06,709 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 16:42:06] "GET /static/js/fix-modals.js HTTP/1.1" 200 -
2025-05-13 16:42:06,714 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 16:42:06] "GET /static/js/csrf.js HTTP/1.1" 200 -
2025-05-13 16:42:06,720 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 16:42:06] "GET /static/js/user-profile.js HTTP/1.1" 200 -
2025-05-13 16:42:06,724 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 16:42:06] "GET /static/js/background-helper.js HTTP/1.1" 200 -
2025-05-13 16:42:06,725 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 16:42:06] "GET /static/uploads/background.png HTTP/1.1" 200 -
2025-05-13 16:42:06,745 - app - WARNING - 绕过JWT验证: /auth/user_info
2025-05-13 16:42:06,745 - app.utils.jwt_callbacks - WARNING - JWT验证已被绕过: /auth/user_info
2025-05-13 16:42:06,745 - app - INFO - 获取用户信息 - bypass_jwt: True
2025-05-13 16:42:06,746 - app - INFO - 使用默认管理员用户(ID=1)
2025-05-13 16:42:06,771 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 16:42:06] "GET /static/favicon.ico HTTP/1.1" 200 -
2025-05-13 16:42:06,776 - app - INFO - 成功获取用户 admin 的信息
2025-05-13 16:42:06,779 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 16:42:06] "GET /auth/user_info?_=1747125726740&bypass_jwt=true HTTP/1.1" 200 -
2025-05-13 16:42:08,510 - app - INFO - 登录请求 - 方法: POST, 内容类型: application/x-www-form-urlencoded
2025-05-13 16:42:08,510 - app - INFO - 请求头: {'Host': '127.0.0.1:5000', 'Connection': 'keep-alive', 'Content-Length': '135', 'Cache-Control': 'max-age=0', 'Sec-Ch-Ua': '"Chromium";v="136", "Microsoft Edge";v="136", "Not.A/Brand";v="99"', 'Sec-Ch-Ua-Mobile': '?0', 'Sec-Ch-Ua-Platform': '"Windows"', 'Origin': 'http://127.0.0.1:5000', 'Content-Type': 'application/x-www-form-urlencoded', 'Upgrade-Insecure-Requests': '1', 'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36 Edg/136.0.0.0', 'Accept': 'text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.7', 'Sec-Fetch-Site': 'same-origin', 'Sec-Fetch-Mode': 'navigate', 'Sec-Fetch-User': '?1', 'Sec-Fetch-Dest': 'document', 'Referer': 'http://127.0.0.1:5000/login', 'Accept-Encoding': 'gzip, deflate, br, zstd', 'Accept-Language': 'zh-CN,zh;q=0.9,en;q=0.8,en-GB;q=0.7,en-US;q=0.6', 'Cookie': 'session=eyJjc3JmX3Rva2VuIjoiMTAxMDZhNDk1ZmViYjJlN2RmNWE1Yzc3YWZjOGNhYjgxMDZhYmUwMiJ9.aCMF3g.QWjm15giB0UFkS-2KKVaPR1qWuA; user_roles=admin; is_admin=true; admin=true'}
2025-05-13 16:42:08,511 - app - INFO - 处理表单格式的登录请求
2025-05-13 16:42:08,511 - app - INFO - 表单数据: username=admin, password=********
2025-05-13 16:42:08,977 - app - INFO - 已生成CSRF令牌: IjEwMTA2YT...
2025-05-13 16:42:08,979 - app - INFO - 用户 admin 的角色: ['admin']
2025-05-13 16:42:08,980 - app - INFO - 用户 admin 是否是管理员: True
2025-05-13 16:42:09,143 - app - INFO - 用户登录成功: admin
2025-05-13 16:42:09,145 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 16:42:09] "[32mPOST /auth/login HTTP/1.1[0m" 302 -
2025-05-13 16:42:09,154 - app - DEBUG - Dashboard route accessed
2025-05-13 16:42:09,154 - app - DEBUG - Current user ID: 1
2025-05-13 16:42:09,186 - app - DEBUG - Dashboard data prepared for user: admin
2025-05-13 16:42:09,213 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 16:42:09] "GET /dashboard HTTP/1.1" 200 -
2025-05-13 16:42:09,244 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 16:42:09] "[36mGET /static/css/bootstrap-icons.css HTTP/1.1[0m" 304 -
2025-05-13 16:42:09,244 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 16:42:09] "[36mGET /static/css/bootstrap.min.css HTTP/1.1[0m" 304 -
2025-05-13 16:42:09,245 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 16:42:09] "[36mGET /static/css/style.css HTTP/1.1[0m" 304 -
2025-05-13 16:42:09,251 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 16:42:09] "[36mGET /static/js/jquery.min.js HTTP/1.1[0m" 304 -
2025-05-13 16:42:09,251 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 16:42:09] "[36mGET /static/js/utils.js HTTP/1.1[0m" 304 -
2025-05-13 16:42:09,252 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 16:42:09] "[36mGET /static/js/bootstrap.bundle.min.js HTTP/1.1[0m" 304 -
2025-05-13 16:42:09,252 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 16:42:09] "[36mGET /static/js/auth.js HTTP/1.1[0m" 304 -
2025-05-13 16:42:09,256 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 16:42:09] "[36mGET /static/js/fix-modals.js HTTP/1.1[0m" 304 -
2025-05-13 16:42:09,262 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 16:42:09] "[36mGET /static/js/csrf.js HTTP/1.1[0m" 304 -
2025-05-13 16:42:09,263 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 16:42:09] "[36mGET /static/js/user-profile.js HTTP/1.1[0m" 304 -
2025-05-13 16:42:09,283 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 16:42:09] "GET /static/css/fonts/bootstrap-icons.woff2 HTTP/1.1" 200 -
2025-05-13 16:42:09,304 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 16:42:09] "[36mGET /static/favicon.ico HTTP/1.1[0m" 304 -
2025-05-13 16:42:10,287 - app - WARNING - 绕过JWT验证: /projects
2025-05-13 16:42:10,288 - app.utils.jwt_callbacks - WARNING - JWT验证已被绕过: /projects
2025-05-13 16:42:10,288 - app.routes.main - INFO - JWT bypass enabled for projects - Using test user
2025-05-13 16:42:10,300 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 16:42:10] "GET /projects?bypass_jwt=true HTTP/1.1" 200 -
2025-05-13 16:42:10,330 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 16:42:10] "[36mGET /static/css/bootstrap.min.css HTTP/1.1[0m" 304 -
2025-05-13 16:42:10,332 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 16:42:10] "[36mGET /static/css/bootstrap-icons.css HTTP/1.1[0m" 304 -
2025-05-13 16:42:10,333 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 16:42:10] "[36mGET /static/css/style.css HTTP/1.1[0m" 304 -
2025-05-13 16:42:10,334 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 16:42:10] "GET /static/css/frappe-gantt.css HTTP/1.1" 200 -
2025-05-13 16:42:10,337 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 16:42:10] "[36mGET /static/js/jquery.min.js HTTP/1.1[0m" 304 -
2025-05-13 16:42:10,342 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 16:42:10] "[36mGET /static/js/bootstrap.bundle.min.js HTTP/1.1[0m" 304 -
2025-05-13 16:42:10,344 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 16:42:10] "[36mGET /static/js/utils.js HTTP/1.1[0m" 304 -
2025-05-13 16:42:10,344 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 16:42:10] "GET /static/js/frappe-gantt.min.js HTTP/1.1" 200 -
2025-05-13 16:42:10,347 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 16:42:10] "[36mGET /static/js/auth.js HTTP/1.1[0m" 304 -
2025-05-13 16:42:10,348 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 16:42:10] "[36mGET /static/js/fix-modals.js HTTP/1.1[0m" 304 -
2025-05-13 16:42:10,350 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 16:42:10] "[36mGET /static/js/csrf.js HTTP/1.1[0m" 304 -
2025-05-13 16:42:10,355 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 16:42:10] "[36mGET /static/js/user-profile.js HTTP/1.1[0m" 304 -
2025-05-13 16:42:10,375 - app - WARNING - 绕过JWT验证: /api/global/users
2025-05-13 16:42:10,377 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 16:42:10] "GET /api/global/users?bypass_jwt=true&_=1747125730370 HTTP/1.1" 200 -
2025-05-13 16:42:10,385 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 16:42:10] "[36mGET /static/favicon.ico HTTP/1.1[0m" 304 -
2025-05-13 16:42:10,386 - app - WARNING - 绕过JWT验证: /api/project-managers
2025-05-13 16:42:10,387 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 16:42:10] "[33mGET /api/project-managers?bypass_jwt=true&_=1747125730383 HTTP/1.1[0m" 404 -
2025-05-13 16:42:10,397 - app - WARNING - 绕过JWT验证: /api/global/project-managers
2025-05-13 16:42:10,402 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 16:42:10] "GET /api/global/project-managers?bypass_jwt=true&_=1747125730383 HTTP/1.1" 200 -
2025-05-13 16:42:11,816 - app - WARNING - 绕过JWT验证: /projects/detail/1
2025-05-13 16:42:11,817 - app - INFO - 直接调用项目详情视图函数，不进行重定向: 项目ID=1
2025-05-13 16:42:11,817 - app.utils.jwt_callbacks - WARNING - JWT验证已被绕过: /projects/detail/1
2025-05-13 16:42:11,817 - app.utils.jwt_callbacks - WARNING - 使用bypass_jwt返回默认用户ID: 1
2025-05-13 16:42:11,818 - app.routes.projects - INFO - 获取项目 1 详情页面 - 用户ID: 1, URL: http://127.0.0.1:5000/projects/detail/1?no_redirect=true&bypass_jwt=true
2025-05-13 16:42:11,894 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 16:42:11] "GET /projects/detail/1?no_redirect=true&bypass_jwt=true HTTP/1.1" 200 -
2025-05-13 16:42:11,925 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 16:42:11] "[36mGET /static/css/bootstrap.min.css HTTP/1.1[0m" 304 -
2025-05-13 16:42:11,929 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 16:42:11] "[36mGET /static/css/bootstrap-icons.css HTTP/1.1[0m" 304 -
2025-05-13 16:42:11,931 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 16:42:11] "[36mGET /static/css/style.css HTTP/1.1[0m" 304 -
2025-05-13 16:42:11,932 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 16:42:11] "[36mGET /static/js/jquery.min.js HTTP/1.1[0m" 304 -
2025-05-13 16:42:11,934 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 16:42:11] "[36mGET /static/js/bootstrap.bundle.min.js HTTP/1.1[0m" 304 -
2025-05-13 16:42:11,938 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 16:42:11] "[36mGET /static/js/utils.js HTTP/1.1[0m" 304 -
2025-05-13 16:42:11,940 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 16:42:11] "[36mGET /static/js/auth.js HTTP/1.1[0m" 304 -
2025-05-13 16:42:11,948 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 16:42:11] "[36mGET /static/js/fix-modals.js HTTP/1.1[0m" 304 -
2025-05-13 16:42:11,948 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 16:42:11] "[36mGET /static/js/csrf.js HTTP/1.1[0m" 304 -
2025-05-13 16:42:11,949 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 16:42:11] "[36mGET /static/js/user-profile.js HTTP/1.1[0m" 304 -
2025-05-13 16:42:11,975 - app - WARNING - 绕过JWT验证: /api/global/users
2025-05-13 16:42:11,976 - app - WARNING - 绕过JWT验证: /api/projects/1/risks
2025-05-13 16:42:11,978 - app - WARNING - 绕过JWT验证: /api/global/users
2025-05-13 16:42:11,979 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 16:42:11] "[33mGET /api/projects/1/risks?bypass_jwt=true&_=1747125731971 HTTP/1.1[0m" 404 -
2025-05-13 16:42:11,981 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 16:42:11] "GET /api/global/users?bypass_jwt=true&_=1747125731971 HTTP/1.1" 200 -
2025-05-13 16:42:11,982 - app - WARNING - 绕过JWT验证: /api/projects/1/risks
2025-05-13 16:42:11,983 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 16:42:11] "GET /api/global/users?bypass_jwt=true&_=1747125731972 HTTP/1.1" 200 -
2025-05-13 16:42:11,986 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 16:42:11] "[33mGET /api/projects/1/risks?bypass_jwt=true&_=1747125731972 HTTP/1.1[0m" 404 -
2025-05-13 16:42:11,987 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 16:42:11] "[36mGET /static/favicon.ico HTTP/1.1[0m" 304 -
2025-05-13 16:42:11,988 - app - WARNING - 绕过JWT验证: /api/risks
2025-05-13 16:42:11,991 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 16:42:11] "[33mGET /api/risks?project_id=1&bypass_jwt=true&_=1747125731971 HTTP/1.1[0m" 404 -
2025-05-13 16:42:11,996 - app - WARNING - 绕过JWT验证: /api/risks
2025-05-13 16:42:11,998 - app - WARNING - 绕过JWT验证: /api/auth/risks
2025-05-13 16:42:11,998 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 16:42:11] "[33mGET /api/risks?project_id=1&bypass_jwt=true&_=1747125731972 HTTP/1.1[0m" 404 -
2025-05-13 16:42:11,999 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 16:42:11] "[33mGET /api/auth/risks?project_id=1&bypass_jwt=true&_=1747125731971 HTTP/1.1[0m" 404 -
2025-05-13 16:42:12,007 - app - WARNING - 绕过JWT验证: /api/auth/risks
2025-05-13 16:42:12,009 - app - WARNING - 绕过JWT验证: /api/noauth/risks
2025-05-13 16:42:12,009 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 16:42:12] "[33mGET /api/auth/risks?project_id=1&bypass_jwt=true&_=1747125731972 HTTP/1.1[0m" 404 -
2025-05-13 16:42:12,010 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 16:42:12] "[33mGET /api/noauth/risks?project_id=1&bypass_jwt=true&_=1747125731971 HTTP/1.1[0m" 404 -
2025-05-13 16:42:12,018 - app - WARNING - 绕过JWT验证: /api/noauth/risks
2025-05-13 16:42:12,019 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 16:42:12] "[33mGET /api/noauth/risks?project_id=1&bypass_jwt=true&_=1747125731972 HTTP/1.1[0m" 404 -
2025-05-13 16:42:13,685 - app - WARNING - 绕过JWT验证: /api/global/users
2025-05-13 16:42:13,686 - app - WARNING - 绕过JWT验证: /api/global/users
2025-05-13 16:42:13,687 - app - WARNING - 绕过JWT验证: /api/global/users
2025-05-13 16:42:13,690 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 16:42:13] "GET /api/global/users?bypass_jwt=true&_=1747125733682 HTTP/1.1" 200 -
2025-05-13 16:42:13,693 - app - WARNING - 绕过JWT验证: /api/global/users
2025-05-13 16:42:13,696 - app - WARNING - 绕过JWT验证: /api/global/users
2025-05-13 16:42:13,697 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 16:42:13] "GET /api/global/users?bypass_jwt=true&_=1747125733684 HTTP/1.1" 200 -
2025-05-13 16:42:13,698 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 16:42:13] "GET /api/global/users?bypass_jwt=true&_=1747125733683 HTTP/1.1" 200 -
2025-05-13 16:42:13,702 - app - WARNING - 绕过JWT验证: /api/global/users
2025-05-13 16:42:13,704 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 16:42:13] "GET /api/global/users?bypass_jwt=true&_=1747125733685 HTTP/1.1" 200 -
2025-05-13 16:42:13,705 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 16:42:13] "GET /api/global/users?bypass_jwt=true&_=1747125733686 HTTP/1.1" 200 -
2025-05-13 16:42:13,710 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 16:42:13] "GET /api/global/users?bypass_jwt=true&_=1747125733687 HTTP/1.1" 200 -
2025-05-13 16:42:13,714 - app - WARNING - 绕过JWT验证: /api/global/users
2025-05-13 16:42:13,717 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 16:42:13] "GET /api/global/users?bypass_jwt=true&_=1747125733685 HTTP/1.1" 200 -
2025-05-13 16:42:32,685 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 16:42:32] "[36mGET /static/favicon.ico HTTP/1.1[0m" 304 -
2025-05-13 16:42:34,528 - app - WARNING - 绕过JWT验证: /api/global/users
2025-05-13 16:42:34,530 - app - WARNING - 绕过JWT验证: /api/global/users
2025-05-13 16:42:34,531 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 16:42:34] "GET /api/global/users?bypass_jwt=true&_=1747125754520 HTTP/1.1" 200 -
2025-05-13 16:42:34,531 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 16:42:34] "GET /api/global/users?bypass_jwt=true&_=1747125754521 HTTP/1.1" 200 -
2025-05-13 16:42:34,539 - app - WARNING - 绕过JWT验证: /api/project-managers
2025-05-13 16:42:34,539 - app - WARNING - 绕过JWT验证: /api/project-managers
2025-05-13 16:42:34,540 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 16:42:34] "[33mGET /api/project-managers?bypass_jwt=true&_=1747125754536 HTTP/1.1[0m" 404 -
2025-05-13 16:42:34,540 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 16:42:34] "[33mGET /api/project-managers?bypass_jwt=true&_=1747125754536 HTTP/1.1[0m" 404 -
2025-05-13 16:42:34,545 - app - WARNING - 绕过JWT验证: /api/global/project-managers
2025-05-13 16:42:34,546 - app - WARNING - 绕过JWT验证: /api/global/project-managers
2025-05-13 16:42:34,547 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 16:42:34] "GET /api/global/project-managers?bypass_jwt=true&_=1747125754536 HTTP/1.1" 200 -
2025-05-13 16:42:34,548 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 16:42:34] "GET /api/global/project-managers?bypass_jwt=true&_=1747125754536 HTTP/1.1" 200 -
2025-05-13 16:43:00,451 - app - WARNING - 绕过JWT验证: /api/auth/projects
2025-05-13 16:43:00,452 - app.utils.jwt_callbacks - WARNING - JWT验证已被绕过: /api/auth/projects
2025-05-13 16:43:00,453 - app.routes.projects - INFO - API创建项目 - 使用测试用户
2025-05-13 16:43:00,453 - app.routes.projects - INFO - API创建项目: 收到数据 {'name': 'wodeasdads15', 'manager_id': '1', 'start_date': '2025-05-13', 'end_date': '2025-08-13', 'description': '55555', 'status': 'planning'}
2025-05-13 16:43:00,454 - app.routes.projects - INFO - 创建项目: 用户ID=1, 数据={'name': 'wodeasdads15', 'manager_id': '1', 'start_date': '2025-05-13', 'end_date': '2025-08-13', 'description': '55555', 'status': 'planning'}
2025-05-13 16:43:00,469 - app.routes.projects - INFO - 创建项目成功: 15 - wodeasdads15
2025-05-13 16:43:00,470 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 16:43:00] "[35m[1mPOST /api/auth/projects?bypass_jwt=true&_=1747125780444&req=eecqxwbiw8 HTTP/1.1[0m" 201 -
2025-05-13 16:43:02,066 - app - WARNING - 绕过JWT验证: /projects
2025-05-13 16:43:02,067 - app.utils.jwt_callbacks - WARNING - JWT验证已被绕过: /projects
2025-05-13 16:43:02,067 - app.routes.main - INFO - JWT bypass enabled for projects - Using test user
2025-05-13 16:43:02,082 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 16:43:02] "GET /projects?bypass_jwt=true HTTP/1.1" 200 -
2025-05-13 16:43:02,107 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 16:43:02] "[36mGET /static/css/bootstrap.min.css HTTP/1.1[0m" 304 -
2025-05-13 16:43:02,108 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 16:43:02] "[36mGET /static/css/bootstrap-icons.css HTTP/1.1[0m" 304 -
2025-05-13 16:43:02,109 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 16:43:02] "[36mGET /static/css/style.css HTTP/1.1[0m" 304 -
2025-05-13 16:43:02,111 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 16:43:02] "[36mGET /static/js/jquery.min.js HTTP/1.1[0m" 304 -
2025-05-13 16:43:02,116 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 16:43:02] "[36mGET /static/js/bootstrap.bundle.min.js HTTP/1.1[0m" 304 -
2025-05-13 16:43:02,117 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 16:43:02] "[36mGET /static/css/frappe-gantt.css HTTP/1.1[0m" 304 -
2025-05-13 16:43:02,118 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 16:43:02] "[36mGET /static/js/utils.js HTTP/1.1[0m" 304 -
2025-05-13 16:43:02,123 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 16:43:02] "[36mGET /static/js/auth.js HTTP/1.1[0m" 304 -
2025-05-13 16:43:02,124 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 16:43:02] "[36mGET /static/js/fix-modals.js HTTP/1.1[0m" 304 -
2025-05-13 16:43:02,127 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 16:43:02] "[36mGET /static/js/csrf.js HTTP/1.1[0m" 304 -
2025-05-13 16:43:02,133 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 16:43:02] "[36mGET /static/js/user-profile.js HTTP/1.1[0m" 304 -
2025-05-13 16:43:02,133 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 16:43:02] "[36mGET /static/js/frappe-gantt.min.js HTTP/1.1[0m" 304 -
2025-05-13 16:43:02,146 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 16:43:02] "[36mGET /static/css/fonts/bootstrap-icons.woff2 HTTP/1.1[0m" 304 -
2025-05-13 16:43:02,150 - app - WARNING - 绕过JWT验证: /api/global/users
2025-05-13 16:43:02,152 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 16:43:02] "GET /api/global/users?bypass_jwt=true&_=1747125782146 HTTP/1.1" 200 -
2025-05-13 16:43:02,163 - app - WARNING - 绕过JWT验证: /api/project-managers
2025-05-13 16:43:02,165 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 16:43:02] "[33mGET /api/project-managers?bypass_jwt=true&_=1747125782158 HTTP/1.1[0m" 404 -
2025-05-13 16:43:02,167 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 16:43:02] "[36mGET /static/favicon.ico HTTP/1.1[0m" 304 -
2025-05-13 16:43:02,177 - app - WARNING - 绕过JWT验证: /api/global/project-managers
2025-05-13 16:43:02,181 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 16:43:02] "GET /api/global/project-managers?bypass_jwt=true&_=1747125782158 HTTP/1.1" 200 -
2025-05-13 16:43:05,363 - app - WARNING - 绕过JWT验证: /projects/detail/15
2025-05-13 16:43:05,363 - app - INFO - 直接调用项目详情视图函数，不进行重定向: 项目ID=15
2025-05-13 16:43:05,363 - app.utils.jwt_callbacks - WARNING - JWT验证已被绕过: /projects/detail/15
2025-05-13 16:43:05,364 - app.utils.jwt_callbacks - WARNING - 使用bypass_jwt返回默认用户ID: 1
2025-05-13 16:43:05,364 - app.routes.projects - INFO - 获取项目 15 详情页面 - 用户ID: 1, URL: http://127.0.0.1:5000/projects/detail/15?no_redirect=true&bypass_jwt=true
2025-05-13 16:43:05,377 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 16:43:05] "GET /projects/detail/15?no_redirect=true&bypass_jwt=true HTTP/1.1" 200 -
2025-05-13 16:43:05,405 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 16:43:05] "[36mGET /static/css/bootstrap.min.css HTTP/1.1[0m" 304 -
2025-05-13 16:43:05,406 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 16:43:05] "[36mGET /static/css/bootstrap-icons.css HTTP/1.1[0m" 304 -
2025-05-13 16:43:05,409 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 16:43:05] "[36mGET /static/css/style.css HTTP/1.1[0m" 304 -
2025-05-13 16:43:05,411 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 16:43:05] "[36mGET /static/js/jquery.min.js HTTP/1.1[0m" 304 -
2025-05-13 16:43:05,412 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 16:43:05] "[36mGET /static/js/bootstrap.bundle.min.js HTTP/1.1[0m" 304 -
2025-05-13 16:43:05,413 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 16:43:05] "[36mGET /static/js/utils.js HTTP/1.1[0m" 304 -
2025-05-13 16:43:05,417 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 16:43:05] "[36mGET /static/js/auth.js HTTP/1.1[0m" 304 -
2025-05-13 16:43:05,420 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 16:43:05] "[36mGET /static/js/fix-modals.js HTTP/1.1[0m" 304 -
2025-05-13 16:43:05,421 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 16:43:05] "[36mGET /static/js/csrf.js HTTP/1.1[0m" 304 -
2025-05-13 16:43:05,425 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 16:43:05] "[36mGET /static/js/user-profile.js HTTP/1.1[0m" 304 -
2025-05-13 16:43:05,444 - app - WARNING - 绕过JWT验证: /api/global/users
2025-05-13 16:43:05,447 - app - WARNING - 绕过JWT验证: /api/projects/15/risks
2025-05-13 16:43:05,449 - app - WARNING - 绕过JWT验证: /api/global/users
2025-05-13 16:43:05,449 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 16:43:05] "[33mGET /api/projects/15/risks?bypass_jwt=true&_=1747125785440 HTTP/1.1[0m" 404 -
2025-05-13 16:43:05,450 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 16:43:05] "GET /api/global/users?bypass_jwt=true&_=1747125785440 HTTP/1.1" 200 -
2025-05-13 16:43:05,450 - app - WARNING - 绕过JWT验证: /api/projects/15/risks
2025-05-13 16:43:05,452 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 16:43:05] "GET /api/global/users?bypass_jwt=true&_=1747125785441 HTTP/1.1" 200 -
2025-05-13 16:43:05,453 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 16:43:05] "[33mGET /api/projects/15/risks?bypass_jwt=true&_=1747125785441 HTTP/1.1[0m" 404 -
2025-05-13 16:43:05,458 - app - WARNING - 绕过JWT验证: /api/risks
2025-05-13 16:43:05,459 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 16:43:05] "[36mGET /static/favicon.ico HTTP/1.1[0m" 304 -
2025-05-13 16:43:05,459 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 16:43:05] "[33mGET /api/risks?project_id=15&bypass_jwt=true&_=1747125785440 HTTP/1.1[0m" 404 -
2025-05-13 16:43:05,465 - app - WARNING - 绕过JWT验证: /api/risks
2025-05-13 16:43:05,466 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 16:43:05] "[33mGET /api/risks?project_id=15&bypass_jwt=true&_=1747125785441 HTTP/1.1[0m" 404 -
2025-05-13 16:43:05,467 - app - WARNING - 绕过JWT验证: /api/auth/risks
2025-05-13 16:43:05,468 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 16:43:05] "[33mGET /api/auth/risks?project_id=15&bypass_jwt=true&_=1747125785440 HTTP/1.1[0m" 404 -
2025-05-13 16:43:05,472 - app - WARNING - 绕过JWT验证: /api/auth/risks
2025-05-13 16:43:05,473 - app - WARNING - 绕过JWT验证: /api/noauth/risks
2025-05-13 16:43:05,473 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 16:43:05] "[33mGET /api/auth/risks?project_id=15&bypass_jwt=true&_=1747125785441 HTTP/1.1[0m" 404 -
2025-05-13 16:43:05,475 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 16:43:05] "[33mGET /api/noauth/risks?project_id=15&bypass_jwt=true&_=1747125785440 HTTP/1.1[0m" 404 -
2025-05-13 16:43:05,480 - app - WARNING - 绕过JWT验证: /api/noauth/risks
2025-05-13 16:43:05,480 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 16:43:05] "[33mGET /api/noauth/risks?project_id=15&bypass_jwt=true&_=1747125785441 HTTP/1.1[0m" 404 -
2025-05-13 16:43:08,282 - app - WARNING - 绕过JWT验证: /api/global/users
2025-05-13 16:43:08,287 - app - WARNING - 绕过JWT验证: /api/global/users
2025-05-13 16:43:08,289 - app - WARNING - 绕过JWT验证: /api/global/users
2025-05-13 16:43:08,291 - app - WARNING - 绕过JWT验证: /api/global/users
2025-05-13 16:43:08,292 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 16:43:08] "GET /api/global/users?bypass_jwt=true&_=1747125788278 HTTP/1.1" 200 -
2025-05-13 16:43:08,294 - app - WARNING - 绕过JWT验证: /api/global/users
2025-05-13 16:43:08,296 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 16:43:08] "GET /api/global/users?bypass_jwt=true&_=1747125788281 HTTP/1.1" 200 -
2025-05-13 16:43:08,298 - app - WARNING - 绕过JWT验证: /api/global/users
2025-05-13 16:43:08,303 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 16:43:08] "GET /api/global/users?bypass_jwt=true&_=1747125788282 HTTP/1.1" 200 -
2025-05-13 16:43:08,303 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 16:43:08] "GET /api/global/users?bypass_jwt=true&_=1747125788283 HTTP/1.1" 200 -
2025-05-13 16:43:08,307 - app - WARNING - 绕过JWT验证: /api/global/users
2025-05-13 16:43:08,309 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 16:43:08] "GET /api/global/users?bypass_jwt=true&_=1747125788286 HTTP/1.1" 200 -
2025-05-13 16:43:08,310 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 16:43:08] "GET /api/global/users?bypass_jwt=true&_=1747125788285 HTTP/1.1" 200 -
2025-05-13 16:43:08,317 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 16:43:08] "GET /api/global/users?bypass_jwt=true&_=1747125788281 HTTP/1.1" 200 -
2025-05-13 16:49:22,582 - werkzeug - INFO -  * Detected change in 'D:\\tmp\\work\\app\\routes\\projects.py', reloading
2025-05-13 16:49:22,768 - werkzeug - INFO -  * Restarting with stat
2025-05-13 16:49:23,832 - app.utils.permissions - INFO - 更新权限: manage_users
2025-05-13 16:49:23,833 - app.utils.permissions - INFO - 更新权限: manage_roles
2025-05-13 16:49:23,833 - app.utils.permissions - INFO - 更新权限: manage_all_projects
2025-05-13 16:49:23,835 - app.utils.permissions - INFO - 更新权限: manage_project
2025-05-13 16:49:23,835 - app.utils.permissions - INFO - 更新权限: manage_all_tasks
2025-05-13 16:49:23,836 - app.utils.permissions - INFO - 更新权限: manage_task
2025-05-13 16:49:23,836 - app.utils.permissions - INFO - 更新权限: view_project
2025-05-13 16:49:23,837 - app.utils.permissions - INFO - 更新权限: view_task
2025-05-13 16:49:23,837 - app.utils.permissions - INFO - 更新权限: manage_resources
2025-05-13 16:49:23,838 - app.utils.permissions - INFO - 更新权限: manage_risks
2025-05-13 16:49:23,838 - app.utils.permissions - INFO - 更新权限: view_reports
2025-05-13 16:49:23,840 - app.utils.permissions - INFO - 更新权限: create_task
2025-05-13 16:49:23,841 - app.utils.permissions - INFO - 更新权限: create_project
2025-05-13 16:49:23,841 - app.utils.permissions - INFO - 更新权限: assign_task
2025-05-13 16:49:23,841 - app.utils.permissions - INFO - 更新权限: change_project_status
2025-05-13 16:49:23,842 - app.utils.permissions - INFO - 更新权限: change_task_status
2025-05-13 16:49:23,844 - app.utils.permissions - INFO - 更新角色: admin
2025-05-13 16:49:23,846 - app.utils.permissions - INFO - 为管理员角色添加所有权限: 16个
2025-05-13 16:49:23,846 - app.utils.permissions - INFO - 更新角色: manager
2025-05-13 16:49:23,846 - app.utils.permissions - INFO - 为角色 manager 添加权限: manage_project
2025-05-13 16:49:23,847 - app.utils.permissions - INFO - 为角色 manager 添加权限: manage_task
2025-05-13 16:49:23,847 - app.utils.permissions - INFO - 为角色 manager 添加权限: view_project
2025-05-13 16:49:23,847 - app.utils.permissions - INFO - 为角色 manager 添加权限: view_task
2025-05-13 16:49:23,847 - app.utils.permissions - INFO - 为角色 manager 添加权限: manage_resources
2025-05-13 16:49:23,847 - app.utils.permissions - INFO - 为角色 manager 添加权限: manage_risks
2025-05-13 16:49:23,847 - app.utils.permissions - INFO - 为角色 manager 添加权限: view_reports
2025-05-13 16:49:23,847 - app.utils.permissions - INFO - 为角色 manager 添加权限: create_project
2025-05-13 16:49:23,848 - app.utils.permissions - INFO - 为角色 manager 添加权限: create_task
2025-05-13 16:49:23,848 - app.utils.permissions - INFO - 为角色 manager 添加权限: assign_task
2025-05-13 16:49:23,848 - app.utils.permissions - INFO - 为角色 manager 添加权限: change_project_status
2025-05-13 16:49:23,848 - app.utils.permissions - INFO - 为角色 manager 添加权限: change_task_status
2025-05-13 16:49:23,848 - app.utils.permissions - INFO - 更新角色: user
2025-05-13 16:49:23,849 - app.utils.permissions - INFO - 为角色 user 添加权限: view_project
2025-05-13 16:49:23,850 - app.utils.permissions - INFO - 为角色 user 添加权限: view_task
2025-05-13 16:49:23,850 - app.utils.permissions - INFO - 为角色 user 添加权限: view_reports
2025-05-13 16:49:23,850 - app.utils.permissions - INFO - 角色和权限初始化完成
2025-05-13 16:49:23,850 - __main__ - INFO - 角色和权限初始化成功
2025-05-13 16:49:23,854 - __main__ - INFO - 数据库初始化完成
2025-05-13 16:49:23,868 - __main__ - INFO - 系统资源检查完成
2025-05-13 16:49:23,868 - __main__ - INFO - 开始清理旧数据
2025-05-13 16:49:23,869 - __main__ - INFO - 删除了 0 条过期的资源使用记录
2025-05-13 16:49:23,870 - __main__ - INFO - 删除了 0 条已解决的过期警报
2025-05-13 16:49:23,871 - __main__ - INFO - 旧数据清理完成
2025-05-13 16:49:23,879 - werkzeug - WARNING -  * Debugger is active!
2025-05-13 16:49:23,881 - werkzeug - INFO -  * Debugger PIN: 670-037-726
2025-05-13 16:53:04,086 - app.utils.permissions - INFO - 更新权限: manage_users
2025-05-13 16:53:04,086 - app.utils.permissions - INFO - 更新权限: manage_roles
2025-05-13 16:53:04,087 - app.utils.permissions - INFO - 更新权限: manage_all_projects
2025-05-13 16:53:04,087 - app.utils.permissions - INFO - 更新权限: manage_project
2025-05-13 16:53:04,088 - app.utils.permissions - INFO - 更新权限: manage_all_tasks
2025-05-13 16:53:04,091 - app.utils.permissions - INFO - 更新权限: manage_task
2025-05-13 16:53:04,093 - app.utils.permissions - INFO - 更新权限: view_project
2025-05-13 16:53:04,095 - app.utils.permissions - INFO - 更新权限: view_task
2025-05-13 16:53:04,098 - app.utils.permissions - INFO - 更新权限: manage_resources
2025-05-13 16:53:04,099 - app.utils.permissions - INFO - 更新权限: manage_risks
2025-05-13 16:53:04,102 - app.utils.permissions - INFO - 更新权限: view_reports
2025-05-13 16:53:04,105 - app.utils.permissions - INFO - 更新权限: create_task
2025-05-13 16:53:04,106 - app.utils.permissions - INFO - 更新权限: create_project
2025-05-13 16:53:04,106 - app.utils.permissions - INFO - 更新权限: assign_task
2025-05-13 16:53:04,107 - app.utils.permissions - INFO - 更新权限: change_project_status
2025-05-13 16:53:04,107 - app.utils.permissions - INFO - 更新权限: change_task_status
2025-05-13 16:53:04,110 - app.utils.permissions - INFO - 更新角色: admin
2025-05-13 16:53:04,112 - app.utils.permissions - INFO - 为管理员角色添加所有权限: 16个
2025-05-13 16:53:04,113 - app.utils.permissions - INFO - 更新角色: manager
2025-05-13 16:53:04,114 - app.utils.permissions - INFO - 为角色 manager 添加权限: manage_project
2025-05-13 16:53:04,114 - app.utils.permissions - INFO - 为角色 manager 添加权限: manage_task
2025-05-13 16:53:04,114 - app.utils.permissions - INFO - 为角色 manager 添加权限: view_project
2025-05-13 16:53:04,117 - app.utils.permissions - INFO - 为角色 manager 添加权限: view_task
2025-05-13 16:53:04,117 - app.utils.permissions - INFO - 为角色 manager 添加权限: manage_resources
2025-05-13 16:53:04,117 - app.utils.permissions - INFO - 为角色 manager 添加权限: manage_risks
2025-05-13 16:53:04,117 - app.utils.permissions - INFO - 为角色 manager 添加权限: view_reports
2025-05-13 16:53:04,118 - app.utils.permissions - INFO - 为角色 manager 添加权限: create_project
2025-05-13 16:53:04,118 - app.utils.permissions - INFO - 为角色 manager 添加权限: create_task
2025-05-13 16:53:04,118 - app.utils.permissions - INFO - 为角色 manager 添加权限: assign_task
2025-05-13 16:53:04,118 - app.utils.permissions - INFO - 为角色 manager 添加权限: change_project_status
2025-05-13 16:53:04,118 - app.utils.permissions - INFO - 为角色 manager 添加权限: change_task_status
2025-05-13 16:53:04,119 - app.utils.permissions - INFO - 更新角色: user
2025-05-13 16:53:04,119 - app.utils.permissions - INFO - 为角色 user 添加权限: view_project
2025-05-13 16:53:04,119 - app.utils.permissions - INFO - 为角色 user 添加权限: view_task
2025-05-13 16:53:04,119 - app.utils.permissions - INFO - 为角色 user 添加权限: view_reports
2025-05-13 16:53:04,120 - app.utils.permissions - INFO - 角色和权限初始化完成
2025-05-13 16:53:04,120 - __main__ - INFO - 角色和权限初始化成功
2025-05-13 16:53:04,122 - __main__ - INFO - 数据库初始化完成
2025-05-13 16:53:04,136 - __main__ - INFO - 系统资源检查完成
2025-05-13 16:53:04,136 - __main__ - INFO - 开始清理旧数据
2025-05-13 16:53:04,137 - __main__ - INFO - 删除了 0 条过期的资源使用记录
2025-05-13 16:53:04,138 - __main__ - INFO - 删除了 0 条已解决的过期警报
2025-05-13 16:53:04,139 - __main__ - INFO - 旧数据清理完成
2025-05-13 16:53:04,152 - werkzeug - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:5000
 * Running on http://192.168.0.66:5000
2025-05-13 16:53:04,152 - werkzeug - INFO - [33mPress CTRL+C to quit[0m
2025-05-13 16:53:04,153 - werkzeug - INFO -  * Restarting with stat
2025-05-13 16:53:05,111 - app.utils.permissions - INFO - 更新权限: manage_users
2025-05-13 16:53:05,111 - app.utils.permissions - INFO - 更新权限: manage_roles
2025-05-13 16:53:05,112 - app.utils.permissions - INFO - 更新权限: manage_all_projects
2025-05-13 16:53:05,112 - app.utils.permissions - INFO - 更新权限: manage_project
2025-05-13 16:53:05,112 - app.utils.permissions - INFO - 更新权限: manage_all_tasks
2025-05-13 16:53:05,113 - app.utils.permissions - INFO - 更新权限: manage_task
2025-05-13 16:53:05,113 - app.utils.permissions - INFO - 更新权限: view_project
2025-05-13 16:53:05,113 - app.utils.permissions - INFO - 更新权限: view_task
2025-05-13 16:53:05,114 - app.utils.permissions - INFO - 更新权限: manage_resources
2025-05-13 16:53:05,114 - app.utils.permissions - INFO - 更新权限: manage_risks
2025-05-13 16:53:05,114 - app.utils.permissions - INFO - 更新权限: view_reports
2025-05-13 16:53:05,114 - app.utils.permissions - INFO - 更新权限: create_task
2025-05-13 16:53:05,116 - app.utils.permissions - INFO - 更新权限: create_project
2025-05-13 16:53:05,116 - app.utils.permissions - INFO - 更新权限: assign_task
2025-05-13 16:53:05,116 - app.utils.permissions - INFO - 更新权限: change_project_status
2025-05-13 16:53:05,118 - app.utils.permissions - INFO - 更新权限: change_task_status
2025-05-13 16:53:05,120 - app.utils.permissions - INFO - 更新角色: admin
2025-05-13 16:53:05,122 - app.utils.permissions - INFO - 为管理员角色添加所有权限: 16个
2025-05-13 16:53:05,122 - app.utils.permissions - INFO - 更新角色: manager
2025-05-13 16:53:05,123 - app.utils.permissions - INFO - 为角色 manager 添加权限: manage_project
2025-05-13 16:53:05,125 - app.utils.permissions - INFO - 为角色 manager 添加权限: manage_task
2025-05-13 16:53:05,125 - app.utils.permissions - INFO - 为角色 manager 添加权限: view_project
2025-05-13 16:53:05,126 - app.utils.permissions - INFO - 为角色 manager 添加权限: view_task
2025-05-13 16:53:05,126 - app.utils.permissions - INFO - 为角色 manager 添加权限: manage_resources
2025-05-13 16:53:05,126 - app.utils.permissions - INFO - 为角色 manager 添加权限: manage_risks
2025-05-13 16:53:05,126 - app.utils.permissions - INFO - 为角色 manager 添加权限: view_reports
2025-05-13 16:53:05,126 - app.utils.permissions - INFO - 为角色 manager 添加权限: create_project
2025-05-13 16:53:05,126 - app.utils.permissions - INFO - 为角色 manager 添加权限: create_task
2025-05-13 16:53:05,126 - app.utils.permissions - INFO - 为角色 manager 添加权限: assign_task
2025-05-13 16:53:05,126 - app.utils.permissions - INFO - 为角色 manager 添加权限: change_project_status
2025-05-13 16:53:05,127 - app.utils.permissions - INFO - 为角色 manager 添加权限: change_task_status
2025-05-13 16:53:05,127 - app.utils.permissions - INFO - 更新角色: user
2025-05-13 16:53:05,128 - app.utils.permissions - INFO - 为角色 user 添加权限: view_project
2025-05-13 16:53:05,128 - app.utils.permissions - INFO - 为角色 user 添加权限: view_task
2025-05-13 16:53:05,128 - app.utils.permissions - INFO - 为角色 user 添加权限: view_reports
2025-05-13 16:53:05,128 - app.utils.permissions - INFO - 角色和权限初始化完成
2025-05-13 16:53:05,128 - __main__ - INFO - 角色和权限初始化成功
2025-05-13 16:53:05,131 - __main__ - INFO - 数据库初始化完成
2025-05-13 16:53:05,145 - __main__ - INFO - 系统资源检查完成
2025-05-13 16:53:05,145 - __main__ - INFO - 开始清理旧数据
2025-05-13 16:53:05,146 - __main__ - INFO - 删除了 0 条过期的资源使用记录
2025-05-13 16:53:05,147 - __main__ - INFO - 删除了 0 条已解决的过期警报
2025-05-13 16:53:05,147 - __main__ - INFO - 旧数据清理完成
2025-05-13 16:53:05,154 - werkzeug - WARNING -  * Debugger is active!
2025-05-13 16:53:05,157 - werkzeug - INFO -  * Debugger PIN: 670-037-726
2025-05-13 16:53:10,424 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 16:53:10] "GET /login HTTP/1.1" 200 -
2025-05-13 16:53:10,535 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 16:53:10] "GET /static/css/style.css HTTP/1.1" 200 -
2025-05-13 16:53:10,536 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 16:53:10] "GET /static/css/bootstrap-icons.css HTTP/1.1" 200 -
2025-05-13 16:53:10,536 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 16:53:10] "GET /static/css/bootstrap.min.css HTTP/1.1" 200 -
2025-05-13 16:53:10,545 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 16:53:10] "GET /static/js/jquery.min.js HTTP/1.1" 200 -
2025-05-13 16:53:10,549 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 16:53:10] "GET /static/js/bootstrap.bundle.min.js HTTP/1.1" 200 -
2025-05-13 16:53:10,549 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 16:53:10] "GET /static/js/utils.js HTTP/1.1" 200 -
2025-05-13 16:53:10,550 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 16:53:10] "GET /static/images/background.png HTTP/1.1" 200 -
2025-05-13 16:53:10,552 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 16:53:10] "GET /static/js/auth.js HTTP/1.1" 200 -
2025-05-13 16:53:10,582 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 16:53:10] "GET /static/js/fix-modals.js HTTP/1.1" 200 -
2025-05-13 16:53:10,582 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 16:53:10] "GET /static/js/csrf.js HTTP/1.1" 200 -
2025-05-13 16:53:10,593 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 16:53:10] "GET /static/js/user-profile.js HTTP/1.1" 200 -
2025-05-13 16:53:10,595 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 16:53:10] "GET /static/js/background-helper.js HTTP/1.1" 200 -
2025-05-13 16:53:10,596 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 16:53:10] "GET /static/uploads/background.png HTTP/1.1" 200 -
2025-05-13 16:53:10,613 - app - WARNING - 绕过JWT验证: /auth/user_info
2025-05-13 16:53:10,615 - app.utils.jwt_callbacks - WARNING - JWT验证已被绕过: /auth/user_info
2025-05-13 16:53:10,615 - app - INFO - 获取用户信息 - bypass_jwt: True
2025-05-13 16:53:10,615 - app - INFO - 使用默认管理员用户(ID=1)
2025-05-13 16:53:10,623 - app - INFO - 成功获取用户 admin 的信息
2025-05-13 16:53:10,624 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 16:53:10] "GET /auth/user_info?_=1747126390609&bypass_jwt=true HTTP/1.1" 200 -
2025-05-13 16:53:10,763 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 16:53:10] "GET /static/favicon.ico HTTP/1.1" 200 -
2025-05-13 16:53:36,190 - app - INFO - 登录请求 - 方法: POST, 内容类型: application/x-www-form-urlencoded
2025-05-13 16:53:36,190 - app - INFO - 请求头: {'Host': '127.0.0.1:5000', 'Connection': 'keep-alive', 'Content-Length': '135', 'Cache-Control': 'max-age=0', 'Sec-Ch-Ua': '"Chromium";v="136", "Microsoft Edge";v="136", "Not.A/Brand";v="99"', 'Sec-Ch-Ua-Mobile': '?0', 'Sec-Ch-Ua-Platform': '"Windows"', 'Origin': 'http://127.0.0.1:5000', 'Content-Type': 'application/x-www-form-urlencoded', 'Upgrade-Insecure-Requests': '1', 'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36 Edg/136.0.0.0', 'Accept': 'text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.7', 'Sec-Fetch-Site': 'same-origin', 'Sec-Fetch-Mode': 'navigate', 'Sec-Fetch-User': '?1', 'Sec-Fetch-Dest': 'document', 'Referer': 'http://127.0.0.1:5000/login', 'Accept-Encoding': 'gzip, deflate, br, zstd', 'Accept-Language': 'zh-CN,zh;q=0.9,en;q=0.8,en-GB;q=0.7,en-US;q=0.6', 'Cookie': 'session=eyJjc3JmX3Rva2VuIjoiY2VkNThkNGQ1ZjM0Y2NmYmNmNWUxZDhkNGEyNTc0MWVkNjFmNTA2YSJ9.aCMIdg.G4Z6Tt8bEUHQpBMT5IgMrjO_7Vc; user_roles=admin; is_admin=true; admin=true'}
2025-05-13 16:53:36,191 - app - INFO - 处理表单格式的登录请求
2025-05-13 16:53:36,191 - app - INFO - 表单数据: username=admin, password=********
2025-05-13 16:53:36,384 - app - INFO - 已生成CSRF令牌: ImNlZDU4ZD...
2025-05-13 16:53:36,385 - app - INFO - 用户 admin 的角色: ['admin']
2025-05-13 16:53:36,385 - app - INFO - 用户 admin 是否是管理员: True
2025-05-13 16:53:36,397 - app - INFO - 用户登录成功: admin
2025-05-13 16:53:36,398 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 16:53:36] "[32mPOST /auth/login HTTP/1.1[0m" 302 -
2025-05-13 16:53:36,405 - app - DEBUG - Dashboard route accessed
2025-05-13 16:53:36,406 - app - DEBUG - Current user ID: 1
2025-05-13 16:53:36,417 - app - DEBUG - Dashboard data prepared for user: admin
2025-05-13 16:53:36,426 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 16:53:36] "GET /dashboard HTTP/1.1" 200 -
2025-05-13 16:53:36,453 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 16:53:36] "[36mGET /static/css/bootstrap.min.css HTTP/1.1[0m" 304 -
2025-05-13 16:53:36,455 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 16:53:36] "[36mGET /static/css/bootstrap-icons.css HTTP/1.1[0m" 304 -
2025-05-13 16:53:36,456 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 16:53:36] "[36mGET /static/js/jquery.min.js HTTP/1.1[0m" 304 -
2025-05-13 16:53:36,457 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 16:53:36] "[36mGET /static/css/style.css HTTP/1.1[0m" 304 -
2025-05-13 16:53:36,459 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 16:53:36] "[36mGET /static/js/bootstrap.bundle.min.js HTTP/1.1[0m" 304 -
2025-05-13 16:53:36,464 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 16:53:36] "[36mGET /static/js/auth.js HTTP/1.1[0m" 304 -
2025-05-13 16:53:36,465 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 16:53:36] "[36mGET /static/js/utils.js HTTP/1.1[0m" 304 -
2025-05-13 16:53:36,466 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 16:53:36] "[36mGET /static/js/fix-modals.js HTTP/1.1[0m" 304 -
2025-05-13 16:53:36,467 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 16:53:36] "[36mGET /static/js/csrf.js HTTP/1.1[0m" 304 -
2025-05-13 16:53:36,468 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 16:53:36] "[36mGET /static/js/user-profile.js HTTP/1.1[0m" 304 -
2025-05-13 16:53:36,490 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 16:53:36] "GET /static/css/fonts/bootstrap-icons.woff2 HTTP/1.1" 200 -
2025-05-13 16:53:36,519 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 16:53:36] "[36mGET /static/favicon.ico HTTP/1.1[0m" 304 -
2025-05-13 16:53:37,443 - app - WARNING - 绕过JWT验证: /projects
2025-05-13 16:53:37,444 - app.utils.jwt_callbacks - WARNING - JWT验证已被绕过: /projects
2025-05-13 16:53:37,444 - app.routes.main - INFO - JWT bypass enabled for projects - Using test user
2025-05-13 16:53:37,456 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 16:53:37] "GET /projects?bypass_jwt=true HTTP/1.1" 200 -
2025-05-13 16:53:37,485 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 16:53:37] "[36mGET /static/css/bootstrap.min.css HTTP/1.1[0m" 304 -
2025-05-13 16:53:37,487 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 16:53:37] "[36mGET /static/css/bootstrap-icons.css HTTP/1.1[0m" 304 -
2025-05-13 16:53:37,488 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 16:53:37] "GET /static/css/frappe-gantt.css HTTP/1.1" 200 -
2025-05-13 16:53:37,491 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 16:53:37] "[36mGET /static/css/style.css HTTP/1.1[0m" 304 -
2025-05-13 16:53:37,492 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 16:53:37] "GET /static/js/frappe-gantt.min.js HTTP/1.1" 200 -
2025-05-13 16:53:37,493 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 16:53:37] "[36mGET /static/js/jquery.min.js HTTP/1.1[0m" 304 -
2025-05-13 16:53:37,496 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 16:53:37] "[36mGET /static/js/bootstrap.bundle.min.js HTTP/1.1[0m" 304 -
2025-05-13 16:53:37,497 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 16:53:37] "[36mGET /static/js/utils.js HTTP/1.1[0m" 304 -
2025-05-13 16:53:37,498 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 16:53:37] "[36mGET /static/js/auth.js HTTP/1.1[0m" 304 -
2025-05-13 16:53:37,499 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 16:53:37] "[36mGET /static/js/fix-modals.js HTTP/1.1[0m" 304 -
2025-05-13 16:53:37,505 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 16:53:37] "[36mGET /static/js/csrf.js HTTP/1.1[0m" 304 -
2025-05-13 16:53:37,505 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 16:53:37] "[36mGET /static/js/user-profile.js HTTP/1.1[0m" 304 -
2025-05-13 16:53:37,533 - app - WARNING - 绕过JWT验证: /api/global/users
2025-05-13 16:53:37,537 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 16:53:37] "GET /api/global/users?bypass_jwt=true&_=1747126417529 HTTP/1.1" 200 -
2025-05-13 16:53:37,544 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 16:53:37] "[36mGET /static/favicon.ico HTTP/1.1[0m" 304 -
2025-05-13 16:53:37,545 - app - WARNING - 绕过JWT验证: /api/project-managers
2025-05-13 16:53:37,546 - app.routes.projects - INFO - 获取所有用户作为项目负责人候选
2025-05-13 16:53:37,547 - app.routes.projects - INFO - 返回所有用户作为项目负责人，共 9 位用户
2025-05-13 16:53:37,548 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 16:53:37] "GET /api/project-managers?bypass_jwt=true&_=1747126417542 HTTP/1.1" 200 -
2025-05-13 16:53:43,688 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 16:53:43] "[36mGET /static/css/bootstrap.min.css HTTP/1.1[0m" 304 -
2025-05-13 16:53:43,690 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 16:53:43] "[36mGET /static/css/bootstrap-icons.css HTTP/1.1[0m" 304 -
2025-05-13 16:53:43,692 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 16:53:43] "[36mGET /static/css/style.css HTTP/1.1[0m" 304 -
2025-05-13 16:53:43,693 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 16:53:43] "[36mGET /static/css/frappe-gantt.css HTTP/1.1[0m" 304 -
2025-05-13 16:53:43,694 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 16:53:43] "[33mGET /.well-known/appspecific/com.chrome.devtools.json HTTP/1.1[0m" 404 -
2025-05-13 16:53:43,778 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 16:53:43] "GET /static/css/bootstrap.min.css.map HTTP/1.1" 200 -
2025-05-13 16:53:43,890 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 16:53:43] "GET /static/js/bootstrap.bundle.min.js.map HTTP/1.1" 200 -
2025-05-13 16:56:11,158 - app.utils.permissions - INFO - 更新权限: manage_users
2025-05-13 16:56:11,159 - app.utils.permissions - INFO - 更新权限: manage_roles
2025-05-13 16:56:11,160 - app.utils.permissions - INFO - 更新权限: manage_all_projects
2025-05-13 16:56:11,160 - app.utils.permissions - INFO - 更新权限: manage_project
2025-05-13 16:56:11,161 - app.utils.permissions - INFO - 更新权限: manage_all_tasks
2025-05-13 16:56:11,161 - app.utils.permissions - INFO - 更新权限: manage_task
2025-05-13 16:56:11,162 - app.utils.permissions - INFO - 更新权限: view_project
2025-05-13 16:56:11,162 - app.utils.permissions - INFO - 更新权限: view_task
2025-05-13 16:56:11,163 - app.utils.permissions - INFO - 更新权限: manage_resources
2025-05-13 16:56:11,163 - app.utils.permissions - INFO - 更新权限: manage_risks
2025-05-13 16:56:11,163 - app.utils.permissions - INFO - 更新权限: view_reports
2025-05-13 16:56:11,164 - app.utils.permissions - INFO - 更新权限: create_task
2025-05-13 16:56:11,165 - app.utils.permissions - INFO - 更新权限: create_project
2025-05-13 16:56:11,165 - app.utils.permissions - INFO - 更新权限: assign_task
2025-05-13 16:56:11,167 - app.utils.permissions - INFO - 更新权限: change_project_status
2025-05-13 16:56:11,167 - app.utils.permissions - INFO - 更新权限: change_task_status
2025-05-13 16:56:11,170 - app.utils.permissions - INFO - 更新角色: admin
2025-05-13 16:56:11,172 - app.utils.permissions - INFO - 为管理员角色添加所有权限: 16个
2025-05-13 16:56:11,173 - app.utils.permissions - INFO - 更新角色: manager
2025-05-13 16:56:11,173 - app.utils.permissions - INFO - 为角色 manager 添加权限: manage_project
2025-05-13 16:56:11,175 - app.utils.permissions - INFO - 为角色 manager 添加权限: manage_task
2025-05-13 16:56:11,175 - app.utils.permissions - INFO - 为角色 manager 添加权限: view_project
2025-05-13 16:56:11,175 - app.utils.permissions - INFO - 为角色 manager 添加权限: view_task
2025-05-13 16:56:11,175 - app.utils.permissions - INFO - 为角色 manager 添加权限: manage_resources
2025-05-13 16:56:11,175 - app.utils.permissions - INFO - 为角色 manager 添加权限: manage_risks
2025-05-13 16:56:11,175 - app.utils.permissions - INFO - 为角色 manager 添加权限: view_reports
2025-05-13 16:56:11,175 - app.utils.permissions - INFO - 为角色 manager 添加权限: create_project
2025-05-13 16:56:11,176 - app.utils.permissions - INFO - 为角色 manager 添加权限: create_task
2025-05-13 16:56:11,176 - app.utils.permissions - INFO - 为角色 manager 添加权限: assign_task
2025-05-13 16:56:11,176 - app.utils.permissions - INFO - 为角色 manager 添加权限: change_project_status
2025-05-13 16:56:11,176 - app.utils.permissions - INFO - 为角色 manager 添加权限: change_task_status
2025-05-13 16:56:11,176 - app.utils.permissions - INFO - 更新角色: user
2025-05-13 16:56:11,177 - app.utils.permissions - INFO - 为角色 user 添加权限: view_project
2025-05-13 16:56:11,177 - app.utils.permissions - INFO - 为角色 user 添加权限: view_task
2025-05-13 16:56:11,177 - app.utils.permissions - INFO - 为角色 user 添加权限: view_reports
2025-05-13 16:56:11,177 - app.utils.permissions - INFO - 角色和权限初始化完成
2025-05-13 16:56:11,178 - __main__ - INFO - 角色和权限初始化成功
2025-05-13 16:56:11,181 - __main__ - INFO - 数据库初始化完成
2025-05-13 16:56:11,196 - __main__ - INFO - 系统资源检查完成
2025-05-13 16:56:11,196 - __main__ - INFO - 开始清理旧数据
2025-05-13 16:56:11,199 - __main__ - INFO - 删除了 0 条过期的资源使用记录
2025-05-13 16:56:11,200 - __main__ - INFO - 删除了 0 条已解决的过期警报
2025-05-13 16:56:11,200 - __main__ - INFO - 旧数据清理完成
2025-05-13 16:56:11,214 - werkzeug - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:5000
 * Running on http://192.168.0.66:5000
2025-05-13 16:56:11,214 - werkzeug - INFO - [33mPress CTRL+C to quit[0m
2025-05-13 16:56:11,215 - werkzeug - INFO -  * Restarting with stat
2025-05-13 16:56:12,066 - app.utils.permissions - INFO - 更新权限: manage_users
2025-05-13 16:56:12,068 - app.utils.permissions - INFO - 更新权限: manage_roles
2025-05-13 16:56:12,068 - app.utils.permissions - INFO - 更新权限: manage_all_projects
2025-05-13 16:56:12,069 - app.utils.permissions - INFO - 更新权限: manage_project
2025-05-13 16:56:12,069 - app.utils.permissions - INFO - 更新权限: manage_all_tasks
2025-05-13 16:56:12,070 - app.utils.permissions - INFO - 更新权限: manage_task
2025-05-13 16:56:12,070 - app.utils.permissions - INFO - 更新权限: view_project
2025-05-13 16:56:12,071 - app.utils.permissions - INFO - 更新权限: view_task
2025-05-13 16:56:12,071 - app.utils.permissions - INFO - 更新权限: manage_resources
2025-05-13 16:56:12,071 - app.utils.permissions - INFO - 更新权限: manage_risks
2025-05-13 16:56:12,071 - app.utils.permissions - INFO - 更新权限: view_reports
2025-05-13 16:56:12,072 - app.utils.permissions - INFO - 更新权限: create_task
2025-05-13 16:56:12,072 - app.utils.permissions - INFO - 更新权限: create_project
2025-05-13 16:56:12,072 - app.utils.permissions - INFO - 更新权限: assign_task
2025-05-13 16:56:12,073 - app.utils.permissions - INFO - 更新权限: change_project_status
2025-05-13 16:56:12,073 - app.utils.permissions - INFO - 更新权限: change_task_status
2025-05-13 16:56:12,075 - app.utils.permissions - INFO - 更新角色: admin
2025-05-13 16:56:12,077 - app.utils.permissions - INFO - 为管理员角色添加所有权限: 16个
2025-05-13 16:56:12,079 - app.utils.permissions - INFO - 更新角色: manager
2025-05-13 16:56:12,079 - app.utils.permissions - INFO - 为角色 manager 添加权限: manage_project
2025-05-13 16:56:12,079 - app.utils.permissions - INFO - 为角色 manager 添加权限: manage_task
2025-05-13 16:56:12,080 - app.utils.permissions - INFO - 为角色 manager 添加权限: view_project
2025-05-13 16:56:12,080 - app.utils.permissions - INFO - 为角色 manager 添加权限: view_task
2025-05-13 16:56:12,080 - app.utils.permissions - INFO - 为角色 manager 添加权限: manage_resources
2025-05-13 16:56:12,080 - app.utils.permissions - INFO - 为角色 manager 添加权限: manage_risks
2025-05-13 16:56:12,080 - app.utils.permissions - INFO - 为角色 manager 添加权限: view_reports
2025-05-13 16:56:12,080 - app.utils.permissions - INFO - 为角色 manager 添加权限: create_project
2025-05-13 16:56:12,080 - app.utils.permissions - INFO - 为角色 manager 添加权限: create_task
2025-05-13 16:56:12,080 - app.utils.permissions - INFO - 为角色 manager 添加权限: assign_task
2025-05-13 16:56:12,080 - app.utils.permissions - INFO - 为角色 manager 添加权限: change_project_status
2025-05-13 16:56:12,081 - app.utils.permissions - INFO - 为角色 manager 添加权限: change_task_status
2025-05-13 16:56:12,081 - app.utils.permissions - INFO - 更新角色: user
2025-05-13 16:56:12,082 - app.utils.permissions - INFO - 为角色 user 添加权限: view_project
2025-05-13 16:56:12,082 - app.utils.permissions - INFO - 为角色 user 添加权限: view_task
2025-05-13 16:56:12,082 - app.utils.permissions - INFO - 为角色 user 添加权限: view_reports
2025-05-13 16:56:12,082 - app.utils.permissions - INFO - 角色和权限初始化完成
2025-05-13 16:56:12,082 - __main__ - INFO - 角色和权限初始化成功
2025-05-13 16:56:12,086 - __main__ - INFO - 数据库初始化完成
2025-05-13 16:56:12,100 - __main__ - INFO - 系统资源检查完成
2025-05-13 16:56:12,100 - __main__ - INFO - 开始清理旧数据
2025-05-13 16:56:12,103 - __main__ - INFO - 删除了 0 条过期的资源使用记录
2025-05-13 16:56:12,104 - __main__ - INFO - 删除了 0 条已解决的过期警报
2025-05-13 16:56:12,104 - __main__ - INFO - 旧数据清理完成
2025-05-13 16:56:12,109 - werkzeug - WARNING -  * Debugger is active!
2025-05-13 16:56:12,112 - werkzeug - INFO -  * Debugger PIN: 670-037-726
2025-05-13 16:56:35,928 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 16:56:35] "GET /login HTTP/1.1" 200 -
2025-05-13 16:56:36,176 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 16:56:36] "GET /static/css/bootstrap.min.css HTTP/1.1" 200 -
2025-05-13 16:56:36,183 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 16:56:36] "GET /static/css/style.css HTTP/1.1" 200 -
2025-05-13 16:56:36,184 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 16:56:36] "GET /static/js/auth.js HTTP/1.1" 200 -
2025-05-13 16:56:36,191 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 16:56:36] "GET /static/js/bootstrap.bundle.min.js HTTP/1.1" 200 -
2025-05-13 16:56:36,191 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 16:56:36] "GET /static/images/background.png HTTP/1.1" 200 -
2025-05-13 16:56:36,192 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 16:56:36] "GET /static/css/bootstrap-icons.css HTTP/1.1" 200 -
2025-05-13 16:56:36,193 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 16:56:36] "GET /static/js/fix-modals.js HTTP/1.1" 200 -
2025-05-13 16:56:36,194 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 16:56:36] "GET /static/js/jquery.min.js HTTP/1.1" 200 -
2025-05-13 16:56:36,194 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 16:56:36] "GET /static/js/utils.js HTTP/1.1" 200 -
2025-05-13 16:56:36,204 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 16:56:36] "GET /static/js/csrf.js HTTP/1.1" 200 -
2025-05-13 16:56:36,217 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 16:56:36] "GET /static/js/user-profile.js HTTP/1.1" 200 -
2025-05-13 16:56:36,217 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 16:56:36] "GET /static/js/background-helper.js HTTP/1.1" 200 -
2025-05-13 16:56:36,218 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 16:56:36] "GET /static/uploads/background.png HTTP/1.1" 200 -
2025-05-13 16:56:36,243 - app - WARNING - 绕过JWT验证: /auth/user_info
2025-05-13 16:56:36,244 - app.utils.jwt_callbacks - WARNING - JWT验证已被绕过: /auth/user_info
2025-05-13 16:56:36,244 - app - INFO - 获取用户信息 - bypass_jwt: True
2025-05-13 16:56:36,245 - app - INFO - 使用默认管理员用户(ID=1)
2025-05-13 16:56:36,260 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 16:56:36] "GET /static/favicon.ico HTTP/1.1" 200 -
2025-05-13 16:56:36,260 - app - INFO - 成功获取用户 admin 的信息
2025-05-13 16:56:36,262 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 16:56:36] "GET /auth/user_info?_=1747126596240&bypass_jwt=true HTTP/1.1" 200 -
2025-05-13 16:56:38,277 - app - INFO - 登录请求 - 方法: POST, 内容类型: application/x-www-form-urlencoded
2025-05-13 16:56:38,278 - app - INFO - 请求头: {'Host': '127.0.0.1:5000', 'Connection': 'keep-alive', 'Content-Length': '135', 'Cache-Control': 'max-age=0', 'Sec-Ch-Ua': '"Chromium";v="136", "Microsoft Edge";v="136", "Not.A/Brand";v="99"', 'Sec-Ch-Ua-Mobile': '?0', 'Sec-Ch-Ua-Platform': '"Windows"', 'Origin': 'http://127.0.0.1:5000', 'Content-Type': 'application/x-www-form-urlencoded', 'Upgrade-Insecure-Requests': '1', 'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36 Edg/136.0.0.0', 'Accept': 'text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.7', 'Sec-Fetch-Site': 'same-origin', 'Sec-Fetch-Mode': 'navigate', 'Sec-Fetch-User': '?1', 'Sec-Fetch-Dest': 'document', 'Referer': 'http://127.0.0.1:5000/login', 'Accept-Encoding': 'gzip, deflate, br, zstd', 'Accept-Language': 'zh-CN,zh;q=0.9,en;q=0.8,en-GB;q=0.7,en-US;q=0.6', 'Cookie': 'session=eyJjc3JmX3Rva2VuIjoiZWE2NjA0MmY2MTY4MzBiMTU1ZjQ1MDk4ZDEzODgzNTMzNDNkMTI0YyJ9.aCMJQw.mJtuoZkTKgS3Emqo0DRybtRGE7g; user_roles=admin; is_admin=true; admin=true'}
2025-05-13 16:56:38,278 - app - INFO - 处理表单格式的登录请求
2025-05-13 16:56:38,279 - app - INFO - 表单数据: username=admin, password=********
2025-05-13 16:56:38,765 - app - INFO - 已生成CSRF令牌: ImVhNjYwND...
2025-05-13 16:56:38,767 - app - INFO - 用户 admin 的角色: ['admin']
2025-05-13 16:56:38,767 - app - INFO - 用户 admin 是否是管理员: True
2025-05-13 16:56:38,794 - app - INFO - 用户登录成功: admin
2025-05-13 16:56:38,796 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 16:56:38] "[32mPOST /auth/login HTTP/1.1[0m" 302 -
2025-05-13 16:56:38,803 - app - DEBUG - Dashboard route accessed
2025-05-13 16:56:38,803 - app - DEBUG - Current user ID: 1
2025-05-13 16:56:38,839 - app - DEBUG - Dashboard data prepared for user: admin
2025-05-13 16:56:38,892 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 16:56:38] "GET /dashboard HTTP/1.1" 200 -
2025-05-13 16:56:38,920 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 16:56:38] "[36mGET /static/css/bootstrap-icons.css HTTP/1.1[0m" 304 -
2025-05-13 16:56:38,920 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 16:56:38] "[36mGET /static/css/bootstrap.min.css HTTP/1.1[0m" 304 -
2025-05-13 16:56:38,925 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 16:56:38] "[36mGET /static/css/style.css HTTP/1.1[0m" 304 -
2025-05-13 16:56:38,925 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 16:56:38] "[36mGET /static/js/jquery.min.js HTTP/1.1[0m" 304 -
2025-05-13 16:56:38,927 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 16:56:38] "[36mGET /static/js/bootstrap.bundle.min.js HTTP/1.1[0m" 304 -
2025-05-13 16:56:38,929 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 16:56:38] "[36mGET /static/js/utils.js HTTP/1.1[0m" 304 -
2025-05-13 16:56:38,938 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 16:56:38] "[36mGET /static/js/csrf.js HTTP/1.1[0m" 304 -
2025-05-13 16:56:38,938 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 16:56:38] "[36mGET /static/js/fix-modals.js HTTP/1.1[0m" 304 -
2025-05-13 16:56:38,939 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 16:56:38] "[36mGET /static/js/auth.js HTTP/1.1[0m" 304 -
2025-05-13 16:56:38,941 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 16:56:38] "[36mGET /static/js/user-profile.js HTTP/1.1[0m" 304 -
2025-05-13 16:56:38,966 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 16:56:38] "GET /static/css/fonts/bootstrap-icons.woff2 HTTP/1.1" 200 -
2025-05-13 16:56:38,986 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 16:56:38] "[36mGET /static/favicon.ico HTTP/1.1[0m" 304 -
2025-05-13 16:56:40,212 - app - WARNING - 绕过JWT验证: /projects
2025-05-13 16:56:40,213 - app.utils.jwt_callbacks - WARNING - JWT验证已被绕过: /projects
2025-05-13 16:56:40,213 - app.routes.main - INFO - JWT bypass enabled for projects - Using test user
2025-05-13 16:56:40,249 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 16:56:40] "GET /projects?bypass_jwt=true HTTP/1.1" 200 -
2025-05-13 16:56:40,281 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 16:56:40] "[36mGET /static/css/bootstrap.min.css HTTP/1.1[0m" 304 -
2025-05-13 16:56:40,281 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 16:56:40] "[36mGET /static/css/bootstrap-icons.css HTTP/1.1[0m" 304 -
2025-05-13 16:56:40,282 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 16:56:40] "[36mGET /static/css/style.css HTTP/1.1[0m" 304 -
2025-05-13 16:56:40,283 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 16:56:40] "[36mGET /static/js/jquery.min.js HTTP/1.1[0m" 304 -
2025-05-13 16:56:40,287 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 16:56:40] "GET /static/css/frappe-gantt.css HTTP/1.1" 200 -
2025-05-13 16:56:40,289 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 16:56:40] "GET /static/js/frappe-gantt.min.js HTTP/1.1" 200 -
2025-05-13 16:56:40,292 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 16:56:40] "[36mGET /static/js/bootstrap.bundle.min.js HTTP/1.1[0m" 304 -
2025-05-13 16:56:40,295 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 16:56:40] "[36mGET /static/js/utils.js HTTP/1.1[0m" 304 -
2025-05-13 16:56:40,297 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 16:56:40] "[36mGET /static/js/auth.js HTTP/1.1[0m" 304 -
2025-05-13 16:56:40,298 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 16:56:40] "[36mGET /static/js/fix-modals.js HTTP/1.1[0m" 304 -
2025-05-13 16:56:40,302 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 16:56:40] "[36mGET /static/js/csrf.js HTTP/1.1[0m" 304 -
2025-05-13 16:56:40,304 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 16:56:40] "[36mGET /static/js/user-profile.js HTTP/1.1[0m" 304 -
2025-05-13 16:56:40,325 - app - WARNING - 绕过JWT验证: /api/global/users
2025-05-13 16:56:40,330 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 16:56:40] "GET /api/global/users?bypass_jwt=true&_=1747126600322 HTTP/1.1" 200 -
2025-05-13 16:56:40,337 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 16:56:40] "[36mGET /static/favicon.ico HTTP/1.1[0m" 304 -
2025-05-13 16:56:40,338 - app - WARNING - 绕过JWT验证: /api/project-managers
2025-05-13 16:56:40,339 - app.routes.projects - INFO - 获取所有用户作为项目负责人候选
2025-05-13 16:56:40,341 - app.routes.projects - INFO - 返回所有用户作为项目负责人，共 9 位用户
2025-05-13 16:56:40,342 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 16:56:40] "GET /api/project-managers?bypass_jwt=true&_=1747126600333 HTTP/1.1" 200 -
2025-05-13 16:56:46,433 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 16:56:46] "[36mGET /static/css/bootstrap.min.css HTTP/1.1[0m" 304 -
2025-05-13 16:56:46,435 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 16:56:46] "[36mGET /static/css/bootstrap-icons.css HTTP/1.1[0m" 304 -
2025-05-13 16:56:46,438 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 16:56:46] "[36mGET /static/css/style.css HTTP/1.1[0m" 304 -
2025-05-13 16:56:46,440 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 16:56:46] "[36mGET /static/css/frappe-gantt.css HTTP/1.1[0m" 304 -
2025-05-13 16:56:46,441 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 16:56:46] "[33mGET /.well-known/appspecific/com.chrome.devtools.json HTTP/1.1[0m" 404 -
2025-05-13 16:56:46,470 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 16:56:46] "GET /static/css/bootstrap.min.css.map HTTP/1.1" 200 -
2025-05-13 16:56:46,576 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 16:56:46] "GET /static/js/bootstrap.bundle.min.js.map HTTP/1.1" 200 -
2025-05-13 17:04:33,024 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 17:04:33] "GET /login HTTP/1.1" 200 -
2025-05-13 17:04:33,072 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 17:04:33] "GET /static/css/bootstrap.min.css HTTP/1.1" 200 -
2025-05-13 17:04:33,075 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 17:04:33] "GET /static/css/bootstrap-icons.css HTTP/1.1" 200 -
2025-05-13 17:04:33,076 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 17:04:33] "GET /static/css/style.css HTTP/1.1" 200 -
2025-05-13 17:04:33,077 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 17:04:33] "GET /static/js/jquery.min.js HTTP/1.1" 200 -
2025-05-13 17:04:33,079 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 17:04:33] "GET /static/js/bootstrap.bundle.min.js HTTP/1.1" 200 -
2025-05-13 17:04:33,081 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 17:04:33] "GET /static/js/utils.js HTTP/1.1" 200 -
2025-05-13 17:04:33,086 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 17:04:33] "GET /static/js/auth.js HTTP/1.1" 200 -
2025-05-13 17:04:33,087 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 17:04:33] "GET /static/images/background.png HTTP/1.1" 200 -
2025-05-13 17:04:33,095 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 17:04:33] "GET /static/js/fix-modals.js HTTP/1.1" 200 -
2025-05-13 17:04:33,108 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 17:04:33] "GET /static/js/csrf.js HTTP/1.1" 200 -
2025-05-13 17:04:33,110 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 17:04:33] "GET /static/js/user-profile.js HTTP/1.1" 200 -
2025-05-13 17:04:33,110 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 17:04:33] "GET /static/js/background-helper.js HTTP/1.1" 200 -
2025-05-13 17:04:33,111 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 17:04:33] "GET /static/uploads/background.png HTTP/1.1" 200 -
2025-05-13 17:04:33,137 - app - WARNING - 绕过JWT验证: /auth/user_info
2025-05-13 17:04:33,137 - app.utils.jwt_callbacks - WARNING - JWT验证已被绕过: /auth/user_info
2025-05-13 17:04:33,138 - app - INFO - 获取用户信息 - bypass_jwt: True
2025-05-13 17:04:33,138 - app - INFO - 使用默认管理员用户(ID=1)
2025-05-13 17:04:33,205 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 17:04:33] "GET /static/favicon.ico HTTP/1.1" 200 -
2025-05-13 17:04:33,208 - app - INFO - 成功获取用户 admin 的信息
2025-05-13 17:04:33,210 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 17:04:33] "GET /auth/user_info?_=1747127073134&bypass_jwt=true HTTP/1.1" 200 -
2025-05-13 17:04:35,373 - app - INFO - 登录请求 - 方法: POST, 内容类型: application/x-www-form-urlencoded
2025-05-13 17:04:35,373 - app - INFO - 请求头: {'Host': '127.0.0.1:5000', 'Connection': 'keep-alive', 'Content-Length': '135', 'Cache-Control': 'max-age=0', 'Sec-Ch-Ua': '"Chromium";v="136", "Microsoft Edge";v="136", "Not.A/Brand";v="99"', 'Sec-Ch-Ua-Mobile': '?0', 'Sec-Ch-Ua-Platform': '"Windows"', 'Origin': 'http://127.0.0.1:5000', 'Content-Type': 'application/x-www-form-urlencoded', 'Upgrade-Insecure-Requests': '1', 'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36 Edg/136.0.0.0', 'Accept': 'text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.7', 'Sec-Fetch-Site': 'same-origin', 'Sec-Fetch-Mode': 'navigate', 'Sec-Fetch-User': '?1', 'Sec-Fetch-Dest': 'document', 'Referer': 'http://127.0.0.1:5000/login', 'Accept-Encoding': 'gzip, deflate, br, zstd', 'Accept-Language': 'zh-CN,zh;q=0.9,en;q=0.8,en-GB;q=0.7,en-US;q=0.6', 'Cookie': 'session=eyJjc3JmX3Rva2VuIjoiODIxYzFkOGIwNGRjODc5YTkzMzA4MTU5YTU4NWZiZjcwMzdiMTkwYiJ9.aCMLIQ.4GGNhzCJrTvbiRIsgWwl2Tl9pf0; user_roles=admin; is_admin=true; admin=true'}
2025-05-13 17:04:35,373 - app - INFO - 处理表单格式的登录请求
2025-05-13 17:04:35,373 - app - INFO - 表单数据: username=admin, password=********
2025-05-13 17:04:35,545 - app - INFO - 已生成CSRF令牌: IjgyMWMxZD...
2025-05-13 17:04:35,545 - app - INFO - 用户 admin 的角色: ['admin']
2025-05-13 17:04:35,546 - app - INFO - 用户 admin 是否是管理员: True
2025-05-13 17:04:35,555 - app - INFO - 用户登录成功: admin
2025-05-13 17:04:35,556 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 17:04:35] "[32mPOST /auth/login HTTP/1.1[0m" 302 -
2025-05-13 17:04:35,563 - app - DEBUG - Dashboard route accessed
2025-05-13 17:04:35,563 - app - DEBUG - Current user ID: 1
2025-05-13 17:04:35,574 - app - DEBUG - Dashboard data prepared for user: admin
2025-05-13 17:04:35,577 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 17:04:35] "GET /dashboard HTTP/1.1" 200 -
2025-05-13 17:04:35,605 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 17:04:35] "[36mGET /static/css/bootstrap.min.css HTTP/1.1[0m" 304 -
2025-05-13 17:04:35,607 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 17:04:35] "[36mGET /static/css/bootstrap-icons.css HTTP/1.1[0m" 304 -
2025-05-13 17:04:35,608 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 17:04:35] "[36mGET /static/css/style.css HTTP/1.1[0m" 304 -
2025-05-13 17:04:35,609 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 17:04:35] "[36mGET /static/js/jquery.min.js HTTP/1.1[0m" 304 -
2025-05-13 17:04:35,610 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 17:04:35] "[36mGET /static/js/bootstrap.bundle.min.js HTTP/1.1[0m" 304 -
2025-05-13 17:04:35,613 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 17:04:35] "[36mGET /static/js/utils.js HTTP/1.1[0m" 304 -
2025-05-13 17:04:35,613 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 17:04:35] "[36mGET /static/js/auth.js HTTP/1.1[0m" 304 -
2025-05-13 17:04:35,620 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 17:04:35] "[36mGET /static/js/fix-modals.js HTTP/1.1[0m" 304 -
2025-05-13 17:04:35,622 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 17:04:35] "[36mGET /static/js/csrf.js HTTP/1.1[0m" 304 -
2025-05-13 17:04:35,622 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 17:04:35] "[36mGET /static/js/user-profile.js HTTP/1.1[0m" 304 -
2025-05-13 17:04:35,640 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 17:04:35] "GET /static/css/fonts/bootstrap-icons.woff2 HTTP/1.1" 200 -
2025-05-13 17:04:35,655 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 17:04:35] "[36mGET /static/favicon.ico HTTP/1.1[0m" 304 -
2025-05-13 17:04:39,172 - app - WARNING - 绕过JWT验证: /projects
2025-05-13 17:04:39,172 - app.utils.jwt_callbacks - WARNING - JWT验证已被绕过: /projects
2025-05-13 17:04:39,172 - app.routes.main - INFO - JWT bypass enabled for projects - Using test user
2025-05-13 17:04:39,183 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 17:04:39] "GET /projects?bypass_jwt=true HTTP/1.1" 200 -
2025-05-13 17:04:39,213 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 17:04:39] "[36mGET /static/css/bootstrap.min.css HTTP/1.1[0m" 304 -
2025-05-13 17:04:39,214 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 17:04:39] "[36mGET /static/css/bootstrap-icons.css HTTP/1.1[0m" 304 -
2025-05-13 17:04:39,215 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 17:04:39] "[36mGET /static/css/style.css HTTP/1.1[0m" 304 -
2025-05-13 17:04:39,215 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 17:04:39] "[36mGET /static/js/jquery.min.js HTTP/1.1[0m" 304 -
2025-05-13 17:04:39,216 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 17:04:39] "GET /static/css/frappe-gantt.css HTTP/1.1" 200 -
2025-05-13 17:04:39,220 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 17:04:39] "[36mGET /static/js/bootstrap.bundle.min.js HTTP/1.1[0m" 304 -
2025-05-13 17:04:39,223 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 17:04:39] "GET /static/js/projects.js HTTP/1.1" 200 -
2025-05-13 17:04:39,226 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 17:04:39] "GET /static/js/frappe-gantt.min.js HTTP/1.1" 200 -
2025-05-13 17:04:39,226 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 17:04:39] "[36mGET /static/js/utils.js HTTP/1.1[0m" 304 -
2025-05-13 17:04:39,229 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 17:04:39] "[36mGET /static/js/auth.js HTTP/1.1[0m" 304 -
2025-05-13 17:04:39,231 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 17:04:39] "[36mGET /static/js/fix-modals.js HTTP/1.1[0m" 304 -
2025-05-13 17:04:39,233 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 17:04:39] "[36mGET /static/js/csrf.js HTTP/1.1[0m" 304 -
2025-05-13 17:04:39,233 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 17:04:39] "[36mGET /static/js/user-profile.js HTTP/1.1[0m" 304 -
2025-05-13 17:04:39,260 - app - WARNING - 绕过JWT验证: /api/global/users
2025-05-13 17:04:39,261 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 17:04:39] "GET /api/global/users?bypass_jwt=true&_=1747127079257 HTTP/1.1" 200 -
2025-05-13 17:04:39,270 - app - WARNING - 绕过JWT验证: /api/project-managers
2025-05-13 17:04:39,270 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 17:04:39] "[36mGET /static/favicon.ico HTTP/1.1[0m" 304 -
2025-05-13 17:04:39,270 - app.routes.projects - INFO - 获取所有用户作为项目负责人候选
2025-05-13 17:04:39,272 - app.routes.projects - INFO - 返回所有用户作为项目负责人，共 9 位用户
2025-05-13 17:04:39,273 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 17:04:39] "GET /api/project-managers?bypass_jwt=true&_=1747127079266 HTTP/1.1" 200 -
2025-05-13 17:04:40,537 - app - WARNING - 绕过JWT验证: /api/auth/projects/1
2025-05-13 17:04:40,537 - app.utils.jwt_callbacks - WARNING - JWT验证已被绕过: /api/auth/projects/1
2025-05-13 17:04:40,538 - app.routes.projects - INFO - Auth API获取项目: 项目ID=1
2025-05-13 17:04:40,541 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 17:04:40] "GET /api/auth/projects/1?bypass_jwt=true HTTP/1.1" 200 -
2025-05-13 17:17:22,580 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 17:17:22] "GET /login HTTP/1.1" 200 -
2025-05-13 17:17:22,627 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 17:17:22] "GET /static/css/bootstrap.min.css HTTP/1.1" 200 -
2025-05-13 17:17:22,629 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 17:17:22] "GET /static/css/bootstrap-icons.css HTTP/1.1" 200 -
2025-05-13 17:17:22,630 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 17:17:22] "GET /static/css/style.css HTTP/1.1" 200 -
2025-05-13 17:17:22,631 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 17:17:22] "GET /static/js/jquery.min.js HTTP/1.1" 200 -
2025-05-13 17:17:22,633 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 17:17:22] "GET /static/js/bootstrap.bundle.min.js HTTP/1.1" 200 -
2025-05-13 17:17:22,637 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 17:17:22] "GET /static/js/utils.js HTTP/1.1" 200 -
2025-05-13 17:17:22,639 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 17:17:22] "GET /static/js/auth.js HTTP/1.1" 200 -
2025-05-13 17:17:22,640 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 17:17:22] "GET /static/images/background.png HTTP/1.1" 200 -
2025-05-13 17:17:22,651 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 17:17:22] "GET /static/js/fix-modals.js HTTP/1.1" 200 -
2025-05-13 17:17:22,664 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 17:17:22] "GET /static/js/csrf.js HTTP/1.1" 200 -
2025-05-13 17:17:22,665 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 17:17:22] "GET /static/js/user-profile.js HTTP/1.1" 200 -
2025-05-13 17:17:22,667 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 17:17:22] "GET /static/js/background-helper.js HTTP/1.1" 200 -
2025-05-13 17:17:22,667 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 17:17:22] "GET /static/uploads/background.png HTTP/1.1" 200 -
2025-05-13 17:17:22,695 - app - WARNING - 绕过JWT验证: /auth/user_info
2025-05-13 17:17:22,695 - app.utils.jwt_callbacks - WARNING - JWT验证已被绕过: /auth/user_info
2025-05-13 17:17:22,695 - app - INFO - 获取用户信息 - bypass_jwt: True
2025-05-13 17:17:22,696 - app - INFO - 使用默认管理员用户(ID=1)
2025-05-13 17:17:22,706 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 17:17:22] "GET /static/favicon.ico HTTP/1.1" 200 -
2025-05-13 17:17:22,710 - app - INFO - 成功获取用户 admin 的信息
2025-05-13 17:17:22,711 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 17:17:22] "GET /auth/user_info?_=1747127842691&bypass_jwt=true HTTP/1.1" 200 -
2025-05-13 17:17:24,115 - app - INFO - 登录请求 - 方法: POST, 内容类型: application/x-www-form-urlencoded
2025-05-13 17:17:24,115 - app - INFO - 请求头: {'Host': '127.0.0.1:5000', 'Connection': 'keep-alive', 'Content-Length': '135', 'Cache-Control': 'max-age=0', 'Sec-Ch-Ua': '"Chromium";v="136", "Microsoft Edge";v="136", "Not.A/Brand";v="99"', 'Sec-Ch-Ua-Mobile': '?0', 'Sec-Ch-Ua-Platform': '"Windows"', 'Origin': 'http://127.0.0.1:5000', 'Content-Type': 'application/x-www-form-urlencoded', 'Upgrade-Insecure-Requests': '1', 'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36 Edg/136.0.0.0', 'Accept': 'text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.7', 'Sec-Fetch-Site': 'same-origin', 'Sec-Fetch-Mode': 'navigate', 'Sec-Fetch-User': '?1', 'Sec-Fetch-Dest': 'document', 'Referer': 'http://127.0.0.1:5000/login', 'Accept-Encoding': 'gzip, deflate, br, zstd', 'Accept-Language': 'zh-CN,zh;q=0.9,en;q=0.8,en-GB;q=0.7,en-US;q=0.6', 'Cookie': 'session=eyJjc3JmX3Rva2VuIjoiOGIxNTE3MGU5Y2EyMjdmMmFkOWM1MjA1NTA3OGMxMzYwZjY3NjM4NSJ9.aCMOIg.Q_vc2fPLDbHxKNUUwJDrZcgClAg; user_roles=admin; is_admin=true; admin=true'}
2025-05-13 17:17:24,117 - app - INFO - 处理表单格式的登录请求
2025-05-13 17:17:24,118 - app - INFO - 表单数据: username=admin, password=********
2025-05-13 17:17:24,600 - app - INFO - 已生成CSRF令牌: IjhiMTUxNz...
2025-05-13 17:17:24,603 - app - INFO - 用户 admin 的角色: ['admin']
2025-05-13 17:17:24,604 - app - INFO - 用户 admin 是否是管理员: True
2025-05-13 17:17:24,630 - app - INFO - 用户登录成功: admin
2025-05-13 17:17:24,633 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 17:17:24] "[32mPOST /auth/login HTTP/1.1[0m" 302 -
2025-05-13 17:17:24,641 - app - DEBUG - Dashboard route accessed
2025-05-13 17:17:24,641 - app - DEBUG - Current user ID: 1
2025-05-13 17:17:24,668 - app - DEBUG - Dashboard data prepared for user: admin
2025-05-13 17:17:24,680 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 17:17:24] "GET /dashboard HTTP/1.1" 200 -
2025-05-13 17:17:24,707 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 17:17:24] "[36mGET /static/css/bootstrap.min.css HTTP/1.1[0m" 304 -
2025-05-13 17:17:24,709 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 17:17:24] "[36mGET /static/css/bootstrap-icons.css HTTP/1.1[0m" 304 -
2025-05-13 17:17:24,711 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 17:17:24] "[36mGET /static/css/style.css HTTP/1.1[0m" 304 -
2025-05-13 17:17:24,714 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 17:17:24] "[36mGET /static/js/jquery.min.js HTTP/1.1[0m" 304 -
2025-05-13 17:17:24,716 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 17:17:24] "[36mGET /static/js/bootstrap.bundle.min.js HTTP/1.1[0m" 304 -
2025-05-13 17:17:24,718 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 17:17:24] "[36mGET /static/js/utils.js HTTP/1.1[0m" 304 -
2025-05-13 17:17:24,720 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 17:17:24] "[36mGET /static/js/auth.js HTTP/1.1[0m" 304 -
2025-05-13 17:17:24,723 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 17:17:24] "[36mGET /static/js/fix-modals.js HTTP/1.1[0m" 304 -
2025-05-13 17:17:24,727 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 17:17:24] "[36mGET /static/js/csrf.js HTTP/1.1[0m" 304 -
2025-05-13 17:17:24,729 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 17:17:24] "[36mGET /static/js/user-profile.js HTTP/1.1[0m" 304 -
2025-05-13 17:17:24,752 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 17:17:24] "GET /static/css/fonts/bootstrap-icons.woff2 HTTP/1.1" 200 -
2025-05-13 17:17:24,774 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 17:17:24] "[36mGET /static/favicon.ico HTTP/1.1[0m" 304 -
2025-05-13 17:17:25,603 - app - WARNING - 绕过JWT验证: /tasks
2025-05-13 17:17:25,604 - app.routes.main - INFO - JWT bypass enabled for tasks - Using test user
2025-05-13 17:17:25,643 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 17:17:25] "GET /tasks?bypass_jwt=true HTTP/1.1" 200 -
2025-05-13 17:17:25,675 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 17:17:25] "[36mGET /static/css/bootstrap.min.css HTTP/1.1[0m" 304 -
2025-05-13 17:17:25,677 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 17:17:25] "[36mGET /static/css/bootstrap-icons.css HTTP/1.1[0m" 304 -
2025-05-13 17:17:25,679 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 17:17:25] "[36mGET /static/css/style.css HTTP/1.1[0m" 304 -
2025-05-13 17:17:25,683 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 17:17:25] "[36mGET /static/js/jquery.min.js HTTP/1.1[0m" 304 -
2025-05-13 17:17:25,686 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 17:17:25] "[36mGET /static/js/bootstrap.bundle.min.js HTTP/1.1[0m" 304 -
2025-05-13 17:17:25,687 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 17:17:25] "[36mGET /static/js/utils.js HTTP/1.1[0m" 304 -
2025-05-13 17:17:25,691 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 17:17:25] "[36mGET /static/js/auth.js HTTP/1.1[0m" 304 -
2025-05-13 17:17:25,692 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 17:17:25] "[36mGET /static/js/fix-modals.js HTTP/1.1[0m" 304 -
2025-05-13 17:17:25,694 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 17:17:25] "[36mGET /static/js/csrf.js HTTP/1.1[0m" 304 -
2025-05-13 17:17:25,697 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 17:17:25] "GET /static/js/main.js HTTP/1.1" 200 -
2025-05-13 17:17:25,698 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 17:17:25] "[36mGET /static/js/user-profile.js HTTP/1.1[0m" 304 -
2025-05-13 17:17:25,730 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 17:17:25] "[36mGET /static/favicon.ico HTTP/1.1[0m" 304 -
2025-05-13 17:17:42,486 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 17:17:42] "[36mGET /static/css/bootstrap.min.css HTTP/1.1[0m" 304 -
2025-05-13 17:17:42,487 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 17:17:42] "[36mGET /static/css/bootstrap-icons.css HTTP/1.1[0m" 304 -
2025-05-13 17:17:42,489 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 17:17:42] "[36mGET /static/css/style.css HTTP/1.1[0m" 304 -
2025-05-13 17:17:42,494 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 17:17:42] "[33mGET /.well-known/appspecific/com.chrome.devtools.json HTTP/1.1[0m" 404 -
2025-05-13 17:17:42,573 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 17:17:42] "GET /static/css/bootstrap.min.css.map HTTP/1.1" 200 -
2025-05-13 17:17:42,631 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 17:17:42] "GET /static/js/bootstrap.bundle.min.js.map HTTP/1.1" 200 -
2025-05-13 17:19:43,014 - werkzeug - INFO -  * Detected change in 'D:\\tmp\\work\\app\\routes\\auth.py', reloading
2025-05-13 17:19:43,215 - werkzeug - INFO -  * Restarting with stat
2025-05-13 17:19:44,235 - app.utils.permissions - INFO - 更新权限: manage_users
2025-05-13 17:19:44,237 - app.utils.permissions - INFO - 更新权限: manage_roles
2025-05-13 17:19:44,237 - app.utils.permissions - INFO - 更新权限: manage_all_projects
2025-05-13 17:19:44,237 - app.utils.permissions - INFO - 更新权限: manage_project
2025-05-13 17:19:44,239 - app.utils.permissions - INFO - 更新权限: manage_all_tasks
2025-05-13 17:19:44,239 - app.utils.permissions - INFO - 更新权限: manage_task
2025-05-13 17:19:44,239 - app.utils.permissions - INFO - 更新权限: view_project
2025-05-13 17:19:44,240 - app.utils.permissions - INFO - 更新权限: view_task
2025-05-13 17:19:44,240 - app.utils.permissions - INFO - 更新权限: manage_resources
2025-05-13 17:19:44,241 - app.utils.permissions - INFO - 更新权限: manage_risks
2025-05-13 17:19:44,241 - app.utils.permissions - INFO - 更新权限: view_reports
2025-05-13 17:19:44,241 - app.utils.permissions - INFO - 更新权限: create_task
2025-05-13 17:19:44,242 - app.utils.permissions - INFO - 更新权限: create_project
2025-05-13 17:19:44,242 - app.utils.permissions - INFO - 更新权限: assign_task
2025-05-13 17:19:44,242 - app.utils.permissions - INFO - 更新权限: change_project_status
2025-05-13 17:19:44,243 - app.utils.permissions - INFO - 更新权限: change_task_status
2025-05-13 17:19:44,244 - app.utils.permissions - INFO - 更新角色: admin
2025-05-13 17:19:44,246 - app.utils.permissions - INFO - 为管理员角色添加所有权限: 16个
2025-05-13 17:19:44,246 - app.utils.permissions - INFO - 更新角色: manager
2025-05-13 17:19:44,247 - app.utils.permissions - INFO - 为角色 manager 添加权限: manage_project
2025-05-13 17:19:44,248 - app.utils.permissions - INFO - 为角色 manager 添加权限: manage_task
2025-05-13 17:19:44,248 - app.utils.permissions - INFO - 为角色 manager 添加权限: view_project
2025-05-13 17:19:44,248 - app.utils.permissions - INFO - 为角色 manager 添加权限: view_task
2025-05-13 17:19:44,248 - app.utils.permissions - INFO - 为角色 manager 添加权限: manage_resources
2025-05-13 17:19:44,248 - app.utils.permissions - INFO - 为角色 manager 添加权限: manage_risks
2025-05-13 17:19:44,248 - app.utils.permissions - INFO - 为角色 manager 添加权限: view_reports
2025-05-13 17:19:44,249 - app.utils.permissions - INFO - 为角色 manager 添加权限: create_project
2025-05-13 17:19:44,249 - app.utils.permissions - INFO - 为角色 manager 添加权限: create_task
2025-05-13 17:19:44,249 - app.utils.permissions - INFO - 为角色 manager 添加权限: assign_task
2025-05-13 17:19:44,249 - app.utils.permissions - INFO - 为角色 manager 添加权限: change_project_status
2025-05-13 17:19:44,249 - app.utils.permissions - INFO - 为角色 manager 添加权限: change_task_status
2025-05-13 17:19:44,249 - app.utils.permissions - INFO - 更新角色: user
2025-05-13 17:19:44,250 - app.utils.permissions - INFO - 为角色 user 添加权限: view_project
2025-05-13 17:19:44,250 - app.utils.permissions - INFO - 为角色 user 添加权限: view_task
2025-05-13 17:19:44,250 - app.utils.permissions - INFO - 为角色 user 添加权限: view_reports
2025-05-13 17:19:44,251 - app.utils.permissions - INFO - 角色和权限初始化完成
2025-05-13 17:19:44,251 - __main__ - INFO - 角色和权限初始化成功
2025-05-13 17:19:44,254 - __main__ - INFO - 数据库初始化完成
2025-05-13 17:19:44,266 - __main__ - INFO - 系统资源检查完成
2025-05-13 17:19:44,266 - __main__ - INFO - 开始清理旧数据
2025-05-13 17:19:44,267 - __main__ - INFO - 删除了 0 条过期的资源使用记录
2025-05-13 17:19:44,269 - __main__ - INFO - 删除了 0 条已解决的过期警报
2025-05-13 17:19:44,269 - __main__ - INFO - 旧数据清理完成
2025-05-13 17:19:44,275 - werkzeug - WARNING -  * Debugger is active!
2025-05-13 17:19:44,277 - werkzeug - INFO -  * Debugger PIN: 670-037-726
2025-05-13 17:20:23,877 - werkzeug - INFO -  * Detected change in 'D:\\tmp\\work\\app\\routes\\projects.py', reloading
2025-05-13 17:20:24,176 - werkzeug - INFO -  * Restarting with stat
2025-05-13 17:20:25,060 - app.utils.permissions - INFO - 更新权限: manage_users
2025-05-13 17:20:25,061 - app.utils.permissions - INFO - 更新权限: manage_roles
2025-05-13 17:20:25,062 - app.utils.permissions - INFO - 更新权限: manage_all_projects
2025-05-13 17:20:25,062 - app.utils.permissions - INFO - 更新权限: manage_project
2025-05-13 17:20:25,062 - app.utils.permissions - INFO - 更新权限: manage_all_tasks
2025-05-13 17:20:25,063 - app.utils.permissions - INFO - 更新权限: manage_task
2025-05-13 17:20:25,063 - app.utils.permissions - INFO - 更新权限: view_project
2025-05-13 17:20:25,064 - app.utils.permissions - INFO - 更新权限: view_task
2025-05-13 17:20:25,064 - app.utils.permissions - INFO - 更新权限: manage_resources
2025-05-13 17:20:25,064 - app.utils.permissions - INFO - 更新权限: manage_risks
2025-05-13 17:20:25,065 - app.utils.permissions - INFO - 更新权限: view_reports
2025-05-13 17:20:25,065 - app.utils.permissions - INFO - 更新权限: create_task
2025-05-13 17:20:25,065 - app.utils.permissions - INFO - 更新权限: create_project
2025-05-13 17:20:25,067 - app.utils.permissions - INFO - 更新权限: assign_task
2025-05-13 17:20:25,067 - app.utils.permissions - INFO - 更新权限: change_project_status
2025-05-13 17:20:25,068 - app.utils.permissions - INFO - 更新权限: change_task_status
2025-05-13 17:20:25,069 - app.utils.permissions - INFO - 更新角色: admin
2025-05-13 17:20:25,071 - app.utils.permissions - INFO - 为管理员角色添加所有权限: 16个
2025-05-13 17:20:25,071 - app.utils.permissions - INFO - 更新角色: manager
2025-05-13 17:20:25,071 - app.utils.permissions - INFO - 为角色 manager 添加权限: manage_project
2025-05-13 17:20:25,072 - app.utils.permissions - INFO - 为角色 manager 添加权限: manage_task
2025-05-13 17:20:25,072 - app.utils.permissions - INFO - 为角色 manager 添加权限: view_project
2025-05-13 17:20:25,072 - app.utils.permissions - INFO - 为角色 manager 添加权限: view_task
2025-05-13 17:20:25,072 - app.utils.permissions - INFO - 为角色 manager 添加权限: manage_resources
2025-05-13 17:20:25,072 - app.utils.permissions - INFO - 为角色 manager 添加权限: manage_risks
2025-05-13 17:20:25,072 - app.utils.permissions - INFO - 为角色 manager 添加权限: view_reports
2025-05-13 17:20:25,072 - app.utils.permissions - INFO - 为角色 manager 添加权限: create_project
2025-05-13 17:20:25,072 - app.utils.permissions - INFO - 为角色 manager 添加权限: create_task
2025-05-13 17:20:25,072 - app.utils.permissions - INFO - 为角色 manager 添加权限: assign_task
2025-05-13 17:20:25,072 - app.utils.permissions - INFO - 为角色 manager 添加权限: change_project_status
2025-05-13 17:20:25,073 - app.utils.permissions - INFO - 为角色 manager 添加权限: change_task_status
2025-05-13 17:20:25,073 - app.utils.permissions - INFO - 更新角色: user
2025-05-13 17:20:25,074 - app.utils.permissions - INFO - 为角色 user 添加权限: view_project
2025-05-13 17:20:25,074 - app.utils.permissions - INFO - 为角色 user 添加权限: view_task
2025-05-13 17:20:25,074 - app.utils.permissions - INFO - 为角色 user 添加权限: view_reports
2025-05-13 17:20:25,074 - app.utils.permissions - INFO - 角色和权限初始化完成
2025-05-13 17:20:25,074 - __main__ - INFO - 角色和权限初始化成功
2025-05-13 17:20:25,078 - __main__ - INFO - 数据库初始化完成
2025-05-13 17:20:25,092 - __main__ - INFO - 系统资源检查完成
2025-05-13 17:20:25,093 - __main__ - INFO - 开始清理旧数据
2025-05-13 17:20:25,094 - __main__ - INFO - 删除了 0 条过期的资源使用记录
2025-05-13 17:20:25,096 - __main__ - INFO - 删除了 0 条已解决的过期警报
2025-05-13 17:20:25,096 - __main__ - INFO - 旧数据清理完成
2025-05-13 17:20:25,102 - werkzeug - WARNING -  * Debugger is active!
2025-05-13 17:20:25,104 - werkzeug - INFO -  * Debugger PIN: 670-037-726
2025-05-13 17:26:20,511 - app.utils.permissions - INFO - 更新权限: manage_users
2025-05-13 17:26:20,512 - app.utils.permissions - INFO - 更新权限: manage_roles
2025-05-13 17:26:20,512 - app.utils.permissions - INFO - 更新权限: manage_all_projects
2025-05-13 17:26:20,512 - app.utils.permissions - INFO - 更新权限: manage_project
2025-05-13 17:26:20,513 - app.utils.permissions - INFO - 更新权限: manage_all_tasks
2025-05-13 17:26:20,513 - app.utils.permissions - INFO - 更新权限: manage_task
2025-05-13 17:26:20,514 - app.utils.permissions - INFO - 更新权限: view_project
2025-05-13 17:26:20,514 - app.utils.permissions - INFO - 更新权限: view_task
2025-05-13 17:26:20,516 - app.utils.permissions - INFO - 更新权限: manage_resources
2025-05-13 17:26:20,516 - app.utils.permissions - INFO - 更新权限: manage_risks
2025-05-13 17:26:20,516 - app.utils.permissions - INFO - 更新权限: view_reports
2025-05-13 17:26:20,516 - app.utils.permissions - INFO - 更新权限: create_task
2025-05-13 17:26:20,517 - app.utils.permissions - INFO - 更新权限: create_project
2025-05-13 17:26:20,518 - app.utils.permissions - INFO - 更新权限: assign_task
2025-05-13 17:26:20,518 - app.utils.permissions - INFO - 更新权限: change_project_status
2025-05-13 17:26:20,519 - app.utils.permissions - INFO - 更新权限: change_task_status
2025-05-13 17:26:20,521 - app.utils.permissions - INFO - 更新角色: admin
2025-05-13 17:26:20,522 - app.utils.permissions - INFO - 为管理员角色添加所有权限: 16个
2025-05-13 17:26:20,523 - app.utils.permissions - INFO - 更新角色: manager
2025-05-13 17:26:20,524 - app.utils.permissions - INFO - 为角色 manager 添加权限: manage_project
2025-05-13 17:26:20,524 - app.utils.permissions - INFO - 为角色 manager 添加权限: manage_task
2025-05-13 17:26:20,524 - app.utils.permissions - INFO - 为角色 manager 添加权限: view_project
2025-05-13 17:26:20,524 - app.utils.permissions - INFO - 为角色 manager 添加权限: view_task
2025-05-13 17:26:20,524 - app.utils.permissions - INFO - 为角色 manager 添加权限: manage_resources
2025-05-13 17:26:20,524 - app.utils.permissions - INFO - 为角色 manager 添加权限: manage_risks
2025-05-13 17:26:20,525 - app.utils.permissions - INFO - 为角色 manager 添加权限: view_reports
2025-05-13 17:26:20,525 - app.utils.permissions - INFO - 为角色 manager 添加权限: create_project
2025-05-13 17:26:20,525 - app.utils.permissions - INFO - 为角色 manager 添加权限: create_task
2025-05-13 17:26:20,525 - app.utils.permissions - INFO - 为角色 manager 添加权限: assign_task
2025-05-13 17:26:20,525 - app.utils.permissions - INFO - 为角色 manager 添加权限: change_project_status
2025-05-13 17:26:20,527 - app.utils.permissions - INFO - 为角色 manager 添加权限: change_task_status
2025-05-13 17:26:20,527 - app.utils.permissions - INFO - 更新角色: user
2025-05-13 17:26:20,528 - app.utils.permissions - INFO - 为角色 user 添加权限: view_project
2025-05-13 17:26:20,528 - app.utils.permissions - INFO - 为角色 user 添加权限: view_task
2025-05-13 17:26:20,528 - app.utils.permissions - INFO - 为角色 user 添加权限: view_reports
2025-05-13 17:26:20,528 - app.utils.permissions - INFO - 角色和权限初始化完成
2025-05-13 17:26:20,529 - __main__ - INFO - 角色和权限初始化成功
2025-05-13 17:26:20,532 - __main__ - INFO - 数据库初始化完成
2025-05-13 17:26:20,543 - __main__ - INFO - 系统资源检查完成
2025-05-13 17:26:20,544 - __main__ - INFO - 开始清理旧数据
2025-05-13 17:26:20,545 - __main__ - INFO - 删除了 0 条过期的资源使用记录
2025-05-13 17:26:20,546 - __main__ - INFO - 删除了 0 条已解决的过期警报
2025-05-13 17:26:20,546 - __main__ - INFO - 旧数据清理完成
2025-05-13 17:26:20,559 - werkzeug - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:5000
 * Running on http://192.168.0.66:5000
2025-05-13 17:26:20,560 - werkzeug - INFO - [33mPress CTRL+C to quit[0m
2025-05-13 17:26:20,560 - werkzeug - INFO -  * Restarting with stat
2025-05-13 17:26:21,402 - app.utils.permissions - INFO - 更新权限: manage_users
2025-05-13 17:26:21,403 - app.utils.permissions - INFO - 更新权限: manage_roles
2025-05-13 17:26:21,404 - app.utils.permissions - INFO - 更新权限: manage_all_projects
2025-05-13 17:26:21,404 - app.utils.permissions - INFO - 更新权限: manage_project
2025-05-13 17:26:21,405 - app.utils.permissions - INFO - 更新权限: manage_all_tasks
2025-05-13 17:26:21,405 - app.utils.permissions - INFO - 更新权限: manage_task
2025-05-13 17:26:21,406 - app.utils.permissions - INFO - 更新权限: view_project
2025-05-13 17:26:21,406 - app.utils.permissions - INFO - 更新权限: view_task
2025-05-13 17:26:21,406 - app.utils.permissions - INFO - 更新权限: manage_resources
2025-05-13 17:26:21,407 - app.utils.permissions - INFO - 更新权限: manage_risks
2025-05-13 17:26:21,407 - app.utils.permissions - INFO - 更新权限: view_reports
2025-05-13 17:26:21,408 - app.utils.permissions - INFO - 更新权限: create_task
2025-05-13 17:26:21,409 - app.utils.permissions - INFO - 更新权限: create_project
2025-05-13 17:26:21,411 - app.utils.permissions - INFO - 更新权限: assign_task
2025-05-13 17:26:21,411 - app.utils.permissions - INFO - 更新权限: change_project_status
2025-05-13 17:26:21,412 - app.utils.permissions - INFO - 更新权限: change_task_status
2025-05-13 17:26:21,413 - app.utils.permissions - INFO - 更新角色: admin
2025-05-13 17:26:21,416 - app.utils.permissions - INFO - 为管理员角色添加所有权限: 16个
2025-05-13 17:26:21,416 - app.utils.permissions - INFO - 更新角色: manager
2025-05-13 17:26:21,417 - app.utils.permissions - INFO - 为角色 manager 添加权限: manage_project
2025-05-13 17:26:21,417 - app.utils.permissions - INFO - 为角色 manager 添加权限: manage_task
2025-05-13 17:26:21,417 - app.utils.permissions - INFO - 为角色 manager 添加权限: view_project
2025-05-13 17:26:21,417 - app.utils.permissions - INFO - 为角色 manager 添加权限: view_task
2025-05-13 17:26:21,417 - app.utils.permissions - INFO - 为角色 manager 添加权限: manage_resources
2025-05-13 17:26:21,417 - app.utils.permissions - INFO - 为角色 manager 添加权限: manage_risks
2025-05-13 17:26:21,417 - app.utils.permissions - INFO - 为角色 manager 添加权限: view_reports
2025-05-13 17:26:21,417 - app.utils.permissions - INFO - 为角色 manager 添加权限: create_project
2025-05-13 17:26:21,417 - app.utils.permissions - INFO - 为角色 manager 添加权限: create_task
2025-05-13 17:26:21,418 - app.utils.permissions - INFO - 为角色 manager 添加权限: assign_task
2025-05-13 17:26:21,418 - app.utils.permissions - INFO - 为角色 manager 添加权限: change_project_status
2025-05-13 17:26:21,418 - app.utils.permissions - INFO - 为角色 manager 添加权限: change_task_status
2025-05-13 17:26:21,418 - app.utils.permissions - INFO - 更新角色: user
2025-05-13 17:26:21,419 - app.utils.permissions - INFO - 为角色 user 添加权限: view_project
2025-05-13 17:26:21,419 - app.utils.permissions - INFO - 为角色 user 添加权限: view_task
2025-05-13 17:26:21,419 - app.utils.permissions - INFO - 为角色 user 添加权限: view_reports
2025-05-13 17:26:21,419 - app.utils.permissions - INFO - 角色和权限初始化完成
2025-05-13 17:26:21,419 - __main__ - INFO - 角色和权限初始化成功
2025-05-13 17:26:21,421 - __main__ - INFO - 数据库初始化完成
2025-05-13 17:26:21,436 - __main__ - INFO - 系统资源检查完成
2025-05-13 17:26:21,436 - __main__ - INFO - 开始清理旧数据
2025-05-13 17:26:21,437 - __main__ - INFO - 删除了 0 条过期的资源使用记录
2025-05-13 17:26:21,439 - __main__ - INFO - 删除了 0 条已解决的过期警报
2025-05-13 17:26:21,439 - __main__ - INFO - 旧数据清理完成
2025-05-13 17:26:21,446 - werkzeug - WARNING -  * Debugger is active!
2025-05-13 17:26:21,449 - werkzeug - INFO -  * Debugger PIN: 670-037-726
2025-05-13 17:26:39,515 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 17:26:39] "GET /login HTTP/1.1" 200 -
2025-05-13 17:26:39,767 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 17:26:39] "GET /static/css/bootstrap.min.css HTTP/1.1" 200 -
2025-05-13 17:26:39,777 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 17:26:39] "GET /static/js/auth.js HTTP/1.1" 200 -
2025-05-13 17:26:39,780 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 17:26:39] "GET /static/css/bootstrap-icons.css HTTP/1.1" 200 -
2025-05-13 17:26:39,782 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 17:26:39] "GET /static/js/bootstrap.bundle.min.js HTTP/1.1" 200 -
2025-05-13 17:26:39,782 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 17:26:39] "GET /static/js/utils.js HTTP/1.1" 200 -
2025-05-13 17:26:39,783 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 17:26:39] "GET /static/images/background.png HTTP/1.1" 200 -
2025-05-13 17:26:39,784 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 17:26:39] "GET /static/js/jquery.min.js HTTP/1.1" 200 -
2025-05-13 17:26:39,788 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 17:26:39] "GET /static/css/style.css HTTP/1.1" 200 -
2025-05-13 17:26:39,790 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 17:26:39] "GET /static/js/fix-modals.js HTTP/1.1" 200 -
2025-05-13 17:26:39,801 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 17:26:39] "GET /static/js/csrf.js HTTP/1.1" 200 -
2025-05-13 17:26:39,812 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 17:26:39] "GET /static/js/user-profile.js HTTP/1.1" 200 -
2025-05-13 17:26:39,815 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 17:26:39] "GET /static/js/background-helper.js HTTP/1.1" 200 -
2025-05-13 17:26:39,815 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 17:26:39] "GET /static/uploads/background.png HTTP/1.1" 200 -
2025-05-13 17:26:39,841 - app - WARNING - 绕过JWT验证: /auth/user_info
2025-05-13 17:26:39,842 - app.utils.jwt_callbacks - WARNING - JWT验证已被绕过: /auth/user_info
2025-05-13 17:26:39,842 - app - INFO - 获取用户信息 - bypass_jwt: True
2025-05-13 17:26:39,842 - app - INFO - 使用默认管理员用户(ID=1)
2025-05-13 17:26:39,857 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 17:26:39] "GET /static/favicon.ico HTTP/1.1" 200 -
2025-05-13 17:26:39,863 - app - INFO - 成功获取用户 admin 的信息
2025-05-13 17:26:39,864 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 17:26:39] "GET /auth/user_info?_=1747128399838&bypass_jwt=true HTTP/1.1" 200 -
2025-05-13 17:26:41,439 - app - INFO - 登录请求 - 方法: POST, 内容类型: application/x-www-form-urlencoded
2025-05-13 17:26:41,440 - app - INFO - 请求头: {'Host': '127.0.0.1:5000', 'Connection': 'keep-alive', 'Content-Length': '135', 'Cache-Control': 'max-age=0', 'Sec-Ch-Ua': '"Chromium";v="136", "Microsoft Edge";v="136", "Not.A/Brand";v="99"', 'Sec-Ch-Ua-Mobile': '?0', 'Sec-Ch-Ua-Platform': '"Windows"', 'Origin': 'http://127.0.0.1:5000', 'Content-Type': 'application/x-www-form-urlencoded', 'Upgrade-Insecure-Requests': '1', 'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36 Edg/136.0.0.0', 'Accept': 'text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.7', 'Sec-Fetch-Site': 'same-origin', 'Sec-Fetch-Mode': 'navigate', 'Sec-Fetch-User': '?1', 'Sec-Fetch-Dest': 'document', 'Referer': 'http://127.0.0.1:5000/login', 'Accept-Encoding': 'gzip, deflate, br, zstd', 'Accept-Language': 'zh-CN,zh;q=0.9,en;q=0.8,en-GB;q=0.7,en-US;q=0.6', 'Cookie': 'session=eyJjc3JmX3Rva2VuIjoiOTUxOWJjZWMwZDA4OGI1YjBlYzU0NmMzMWU4MTljY2FhMDJlMmMzYSJ9.aCMQTw.3XMri_PetpEABB_ps56axvyd1EE; user_roles=admin; is_admin=true; admin=true'}
2025-05-13 17:26:41,440 - app - INFO - 处理表单格式的登录请求
2025-05-13 17:26:41,440 - app - INFO - 表单数据: username=admin, password=********
2025-05-13 17:26:41,907 - app - INFO - 已生成CSRF令牌: Ijk1MTliY2...
2025-05-13 17:26:41,909 - app - INFO - 用户 admin 的角色: ['admin']
2025-05-13 17:26:41,910 - app - INFO - 用户 admin 是否是管理员: True
2025-05-13 17:26:41,940 - app - INFO - 用户登录成功: admin
2025-05-13 17:26:41,943 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 17:26:41] "[32mPOST /auth/login HTTP/1.1[0m" 302 -
2025-05-13 17:26:41,956 - app - DEBUG - Dashboard route accessed
2025-05-13 17:26:41,956 - app - DEBUG - Current user ID: 1
2025-05-13 17:26:41,992 - app - DEBUG - Dashboard data prepared for user: admin
2025-05-13 17:26:42,027 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 17:26:42] "GET /dashboard HTTP/1.1" 200 -
2025-05-13 17:26:42,058 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 17:26:42] "[36mGET /static/css/bootstrap.min.css HTTP/1.1[0m" 304 -
2025-05-13 17:26:42,065 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 17:26:42] "[36mGET /static/css/bootstrap-icons.css HTTP/1.1[0m" 304 -
2025-05-13 17:26:42,065 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 17:26:42] "[36mGET /static/css/style.css HTTP/1.1[0m" 304 -
2025-05-13 17:26:42,066 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 17:26:42] "[36mGET /static/js/jquery.min.js HTTP/1.1[0m" 304 -
2025-05-13 17:26:42,070 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 17:26:42] "[36mGET /static/js/bootstrap.bundle.min.js HTTP/1.1[0m" 304 -
2025-05-13 17:26:42,072 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 17:26:42] "[36mGET /static/js/auth.js HTTP/1.1[0m" 304 -
2025-05-13 17:26:42,074 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 17:26:42] "[36mGET /static/js/utils.js HTTP/1.1[0m" 304 -
2025-05-13 17:26:42,078 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 17:26:42] "[36mGET /static/js/csrf.js HTTP/1.1[0m" 304 -
2025-05-13 17:26:42,079 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 17:26:42] "[36mGET /static/js/fix-modals.js HTTP/1.1[0m" 304 -
2025-05-13 17:26:42,080 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 17:26:42] "[36mGET /static/js/user-profile.js HTTP/1.1[0m" 304 -
2025-05-13 17:26:42,102 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 17:26:42] "GET /static/css/fonts/bootstrap-icons.woff2 HTTP/1.1" 200 -
2025-05-13 17:26:42,117 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 17:26:42] "[36mGET /static/favicon.ico HTTP/1.1[0m" 304 -
2025-05-13 17:26:43,306 - app - WARNING - 绕过JWT验证: /tasks
2025-05-13 17:26:43,307 - app.routes.main - INFO - JWT bypass enabled for tasks - Using test user
2025-05-13 17:26:43,352 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 17:26:43] "GET /tasks?bypass_jwt=true HTTP/1.1" 200 -
2025-05-13 17:26:43,385 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 17:26:43] "[36mGET /static/css/bootstrap.min.css HTTP/1.1[0m" 304 -
2025-05-13 17:26:43,386 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 17:26:43] "[36mGET /static/css/bootstrap-icons.css HTTP/1.1[0m" 304 -
2025-05-13 17:26:43,388 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 17:26:43] "[36mGET /static/css/style.css HTTP/1.1[0m" 304 -
2025-05-13 17:26:43,390 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 17:26:43] "GET /static/js/main.js HTTP/1.1" 200 -
2025-05-13 17:26:43,395 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 17:26:43] "[36mGET /static/js/jquery.min.js HTTP/1.1[0m" 304 -
2025-05-13 17:26:43,395 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 17:26:43] "[36mGET /static/js/bootstrap.bundle.min.js HTTP/1.1[0m" 304 -
2025-05-13 17:26:43,396 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 17:26:43] "[36mGET /static/js/utils.js HTTP/1.1[0m" 304 -
2025-05-13 17:26:43,400 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 17:26:43] "[36mGET /static/js/auth.js HTTP/1.1[0m" 304 -
2025-05-13 17:26:43,404 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 17:26:43] "[36mGET /static/js/fix-modals.js HTTP/1.1[0m" 304 -
2025-05-13 17:26:43,407 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 17:26:43] "[36mGET /static/js/csrf.js HTTP/1.1[0m" 304 -
2025-05-13 17:26:43,407 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 17:26:43] "[36mGET /static/js/user-profile.js HTTP/1.1[0m" 304 -
2025-05-13 17:26:43,436 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 17:26:43] "[36mGET /static/favicon.ico HTTP/1.1[0m" 304 -
2025-05-13 17:58:11,244 - app.utils.permissions - INFO - 更新权限: manage_users
2025-05-13 17:58:11,245 - app.utils.permissions - INFO - 更新权限: manage_roles
2025-05-13 17:58:11,246 - app.utils.permissions - INFO - 更新权限: manage_all_projects
2025-05-13 17:58:11,246 - app.utils.permissions - INFO - 更新权限: manage_project
2025-05-13 17:58:11,247 - app.utils.permissions - INFO - 更新权限: manage_all_tasks
2025-05-13 17:58:11,247 - app.utils.permissions - INFO - 更新权限: manage_task
2025-05-13 17:58:11,248 - app.utils.permissions - INFO - 更新权限: view_project
2025-05-13 17:58:11,248 - app.utils.permissions - INFO - 更新权限: view_task
2025-05-13 17:58:11,249 - app.utils.permissions - INFO - 更新权限: manage_resources
2025-05-13 17:58:11,249 - app.utils.permissions - INFO - 更新权限: manage_risks
2025-05-13 17:58:11,250 - app.utils.permissions - INFO - 更新权限: view_reports
2025-05-13 17:58:11,250 - app.utils.permissions - INFO - 更新权限: create_task
2025-05-13 17:58:11,251 - app.utils.permissions - INFO - 更新权限: create_project
2025-05-13 17:58:11,251 - app.utils.permissions - INFO - 更新权限: assign_task
2025-05-13 17:58:11,252 - app.utils.permissions - INFO - 更新权限: change_project_status
2025-05-13 17:58:11,252 - app.utils.permissions - INFO - 更新权限: change_task_status
2025-05-13 17:58:11,254 - app.utils.permissions - INFO - 更新角色: admin
2025-05-13 17:58:11,255 - app.utils.permissions - INFO - 为管理员角色添加所有权限: 16个
2025-05-13 17:58:11,257 - app.utils.permissions - INFO - 更新角色: manager
2025-05-13 17:58:11,257 - app.utils.permissions - INFO - 为角色 manager 添加权限: manage_project
2025-05-13 17:58:11,257 - app.utils.permissions - INFO - 为角色 manager 添加权限: manage_task
2025-05-13 17:58:11,257 - app.utils.permissions - INFO - 为角色 manager 添加权限: view_project
2025-05-13 17:58:11,257 - app.utils.permissions - INFO - 为角色 manager 添加权限: view_task
2025-05-13 17:58:11,258 - app.utils.permissions - INFO - 为角色 manager 添加权限: manage_resources
2025-05-13 17:58:11,258 - app.utils.permissions - INFO - 为角色 manager 添加权限: manage_risks
2025-05-13 17:58:11,258 - app.utils.permissions - INFO - 为角色 manager 添加权限: view_reports
2025-05-13 17:58:11,258 - app.utils.permissions - INFO - 为角色 manager 添加权限: create_project
2025-05-13 17:58:11,258 - app.utils.permissions - INFO - 为角色 manager 添加权限: create_task
2025-05-13 17:58:11,258 - app.utils.permissions - INFO - 为角色 manager 添加权限: assign_task
2025-05-13 17:58:11,258 - app.utils.permissions - INFO - 为角色 manager 添加权限: change_project_status
2025-05-13 17:58:11,258 - app.utils.permissions - INFO - 为角色 manager 添加权限: change_task_status
2025-05-13 17:58:11,259 - app.utils.permissions - INFO - 更新角色: user
2025-05-13 17:58:11,259 - app.utils.permissions - INFO - 为角色 user 添加权限: view_project
2025-05-13 17:58:11,259 - app.utils.permissions - INFO - 为角色 user 添加权限: view_task
2025-05-13 17:58:11,259 - app.utils.permissions - INFO - 为角色 user 添加权限: view_reports
2025-05-13 17:58:11,260 - app.utils.permissions - INFO - 角色和权限初始化完成
2025-05-13 17:58:11,260 - __main__ - INFO - 角色和权限初始化成功
2025-05-13 17:58:11,263 - __main__ - INFO - 数据库初始化完成
2025-05-13 17:58:11,276 - __main__ - INFO - 系统资源检查完成
2025-05-13 17:58:11,276 - __main__ - INFO - 开始清理旧数据
2025-05-13 17:58:11,278 - __main__ - INFO - 删除了 0 条过期的资源使用记录
2025-05-13 17:58:11,279 - __main__ - INFO - 删除了 0 条已解决的过期警报
2025-05-13 17:58:11,279 - __main__ - INFO - 旧数据清理完成
2025-05-13 17:58:11,292 - werkzeug - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:5000
 * Running on http://192.168.0.66:5000
2025-05-13 17:58:11,293 - werkzeug - INFO - [33mPress CTRL+C to quit[0m
2025-05-13 17:58:11,293 - werkzeug - INFO -  * Restarting with stat
2025-05-13 17:58:12,127 - app.utils.permissions - INFO - 更新权限: manage_users
2025-05-13 17:58:12,128 - app.utils.permissions - INFO - 更新权限: manage_roles
2025-05-13 17:58:12,129 - app.utils.permissions - INFO - 更新权限: manage_all_projects
2025-05-13 17:58:12,129 - app.utils.permissions - INFO - 更新权限: manage_project
2025-05-13 17:58:12,130 - app.utils.permissions - INFO - 更新权限: manage_all_tasks
2025-05-13 17:58:12,130 - app.utils.permissions - INFO - 更新权限: manage_task
2025-05-13 17:58:12,130 - app.utils.permissions - INFO - 更新权限: view_project
2025-05-13 17:58:12,131 - app.utils.permissions - INFO - 更新权限: view_task
2025-05-13 17:58:12,131 - app.utils.permissions - INFO - 更新权限: manage_resources
2025-05-13 17:58:12,132 - app.utils.permissions - INFO - 更新权限: manage_risks
2025-05-13 17:58:12,133 - app.utils.permissions - INFO - 更新权限: view_reports
2025-05-13 17:58:12,134 - app.utils.permissions - INFO - 更新权限: create_task
2025-05-13 17:58:12,135 - app.utils.permissions - INFO - 更新权限: create_project
2025-05-13 17:58:12,135 - app.utils.permissions - INFO - 更新权限: assign_task
2025-05-13 17:58:12,137 - app.utils.permissions - INFO - 更新权限: change_project_status
2025-05-13 17:58:12,138 - app.utils.permissions - INFO - 更新权限: change_task_status
2025-05-13 17:58:12,139 - app.utils.permissions - INFO - 更新角色: admin
2025-05-13 17:58:12,141 - app.utils.permissions - INFO - 为管理员角色添加所有权限: 16个
2025-05-13 17:58:12,142 - app.utils.permissions - INFO - 更新角色: manager
2025-05-13 17:58:12,142 - app.utils.permissions - INFO - 为角色 manager 添加权限: manage_project
2025-05-13 17:58:12,142 - app.utils.permissions - INFO - 为角色 manager 添加权限: manage_task
2025-05-13 17:58:12,142 - app.utils.permissions - INFO - 为角色 manager 添加权限: view_project
2025-05-13 17:58:12,143 - app.utils.permissions - INFO - 为角色 manager 添加权限: view_task
2025-05-13 17:58:12,143 - app.utils.permissions - INFO - 为角色 manager 添加权限: manage_resources
2025-05-13 17:58:12,143 - app.utils.permissions - INFO - 为角色 manager 添加权限: manage_risks
2025-05-13 17:58:12,143 - app.utils.permissions - INFO - 为角色 manager 添加权限: view_reports
2025-05-13 17:58:12,143 - app.utils.permissions - INFO - 为角色 manager 添加权限: create_project
2025-05-13 17:58:12,143 - app.utils.permissions - INFO - 为角色 manager 添加权限: create_task
2025-05-13 17:58:12,143 - app.utils.permissions - INFO - 为角色 manager 添加权限: assign_task
2025-05-13 17:58:12,143 - app.utils.permissions - INFO - 为角色 manager 添加权限: change_project_status
2025-05-13 17:58:12,144 - app.utils.permissions - INFO - 为角色 manager 添加权限: change_task_status
2025-05-13 17:58:12,144 - app.utils.permissions - INFO - 更新角色: user
2025-05-13 17:58:12,144 - app.utils.permissions - INFO - 为角色 user 添加权限: view_project
2025-05-13 17:58:12,145 - app.utils.permissions - INFO - 为角色 user 添加权限: view_task
2025-05-13 17:58:12,145 - app.utils.permissions - INFO - 为角色 user 添加权限: view_reports
2025-05-13 17:58:12,145 - app.utils.permissions - INFO - 角色和权限初始化完成
2025-05-13 17:58:12,145 - __main__ - INFO - 角色和权限初始化成功
2025-05-13 17:58:12,148 - __main__ - INFO - 数据库初始化完成
2025-05-13 17:58:12,160 - __main__ - INFO - 系统资源检查完成
2025-05-13 17:58:12,160 - __main__ - INFO - 开始清理旧数据
2025-05-13 17:58:12,161 - __main__ - INFO - 删除了 0 条过期的资源使用记录
2025-05-13 17:58:12,164 - __main__ - INFO - 删除了 0 条已解决的过期警报
2025-05-13 17:58:12,164 - __main__ - INFO - 旧数据清理完成
2025-05-13 17:58:12,171 - werkzeug - WARNING -  * Debugger is active!
2025-05-13 17:58:12,173 - werkzeug - INFO -  * Debugger PIN: 670-037-726
2025-05-13 17:58:31,446 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 17:58:31] "GET /login HTTP/1.1" 200 -
2025-05-13 17:58:31,692 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 17:58:31] "GET /static/css/bootstrap.min.css HTTP/1.1" 200 -
2025-05-13 17:58:31,700 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 17:58:31] "GET /static/js/auth.js HTTP/1.1" 200 -
2025-05-13 17:58:31,706 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 17:58:31] "GET /static/images/background.png HTTP/1.1" 200 -
2025-05-13 17:58:31,708 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 17:58:31] "GET /static/css/bootstrap-icons.css HTTP/1.1" 200 -
2025-05-13 17:58:31,709 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 17:58:31] "GET /static/js/bootstrap.bundle.min.js HTTP/1.1" 200 -
2025-05-13 17:58:31,711 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 17:58:31] "GET /static/css/style.css HTTP/1.1" 200 -
2025-05-13 17:58:31,715 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 17:58:31] "GET /static/js/jquery.min.js HTTP/1.1" 200 -
2025-05-13 17:58:31,718 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 17:58:31] "GET /static/js/fix-modals.js HTTP/1.1" 200 -
2025-05-13 17:58:31,718 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 17:58:31] "GET /static/js/utils.js HTTP/1.1" 200 -
2025-05-13 17:58:31,725 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 17:58:31] "GET /static/js/csrf.js HTTP/1.1" 200 -
2025-05-13 17:58:31,749 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 17:58:31] "GET /static/js/user-profile.js HTTP/1.1" 200 -
2025-05-13 17:58:31,752 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 17:58:31] "GET /static/js/background-helper.js HTTP/1.1" 200 -
2025-05-13 17:58:31,755 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 17:58:31] "GET /static/uploads/background.png HTTP/1.1" 200 -
2025-05-13 17:58:31,775 - app - WARNING - 绕过JWT验证: /auth/user_info
2025-05-13 17:58:31,776 - app.utils.jwt_callbacks - WARNING - JWT验证已被绕过: /auth/user_info
2025-05-13 17:58:31,777 - app - INFO - 获取用户信息 - bypass_jwt: True
2025-05-13 17:58:31,779 - app - INFO - 使用默认管理员用户(ID=1)
2025-05-13 17:58:31,798 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 17:58:31] "GET /static/favicon.ico HTTP/1.1" 200 -
2025-05-13 17:58:31,834 - app - INFO - 成功获取用户 admin 的信息
2025-05-13 17:58:31,836 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 17:58:31] "GET /auth/user_info?_=1747130311769&bypass_jwt=true HTTP/1.1" 200 -
2025-05-13 17:58:33,266 - app - INFO - 登录请求 - 方法: POST, 内容类型: application/x-www-form-urlencoded
2025-05-13 17:58:33,266 - app - INFO - 请求头: {'Host': '127.0.0.1:5000', 'Connection': 'keep-alive', 'Content-Length': '135', 'Cache-Control': 'max-age=0', 'Sec-Ch-Ua': '"Chromium";v="136", "Microsoft Edge";v="136", "Not.A/Brand";v="99"', 'Sec-Ch-Ua-Mobile': '?0', 'Sec-Ch-Ua-Platform': '"Windows"', 'Origin': 'http://127.0.0.1:5000', 'Content-Type': 'application/x-www-form-urlencoded', 'Upgrade-Insecure-Requests': '1', 'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36 Edg/136.0.0.0', 'Accept': 'text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.7', 'Sec-Fetch-Site': 'same-origin', 'Sec-Fetch-Mode': 'navigate', 'Sec-Fetch-User': '?1', 'Sec-Fetch-Dest': 'document', 'Referer': 'http://127.0.0.1:5000/login', 'Accept-Encoding': 'gzip, deflate, br, zstd', 'Accept-Language': 'zh-CN,zh;q=0.9,en;q=0.8,en-GB;q=0.7,en-US;q=0.6', 'Cookie': 'session=eyJjc3JmX3Rva2VuIjoiYjJiYzQ2MTRmN2U5Y2JhNjNlMGMzYWUyNDEzZjlhZjg1NzIxOGMxZiJ9.aCMXxw.kck1wNVCGk-DamCn-UUf1B0MBqQ; user_roles=admin; is_admin=true; admin=true'}
2025-05-13 17:58:33,267 - app - INFO - 处理表单格式的登录请求
2025-05-13 17:58:33,267 - app - INFO - 表单数据: username=admin, password=********
2025-05-13 17:58:33,682 - app - INFO - 已生成CSRF令牌: ImIyYmM0Nj...
2025-05-13 17:58:33,694 - app - INFO - 用户 admin 的角色: ['admin']
2025-05-13 17:58:33,695 - app - INFO - 用户 admin 是否是管理员: True
2025-05-13 17:58:33,762 - app - INFO - 用户登录成功: admin
2025-05-13 17:58:33,765 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 17:58:33] "[32mPOST /auth/login HTTP/1.1[0m" 302 -
2025-05-13 17:58:33,775 - app - DEBUG - Dashboard route accessed
2025-05-13 17:58:33,775 - app - DEBUG - Current user ID: 1
2025-05-13 17:58:33,810 - app - DEBUG - Dashboard data prepared for user: admin
2025-05-13 17:58:33,847 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 17:58:33] "GET /dashboard HTTP/1.1" 200 -
2025-05-13 17:58:33,877 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 17:58:33] "[36mGET /static/css/bootstrap.min.css HTTP/1.1[0m" 304 -
2025-05-13 17:58:33,878 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 17:58:33] "[36mGET /static/css/bootstrap-icons.css HTTP/1.1[0m" 304 -
2025-05-13 17:58:33,879 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 17:58:33] "[36mGET /static/css/style.css HTTP/1.1[0m" 304 -
2025-05-13 17:58:33,881 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 17:58:33] "[36mGET /static/js/jquery.min.js HTTP/1.1[0m" 304 -
2025-05-13 17:58:33,883 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 17:58:33] "[36mGET /static/js/bootstrap.bundle.min.js HTTP/1.1[0m" 304 -
2025-05-13 17:58:33,886 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 17:58:33] "[36mGET /static/js/utils.js HTTP/1.1[0m" 304 -
2025-05-13 17:58:33,890 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 17:58:33] "[36mGET /static/js/auth.js HTTP/1.1[0m" 304 -
2025-05-13 17:58:33,895 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 17:58:33] "[36mGET /static/js/fix-modals.js HTTP/1.1[0m" 304 -
2025-05-13 17:58:33,900 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 17:58:33] "[36mGET /static/js/csrf.js HTTP/1.1[0m" 304 -
2025-05-13 17:58:33,900 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 17:58:33] "[36mGET /static/js/user-profile.js HTTP/1.1[0m" 304 -
2025-05-13 17:58:33,917 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 17:58:33] "GET /static/css/fonts/bootstrap-icons.woff2 HTTP/1.1" 200 -
2025-05-13 17:58:33,932 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 17:58:33] "[36mGET /static/favicon.ico HTTP/1.1[0m" 304 -
2025-05-13 17:58:35,984 - app - WARNING - 绕过JWT验证: /tasks
2025-05-13 17:58:35,985 - app.routes.main - INFO - JWT bypass enabled for tasks - Using test user
2025-05-13 17:58:36,030 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 17:58:36] "GET /tasks?bypass_jwt=true HTTP/1.1" 200 -
2025-05-13 17:58:36,061 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 17:58:36] "[36mGET /static/css/bootstrap.min.css HTTP/1.1[0m" 304 -
2025-05-13 17:58:36,063 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 17:58:36] "[36mGET /static/css/bootstrap-icons.css HTTP/1.1[0m" 304 -
2025-05-13 17:58:36,065 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 17:58:36] "[36mGET /static/css/style.css HTTP/1.1[0m" 304 -
2025-05-13 17:58:36,066 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 17:58:36] "[36mGET /static/js/jquery.min.js HTTP/1.1[0m" 304 -
2025-05-13 17:58:36,068 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 17:58:36] "[36mGET /static/js/bootstrap.bundle.min.js HTTP/1.1[0m" 304 -
2025-05-13 17:58:36,074 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 17:58:36] "[36mGET /static/js/utils.js HTTP/1.1[0m" 304 -
2025-05-13 17:58:36,076 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 17:58:36] "[36mGET /static/js/auth.js HTTP/1.1[0m" 304 -
2025-05-13 17:58:36,080 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 17:58:36] "GET /static/js/main.js HTTP/1.1" 200 -
2025-05-13 17:58:36,084 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 17:58:36] "[36mGET /static/js/fix-modals.js HTTP/1.1[0m" 304 -
2025-05-13 17:58:36,084 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 17:58:36] "[36mGET /static/js/csrf.js HTTP/1.1[0m" 304 -
2025-05-13 17:58:36,086 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 17:58:36] "[36mGET /static/js/user-profile.js HTTP/1.1[0m" 304 -
2025-05-13 17:58:36,118 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 17:58:36] "[36mGET /static/favicon.ico HTTP/1.1[0m" 304 -
2025-05-13 19:37:46,825 - app.utils.permissions - INFO - 更新权限: manage_users
2025-05-13 19:37:46,827 - app.utils.permissions - INFO - 更新权限: manage_roles
2025-05-13 19:37:46,827 - app.utils.permissions - INFO - 更新权限: manage_all_projects
2025-05-13 19:37:46,828 - app.utils.permissions - INFO - 更新权限: manage_project
2025-05-13 19:37:46,828 - app.utils.permissions - INFO - 更新权限: manage_all_tasks
2025-05-13 19:37:46,829 - app.utils.permissions - INFO - 更新权限: manage_task
2025-05-13 19:37:46,830 - app.utils.permissions - INFO - 更新权限: view_project
2025-05-13 19:37:46,830 - app.utils.permissions - INFO - 更新权限: view_task
2025-05-13 19:37:46,831 - app.utils.permissions - INFO - 更新权限: manage_resources
2025-05-13 19:37:46,832 - app.utils.permissions - INFO - 更新权限: manage_risks
2025-05-13 19:37:46,834 - app.utils.permissions - INFO - 更新权限: view_reports
2025-05-13 19:37:46,837 - app.utils.permissions - INFO - 更新权限: create_task
2025-05-13 19:37:46,854 - app.utils.permissions - INFO - 更新权限: create_project
2025-05-13 19:37:46,857 - app.utils.permissions - INFO - 更新权限: assign_task
2025-05-13 19:37:46,858 - app.utils.permissions - INFO - 更新权限: change_project_status
2025-05-13 19:37:46,859 - app.utils.permissions - INFO - 更新权限: change_task_status
2025-05-13 19:37:46,867 - app.utils.permissions - INFO - 更新角色: admin
2025-05-13 19:37:46,870 - app.utils.permissions - INFO - 为管理员角色添加所有权限: 16个
2025-05-13 19:37:46,871 - app.utils.permissions - INFO - 更新角色: manager
2025-05-13 19:37:46,872 - app.utils.permissions - INFO - 为角色 manager 添加权限: manage_project
2025-05-13 19:37:46,872 - app.utils.permissions - INFO - 为角色 manager 添加权限: manage_task
2025-05-13 19:37:46,875 - app.utils.permissions - INFO - 为角色 manager 添加权限: view_project
2025-05-13 19:37:46,875 - app.utils.permissions - INFO - 为角色 manager 添加权限: view_task
2025-05-13 19:37:46,876 - app.utils.permissions - INFO - 为角色 manager 添加权限: manage_resources
2025-05-13 19:37:46,876 - app.utils.permissions - INFO - 为角色 manager 添加权限: manage_risks
2025-05-13 19:37:46,876 - app.utils.permissions - INFO - 为角色 manager 添加权限: view_reports
2025-05-13 19:37:46,876 - app.utils.permissions - INFO - 为角色 manager 添加权限: create_project
2025-05-13 19:37:46,876 - app.utils.permissions - INFO - 为角色 manager 添加权限: create_task
2025-05-13 19:37:46,877 - app.utils.permissions - INFO - 为角色 manager 添加权限: assign_task
2025-05-13 19:37:46,877 - app.utils.permissions - INFO - 为角色 manager 添加权限: change_project_status
2025-05-13 19:37:46,887 - app.utils.permissions - INFO - 为角色 manager 添加权限: change_task_status
2025-05-13 19:37:46,889 - app.utils.permissions - INFO - 更新角色: user
2025-05-13 19:37:46,891 - app.utils.permissions - INFO - 为角色 user 添加权限: view_project
2025-05-13 19:37:46,893 - app.utils.permissions - INFO - 为角色 user 添加权限: view_task
2025-05-13 19:37:46,894 - app.utils.permissions - INFO - 为角色 user 添加权限: view_reports
2025-05-13 19:37:46,896 - app.utils.permissions - INFO - 角色和权限初始化完成
2025-05-13 19:37:46,899 - __main__ - INFO - 角色和权限初始化成功
2025-05-13 19:37:46,906 - __main__ - INFO - 数据库初始化完成
2025-05-13 19:37:46,931 - __main__ - INFO - 系统资源检查完成
2025-05-13 19:37:46,932 - __main__ - INFO - 开始清理旧数据
2025-05-13 19:37:46,935 - __main__ - INFO - 删除了 0 条过期的资源使用记录
2025-05-13 19:37:46,937 - __main__ - INFO - 删除了 0 条已解决的过期警报
2025-05-13 19:37:46,937 - __main__ - INFO - 旧数据清理完成
2025-05-13 19:37:46,978 - werkzeug - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:5000
 * Running on http://192.168.50.190:5000
2025-05-13 19:37:46,979 - werkzeug - INFO - [33mPress CTRL+C to quit[0m
2025-05-13 19:37:46,980 - werkzeug - INFO -  * Restarting with stat
2025-05-13 19:37:48,402 - app.utils.permissions - INFO - 更新权限: manage_users
2025-05-13 19:37:48,402 - app.utils.permissions - INFO - 更新权限: manage_roles
2025-05-13 19:37:48,403 - app.utils.permissions - INFO - 更新权限: manage_all_projects
2025-05-13 19:37:48,404 - app.utils.permissions - INFO - 更新权限: manage_project
2025-05-13 19:37:48,404 - app.utils.permissions - INFO - 更新权限: manage_all_tasks
2025-05-13 19:37:48,405 - app.utils.permissions - INFO - 更新权限: manage_task
2025-05-13 19:37:48,405 - app.utils.permissions - INFO - 更新权限: view_project
2025-05-13 19:37:48,406 - app.utils.permissions - INFO - 更新权限: view_task
2025-05-13 19:37:48,407 - app.utils.permissions - INFO - 更新权限: manage_resources
2025-05-13 19:37:48,408 - app.utils.permissions - INFO - 更新权限: manage_risks
2025-05-13 19:37:48,415 - app.utils.permissions - INFO - 更新权限: view_reports
2025-05-13 19:37:48,419 - app.utils.permissions - INFO - 更新权限: create_task
2025-05-13 19:37:48,429 - app.utils.permissions - INFO - 更新权限: create_project
2025-05-13 19:37:48,431 - app.utils.permissions - INFO - 更新权限: assign_task
2025-05-13 19:37:48,432 - app.utils.permissions - INFO - 更新权限: change_project_status
2025-05-13 19:37:48,432 - app.utils.permissions - INFO - 更新权限: change_task_status
2025-05-13 19:37:48,435 - app.utils.permissions - INFO - 更新角色: admin
2025-05-13 19:37:48,440 - app.utils.permissions - INFO - 为管理员角色添加所有权限: 16个
2025-05-13 19:37:48,442 - app.utils.permissions - INFO - 更新角色: manager
2025-05-13 19:37:48,444 - app.utils.permissions - INFO - 为角色 manager 添加权限: manage_project
2025-05-13 19:37:48,445 - app.utils.permissions - INFO - 为角色 manager 添加权限: manage_task
2025-05-13 19:37:48,445 - app.utils.permissions - INFO - 为角色 manager 添加权限: view_project
2025-05-13 19:37:48,445 - app.utils.permissions - INFO - 为角色 manager 添加权限: view_task
2025-05-13 19:37:48,446 - app.utils.permissions - INFO - 为角色 manager 添加权限: manage_resources
2025-05-13 19:37:48,446 - app.utils.permissions - INFO - 为角色 manager 添加权限: manage_risks
2025-05-13 19:37:48,447 - app.utils.permissions - INFO - 为角色 manager 添加权限: view_reports
2025-05-13 19:37:48,447 - app.utils.permissions - INFO - 为角色 manager 添加权限: create_project
2025-05-13 19:37:48,447 - app.utils.permissions - INFO - 为角色 manager 添加权限: create_task
2025-05-13 19:37:48,447 - app.utils.permissions - INFO - 为角色 manager 添加权限: assign_task
2025-05-13 19:37:48,447 - app.utils.permissions - INFO - 为角色 manager 添加权限: change_project_status
2025-05-13 19:37:48,448 - app.utils.permissions - INFO - 为角色 manager 添加权限: change_task_status
2025-05-13 19:37:48,448 - app.utils.permissions - INFO - 更新角色: user
2025-05-13 19:37:48,449 - app.utils.permissions - INFO - 为角色 user 添加权限: view_project
2025-05-13 19:37:48,449 - app.utils.permissions - INFO - 为角色 user 添加权限: view_task
2025-05-13 19:37:48,450 - app.utils.permissions - INFO - 为角色 user 添加权限: view_reports
2025-05-13 19:37:48,450 - app.utils.permissions - INFO - 角色和权限初始化完成
2025-05-13 19:37:48,450 - __main__ - INFO - 角色和权限初始化成功
2025-05-13 19:37:48,461 - __main__ - INFO - 数据库初始化完成
2025-05-13 19:37:48,478 - __main__ - INFO - 系统资源检查完成
2025-05-13 19:37:48,479 - __main__ - INFO - 开始清理旧数据
2025-05-13 19:37:48,481 - __main__ - INFO - 删除了 0 条过期的资源使用记录
2025-05-13 19:37:48,483 - __main__ - INFO - 删除了 0 条已解决的过期警报
2025-05-13 19:37:48,483 - __main__ - INFO - 旧数据清理完成
2025-05-13 19:37:48,497 - werkzeug - WARNING -  * Debugger is active!
2025-05-13 19:37:48,502 - werkzeug - INFO -  * Debugger PIN: 670-037-726
2025-05-13 19:38:22,923 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 19:38:22] "[32mGET / HTTP/1.1[0m" 302 -
2025-05-13 19:38:22,978 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 19:38:22] "GET /login HTTP/1.1" 200 -
2025-05-13 19:38:23,199 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 19:38:23] "[36mGET /static/css/bootstrap.min.css HTTP/1.1[0m" 304 -
2025-05-13 19:38:23,202 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 19:38:23] "[36mGET /static/css/bootstrap-icons.css HTTP/1.1[0m" 304 -
2025-05-13 19:38:23,206 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 19:38:23] "[36mGET /static/js/bootstrap.bundle.min.js HTTP/1.1[0m" 304 -
2025-05-13 19:38:23,207 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 19:38:23] "[36mGET /static/js/utils.js HTTP/1.1[0m" 304 -
2025-05-13 19:38:23,208 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 19:38:23] "[36mGET /static/css/style.css HTTP/1.1[0m" 304 -
2025-05-13 19:38:23,214 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 19:38:23] "[36mGET /static/js/jquery.min.js HTTP/1.1[0m" 304 -
2025-05-13 19:38:23,223 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 19:38:23] "[36mGET /static/js/auth.js HTTP/1.1[0m" 304 -
2025-05-13 19:38:23,226 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 19:38:23] "[36mGET /static/images/background.png HTTP/1.1[0m" 304 -
2025-05-13 19:38:23,252 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 19:38:23] "[36mGET /static/js/fix-modals.js HTTP/1.1[0m" 304 -
2025-05-13 19:38:23,255 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 19:38:23] "[36mGET /static/js/csrf.js HTTP/1.1[0m" 304 -
2025-05-13 19:38:23,258 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 19:38:23] "[36mGET /static/js/user-profile.js HTTP/1.1[0m" 304 -
2025-05-13 19:38:23,262 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 19:38:23] "[36mGET /static/js/background-helper.js HTTP/1.1[0m" 304 -
2025-05-13 19:38:23,263 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 19:38:23] "[36mGET /static/uploads/background.png HTTP/1.1[0m" 304 -
2025-05-13 19:38:23,364 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 19:38:23] "[36mGET /static/favicon.ico HTTP/1.1[0m" 304 -
2025-05-13 19:38:50,688 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 19:38:50] "GET /login HTTP/1.1" 200 -
2025-05-13 19:38:50,753 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 19:38:50] "GET /static/css/bootstrap.min.css HTTP/1.1" 200 -
2025-05-13 19:38:50,757 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 19:38:50] "GET /static/css/bootstrap-icons.css HTTP/1.1" 200 -
2025-05-13 19:38:50,758 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 19:38:50] "GET /static/css/style.css HTTP/1.1" 200 -
2025-05-13 19:38:50,760 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 19:38:50] "GET /static/js/jquery.min.js HTTP/1.1" 200 -
2025-05-13 19:38:50,761 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 19:38:50] "GET /static/js/bootstrap.bundle.min.js HTTP/1.1" 200 -
2025-05-13 19:38:50,765 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 19:38:50] "GET /static/js/utils.js HTTP/1.1" 200 -
2025-05-13 19:38:50,775 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 19:38:50] "GET /static/js/auth.js HTTP/1.1" 200 -
2025-05-13 19:38:50,786 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 19:38:50] "GET /static/images/background.png HTTP/1.1" 200 -
2025-05-13 19:38:50,804 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 19:38:50] "GET /static/js/fix-modals.js HTTP/1.1" 200 -
2025-05-13 19:38:50,807 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 19:38:50] "GET /static/js/csrf.js HTTP/1.1" 200 -
2025-05-13 19:38:50,808 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 19:38:50] "GET /static/js/user-profile.js HTTP/1.1" 200 -
2025-05-13 19:38:50,811 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 19:38:50] "GET /static/js/background-helper.js HTTP/1.1" 200 -
2025-05-13 19:38:50,814 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 19:38:50] "GET /static/uploads/background.png HTTP/1.1" 200 -
2025-05-13 19:38:50,854 - app - WARNING - 绕过JWT验证: /auth/user_info
2025-05-13 19:38:50,855 - app.utils.jwt_callbacks - WARNING - JWT验证已被绕过: /auth/user_info
2025-05-13 19:38:50,856 - app - INFO - 获取用户信息 - bypass_jwt: True
2025-05-13 19:38:50,856 - app - INFO - 使用默认管理员用户(ID=1)
2025-05-13 19:38:50,878 - app - INFO - 成功获取用户 admin 的信息
2025-05-13 19:38:50,881 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 19:38:50] "GET /auth/user_info?_=1747136330848&bypass_jwt=true HTTP/1.1" 200 -
2025-05-13 19:38:50,883 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 19:38:50] "GET /static/favicon.ico HTTP/1.1" 200 -
2025-05-13 19:38:55,536 - app - INFO - 登录请求 - 方法: POST, 内容类型: application/x-www-form-urlencoded
2025-05-13 19:38:55,537 - app - INFO - 请求头: {'Host': '127.0.0.1:5000', 'Connection': 'keep-alive', 'Content-Length': '135', 'Cache-Control': 'max-age=0', 'Sec-Ch-Ua': '"Chromium";v="136", "Microsoft Edge";v="136", "Not.A/Brand";v="99"', 'Sec-Ch-Ua-Mobile': '?0', 'Sec-Ch-Ua-Platform': '"Windows"', 'Origin': 'http://127.0.0.1:5000', 'Content-Type': 'application/x-www-form-urlencoded', 'Upgrade-Insecure-Requests': '1', 'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36 Edg/136.0.0.0', 'Accept': 'text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.7', 'Sec-Fetch-Site': 'same-origin', 'Sec-Fetch-Mode': 'navigate', 'Sec-Fetch-User': '?1', 'Sec-Fetch-Dest': 'document', 'Referer': 'http://127.0.0.1:5000/login', 'Accept-Encoding': 'gzip, deflate, br, zstd', 'Accept-Language': 'zh-CN,zh;q=0.9,en;q=0.8,en-GB;q=0.7,en-US;q=0.6', 'Cookie': 'session=eyJjc3JmX3Rva2VuIjoiOTQyZWRjYzFkZGRhYzkxY2M5MmViY2Q0YjVmODZlZGYzZTA3NTlhYiJ9.aCMvSg.aGV4hUqZJDJ2T-IuSZ4Faeu6eVA; user_roles=admin; is_admin=true; admin=true'}
2025-05-13 19:38:55,539 - app - INFO - 处理表单格式的登录请求
2025-05-13 19:38:55,540 - app - INFO - 表单数据: username=admin, password=********
2025-05-13 19:38:56,171 - app - INFO - 已生成CSRF令牌: Ijk0MmVkY2...
2025-05-13 19:38:56,172 - app - INFO - 用户 admin 的角色: ['admin']
2025-05-13 19:38:56,174 - app - INFO - 用户 admin 是否是管理员: True
2025-05-13 19:38:56,210 - app - INFO - 用户登录成功: admin
2025-05-13 19:38:56,214 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 19:38:56] "[32mPOST /auth/login HTTP/1.1[0m" 302 -
2025-05-13 19:38:56,229 - app - DEBUG - Dashboard route accessed
2025-05-13 19:38:56,230 - app - DEBUG - Current user ID: 1
2025-05-13 19:38:56,265 - app - DEBUG - Dashboard data prepared for user: admin
2025-05-13 19:38:56,311 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 19:38:56] "GET /dashboard HTTP/1.1" 200 -
2025-05-13 19:38:56,359 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 19:38:56] "[36mGET /static/css/bootstrap.min.css HTTP/1.1[0m" 304 -
2025-05-13 19:38:56,362 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 19:38:56] "[36mGET /static/css/bootstrap-icons.css HTTP/1.1[0m" 304 -
2025-05-13 19:38:56,364 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 19:38:56] "[36mGET /static/css/style.css HTTP/1.1[0m" 304 -
2025-05-13 19:38:56,372 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 19:38:56] "[36mGET /static/js/jquery.min.js HTTP/1.1[0m" 304 -
2025-05-13 19:38:56,384 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 19:38:56] "[36mGET /static/js/bootstrap.bundle.min.js HTTP/1.1[0m" 304 -
2025-05-13 19:38:56,395 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 19:38:56] "[36mGET /static/js/utils.js HTTP/1.1[0m" 304 -
2025-05-13 19:38:56,397 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 19:38:56] "[36mGET /static/js/auth.js HTTP/1.1[0m" 304 -
2025-05-13 19:38:56,406 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 19:38:56] "[36mGET /static/js/fix-modals.js HTTP/1.1[0m" 304 -
2025-05-13 19:38:56,418 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 19:38:56] "[36mGET /static/js/csrf.js HTTP/1.1[0m" 304 -
2025-05-13 19:38:56,426 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 19:38:56] "[36mGET /static/js/user-profile.js HTTP/1.1[0m" 304 -
2025-05-13 19:38:56,448 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 19:38:56] "GET /static/css/fonts/bootstrap-icons.woff2 HTTP/1.1" 200 -
2025-05-13 19:38:56,480 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 19:38:56] "[36mGET /static/favicon.ico HTTP/1.1[0m" 304 -
2025-05-13 19:39:12,384 - app - WARNING - 绕过JWT验证: /projects
2025-05-13 19:39:12,384 - app.utils.jwt_callbacks - WARNING - JWT验证已被绕过: /projects
2025-05-13 19:39:12,385 - app.routes.main - INFO - JWT bypass enabled for projects - Using test user
2025-05-13 19:39:12,430 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 19:39:12] "GET /projects?bypass_jwt=true HTTP/1.1" 200 -
2025-05-13 19:39:12,478 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 19:39:12] "[36mGET /static/css/bootstrap.min.css HTTP/1.1[0m" 304 -
2025-05-13 19:39:12,479 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 19:39:12] "[36mGET /static/css/bootstrap-icons.css HTTP/1.1[0m" 304 -
2025-05-13 19:39:12,480 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 19:39:12] "[36mGET /static/css/style.css HTTP/1.1[0m" 304 -
2025-05-13 19:39:12,483 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 19:39:12] "[36mGET /static/js/jquery.min.js HTTP/1.1[0m" 304 -
2025-05-13 19:39:12,487 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 19:39:12] "[36mGET /static/js/bootstrap.bundle.min.js HTTP/1.1[0m" 304 -
2025-05-13 19:39:12,492 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 19:39:12] "GET /static/css/frappe-gantt.css HTTP/1.1" 200 -
2025-05-13 19:39:12,494 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 19:39:12] "GET /static/js/projects.js HTTP/1.1" 200 -
2025-05-13 19:39:12,499 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 19:39:12] "[36mGET /static/js/utils.js HTTP/1.1[0m" 304 -
2025-05-13 19:39:12,502 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 19:39:12] "[36mGET /static/js/auth.js HTTP/1.1[0m" 304 -
2025-05-13 19:39:12,503 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 19:39:12] "[36mGET /static/js/fix-modals.js HTTP/1.1[0m" 304 -
2025-05-13 19:39:12,511 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 19:39:12] "[36mGET /static/js/csrf.js HTTP/1.1[0m" 304 -
2025-05-13 19:39:12,517 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 19:39:12] "[36mGET /static/js/user-profile.js HTTP/1.1[0m" 304 -
2025-05-13 19:39:12,517 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 19:39:12] "GET /static/js/frappe-gantt.min.js HTTP/1.1" 200 -
2025-05-13 19:39:12,553 - app - WARNING - 绕过JWT验证: /api/global/users
2025-05-13 19:39:12,555 - app.utils.jwt_callbacks - WARNING - JWT验证已被绕过: /api/global/users
2025-05-13 19:39:12,571 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 19:39:12] "[35m[1mGET /api/global/users?bypass_jwt=true&_=1747136352548 HTTP/1.1[0m" 500 -
2025-05-13 19:39:12,578 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 19:39:12] "[36mGET /static/favicon.ico HTTP/1.1[0m" 304 -
2025-05-13 19:39:12,582 - app - WARNING - 绕过JWT验证: /api/project-managers
2025-05-13 19:39:12,584 - app.routes.projects - INFO - 获取所有用户作为项目负责人候选
2025-05-13 19:39:12,587 - app.routes.projects - INFO - 返回所有用户作为项目负责人，共 9 位用户
2025-05-13 19:39:12,590 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 19:39:12] "GET /api/project-managers?bypass_jwt=true&_=1747136352577 HTTP/1.1" 200 -
2025-05-13 19:39:17,027 - app - WARNING - 绕过JWT验证: /api/global/users
2025-05-13 19:39:17,030 - app.utils.jwt_callbacks - WARNING - JWT验证已被绕过: /api/global/users
2025-05-13 19:39:17,032 - app - WARNING - 绕过JWT验证: /api/global/users
2025-05-13 19:39:17,038 - app.utils.jwt_callbacks - WARNING - JWT验证已被绕过: /api/global/users
2025-05-13 19:39:17,061 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 19:39:17] "[35m[1mGET /api/global/users?bypass_jwt=true&_=1747136357006 HTTP/1.1[0m" 500 -
2025-05-13 19:39:17,065 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 19:39:17] "[35m[1mGET /api/global/users?bypass_jwt=true&_=1747136357007 HTTP/1.1[0m" 500 -
2025-05-13 19:39:17,162 - app - WARNING - 绕过JWT验证: /api/project-managers
2025-05-13 19:39:17,164 - app - WARNING - 绕过JWT验证: /api/project-managers
2025-05-13 19:39:17,165 - app.routes.projects - INFO - 获取所有用户作为项目负责人候选
2025-05-13 19:39:17,165 - app.routes.projects - INFO - 获取所有用户作为项目负责人候选
2025-05-13 19:39:17,169 - app.routes.projects - INFO - 返回所有用户作为项目负责人，共 9 位用户
2025-05-13 19:39:17,171 - app.routes.projects - INFO - 返回所有用户作为项目负责人，共 9 位用户
2025-05-13 19:39:17,172 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 19:39:17] "GET /api/project-managers?bypass_jwt=true&_=1747136357070 HTTP/1.1" 200 -
2025-05-13 19:39:17,173 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 19:39:17] "GET /api/project-managers?bypass_jwt=true&_=1747136357070 HTTP/1.1" 200 -
2025-05-13 19:39:24,541 - app - WARNING - 绕过JWT验证: /api/auth/projects
2025-05-13 19:39:24,543 - app.utils.jwt_callbacks - WARNING - JWT验证已被绕过: /api/auth/projects
2025-05-13 19:39:24,543 - app.routes.projects - INFO - API创建项目 - 使用测试用户
2025-05-13 19:39:24,544 - app.routes.projects - INFO - API创建项目: 收到数据 {'name': 'www', 'manager_id': '5', 'start_date': '2025-05-13', 'end_date': '2025-06-12', 'description': 'ffffff', 'status': 'planning'}
2025-05-13 19:39:24,545 - app.routes.projects - INFO - 创建项目: 用户ID=1, 数据={'name': 'www', 'manager_id': '5', 'start_date': '2025-05-13', 'end_date': '2025-06-12', 'description': 'ffffff', 'status': 'planning'}
2025-05-13 19:39:24,564 - app.routes.projects - INFO - 创建项目成功: 16 - www
2025-05-13 19:39:24,566 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 19:39:24] "[35m[1mPOST /api/auth/projects?bypass_jwt=true&_=1747136364533&req=roueu7ir6e HTTP/1.1[0m" 201 -
2025-05-13 19:39:25,758 - app - WARNING - 绕过JWT验证: /projects
2025-05-13 19:39:25,759 - app.utils.jwt_callbacks - WARNING - JWT验证已被绕过: /projects
2025-05-13 19:39:25,760 - app.routes.main - INFO - JWT bypass enabled for projects - Using test user
2025-05-13 19:39:25,773 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 19:39:25] "GET /projects?bypass_jwt=true HTTP/1.1" 200 -
2025-05-13 19:39:25,833 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 19:39:25] "[36mGET /static/css/bootstrap.min.css HTTP/1.1[0m" 304 -
2025-05-13 19:39:25,835 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 19:39:25] "[36mGET /static/css/bootstrap-icons.css HTTP/1.1[0m" 304 -
2025-05-13 19:39:25,838 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 19:39:25] "[36mGET /static/css/style.css HTTP/1.1[0m" 304 -
2025-05-13 19:39:25,841 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 19:39:25] "[36mGET /static/css/frappe-gantt.css HTTP/1.1[0m" 304 -
2025-05-13 19:39:25,843 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 19:39:25] "[36mGET /static/js/jquery.min.js HTTP/1.1[0m" 304 -
2025-05-13 19:39:25,850 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 19:39:25] "[36mGET /static/js/bootstrap.bundle.min.js HTTP/1.1[0m" 304 -
2025-05-13 19:39:25,853 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 19:39:25] "[36mGET /static/js/utils.js HTTP/1.1[0m" 304 -
2025-05-13 19:39:25,856 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 19:39:25] "[36mGET /static/js/projects.js HTTP/1.1[0m" 304 -
2025-05-13 19:39:25,862 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 19:39:25] "[36mGET /static/js/auth.js HTTP/1.1[0m" 304 -
2025-05-13 19:39:25,865 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 19:39:25] "[36mGET /static/js/fix-modals.js HTTP/1.1[0m" 304 -
2025-05-13 19:39:25,869 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 19:39:25] "[36mGET /static/js/csrf.js HTTP/1.1[0m" 304 -
2025-05-13 19:39:25,872 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 19:39:25] "[36mGET /static/js/user-profile.js HTTP/1.1[0m" 304 -
2025-05-13 19:39:25,874 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 19:39:25] "[36mGET /static/js/frappe-gantt.min.js HTTP/1.1[0m" 304 -
2025-05-13 19:39:25,897 - app - WARNING - 绕过JWT验证: /api/global/users
2025-05-13 19:39:25,897 - app.utils.jwt_callbacks - WARNING - JWT验证已被绕过: /api/global/users
2025-05-13 19:39:25,910 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 19:39:25] "[35m[1mGET /api/global/users?bypass_jwt=true&_=1747136365891 HTTP/1.1[0m" 500 -
2025-05-13 19:39:25,915 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 19:39:25] "[36mGET /static/favicon.ico HTTP/1.1[0m" 304 -
2025-05-13 19:39:25,920 - app - WARNING - 绕过JWT验证: /api/project-managers
2025-05-13 19:39:25,921 - app.routes.projects - INFO - 获取所有用户作为项目负责人候选
2025-05-13 19:39:25,923 - app.routes.projects - INFO - 返回所有用户作为项目负责人，共 9 位用户
2025-05-13 19:39:25,924 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 19:39:25] "GET /api/project-managers?bypass_jwt=true&_=1747136365916 HTTP/1.1" 200 -
2025-05-13 19:39:30,289 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 19:39:30] "[36mGET /static/favicon.ico HTTP/1.1[0m" 304 -
2025-05-13 19:39:31,312 - app - WARNING - 绕过JWT验证: /tasks
2025-05-13 19:39:31,314 - app.routes.main - INFO - JWT bypass enabled for tasks - Using test user
2025-05-13 19:39:31,378 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 19:39:31] "GET /tasks?bypass_jwt=true HTTP/1.1" 200 -
2025-05-13 19:39:31,434 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 19:39:31] "[36mGET /static/css/bootstrap.min.css HTTP/1.1[0m" 304 -
2025-05-13 19:39:31,436 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 19:39:31] "[36mGET /static/css/bootstrap-icons.css HTTP/1.1[0m" 304 -
2025-05-13 19:39:31,439 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 19:39:31] "[36mGET /static/css/style.css HTTP/1.1[0m" 304 -
2025-05-13 19:39:31,447 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 19:39:31] "[36mGET /static/js/jquery.min.js HTTP/1.1[0m" 304 -
2025-05-13 19:39:31,447 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 19:39:31] "[36mGET /static/js/bootstrap.bundle.min.js HTTP/1.1[0m" 304 -
2025-05-13 19:39:31,452 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 19:39:31] "[36mGET /static/js/utils.js HTTP/1.1[0m" 304 -
2025-05-13 19:39:31,455 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 19:39:31] "[36mGET /static/js/auth.js HTTP/1.1[0m" 304 -
2025-05-13 19:39:31,462 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 19:39:31] "GET /static/js/main.js HTTP/1.1" 200 -
2025-05-13 19:39:31,463 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 19:39:31] "[36mGET /static/js/fix-modals.js HTTP/1.1[0m" 304 -
2025-05-13 19:39:31,471 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 19:39:31] "[36mGET /static/js/csrf.js HTTP/1.1[0m" 304 -
2025-05-13 19:39:31,473 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 19:39:31] "[36mGET /static/js/user-profile.js HTTP/1.1[0m" 304 -
2025-05-13 19:39:31,527 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 19:39:31] "[36mGET /static/favicon.ico HTTP/1.1[0m" 304 -
2025-05-13 19:50:58,093 - werkzeug - INFO -  * Detected change in 'D:\\tmp\\work\\app\\routes\\tasks.py', reloading
2025-05-13 19:50:58,510 - werkzeug - INFO -  * Restarting with stat
2025-05-13 19:51:00,275 - app.utils.permissions - INFO - 更新权限: manage_users
2025-05-13 19:51:00,276 - app.utils.permissions - INFO - 更新权限: manage_roles
2025-05-13 19:51:00,278 - app.utils.permissions - INFO - 更新权限: manage_all_projects
2025-05-13 19:51:00,279 - app.utils.permissions - INFO - 更新权限: manage_project
2025-05-13 19:51:00,280 - app.utils.permissions - INFO - 更新权限: manage_all_tasks
2025-05-13 19:51:00,280 - app.utils.permissions - INFO - 更新权限: manage_task
2025-05-13 19:51:00,281 - app.utils.permissions - INFO - 更新权限: view_project
2025-05-13 19:51:00,283 - app.utils.permissions - INFO - 更新权限: view_task
2025-05-13 19:51:00,285 - app.utils.permissions - INFO - 更新权限: manage_resources
2025-05-13 19:51:00,286 - app.utils.permissions - INFO - 更新权限: manage_risks
2025-05-13 19:51:00,290 - app.utils.permissions - INFO - 更新权限: view_reports
2025-05-13 19:51:00,291 - app.utils.permissions - INFO - 更新权限: create_task
2025-05-13 19:51:00,292 - app.utils.permissions - INFO - 更新权限: create_project
2025-05-13 19:51:00,296 - app.utils.permissions - INFO - 更新权限: assign_task
2025-05-13 19:51:00,300 - app.utils.permissions - INFO - 更新权限: change_project_status
2025-05-13 19:51:00,300 - app.utils.permissions - INFO - 更新权限: change_task_status
2025-05-13 19:51:00,304 - app.utils.permissions - INFO - 更新角色: admin
2025-05-13 19:51:00,308 - app.utils.permissions - INFO - 为管理员角色添加所有权限: 16个
2025-05-13 19:51:00,314 - app.utils.permissions - INFO - 更新角色: manager
2025-05-13 19:51:00,315 - app.utils.permissions - INFO - 为角色 manager 添加权限: manage_project
2025-05-13 19:51:00,315 - app.utils.permissions - INFO - 为角色 manager 添加权限: manage_task
2025-05-13 19:51:00,316 - app.utils.permissions - INFO - 为角色 manager 添加权限: view_project
2025-05-13 19:51:00,316 - app.utils.permissions - INFO - 为角色 manager 添加权限: view_task
2025-05-13 19:51:00,318 - app.utils.permissions - INFO - 为角色 manager 添加权限: manage_resources
2025-05-13 19:51:00,318 - app.utils.permissions - INFO - 为角色 manager 添加权限: manage_risks
2025-05-13 19:51:00,319 - app.utils.permissions - INFO - 为角色 manager 添加权限: view_reports
2025-05-13 19:51:00,319 - app.utils.permissions - INFO - 为角色 manager 添加权限: create_project
2025-05-13 19:51:00,320 - app.utils.permissions - INFO - 为角色 manager 添加权限: create_task
2025-05-13 19:51:00,320 - app.utils.permissions - INFO - 为角色 manager 添加权限: assign_task
2025-05-13 19:51:00,320 - app.utils.permissions - INFO - 为角色 manager 添加权限: change_project_status
2025-05-13 19:51:00,320 - app.utils.permissions - INFO - 为角色 manager 添加权限: change_task_status
2025-05-13 19:51:00,321 - app.utils.permissions - INFO - 更新角色: user
2025-05-13 19:51:00,322 - app.utils.permissions - INFO - 为角色 user 添加权限: view_project
2025-05-13 19:51:00,322 - app.utils.permissions - INFO - 为角色 user 添加权限: view_task
2025-05-13 19:51:00,322 - app.utils.permissions - INFO - 为角色 user 添加权限: view_reports
2025-05-13 19:51:00,324 - app.utils.permissions - INFO - 角色和权限初始化完成
2025-05-13 19:51:00,333 - __main__ - INFO - 角色和权限初始化成功
2025-05-13 19:51:00,341 - __main__ - INFO - 数据库初始化完成
2025-05-13 19:51:00,366 - __main__ - INFO - 系统资源检查完成
2025-05-13 19:51:00,367 - __main__ - INFO - 开始清理旧数据
2025-05-13 19:51:00,370 - __main__ - INFO - 删除了 0 条过期的资源使用记录
2025-05-13 19:51:00,372 - __main__ - INFO - 删除了 0 条已解决的过期警报
2025-05-13 19:51:00,372 - __main__ - INFO - 旧数据清理完成
2025-05-13 19:51:00,389 - werkzeug - WARNING -  * Debugger is active!
2025-05-13 19:51:00,400 - werkzeug - INFO -  * Debugger PIN: 670-037-726
2025-05-13 19:53:24,571 - app.utils.permissions - INFO - 更新权限: manage_users
2025-05-13 19:53:24,575 - app.utils.permissions - INFO - 更新权限: manage_roles
2025-05-13 19:53:24,576 - app.utils.permissions - INFO - 更新权限: manage_all_projects
2025-05-13 19:53:24,577 - app.utils.permissions - INFO - 更新权限: manage_project
2025-05-13 19:53:24,578 - app.utils.permissions - INFO - 更新权限: manage_all_tasks
2025-05-13 19:53:24,578 - app.utils.permissions - INFO - 更新权限: manage_task
2025-05-13 19:53:24,579 - app.utils.permissions - INFO - 更新权限: view_project
2025-05-13 19:53:24,579 - app.utils.permissions - INFO - 更新权限: view_task
2025-05-13 19:53:24,580 - app.utils.permissions - INFO - 更新权限: manage_resources
2025-05-13 19:53:24,580 - app.utils.permissions - INFO - 更新权限: manage_risks
2025-05-13 19:53:24,581 - app.utils.permissions - INFO - 更新权限: view_reports
2025-05-13 19:53:24,582 - app.utils.permissions - INFO - 更新权限: create_task
2025-05-13 19:53:24,582 - app.utils.permissions - INFO - 更新权限: create_project
2025-05-13 19:53:24,584 - app.utils.permissions - INFO - 更新权限: assign_task
2025-05-13 19:53:24,584 - app.utils.permissions - INFO - 更新权限: change_project_status
2025-05-13 19:53:24,585 - app.utils.permissions - INFO - 更新权限: change_task_status
2025-05-13 19:53:24,590 - app.utils.permissions - INFO - 更新角色: admin
2025-05-13 19:53:24,593 - app.utils.permissions - INFO - 为管理员角色添加所有权限: 16个
2025-05-13 19:53:24,595 - app.utils.permissions - INFO - 更新角色: manager
2025-05-13 19:53:24,596 - app.utils.permissions - INFO - 为角色 manager 添加权限: manage_project
2025-05-13 19:53:24,596 - app.utils.permissions - INFO - 为角色 manager 添加权限: manage_task
2025-05-13 19:53:24,596 - app.utils.permissions - INFO - 为角色 manager 添加权限: view_project
2025-05-13 19:53:24,597 - app.utils.permissions - INFO - 为角色 manager 添加权限: view_task
2025-05-13 19:53:24,597 - app.utils.permissions - INFO - 为角色 manager 添加权限: manage_resources
2025-05-13 19:53:24,598 - app.utils.permissions - INFO - 为角色 manager 添加权限: manage_risks
2025-05-13 19:53:24,598 - app.utils.permissions - INFO - 为角色 manager 添加权限: view_reports
2025-05-13 19:53:24,598 - app.utils.permissions - INFO - 为角色 manager 添加权限: create_project
2025-05-13 19:53:24,599 - app.utils.permissions - INFO - 为角色 manager 添加权限: create_task
2025-05-13 19:53:24,599 - app.utils.permissions - INFO - 为角色 manager 添加权限: assign_task
2025-05-13 19:53:24,599 - app.utils.permissions - INFO - 为角色 manager 添加权限: change_project_status
2025-05-13 19:53:24,599 - app.utils.permissions - INFO - 为角色 manager 添加权限: change_task_status
2025-05-13 19:53:24,600 - app.utils.permissions - INFO - 更新角色: user
2025-05-13 19:53:24,601 - app.utils.permissions - INFO - 为角色 user 添加权限: view_project
2025-05-13 19:53:24,602 - app.utils.permissions - INFO - 为角色 user 添加权限: view_task
2025-05-13 19:53:24,602 - app.utils.permissions - INFO - 为角色 user 添加权限: view_reports
2025-05-13 19:53:24,603 - app.utils.permissions - INFO - 角色和权限初始化完成
2025-05-13 19:53:24,603 - __main__ - INFO - 角色和权限初始化成功
2025-05-13 19:53:24,610 - __main__ - INFO - 数据库初始化完成
2025-05-13 19:53:24,625 - __main__ - INFO - 系统资源检查完成
2025-05-13 19:53:24,625 - __main__ - INFO - 开始清理旧数据
2025-05-13 19:53:24,628 - __main__ - INFO - 删除了 0 条过期的资源使用记录
2025-05-13 19:53:24,630 - __main__ - INFO - 删除了 0 条已解决的过期警报
2025-05-13 19:53:24,631 - __main__ - INFO - 旧数据清理完成
2025-05-13 19:53:24,654 - werkzeug - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:5000
 * Running on http://192.168.50.190:5000
2025-05-13 19:53:24,655 - werkzeug - INFO - [33mPress CTRL+C to quit[0m
2025-05-13 19:53:24,655 - werkzeug - INFO -  * Restarting with stat
2025-05-13 19:53:26,102 - app.utils.permissions - INFO - 更新权限: manage_users
2025-05-13 19:53:26,103 - app.utils.permissions - INFO - 更新权限: manage_roles
2025-05-13 19:53:26,104 - app.utils.permissions - INFO - 更新权限: manage_all_projects
2025-05-13 19:53:26,106 - app.utils.permissions - INFO - 更新权限: manage_project
2025-05-13 19:53:26,107 - app.utils.permissions - INFO - 更新权限: manage_all_tasks
2025-05-13 19:53:26,107 - app.utils.permissions - INFO - 更新权限: manage_task
2025-05-13 19:53:26,108 - app.utils.permissions - INFO - 更新权限: view_project
2025-05-13 19:53:26,110 - app.utils.permissions - INFO - 更新权限: view_task
2025-05-13 19:53:26,111 - app.utils.permissions - INFO - 更新权限: manage_resources
2025-05-13 19:53:26,112 - app.utils.permissions - INFO - 更新权限: manage_risks
2025-05-13 19:53:26,113 - app.utils.permissions - INFO - 更新权限: view_reports
2025-05-13 19:53:26,113 - app.utils.permissions - INFO - 更新权限: create_task
2025-05-13 19:53:26,114 - app.utils.permissions - INFO - 更新权限: create_project
2025-05-13 19:53:26,115 - app.utils.permissions - INFO - 更新权限: assign_task
2025-05-13 19:53:26,117 - app.utils.permissions - INFO - 更新权限: change_project_status
2025-05-13 19:53:26,118 - app.utils.permissions - INFO - 更新权限: change_task_status
2025-05-13 19:53:26,122 - app.utils.permissions - INFO - 更新角色: admin
2025-05-13 19:53:26,126 - app.utils.permissions - INFO - 为管理员角色添加所有权限: 16个
2025-05-13 19:53:26,127 - app.utils.permissions - INFO - 更新角色: manager
2025-05-13 19:53:26,128 - app.utils.permissions - INFO - 为角色 manager 添加权限: manage_project
2025-05-13 19:53:26,128 - app.utils.permissions - INFO - 为角色 manager 添加权限: manage_task
2025-05-13 19:53:26,129 - app.utils.permissions - INFO - 为角色 manager 添加权限: view_project
2025-05-13 19:53:26,129 - app.utils.permissions - INFO - 为角色 manager 添加权限: view_task
2025-05-13 19:53:26,129 - app.utils.permissions - INFO - 为角色 manager 添加权限: manage_resources
2025-05-13 19:53:26,130 - app.utils.permissions - INFO - 为角色 manager 添加权限: manage_risks
2025-05-13 19:53:26,130 - app.utils.permissions - INFO - 为角色 manager 添加权限: view_reports
2025-05-13 19:53:26,131 - app.utils.permissions - INFO - 为角色 manager 添加权限: create_project
2025-05-13 19:53:26,131 - app.utils.permissions - INFO - 为角色 manager 添加权限: create_task
2025-05-13 19:53:26,131 - app.utils.permissions - INFO - 为角色 manager 添加权限: assign_task
2025-05-13 19:53:26,132 - app.utils.permissions - INFO - 为角色 manager 添加权限: change_project_status
2025-05-13 19:53:26,133 - app.utils.permissions - INFO - 为角色 manager 添加权限: change_task_status
2025-05-13 19:53:26,133 - app.utils.permissions - INFO - 更新角色: user
2025-05-13 19:53:26,134 - app.utils.permissions - INFO - 为角色 user 添加权限: view_project
2025-05-13 19:53:26,134 - app.utils.permissions - INFO - 为角色 user 添加权限: view_task
2025-05-13 19:53:26,135 - app.utils.permissions - INFO - 为角色 user 添加权限: view_reports
2025-05-13 19:53:26,136 - app.utils.permissions - INFO - 角色和权限初始化完成
2025-05-13 19:53:26,136 - __main__ - INFO - 角色和权限初始化成功
2025-05-13 19:53:26,143 - __main__ - INFO - 数据库初始化完成
2025-05-13 19:53:26,161 - __main__ - INFO - 系统资源检查完成
2025-05-13 19:53:26,161 - __main__ - INFO - 开始清理旧数据
2025-05-13 19:53:26,163 - __main__ - INFO - 删除了 0 条过期的资源使用记录
2025-05-13 19:53:26,165 - __main__ - INFO - 删除了 0 条已解决的过期警报
2025-05-13 19:53:26,166 - __main__ - INFO - 旧数据清理完成
2025-05-13 19:53:26,175 - werkzeug - WARNING -  * Debugger is active!
2025-05-13 19:53:26,180 - werkzeug - INFO -  * Debugger PIN: 670-037-726
2025-05-13 19:54:16,943 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 19:54:16] "GET /login HTTP/1.1" 200 -
2025-05-13 19:54:17,291 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 19:54:17] "GET /static/css/bootstrap.min.css HTTP/1.1" 200 -
2025-05-13 19:54:17,304 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 19:54:17] "GET /static/js/auth.js HTTP/1.1" 200 -
2025-05-13 19:54:17,304 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 19:54:17] "GET /static/js/bootstrap.bundle.min.js HTTP/1.1" 200 -
2025-05-13 19:54:17,315 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 19:54:17] "GET /static/css/style.css HTTP/1.1" 200 -
2025-05-13 19:54:17,317 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 19:54:17] "GET /static/js/fix-modals.js HTTP/1.1" 200 -
2025-05-13 19:54:17,320 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 19:54:17] "GET /static/css/bootstrap-icons.css HTTP/1.1" 200 -
2025-05-13 19:54:17,320 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 19:54:17] "GET /static/images/background.png HTTP/1.1" 200 -
2025-05-13 19:54:17,321 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 19:54:17] "GET /static/js/jquery.min.js HTTP/1.1" 200 -
2025-05-13 19:54:17,322 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 19:54:17] "GET /static/js/utils.js HTTP/1.1" 200 -
2025-05-13 19:54:17,330 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 19:54:17] "GET /static/js/csrf.js HTTP/1.1" 200 -
2025-05-13 19:54:17,352 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 19:54:17] "GET /static/js/user-profile.js HTTP/1.1" 200 -
2025-05-13 19:54:17,354 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 19:54:17] "GET /static/js/background-helper.js HTTP/1.1" 200 -
2025-05-13 19:54:17,356 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 19:54:17] "GET /static/uploads/background.png HTTP/1.1" 200 -
2025-05-13 19:54:17,399 - app - WARNING - 绕过JWT验证: /auth/user_info
2025-05-13 19:54:17,400 - app.utils.jwt_callbacks - WARNING - JWT验证已被绕过: /auth/user_info
2025-05-13 19:54:17,401 - app - INFO - 获取用户信息 - bypass_jwt: True
2025-05-13 19:54:17,401 - app - INFO - 使用默认管理员用户(ID=1)
2025-05-13 19:54:17,421 - app - INFO - 成功获取用户 admin 的信息
2025-05-13 19:54:17,421 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 19:54:17] "GET /auth/user_info?_=1747137257394&bypass_jwt=true HTTP/1.1" 200 -
2025-05-13 19:54:17,429 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 19:54:17] "GET /static/favicon.ico HTTP/1.1" 200 -
2025-05-13 19:54:20,022 - app - INFO - 登录请求 - 方法: POST, 内容类型: application/x-www-form-urlencoded
2025-05-13 19:54:20,023 - app - INFO - 请求头: {'Host': '127.0.0.1:5000', 'Connection': 'keep-alive', 'Content-Length': '135', 'Cache-Control': 'max-age=0', 'Sec-Ch-Ua': '"Chromium";v="136", "Microsoft Edge";v="136", "Not.A/Brand";v="99"', 'Sec-Ch-Ua-Mobile': '?0', 'Sec-Ch-Ua-Platform': '"Windows"', 'Origin': 'http://127.0.0.1:5000', 'Content-Type': 'application/x-www-form-urlencoded', 'Upgrade-Insecure-Requests': '1', 'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36 Edg/136.0.0.0', 'Accept': 'text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.7', 'Sec-Fetch-Site': 'same-origin', 'Sec-Fetch-Mode': 'navigate', 'Sec-Fetch-User': '?1', 'Sec-Fetch-Dest': 'document', 'Referer': 'http://127.0.0.1:5000/login', 'Accept-Encoding': 'gzip, deflate, br, zstd', 'Accept-Language': 'zh-CN,zh;q=0.9,en;q=0.8,en-GB;q=0.7,en-US;q=0.6', 'Cookie': 'session=eyJjc3JmX3Rva2VuIjoiNjUxOTVhNzU5NDZhNjk0ZjllMjRmOThjNWVmYmRlZGRkN2QxYzBiOSJ9.aCMy6A.xUehsFW0ObzdvNlbMa_WSYAzJOg; user_roles=admin; is_admin=true; admin=true'}
2025-05-13 19:54:20,023 - app - INFO - 处理表单格式的登录请求
2025-05-13 19:54:20,024 - app - INFO - 表单数据: username=admin, password=********
2025-05-13 19:54:20,685 - app - INFO - 已生成CSRF令牌: IjY1MTk1YT...
2025-05-13 19:54:20,687 - app - INFO - 用户 admin 的角色: ['admin']
2025-05-13 19:54:20,688 - app - INFO - 用户 admin 是否是管理员: True
2025-05-13 19:54:20,735 - app - INFO - 用户登录成功: admin
2025-05-13 19:54:20,739 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 19:54:20] "[32mPOST /auth/login HTTP/1.1[0m" 302 -
2025-05-13 19:54:20,754 - app - DEBUG - Dashboard route accessed
2025-05-13 19:54:20,755 - app - DEBUG - Current user ID: 1
2025-05-13 19:54:20,796 - app - DEBUG - Dashboard data prepared for user: admin
2025-05-13 19:54:20,850 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 19:54:20] "GET /dashboard HTTP/1.1" 200 -
2025-05-13 19:54:20,903 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 19:54:20] "[36mGET /static/css/bootstrap.min.css HTTP/1.1[0m" 304 -
2025-05-13 19:54:20,905 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 19:54:20] "[36mGET /static/css/bootstrap-icons.css HTTP/1.1[0m" 304 -
2025-05-13 19:54:20,909 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 19:54:20] "[36mGET /static/css/style.css HTTP/1.1[0m" 304 -
2025-05-13 19:54:20,917 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 19:54:20] "[36mGET /static/js/bootstrap.bundle.min.js HTTP/1.1[0m" 304 -
2025-05-13 19:54:20,918 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 19:54:20] "[36mGET /static/js/jquery.min.js HTTP/1.1[0m" 304 -
2025-05-13 19:54:20,921 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 19:54:20] "[36mGET /static/js/auth.js HTTP/1.1[0m" 304 -
2025-05-13 19:54:20,923 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 19:54:20] "[36mGET /static/js/utils.js HTTP/1.1[0m" 304 -
2025-05-13 19:54:20,931 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 19:54:20] "[36mGET /static/js/fix-modals.js HTTP/1.1[0m" 304 -
2025-05-13 19:54:20,937 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 19:54:20] "[36mGET /static/js/csrf.js HTTP/1.1[0m" 304 -
2025-05-13 19:54:20,939 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 19:54:20] "[36mGET /static/js/user-profile.js HTTP/1.1[0m" 304 -
2025-05-13 19:54:20,977 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 19:54:20] "GET /static/css/fonts/bootstrap-icons.woff2 HTTP/1.1" 200 -
2025-05-13 19:54:21,004 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 19:54:21] "[36mGET /static/favicon.ico HTTP/1.1[0m" 304 -
2025-05-13 19:54:53,447 - app - WARNING - 绕过JWT验证: /tasks
2025-05-13 19:54:53,448 - app.routes.main - INFO - JWT bypass enabled for tasks - Using test user
2025-05-13 19:54:53,511 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 19:54:53] "GET /tasks?bypass_jwt=true HTTP/1.1" 200 -
2025-05-13 19:54:53,562 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 19:54:53] "[36mGET /static/css/bootstrap.min.css HTTP/1.1[0m" 304 -
2025-05-13 19:54:53,565 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 19:54:53] "[36mGET /static/css/bootstrap-icons.css HTTP/1.1[0m" 304 -
2025-05-13 19:54:53,570 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 19:54:53] "[36mGET /static/css/style.css HTTP/1.1[0m" 304 -
2025-05-13 19:54:53,573 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 19:54:53] "[36mGET /static/js/jquery.min.js HTTP/1.1[0m" 304 -
2025-05-13 19:54:53,576 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 19:54:53] "[36mGET /static/js/bootstrap.bundle.min.js HTTP/1.1[0m" 304 -
2025-05-13 19:54:53,579 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 19:54:53] "[36mGET /static/js/utils.js HTTP/1.1[0m" 304 -
2025-05-13 19:54:53,583 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 19:54:53] "GET /static/js/main.js HTTP/1.1" 200 -
2025-05-13 19:54:53,585 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 19:54:53] "[36mGET /static/js/auth.js HTTP/1.1[0m" 304 -
2025-05-13 19:54:53,590 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 19:54:53] "[36mGET /static/js/fix-modals.js HTTP/1.1[0m" 304 -
2025-05-13 19:54:53,598 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 19:54:53] "[36mGET /static/js/csrf.js HTTP/1.1[0m" 304 -
2025-05-13 19:54:53,599 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 19:54:53] "[36mGET /static/js/user-profile.js HTTP/1.1[0m" 304 -
2025-05-13 19:54:53,639 - app - WARNING - 绕过JWT验证: /api/projects
2025-05-13 19:54:53,644 - app - WARNING - 绕过JWT验证: /api/global/users
2025-05-13 19:54:53,646 - app.routes.projects - INFO - API获取项目列表成功，返回 16 个项目
2025-05-13 19:54:53,647 - app.utils.jwt_callbacks - WARNING - JWT验证已被绕过: /api/global/users
2025-05-13 19:54:53,649 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 19:54:53] "GET /api/projects?bypass_jwt=true HTTP/1.1" 200 -
2025-05-13 19:54:53,657 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 19:54:53] "[36mGET /static/favicon.ico HTTP/1.1[0m" 304 -
2025-05-13 19:54:53,673 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 19:54:53] "[35m[1mGET /api/global/users?bypass_jwt=true HTTP/1.1[0m" 500 -
2025-05-13 19:56:46,932 - werkzeug - INFO -  * Detected change in 'D:\\tmp\\work\\app\\routes\\auth.py', reloading
2025-05-13 19:56:47,310 - werkzeug - INFO -  * Restarting with stat
2025-05-13 19:56:49,173 - app.utils.permissions - INFO - 更新权限: manage_users
2025-05-13 19:56:49,175 - app.utils.permissions - INFO - 更新权限: manage_roles
2025-05-13 19:56:49,177 - app.utils.permissions - INFO - 更新权限: manage_all_projects
2025-05-13 19:56:49,177 - app.utils.permissions - INFO - 更新权限: manage_project
2025-05-13 19:56:49,178 - app.utils.permissions - INFO - 更新权限: manage_all_tasks
2025-05-13 19:56:49,178 - app.utils.permissions - INFO - 更新权限: manage_task
2025-05-13 19:56:49,179 - app.utils.permissions - INFO - 更新权限: view_project
2025-05-13 19:56:49,180 - app.utils.permissions - INFO - 更新权限: view_task
2025-05-13 19:56:49,181 - app.utils.permissions - INFO - 更新权限: manage_resources
2025-05-13 19:56:49,181 - app.utils.permissions - INFO - 更新权限: manage_risks
2025-05-13 19:56:49,182 - app.utils.permissions - INFO - 更新权限: view_reports
2025-05-13 19:56:49,184 - app.utils.permissions - INFO - 更新权限: create_task
2025-05-13 19:56:49,184 - app.utils.permissions - INFO - 更新权限: create_project
2025-05-13 19:56:49,185 - app.utils.permissions - INFO - 更新权限: assign_task
2025-05-13 19:56:49,185 - app.utils.permissions - INFO - 更新权限: change_project_status
2025-05-13 19:56:49,186 - app.utils.permissions - INFO - 更新权限: change_task_status
2025-05-13 19:56:49,189 - app.utils.permissions - INFO - 更新角色: admin
2025-05-13 19:56:49,197 - app.utils.permissions - INFO - 为管理员角色添加所有权限: 16个
2025-05-13 19:56:49,198 - app.utils.permissions - INFO - 更新角色: manager
2025-05-13 19:56:49,199 - app.utils.permissions - INFO - 为角色 manager 添加权限: manage_project
2025-05-13 19:56:49,199 - app.utils.permissions - INFO - 为角色 manager 添加权限: manage_task
2025-05-13 19:56:49,199 - app.utils.permissions - INFO - 为角色 manager 添加权限: view_project
2025-05-13 19:56:49,200 - app.utils.permissions - INFO - 为角色 manager 添加权限: view_task
2025-05-13 19:56:49,200 - app.utils.permissions - INFO - 为角色 manager 添加权限: manage_resources
2025-05-13 19:56:49,200 - app.utils.permissions - INFO - 为角色 manager 添加权限: manage_risks
2025-05-13 19:56:49,200 - app.utils.permissions - INFO - 为角色 manager 添加权限: view_reports
2025-05-13 19:56:49,202 - app.utils.permissions - INFO - 为角色 manager 添加权限: create_project
2025-05-13 19:56:49,203 - app.utils.permissions - INFO - 为角色 manager 添加权限: create_task
2025-05-13 19:56:49,203 - app.utils.permissions - INFO - 为角色 manager 添加权限: assign_task
2025-05-13 19:56:49,204 - app.utils.permissions - INFO - 为角色 manager 添加权限: change_project_status
2025-05-13 19:56:49,204 - app.utils.permissions - INFO - 为角色 manager 添加权限: change_task_status
2025-05-13 19:56:49,205 - app.utils.permissions - INFO - 更新角色: user
2025-05-13 19:56:49,206 - app.utils.permissions - INFO - 为角色 user 添加权限: view_project
2025-05-13 19:56:49,206 - app.utils.permissions - INFO - 为角色 user 添加权限: view_task
2025-05-13 19:56:49,207 - app.utils.permissions - INFO - 为角色 user 添加权限: view_reports
2025-05-13 19:56:49,221 - app.utils.permissions - INFO - 角色和权限初始化完成
2025-05-13 19:56:49,221 - __main__ - INFO - 角色和权限初始化成功
2025-05-13 19:56:49,232 - __main__ - INFO - 数据库初始化完成
2025-05-13 19:56:49,248 - __main__ - INFO - 系统资源检查完成
2025-05-13 19:56:49,248 - __main__ - INFO - 开始清理旧数据
2025-05-13 19:56:49,250 - __main__ - INFO - 删除了 0 条过期的资源使用记录
2025-05-13 19:56:49,252 - __main__ - INFO - 删除了 0 条已解决的过期警报
2025-05-13 19:56:49,253 - __main__ - INFO - 旧数据清理完成
2025-05-13 19:56:49,261 - werkzeug - WARNING -  * Debugger is active!
2025-05-13 19:56:49,265 - werkzeug - INFO -  * Debugger PIN: 670-037-726
2025-05-13 19:57:44,706 - app.utils.permissions - INFO - 更新权限: manage_users
2025-05-13 19:57:44,708 - app.utils.permissions - INFO - 更新权限: manage_roles
2025-05-13 19:57:44,709 - app.utils.permissions - INFO - 更新权限: manage_all_projects
2025-05-13 19:57:44,709 - app.utils.permissions - INFO - 更新权限: manage_project
2025-05-13 19:57:44,710 - app.utils.permissions - INFO - 更新权限: manage_all_tasks
2025-05-13 19:57:44,710 - app.utils.permissions - INFO - 更新权限: manage_task
2025-05-13 19:57:44,711 - app.utils.permissions - INFO - 更新权限: view_project
2025-05-13 19:57:44,711 - app.utils.permissions - INFO - 更新权限: view_task
2025-05-13 19:57:44,712 - app.utils.permissions - INFO - 更新权限: manage_resources
2025-05-13 19:57:44,712 - app.utils.permissions - INFO - 更新权限: manage_risks
2025-05-13 19:57:44,713 - app.utils.permissions - INFO - 更新权限: view_reports
2025-05-13 19:57:44,715 - app.utils.permissions - INFO - 更新权限: create_task
2025-05-13 19:57:44,715 - app.utils.permissions - INFO - 更新权限: create_project
2025-05-13 19:57:44,716 - app.utils.permissions - INFO - 更新权限: assign_task
2025-05-13 19:57:44,716 - app.utils.permissions - INFO - 更新权限: change_project_status
2025-05-13 19:57:44,717 - app.utils.permissions - INFO - 更新权限: change_task_status
2025-05-13 19:57:44,721 - app.utils.permissions - INFO - 更新角色: admin
2025-05-13 19:57:44,725 - app.utils.permissions - INFO - 为管理员角色添加所有权限: 16个
2025-05-13 19:57:44,727 - app.utils.permissions - INFO - 更新角色: manager
2025-05-13 19:57:44,728 - app.utils.permissions - INFO - 为角色 manager 添加权限: manage_project
2025-05-13 19:57:44,729 - app.utils.permissions - INFO - 为角色 manager 添加权限: manage_task
2025-05-13 19:57:44,729 - app.utils.permissions - INFO - 为角色 manager 添加权限: view_project
2025-05-13 19:57:44,729 - app.utils.permissions - INFO - 为角色 manager 添加权限: view_task
2025-05-13 19:57:44,729 - app.utils.permissions - INFO - 为角色 manager 添加权限: manage_resources
2025-05-13 19:57:44,730 - app.utils.permissions - INFO - 为角色 manager 添加权限: manage_risks
2025-05-13 19:57:44,730 - app.utils.permissions - INFO - 为角色 manager 添加权限: view_reports
2025-05-13 19:57:44,730 - app.utils.permissions - INFO - 为角色 manager 添加权限: create_project
2025-05-13 19:57:44,731 - app.utils.permissions - INFO - 为角色 manager 添加权限: create_task
2025-05-13 19:57:44,731 - app.utils.permissions - INFO - 为角色 manager 添加权限: assign_task
2025-05-13 19:57:44,731 - app.utils.permissions - INFO - 为角色 manager 添加权限: change_project_status
2025-05-13 19:57:44,733 - app.utils.permissions - INFO - 为角色 manager 添加权限: change_task_status
2025-05-13 19:57:44,734 - app.utils.permissions - INFO - 更新角色: user
2025-05-13 19:57:44,736 - app.utils.permissions - INFO - 为角色 user 添加权限: view_project
2025-05-13 19:57:44,736 - app.utils.permissions - INFO - 为角色 user 添加权限: view_task
2025-05-13 19:57:44,738 - app.utils.permissions - INFO - 为角色 user 添加权限: view_reports
2025-05-13 19:57:44,739 - app.utils.permissions - INFO - 角色和权限初始化完成
2025-05-13 19:57:44,739 - __main__ - INFO - 角色和权限初始化成功
2025-05-13 19:57:44,747 - __main__ - INFO - 数据库初始化完成
2025-05-13 19:57:44,766 - __main__ - INFO - 系统资源检查完成
2025-05-13 19:57:44,767 - __main__ - INFO - 开始清理旧数据
2025-05-13 19:57:44,770 - __main__ - INFO - 删除了 0 条过期的资源使用记录
2025-05-13 19:57:44,772 - __main__ - INFO - 删除了 0 条已解决的过期警报
2025-05-13 19:57:44,773 - __main__ - INFO - 旧数据清理完成
2025-05-13 19:57:44,798 - werkzeug - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:5000
 * Running on http://192.168.50.190:5000
2025-05-13 19:57:44,799 - werkzeug - INFO - [33mPress CTRL+C to quit[0m
2025-05-13 19:57:44,799 - werkzeug - INFO -  * Restarting with stat
2025-05-13 19:57:46,199 - app.utils.permissions - INFO - 更新权限: manage_users
2025-05-13 19:57:46,200 - app.utils.permissions - INFO - 更新权限: manage_roles
2025-05-13 19:57:46,201 - app.utils.permissions - INFO - 更新权限: manage_all_projects
2025-05-13 19:57:46,202 - app.utils.permissions - INFO - 更新权限: manage_project
2025-05-13 19:57:46,202 - app.utils.permissions - INFO - 更新权限: manage_all_tasks
2025-05-13 19:57:46,203 - app.utils.permissions - INFO - 更新权限: manage_task
2025-05-13 19:57:46,204 - app.utils.permissions - INFO - 更新权限: view_project
2025-05-13 19:57:46,204 - app.utils.permissions - INFO - 更新权限: view_task
2025-05-13 19:57:46,205 - app.utils.permissions - INFO - 更新权限: manage_resources
2025-05-13 19:57:46,205 - app.utils.permissions - INFO - 更新权限: manage_risks
2025-05-13 19:57:46,207 - app.utils.permissions - INFO - 更新权限: view_reports
2025-05-13 19:57:46,208 - app.utils.permissions - INFO - 更新权限: create_task
2025-05-13 19:57:46,208 - app.utils.permissions - INFO - 更新权限: create_project
2025-05-13 19:57:46,209 - app.utils.permissions - INFO - 更新权限: assign_task
2025-05-13 19:57:46,210 - app.utils.permissions - INFO - 更新权限: change_project_status
2025-05-13 19:57:46,211 - app.utils.permissions - INFO - 更新权限: change_task_status
2025-05-13 19:57:46,213 - app.utils.permissions - INFO - 更新角色: admin
2025-05-13 19:57:46,216 - app.utils.permissions - INFO - 为管理员角色添加所有权限: 16个
2025-05-13 19:57:46,216 - app.utils.permissions - INFO - 更新角色: manager
2025-05-13 19:57:46,218 - app.utils.permissions - INFO - 为角色 manager 添加权限: manage_project
2025-05-13 19:57:46,230 - app.utils.permissions - INFO - 为角色 manager 添加权限: manage_task
2025-05-13 19:57:46,231 - app.utils.permissions - INFO - 为角色 manager 添加权限: view_project
2025-05-13 19:57:46,231 - app.utils.permissions - INFO - 为角色 manager 添加权限: view_task
2025-05-13 19:57:46,231 - app.utils.permissions - INFO - 为角色 manager 添加权限: manage_resources
2025-05-13 19:57:46,232 - app.utils.permissions - INFO - 为角色 manager 添加权限: manage_risks
2025-05-13 19:57:46,232 - app.utils.permissions - INFO - 为角色 manager 添加权限: view_reports
2025-05-13 19:57:46,232 - app.utils.permissions - INFO - 为角色 manager 添加权限: create_project
2025-05-13 19:57:46,233 - app.utils.permissions - INFO - 为角色 manager 添加权限: create_task
2025-05-13 19:57:46,233 - app.utils.permissions - INFO - 为角色 manager 添加权限: assign_task
2025-05-13 19:57:46,233 - app.utils.permissions - INFO - 为角色 manager 添加权限: change_project_status
2025-05-13 19:57:46,234 - app.utils.permissions - INFO - 为角色 manager 添加权限: change_task_status
2025-05-13 19:57:46,234 - app.utils.permissions - INFO - 更新角色: user
2025-05-13 19:57:46,235 - app.utils.permissions - INFO - 为角色 user 添加权限: view_project
2025-05-13 19:57:46,235 - app.utils.permissions - INFO - 为角色 user 添加权限: view_task
2025-05-13 19:57:46,236 - app.utils.permissions - INFO - 为角色 user 添加权限: view_reports
2025-05-13 19:57:46,236 - app.utils.permissions - INFO - 角色和权限初始化完成
2025-05-13 19:57:46,236 - __main__ - INFO - 角色和权限初始化成功
2025-05-13 19:57:46,244 - __main__ - INFO - 数据库初始化完成
2025-05-13 19:57:46,262 - __main__ - INFO - 系统资源检查完成
2025-05-13 19:57:46,262 - __main__ - INFO - 开始清理旧数据
2025-05-13 19:57:46,266 - __main__ - INFO - 删除了 0 条过期的资源使用记录
2025-05-13 19:57:46,269 - __main__ - INFO - 删除了 0 条已解决的过期警报
2025-05-13 19:57:46,270 - __main__ - INFO - 旧数据清理完成
2025-05-13 19:57:46,280 - werkzeug - WARNING -  * Debugger is active!
2025-05-13 19:57:46,283 - werkzeug - INFO -  * Debugger PIN: 670-037-726
2025-05-13 19:59:37,501 - app - WARNING - 绕过JWT验证: /api/global/users
2025-05-13 19:59:37,502 - app.utils.jwt_callbacks - WARNING - JWT验证已被绕过: /api/global/users
2025-05-13 19:59:37,503 - app - INFO - JWT bypass enabled for get_all_users - Using test user
2025-05-13 19:59:37,506 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 19:59:37] "GET /api/global/users?bypass_jwt=true HTTP/1.1" 200 -
2025-05-13 20:05:44,519 - app - WARNING - 绕过JWT验证: /api/global/users
2025-05-13 20:05:44,519 - app.utils.jwt_callbacks - WARNING - JWT验证已被绕过: /api/global/users
2025-05-13 20:05:44,520 - app - INFO - JWT bypass enabled for get_all_users - Using test user
2025-05-13 20:05:44,523 - werkzeug - INFO - 127.0.0.1 - - [13/May/2025 20:05:44] "GET /api/global/users?bypass_jwt=true HTTP/1.1" 200 -
2025-05-13 20:08:19,195 - app.utils.permissions - INFO - 更新权限: manage_users
2025-05-13 20:08:19,196 - app.utils.permissions - INFO - 更新权限: manage_roles
2025-05-13 20:08:19,197 - app.utils.permissions - INFO - 更新权限: manage_all_projects
2025-05-13 20:08:19,198 - app.utils.permissions - INFO - 更新权限: manage_project
2025-05-13 20:08:19,198 - app.utils.permissions - INFO - 更新权限: manage_all_tasks
2025-05-13 20:08:19,200 - app.utils.permissions - INFO - 更新权限: manage_task
2025-05-13 20:08:19,201 - app.utils.permissions - INFO - 更新权限: view_project
2025-05-13 20:08:19,202 - app.utils.permissions - INFO - 更新权限: view_task
2025-05-13 20:08:19,203 - app.utils.permissions - INFO - 更新权限: manage_resources
2025-05-13 20:08:19,206 - app.utils.permissions - INFO - 更新权限: manage_risks
2025-05-13 20:08:19,207 - app.utils.permissions - INFO - 更新权限: view_reports
2025-05-13 20:08:19,208 - app.utils.permissions - INFO - 更新权限: create_task
2025-05-13 20:08:19,209 - app.utils.permissions - INFO - 更新权限: create_project
2025-05-13 20:08:19,237 - app.utils.permissions - INFO - 更新权限: assign_task
2025-05-13 20:08:19,241 - app.utils.permissions - INFO - 更新权限: change_project_status
2025-05-13 20:08:19,242 - app.utils.permissions - INFO - 更新权限: change_task_status
2025-05-13 20:08:19,251 - app.utils.permissions - INFO - 更新角色: admin
2025-05-13 20:08:19,257 - app.utils.permissions - INFO - 为管理员角色添加所有权限: 16个
2025-05-13 20:08:19,258 - app.utils.permissions - INFO - 更新角色: manager
2025-05-13 20:08:19,259 - app.utils.permissions - INFO - 为角色 manager 添加权限: manage_project
2025-05-13 20:08:19,259 - app.utils.permissions - INFO - 为角色 manager 添加权限: manage_task
2025-05-13 20:08:19,260 - app.utils.permissions - INFO - 为角色 manager 添加权限: view_project
2025-05-13 20:08:19,260 - app.utils.permissions - INFO - 为角色 manager 添加权限: view_task
2025-05-13 20:08:19,260 - app.utils.permissions - INFO - 为角色 manager 添加权限: manage_resources
2025-05-13 20:08:19,260 - app.utils.permissions - INFO - 为角色 manager 添加权限: manage_risks
2025-05-13 20:08:19,261 - app.utils.permissions - INFO - 为角色 manager 添加权限: view_reports
2025-05-13 20:08:19,261 - app.utils.permissions - INFO - 为角色 manager 添加权限: create_project
2025-05-13 20:08:19,264 - app.utils.permissions - INFO - 为角色 manager 添加权限: create_task
2025-05-13 20:08:19,265 - app.utils.permissions - INFO - 为角色 manager 添加权限: assign_task
2025-05-13 20:08:19,266 - app.utils.permissions - INFO - 为角色 manager 添加权限: change_project_status
2025-05-13 20:08:19,266 - app.utils.permissions - INFO - 为角色 manager 添加权限: change_task_status
2025-05-13 20:08:19,267 - app.utils.permissions - INFO - 更新角色: user
2025-05-13 20:08:19,270 - app.utils.permissions - INFO - 为角色 user 添加权限: view_project
2025-05-13 20:08:19,270 - app.utils.permissions - INFO - 为角色 user 添加权限: view_task
2025-05-13 20:08:19,271 - app.utils.permissions - INFO - 为角色 user 添加权限: view_reports
2025-05-13 20:08:19,271 - app.utils.permissions - INFO - 角色和权限初始化完成
2025-05-13 20:08:19,272 - __main__ - INFO - 角色和权限初始化成功
2025-05-13 20:08:19,277 - __main__ - INFO - 数据库初始化完成
2025-05-13 20:08:19,300 - __main__ - INFO - 系统资源检查完成
2025-05-13 20:08:19,300 - __main__ - INFO - 开始清理旧数据
2025-05-13 20:08:19,305 - __main__ - INFO - 删除了 0 条过期的资源使用记录
2025-05-13 20:08:19,307 - __main__ - INFO - 删除了 0 条已解决的过期警报
2025-05-13 20:08:19,307 - __main__ - INFO - 旧数据清理完成
2025-05-13 20:08:19,342 - werkzeug - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:5000
 * Running on http://192.168.50.190:5000
2025-05-13 20:08:19,342 - werkzeug - INFO - [33mPress CTRL+C to quit[0m
2025-05-13 20:08:19,342 - werkzeug - INFO -  * Restarting with stat
2025-05-13 20:08:20,797 - app.utils.permissions - INFO - 更新权限: manage_users
2025-05-13 20:08:20,798 - app.utils.permissions - INFO - 更新权限: manage_roles
2025-05-13 20:08:20,799 - app.utils.permissions - INFO - 更新权限: manage_all_projects
2025-05-13 20:08:20,800 - app.utils.permissions - INFO - 更新权限: manage_project
