2025-05-09 15:22:57,912 - werkzeug - INFO -  * Restarting with stat
2025-05-09 15:22:58,497 - app - INFO - File logging handler initialized successfully
2025-05-09 15:22:58,497 - app - INFO - Console logging handler initialized successfully
2025-05-09 15:22:58,497 - app - INFO - Application logging configuration completed
2025-05-09 15:22:58,497 - app - INFO - Development configuration initialized
2025-05-09 15:22:58,526 - app - INFO - Logging setup completed successfully
2025-05-09 15:22:58,776 - app - INFO - 已注册的路由:
2025-05-09 15:22:58,777 - app - INFO - 路由: /static/<path:filename> - 方法: {'HEAD', 'GET', 'OPTIONS'} - 终端: static
2025-05-09 15:22:58,778 - app - INFO - 路由: /api/users/<int:user_id> - 方法: {'DELETE', 'POST', 'GET', 'HEAD', 'PUT', 'OPTIONS'} - 终端: user_api_exempt.user_api_exempt_route
2025-05-09 15:22:58,779 - app - INFO - 路由: /api/users - 方法: {'DELETE', 'POST', 'GET', 'HEAD', 'PUT', 'OPTIONS'} - 终端: user_api_exempt.user_api_exempt_route
2025-05-09 15:22:58,779 - app - INFO - 路由: /tasks/<int:task_id>/dependencies/<int:dependency_id>/gantt - 方法: {'DELETE', 'OPTIONS'} - 终端: task_api_exempt.task_api_exempt_route
2025-05-09 15:22:58,779 - app - INFO - 路由: /tasks/<int:task_id>/gantt - 方法: {'PUT', 'OPTIONS'} - 终端: task_api_exempt.task_api_exempt_route
2025-05-09 15:22:58,780 - app - INFO - 路由: /tasks/project/<int:project_id>/gantt - 方法: {'HEAD', 'GET', 'OPTIONS'} - 终端: task_api_exempt.task_api_exempt_route
2025-05-09 15:22:58,780 - app - INFO - 路由: /tasks/project/<int:project_id>/gantt/data - 方法: {'HEAD', 'GET', 'OPTIONS'} - 终端: task_api_exempt.task_api_exempt_route
2025-05-09 15:22:58,780 - app - INFO - 路由: /api/tasks/<int:task_id>/no_csrf - 方法: {'DELETE', 'POST', 'GET', 'HEAD', 'PUT', 'OPTIONS'} - 终端: task_api_exempt.task_api_exempt_route
2025-05-09 15:22:58,780 - app - INFO - 路由: /api/tasks/<int:task_id> - 方法: {'DELETE', 'POST', 'GET', 'HEAD', 'PUT', 'OPTIONS'} - 终端: task_api_exempt.task_api_exempt_route
2025-05-09 15:22:58,780 - app - INFO - 路由: /tasks/dependencies/gantt - 方法: {'POST', 'OPTIONS'} - 终端: task_api_exempt.task_api_exempt_route
2025-05-09 15:22:58,781 - app - INFO - 路由: /api/tasks - 方法: {'DELETE', 'POST', 'GET', 'HEAD', 'PUT', 'OPTIONS'} - 终端: task_api_exempt.task_api_exempt_route
2025-05-09 15:22:58,781 - app - INFO - 路由: /login - 方法: {'HEAD', 'GET', 'OPTIONS'} - 终端: auth.login_page
2025-05-09 15:22:58,781 - app - INFO - 路由: /login - 方法: {'POST', 'OPTIONS'} - 终端: auth.login
2025-05-09 15:22:58,781 - app - INFO - 路由: /register - 方法: {'HEAD', 'GET', 'OPTIONS'} - 终端: auth.register_page
2025-05-09 15:22:58,781 - app - INFO - 路由: /register - 方法: {'POST', 'OPTIONS'} - 终端: auth.register
2025-05-09 15:22:58,781 - app - INFO - 路由: /logout - 方法: {'POST', 'HEAD', 'GET', 'OPTIONS'} - 终端: auth.logout
2025-05-09 15:22:58,782 - app - INFO - 路由: /refresh - 方法: {'POST', 'OPTIONS'} - 终端: auth.refresh
2025-05-09 15:22:58,782 - app - INFO - 路由: /profile - 方法: {'HEAD', 'GET', 'OPTIONS'} - 终端: auth.profile
2025-05-09 15:22:58,782 - app - INFO - 路由: /profile - 方法: {'PUT', 'OPTIONS'} - 终端: auth.update_profile
2025-05-09 15:22:58,782 - app - INFO - 路由: /users - 方法: {'HEAD', 'GET', 'OPTIONS'} - 终端: auth.get_users
2025-05-09 15:22:58,783 - app - INFO - 路由: /users/<int:user_id> - 方法: {'HEAD', 'GET', 'OPTIONS'} - 终端: auth.get_user_by_id
2025-05-09 15:22:58,783 - app - INFO - 路由: /update_user/<int:user_id> - 方法: {'PUT', 'OPTIONS'} - 终端: auth.update_user
2025-05-09 15:22:58,783 - app - INFO - 路由: /roles - 方法: {'HEAD', 'GET', 'OPTIONS'} - 终端: auth.get_roles
2025-05-09 15:22:58,783 - app - INFO - 路由: /permissions - 方法: {'HEAD', 'GET', 'OPTIONS'} - 终端: auth.get_permissions
2025-05-09 15:22:58,783 - app - INFO - 路由: /permissions - 方法: {'POST', 'OPTIONS'} - 终端: auth.create_permission
2025-05-09 15:22:58,783 - app - INFO - 路由: /permissions/<int:permission_id> - 方法: {'HEAD', 'GET', 'OPTIONS'} - 终端: auth.get_permission
2025-05-09 15:22:58,785 - app - INFO - 路由: /permissions/<int:permission_id> - 方法: {'PUT', 'OPTIONS'} - 终端: auth.update_permission
2025-05-09 15:22:58,785 - app - INFO - 路由: /permissions/<int:permission_id> - 方法: {'DELETE', 'OPTIONS'} - 终端: auth.delete_permission
2025-05-09 15:22:58,786 - app - INFO - 路由: /roles - 方法: {'POST', 'OPTIONS'} - 终端: auth.create_role
2025-05-09 15:22:58,786 - app - INFO - 路由: /roles/<int:role_id> - 方法: {'HEAD', 'GET', 'OPTIONS'} - 终端: auth.get_role
2025-05-09 15:22:58,786 - app - INFO - 路由: /roles/<int:role_id>/permissions - 方法: {'PUT', 'OPTIONS'} - 终端: auth.update_role_permissions
2025-05-09 15:22:58,787 - app - INFO - 路由: /roles/<int:role_id> - 方法: {'DELETE', 'OPTIONS'} - 终端: auth.delete_role
2025-05-09 15:22:58,787 - app - INFO - 路由: /dashboard - 方法: {'HEAD', 'GET', 'OPTIONS'} - 终端: auth.dashboard
2025-05-09 15:22:58,787 - app - INFO - 路由: /dashboard/redirect - 方法: {'POST', 'HEAD', 'GET', 'OPTIONS'} - 终端: auth.dashboard_redirect
2025-05-09 15:22:58,787 - app - INFO - 路由: /create_test_user - 方法: {'POST', 'OPTIONS'} - 终端: auth.create_test_user
2025-05-09 15:22:58,788 - app - INFO - 路由: /check - 方法: {'HEAD', 'GET', 'OPTIONS'} - 终端: auth.check_auth
2025-05-09 15:22:58,788 - app - INFO - 路由: /create_test_project - 方法: {'POST', 'OPTIONS'} - 终端: auth.create_test_project
2025-05-09 15:22:58,788 - app - INFO - 路由: /logout_all - 方法: {'POST', 'OPTIONS'} - 终端: auth.logout_all
2025-05-09 15:22:58,788 - app - INFO - 路由: /dashboard/data - 方法: {'HEAD', 'GET', 'OPTIONS'} - 终端: auth.dashboard_data
2025-05-09 15:22:58,789 - app - INFO - 路由: /check_token - 方法: {'HEAD', 'GET', 'OPTIONS'} - 终端: auth.check_token
2025-05-09 15:22:58,789 - app - INFO - 路由: /create_user - 方法: {'POST', 'OPTIONS'} - 终端: auth.create_user
2025-05-09 15:22:58,789 - app - INFO - 路由: /user_info - 方法: {'HEAD', 'GET', 'OPTIONS'} - 终端: auth.get_user_info
2025-05-09 15:22:58,789 - app - INFO - 路由: /user/<int:user_id> - 方法: {'DELETE', 'OPTIONS'} - 终端: auth.delete_user
2025-05-09 15:22:58,789 - app - INFO - 路由: /users/<int:user_id>/roles - 方法: {'HEAD', 'GET', 'OPTIONS'} - 终端: auth.get_user_roles
2025-05-09 15:22:58,790 - app - INFO - 路由: /users/<int:user_id>/roles - 方法: {'PUT', 'OPTIONS'} - 终端: auth.update_user_roles
2025-05-09 15:22:58,790 - app - INFO - 路由: /users/<int:user_id>/notifications - 方法: {'HEAD', 'GET', 'OPTIONS'} - 终端: auth.get_user_notifications
2025-05-09 15:22:58,790 - app - INFO - 路由: /notifications/<int:notification_id>/read - 方法: {'PUT', 'OPTIONS'} - 终端: auth.mark_notification_as_read
2025-05-09 15:22:58,790 - app - INFO - 路由: /notifications/read_all - 方法: {'PUT', 'OPTIONS'} - 终端: auth.mark_all_notifications_as_read
2025-05-09 15:22:58,790 - app - INFO - 路由: /change-password - 方法: {'POST', 'OPTIONS'} - 终端: auth.change_password
2025-05-09 15:22:58,791 - app - INFO - 路由: /reset-password - 方法: {'HEAD', 'GET', 'OPTIONS'} - 终端: auth.reset_password_page
2025-05-09 15:22:58,791 - app - INFO - 路由: /verify-email/confirm - 方法: {'HEAD', 'GET', 'OPTIONS'} - 终端: auth.verify_email_confirm_page
2025-05-09 15:22:58,791 - app - INFO - 路由: /auth/csrf-token - 方法: {'HEAD', 'GET', 'OPTIONS'} - 终端: auth.get_csrf_token
2025-05-09 15:22:58,791 - app - INFO - 路由: /api/users/<int:user_id> - 方法: {'PUT', 'OPTIONS'} - 终端: auth.api_update_user
2025-05-09 15:22:58,792 - app - INFO - 路由: /api/users/<int:user_id> - 方法: {'DELETE', 'OPTIONS'} - 终端: auth.api_delete_user
2025-05-09 15:22:58,792 - app - INFO - 路由: /api/users - 方法: {'HEAD', 'GET', 'OPTIONS'} - 终端: auth.api_get_users
2025-05-09 15:22:58,792 - app - INFO - 路由: /api/users - 方法: {'POST', 'OPTIONS'} - 终端: auth.api_create_user
2025-05-09 15:22:58,793 - app - INFO - 路由: /auth/users/<int:user_id> - 方法: {'HEAD', 'GET', 'OPTIONS'} - 终端: auth.get_user_details
2025-05-09 15:22:58,793 - app - INFO - 路由: /api/users/<int:user_id> - 方法: {'DELETE', 'GET', 'HEAD', 'PUT', 'OPTIONS'} - 终端: auth.api_user_operations
2025-05-09 15:22:58,793 - app - INFO - 路由: /auth/user-csrf-token - 方法: {'HEAD', 'GET', 'OPTIONS'} - 终端: auth.get_user_csrf_token
2025-05-09 15:22:58,793 - app - INFO - 路由: /main/ - 方法: {'HEAD', 'GET', 'OPTIONS'} - 终端: main.index
2025-05-09 15:22:58,793 - app - INFO - 路由: /main/dashboard - 方法: {'HEAD', 'GET', 'OPTIONS'} - 终端: main.dashboard
2025-05-09 15:22:58,794 - app - INFO - 路由: /main/check_token - 方法: {'HEAD', 'GET', 'OPTIONS'} - 终端: main.check_token
2025-05-09 15:22:58,794 - app - INFO - 路由: /main/projects - 方法: {'HEAD', 'GET', 'OPTIONS'} - 终端: main.projects
2025-05-09 15:22:58,794 - app - INFO - 路由: /main/tasks - 方法: {'HEAD', 'GET', 'OPTIONS'} - 终端: main.tasks
2025-05-09 15:22:58,794 - app - INFO - 路由: /main/risks - 方法: {'HEAD', 'GET', 'OPTIONS'} - 终端: main.risks
2025-05-09 15:22:58,796 - app - INFO - 路由: /main/reports - 方法: {'HEAD', 'GET', 'OPTIONS'} - 终端: main.reports
2025-05-09 15:22:58,796 - app - INFO - 路由: /main/resources - 方法: {'HEAD', 'GET', 'OPTIONS'} - 终端: main.resources
2025-05-09 15:22:58,796 - app - INFO - 路由: /main/profile - 方法: {'HEAD', 'GET', 'OPTIONS'} - 终端: main.profile
2025-05-09 15:22:58,796 - app - INFO - 路由: /main/system/status - 方法: {'HEAD', 'GET', 'OPTIONS'} - 终端: main.system_status
2025-05-09 15:22:58,796 - app - INFO - 路由: /main/api/dashboard/data - 方法: {'HEAD', 'GET', 'OPTIONS'} - 终端: main.get_dashboard_data
2025-05-09 15:22:58,797 - app - INFO - 路由: /main/test - 方法: {'HEAD', 'GET', 'OPTIONS'} - 终端: main.test_route
2025-05-09 15:22:58,797 - app - INFO - 路由: /main/projects/detail/<int:project_id> - 方法: {'HEAD', 'GET', 'OPTIONS'} - 终端: main.project_detail_redirect
2025-05-09 15:22:58,797 - app - INFO - 路由: /main/users - 方法: {'HEAD', 'GET', 'OPTIONS'} - 终端: main.users
2025-05-09 15:22:58,797 - app - INFO - 路由: /main/debug/projects - 方法: {'HEAD', 'GET', 'OPTIONS'} - 终端: main.debug_projects
2025-05-09 15:22:58,798 - app - INFO - 路由: /main/simple/projects - 方法: {'HEAD', 'GET', 'OPTIONS'} - 终端: main.simple_projects
2025-05-09 15:22:58,798 - app - INFO - 路由: /main/static-test - 方法: {'HEAD', 'GET', 'OPTIONS'} - 终端: main.static_test
2025-05-09 15:22:58,799 - app - INFO - 路由: /main/print-projects - 方法: {'HEAD', 'GET', 'OPTIONS'} - 终端: main.print_projects
2025-05-09 15:22:58,799 - app - INFO - 路由: /main/bypass-projects - 方法: {'HEAD', 'GET', 'OPTIONS'} - 终端: main.bypass_projects
2025-05-09 15:22:58,799 - app - INFO - 路由: /main/debug-projects - 方法: {'HEAD', 'GET', 'OPTIONS'} - 终端: main.debug_projects_api
2025-05-09 15:22:58,799 - app - INFO - 路由: /projects/list - 方法: {'HEAD', 'GET', 'OPTIONS'} - 终端: projects.project_list
2025-05-09 15:22:58,799 - app - INFO - 路由: /projects/ - 方法: {'HEAD', 'GET', 'OPTIONS'} - 终端: projects.get_projects
2025-05-09 15:22:58,800 - app - INFO - 路由: /projects/ - 方法: {'POST', 'OPTIONS'} - 终端: projects.create_project
2025-05-09 15:22:58,800 - app - INFO - 路由: /projects/<int:project_id> - 方法: {'HEAD', 'GET', 'OPTIONS'} - 终端: projects.get_project
2025-05-09 15:22:58,800 - app - INFO - 路由: /projects/<int:project_id> - 方法: {'PUT', 'OPTIONS'} - 终端: projects.update_project
2025-05-09 15:22:58,800 - app - INFO - 路由: /projects/<int:project_id> - 方法: {'DELETE', 'OPTIONS'} - 终端: projects.delete_project
2025-05-09 15:22:58,800 - app - INFO - 路由: /projects/<int:project_id>/members - 方法: {'HEAD', 'GET', 'OPTIONS'} - 终端: projects.get_project_members
2025-05-09 15:22:58,801 - app - INFO - 路由: /projects/<int:project_id>/members - 方法: {'POST', 'OPTIONS'} - 终端: projects.add_project_member
2025-05-09 15:22:58,801 - app - INFO - 路由: /projects/<int:project_id>/members/<int:user_id> - 方法: {'DELETE', 'OPTIONS'} - 终端: projects.remove_project_member
2025-05-09 15:22:58,801 - app - INFO - 路由: /projects/detail/<int:project_id> - 方法: {'HEAD', 'GET', 'OPTIONS'} - 终端: projects.detail
2025-05-09 15:22:58,801 - app - INFO - 路由: /projects/api/detail/<int:project_id> - 方法: {'HEAD', 'GET', 'OPTIONS'} - 终端: projects.detail_api
2025-05-09 15:22:58,802 - app - INFO - 路由: /projects/api/projects/<int:project_id> - 方法: {'HEAD', 'GET', 'OPTIONS'} - 终端: projects.get_project_api
2025-05-09 15:22:58,802 - app - INFO - 路由: /projects/api/projects/<int:project_id> - 方法: {'PUT', 'OPTIONS'} - 终端: projects.update_project_api
2025-05-09 15:22:58,802 - app - INFO - 路由: /projects/api/projects/<int:project_id> - 方法: {'DELETE', 'OPTIONS'} - 终端: projects.delete_project_api
2025-05-09 15:22:58,802 - app - INFO - 路由: /projects/api/auth/projects - 方法: {'HEAD', 'GET', 'OPTIONS'} - 终端: projects.get_projects_api
2025-05-09 15:22:58,803 - app - INFO - 路由: /projects/api/auth/projects/<int:project_id> - 方法: {'HEAD', 'GET', 'OPTIONS'} - 终端: projects.get_project_auth_api
2025-05-09 15:22:58,803 - app - INFO - 路由: /projects/api/noauth/projects/<int:project_id> - 方法: {'DELETE', 'GET', 'HEAD', 'PUT', 'OPTIONS'} - 终端: projects.get_project_noauth
2025-05-09 15:22:58,803 - app - INFO - 路由: /projects/api/auth/projects - 方法: {'POST', 'OPTIONS'} - 终端: projects.create_project_auth
2025-05-09 15:22:58,803 - app - INFO - 路由: /projects/api/project-managers - 方法: {'HEAD', 'GET', 'OPTIONS'} - 终端: projects.get_project_managers
2025-05-09 15:22:58,804 - app - INFO - 路由: /projects/api/projects - 方法: {'HEAD', 'GET', 'OPTIONS'} - 终端: projects.get_all_projects_api
2025-05-09 15:22:58,804 - app - INFO - 路由: /projects/api/active-projects - 方法: {'HEAD', 'GET', 'OPTIONS'} - 终端: projects.get_active_projects_api
2025-05-09 15:22:58,804 - app - INFO - 路由: /projects/api/projects/<int:project_id>/members - 方法: {'HEAD', 'GET', 'OPTIONS'} - 终端: projects.get_project_members_api
2025-05-09 15:22:58,804 - app - INFO - 路由: /list - 方法: {'HEAD', 'GET', 'OPTIONS'} - 终端: project_root.project_list
2025-05-09 15:22:58,804 - app - INFO - 路由: / - 方法: {'HEAD', 'GET', 'OPTIONS'} - 终端: project_root.get_projects
2025-05-09 15:22:58,805 - app - INFO - 路由: / - 方法: {'POST', 'OPTIONS'} - 终端: project_root.create_project
2025-05-09 15:22:58,805 - app - INFO - 路由: /<int:project_id> - 方法: {'HEAD', 'GET', 'OPTIONS'} - 终端: project_root.get_project
2025-05-09 15:22:58,805 - app - INFO - 路由: /<int:project_id> - 方法: {'PUT', 'OPTIONS'} - 终端: project_root.update_project
2025-05-09 15:22:58,805 - app - INFO - 路由: /<int:project_id> - 方法: {'DELETE', 'OPTIONS'} - 终端: project_root.delete_project
2025-05-09 15:22:58,805 - app - INFO - 路由: /<int:project_id>/members - 方法: {'HEAD', 'GET', 'OPTIONS'} - 终端: project_root.get_project_members
2025-05-09 15:22:58,806 - app - INFO - 路由: /<int:project_id>/members - 方法: {'POST', 'OPTIONS'} - 终端: project_root.add_project_member
2025-05-09 15:22:58,806 - app - INFO - 路由: /<int:project_id>/members/<int:user_id> - 方法: {'DELETE', 'OPTIONS'} - 终端: project_root.remove_project_member
2025-05-09 15:22:58,806 - app - INFO - 路由: /detail/<int:project_id> - 方法: {'HEAD', 'GET', 'OPTIONS'} - 终端: project_root.detail
2025-05-09 15:22:58,806 - app - INFO - 路由: /api/detail/<int:project_id> - 方法: {'HEAD', 'GET', 'OPTIONS'} - 终端: project_root.detail_api
2025-05-09 15:22:58,806 - app - INFO - 路由: /api/projects/<int:project_id> - 方法: {'HEAD', 'GET', 'OPTIONS'} - 终端: project_root.get_project_api
2025-05-09 15:22:58,807 - app - INFO - 路由: /api/projects/<int:project_id> - 方法: {'PUT', 'OPTIONS'} - 终端: project_root.update_project_api
2025-05-09 15:22:58,807 - app - INFO - 路由: /api/projects/<int:project_id> - 方法: {'DELETE', 'OPTIONS'} - 终端: project_root.delete_project_api
2025-05-09 15:22:58,807 - app - INFO - 路由: /api/auth/projects - 方法: {'HEAD', 'GET', 'OPTIONS'} - 终端: project_root.get_projects_api
2025-05-09 15:22:58,808 - app - INFO - 路由: /api/auth/projects/<int:project_id> - 方法: {'HEAD', 'GET', 'OPTIONS'} - 终端: project_root.get_project_auth_api
2025-05-09 15:22:58,808 - app - INFO - 路由: /api/noauth/projects/<int:project_id> - 方法: {'DELETE', 'GET', 'HEAD', 'PUT', 'OPTIONS'} - 终端: project_root.get_project_noauth
2025-05-09 15:22:58,808 - app - INFO - 路由: /api/auth/projects - 方法: {'POST', 'OPTIONS'} - 终端: project_root.create_project_auth
2025-05-09 15:22:58,808 - app - INFO - 路由: /api/project-managers - 方法: {'HEAD', 'GET', 'OPTIONS'} - 终端: project_root.get_project_managers
2025-05-09 15:22:58,810 - app - INFO - 路由: /api/projects - 方法: {'HEAD', 'GET', 'OPTIONS'} - 终端: project_root.get_all_projects_api
2025-05-09 15:22:58,810 - app - INFO - 路由: /api/active-projects - 方法: {'HEAD', 'GET', 'OPTIONS'} - 终端: project_root.get_active_projects_api
2025-05-09 15:22:58,810 - app - INFO - 路由: /api/projects/<int:project_id>/members - 方法: {'HEAD', 'GET', 'OPTIONS'} - 终端: project_root.get_project_members_api
2025-05-09 15:22:58,810 - app - INFO - 路由: /tasks/ - 方法: {'HEAD', 'GET', 'OPTIONS'} - 终端: tasks.get_tasks
2025-05-09 15:22:58,810 - app - INFO - 路由: /tasks/ - 方法: {'POST', 'OPTIONS'} - 终端: tasks.create_task
2025-05-09 15:22:58,811 - app - INFO - 路由: /tasks/<int:task_id> - 方法: {'HEAD', 'GET', 'OPTIONS'} - 终端: tasks.get_task
2025-05-09 15:22:58,811 - app - INFO - 路由: /tasks/<int:task_id> - 方法: {'PUT', 'OPTIONS'} - 终端: tasks.update_task
2025-05-09 15:22:58,811 - app - INFO - 路由: /tasks/<int:task_id> - 方法: {'DELETE', 'OPTIONS'} - 终端: tasks.delete_task
2025-05-09 15:22:58,811 - app - INFO - 路由: /tasks/<int:task_id>/comments - 方法: {'HEAD', 'GET', 'OPTIONS'} - 终端: tasks.get_task_comments
2025-05-09 15:22:58,811 - app - INFO - 路由: /tasks/<int:task_id>/comments - 方法: {'POST', 'OPTIONS'} - 终端: tasks.add_task_comment
2025-05-09 15:22:58,812 - app - INFO - 路由: /tasks/<int:task_id>/attachments - 方法: {'HEAD', 'GET', 'OPTIONS'} - 终端: tasks.get_task_attachments
2025-05-09 15:22:58,812 - app - INFO - 路由: /tasks/<int:task_id>/attachments - 方法: {'POST', 'OPTIONS'} - 终端: tasks.add_task_attachment
2025-05-09 15:22:58,812 - app - INFO - 路由: /tasks/<int:task_id>/resources - 方法: {'HEAD', 'GET', 'OPTIONS'} - 终端: tasks.get_task_resources
2025-05-09 15:22:58,813 - app - INFO - 路由: /tasks/<int:task_id>/subtasks - 方法: {'HEAD', 'GET', 'OPTIONS'} - 终端: tasks.get_subtasks
2025-05-09 15:22:58,813 - app - INFO - 路由: /tasks/<int:task_id>/subtasks - 方法: {'POST', 'OPTIONS'} - 终端: tasks.create_subtask
2025-05-09 15:22:58,813 - app - INFO - 路由: /tasks/<int:task_id>/dependencies - 方法: {'HEAD', 'GET', 'OPTIONS'} - 终端: tasks.get_dependencies
2025-05-09 15:22:58,813 - app - INFO - 路由: /tasks/<int:task_id>/dependencies - 方法: {'POST', 'OPTIONS'} - 终端: tasks.add_dependency
2025-05-09 15:22:58,813 - app - INFO - 路由: /tasks/<int:task_id>/logs - 方法: {'HEAD', 'GET', 'OPTIONS'} - 终端: tasks.get_task_logs
2025-05-09 15:22:58,814 - app - INFO - 路由: /tasks/<int:task_id>/logs - 方法: {'POST', 'OPTIONS'} - 终端: tasks.add_task_log
2025-05-09 15:22:58,814 - app - INFO - 路由: /tasks/project/<int:project_id>/gantt - 方法: {'HEAD', 'GET', 'OPTIONS'} - 终端: tasks.gantt_chart
2025-05-09 15:22:58,814 - app - INFO - 路由: /tasks/project/<int:project_id>/gantt/data - 方法: {'HEAD', 'GET', 'OPTIONS'} - 终端: tasks.get_gantt_data
2025-05-09 15:22:58,814 - app - INFO - 路由: /tasks/<int:task_id>/gantt - 方法: {'PUT', 'OPTIONS'} - 终端: tasks.update_gantt_task
2025-05-09 15:22:58,815 - app - INFO - 路由: /tasks/dependencies/gantt - 方法: {'POST', 'OPTIONS'} - 终端: tasks.create_gantt_dependency
2025-05-09 15:22:58,815 - app - INFO - 路由: /tasks/<int:task_id>/dependencies/<int:dependency_id>/gantt - 方法: {'DELETE', 'OPTIONS'} - 终端: tasks.delete_gantt_dependency
2025-05-09 15:22:58,815 - app - INFO - 路由: /tasks/<int:task_id>/status - 方法: {'PUT', 'OPTIONS'} - 终端: tasks.update_task_status
2025-05-09 15:22:58,815 - app - INFO - 路由: /tasks/api/tasks/dependencies - 方法: {'POST', 'OPTIONS'} - 终端: tasks.add_task_dependency
2025-05-09 15:22:58,816 - app - INFO - 路由: /tasks/<int:task_id>/detail - 方法: {'HEAD', 'GET', 'OPTIONS'} - 终端: tasks.task_detail_api
2025-05-09 15:22:58,816 - app - INFO - 路由: /tasks/api/auth/tasks/<int:task_id>/detail - 方法: {'HEAD', 'GET', 'OPTIONS'} - 终端: tasks.task_detail_api_auth
2025-05-09 15:22:58,816 - app - INFO - 路由: /tasks/<int:task_id>/view - 方法: {'HEAD', 'GET', 'OPTIONS'} - 终端: tasks.task_detail_page
2025-05-09 15:22:58,817 - app - INFO - 路由: /tasks/<int:task_id>/edit - 方法: {'HEAD', 'GET', 'OPTIONS'} - 终端: tasks.edit_task_page
2025-05-09 15:22:58,817 - app - INFO - 路由: /tasks/api/auth/tasks/<int:task_id>/attachments - 方法: {'POST', 'OPTIONS'} - 终端: tasks.add_task_attachment_auth
2025-05-09 15:22:58,819 - app - INFO - 路由: /tasks/api/auth/tasks/<int:task_id>/attachments/<int:attachment_id>/download - 方法: {'HEAD', 'GET', 'OPTIONS'} - 终端: tasks.download_attachment_auth
2025-05-09 15:22:58,819 - app - INFO - 路由: /tasks/api/tasks/<int:task_id>/attachments - 方法: {'POST', 'OPTIONS'} - 终端: tasks.upload_attachment
2025-05-09 15:22:58,819 - app - INFO - 路由: /tasks/api/tasks/<int:task_id>/attachments/<int:attachment_id>/download - 方法: {'HEAD', 'GET', 'OPTIONS'} - 终端: tasks.download_attachment
2025-05-09 15:22:58,820 - app - INFO - 路由: /tasks/api/tasks/<int:task_id>/attachments/<int:attachment_id> - 方法: {'DELETE', 'OPTIONS'} - 终端: tasks.delete_attachment
2025-05-09 15:22:58,820 - app - INFO - 路由: /tasks/api/tasks/<int:task_id>/attachments/<int:attachment_id>/versions - 方法: {'POST', 'OPTIONS'} - 终端: tasks.upload_new_version
2025-05-09 15:22:58,820 - app - INFO - 路由: /tasks/api/tasks/<int:task_id>/attachments/<int:attachment_id>/versions - 方法: {'HEAD', 'GET', 'OPTIONS'} - 终端: tasks.get_attachment_versions
2025-05-09 15:22:58,821 - app - INFO - 路由: /tasks/api/tasks/<int:task_id>/risks - 方法: {'HEAD', 'GET', 'OPTIONS'} - 终端: tasks.task_risks_front_path
2025-05-09 15:22:58,821 - app - INFO - 路由: /tasks/<int:task_id>/risks - 方法: {'POST', 'OPTIONS'} - 终端: tasks.create_task_risk_front_path
2025-05-09 15:22:58,821 - app - INFO - 路由: /tasks/api/tasks/<int:task_id>/progress - 方法: {'HEAD', 'GET', 'OPTIONS'} - 终端: tasks.get_task_progress
2025-05-09 15:22:58,821 - app - INFO - 路由: /tasks/api/tasks/<int:task_id>/progress - 方法: {'POST', 'OPTIONS'} - 终端: tasks.update_task_progress
2025-05-09 15:22:58,822 - app - INFO - 路由: /tasks/api/tasks/<int:task_id>/progress/approve - 方法: {'POST', 'OPTIONS'} - 终端: tasks.approve_task_progress
2025-05-09 15:22:58,822 - app - INFO - 路由: /tasks/list - 方法: {'HEAD', 'GET', 'OPTIONS'} - 终端: tasks.task_list
2025-05-09 15:22:58,822 - app - INFO - 路由: /tasks/api/auth/tasks/<int:task_id>/logs - 方法: {'HEAD', 'GET', 'OPTIONS'} - 终端: tasks.get_task_logs_auth
2025-05-09 15:22:58,822 - app - INFO - 路由: /tasks/api/auth/tasks/<int:task_id>/subtasks - 方法: {'HEAD', 'GET', 'OPTIONS'} - 终端: tasks.get_subtasks_auth
2025-05-09 15:22:58,824 - app - INFO - 路由: /tasks/api/auth/tasks/<int:task_id>/comments - 方法: {'HEAD', 'GET', 'OPTIONS'} - 终端: tasks.get_task_comments_auth
2025-05-09 15:22:58,824 - app - INFO - 路由: /tasks/api/auth/tasks/<int:task_id>/attachments - 方法: {'HEAD', 'GET', 'OPTIONS'} - 终端: tasks.get_task_attachments_auth
2025-05-09 15:22:58,824 - app - INFO - 路由: /tasks/api/auth/tasks/<int:task_id>/risks - 方法: {'HEAD', 'GET', 'OPTIONS'} - 终端: tasks.get_task_risks_auth
2025-05-09 15:22:58,825 - app - INFO - 路由: /tasks/api/auth/tasks/<int:task_id>/risks - 方法: {'POST', 'OPTIONS'} - 终端: tasks.create_task_risk_auth
2025-05-09 15:22:58,825 - app - INFO - 路由: /tasks/api/auth/tasks/<int:task_id>/comments - 方法: {'POST', 'OPTIONS'} - 终端: tasks.add_task_comment_auth
2025-05-09 15:22:58,825 - app - INFO - 路由: /tasks/api/tasks/<int:task_id> - 方法: {'PUT', 'OPTIONS'} - 终端: tasks.api_update_task
2025-05-09 15:22:58,825 - app - INFO - 路由: /tasks/api/tasks/<int:task_id>/update_bypass - 方法: {'PUT', 'OPTIONS'} - 终端: tasks.update_task_bypass_csrf
2025-05-09 15:22:58,826 - app - INFO - 路由: /tasks/get-csrf-token - 方法: {'HEAD', 'GET', 'OPTIONS'} - 终端: tasks.get_csrf_token
2025-05-09 15:22:58,826 - app - INFO - 路由: /tasks/api/tasks/<int:task_id>/no_csrf - 方法: {'PUT', 'OPTIONS'} - 终端: tasks.update_task_no_csrf
2025-05-09 15:22:58,827 - app - INFO - 路由: /tasks/api/tasks/<int:task_id>/detail - 方法: {'HEAD', 'GET', 'OPTIONS'} - 终端: tasks.api_tasks_detail
2025-05-09 15:22:58,879 - app - WARNING - team_bp 未定义或无法导入
2025-05-09 15:22:58,988 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-05-09 15:22:58,990 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions 
WHERE permissions.name = ?
 LIMIT ? OFFSET ?
2025-05-09 15:22:58,990 - sqlalchemy.engine.Engine - INFO - [generated in 0.00043s] ('manage_users', 1, 0)
2025-05-09 15:22:58,991 - app.utils.permissions - INFO - 更新权限: manage_users
2025-05-09 15:22:58,993 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions 
WHERE permissions.name = ?
 LIMIT ? OFFSET ?
2025-05-09 15:22:58,993 - sqlalchemy.engine.Engine - INFO - [cached since 0.002527s ago] ('manage_roles', 1, 0)
2025-05-09 15:22:58,993 - app.utils.permissions - INFO - 更新权限: manage_roles
2025-05-09 15:22:58,994 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions 
WHERE permissions.name = ?
 LIMIT ? OFFSET ?
2025-05-09 15:22:58,994 - sqlalchemy.engine.Engine - INFO - [cached since 0.003397s ago] ('manage_all_projects', 1, 0)
2025-05-09 15:22:58,994 - app.utils.permissions - INFO - 更新权限: manage_all_projects
2025-05-09 15:22:58,995 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions 
WHERE permissions.name = ?
 LIMIT ? OFFSET ?
2025-05-09 15:22:58,995 - sqlalchemy.engine.Engine - INFO - [cached since 0.004655s ago] ('manage_project', 1, 0)
2025-05-09 15:22:58,995 - app.utils.permissions - INFO - 更新权限: manage_project
2025-05-09 15:22:58,996 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions 
WHERE permissions.name = ?
 LIMIT ? OFFSET ?
2025-05-09 15:22:58,996 - sqlalchemy.engine.Engine - INFO - [cached since 0.005671s ago] ('manage_all_tasks', 1, 0)
2025-05-09 15:22:58,996 - app.utils.permissions - INFO - 更新权限: manage_all_tasks
2025-05-09 15:22:58,997 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions 
WHERE permissions.name = ?
 LIMIT ? OFFSET ?
2025-05-09 15:22:58,997 - sqlalchemy.engine.Engine - INFO - [cached since 0.006691s ago] ('manage_task', 1, 0)
2025-05-09 15:22:58,997 - app.utils.permissions - INFO - 更新权限: manage_task
2025-05-09 15:22:58,997 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions 
WHERE permissions.name = ?
 LIMIT ? OFFSET ?
2025-05-09 15:22:58,997 - sqlalchemy.engine.Engine - INFO - [cached since 0.007539s ago] ('view_project', 1, 0)
2025-05-09 15:22:58,998 - app.utils.permissions - INFO - 更新权限: view_project
2025-05-09 15:22:58,998 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions 
WHERE permissions.name = ?
 LIMIT ? OFFSET ?
2025-05-09 15:22:58,998 - sqlalchemy.engine.Engine - INFO - [cached since 0.008298s ago] ('view_task', 1, 0)
2025-05-09 15:22:58,998 - app.utils.permissions - INFO - 更新权限: view_task
2025-05-09 15:22:58,999 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions 
WHERE permissions.name = ?
 LIMIT ? OFFSET ?
2025-05-09 15:22:58,999 - sqlalchemy.engine.Engine - INFO - [cached since 0.009228s ago] ('manage_resources', 1, 0)
2025-05-09 15:22:58,999 - app.utils.permissions - INFO - 更新权限: manage_resources
2025-05-09 15:22:59,001 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions 
WHERE permissions.name = ?
 LIMIT ? OFFSET ?
2025-05-09 15:22:59,001 - sqlalchemy.engine.Engine - INFO - [cached since 0.01024s ago] ('manage_risks', 1, 0)
2025-05-09 15:22:59,001 - app.utils.permissions - INFO - 更新权限: manage_risks
2025-05-09 15:22:59,001 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions 
WHERE permissions.name = ?
 LIMIT ? OFFSET ?
2025-05-09 15:22:59,002 - sqlalchemy.engine.Engine - INFO - [cached since 0.01118s ago] ('view_reports', 1, 0)
2025-05-09 15:22:59,002 - app.utils.permissions - INFO - 更新权限: view_reports
2025-05-09 15:22:59,002 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions 
WHERE permissions.name = ?
 LIMIT ? OFFSET ?
2025-05-09 15:22:59,003 - sqlalchemy.engine.Engine - INFO - [cached since 0.01234s ago] ('create_task', 1, 0)
2025-05-09 15:22:59,003 - app.utils.permissions - INFO - 更新权限: create_task
2025-05-09 15:22:59,004 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions 
WHERE permissions.name = ?
 LIMIT ? OFFSET ?
2025-05-09 15:22:59,004 - sqlalchemy.engine.Engine - INFO - [cached since 0.01333s ago] ('create_project', 1, 0)
2025-05-09 15:22:59,004 - app.utils.permissions - INFO - 更新权限: create_project
2025-05-09 15:22:59,004 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions 
WHERE permissions.name = ?
 LIMIT ? OFFSET ?
2025-05-09 15:22:59,004 - sqlalchemy.engine.Engine - INFO - [cached since 0.01432s ago] ('assign_task', 1, 0)
2025-05-09 15:22:59,005 - app.utils.permissions - INFO - 更新权限: assign_task
2025-05-09 15:22:59,005 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions 
WHERE permissions.name = ?
 LIMIT ? OFFSET ?
2025-05-09 15:22:59,005 - sqlalchemy.engine.Engine - INFO - [cached since 0.01532s ago] ('change_project_status', 1, 0)
2025-05-09 15:22:59,005 - app.utils.permissions - INFO - 更新权限: change_project_status
2025-05-09 15:22:59,007 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions 
WHERE permissions.name = ?
 LIMIT ? OFFSET ?
2025-05-09 15:22:59,007 - sqlalchemy.engine.Engine - INFO - [cached since 0.0166s ago] ('change_task_status', 1, 0)
2025-05-09 15:22:59,008 - app.utils.permissions - INFO - 更新权限: change_task_status
2025-05-09 15:22:59,008 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-05-09 15:22:59,008 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-05-09 15:22:59,009 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions
2025-05-09 15:22:59,009 - sqlalchemy.engine.Engine - INFO - [generated in 0.00023s] ()
2025-05-09 15:22:59,010 - sqlalchemy.engine.Engine - INFO - SELECT roles.id AS roles_id, roles.name AS roles_name, roles.description AS roles_description, roles.created_at AS roles_created_at 
FROM roles 
WHERE roles.name = ?
 LIMIT ? OFFSET ?
2025-05-09 15:22:59,010 - sqlalchemy.engine.Engine - INFO - [generated in 0.00027s] ('admin', 1, 0)
2025-05-09 15:22:59,011 - app.utils.permissions - INFO - 更新角色: admin
2025-05-09 15:22:59,013 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions, role_permissions 
WHERE ? = role_permissions.role_id AND permissions.id = role_permissions.permission_id
2025-05-09 15:22:59,014 - sqlalchemy.engine.Engine - INFO - [generated in 0.00030s] (1,)
2025-05-09 15:22:59,014 - app.utils.permissions - INFO - 为管理员角色添加所有权限: 16个
2025-05-09 15:22:59,015 - sqlalchemy.engine.Engine - INFO - SELECT roles.id AS roles_id, roles.name AS roles_name, roles.description AS roles_description, roles.created_at AS roles_created_at 
FROM roles 
WHERE roles.name = ?
 LIMIT ? OFFSET ?
2025-05-09 15:22:59,015 - sqlalchemy.engine.Engine - INFO - [cached since 0.004037s ago] ('manager', 1, 0)
2025-05-09 15:22:59,015 - app.utils.permissions - INFO - 更新角色: manager
2025-05-09 15:22:59,015 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions, role_permissions 
WHERE ? = role_permissions.role_id AND permissions.id = role_permissions.permission_id
2025-05-09 15:22:59,016 - sqlalchemy.engine.Engine - INFO - [cached since 0.002592s ago] (2,)
2025-05-09 15:22:59,016 - app.utils.permissions - INFO - 为角色 manager 添加权限: manage_project
2025-05-09 15:22:59,016 - app.utils.permissions - INFO - 为角色 manager 添加权限: manage_task
2025-05-09 15:22:59,017 - app.utils.permissions - INFO - 为角色 manager 添加权限: view_project
2025-05-09 15:22:59,017 - app.utils.permissions - INFO - 为角色 manager 添加权限: view_task
2025-05-09 15:22:59,017 - app.utils.permissions - INFO - 为角色 manager 添加权限: manage_resources
2025-05-09 15:22:59,017 - app.utils.permissions - INFO - 为角色 manager 添加权限: manage_risks
2025-05-09 15:22:59,017 - app.utils.permissions - INFO - 为角色 manager 添加权限: view_reports
2025-05-09 15:22:59,018 - app.utils.permissions - INFO - 为角色 manager 添加权限: create_project
2025-05-09 15:22:59,018 - app.utils.permissions - INFO - 为角色 manager 添加权限: create_task
2025-05-09 15:22:59,018 - app.utils.permissions - INFO - 为角色 manager 添加权限: assign_task
2025-05-09 15:22:59,019 - app.utils.permissions - INFO - 为角色 manager 添加权限: change_project_status
2025-05-09 15:22:59,019 - app.utils.permissions - INFO - 为角色 manager 添加权限: change_task_status
2025-05-09 15:22:59,020 - sqlalchemy.engine.Engine - INFO - SELECT roles.id AS roles_id, roles.name AS roles_name, roles.description AS roles_description, roles.created_at AS roles_created_at 
FROM roles 
WHERE roles.name = ?
 LIMIT ? OFFSET ?
2025-05-09 15:22:59,021 - sqlalchemy.engine.Engine - INFO - [cached since 0.01041s ago] ('user', 1, 0)
2025-05-09 15:22:59,021 - app.utils.permissions - INFO - 更新角色: user
2025-05-09 15:22:59,022 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions, role_permissions 
WHERE ? = role_permissions.role_id AND permissions.id = role_permissions.permission_id
2025-05-09 15:22:59,022 - sqlalchemy.engine.Engine - INFO - [cached since 0.009131s ago] (5,)
2025-05-09 15:22:59,022 - app.utils.permissions - INFO - 为角色 user 添加权限: view_project
2025-05-09 15:22:59,022 - app.utils.permissions - INFO - 为角色 user 添加权限: view_task
2025-05-09 15:22:59,023 - app.utils.permissions - INFO - 为角色 user 添加权限: view_reports
2025-05-09 15:22:59,023 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-05-09 15:22:59,023 - app.utils.permissions - INFO - 角色和权限初始化完成
2025-05-09 15:22:59,023 - __main__ - INFO - 角色和权限初始化成功
2025-05-09 15:22:59,024 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-05-09 15:22:59,026 - sqlalchemy.engine.Engine - INFO - SELECT users.id AS users_id, users.username AS users_username, users.email AS users_email, users.name AS users_name, users.password_hash AS users_password_hash, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.last_login AS users_last_login 
FROM users 
WHERE users.username = ?
 LIMIT ? OFFSET ?
2025-05-09 15:22:59,026 - sqlalchemy.engine.Engine - INFO - [generated in 0.00025s] ('system', 1, 0)
2025-05-09 15:22:59,027 - sqlalchemy.engine.Engine - INFO - SELECT projects.id AS projects_id, projects.name AS projects_name, projects.description AS projects_description, projects.status AS projects_status, projects.start_date AS projects_start_date, projects.end_date AS projects_end_date, projects.progress AS projects_progress, projects.created_at AS projects_created_at, projects.updated_at AS projects_updated_at, projects.manager_id AS projects_manager_id, projects.owner_id AS projects_owner_id 
FROM projects 
WHERE projects.name = ?
 LIMIT ? OFFSET ?
2025-05-09 15:22:59,027 - sqlalchemy.engine.Engine - INFO - [generated in 0.00043s] ('Test Project', 1, 0)
2025-05-09 15:22:59,028 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-05-09 15:22:59,028 - __main__ - INFO - 数据库初始化完成
2025-05-09 15:22:59,029 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-05-09 15:22:59,029 - sqlalchemy.engine.Engine - INFO - SELECT users.id AS users_id, users.username AS users_username, users.email AS users_email, users.name AS users_name, users.password_hash AS users_password_hash, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.last_login AS users_last_login 
FROM users 
WHERE users.username = ?
 LIMIT ? OFFSET ?
2025-05-09 15:22:59,029 - sqlalchemy.engine.Engine - INFO - [cached since 0.003834s ago] ('system', 1, 0)
2025-05-09 15:22:59,035 - sqlalchemy.engine.Engine - INFO - INSERT INTO resource_usages (user_id, cpu_usage, memory_usage, disk_usage, network_usage, recorded_at) VALUES (?, ?, ?, ?, ?, ?)
2025-05-09 15:22:59,035 - sqlalchemy.engine.Engine - INFO - [generated in 0.00032s] (2, 10.7, 52.7, 10.9, 0.0, '2025-05-09 07:22:59.033698')
2025-05-09 15:22:59,038 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-05-09 15:22:59,042 - __main__ - INFO - 系统资源检查完成
2025-05-09 15:22:59,043 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-05-09 15:22:59,043 - sqlalchemy.engine.Engine - INFO - DELETE FROM resource_usages WHERE resource_usages.recorded_at < ?
2025-05-09 15:22:59,043 - sqlalchemy.engine.Engine - INFO - [generated in 0.00028s] ('2025-04-09 07:22:59.042220',)
2025-05-09 15:22:59,044 - sqlalchemy.engine.Engine - INFO - DELETE FROM system_alerts WHERE system_alerts.is_resolved = 1 AND system_alerts.created_at < ?
2025-05-09 15:22:59,044 - sqlalchemy.engine.Engine - INFO - [generated in 0.00026s] ('2025-05-02 07:22:59.044462',)
2025-05-09 15:22:59,045 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-05-09 15:22:59,045 - __main__ - INFO - 旧数据清理完成
2025-05-09 15:22:59,050 - werkzeug - WARNING -  * Debugger is active!
2025-05-09 15:22:59,052 - werkzeug - INFO -  * Debugger PIN: 670-037-726
2025-05-09 15:23:13,309 - werkzeug - INFO -  * Detected change in 'D:\\tmp\\work\\app\\routes\\tasks.py', reloading
2025-05-09 15:23:13,535 - werkzeug - INFO -  * Restarting with stat
2025-05-09 15:23:14,100 - app - INFO - File logging handler initialized successfully
2025-05-09 15:23:14,100 - app - INFO - Console logging handler initialized successfully
2025-05-09 15:23:14,100 - app - INFO - Application logging configuration completed
2025-05-09 15:23:14,100 - app - INFO - Development configuration initialized
2025-05-09 15:23:14,129 - app - INFO - Logging setup completed successfully
2025-05-09 15:23:14,397 - app - INFO - 已注册的路由:
2025-05-09 15:23:14,397 - app - INFO - 路由: /static/<path:filename> - 方法: {'HEAD', 'GET', 'OPTIONS'} - 终端: static
2025-05-09 15:23:14,397 - app - INFO - 路由: /api/users/<int:user_id> - 方法: {'OPTIONS', 'HEAD', 'PUT', 'POST', 'GET', 'DELETE'} - 终端: user_api_exempt.user_api_exempt_route
2025-05-09 15:23:14,399 - app - INFO - 路由: /api/users - 方法: {'OPTIONS', 'HEAD', 'PUT', 'POST', 'GET', 'DELETE'} - 终端: user_api_exempt.user_api_exempt_route
2025-05-09 15:23:14,399 - app - INFO - 路由: /tasks/<int:task_id>/dependencies/<int:dependency_id>/gantt - 方法: {'DELETE', 'OPTIONS'} - 终端: task_api_exempt.task_api_exempt_route
2025-05-09 15:23:14,399 - app - INFO - 路由: /tasks/<int:task_id>/gantt - 方法: {'PUT', 'OPTIONS'} - 终端: task_api_exempt.task_api_exempt_route
2025-05-09 15:23:14,399 - app - INFO - 路由: /tasks/project/<int:project_id>/gantt - 方法: {'HEAD', 'GET', 'OPTIONS'} - 终端: task_api_exempt.task_api_exempt_route
2025-05-09 15:23:14,399 - app - INFO - 路由: /tasks/project/<int:project_id>/gantt/data - 方法: {'HEAD', 'GET', 'OPTIONS'} - 终端: task_api_exempt.task_api_exempt_route
2025-05-09 15:23:14,400 - app - INFO - 路由: /api/tasks/<int:task_id>/no_csrf - 方法: {'OPTIONS', 'HEAD', 'PUT', 'POST', 'GET', 'DELETE'} - 终端: task_api_exempt.task_api_exempt_route
2025-05-09 15:23:14,400 - app - INFO - 路由: /api/tasks/<int:task_id> - 方法: {'OPTIONS', 'HEAD', 'PUT', 'POST', 'GET', 'DELETE'} - 终端: task_api_exempt.task_api_exempt_route
2025-05-09 15:23:14,400 - app - INFO - 路由: /tasks/dependencies/gantt - 方法: {'POST', 'OPTIONS'} - 终端: task_api_exempt.task_api_exempt_route
2025-05-09 15:23:14,400 - app - INFO - 路由: /api/tasks - 方法: {'OPTIONS', 'HEAD', 'PUT', 'POST', 'GET', 'DELETE'} - 终端: task_api_exempt.task_api_exempt_route
2025-05-09 15:23:14,400 - app - INFO - 路由: /login - 方法: {'HEAD', 'GET', 'OPTIONS'} - 终端: auth.login_page
2025-05-09 15:23:14,401 - app - INFO - 路由: /login - 方法: {'POST', 'OPTIONS'} - 终端: auth.login
2025-05-09 15:23:14,401 - app - INFO - 路由: /register - 方法: {'HEAD', 'GET', 'OPTIONS'} - 终端: auth.register_page
2025-05-09 15:23:14,401 - app - INFO - 路由: /register - 方法: {'POST', 'OPTIONS'} - 终端: auth.register
2025-05-09 15:23:14,401 - app - INFO - 路由: /logout - 方法: {'GET', 'POST', 'OPTIONS', 'HEAD'} - 终端: auth.logout
2025-05-09 15:23:14,402 - app - INFO - 路由: /refresh - 方法: {'POST', 'OPTIONS'} - 终端: auth.refresh
2025-05-09 15:23:14,402 - app - INFO - 路由: /profile - 方法: {'HEAD', 'GET', 'OPTIONS'} - 终端: auth.profile
2025-05-09 15:23:14,402 - app - INFO - 路由: /profile - 方法: {'PUT', 'OPTIONS'} - 终端: auth.update_profile
2025-05-09 15:23:14,402 - app - INFO - 路由: /users - 方法: {'HEAD', 'GET', 'OPTIONS'} - 终端: auth.get_users
2025-05-09 15:23:14,403 - app - INFO - 路由: /users/<int:user_id> - 方法: {'HEAD', 'GET', 'OPTIONS'} - 终端: auth.get_user_by_id
2025-05-09 15:23:14,403 - app - INFO - 路由: /update_user/<int:user_id> - 方法: {'PUT', 'OPTIONS'} - 终端: auth.update_user
2025-05-09 15:23:14,403 - app - INFO - 路由: /roles - 方法: {'HEAD', 'GET', 'OPTIONS'} - 终端: auth.get_roles
2025-05-09 15:23:14,404 - app - INFO - 路由: /permissions - 方法: {'HEAD', 'GET', 'OPTIONS'} - 终端: auth.get_permissions
2025-05-09 15:23:14,404 - app - INFO - 路由: /permissions - 方法: {'POST', 'OPTIONS'} - 终端: auth.create_permission
2025-05-09 15:23:14,404 - app - INFO - 路由: /permissions/<int:permission_id> - 方法: {'HEAD', 'GET', 'OPTIONS'} - 终端: auth.get_permission
2025-05-09 15:23:14,404 - app - INFO - 路由: /permissions/<int:permission_id> - 方法: {'PUT', 'OPTIONS'} - 终端: auth.update_permission
2025-05-09 15:23:14,404 - app - INFO - 路由: /permissions/<int:permission_id> - 方法: {'DELETE', 'OPTIONS'} - 终端: auth.delete_permission
2025-05-09 15:23:14,405 - app - INFO - 路由: /roles - 方法: {'POST', 'OPTIONS'} - 终端: auth.create_role
2025-05-09 15:23:14,405 - app - INFO - 路由: /roles/<int:role_id> - 方法: {'HEAD', 'GET', 'OPTIONS'} - 终端: auth.get_role
2025-05-09 15:23:14,405 - app - INFO - 路由: /roles/<int:role_id>/permissions - 方法: {'PUT', 'OPTIONS'} - 终端: auth.update_role_permissions
2025-05-09 15:23:14,405 - app - INFO - 路由: /roles/<int:role_id> - 方法: {'DELETE', 'OPTIONS'} - 终端: auth.delete_role
2025-05-09 15:23:14,405 - app - INFO - 路由: /dashboard - 方法: {'HEAD', 'GET', 'OPTIONS'} - 终端: auth.dashboard
2025-05-09 15:23:14,405 - app - INFO - 路由: /dashboard/redirect - 方法: {'GET', 'POST', 'OPTIONS', 'HEAD'} - 终端: auth.dashboard_redirect
2025-05-09 15:23:14,406 - app - INFO - 路由: /create_test_user - 方法: {'POST', 'OPTIONS'} - 终端: auth.create_test_user
2025-05-09 15:23:14,406 - app - INFO - 路由: /check - 方法: {'HEAD', 'GET', 'OPTIONS'} - 终端: auth.check_auth
2025-05-09 15:23:14,406 - app - INFO - 路由: /create_test_project - 方法: {'POST', 'OPTIONS'} - 终端: auth.create_test_project
2025-05-09 15:23:14,406 - app - INFO - 路由: /logout_all - 方法: {'POST', 'OPTIONS'} - 终端: auth.logout_all
2025-05-09 15:23:14,406 - app - INFO - 路由: /dashboard/data - 方法: {'HEAD', 'GET', 'OPTIONS'} - 终端: auth.dashboard_data
2025-05-09 15:23:14,406 - app - INFO - 路由: /check_token - 方法: {'HEAD', 'GET', 'OPTIONS'} - 终端: auth.check_token
2025-05-09 15:23:14,407 - app - INFO - 路由: /create_user - 方法: {'POST', 'OPTIONS'} - 终端: auth.create_user
2025-05-09 15:23:14,407 - app - INFO - 路由: /user_info - 方法: {'HEAD', 'GET', 'OPTIONS'} - 终端: auth.get_user_info
2025-05-09 15:23:14,407 - app - INFO - 路由: /user/<int:user_id> - 方法: {'DELETE', 'OPTIONS'} - 终端: auth.delete_user
2025-05-09 15:23:14,408 - app - INFO - 路由: /users/<int:user_id>/roles - 方法: {'HEAD', 'GET', 'OPTIONS'} - 终端: auth.get_user_roles
2025-05-09 15:23:14,408 - app - INFO - 路由: /users/<int:user_id>/roles - 方法: {'PUT', 'OPTIONS'} - 终端: auth.update_user_roles
2025-05-09 15:23:14,408 - app - INFO - 路由: /users/<int:user_id>/notifications - 方法: {'HEAD', 'GET', 'OPTIONS'} - 终端: auth.get_user_notifications
2025-05-09 15:23:14,408 - app - INFO - 路由: /notifications/<int:notification_id>/read - 方法: {'PUT', 'OPTIONS'} - 终端: auth.mark_notification_as_read
2025-05-09 15:23:14,409 - app - INFO - 路由: /notifications/read_all - 方法: {'PUT', 'OPTIONS'} - 终端: auth.mark_all_notifications_as_read
2025-05-09 15:23:14,409 - app - INFO - 路由: /change-password - 方法: {'POST', 'OPTIONS'} - 终端: auth.change_password
2025-05-09 15:23:14,409 - app - INFO - 路由: /reset-password - 方法: {'HEAD', 'GET', 'OPTIONS'} - 终端: auth.reset_password_page
2025-05-09 15:23:14,409 - app - INFO - 路由: /verify-email/confirm - 方法: {'HEAD', 'GET', 'OPTIONS'} - 终端: auth.verify_email_confirm_page
2025-05-09 15:23:14,409 - app - INFO - 路由: /auth/csrf-token - 方法: {'HEAD', 'GET', 'OPTIONS'} - 终端: auth.get_csrf_token
2025-05-09 15:23:14,410 - app - INFO - 路由: /api/users/<int:user_id> - 方法: {'PUT', 'OPTIONS'} - 终端: auth.api_update_user
2025-05-09 15:23:14,410 - app - INFO - 路由: /api/users/<int:user_id> - 方法: {'DELETE', 'OPTIONS'} - 终端: auth.api_delete_user
2025-05-09 15:23:14,410 - app - INFO - 路由: /api/users - 方法: {'HEAD', 'GET', 'OPTIONS'} - 终端: auth.api_get_users
2025-05-09 15:23:14,410 - app - INFO - 路由: /api/users - 方法: {'POST', 'OPTIONS'} - 终端: auth.api_create_user
2025-05-09 15:23:14,410 - app - INFO - 路由: /auth/users/<int:user_id> - 方法: {'HEAD', 'GET', 'OPTIONS'} - 终端: auth.get_user_details
2025-05-09 15:23:14,411 - app - INFO - 路由: /api/users/<int:user_id> - 方法: {'OPTIONS', 'HEAD', 'PUT', 'GET', 'DELETE'} - 终端: auth.api_user_operations
2025-05-09 15:23:14,411 - app - INFO - 路由: /auth/user-csrf-token - 方法: {'HEAD', 'GET', 'OPTIONS'} - 终端: auth.get_user_csrf_token
2025-05-09 15:23:14,411 - app - INFO - 路由: /main/ - 方法: {'HEAD', 'GET', 'OPTIONS'} - 终端: main.index
2025-05-09 15:23:14,411 - app - INFO - 路由: /main/dashboard - 方法: {'HEAD', 'GET', 'OPTIONS'} - 终端: main.dashboard
2025-05-09 15:23:14,411 - app - INFO - 路由: /main/check_token - 方法: {'HEAD', 'GET', 'OPTIONS'} - 终端: main.check_token
2025-05-09 15:23:14,412 - app - INFO - 路由: /main/projects - 方法: {'HEAD', 'GET', 'OPTIONS'} - 终端: main.projects
2025-05-09 15:23:14,412 - app - INFO - 路由: /main/tasks - 方法: {'HEAD', 'GET', 'OPTIONS'} - 终端: main.tasks
2025-05-09 15:23:14,412 - app - INFO - 路由: /main/risks - 方法: {'HEAD', 'GET', 'OPTIONS'} - 终端: main.risks
2025-05-09 15:23:14,412 - app - INFO - 路由: /main/reports - 方法: {'HEAD', 'GET', 'OPTIONS'} - 终端: main.reports
2025-05-09 15:23:14,413 - app - INFO - 路由: /main/resources - 方法: {'HEAD', 'GET', 'OPTIONS'} - 终端: main.resources
2025-05-09 15:23:14,413 - app - INFO - 路由: /main/profile - 方法: {'HEAD', 'GET', 'OPTIONS'} - 终端: main.profile
2025-05-09 15:23:14,413 - app - INFO - 路由: /main/system/status - 方法: {'HEAD', 'GET', 'OPTIONS'} - 终端: main.system_status
2025-05-09 15:23:14,413 - app - INFO - 路由: /main/api/dashboard/data - 方法: {'HEAD', 'GET', 'OPTIONS'} - 终端: main.get_dashboard_data
2025-05-09 15:23:14,413 - app - INFO - 路由: /main/test - 方法: {'HEAD', 'GET', 'OPTIONS'} - 终端: main.test_route
2025-05-09 15:23:14,414 - app - INFO - 路由: /main/projects/detail/<int:project_id> - 方法: {'HEAD', 'GET', 'OPTIONS'} - 终端: main.project_detail_redirect
2025-05-09 15:23:14,414 - app - INFO - 路由: /main/users - 方法: {'HEAD', 'GET', 'OPTIONS'} - 终端: main.users
2025-05-09 15:23:14,414 - app - INFO - 路由: /main/debug/projects - 方法: {'HEAD', 'GET', 'OPTIONS'} - 终端: main.debug_projects
2025-05-09 15:23:14,414 - app - INFO - 路由: /main/simple/projects - 方法: {'HEAD', 'GET', 'OPTIONS'} - 终端: main.simple_projects
2025-05-09 15:23:14,414 - app - INFO - 路由: /main/static-test - 方法: {'HEAD', 'GET', 'OPTIONS'} - 终端: main.static_test
2025-05-09 15:23:14,415 - app - INFO - 路由: /main/print-projects - 方法: {'HEAD', 'GET', 'OPTIONS'} - 终端: main.print_projects
2025-05-09 15:23:14,415 - app - INFO - 路由: /main/bypass-projects - 方法: {'HEAD', 'GET', 'OPTIONS'} - 终端: main.bypass_projects
2025-05-09 15:23:14,415 - app - INFO - 路由: /main/debug-projects - 方法: {'HEAD', 'GET', 'OPTIONS'} - 终端: main.debug_projects_api
2025-05-09 15:23:14,415 - app - INFO - 路由: /projects/list - 方法: {'HEAD', 'GET', 'OPTIONS'} - 终端: projects.project_list
2025-05-09 15:23:14,416 - app - INFO - 路由: /projects/ - 方法: {'HEAD', 'GET', 'OPTIONS'} - 终端: projects.get_projects
2025-05-09 15:23:14,416 - app - INFO - 路由: /projects/ - 方法: {'POST', 'OPTIONS'} - 终端: projects.create_project
2025-05-09 15:23:14,416 - app - INFO - 路由: /projects/<int:project_id> - 方法: {'HEAD', 'GET', 'OPTIONS'} - 终端: projects.get_project
2025-05-09 15:23:14,416 - app - INFO - 路由: /projects/<int:project_id> - 方法: {'PUT', 'OPTIONS'} - 终端: projects.update_project
2025-05-09 15:23:14,416 - app - INFO - 路由: /projects/<int:project_id> - 方法: {'DELETE', 'OPTIONS'} - 终端: projects.delete_project
2025-05-09 15:23:14,418 - app - INFO - 路由: /projects/<int:project_id>/members - 方法: {'HEAD', 'GET', 'OPTIONS'} - 终端: projects.get_project_members
2025-05-09 15:23:14,418 - app - INFO - 路由: /projects/<int:project_id>/members - 方法: {'POST', 'OPTIONS'} - 终端: projects.add_project_member
2025-05-09 15:23:14,419 - app - INFO - 路由: /projects/<int:project_id>/members/<int:user_id> - 方法: {'DELETE', 'OPTIONS'} - 终端: projects.remove_project_member
2025-05-09 15:23:14,419 - app - INFO - 路由: /projects/detail/<int:project_id> - 方法: {'HEAD', 'GET', 'OPTIONS'} - 终端: projects.detail
2025-05-09 15:23:14,419 - app - INFO - 路由: /projects/api/detail/<int:project_id> - 方法: {'HEAD', 'GET', 'OPTIONS'} - 终端: projects.detail_api
2025-05-09 15:23:14,420 - app - INFO - 路由: /projects/api/projects/<int:project_id> - 方法: {'HEAD', 'GET', 'OPTIONS'} - 终端: projects.get_project_api
2025-05-09 15:23:14,420 - app - INFO - 路由: /projects/api/projects/<int:project_id> - 方法: {'PUT', 'OPTIONS'} - 终端: projects.update_project_api
2025-05-09 15:23:14,420 - app - INFO - 路由: /projects/api/projects/<int:project_id> - 方法: {'DELETE', 'OPTIONS'} - 终端: projects.delete_project_api
2025-05-09 15:23:14,420 - app - INFO - 路由: /projects/api/auth/projects - 方法: {'HEAD', 'GET', 'OPTIONS'} - 终端: projects.get_projects_api
2025-05-09 15:23:14,421 - app - INFO - 路由: /projects/api/auth/projects/<int:project_id> - 方法: {'HEAD', 'GET', 'OPTIONS'} - 终端: projects.get_project_auth_api
2025-05-09 15:23:14,421 - app - INFO - 路由: /projects/api/noauth/projects/<int:project_id> - 方法: {'OPTIONS', 'HEAD', 'PUT', 'GET', 'DELETE'} - 终端: projects.get_project_noauth
2025-05-09 15:23:14,421 - app - INFO - 路由: /projects/api/auth/projects - 方法: {'POST', 'OPTIONS'} - 终端: projects.create_project_auth
2025-05-09 15:23:14,421 - app - INFO - 路由: /projects/api/project-managers - 方法: {'HEAD', 'GET', 'OPTIONS'} - 终端: projects.get_project_managers
2025-05-09 15:23:14,421 - app - INFO - 路由: /projects/api/projects - 方法: {'HEAD', 'GET', 'OPTIONS'} - 终端: projects.get_all_projects_api
2025-05-09 15:23:14,422 - app - INFO - 路由: /projects/api/active-projects - 方法: {'HEAD', 'GET', 'OPTIONS'} - 终端: projects.get_active_projects_api
2025-05-09 15:23:14,422 - app - INFO - 路由: /projects/api/projects/<int:project_id>/members - 方法: {'HEAD', 'GET', 'OPTIONS'} - 终端: projects.get_project_members_api
2025-05-09 15:23:14,422 - app - INFO - 路由: /list - 方法: {'HEAD', 'GET', 'OPTIONS'} - 终端: project_root.project_list
2025-05-09 15:23:14,423 - app - INFO - 路由: / - 方法: {'HEAD', 'GET', 'OPTIONS'} - 终端: project_root.get_projects
2025-05-09 15:23:14,423 - app - INFO - 路由: / - 方法: {'POST', 'OPTIONS'} - 终端: project_root.create_project
2025-05-09 15:23:14,423 - app - INFO - 路由: /<int:project_id> - 方法: {'HEAD', 'GET', 'OPTIONS'} - 终端: project_root.get_project
2025-05-09 15:23:14,423 - app - INFO - 路由: /<int:project_id> - 方法: {'PUT', 'OPTIONS'} - 终端: project_root.update_project
2025-05-09 15:23:14,423 - app - INFO - 路由: /<int:project_id> - 方法: {'DELETE', 'OPTIONS'} - 终端: project_root.delete_project
2025-05-09 15:23:14,424 - app - INFO - 路由: /<int:project_id>/members - 方法: {'HEAD', 'GET', 'OPTIONS'} - 终端: project_root.get_project_members
2025-05-09 15:23:14,424 - app - INFO - 路由: /<int:project_id>/members - 方法: {'POST', 'OPTIONS'} - 终端: project_root.add_project_member
2025-05-09 15:23:14,424 - app - INFO - 路由: /<int:project_id>/members/<int:user_id> - 方法: {'DELETE', 'OPTIONS'} - 终端: project_root.remove_project_member
2025-05-09 15:23:14,424 - app - INFO - 路由: /detail/<int:project_id> - 方法: {'HEAD', 'GET', 'OPTIONS'} - 终端: project_root.detail
2025-05-09 15:23:14,424 - app - INFO - 路由: /api/detail/<int:project_id> - 方法: {'HEAD', 'GET', 'OPTIONS'} - 终端: project_root.detail_api
2025-05-09 15:23:14,425 - app - INFO - 路由: /api/projects/<int:project_id> - 方法: {'HEAD', 'GET', 'OPTIONS'} - 终端: project_root.get_project_api
2025-05-09 15:23:14,425 - app - INFO - 路由: /api/projects/<int:project_id> - 方法: {'PUT', 'OPTIONS'} - 终端: project_root.update_project_api
2025-05-09 15:23:14,425 - app - INFO - 路由: /api/projects/<int:project_id> - 方法: {'DELETE', 'OPTIONS'} - 终端: project_root.delete_project_api
2025-05-09 15:23:14,425 - app - INFO - 路由: /api/auth/projects - 方法: {'HEAD', 'GET', 'OPTIONS'} - 终端: project_root.get_projects_api
2025-05-09 15:23:14,425 - app - INFO - 路由: /api/auth/projects/<int:project_id> - 方法: {'HEAD', 'GET', 'OPTIONS'} - 终端: project_root.get_project_auth_api
2025-05-09 15:23:14,425 - app - INFO - 路由: /api/noauth/projects/<int:project_id> - 方法: {'OPTIONS', 'HEAD', 'PUT', 'GET', 'DELETE'} - 终端: project_root.get_project_noauth
2025-05-09 15:23:14,426 - app - INFO - 路由: /api/auth/projects - 方法: {'POST', 'OPTIONS'} - 终端: project_root.create_project_auth
2025-05-09 15:23:14,426 - app - INFO - 路由: /api/project-managers - 方法: {'HEAD', 'GET', 'OPTIONS'} - 终端: project_root.get_project_managers
2025-05-09 15:23:14,426 - app - INFO - 路由: /api/projects - 方法: {'HEAD', 'GET', 'OPTIONS'} - 终端: project_root.get_all_projects_api
2025-05-09 15:23:14,426 - app - INFO - 路由: /api/active-projects - 方法: {'HEAD', 'GET', 'OPTIONS'} - 终端: project_root.get_active_projects_api
2025-05-09 15:23:14,426 - app - INFO - 路由: /api/projects/<int:project_id>/members - 方法: {'HEAD', 'GET', 'OPTIONS'} - 终端: project_root.get_project_members_api
2025-05-09 15:23:14,427 - app - INFO - 路由: /tasks/ - 方法: {'HEAD', 'GET', 'OPTIONS'} - 终端: tasks.get_tasks
2025-05-09 15:23:14,427 - app - INFO - 路由: /tasks/ - 方法: {'POST', 'OPTIONS'} - 终端: tasks.create_task
2025-05-09 15:23:14,427 - app - INFO - 路由: /tasks/<int:task_id> - 方法: {'HEAD', 'GET', 'OPTIONS'} - 终端: tasks.get_task
2025-05-09 15:23:14,428 - app - INFO - 路由: /tasks/<int:task_id> - 方法: {'PUT', 'OPTIONS'} - 终端: tasks.update_task
2025-05-09 15:23:14,428 - app - INFO - 路由: /tasks/<int:task_id> - 方法: {'DELETE', 'OPTIONS'} - 终端: tasks.delete_task
2025-05-09 15:23:14,428 - app - INFO - 路由: /tasks/<int:task_id>/comments - 方法: {'HEAD', 'GET', 'OPTIONS'} - 终端: tasks.get_task_comments
2025-05-09 15:23:14,428 - app - INFO - 路由: /tasks/<int:task_id>/comments - 方法: {'POST', 'OPTIONS'} - 终端: tasks.add_task_comment
2025-05-09 15:23:14,429 - app - INFO - 路由: /tasks/<int:task_id>/attachments - 方法: {'HEAD', 'GET', 'OPTIONS'} - 终端: tasks.get_task_attachments
2025-05-09 15:23:14,429 - app - INFO - 路由: /tasks/<int:task_id>/attachments - 方法: {'POST', 'OPTIONS'} - 终端: tasks.add_task_attachment
2025-05-09 15:23:14,429 - app - INFO - 路由: /tasks/<int:task_id>/resources - 方法: {'HEAD', 'GET', 'OPTIONS'} - 终端: tasks.get_task_resources
2025-05-09 15:23:14,429 - app - INFO - 路由: /tasks/<int:task_id>/subtasks - 方法: {'HEAD', 'GET', 'OPTIONS'} - 终端: tasks.get_subtasks
2025-05-09 15:23:14,430 - app - INFO - 路由: /tasks/<int:task_id>/subtasks - 方法: {'POST', 'OPTIONS'} - 终端: tasks.create_subtask
2025-05-09 15:23:14,430 - app - INFO - 路由: /tasks/<int:task_id>/dependencies - 方法: {'HEAD', 'GET', 'OPTIONS'} - 终端: tasks.get_dependencies
2025-05-09 15:23:14,430 - app - INFO - 路由: /tasks/<int:task_id>/dependencies - 方法: {'POST', 'OPTIONS'} - 终端: tasks.add_dependency
2025-05-09 15:23:14,430 - app - INFO - 路由: /tasks/<int:task_id>/logs - 方法: {'HEAD', 'GET', 'OPTIONS'} - 终端: tasks.get_task_logs
2025-05-09 15:23:14,430 - app - INFO - 路由: /tasks/<int:task_id>/logs - 方法: {'POST', 'OPTIONS'} - 终端: tasks.add_task_log
2025-05-09 15:23:14,431 - app - INFO - 路由: /tasks/project/<int:project_id>/gantt - 方法: {'HEAD', 'GET', 'OPTIONS'} - 终端: tasks.gantt_chart
2025-05-09 15:23:14,431 - app - INFO - 路由: /tasks/project/<int:project_id>/gantt/data - 方法: {'HEAD', 'GET', 'OPTIONS'} - 终端: tasks.get_gantt_data
2025-05-09 15:23:14,431 - app - INFO - 路由: /tasks/<int:task_id>/gantt - 方法: {'PUT', 'OPTIONS'} - 终端: tasks.update_gantt_task
2025-05-09 15:23:14,431 - app - INFO - 路由: /tasks/dependencies/gantt - 方法: {'POST', 'OPTIONS'} - 终端: tasks.create_gantt_dependency
2025-05-09 15:23:14,431 - app - INFO - 路由: /tasks/<int:task_id>/dependencies/<int:dependency_id>/gantt - 方法: {'DELETE', 'OPTIONS'} - 终端: tasks.delete_gantt_dependency
2025-05-09 15:23:14,432 - app - INFO - 路由: /tasks/<int:task_id>/status - 方法: {'PUT', 'OPTIONS'} - 终端: tasks.update_task_status
2025-05-09 15:23:14,432 - app - INFO - 路由: /tasks/api/tasks/dependencies - 方法: {'POST', 'OPTIONS'} - 终端: tasks.add_task_dependency
2025-05-09 15:23:14,432 - app - INFO - 路由: /tasks/<int:task_id>/detail - 方法: {'HEAD', 'GET', 'OPTIONS'} - 终端: tasks.task_detail_api
2025-05-09 15:23:14,433 - app - INFO - 路由: /tasks/api/auth/tasks/<int:task_id>/detail - 方法: {'HEAD', 'GET', 'OPTIONS'} - 终端: tasks.task_detail_api_auth
2025-05-09 15:23:14,433 - app - INFO - 路由: /tasks/<int:task_id>/view - 方法: {'HEAD', 'GET', 'OPTIONS'} - 终端: tasks.task_detail_page
2025-05-09 15:23:14,433 - app - INFO - 路由: /tasks/<int:task_id>/edit - 方法: {'HEAD', 'GET', 'OPTIONS'} - 终端: tasks.edit_task_page
2025-05-09 15:23:14,433 - app - INFO - 路由: /tasks/api/auth/tasks/<int:task_id>/attachments - 方法: {'POST', 'OPTIONS'} - 终端: tasks.add_task_attachment_auth
2025-05-09 15:23:14,434 - app - INFO - 路由: /tasks/api/auth/tasks/<int:task_id>/attachments/<int:attachment_id>/download - 方法: {'HEAD', 'GET', 'OPTIONS'} - 终端: tasks.download_attachment_auth
2025-05-09 15:23:14,434 - app - INFO - 路由: /tasks/api/tasks/<int:task_id>/attachments - 方法: {'POST', 'OPTIONS'} - 终端: tasks.upload_attachment
2025-05-09 15:23:14,434 - app - INFO - 路由: /tasks/api/tasks/<int:task_id>/attachments/<int:attachment_id>/download - 方法: {'HEAD', 'GET', 'OPTIONS'} - 终端: tasks.download_attachment
2025-05-09 15:23:14,434 - app - INFO - 路由: /tasks/api/tasks/<int:task_id>/attachments/<int:attachment_id> - 方法: {'DELETE', 'OPTIONS'} - 终端: tasks.delete_attachment
2025-05-09 15:23:14,435 - app - INFO - 路由: /tasks/api/tasks/<int:task_id>/attachments/<int:attachment_id>/versions - 方法: {'POST', 'OPTIONS'} - 终端: tasks.upload_new_version
2025-05-09 15:23:14,435 - app - INFO - 路由: /tasks/api/tasks/<int:task_id>/attachments/<int:attachment_id>/versions - 方法: {'HEAD', 'GET', 'OPTIONS'} - 终端: tasks.get_attachment_versions
2025-05-09 15:23:14,435 - app - INFO - 路由: /tasks/api/tasks/<int:task_id>/risks - 方法: {'HEAD', 'GET', 'OPTIONS'} - 终端: tasks.task_risks_front_path
2025-05-09 15:23:14,437 - app - INFO - 路由: /tasks/<int:task_id>/risks - 方法: {'POST', 'OPTIONS'} - 终端: tasks.create_task_risk_front_path
2025-05-09 15:23:14,437 - app - INFO - 路由: /tasks/api/tasks/<int:task_id>/progress - 方法: {'HEAD', 'GET', 'OPTIONS'} - 终端: tasks.get_task_progress
2025-05-09 15:23:14,437 - app - INFO - 路由: /tasks/api/tasks/<int:task_id>/progress - 方法: {'POST', 'OPTIONS'} - 终端: tasks.update_task_progress
2025-05-09 15:23:14,437 - app - INFO - 路由: /tasks/api/tasks/<int:task_id>/progress/approve - 方法: {'POST', 'OPTIONS'} - 终端: tasks.approve_task_progress
2025-05-09 15:23:14,438 - app - INFO - 路由: /tasks/list - 方法: {'HEAD', 'GET', 'OPTIONS'} - 终端: tasks.task_list
2025-05-09 15:23:14,438 - app - INFO - 路由: /tasks/api/auth/tasks/<int:task_id>/logs - 方法: {'HEAD', 'GET', 'OPTIONS'} - 终端: tasks.get_task_logs_auth
2025-05-09 15:23:14,438 - app - INFO - 路由: /tasks/api/auth/tasks/<int:task_id>/subtasks - 方法: {'HEAD', 'GET', 'OPTIONS'} - 终端: tasks.get_subtasks_auth
2025-05-09 15:23:14,439 - app - INFO - 路由: /tasks/api/auth/tasks/<int:task_id>/comments - 方法: {'HEAD', 'GET', 'OPTIONS'} - 终端: tasks.get_task_comments_auth
2025-05-09 15:23:14,439 - app - INFO - 路由: /tasks/api/auth/tasks/<int:task_id>/attachments - 方法: {'HEAD', 'GET', 'OPTIONS'} - 终端: tasks.get_task_attachments_auth
2025-05-09 15:23:14,440 - app - INFO - 路由: /tasks/api/auth/tasks/<int:task_id>/risks - 方法: {'HEAD', 'GET', 'OPTIONS'} - 终端: tasks.get_task_risks_auth
2025-05-09 15:23:14,440 - app - INFO - 路由: /tasks/api/auth/tasks/<int:task_id>/risks - 方法: {'POST', 'OPTIONS'} - 终端: tasks.create_task_risk_auth
2025-05-09 15:23:14,440 - app - INFO - 路由: /tasks/api/auth/tasks/<int:task_id>/comments - 方法: {'POST', 'OPTIONS'} - 终端: tasks.add_task_comment_auth
2025-05-09 15:23:14,440 - app - INFO - 路由: /tasks/api/tasks/<int:task_id> - 方法: {'PUT', 'OPTIONS'} - 终端: tasks.api_update_task
2025-05-09 15:23:14,440 - app - INFO - 路由: /tasks/api/tasks/<int:task_id>/update_bypass - 方法: {'PUT', 'OPTIONS'} - 终端: tasks.update_task_bypass_csrf
2025-05-09 15:23:14,441 - app - INFO - 路由: /tasks/get-csrf-token - 方法: {'HEAD', 'GET', 'OPTIONS'} - 终端: tasks.get_csrf_token
2025-05-09 15:23:14,441 - app - INFO - 路由: /tasks/api/tasks/<int:task_id>/no_csrf - 方法: {'PUT', 'OPTIONS'} - 终端: tasks.update_task_no_csrf
2025-05-09 15:23:14,441 - app - INFO - 路由: /tasks/api/tasks/<int:task_id>/detail - 方法: {'HEAD', 'GET', 'OPTIONS'} - 终端: tasks.api_tasks_detail
2025-05-09 15:23:14,490 - app - WARNING - team_bp 未定义或无法导入
2025-05-09 15:23:14,608 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-05-09 15:23:14,609 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions 
WHERE permissions.name = ?
 LIMIT ? OFFSET ?
2025-05-09 15:23:14,610 - sqlalchemy.engine.Engine - INFO - [generated in 0.00038s] ('manage_users', 1, 0)
2025-05-09 15:23:14,611 - app.utils.permissions - INFO - 更新权限: manage_users
2025-05-09 15:23:14,611 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions 
WHERE permissions.name = ?
 LIMIT ? OFFSET ?
2025-05-09 15:23:14,611 - sqlalchemy.engine.Engine - INFO - [cached since 0.00222s ago] ('manage_roles', 1, 0)
2025-05-09 15:23:14,612 - app.utils.permissions - INFO - 更新权限: manage_roles
2025-05-09 15:23:14,614 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions 
WHERE permissions.name = ?
 LIMIT ? OFFSET ?
2025-05-09 15:23:14,614 - sqlalchemy.engine.Engine - INFO - [cached since 0.003901s ago] ('manage_all_projects', 1, 0)
2025-05-09 15:23:14,614 - app.utils.permissions - INFO - 更新权限: manage_all_projects
2025-05-09 15:23:14,615 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions 
WHERE permissions.name = ?
 LIMIT ? OFFSET ?
2025-05-09 15:23:14,615 - sqlalchemy.engine.Engine - INFO - [cached since 0.004989s ago] ('manage_project', 1, 0)
2025-05-09 15:23:14,615 - app.utils.permissions - INFO - 更新权限: manage_project
2025-05-09 15:23:14,616 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions 
WHERE permissions.name = ?
 LIMIT ? OFFSET ?
2025-05-09 15:23:14,616 - sqlalchemy.engine.Engine - INFO - [cached since 0.006007s ago] ('manage_all_tasks', 1, 0)
2025-05-09 15:23:14,616 - app.utils.permissions - INFO - 更新权限: manage_all_tasks
2025-05-09 15:23:14,617 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions 
WHERE permissions.name = ?
 LIMIT ? OFFSET ?
2025-05-09 15:23:14,617 - sqlalchemy.engine.Engine - INFO - [cached since 0.006978s ago] ('manage_task', 1, 0)
2025-05-09 15:23:14,618 - app.utils.permissions - INFO - 更新权限: manage_task
2025-05-09 15:23:14,619 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions 
WHERE permissions.name = ?
 LIMIT ? OFFSET ?
2025-05-09 15:23:14,620 - sqlalchemy.engine.Engine - INFO - [cached since 0.009791s ago] ('view_project', 1, 0)
2025-05-09 15:23:14,620 - app.utils.permissions - INFO - 更新权限: view_project
2025-05-09 15:23:14,621 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions 
WHERE permissions.name = ?
 LIMIT ? OFFSET ?
2025-05-09 15:23:14,621 - sqlalchemy.engine.Engine - INFO - [cached since 0.0112s ago] ('view_task', 1, 0)
2025-05-09 15:23:14,621 - app.utils.permissions - INFO - 更新权限: view_task
2025-05-09 15:23:14,622 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions 
WHERE permissions.name = ?
 LIMIT ? OFFSET ?
2025-05-09 15:23:14,622 - sqlalchemy.engine.Engine - INFO - [cached since 0.0123s ago] ('manage_resources', 1, 0)
2025-05-09 15:23:14,622 - app.utils.permissions - INFO - 更新权限: manage_resources
2025-05-09 15:23:14,623 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions 
WHERE permissions.name = ?
 LIMIT ? OFFSET ?
2025-05-09 15:23:14,623 - sqlalchemy.engine.Engine - INFO - [cached since 0.01369s ago] ('manage_risks', 1, 0)
2025-05-09 15:23:14,624 - app.utils.permissions - INFO - 更新权限: manage_risks
2025-05-09 15:23:14,625 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions 
WHERE permissions.name = ?
 LIMIT ? OFFSET ?
2025-05-09 15:23:14,625 - sqlalchemy.engine.Engine - INFO - [cached since 0.01571s ago] ('view_reports', 1, 0)
2025-05-09 15:23:14,626 - app.utils.permissions - INFO - 更新权限: view_reports
2025-05-09 15:23:14,626 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions 
WHERE permissions.name = ?
 LIMIT ? OFFSET ?
2025-05-09 15:23:14,626 - sqlalchemy.engine.Engine - INFO - [cached since 0.01707s ago] ('create_task', 1, 0)
2025-05-09 15:23:14,626 - app.utils.permissions - INFO - 更新权限: create_task
2025-05-09 15:23:14,628 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions 
WHERE permissions.name = ?
 LIMIT ? OFFSET ?
2025-05-09 15:23:14,628 - sqlalchemy.engine.Engine - INFO - [cached since 0.01823s ago] ('create_project', 1, 0)
2025-05-09 15:23:14,628 - app.utils.permissions - INFO - 更新权限: create_project
2025-05-09 15:23:14,629 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions 
WHERE permissions.name = ?
 LIMIT ? OFFSET ?
2025-05-09 15:23:14,629 - sqlalchemy.engine.Engine - INFO - [cached since 0.01908s ago] ('assign_task', 1, 0)
2025-05-09 15:23:14,629 - app.utils.permissions - INFO - 更新权限: assign_task
2025-05-09 15:23:14,629 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions 
WHERE permissions.name = ?
 LIMIT ? OFFSET ?
2025-05-09 15:23:14,630 - sqlalchemy.engine.Engine - INFO - [cached since 0.01975s ago] ('change_project_status', 1, 0)
2025-05-09 15:23:14,630 - app.utils.permissions - INFO - 更新权限: change_project_status
2025-05-09 15:23:14,630 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions 
WHERE permissions.name = ?
 LIMIT ? OFFSET ?
2025-05-09 15:23:14,630 - sqlalchemy.engine.Engine - INFO - [cached since 0.02043s ago] ('change_task_status', 1, 0)
2025-05-09 15:23:14,630 - app.utils.permissions - INFO - 更新权限: change_task_status
2025-05-09 15:23:14,631 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-05-09 15:23:14,631 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-05-09 15:23:14,632 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions
2025-05-09 15:23:14,632 - sqlalchemy.engine.Engine - INFO - [generated in 0.00020s] ()
2025-05-09 15:23:14,632 - sqlalchemy.engine.Engine - INFO - SELECT roles.id AS roles_id, roles.name AS roles_name, roles.description AS roles_description, roles.created_at AS roles_created_at 
FROM roles 
WHERE roles.name = ?
 LIMIT ? OFFSET ?
2025-05-09 15:23:14,633 - sqlalchemy.engine.Engine - INFO - [generated in 0.00019s] ('admin', 1, 0)
2025-05-09 15:23:14,633 - app.utils.permissions - INFO - 更新角色: admin
2025-05-09 15:23:14,634 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions, role_permissions 
WHERE ? = role_permissions.role_id AND permissions.id = role_permissions.permission_id
2025-05-09 15:23:14,636 - sqlalchemy.engine.Engine - INFO - [generated in 0.00042s] (1,)
2025-05-09 15:23:14,636 - app.utils.permissions - INFO - 为管理员角色添加所有权限: 16个
2025-05-09 15:23:14,637 - sqlalchemy.engine.Engine - INFO - SELECT roles.id AS roles_id, roles.name AS roles_name, roles.description AS roles_description, roles.created_at AS roles_created_at 
FROM roles 
WHERE roles.name = ?
 LIMIT ? OFFSET ?
2025-05-09 15:23:14,637 - sqlalchemy.engine.Engine - INFO - [cached since 0.0043s ago] ('manager', 1, 0)
2025-05-09 15:23:14,638 - app.utils.permissions - INFO - 更新角色: manager
2025-05-09 15:23:14,638 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions, role_permissions 
WHERE ? = role_permissions.role_id AND permissions.id = role_permissions.permission_id
2025-05-09 15:23:14,638 - sqlalchemy.engine.Engine - INFO - [cached since 0.00319s ago] (2,)
2025-05-09 15:23:14,639 - app.utils.permissions - INFO - 为角色 manager 添加权限: manage_project
2025-05-09 15:23:14,639 - app.utils.permissions - INFO - 为角色 manager 添加权限: manage_task
2025-05-09 15:23:14,639 - app.utils.permissions - INFO - 为角色 manager 添加权限: view_project
2025-05-09 15:23:14,640 - app.utils.permissions - INFO - 为角色 manager 添加权限: view_task
2025-05-09 15:23:14,640 - app.utils.permissions - INFO - 为角色 manager 添加权限: manage_resources
2025-05-09 15:23:14,640 - app.utils.permissions - INFO - 为角色 manager 添加权限: manage_risks
2025-05-09 15:23:14,640 - app.utils.permissions - INFO - 为角色 manager 添加权限: view_reports
2025-05-09 15:23:14,640 - app.utils.permissions - INFO - 为角色 manager 添加权限: create_project
2025-05-09 15:23:14,641 - app.utils.permissions - INFO - 为角色 manager 添加权限: create_task
2025-05-09 15:23:14,641 - app.utils.permissions - INFO - 为角色 manager 添加权限: assign_task
2025-05-09 15:23:14,641 - app.utils.permissions - INFO - 为角色 manager 添加权限: change_project_status
2025-05-09 15:23:14,641 - app.utils.permissions - INFO - 为角色 manager 添加权限: change_task_status
2025-05-09 15:23:14,642 - sqlalchemy.engine.Engine - INFO - SELECT roles.id AS roles_id, roles.name AS roles_name, roles.description AS roles_description, roles.created_at AS roles_created_at 
FROM roles 
WHERE roles.name = ?
 LIMIT ? OFFSET ?
2025-05-09 15:23:14,642 - sqlalchemy.engine.Engine - INFO - [cached since 0.009629s ago] ('user', 1, 0)
2025-05-09 15:23:14,642 - app.utils.permissions - INFO - 更新角色: user
2025-05-09 15:23:14,643 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions, role_permissions 
WHERE ? = role_permissions.role_id AND permissions.id = role_permissions.permission_id
2025-05-09 15:23:14,643 - sqlalchemy.engine.Engine - INFO - [cached since 0.008564s ago] (5,)
2025-05-09 15:23:14,644 - app.utils.permissions - INFO - 为角色 user 添加权限: view_project
2025-05-09 15:23:14,644 - app.utils.permissions - INFO - 为角色 user 添加权限: view_task
2025-05-09 15:23:14,644 - app.utils.permissions - INFO - 为角色 user 添加权限: view_reports
2025-05-09 15:23:14,644 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-05-09 15:23:14,644 - app.utils.permissions - INFO - 角色和权限初始化完成
2025-05-09 15:23:14,645 - __main__ - INFO - 角色和权限初始化成功
2025-05-09 15:23:14,645 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-05-09 15:23:14,646 - sqlalchemy.engine.Engine - INFO - SELECT users.id AS users_id, users.username AS users_username, users.email AS users_email, users.name AS users_name, users.password_hash AS users_password_hash, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.last_login AS users_last_login 
FROM users 
WHERE users.username = ?
 LIMIT ? OFFSET ?
2025-05-09 15:23:14,646 - sqlalchemy.engine.Engine - INFO - [generated in 0.00027s] ('system', 1, 0)
2025-05-09 15:23:14,647 - sqlalchemy.engine.Engine - INFO - SELECT projects.id AS projects_id, projects.name AS projects_name, projects.description AS projects_description, projects.status AS projects_status, projects.start_date AS projects_start_date, projects.end_date AS projects_end_date, projects.progress AS projects_progress, projects.created_at AS projects_created_at, projects.updated_at AS projects_updated_at, projects.manager_id AS projects_manager_id, projects.owner_id AS projects_owner_id 
FROM projects 
WHERE projects.name = ?
 LIMIT ? OFFSET ?
2025-05-09 15:23:14,648 - sqlalchemy.engine.Engine - INFO - [generated in 0.00025s] ('Test Project', 1, 0)
2025-05-09 15:23:14,648 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-05-09 15:23:14,648 - __main__ - INFO - 数据库初始化完成
2025-05-09 15:23:14,649 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-05-09 15:23:14,649 - sqlalchemy.engine.Engine - INFO - SELECT users.id AS users_id, users.username AS users_username, users.email AS users_email, users.name AS users_name, users.password_hash AS users_password_hash, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.last_login AS users_last_login 
FROM users 
WHERE users.username = ?
 LIMIT ? OFFSET ?
2025-05-09 15:23:14,649 - sqlalchemy.engine.Engine - INFO - [cached since 0.00327s ago] ('system', 1, 0)
2025-05-09 15:23:14,656 - sqlalchemy.engine.Engine - INFO - INSERT INTO resource_usages (user_id, cpu_usage, memory_usage, disk_usage, network_usage, recorded_at) VALUES (?, ?, ?, ?, ?, ?)
2025-05-09 15:23:14,656 - sqlalchemy.engine.Engine - INFO - [generated in 0.00044s] (2, 11.6, 52.5, 10.9, 0.0, '2025-05-09 07:23:14.655454')
2025-05-09 15:23:14,661 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-05-09 15:23:14,664 - __main__ - INFO - 系统资源检查完成
2025-05-09 15:23:14,665 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-05-09 15:23:14,666 - sqlalchemy.engine.Engine - INFO - DELETE FROM resource_usages WHERE resource_usages.recorded_at < ?
2025-05-09 15:23:14,666 - sqlalchemy.engine.Engine - INFO - [generated in 0.00035s] ('2025-04-09 07:23:14.665847',)
2025-05-09 15:23:14,668 - sqlalchemy.engine.Engine - INFO - DELETE FROM system_alerts WHERE system_alerts.is_resolved = 1 AND system_alerts.created_at < ?
2025-05-09 15:23:14,668 - sqlalchemy.engine.Engine - INFO - [generated in 0.00025s] ('2025-05-02 07:23:14.666885',)
2025-05-09 15:23:14,668 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-05-09 15:23:14,668 - __main__ - INFO - 旧数据清理完成
2025-05-09 15:23:14,674 - werkzeug - WARNING -  * Debugger is active!
2025-05-09 15:23:14,676 - werkzeug - INFO -  * Debugger PIN: 670-037-726
2025-05-09 15:23:23,833 - werkzeug - INFO -  * Detected change in 'D:\\tmp\\work\\app\\routes\\tasks.py', reloading
2025-05-09 15:23:24,031 - werkzeug - INFO -  * Restarting with stat
2025-05-09 15:23:24,610 - app - INFO - File logging handler initialized successfully
2025-05-09 15:23:24,611 - app - INFO - Console logging handler initialized successfully
2025-05-09 15:23:24,611 - app - INFO - Application logging configuration completed
2025-05-09 15:23:24,611 - app - INFO - Development configuration initialized
2025-05-09 15:23:24,639 - app - INFO - Logging setup completed successfully
2025-05-09 15:23:24,890 - app - INFO - 已注册的路由:
2025-05-09 15:23:24,891 - app - INFO - 路由: /static/<path:filename> - 方法: {'GET', 'HEAD', 'OPTIONS'} - 终端: static
2025-05-09 15:23:24,891 - app - INFO - 路由: /api/users/<int:user_id> - 方法: {'DELETE', 'PUT', 'GET', 'HEAD', 'POST', 'OPTIONS'} - 终端: user_api_exempt.user_api_exempt_route
2025-05-09 15:23:24,891 - app - INFO - 路由: /api/users - 方法: {'DELETE', 'PUT', 'GET', 'HEAD', 'POST', 'OPTIONS'} - 终端: user_api_exempt.user_api_exempt_route
2025-05-09 15:23:24,891 - app - INFO - 路由: /tasks/<int:task_id>/dependencies/<int:dependency_id>/gantt - 方法: {'DELETE', 'OPTIONS'} - 终端: task_api_exempt.task_api_exempt_route
2025-05-09 15:23:24,891 - app - INFO - 路由: /tasks/<int:task_id>/gantt - 方法: {'PUT', 'OPTIONS'} - 终端: task_api_exempt.task_api_exempt_route
2025-05-09 15:23:24,891 - app - INFO - 路由: /tasks/project/<int:project_id>/gantt - 方法: {'GET', 'HEAD', 'OPTIONS'} - 终端: task_api_exempt.task_api_exempt_route
2025-05-09 15:23:24,892 - app - INFO - 路由: /tasks/project/<int:project_id>/gantt/data - 方法: {'GET', 'HEAD', 'OPTIONS'} - 终端: task_api_exempt.task_api_exempt_route
2025-05-09 15:23:24,892 - app - INFO - 路由: /api/tasks/<int:task_id>/no_csrf - 方法: {'DELETE', 'PUT', 'GET', 'HEAD', 'POST', 'OPTIONS'} - 终端: task_api_exempt.task_api_exempt_route
2025-05-09 15:23:24,892 - app - INFO - 路由: /api/tasks/<int:task_id> - 方法: {'DELETE', 'PUT', 'GET', 'HEAD', 'POST', 'OPTIONS'} - 终端: task_api_exempt.task_api_exempt_route
2025-05-09 15:23:24,892 - app - INFO - 路由: /tasks/dependencies/gantt - 方法: {'POST', 'OPTIONS'} - 终端: task_api_exempt.task_api_exempt_route
2025-05-09 15:23:24,893 - app - INFO - 路由: /api/tasks - 方法: {'DELETE', 'PUT', 'GET', 'HEAD', 'POST', 'OPTIONS'} - 终端: task_api_exempt.task_api_exempt_route
2025-05-09 15:23:24,893 - app - INFO - 路由: /login - 方法: {'GET', 'HEAD', 'OPTIONS'} - 终端: auth.login_page
2025-05-09 15:23:24,893 - app - INFO - 路由: /login - 方法: {'POST', 'OPTIONS'} - 终端: auth.login
2025-05-09 15:23:24,893 - app - INFO - 路由: /register - 方法: {'GET', 'HEAD', 'OPTIONS'} - 终端: auth.register_page
2025-05-09 15:23:24,893 - app - INFO - 路由: /register - 方法: {'POST', 'OPTIONS'} - 终端: auth.register
2025-05-09 15:23:24,893 - app - INFO - 路由: /logout - 方法: {'GET', 'POST', 'HEAD', 'OPTIONS'} - 终端: auth.logout
2025-05-09 15:23:24,894 - app - INFO - 路由: /refresh - 方法: {'POST', 'OPTIONS'} - 终端: auth.refresh
2025-05-09 15:23:24,894 - app - INFO - 路由: /profile - 方法: {'GET', 'HEAD', 'OPTIONS'} - 终端: auth.profile
2025-05-09 15:23:24,894 - app - INFO - 路由: /profile - 方法: {'PUT', 'OPTIONS'} - 终端: auth.update_profile
2025-05-09 15:23:24,894 - app - INFO - 路由: /users - 方法: {'GET', 'HEAD', 'OPTIONS'} - 终端: auth.get_users
2025-05-09 15:23:24,894 - app - INFO - 路由: /users/<int:user_id> - 方法: {'GET', 'HEAD', 'OPTIONS'} - 终端: auth.get_user_by_id
2025-05-09 15:23:24,895 - app - INFO - 路由: /update_user/<int:user_id> - 方法: {'PUT', 'OPTIONS'} - 终端: auth.update_user
2025-05-09 15:23:24,895 - app - INFO - 路由: /roles - 方法: {'GET', 'HEAD', 'OPTIONS'} - 终端: auth.get_roles
2025-05-09 15:23:24,895 - app - INFO - 路由: /permissions - 方法: {'GET', 'HEAD', 'OPTIONS'} - 终端: auth.get_permissions
2025-05-09 15:23:24,896 - app - INFO - 路由: /permissions - 方法: {'POST', 'OPTIONS'} - 终端: auth.create_permission
2025-05-09 15:23:24,896 - app - INFO - 路由: /permissions/<int:permission_id> - 方法: {'GET', 'HEAD', 'OPTIONS'} - 终端: auth.get_permission
2025-05-09 15:23:24,896 - app - INFO - 路由: /permissions/<int:permission_id> - 方法: {'PUT', 'OPTIONS'} - 终端: auth.update_permission
2025-05-09 15:23:24,896 - app - INFO - 路由: /permissions/<int:permission_id> - 方法: {'DELETE', 'OPTIONS'} - 终端: auth.delete_permission
2025-05-09 15:23:24,896 - app - INFO - 路由: /roles - 方法: {'POST', 'OPTIONS'} - 终端: auth.create_role
2025-05-09 15:23:24,897 - app - INFO - 路由: /roles/<int:role_id> - 方法: {'GET', 'HEAD', 'OPTIONS'} - 终端: auth.get_role
2025-05-09 15:23:24,897 - app - INFO - 路由: /roles/<int:role_id>/permissions - 方法: {'PUT', 'OPTIONS'} - 终端: auth.update_role_permissions
2025-05-09 15:23:24,897 - app - INFO - 路由: /roles/<int:role_id> - 方法: {'DELETE', 'OPTIONS'} - 终端: auth.delete_role
2025-05-09 15:23:24,897 - app - INFO - 路由: /dashboard - 方法: {'GET', 'HEAD', 'OPTIONS'} - 终端: auth.dashboard
2025-05-09 15:23:24,897 - app - INFO - 路由: /dashboard/redirect - 方法: {'GET', 'POST', 'HEAD', 'OPTIONS'} - 终端: auth.dashboard_redirect
2025-05-09 15:23:24,898 - app - INFO - 路由: /create_test_user - 方法: {'POST', 'OPTIONS'} - 终端: auth.create_test_user
2025-05-09 15:23:24,898 - app - INFO - 路由: /check - 方法: {'GET', 'HEAD', 'OPTIONS'} - 终端: auth.check_auth
2025-05-09 15:23:24,898 - app - INFO - 路由: /create_test_project - 方法: {'POST', 'OPTIONS'} - 终端: auth.create_test_project
2025-05-09 15:23:24,898 - app - INFO - 路由: /logout_all - 方法: {'POST', 'OPTIONS'} - 终端: auth.logout_all
2025-05-09 15:23:24,898 - app - INFO - 路由: /dashboard/data - 方法: {'GET', 'HEAD', 'OPTIONS'} - 终端: auth.dashboard_data
2025-05-09 15:23:24,899 - app - INFO - 路由: /check_token - 方法: {'GET', 'HEAD', 'OPTIONS'} - 终端: auth.check_token
2025-05-09 15:23:24,899 - app - INFO - 路由: /create_user - 方法: {'POST', 'OPTIONS'} - 终端: auth.create_user
2025-05-09 15:23:24,899 - app - INFO - 路由: /user_info - 方法: {'GET', 'HEAD', 'OPTIONS'} - 终端: auth.get_user_info
2025-05-09 15:23:24,899 - app - INFO - 路由: /user/<int:user_id> - 方法: {'DELETE', 'OPTIONS'} - 终端: auth.delete_user
2025-05-09 15:23:24,900 - app - INFO - 路由: /users/<int:user_id>/roles - 方法: {'GET', 'HEAD', 'OPTIONS'} - 终端: auth.get_user_roles
2025-05-09 15:23:24,900 - app - INFO - 路由: /users/<int:user_id>/roles - 方法: {'PUT', 'OPTIONS'} - 终端: auth.update_user_roles
2025-05-09 15:23:24,900 - app - INFO - 路由: /users/<int:user_id>/notifications - 方法: {'GET', 'HEAD', 'OPTIONS'} - 终端: auth.get_user_notifications
2025-05-09 15:23:24,901 - app - INFO - 路由: /notifications/<int:notification_id>/read - 方法: {'PUT', 'OPTIONS'} - 终端: auth.mark_notification_as_read
2025-05-09 15:23:24,901 - app - INFO - 路由: /notifications/read_all - 方法: {'PUT', 'OPTIONS'} - 终端: auth.mark_all_notifications_as_read
2025-05-09 15:23:24,901 - app - INFO - 路由: /change-password - 方法: {'POST', 'OPTIONS'} - 终端: auth.change_password
2025-05-09 15:23:24,902 - app - INFO - 路由: /reset-password - 方法: {'GET', 'HEAD', 'OPTIONS'} - 终端: auth.reset_password_page
2025-05-09 15:23:24,902 - app - INFO - 路由: /verify-email/confirm - 方法: {'GET', 'HEAD', 'OPTIONS'} - 终端: auth.verify_email_confirm_page
2025-05-09 15:23:24,904 - app - INFO - 路由: /auth/csrf-token - 方法: {'GET', 'HEAD', 'OPTIONS'} - 终端: auth.get_csrf_token
2025-05-09 15:23:24,904 - app - INFO - 路由: /api/users/<int:user_id> - 方法: {'PUT', 'OPTIONS'} - 终端: auth.api_update_user
2025-05-09 15:23:24,904 - app - INFO - 路由: /api/users/<int:user_id> - 方法: {'DELETE', 'OPTIONS'} - 终端: auth.api_delete_user
2025-05-09 15:23:24,904 - app - INFO - 路由: /api/users - 方法: {'GET', 'HEAD', 'OPTIONS'} - 终端: auth.api_get_users
2025-05-09 15:23:24,904 - app - INFO - 路由: /api/users - 方法: {'POST', 'OPTIONS'} - 终端: auth.api_create_user
2025-05-09 15:23:24,905 - app - INFO - 路由: /auth/users/<int:user_id> - 方法: {'GET', 'HEAD', 'OPTIONS'} - 终端: auth.get_user_details
2025-05-09 15:23:24,905 - app - INFO - 路由: /api/users/<int:user_id> - 方法: {'DELETE', 'PUT', 'GET', 'HEAD', 'OPTIONS'} - 终端: auth.api_user_operations
2025-05-09 15:23:24,905 - app - INFO - 路由: /auth/user-csrf-token - 方法: {'GET', 'HEAD', 'OPTIONS'} - 终端: auth.get_user_csrf_token
2025-05-09 15:23:24,906 - app - INFO - 路由: /main/ - 方法: {'GET', 'HEAD', 'OPTIONS'} - 终端: main.index
2025-05-09 15:23:24,906 - app - INFO - 路由: /main/dashboard - 方法: {'GET', 'HEAD', 'OPTIONS'} - 终端: main.dashboard
2025-05-09 15:23:24,906 - app - INFO - 路由: /main/check_token - 方法: {'GET', 'HEAD', 'OPTIONS'} - 终端: main.check_token
2025-05-09 15:23:24,906 - app - INFO - 路由: /main/projects - 方法: {'GET', 'HEAD', 'OPTIONS'} - 终端: main.projects
2025-05-09 15:23:24,907 - app - INFO - 路由: /main/tasks - 方法: {'GET', 'HEAD', 'OPTIONS'} - 终端: main.tasks
2025-05-09 15:23:24,908 - app - INFO - 路由: /main/risks - 方法: {'GET', 'HEAD', 'OPTIONS'} - 终端: main.risks
2025-05-09 15:23:24,908 - app - INFO - 路由: /main/reports - 方法: {'GET', 'HEAD', 'OPTIONS'} - 终端: main.reports
2025-05-09 15:23:24,908 - app - INFO - 路由: /main/resources - 方法: {'GET', 'HEAD', 'OPTIONS'} - 终端: main.resources
2025-05-09 15:23:24,909 - app - INFO - 路由: /main/profile - 方法: {'GET', 'HEAD', 'OPTIONS'} - 终端: main.profile
2025-05-09 15:23:24,909 - app - INFO - 路由: /main/system/status - 方法: {'GET', 'HEAD', 'OPTIONS'} - 终端: main.system_status
2025-05-09 15:23:24,910 - app - INFO - 路由: /main/api/dashboard/data - 方法: {'GET', 'HEAD', 'OPTIONS'} - 终端: main.get_dashboard_data
2025-05-09 15:23:24,910 - app - INFO - 路由: /main/test - 方法: {'GET', 'HEAD', 'OPTIONS'} - 终端: main.test_route
2025-05-09 15:23:24,910 - app - INFO - 路由: /main/projects/detail/<int:project_id> - 方法: {'GET', 'HEAD', 'OPTIONS'} - 终端: main.project_detail_redirect
2025-05-09 15:23:24,911 - app - INFO - 路由: /main/users - 方法: {'GET', 'HEAD', 'OPTIONS'} - 终端: main.users
2025-05-09 15:23:24,911 - app - INFO - 路由: /main/debug/projects - 方法: {'GET', 'HEAD', 'OPTIONS'} - 终端: main.debug_projects
2025-05-09 15:23:24,912 - app - INFO - 路由: /main/simple/projects - 方法: {'GET', 'HEAD', 'OPTIONS'} - 终端: main.simple_projects
2025-05-09 15:23:24,912 - app - INFO - 路由: /main/static-test - 方法: {'GET', 'HEAD', 'OPTIONS'} - 终端: main.static_test
2025-05-09 15:23:24,912 - app - INFO - 路由: /main/print-projects - 方法: {'GET', 'HEAD', 'OPTIONS'} - 终端: main.print_projects
2025-05-09 15:23:24,912 - app - INFO - 路由: /main/bypass-projects - 方法: {'GET', 'HEAD', 'OPTIONS'} - 终端: main.bypass_projects
2025-05-09 15:23:24,912 - app - INFO - 路由: /main/debug-projects - 方法: {'GET', 'HEAD', 'OPTIONS'} - 终端: main.debug_projects_api
2025-05-09 15:23:24,913 - app - INFO - 路由: /projects/list - 方法: {'GET', 'HEAD', 'OPTIONS'} - 终端: projects.project_list
2025-05-09 15:23:24,913 - app - INFO - 路由: /projects/ - 方法: {'GET', 'HEAD', 'OPTIONS'} - 终端: projects.get_projects
2025-05-09 15:23:24,913 - app - INFO - 路由: /projects/ - 方法: {'POST', 'OPTIONS'} - 终端: projects.create_project
2025-05-09 15:23:24,913 - app - INFO - 路由: /projects/<int:project_id> - 方法: {'GET', 'HEAD', 'OPTIONS'} - 终端: projects.get_project
2025-05-09 15:23:24,915 - app - INFO - 路由: /projects/<int:project_id> - 方法: {'PUT', 'OPTIONS'} - 终端: projects.update_project
2025-05-09 15:23:24,915 - app - INFO - 路由: /projects/<int:project_id> - 方法: {'DELETE', 'OPTIONS'} - 终端: projects.delete_project
2025-05-09 15:23:24,915 - app - INFO - 路由: /projects/<int:project_id>/members - 方法: {'GET', 'HEAD', 'OPTIONS'} - 终端: projects.get_project_members
2025-05-09 15:23:24,915 - app - INFO - 路由: /projects/<int:project_id>/members - 方法: {'POST', 'OPTIONS'} - 终端: projects.add_project_member
2025-05-09 15:23:24,916 - app - INFO - 路由: /projects/<int:project_id>/members/<int:user_id> - 方法: {'DELETE', 'OPTIONS'} - 终端: projects.remove_project_member
2025-05-09 15:23:24,916 - app - INFO - 路由: /projects/detail/<int:project_id> - 方法: {'GET', 'HEAD', 'OPTIONS'} - 终端: projects.detail
2025-05-09 15:23:24,916 - app - INFO - 路由: /projects/api/detail/<int:project_id> - 方法: {'GET', 'HEAD', 'OPTIONS'} - 终端: projects.detail_api
2025-05-09 15:23:24,916 - app - INFO - 路由: /projects/api/projects/<int:project_id> - 方法: {'GET', 'HEAD', 'OPTIONS'} - 终端: projects.get_project_api
2025-05-09 15:23:24,916 - app - INFO - 路由: /projects/api/projects/<int:project_id> - 方法: {'PUT', 'OPTIONS'} - 终端: projects.update_project_api
2025-05-09 15:23:24,917 - app - INFO - 路由: /projects/api/projects/<int:project_id> - 方法: {'DELETE', 'OPTIONS'} - 终端: projects.delete_project_api
2025-05-09 15:23:24,917 - app - INFO - 路由: /projects/api/auth/projects - 方法: {'GET', 'HEAD', 'OPTIONS'} - 终端: projects.get_projects_api
2025-05-09 15:23:24,917 - app - INFO - 路由: /projects/api/auth/projects/<int:project_id> - 方法: {'GET', 'HEAD', 'OPTIONS'} - 终端: projects.get_project_auth_api
2025-05-09 15:23:24,918 - app - INFO - 路由: /projects/api/noauth/projects/<int:project_id> - 方法: {'DELETE', 'PUT', 'GET', 'HEAD', 'OPTIONS'} - 终端: projects.get_project_noauth
2025-05-09 15:23:24,918 - app - INFO - 路由: /projects/api/auth/projects - 方法: {'POST', 'OPTIONS'} - 终端: projects.create_project_auth
2025-05-09 15:23:24,919 - app - INFO - 路由: /projects/api/project-managers - 方法: {'GET', 'HEAD', 'OPTIONS'} - 终端: projects.get_project_managers
2025-05-09 15:23:24,919 - app - INFO - 路由: /projects/api/projects - 方法: {'GET', 'HEAD', 'OPTIONS'} - 终端: projects.get_all_projects_api
2025-05-09 15:23:24,919 - app - INFO - 路由: /projects/api/active-projects - 方法: {'GET', 'HEAD', 'OPTIONS'} - 终端: projects.get_active_projects_api
2025-05-09 15:23:24,919 - app - INFO - 路由: /projects/api/projects/<int:project_id>/members - 方法: {'GET', 'HEAD', 'OPTIONS'} - 终端: projects.get_project_members_api
2025-05-09 15:23:24,920 - app - INFO - 路由: /list - 方法: {'GET', 'HEAD', 'OPTIONS'} - 终端: project_root.project_list
2025-05-09 15:23:24,920 - app - INFO - 路由: / - 方法: {'GET', 'HEAD', 'OPTIONS'} - 终端: project_root.get_projects
2025-05-09 15:23:24,920 - app - INFO - 路由: / - 方法: {'POST', 'OPTIONS'} - 终端: project_root.create_project
2025-05-09 15:23:24,921 - app - INFO - 路由: /<int:project_id> - 方法: {'GET', 'HEAD', 'OPTIONS'} - 终端: project_root.get_project
2025-05-09 15:23:24,921 - app - INFO - 路由: /<int:project_id> - 方法: {'PUT', 'OPTIONS'} - 终端: project_root.update_project
2025-05-09 15:23:24,921 - app - INFO - 路由: /<int:project_id> - 方法: {'DELETE', 'OPTIONS'} - 终端: project_root.delete_project
2025-05-09 15:23:24,921 - app - INFO - 路由: /<int:project_id>/members - 方法: {'GET', 'HEAD', 'OPTIONS'} - 终端: project_root.get_project_members
2025-05-09 15:23:24,922 - app - INFO - 路由: /<int:project_id>/members - 方法: {'POST', 'OPTIONS'} - 终端: project_root.add_project_member
2025-05-09 15:23:24,922 - app - INFO - 路由: /<int:project_id>/members/<int:user_id> - 方法: {'DELETE', 'OPTIONS'} - 终端: project_root.remove_project_member
2025-05-09 15:23:24,922 - app - INFO - 路由: /detail/<int:project_id> - 方法: {'GET', 'HEAD', 'OPTIONS'} - 终端: project_root.detail
2025-05-09 15:23:24,923 - app - INFO - 路由: /api/detail/<int:project_id> - 方法: {'GET', 'HEAD', 'OPTIONS'} - 终端: project_root.detail_api
2025-05-09 15:23:24,923 - app - INFO - 路由: /api/projects/<int:project_id> - 方法: {'GET', 'HEAD', 'OPTIONS'} - 终端: project_root.get_project_api
2025-05-09 15:23:24,925 - app - INFO - 路由: /api/projects/<int:project_id> - 方法: {'PUT', 'OPTIONS'} - 终端: project_root.update_project_api
2025-05-09 15:23:24,925 - app - INFO - 路由: /api/projects/<int:project_id> - 方法: {'DELETE', 'OPTIONS'} - 终端: project_root.delete_project_api
2025-05-09 15:23:24,925 - app - INFO - 路由: /api/auth/projects - 方法: {'GET', 'HEAD', 'OPTIONS'} - 终端: project_root.get_projects_api
2025-05-09 15:23:24,926 - app - INFO - 路由: /api/auth/projects/<int:project_id> - 方法: {'GET', 'HEAD', 'OPTIONS'} - 终端: project_root.get_project_auth_api
2025-05-09 15:23:24,926 - app - INFO - 路由: /api/noauth/projects/<int:project_id> - 方法: {'DELETE', 'PUT', 'GET', 'HEAD', 'OPTIONS'} - 终端: project_root.get_project_noauth
2025-05-09 15:23:24,926 - app - INFO - 路由: /api/auth/projects - 方法: {'POST', 'OPTIONS'} - 终端: project_root.create_project_auth
2025-05-09 15:23:24,927 - app - INFO - 路由: /api/project-managers - 方法: {'GET', 'HEAD', 'OPTIONS'} - 终端: project_root.get_project_managers
2025-05-09 15:23:24,927 - app - INFO - 路由: /api/projects - 方法: {'GET', 'HEAD', 'OPTIONS'} - 终端: project_root.get_all_projects_api
2025-05-09 15:23:24,927 - app - INFO - 路由: /api/active-projects - 方法: {'GET', 'HEAD', 'OPTIONS'} - 终端: project_root.get_active_projects_api
2025-05-09 15:23:24,927 - app - INFO - 路由: /api/projects/<int:project_id>/members - 方法: {'GET', 'HEAD', 'OPTIONS'} - 终端: project_root.get_project_members_api
2025-05-09 15:23:24,927 - app - INFO - 路由: /tasks/ - 方法: {'GET', 'HEAD', 'OPTIONS'} - 终端: tasks.get_tasks
2025-05-09 15:23:24,928 - app - INFO - 路由: /tasks/ - 方法: {'POST', 'OPTIONS'} - 终端: tasks.create_task
2025-05-09 15:23:24,928 - app - INFO - 路由: /tasks/<int:task_id> - 方法: {'GET', 'HEAD', 'OPTIONS'} - 终端: tasks.get_task
2025-05-09 15:23:24,928 - app - INFO - 路由: /tasks/<int:task_id> - 方法: {'PUT', 'OPTIONS'} - 终端: tasks.update_task
2025-05-09 15:23:24,929 - app - INFO - 路由: /tasks/<int:task_id> - 方法: {'DELETE', 'OPTIONS'} - 终端: tasks.delete_task
2025-05-09 15:23:24,929 - app - INFO - 路由: /tasks/<int:task_id>/comments - 方法: {'GET', 'HEAD', 'OPTIONS'} - 终端: tasks.get_task_comments
2025-05-09 15:23:24,929 - app - INFO - 路由: /tasks/<int:task_id>/comments - 方法: {'POST', 'OPTIONS'} - 终端: tasks.add_task_comment
2025-05-09 15:23:24,929 - app - INFO - 路由: /tasks/<int:task_id>/attachments - 方法: {'GET', 'HEAD', 'OPTIONS'} - 终端: tasks.get_task_attachments
2025-05-09 15:23:24,929 - app - INFO - 路由: /tasks/<int:task_id>/attachments - 方法: {'POST', 'OPTIONS'} - 终端: tasks.add_task_attachment
2025-05-09 15:23:24,930 - app - INFO - 路由: /tasks/<int:task_id>/resources - 方法: {'GET', 'HEAD', 'OPTIONS'} - 终端: tasks.get_task_resources
2025-05-09 15:23:24,930 - app - INFO - 路由: /tasks/<int:task_id>/subtasks - 方法: {'GET', 'HEAD', 'OPTIONS'} - 终端: tasks.get_subtasks
2025-05-09 15:23:24,930 - app - INFO - 路由: /tasks/<int:task_id>/subtasks - 方法: {'POST', 'OPTIONS'} - 终端: tasks.create_subtask
2025-05-09 15:23:24,930 - app - INFO - 路由: /tasks/<int:task_id>/dependencies - 方法: {'GET', 'HEAD', 'OPTIONS'} - 终端: tasks.get_dependencies
2025-05-09 15:23:24,931 - app - INFO - 路由: /tasks/<int:task_id>/dependencies - 方法: {'POST', 'OPTIONS'} - 终端: tasks.add_dependency
2025-05-09 15:23:24,931 - app - INFO - 路由: /tasks/<int:task_id>/logs - 方法: {'GET', 'HEAD', 'OPTIONS'} - 终端: tasks.get_task_logs
2025-05-09 15:23:24,931 - app - INFO - 路由: /tasks/<int:task_id>/logs - 方法: {'POST', 'OPTIONS'} - 终端: tasks.add_task_log
2025-05-09 15:23:24,931 - app - INFO - 路由: /tasks/project/<int:project_id>/gantt - 方法: {'GET', 'HEAD', 'OPTIONS'} - 终端: tasks.gantt_chart
2025-05-09 15:23:24,932 - app - INFO - 路由: /tasks/project/<int:project_id>/gantt/data - 方法: {'GET', 'HEAD', 'OPTIONS'} - 终端: tasks.get_gantt_data
2025-05-09 15:23:24,932 - app - INFO - 路由: /tasks/<int:task_id>/gantt - 方法: {'PUT', 'OPTIONS'} - 终端: tasks.update_gantt_task
2025-05-09 15:23:24,932 - app - INFO - 路由: /tasks/dependencies/gantt - 方法: {'POST', 'OPTIONS'} - 终端: tasks.create_gantt_dependency
2025-05-09 15:23:24,932 - app - INFO - 路由: /tasks/<int:task_id>/dependencies/<int:dependency_id>/gantt - 方法: {'DELETE', 'OPTIONS'} - 终端: tasks.delete_gantt_dependency
2025-05-09 15:23:24,932 - app - INFO - 路由: /tasks/<int:task_id>/status - 方法: {'PUT', 'OPTIONS'} - 终端: tasks.update_task_status
2025-05-09 15:23:24,933 - app - INFO - 路由: /tasks/api/tasks/dependencies - 方法: {'POST', 'OPTIONS'} - 终端: tasks.add_task_dependency
2025-05-09 15:23:24,933 - app - INFO - 路由: /tasks/<int:task_id>/detail - 方法: {'GET', 'HEAD', 'OPTIONS'} - 终端: tasks.task_detail_api
2025-05-09 15:23:24,933 - app - INFO - 路由: /tasks/api/auth/tasks/<int:task_id>/detail - 方法: {'GET', 'HEAD', 'OPTIONS'} - 终端: tasks.task_detail_api_auth
2025-05-09 15:23:24,933 - app - INFO - 路由: /tasks/<int:task_id>/view - 方法: {'GET', 'HEAD', 'OPTIONS'} - 终端: tasks.task_detail_page
2025-05-09 15:23:24,933 - app - INFO - 路由: /tasks/<int:task_id>/edit - 方法: {'GET', 'HEAD', 'OPTIONS'} - 终端: tasks.edit_task_page
2025-05-09 15:23:24,934 - app - INFO - 路由: /tasks/api/auth/tasks/<int:task_id>/attachments - 方法: {'POST', 'OPTIONS'} - 终端: tasks.add_task_attachment_auth
2025-05-09 15:23:24,934 - app - INFO - 路由: /tasks/api/auth/tasks/<int:task_id>/attachments/<int:attachment_id>/download - 方法: {'GET', 'HEAD', 'OPTIONS'} - 终端: tasks.download_attachment_auth
2025-05-09 15:23:24,934 - app - INFO - 路由: /tasks/api/tasks/<int:task_id>/attachments - 方法: {'POST', 'OPTIONS'} - 终端: tasks.upload_attachment
2025-05-09 15:23:24,936 - app - INFO - 路由: /tasks/api/tasks/<int:task_id>/attachments/<int:attachment_id>/download - 方法: {'GET', 'HEAD', 'OPTIONS'} - 终端: tasks.download_attachment
2025-05-09 15:23:24,936 - app - INFO - 路由: /tasks/api/tasks/<int:task_id>/attachments/<int:attachment_id> - 方法: {'DELETE', 'OPTIONS'} - 终端: tasks.delete_attachment
2025-05-09 15:23:24,936 - app - INFO - 路由: /tasks/api/tasks/<int:task_id>/attachments/<int:attachment_id>/versions - 方法: {'POST', 'OPTIONS'} - 终端: tasks.upload_new_version
2025-05-09 15:23:24,937 - app - INFO - 路由: /tasks/api/tasks/<int:task_id>/attachments/<int:attachment_id>/versions - 方法: {'GET', 'HEAD', 'OPTIONS'} - 终端: tasks.get_attachment_versions
2025-05-09 15:23:24,937 - app - INFO - 路由: /tasks/api/tasks/<int:task_id>/risks - 方法: {'GET', 'HEAD', 'OPTIONS'} - 终端: tasks.task_risks_front_path
2025-05-09 15:23:24,937 - app - INFO - 路由: /tasks/<int:task_id>/risks - 方法: {'POST', 'OPTIONS'} - 终端: tasks.create_task_risk_front_path
2025-05-09 15:23:24,937 - app - INFO - 路由: /tasks/api/tasks/<int:task_id>/progress - 方法: {'GET', 'HEAD', 'OPTIONS'} - 终端: tasks.get_task_progress
2025-05-09 15:23:24,938 - app - INFO - 路由: /tasks/api/tasks/<int:task_id>/progress - 方法: {'POST', 'OPTIONS'} - 终端: tasks.update_task_progress
2025-05-09 15:23:24,938 - app - INFO - 路由: /tasks/api/tasks/<int:task_id>/progress/approve - 方法: {'POST', 'OPTIONS'} - 终端: tasks.approve_task_progress
2025-05-09 15:23:24,939 - app - INFO - 路由: /tasks/list - 方法: {'GET', 'HEAD', 'OPTIONS'} - 终端: tasks.task_list
2025-05-09 15:23:24,939 - app - INFO - 路由: /tasks/api/auth/tasks/<int:task_id>/logs - 方法: {'GET', 'HEAD', 'OPTIONS'} - 终端: tasks.get_task_logs_auth
2025-05-09 15:23:24,939 - app - INFO - 路由: /tasks/api/auth/tasks/<int:task_id>/subtasks - 方法: {'GET', 'HEAD', 'OPTIONS'} - 终端: tasks.get_subtasks_auth
2025-05-09 15:23:24,940 - app - INFO - 路由: /tasks/api/auth/tasks/<int:task_id>/comments - 方法: {'GET', 'HEAD', 'OPTIONS'} - 终端: tasks.get_task_comments_auth
2025-05-09 15:23:24,940 - app - INFO - 路由: /tasks/api/auth/tasks/<int:task_id>/attachments - 方法: {'GET', 'HEAD', 'OPTIONS'} - 终端: tasks.get_task_attachments_auth
2025-05-09 15:23:24,940 - app - INFO - 路由: /tasks/api/auth/tasks/<int:task_id>/risks - 方法: {'GET', 'HEAD', 'OPTIONS'} - 终端: tasks.get_task_risks_auth
2025-05-09 15:23:24,941 - app - INFO - 路由: /tasks/api/auth/tasks/<int:task_id>/risks - 方法: {'POST', 'OPTIONS'} - 终端: tasks.create_task_risk_auth
2025-05-09 15:23:24,941 - app - INFO - 路由: /tasks/api/auth/tasks/<int:task_id>/comments - 方法: {'POST', 'OPTIONS'} - 终端: tasks.add_task_comment_auth
2025-05-09 15:23:24,941 - app - INFO - 路由: /tasks/api/tasks/<int:task_id> - 方法: {'PUT', 'OPTIONS'} - 终端: tasks.api_update_task
2025-05-09 15:23:24,941 - app - INFO - 路由: /tasks/api/tasks/<int:task_id>/update_bypass - 方法: {'PUT', 'OPTIONS'} - 终端: tasks.update_task_bypass_csrf
2025-05-09 15:23:24,942 - app - INFO - 路由: /tasks/get-csrf-token - 方法: {'GET', 'HEAD', 'OPTIONS'} - 终端: tasks.get_csrf_token
2025-05-09 15:23:24,942 - app - INFO - 路由: /tasks/api/tasks/<int:task_id>/no_csrf - 方法: {'PUT', 'OPTIONS'} - 终端: tasks.update_task_no_csrf
2025-05-09 15:23:24,942 - app - INFO - 路由: /tasks/api/tasks/<int:task_id>/detail - 方法: {'GET', 'HEAD', 'OPTIONS'} - 终端: tasks.api_tasks_detail
2025-05-09 15:23:25,011 - app - WARNING - team_bp 未定义或无法导入
2025-05-09 15:23:25,141 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-05-09 15:23:25,143 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions 
WHERE permissions.name = ?
 LIMIT ? OFFSET ?
2025-05-09 15:23:25,144 - sqlalchemy.engine.Engine - INFO - [generated in 0.00063s] ('manage_users', 1, 0)
2025-05-09 15:23:25,145 - app.utils.permissions - INFO - 更新权限: manage_users
2025-05-09 15:23:25,145 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions 
WHERE permissions.name = ?
 LIMIT ? OFFSET ?
2025-05-09 15:23:25,145 - sqlalchemy.engine.Engine - INFO - [cached since 0.002945s ago] ('manage_roles', 1, 0)
2025-05-09 15:23:25,146 - app.utils.permissions - INFO - 更新权限: manage_roles
2025-05-09 15:23:25,146 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions 
WHERE permissions.name = ?
 LIMIT ? OFFSET ?
2025-05-09 15:23:25,146 - sqlalchemy.engine.Engine - INFO - [cached since 0.00412s ago] ('manage_all_projects', 1, 0)
2025-05-09 15:23:25,148 - app.utils.permissions - INFO - 更新权限: manage_all_projects
2025-05-09 15:23:25,148 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions 
WHERE permissions.name = ?
 LIMIT ? OFFSET ?
2025-05-09 15:23:25,148 - sqlalchemy.engine.Engine - INFO - [cached since 0.005025s ago] ('manage_project', 1, 0)
2025-05-09 15:23:25,148 - app.utils.permissions - INFO - 更新权限: manage_project
2025-05-09 15:23:25,149 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions 
WHERE permissions.name = ?
 LIMIT ? OFFSET ?
2025-05-09 15:23:25,149 - sqlalchemy.engine.Engine - INFO - [cached since 0.006049s ago] ('manage_all_tasks', 1, 0)
2025-05-09 15:23:25,149 - app.utils.permissions - INFO - 更新权限: manage_all_tasks
2025-05-09 15:23:25,150 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions 
WHERE permissions.name = ?
 LIMIT ? OFFSET ?
2025-05-09 15:23:25,150 - sqlalchemy.engine.Engine - INFO - [cached since 0.007076s ago] ('manage_task', 1, 0)
2025-05-09 15:23:25,150 - app.utils.permissions - INFO - 更新权限: manage_task
2025-05-09 15:23:25,151 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions 
WHERE permissions.name = ?
 LIMIT ? OFFSET ?
2025-05-09 15:23:25,151 - sqlalchemy.engine.Engine - INFO - [cached since 0.008537s ago] ('view_project', 1, 0)
2025-05-09 15:23:25,152 - app.utils.permissions - INFO - 更新权限: view_project
2025-05-09 15:23:25,152 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions 
WHERE permissions.name = ?
 LIMIT ? OFFSET ?
2025-05-09 15:23:25,153 - sqlalchemy.engine.Engine - INFO - [cached since 0.009931s ago] ('view_task', 1, 0)
2025-05-09 15:23:25,153 - app.utils.permissions - INFO - 更新权限: view_task
2025-05-09 15:23:25,154 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions 
WHERE permissions.name = ?
 LIMIT ? OFFSET ?
2025-05-09 15:23:25,154 - sqlalchemy.engine.Engine - INFO - [cached since 0.01175s ago] ('manage_resources', 1, 0)
2025-05-09 15:23:25,155 - app.utils.permissions - INFO - 更新权限: manage_resources
2025-05-09 15:23:25,155 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions 
WHERE permissions.name = ?
 LIMIT ? OFFSET ?
2025-05-09 15:23:25,155 - sqlalchemy.engine.Engine - INFO - [cached since 0.0126s ago] ('manage_risks', 1, 0)
2025-05-09 15:23:25,156 - app.utils.permissions - INFO - 更新权限: manage_risks
2025-05-09 15:23:25,156 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions 
WHERE permissions.name = ?
 LIMIT ? OFFSET ?
2025-05-09 15:23:25,156 - sqlalchemy.engine.Engine - INFO - [cached since 0.0133s ago] ('view_reports', 1, 0)
2025-05-09 15:23:25,156 - app.utils.permissions - INFO - 更新权限: view_reports
2025-05-09 15:23:25,157 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions 
WHERE permissions.name = ?
 LIMIT ? OFFSET ?
2025-05-09 15:23:25,157 - sqlalchemy.engine.Engine - INFO - [cached since 0.01415s ago] ('create_task', 1, 0)
2025-05-09 15:23:25,157 - app.utils.permissions - INFO - 更新权限: create_task
2025-05-09 15:23:25,157 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions 
WHERE permissions.name = ?
 LIMIT ? OFFSET ?
2025-05-09 15:23:25,158 - sqlalchemy.engine.Engine - INFO - [cached since 0.01501s ago] ('create_project', 1, 0)
2025-05-09 15:23:25,158 - app.utils.permissions - INFO - 更新权限: create_project
2025-05-09 15:23:25,158 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions 
WHERE permissions.name = ?
 LIMIT ? OFFSET ?
2025-05-09 15:23:25,158 - sqlalchemy.engine.Engine - INFO - [cached since 0.01576s ago] ('assign_task', 1, 0)
2025-05-09 15:23:25,159 - app.utils.permissions - INFO - 更新权限: assign_task
2025-05-09 15:23:25,159 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions 
WHERE permissions.name = ?
 LIMIT ? OFFSET ?
2025-05-09 15:23:25,159 - sqlalchemy.engine.Engine - INFO - [cached since 0.01647s ago] ('change_project_status', 1, 0)
2025-05-09 15:23:25,159 - app.utils.permissions - INFO - 更新权限: change_project_status
2025-05-09 15:23:25,160 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions 
WHERE permissions.name = ?
 LIMIT ? OFFSET ?
2025-05-09 15:23:25,160 - sqlalchemy.engine.Engine - INFO - [cached since 0.01715s ago] ('change_task_status', 1, 0)
2025-05-09 15:23:25,160 - app.utils.permissions - INFO - 更新权限: change_task_status
2025-05-09 15:23:25,160 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-05-09 15:23:25,161 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-05-09 15:23:25,161 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions
2025-05-09 15:23:25,161 - sqlalchemy.engine.Engine - INFO - [generated in 0.00024s] ()
2025-05-09 15:23:25,162 - sqlalchemy.engine.Engine - INFO - SELECT roles.id AS roles_id, roles.name AS roles_name, roles.description AS roles_description, roles.created_at AS roles_created_at 
FROM roles 
WHERE roles.name = ?
 LIMIT ? OFFSET ?
2025-05-09 15:23:25,163 - sqlalchemy.engine.Engine - INFO - [generated in 0.00031s] ('admin', 1, 0)
2025-05-09 15:23:25,163 - app.utils.permissions - INFO - 更新角色: admin
2025-05-09 15:23:25,164 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions, role_permissions 
WHERE ? = role_permissions.role_id AND permissions.id = role_permissions.permission_id
2025-05-09 15:23:25,165 - sqlalchemy.engine.Engine - INFO - [generated in 0.00027s] (1,)
2025-05-09 15:23:25,165 - app.utils.permissions - INFO - 为管理员角色添加所有权限: 16个
2025-05-09 15:23:25,165 - sqlalchemy.engine.Engine - INFO - SELECT roles.id AS roles_id, roles.name AS roles_name, roles.description AS roles_description, roles.created_at AS roles_created_at 
FROM roles 
WHERE roles.name = ?
 LIMIT ? OFFSET ?
2025-05-09 15:23:25,166 - sqlalchemy.engine.Engine - INFO - [cached since 0.003351s ago] ('manager', 1, 0)
2025-05-09 15:23:25,166 - app.utils.permissions - INFO - 更新角色: manager
2025-05-09 15:23:25,166 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions, role_permissions 
WHERE ? = role_permissions.role_id AND permissions.id = role_permissions.permission_id
2025-05-09 15:23:25,166 - sqlalchemy.engine.Engine - INFO - [cached since 0.002078s ago] (2,)
2025-05-09 15:23:25,168 - app.utils.permissions - INFO - 为角色 manager 添加权限: manage_project
2025-05-09 15:23:25,168 - app.utils.permissions - INFO - 为角色 manager 添加权限: manage_task
2025-05-09 15:23:25,168 - app.utils.permissions - INFO - 为角色 manager 添加权限: view_project
2025-05-09 15:23:25,168 - app.utils.permissions - INFO - 为角色 manager 添加权限: view_task
2025-05-09 15:23:25,169 - app.utils.permissions - INFO - 为角色 manager 添加权限: manage_resources
2025-05-09 15:23:25,169 - app.utils.permissions - INFO - 为角色 manager 添加权限: manage_risks
2025-05-09 15:23:25,169 - app.utils.permissions - INFO - 为角色 manager 添加权限: view_reports
2025-05-09 15:23:25,169 - app.utils.permissions - INFO - 为角色 manager 添加权限: create_project
2025-05-09 15:23:25,169 - app.utils.permissions - INFO - 为角色 manager 添加权限: create_task
2025-05-09 15:23:25,170 - app.utils.permissions - INFO - 为角色 manager 添加权限: assign_task
2025-05-09 15:23:25,170 - app.utils.permissions - INFO - 为角色 manager 添加权限: change_project_status
2025-05-09 15:23:25,170 - app.utils.permissions - INFO - 为角色 manager 添加权限: change_task_status
2025-05-09 15:23:25,171 - sqlalchemy.engine.Engine - INFO - SELECT roles.id AS roles_id, roles.name AS roles_name, roles.description AS roles_description, roles.created_at AS roles_created_at 
FROM roles 
WHERE roles.name = ?
 LIMIT ? OFFSET ?
2025-05-09 15:23:25,171 - sqlalchemy.engine.Engine - INFO - [cached since 0.008108s ago] ('user', 1, 0)
2025-05-09 15:23:25,171 - app.utils.permissions - INFO - 更新角色: user
2025-05-09 15:23:25,171 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions, role_permissions 
WHERE ? = role_permissions.role_id AND permissions.id = role_permissions.permission_id
2025-05-09 15:23:25,172 - sqlalchemy.engine.Engine - INFO - [cached since 0.007166s ago] (5,)
2025-05-09 15:23:25,172 - app.utils.permissions - INFO - 为角色 user 添加权限: view_project
2025-05-09 15:23:25,172 - app.utils.permissions - INFO - 为角色 user 添加权限: view_task
2025-05-09 15:23:25,172 - app.utils.permissions - INFO - 为角色 user 添加权限: view_reports
2025-05-09 15:23:25,173 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-05-09 15:23:25,173 - app.utils.permissions - INFO - 角色和权限初始化完成
2025-05-09 15:23:25,173 - __main__ - INFO - 角色和权限初始化成功
2025-05-09 15:23:25,174 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-05-09 15:23:25,174 - sqlalchemy.engine.Engine - INFO - SELECT users.id AS users_id, users.username AS users_username, users.email AS users_email, users.name AS users_name, users.password_hash AS users_password_hash, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.last_login AS users_last_login 
FROM users 
WHERE users.username = ?
 LIMIT ? OFFSET ?
2025-05-09 15:23:25,176 - sqlalchemy.engine.Engine - INFO - [generated in 0.00030s] ('system', 1, 0)
2025-05-09 15:23:25,177 - sqlalchemy.engine.Engine - INFO - SELECT projects.id AS projects_id, projects.name AS projects_name, projects.description AS projects_description, projects.status AS projects_status, projects.start_date AS projects_start_date, projects.end_date AS projects_end_date, projects.progress AS projects_progress, projects.created_at AS projects_created_at, projects.updated_at AS projects_updated_at, projects.manager_id AS projects_manager_id, projects.owner_id AS projects_owner_id 
FROM projects 
WHERE projects.name = ?
 LIMIT ? OFFSET ?
2025-05-09 15:23:25,177 - sqlalchemy.engine.Engine - INFO - [generated in 0.00028s] ('Test Project', 1, 0)
2025-05-09 15:23:25,177 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-05-09 15:23:25,178 - __main__ - INFO - 数据库初始化完成
2025-05-09 15:23:25,178 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-05-09 15:23:25,178 - sqlalchemy.engine.Engine - INFO - SELECT users.id AS users_id, users.username AS users_username, users.email AS users_email, users.name AS users_name, users.password_hash AS users_password_hash, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.last_login AS users_last_login 
FROM users 
WHERE users.username = ?
 LIMIT ? OFFSET ?
2025-05-09 15:23:25,178 - sqlalchemy.engine.Engine - INFO - [cached since 0.003153s ago] ('system', 1, 0)
2025-05-09 15:23:25,183 - sqlalchemy.engine.Engine - INFO - INSERT INTO resource_usages (user_id, cpu_usage, memory_usage, disk_usage, network_usage, recorded_at) VALUES (?, ?, ?, ?, ?, ?)
2025-05-09 15:23:25,183 - sqlalchemy.engine.Engine - INFO - [generated in 0.00035s] (2, 19.8, 52.4, 10.9, 0.0, '2025-05-09 07:23:25.182279')
2025-05-09 15:23:25,185 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-05-09 15:23:25,189 - __main__ - INFO - 系统资源检查完成
2025-05-09 15:23:25,190 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-05-09 15:23:25,191 - sqlalchemy.engine.Engine - INFO - DELETE FROM resource_usages WHERE resource_usages.recorded_at < ?
2025-05-09 15:23:25,191 - sqlalchemy.engine.Engine - INFO - [generated in 0.00031s] ('2025-04-09 07:23:25.190470',)
2025-05-09 15:23:25,192 - sqlalchemy.engine.Engine - INFO - DELETE FROM system_alerts WHERE system_alerts.is_resolved = 1 AND system_alerts.created_at < ?
2025-05-09 15:23:25,192 - sqlalchemy.engine.Engine - INFO - [generated in 0.00026s] ('2025-05-02 07:23:25.191484',)
2025-05-09 15:23:25,192 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-05-09 15:23:25,192 - __main__ - INFO - 旧数据清理完成
2025-05-09 15:23:25,197 - werkzeug - WARNING -  * Debugger is active!
2025-05-09 15:23:25,199 - werkzeug - INFO -  * Debugger PIN: 670-037-726
2025-05-09 15:24:01,744 - app - INFO - File logging handler initialized successfully
2025-05-09 15:24:01,744 - app - INFO - Console logging handler initialized successfully
2025-05-09 15:24:01,745 - app - INFO - Application logging configuration completed
2025-05-09 15:24:01,745 - app - INFO - Development configuration initialized
2025-05-09 15:24:01,779 - app - INFO - Logging setup completed successfully
2025-05-09 15:24:02,039 - app - INFO - 已注册的路由:
2025-05-09 15:24:02,041 - app - INFO - 路由: /static/<path:filename> - 方法: {'GET', 'OPTIONS', 'HEAD'} - 终端: static
2025-05-09 15:24:02,041 - app - INFO - 路由: /api/users/<int:user_id> - 方法: {'HEAD', 'POST', 'PUT', 'GET', 'DELETE', 'OPTIONS'} - 终端: user_api_exempt.user_api_exempt_route
2025-05-09 15:24:02,041 - app - INFO - 路由: /api/users - 方法: {'HEAD', 'POST', 'PUT', 'GET', 'DELETE', 'OPTIONS'} - 终端: user_api_exempt.user_api_exempt_route
2025-05-09 15:24:02,041 - app - INFO - 路由: /tasks/<int:task_id>/dependencies/<int:dependency_id>/gantt - 方法: {'DELETE', 'OPTIONS'} - 终端: task_api_exempt.task_api_exempt_route
2025-05-09 15:24:02,042 - app - INFO - 路由: /tasks/<int:task_id>/gantt - 方法: {'OPTIONS', 'PUT'} - 终端: task_api_exempt.task_api_exempt_route
2025-05-09 15:24:02,042 - app - INFO - 路由: /tasks/project/<int:project_id>/gantt - 方法: {'GET', 'OPTIONS', 'HEAD'} - 终端: task_api_exempt.task_api_exempt_route
2025-05-09 15:24:02,042 - app - INFO - 路由: /tasks/project/<int:project_id>/gantt/data - 方法: {'GET', 'OPTIONS', 'HEAD'} - 终端: task_api_exempt.task_api_exempt_route
2025-05-09 15:24:02,042 - app - INFO - 路由: /api/tasks/<int:task_id>/no_csrf - 方法: {'HEAD', 'POST', 'PUT', 'GET', 'DELETE', 'OPTIONS'} - 终端: task_api_exempt.task_api_exempt_route
2025-05-09 15:24:02,042 - app - INFO - 路由: /api/tasks/<int:task_id> - 方法: {'HEAD', 'POST', 'PUT', 'GET', 'DELETE', 'OPTIONS'} - 终端: task_api_exempt.task_api_exempt_route
2025-05-09 15:24:02,043 - app - INFO - 路由: /tasks/dependencies/gantt - 方法: {'POST', 'OPTIONS'} - 终端: task_api_exempt.task_api_exempt_route
2025-05-09 15:24:02,043 - app - INFO - 路由: /api/tasks - 方法: {'HEAD', 'POST', 'PUT', 'GET', 'DELETE', 'OPTIONS'} - 终端: task_api_exempt.task_api_exempt_route
2025-05-09 15:24:02,043 - app - INFO - 路由: /login - 方法: {'GET', 'OPTIONS', 'HEAD'} - 终端: auth.login_page
2025-05-09 15:24:02,043 - app - INFO - 路由: /login - 方法: {'POST', 'OPTIONS'} - 终端: auth.login
2025-05-09 15:24:02,043 - app - INFO - 路由: /register - 方法: {'GET', 'OPTIONS', 'HEAD'} - 终端: auth.register_page
2025-05-09 15:24:02,044 - app - INFO - 路由: /register - 方法: {'POST', 'OPTIONS'} - 终端: auth.register
2025-05-09 15:24:02,044 - app - INFO - 路由: /logout - 方法: {'GET', 'POST', 'OPTIONS', 'HEAD'} - 终端: auth.logout
2025-05-09 15:24:02,044 - app - INFO - 路由: /refresh - 方法: {'POST', 'OPTIONS'} - 终端: auth.refresh
2025-05-09 15:24:02,044 - app - INFO - 路由: /profile - 方法: {'GET', 'OPTIONS', 'HEAD'} - 终端: auth.profile
2025-05-09 15:24:02,044 - app - INFO - 路由: /profile - 方法: {'OPTIONS', 'PUT'} - 终端: auth.update_profile
2025-05-09 15:24:02,044 - app - INFO - 路由: /users - 方法: {'GET', 'OPTIONS', 'HEAD'} - 终端: auth.get_users
2025-05-09 15:24:02,045 - app - INFO - 路由: /users/<int:user_id> - 方法: {'GET', 'OPTIONS', 'HEAD'} - 终端: auth.get_user_by_id
2025-05-09 15:24:02,045 - app - INFO - 路由: /update_user/<int:user_id> - 方法: {'OPTIONS', 'PUT'} - 终端: auth.update_user
2025-05-09 15:24:02,046 - app - INFO - 路由: /roles - 方法: {'GET', 'OPTIONS', 'HEAD'} - 终端: auth.get_roles
2025-05-09 15:24:02,046 - app - INFO - 路由: /permissions - 方法: {'GET', 'OPTIONS', 'HEAD'} - 终端: auth.get_permissions
2025-05-09 15:24:02,047 - app - INFO - 路由: /permissions - 方法: {'POST', 'OPTIONS'} - 终端: auth.create_permission
2025-05-09 15:24:02,047 - app - INFO - 路由: /permissions/<int:permission_id> - 方法: {'GET', 'OPTIONS', 'HEAD'} - 终端: auth.get_permission
2025-05-09 15:24:02,047 - app - INFO - 路由: /permissions/<int:permission_id> - 方法: {'OPTIONS', 'PUT'} - 终端: auth.update_permission
2025-05-09 15:24:02,048 - app - INFO - 路由: /permissions/<int:permission_id> - 方法: {'DELETE', 'OPTIONS'} - 终端: auth.delete_permission
2025-05-09 15:24:02,048 - app - INFO - 路由: /roles - 方法: {'POST', 'OPTIONS'} - 终端: auth.create_role
2025-05-09 15:24:02,048 - app - INFO - 路由: /roles/<int:role_id> - 方法: {'GET', 'OPTIONS', 'HEAD'} - 终端: auth.get_role
2025-05-09 15:24:02,049 - app - INFO - 路由: /roles/<int:role_id>/permissions - 方法: {'OPTIONS', 'PUT'} - 终端: auth.update_role_permissions
2025-05-09 15:24:02,049 - app - INFO - 路由: /roles/<int:role_id> - 方法: {'DELETE', 'OPTIONS'} - 终端: auth.delete_role
2025-05-09 15:24:02,049 - app - INFO - 路由: /dashboard - 方法: {'GET', 'OPTIONS', 'HEAD'} - 终端: auth.dashboard
2025-05-09 15:24:02,049 - app - INFO - 路由: /dashboard/redirect - 方法: {'GET', 'POST', 'OPTIONS', 'HEAD'} - 终端: auth.dashboard_redirect
2025-05-09 15:24:02,049 - app - INFO - 路由: /create_test_user - 方法: {'POST', 'OPTIONS'} - 终端: auth.create_test_user
2025-05-09 15:24:02,049 - app - INFO - 路由: /check - 方法: {'GET', 'OPTIONS', 'HEAD'} - 终端: auth.check_auth
2025-05-09 15:24:02,050 - app - INFO - 路由: /create_test_project - 方法: {'POST', 'OPTIONS'} - 终端: auth.create_test_project
2025-05-09 15:24:02,050 - app - INFO - 路由: /logout_all - 方法: {'POST', 'OPTIONS'} - 终端: auth.logout_all
2025-05-09 15:24:02,050 - app - INFO - 路由: /dashboard/data - 方法: {'GET', 'OPTIONS', 'HEAD'} - 终端: auth.dashboard_data
2025-05-09 15:24:02,051 - app - INFO - 路由: /check_token - 方法: {'GET', 'OPTIONS', 'HEAD'} - 终端: auth.check_token
2025-05-09 15:24:02,051 - app - INFO - 路由: /create_user - 方法: {'POST', 'OPTIONS'} - 终端: auth.create_user
2025-05-09 15:24:02,051 - app - INFO - 路由: /user_info - 方法: {'GET', 'OPTIONS', 'HEAD'} - 终端: auth.get_user_info
2025-05-09 15:24:02,052 - app - INFO - 路由: /user/<int:user_id> - 方法: {'DELETE', 'OPTIONS'} - 终端: auth.delete_user
2025-05-09 15:24:02,052 - app - INFO - 路由: /users/<int:user_id>/roles - 方法: {'GET', 'OPTIONS', 'HEAD'} - 终端: auth.get_user_roles
2025-05-09 15:24:02,052 - app - INFO - 路由: /users/<int:user_id>/roles - 方法: {'OPTIONS', 'PUT'} - 终端: auth.update_user_roles
2025-05-09 15:24:02,053 - app - INFO - 路由: /users/<int:user_id>/notifications - 方法: {'GET', 'OPTIONS', 'HEAD'} - 终端: auth.get_user_notifications
2025-05-09 15:24:02,053 - app - INFO - 路由: /notifications/<int:notification_id>/read - 方法: {'OPTIONS', 'PUT'} - 终端: auth.mark_notification_as_read
2025-05-09 15:24:02,053 - app - INFO - 路由: /notifications/read_all - 方法: {'OPTIONS', 'PUT'} - 终端: auth.mark_all_notifications_as_read
2025-05-09 15:24:02,054 - app - INFO - 路由: /change-password - 方法: {'POST', 'OPTIONS'} - 终端: auth.change_password
2025-05-09 15:24:02,054 - app - INFO - 路由: /reset-password - 方法: {'GET', 'OPTIONS', 'HEAD'} - 终端: auth.reset_password_page
2025-05-09 15:24:02,054 - app - INFO - 路由: /verify-email/confirm - 方法: {'GET', 'OPTIONS', 'HEAD'} - 终端: auth.verify_email_confirm_page
2025-05-09 15:24:02,055 - app - INFO - 路由: /auth/csrf-token - 方法: {'GET', 'OPTIONS', 'HEAD'} - 终端: auth.get_csrf_token
2025-05-09 15:24:02,055 - app - INFO - 路由: /api/users/<int:user_id> - 方法: {'OPTIONS', 'PUT'} - 终端: auth.api_update_user
2025-05-09 15:24:02,055 - app - INFO - 路由: /api/users/<int:user_id> - 方法: {'DELETE', 'OPTIONS'} - 终端: auth.api_delete_user
2025-05-09 15:24:02,055 - app - INFO - 路由: /api/users - 方法: {'GET', 'OPTIONS', 'HEAD'} - 终端: auth.api_get_users
2025-05-09 15:24:02,056 - app - INFO - 路由: /api/users - 方法: {'POST', 'OPTIONS'} - 终端: auth.api_create_user
2025-05-09 15:24:02,056 - app - INFO - 路由: /auth/users/<int:user_id> - 方法: {'GET', 'OPTIONS', 'HEAD'} - 终端: auth.get_user_details
2025-05-09 15:24:02,056 - app - INFO - 路由: /api/users/<int:user_id> - 方法: {'HEAD', 'PUT', 'GET', 'DELETE', 'OPTIONS'} - 终端: auth.api_user_operations
2025-05-09 15:24:02,057 - app - INFO - 路由: /auth/user-csrf-token - 方法: {'GET', 'OPTIONS', 'HEAD'} - 终端: auth.get_user_csrf_token
2025-05-09 15:24:02,057 - app - INFO - 路由: /main/ - 方法: {'GET', 'OPTIONS', 'HEAD'} - 终端: main.index
2025-05-09 15:24:02,057 - app - INFO - 路由: /main/dashboard - 方法: {'GET', 'OPTIONS', 'HEAD'} - 终端: main.dashboard
2025-05-09 15:24:02,057 - app - INFO - 路由: /main/check_token - 方法: {'GET', 'OPTIONS', 'HEAD'} - 终端: main.check_token
2025-05-09 15:24:02,057 - app - INFO - 路由: /main/projects - 方法: {'GET', 'OPTIONS', 'HEAD'} - 终端: main.projects
2025-05-09 15:24:02,057 - app - INFO - 路由: /main/tasks - 方法: {'GET', 'OPTIONS', 'HEAD'} - 终端: main.tasks
2025-05-09 15:24:02,058 - app - INFO - 路由: /main/risks - 方法: {'GET', 'OPTIONS', 'HEAD'} - 终端: main.risks
2025-05-09 15:24:02,058 - app - INFO - 路由: /main/reports - 方法: {'GET', 'OPTIONS', 'HEAD'} - 终端: main.reports
2025-05-09 15:24:02,058 - app - INFO - 路由: /main/resources - 方法: {'GET', 'OPTIONS', 'HEAD'} - 终端: main.resources
2025-05-09 15:24:02,058 - app - INFO - 路由: /main/profile - 方法: {'GET', 'OPTIONS', 'HEAD'} - 终端: main.profile
2025-05-09 15:24:02,058 - app - INFO - 路由: /main/system/status - 方法: {'GET', 'OPTIONS', 'HEAD'} - 终端: main.system_status
2025-05-09 15:24:02,059 - app - INFO - 路由: /main/api/dashboard/data - 方法: {'GET', 'OPTIONS', 'HEAD'} - 终端: main.get_dashboard_data
2025-05-09 15:24:02,059 - app - INFO - 路由: /main/test - 方法: {'GET', 'OPTIONS', 'HEAD'} - 终端: main.test_route
2025-05-09 15:24:02,059 - app - INFO - 路由: /main/projects/detail/<int:project_id> - 方法: {'GET', 'OPTIONS', 'HEAD'} - 终端: main.project_detail_redirect
2025-05-09 15:24:02,059 - app - INFO - 路由: /main/users - 方法: {'GET', 'OPTIONS', 'HEAD'} - 终端: main.users
2025-05-09 15:24:02,059 - app - INFO - 路由: /main/debug/projects - 方法: {'GET', 'OPTIONS', 'HEAD'} - 终端: main.debug_projects
2025-05-09 15:24:02,060 - app - INFO - 路由: /main/simple/projects - 方法: {'GET', 'OPTIONS', 'HEAD'} - 终端: main.simple_projects
2025-05-09 15:24:02,060 - app - INFO - 路由: /main/static-test - 方法: {'GET', 'OPTIONS', 'HEAD'} - 终端: main.static_test
2025-05-09 15:24:02,060 - app - INFO - 路由: /main/print-projects - 方法: {'GET', 'OPTIONS', 'HEAD'} - 终端: main.print_projects
2025-05-09 15:24:02,060 - app - INFO - 路由: /main/bypass-projects - 方法: {'GET', 'OPTIONS', 'HEAD'} - 终端: main.bypass_projects
2025-05-09 15:24:02,061 - app - INFO - 路由: /main/debug-projects - 方法: {'GET', 'OPTIONS', 'HEAD'} - 终端: main.debug_projects_api
2025-05-09 15:24:02,061 - app - INFO - 路由: /projects/list - 方法: {'GET', 'OPTIONS', 'HEAD'} - 终端: projects.project_list
2025-05-09 15:24:02,061 - app - INFO - 路由: /projects/ - 方法: {'GET', 'OPTIONS', 'HEAD'} - 终端: projects.get_projects
2025-05-09 15:24:02,061 - app - INFO - 路由: /projects/ - 方法: {'POST', 'OPTIONS'} - 终端: projects.create_project
2025-05-09 15:24:02,062 - app - INFO - 路由: /projects/<int:project_id> - 方法: {'GET', 'OPTIONS', 'HEAD'} - 终端: projects.get_project
2025-05-09 15:24:02,062 - app - INFO - 路由: /projects/<int:project_id> - 方法: {'OPTIONS', 'PUT'} - 终端: projects.update_project
2025-05-09 15:24:02,062 - app - INFO - 路由: /projects/<int:project_id> - 方法: {'DELETE', 'OPTIONS'} - 终端: projects.delete_project
2025-05-09 15:24:02,063 - app - INFO - 路由: /projects/<int:project_id>/members - 方法: {'GET', 'OPTIONS', 'HEAD'} - 终端: projects.get_project_members
2025-05-09 15:24:02,063 - app - INFO - 路由: /projects/<int:project_id>/members - 方法: {'POST', 'OPTIONS'} - 终端: projects.add_project_member
2025-05-09 15:24:02,063 - app - INFO - 路由: /projects/<int:project_id>/members/<int:user_id> - 方法: {'DELETE', 'OPTIONS'} - 终端: projects.remove_project_member
2025-05-09 15:24:02,064 - app - INFO - 路由: /projects/detail/<int:project_id> - 方法: {'GET', 'OPTIONS', 'HEAD'} - 终端: projects.detail
2025-05-09 15:24:02,064 - app - INFO - 路由: /projects/api/detail/<int:project_id> - 方法: {'GET', 'OPTIONS', 'HEAD'} - 终端: projects.detail_api
2025-05-09 15:24:02,064 - app - INFO - 路由: /projects/api/projects/<int:project_id> - 方法: {'GET', 'OPTIONS', 'HEAD'} - 终端: projects.get_project_api
2025-05-09 15:24:02,064 - app - INFO - 路由: /projects/api/projects/<int:project_id> - 方法: {'OPTIONS', 'PUT'} - 终端: projects.update_project_api
2025-05-09 15:24:02,065 - app - INFO - 路由: /projects/api/projects/<int:project_id> - 方法: {'DELETE', 'OPTIONS'} - 终端: projects.delete_project_api
2025-05-09 15:24:02,065 - app - INFO - 路由: /projects/api/auth/projects - 方法: {'GET', 'OPTIONS', 'HEAD'} - 终端: projects.get_projects_api
2025-05-09 15:24:02,065 - app - INFO - 路由: /projects/api/auth/projects/<int:project_id> - 方法: {'GET', 'OPTIONS', 'HEAD'} - 终端: projects.get_project_auth_api
2025-05-09 15:24:02,066 - app - INFO - 路由: /projects/api/noauth/projects/<int:project_id> - 方法: {'HEAD', 'PUT', 'GET', 'DELETE', 'OPTIONS'} - 终端: projects.get_project_noauth
2025-05-09 15:24:02,066 - app - INFO - 路由: /projects/api/auth/projects - 方法: {'POST', 'OPTIONS'} - 终端: projects.create_project_auth
2025-05-09 15:24:02,066 - app - INFO - 路由: /projects/api/project-managers - 方法: {'GET', 'OPTIONS', 'HEAD'} - 终端: projects.get_project_managers
2025-05-09 15:24:02,067 - app - INFO - 路由: /projects/api/projects - 方法: {'GET', 'OPTIONS', 'HEAD'} - 终端: projects.get_all_projects_api
2025-05-09 15:24:02,067 - app - INFO - 路由: /projects/api/active-projects - 方法: {'GET', 'OPTIONS', 'HEAD'} - 终端: projects.get_active_projects_api
2025-05-09 15:24:02,067 - app - INFO - 路由: /projects/api/projects/<int:project_id>/members - 方法: {'GET', 'OPTIONS', 'HEAD'} - 终端: projects.get_project_members_api
2025-05-09 15:24:02,068 - app - INFO - 路由: /list - 方法: {'GET', 'OPTIONS', 'HEAD'} - 终端: project_root.project_list
2025-05-09 15:24:02,068 - app - INFO - 路由: / - 方法: {'GET', 'OPTIONS', 'HEAD'} - 终端: project_root.get_projects
2025-05-09 15:24:02,069 - app - INFO - 路由: / - 方法: {'POST', 'OPTIONS'} - 终端: project_root.create_project
2025-05-09 15:24:02,069 - app - INFO - 路由: /<int:project_id> - 方法: {'GET', 'OPTIONS', 'HEAD'} - 终端: project_root.get_project
2025-05-09 15:24:02,069 - app - INFO - 路由: /<int:project_id> - 方法: {'OPTIONS', 'PUT'} - 终端: project_root.update_project
2025-05-09 15:24:02,071 - app - INFO - 路由: /<int:project_id> - 方法: {'DELETE', 'OPTIONS'} - 终端: project_root.delete_project
2025-05-09 15:24:02,071 - app - INFO - 路由: /<int:project_id>/members - 方法: {'GET', 'OPTIONS', 'HEAD'} - 终端: project_root.get_project_members
2025-05-09 15:24:02,072 - app - INFO - 路由: /<int:project_id>/members - 方法: {'POST', 'OPTIONS'} - 终端: project_root.add_project_member
2025-05-09 15:24:02,072 - app - INFO - 路由: /<int:project_id>/members/<int:user_id> - 方法: {'DELETE', 'OPTIONS'} - 终端: project_root.remove_project_member
2025-05-09 15:24:02,072 - app - INFO - 路由: /detail/<int:project_id> - 方法: {'GET', 'OPTIONS', 'HEAD'} - 终端: project_root.detail
2025-05-09 15:24:02,073 - app - INFO - 路由: /api/detail/<int:project_id> - 方法: {'GET', 'OPTIONS', 'HEAD'} - 终端: project_root.detail_api
2025-05-09 15:24:02,073 - app - INFO - 路由: /api/projects/<int:project_id> - 方法: {'GET', 'OPTIONS', 'HEAD'} - 终端: project_root.get_project_api
2025-05-09 15:24:02,074 - app - INFO - 路由: /api/projects/<int:project_id> - 方法: {'OPTIONS', 'PUT'} - 终端: project_root.update_project_api
2025-05-09 15:24:02,074 - app - INFO - 路由: /api/projects/<int:project_id> - 方法: {'DELETE', 'OPTIONS'} - 终端: project_root.delete_project_api
2025-05-09 15:24:02,074 - app - INFO - 路由: /api/auth/projects - 方法: {'GET', 'OPTIONS', 'HEAD'} - 终端: project_root.get_projects_api
2025-05-09 15:24:02,075 - app - INFO - 路由: /api/auth/projects/<int:project_id> - 方法: {'GET', 'OPTIONS', 'HEAD'} - 终端: project_root.get_project_auth_api
2025-05-09 15:24:02,075 - app - INFO - 路由: /api/noauth/projects/<int:project_id> - 方法: {'HEAD', 'PUT', 'GET', 'DELETE', 'OPTIONS'} - 终端: project_root.get_project_noauth
2025-05-09 15:24:02,075 - app - INFO - 路由: /api/auth/projects - 方法: {'POST', 'OPTIONS'} - 终端: project_root.create_project_auth
2025-05-09 15:24:02,076 - app - INFO - 路由: /api/project-managers - 方法: {'GET', 'OPTIONS', 'HEAD'} - 终端: project_root.get_project_managers
2025-05-09 15:24:02,076 - app - INFO - 路由: /api/projects - 方法: {'GET', 'OPTIONS', 'HEAD'} - 终端: project_root.get_all_projects_api
2025-05-09 15:24:02,077 - app - INFO - 路由: /api/active-projects - 方法: {'GET', 'OPTIONS', 'HEAD'} - 终端: project_root.get_active_projects_api
2025-05-09 15:24:02,077 - app - INFO - 路由: /api/projects/<int:project_id>/members - 方法: {'GET', 'OPTIONS', 'HEAD'} - 终端: project_root.get_project_members_api
2025-05-09 15:24:02,078 - app - INFO - 路由: /tasks/ - 方法: {'GET', 'OPTIONS', 'HEAD'} - 终端: tasks.get_tasks
2025-05-09 15:24:02,078 - app - INFO - 路由: /tasks/ - 方法: {'POST', 'OPTIONS'} - 终端: tasks.create_task
2025-05-09 15:24:02,078 - app - INFO - 路由: /tasks/<int:task_id> - 方法: {'GET', 'OPTIONS', 'HEAD'} - 终端: tasks.get_task
2025-05-09 15:24:02,078 - app - INFO - 路由: /tasks/<int:task_id> - 方法: {'OPTIONS', 'PUT'} - 终端: tasks.update_task
2025-05-09 15:24:02,079 - app - INFO - 路由: /tasks/<int:task_id> - 方法: {'DELETE', 'OPTIONS'} - 终端: tasks.delete_task
2025-05-09 15:24:02,079 - app - INFO - 路由: /tasks/<int:task_id>/comments - 方法: {'GET', 'OPTIONS', 'HEAD'} - 终端: tasks.get_task_comments
2025-05-09 15:24:02,081 - app - INFO - 路由: /tasks/<int:task_id>/comments - 方法: {'POST', 'OPTIONS'} - 终端: tasks.add_task_comment
2025-05-09 15:24:02,082 - app - INFO - 路由: /tasks/<int:task_id>/attachments - 方法: {'GET', 'OPTIONS', 'HEAD'} - 终端: tasks.get_task_attachments
2025-05-09 15:24:02,082 - app - INFO - 路由: /tasks/<int:task_id>/attachments - 方法: {'POST', 'OPTIONS'} - 终端: tasks.add_task_attachment
2025-05-09 15:24:02,082 - app - INFO - 路由: /tasks/<int:task_id>/resources - 方法: {'GET', 'OPTIONS', 'HEAD'} - 终端: tasks.get_task_resources
2025-05-09 15:24:02,082 - app - INFO - 路由: /tasks/<int:task_id>/subtasks - 方法: {'GET', 'OPTIONS', 'HEAD'} - 终端: tasks.get_subtasks
2025-05-09 15:24:02,083 - app - INFO - 路由: /tasks/<int:task_id>/subtasks - 方法: {'POST', 'OPTIONS'} - 终端: tasks.create_subtask
2025-05-09 15:24:02,083 - app - INFO - 路由: /tasks/<int:task_id>/dependencies - 方法: {'GET', 'OPTIONS', 'HEAD'} - 终端: tasks.get_dependencies
2025-05-09 15:24:02,084 - app - INFO - 路由: /tasks/<int:task_id>/dependencies - 方法: {'POST', 'OPTIONS'} - 终端: tasks.add_dependency
2025-05-09 15:24:02,084 - app - INFO - 路由: /tasks/<int:task_id>/logs - 方法: {'GET', 'OPTIONS', 'HEAD'} - 终端: tasks.get_task_logs
2025-05-09 15:24:02,084 - app - INFO - 路由: /tasks/<int:task_id>/logs - 方法: {'POST', 'OPTIONS'} - 终端: tasks.add_task_log
2025-05-09 15:24:02,086 - app - INFO - 路由: /tasks/project/<int:project_id>/gantt - 方法: {'GET', 'OPTIONS', 'HEAD'} - 终端: tasks.gantt_chart
2025-05-09 15:24:02,086 - app - INFO - 路由: /tasks/project/<int:project_id>/gantt/data - 方法: {'GET', 'OPTIONS', 'HEAD'} - 终端: tasks.get_gantt_data
2025-05-09 15:24:02,086 - app - INFO - 路由: /tasks/<int:task_id>/gantt - 方法: {'OPTIONS', 'PUT'} - 终端: tasks.update_gantt_task
2025-05-09 15:24:02,087 - app - INFO - 路由: /tasks/dependencies/gantt - 方法: {'POST', 'OPTIONS'} - 终端: tasks.create_gantt_dependency
2025-05-09 15:24:02,087 - app - INFO - 路由: /tasks/<int:task_id>/dependencies/<int:dependency_id>/gantt - 方法: {'DELETE', 'OPTIONS'} - 终端: tasks.delete_gantt_dependency
2025-05-09 15:24:02,087 - app - INFO - 路由: /tasks/<int:task_id>/status - 方法: {'OPTIONS', 'PUT'} - 终端: tasks.update_task_status
2025-05-09 15:24:02,087 - app - INFO - 路由: /tasks/api/tasks/dependencies - 方法: {'POST', 'OPTIONS'} - 终端: tasks.add_task_dependency
2025-05-09 15:24:02,088 - app - INFO - 路由: /tasks/<int:task_id>/detail - 方法: {'GET', 'OPTIONS', 'HEAD'} - 终端: tasks.task_detail_api
2025-05-09 15:24:02,088 - app - INFO - 路由: /tasks/api/auth/tasks/<int:task_id>/detail - 方法: {'GET', 'OPTIONS', 'HEAD'} - 终端: tasks.task_detail_api_auth
2025-05-09 15:24:02,088 - app - INFO - 路由: /tasks/<int:task_id>/view - 方法: {'GET', 'OPTIONS', 'HEAD'} - 终端: tasks.task_detail_page
2025-05-09 15:24:02,089 - app - INFO - 路由: /tasks/<int:task_id>/edit - 方法: {'GET', 'OPTIONS', 'HEAD'} - 终端: tasks.edit_task_page
2025-05-09 15:24:02,090 - app - INFO - 路由: /tasks/api/auth/tasks/<int:task_id>/attachments - 方法: {'POST', 'OPTIONS'} - 终端: tasks.add_task_attachment_auth
2025-05-09 15:24:02,090 - app - INFO - 路由: /tasks/api/auth/tasks/<int:task_id>/attachments/<int:attachment_id>/download - 方法: {'GET', 'OPTIONS', 'HEAD'} - 终端: tasks.download_attachment_auth
2025-05-09 15:24:02,091 - app - INFO - 路由: /tasks/api/tasks/<int:task_id>/attachments - 方法: {'POST', 'OPTIONS'} - 终端: tasks.upload_attachment
2025-05-09 15:24:02,091 - app - INFO - 路由: /tasks/api/tasks/<int:task_id>/attachments/<int:attachment_id>/download - 方法: {'GET', 'OPTIONS', 'HEAD'} - 终端: tasks.download_attachment
2025-05-09 15:24:02,091 - app - INFO - 路由: /tasks/api/tasks/<int:task_id>/attachments/<int:attachment_id> - 方法: {'DELETE', 'OPTIONS'} - 终端: tasks.delete_attachment
2025-05-09 15:24:02,092 - app - INFO - 路由: /tasks/api/tasks/<int:task_id>/attachments/<int:attachment_id>/versions - 方法: {'POST', 'OPTIONS'} - 终端: tasks.upload_new_version
2025-05-09 15:24:02,092 - app - INFO - 路由: /tasks/api/tasks/<int:task_id>/attachments/<int:attachment_id>/versions - 方法: {'GET', 'OPTIONS', 'HEAD'} - 终端: tasks.get_attachment_versions
2025-05-09 15:24:02,093 - app - INFO - 路由: /tasks/api/tasks/<int:task_id>/risks - 方法: {'GET', 'OPTIONS', 'HEAD'} - 终端: tasks.task_risks_front_path
2025-05-09 15:24:02,093 - app - INFO - 路由: /tasks/<int:task_id>/risks - 方法: {'POST', 'OPTIONS'} - 终端: tasks.create_task_risk_front_path
2025-05-09 15:24:02,093 - app - INFO - 路由: /tasks/api/tasks/<int:task_id>/progress - 方法: {'GET', 'OPTIONS', 'HEAD'} - 终端: tasks.get_task_progress
2025-05-09 15:24:02,094 - app - INFO - 路由: /tasks/api/tasks/<int:task_id>/progress - 方法: {'POST', 'OPTIONS'} - 终端: tasks.update_task_progress
2025-05-09 15:24:02,094 - app - INFO - 路由: /tasks/api/tasks/<int:task_id>/progress/approve - 方法: {'POST', 'OPTIONS'} - 终端: tasks.approve_task_progress
2025-05-09 15:24:02,094 - app - INFO - 路由: /tasks/list - 方法: {'GET', 'OPTIONS', 'HEAD'} - 终端: tasks.task_list
2025-05-09 15:24:02,094 - app - INFO - 路由: /tasks/api/auth/tasks/<int:task_id>/logs - 方法: {'GET', 'OPTIONS', 'HEAD'} - 终端: tasks.get_task_logs_auth
2025-05-09 15:24:02,095 - app - INFO - 路由: /tasks/api/auth/tasks/<int:task_id>/subtasks - 方法: {'GET', 'OPTIONS', 'HEAD'} - 终端: tasks.get_subtasks_auth
2025-05-09 15:24:02,095 - app - INFO - 路由: /tasks/api/auth/tasks/<int:task_id>/comments - 方法: {'GET', 'OPTIONS', 'HEAD'} - 终端: tasks.get_task_comments_auth
2025-05-09 15:24:02,095 - app - INFO - 路由: /tasks/api/auth/tasks/<int:task_id>/attachments - 方法: {'GET', 'OPTIONS', 'HEAD'} - 终端: tasks.get_task_attachments_auth
2025-05-09 15:24:02,096 - app - INFO - 路由: /tasks/api/auth/tasks/<int:task_id>/risks - 方法: {'GET', 'OPTIONS', 'HEAD'} - 终端: tasks.get_task_risks_auth
2025-05-09 15:24:02,096 - app - INFO - 路由: /tasks/api/auth/tasks/<int:task_id>/risks - 方法: {'POST', 'OPTIONS'} - 终端: tasks.create_task_risk_auth
2025-05-09 15:24:02,096 - app - INFO - 路由: /tasks/api/auth/tasks/<int:task_id>/comments - 方法: {'POST', 'OPTIONS'} - 终端: tasks.add_task_comment_auth
2025-05-09 15:24:02,097 - app - INFO - 路由: /tasks/api/tasks/<int:task_id> - 方法: {'OPTIONS', 'PUT'} - 终端: tasks.api_update_task
2025-05-09 15:24:02,097 - app - INFO - 路由: /tasks/api/tasks/<int:task_id>/update_bypass - 方法: {'OPTIONS', 'PUT'} - 终端: tasks.update_task_bypass_csrf
2025-05-09 15:24:02,097 - app - INFO - 路由: /tasks/get-csrf-token - 方法: {'GET', 'OPTIONS', 'HEAD'} - 终端: tasks.get_csrf_token
2025-05-09 15:24:02,097 - app - INFO - 路由: /tasks/api/tasks/<int:task_id>/no_csrf - 方法: {'OPTIONS', 'PUT'} - 终端: tasks.update_task_no_csrf
2025-05-09 15:24:02,098 - app - INFO - 路由: /tasks/api/tasks/<int:task_id>/detail - 方法: {'GET', 'OPTIONS', 'HEAD'} - 终端: tasks.api_tasks_detail
2025-05-09 15:24:02,143 - app - WARNING - team_bp 未定义或无法导入
2025-05-09 15:24:02,258 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-05-09 15:24:02,260 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions 
WHERE permissions.name = ?
 LIMIT ? OFFSET ?
2025-05-09 15:24:02,260 - sqlalchemy.engine.Engine - INFO - [generated in 0.00035s] ('manage_users', 1, 0)
2025-05-09 15:24:02,261 - app.utils.permissions - INFO - 更新权限: manage_users
2025-05-09 15:24:02,262 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions 
WHERE permissions.name = ?
 LIMIT ? OFFSET ?
2025-05-09 15:24:02,262 - sqlalchemy.engine.Engine - INFO - [cached since 0.002272s ago] ('manage_roles', 1, 0)
2025-05-09 15:24:02,262 - app.utils.permissions - INFO - 更新权限: manage_roles
2025-05-09 15:24:02,263 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions 
WHERE permissions.name = ?
 LIMIT ? OFFSET ?
2025-05-09 15:24:02,263 - sqlalchemy.engine.Engine - INFO - [cached since 0.003477s ago] ('manage_all_projects', 1, 0)
2025-05-09 15:24:02,263 - app.utils.permissions - INFO - 更新权限: manage_all_projects
2025-05-09 15:24:02,264 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions 
WHERE permissions.name = ?
 LIMIT ? OFFSET ?
2025-05-09 15:24:02,264 - sqlalchemy.engine.Engine - INFO - [cached since 0.00457s ago] ('manage_project', 1, 0)
2025-05-09 15:24:02,264 - app.utils.permissions - INFO - 更新权限: manage_project
2025-05-09 15:24:02,265 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions 
WHERE permissions.name = ?
 LIMIT ? OFFSET ?
2025-05-09 15:24:02,265 - sqlalchemy.engine.Engine - INFO - [cached since 0.005558s ago] ('manage_all_tasks', 1, 0)
2025-05-09 15:24:02,265 - app.utils.permissions - INFO - 更新权限: manage_all_tasks
2025-05-09 15:24:02,266 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions 
WHERE permissions.name = ?
 LIMIT ? OFFSET ?
2025-05-09 15:24:02,266 - sqlalchemy.engine.Engine - INFO - [cached since 0.006448s ago] ('manage_task', 1, 0)
2025-05-09 15:24:02,266 - app.utils.permissions - INFO - 更新权限: manage_task
2025-05-09 15:24:02,266 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions 
WHERE permissions.name = ?
 LIMIT ? OFFSET ?
2025-05-09 15:24:02,267 - sqlalchemy.engine.Engine - INFO - [cached since 0.007181s ago] ('view_project', 1, 0)
2025-05-09 15:24:02,267 - app.utils.permissions - INFO - 更新权限: view_project
2025-05-09 15:24:02,267 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions 
WHERE permissions.name = ?
 LIMIT ? OFFSET ?
2025-05-09 15:24:02,267 - sqlalchemy.engine.Engine - INFO - [cached since 0.007879s ago] ('view_task', 1, 0)
2025-05-09 15:24:02,268 - app.utils.permissions - INFO - 更新权限: view_task
2025-05-09 15:24:02,268 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions 
WHERE permissions.name = ?
 LIMIT ? OFFSET ?
2025-05-09 15:24:02,268 - sqlalchemy.engine.Engine - INFO - [cached since 0.008844s ago] ('manage_resources', 1, 0)
2025-05-09 15:24:02,268 - app.utils.permissions - INFO - 更新权限: manage_resources
2025-05-09 15:24:02,269 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions 
WHERE permissions.name = ?
 LIMIT ? OFFSET ?
2025-05-09 15:24:02,269 - sqlalchemy.engine.Engine - INFO - [cached since 0.009862s ago] ('manage_risks', 1, 0)
2025-05-09 15:24:02,269 - app.utils.permissions - INFO - 更新权限: manage_risks
2025-05-09 15:24:02,270 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions 
WHERE permissions.name = ?
 LIMIT ? OFFSET ?
2025-05-09 15:24:02,270 - sqlalchemy.engine.Engine - INFO - [cached since 0.01067s ago] ('view_reports', 1, 0)
2025-05-09 15:24:02,270 - app.utils.permissions - INFO - 更新权限: view_reports
2025-05-09 15:24:02,270 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions 
WHERE permissions.name = ?
 LIMIT ? OFFSET ?
2025-05-09 15:24:02,271 - sqlalchemy.engine.Engine - INFO - [cached since 0.01187s ago] ('create_task', 1, 0)
2025-05-09 15:24:02,271 - app.utils.permissions - INFO - 更新权限: create_task
2025-05-09 15:24:02,273 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions 
WHERE permissions.name = ?
 LIMIT ? OFFSET ?
2025-05-09 15:24:02,273 - sqlalchemy.engine.Engine - INFO - [cached since 0.0129s ago] ('create_project', 1, 0)
2025-05-09 15:24:02,273 - app.utils.permissions - INFO - 更新权限: create_project
2025-05-09 15:24:02,274 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions 
WHERE permissions.name = ?
 LIMIT ? OFFSET ?
2025-05-09 15:24:02,274 - sqlalchemy.engine.Engine - INFO - [cached since 0.01405s ago] ('assign_task', 1, 0)
2025-05-09 15:24:02,274 - app.utils.permissions - INFO - 更新权限: assign_task
2025-05-09 15:24:02,274 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions 
WHERE permissions.name = ?
 LIMIT ? OFFSET ?
2025-05-09 15:24:02,275 - sqlalchemy.engine.Engine - INFO - [cached since 0.01514s ago] ('change_project_status', 1, 0)
2025-05-09 15:24:02,275 - app.utils.permissions - INFO - 更新权限: change_project_status
2025-05-09 15:24:02,275 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions 
WHERE permissions.name = ?
 LIMIT ? OFFSET ?
2025-05-09 15:24:02,275 - sqlalchemy.engine.Engine - INFO - [cached since 0.01594s ago] ('change_task_status', 1, 0)
2025-05-09 15:24:02,276 - app.utils.permissions - INFO - 更新权限: change_task_status
2025-05-09 15:24:02,276 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-05-09 15:24:02,276 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-05-09 15:24:02,277 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions
2025-05-09 15:24:02,277 - sqlalchemy.engine.Engine - INFO - [generated in 0.00026s] ()
2025-05-09 15:24:02,278 - sqlalchemy.engine.Engine - INFO - SELECT roles.id AS roles_id, roles.name AS roles_name, roles.description AS roles_description, roles.created_at AS roles_created_at 
FROM roles 
WHERE roles.name = ?
 LIMIT ? OFFSET ?
2025-05-09 15:24:02,278 - sqlalchemy.engine.Engine - INFO - [generated in 0.00022s] ('admin', 1, 0)
2025-05-09 15:24:02,279 - app.utils.permissions - INFO - 更新角色: admin
2025-05-09 15:24:02,281 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions, role_permissions 
WHERE ? = role_permissions.role_id AND permissions.id = role_permissions.permission_id
2025-05-09 15:24:02,281 - sqlalchemy.engine.Engine - INFO - [generated in 0.00030s] (1,)
2025-05-09 15:24:02,282 - app.utils.permissions - INFO - 为管理员角色添加所有权限: 16个
2025-05-09 15:24:02,282 - sqlalchemy.engine.Engine - INFO - SELECT roles.id AS roles_id, roles.name AS roles_name, roles.description AS roles_description, roles.created_at AS roles_created_at 
FROM roles 
WHERE roles.name = ?
 LIMIT ? OFFSET ?
2025-05-09 15:24:02,283 - sqlalchemy.engine.Engine - INFO - [cached since 0.00419s ago] ('manager', 1, 0)
2025-05-09 15:24:02,283 - app.utils.permissions - INFO - 更新角色: manager
2025-05-09 15:24:02,283 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions, role_permissions 
WHERE ? = role_permissions.role_id AND permissions.id = role_permissions.permission_id
2025-05-09 15:24:02,284 - sqlalchemy.engine.Engine - INFO - [cached since 0.00259s ago] (2,)
2025-05-09 15:24:02,284 - app.utils.permissions - INFO - 为角色 manager 添加权限: manage_project
2025-05-09 15:24:02,284 - app.utils.permissions - INFO - 为角色 manager 添加权限: manage_task
2025-05-09 15:24:02,285 - app.utils.permissions - INFO - 为角色 manager 添加权限: view_project
2025-05-09 15:24:02,285 - app.utils.permissions - INFO - 为角色 manager 添加权限: view_task
2025-05-09 15:24:02,286 - app.utils.permissions - INFO - 为角色 manager 添加权限: manage_resources
2025-05-09 15:24:02,286 - app.utils.permissions - INFO - 为角色 manager 添加权限: manage_risks
2025-05-09 15:24:02,286 - app.utils.permissions - INFO - 为角色 manager 添加权限: view_reports
2025-05-09 15:24:02,286 - app.utils.permissions - INFO - 为角色 manager 添加权限: create_project
2025-05-09 15:24:02,286 - app.utils.permissions - INFO - 为角色 manager 添加权限: create_task
2025-05-09 15:24:02,287 - app.utils.permissions - INFO - 为角色 manager 添加权限: assign_task
2025-05-09 15:24:02,287 - app.utils.permissions - INFO - 为角色 manager 添加权限: change_project_status
2025-05-09 15:24:02,288 - app.utils.permissions - INFO - 为角色 manager 添加权限: change_task_status
2025-05-09 15:24:02,288 - sqlalchemy.engine.Engine - INFO - SELECT roles.id AS roles_id, roles.name AS roles_name, roles.description AS roles_description, roles.created_at AS roles_created_at 
FROM roles 
WHERE roles.name = ?
 LIMIT ? OFFSET ?
2025-05-09 15:24:02,288 - sqlalchemy.engine.Engine - INFO - [cached since 0.00956s ago] ('user', 1, 0)
2025-05-09 15:24:02,288 - app.utils.permissions - INFO - 更新角色: user
2025-05-09 15:24:02,289 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions, role_permissions 
WHERE ? = role_permissions.role_id AND permissions.id = role_permissions.permission_id
2025-05-09 15:24:02,289 - sqlalchemy.engine.Engine - INFO - [cached since 0.008036s ago] (5,)
2025-05-09 15:24:02,290 - app.utils.permissions - INFO - 为角色 user 添加权限: view_project
2025-05-09 15:24:02,290 - app.utils.permissions - INFO - 为角色 user 添加权限: view_task
2025-05-09 15:24:02,290 - app.utils.permissions - INFO - 为角色 user 添加权限: view_reports
2025-05-09 15:24:02,291 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-05-09 15:24:02,291 - app.utils.permissions - INFO - 角色和权限初始化完成
2025-05-09 15:24:02,291 - __main__ - INFO - 角色和权限初始化成功
2025-05-09 15:24:02,292 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-05-09 15:24:02,292 - sqlalchemy.engine.Engine - INFO - SELECT users.id AS users_id, users.username AS users_username, users.email AS users_email, users.name AS users_name, users.password_hash AS users_password_hash, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.last_login AS users_last_login 
FROM users 
WHERE users.username = ?
 LIMIT ? OFFSET ?
2025-05-09 15:24:02,293 - sqlalchemy.engine.Engine - INFO - [generated in 0.00024s] ('system', 1, 0)
2025-05-09 15:24:02,294 - sqlalchemy.engine.Engine - INFO - SELECT projects.id AS projects_id, projects.name AS projects_name, projects.description AS projects_description, projects.status AS projects_status, projects.start_date AS projects_start_date, projects.end_date AS projects_end_date, projects.progress AS projects_progress, projects.created_at AS projects_created_at, projects.updated_at AS projects_updated_at, projects.manager_id AS projects_manager_id, projects.owner_id AS projects_owner_id 
FROM projects 
WHERE projects.name = ?
 LIMIT ? OFFSET ?
2025-05-09 15:24:02,294 - sqlalchemy.engine.Engine - INFO - [generated in 0.00033s] ('Test Project', 1, 0)
2025-05-09 15:24:02,295 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-05-09 15:24:02,295 - __main__ - INFO - 数据库初始化完成
2025-05-09 15:24:02,295 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-05-09 15:24:02,296 - sqlalchemy.engine.Engine - INFO - SELECT users.id AS users_id, users.username AS users_username, users.email AS users_email, users.name AS users_name, users.password_hash AS users_password_hash, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.last_login AS users_last_login 
FROM users 
WHERE users.username = ?
 LIMIT ? OFFSET ?
2025-05-09 15:24:02,296 - sqlalchemy.engine.Engine - INFO - [cached since 0.003731s ago] ('system', 1, 0)
2025-05-09 15:24:02,302 - sqlalchemy.engine.Engine - INFO - INSERT INTO resource_usages (user_id, cpu_usage, memory_usage, disk_usage, network_usage, recorded_at) VALUES (?, ?, ?, ?, ?, ?)
2025-05-09 15:24:02,303 - sqlalchemy.engine.Engine - INFO - [generated in 0.00043s] (2, 16.6, 52.2, 10.9, 0.0, '2025-05-09 07:24:02.301068')
2025-05-09 15:24:02,306 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-05-09 15:24:02,310 - __main__ - INFO - 系统资源检查完成
2025-05-09 15:24:02,310 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-05-09 15:24:02,311 - sqlalchemy.engine.Engine - INFO - DELETE FROM resource_usages WHERE resource_usages.recorded_at < ?
2025-05-09 15:24:02,311 - sqlalchemy.engine.Engine - INFO - [generated in 0.00025s] ('2025-04-09 07:24:02.310031',)
2025-05-09 15:24:02,312 - sqlalchemy.engine.Engine - INFO - DELETE FROM system_alerts WHERE system_alerts.is_resolved = 1 AND system_alerts.created_at < ?
2025-05-09 15:24:02,312 - sqlalchemy.engine.Engine - INFO - [generated in 0.00025s] ('2025-05-02 07:24:02.311493',)
2025-05-09 15:24:02,312 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-05-09 15:24:02,313 - __main__ - INFO - 旧数据清理完成
2025-05-09 15:24:02,326 - werkzeug - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:5000
 * Running on http://192.168.0.75:5000
2025-05-09 15:24:02,326 - werkzeug - INFO - [33mPress CTRL+C to quit[0m
2025-05-09 15:24:02,326 - werkzeug - INFO -  * Restarting with stat
2025-05-09 15:24:02,893 - app - INFO - File logging handler initialized successfully
2025-05-09 15:24:02,893 - app - INFO - Console logging handler initialized successfully
2025-05-09 15:24:02,893 - app - INFO - Application logging configuration completed
2025-05-09 15:24:02,893 - app - INFO - Development configuration initialized
2025-05-09 15:24:02,926 - app - INFO - Logging setup completed successfully
2025-05-09 15:24:03,173 - app - INFO - 已注册的路由:
2025-05-09 15:24:03,174 - app - INFO - 路由: /static/<path:filename> - 方法: {'HEAD', 'GET', 'OPTIONS'} - 终端: static
2025-05-09 15:24:03,175 - app - INFO - 路由: /api/users/<int:user_id> - 方法: {'POST', 'GET', 'OPTIONS', 'DELETE', 'HEAD', 'PUT'} - 终端: user_api_exempt.user_api_exempt_route
2025-05-09 15:24:03,175 - app - INFO - 路由: /api/users - 方法: {'POST', 'GET', 'OPTIONS', 'DELETE', 'HEAD', 'PUT'} - 终端: user_api_exempt.user_api_exempt_route
2025-05-09 15:24:03,175 - app - INFO - 路由: /tasks/<int:task_id>/dependencies/<int:dependency_id>/gantt - 方法: {'DELETE', 'OPTIONS'} - 终端: task_api_exempt.task_api_exempt_route
2025-05-09 15:24:03,175 - app - INFO - 路由: /tasks/<int:task_id>/gantt - 方法: {'OPTIONS', 'PUT'} - 终端: task_api_exempt.task_api_exempt_route
2025-05-09 15:24:03,175 - app - INFO - 路由: /tasks/project/<int:project_id>/gantt - 方法: {'HEAD', 'GET', 'OPTIONS'} - 终端: task_api_exempt.task_api_exempt_route
2025-05-09 15:24:03,176 - app - INFO - 路由: /tasks/project/<int:project_id>/gantt/data - 方法: {'HEAD', 'GET', 'OPTIONS'} - 终端: task_api_exempt.task_api_exempt_route
2025-05-09 15:24:03,176 - app - INFO - 路由: /api/tasks/<int:task_id>/no_csrf - 方法: {'POST', 'GET', 'OPTIONS', 'DELETE', 'HEAD', 'PUT'} - 终端: task_api_exempt.task_api_exempt_route
2025-05-09 15:24:03,176 - app - INFO - 路由: /api/tasks/<int:task_id> - 方法: {'POST', 'GET', 'OPTIONS', 'DELETE', 'HEAD', 'PUT'} - 终端: task_api_exempt.task_api_exempt_route
2025-05-09 15:24:03,176 - app - INFO - 路由: /tasks/dependencies/gantt - 方法: {'OPTIONS', 'POST'} - 终端: task_api_exempt.task_api_exempt_route
2025-05-09 15:24:03,177 - app - INFO - 路由: /api/tasks - 方法: {'POST', 'GET', 'OPTIONS', 'DELETE', 'HEAD', 'PUT'} - 终端: task_api_exempt.task_api_exempt_route
2025-05-09 15:24:03,177 - app - INFO - 路由: /login - 方法: {'HEAD', 'GET', 'OPTIONS'} - 终端: auth.login_page
2025-05-09 15:24:03,177 - app - INFO - 路由: /login - 方法: {'OPTIONS', 'POST'} - 终端: auth.login
2025-05-09 15:24:03,177 - app - INFO - 路由: /register - 方法: {'HEAD', 'GET', 'OPTIONS'} - 终端: auth.register_page
2025-05-09 15:24:03,177 - app - INFO - 路由: /register - 方法: {'OPTIONS', 'POST'} - 终端: auth.register
2025-05-09 15:24:03,177 - app - INFO - 路由: /logout - 方法: {'HEAD', 'GET', 'OPTIONS', 'POST'} - 终端: auth.logout
2025-05-09 15:24:03,178 - app - INFO - 路由: /refresh - 方法: {'OPTIONS', 'POST'} - 终端: auth.refresh
2025-05-09 15:24:03,178 - app - INFO - 路由: /profile - 方法: {'HEAD', 'GET', 'OPTIONS'} - 终端: auth.profile
2025-05-09 15:24:03,178 - app - INFO - 路由: /profile - 方法: {'OPTIONS', 'PUT'} - 终端: auth.update_profile
2025-05-09 15:24:03,178 - app - INFO - 路由: /users - 方法: {'HEAD', 'GET', 'OPTIONS'} - 终端: auth.get_users
2025-05-09 15:24:03,179 - app - INFO - 路由: /users/<int:user_id> - 方法: {'HEAD', 'GET', 'OPTIONS'} - 终端: auth.get_user_by_id
2025-05-09 15:24:03,179 - app - INFO - 路由: /update_user/<int:user_id> - 方法: {'OPTIONS', 'PUT'} - 终端: auth.update_user
2025-05-09 15:24:03,179 - app - INFO - 路由: /roles - 方法: {'HEAD', 'GET', 'OPTIONS'} - 终端: auth.get_roles
2025-05-09 15:24:03,180 - app - INFO - 路由: /permissions - 方法: {'HEAD', 'GET', 'OPTIONS'} - 终端: auth.get_permissions
2025-05-09 15:24:03,180 - app - INFO - 路由: /permissions - 方法: {'OPTIONS', 'POST'} - 终端: auth.create_permission
2025-05-09 15:24:03,181 - app - INFO - 路由: /permissions/<int:permission_id> - 方法: {'HEAD', 'GET', 'OPTIONS'} - 终端: auth.get_permission
2025-05-09 15:24:03,181 - app - INFO - 路由: /permissions/<int:permission_id> - 方法: {'OPTIONS', 'PUT'} - 终端: auth.update_permission
2025-05-09 15:24:03,181 - app - INFO - 路由: /permissions/<int:permission_id> - 方法: {'DELETE', 'OPTIONS'} - 终端: auth.delete_permission
2025-05-09 15:24:03,181 - app - INFO - 路由: /roles - 方法: {'OPTIONS', 'POST'} - 终端: auth.create_role
2025-05-09 15:24:03,181 - app - INFO - 路由: /roles/<int:role_id> - 方法: {'HEAD', 'GET', 'OPTIONS'} - 终端: auth.get_role
2025-05-09 15:24:03,182 - app - INFO - 路由: /roles/<int:role_id>/permissions - 方法: {'OPTIONS', 'PUT'} - 终端: auth.update_role_permissions
2025-05-09 15:24:03,182 - app - INFO - 路由: /roles/<int:role_id> - 方法: {'DELETE', 'OPTIONS'} - 终端: auth.delete_role
2025-05-09 15:24:03,182 - app - INFO - 路由: /dashboard - 方法: {'HEAD', 'GET', 'OPTIONS'} - 终端: auth.dashboard
2025-05-09 15:24:03,182 - app - INFO - 路由: /dashboard/redirect - 方法: {'HEAD', 'GET', 'OPTIONS', 'POST'} - 终端: auth.dashboard_redirect
2025-05-09 15:24:03,182 - app - INFO - 路由: /create_test_user - 方法: {'OPTIONS', 'POST'} - 终端: auth.create_test_user
2025-05-09 15:24:03,183 - app - INFO - 路由: /check - 方法: {'HEAD', 'GET', 'OPTIONS'} - 终端: auth.check_auth
2025-05-09 15:24:03,183 - app - INFO - 路由: /create_test_project - 方法: {'OPTIONS', 'POST'} - 终端: auth.create_test_project
2025-05-09 15:24:03,183 - app - INFO - 路由: /logout_all - 方法: {'OPTIONS', 'POST'} - 终端: auth.logout_all
2025-05-09 15:24:03,183 - app - INFO - 路由: /dashboard/data - 方法: {'HEAD', 'GET', 'OPTIONS'} - 终端: auth.dashboard_data
2025-05-09 15:24:03,183 - app - INFO - 路由: /check_token - 方法: {'HEAD', 'GET', 'OPTIONS'} - 终端: auth.check_token
2025-05-09 15:24:03,184 - app - INFO - 路由: /create_user - 方法: {'OPTIONS', 'POST'} - 终端: auth.create_user
2025-05-09 15:24:03,184 - app - INFO - 路由: /user_info - 方法: {'HEAD', 'GET', 'OPTIONS'} - 终端: auth.get_user_info
2025-05-09 15:24:03,184 - app - INFO - 路由: /user/<int:user_id> - 方法: {'DELETE', 'OPTIONS'} - 终端: auth.delete_user
2025-05-09 15:24:03,184 - app - INFO - 路由: /users/<int:user_id>/roles - 方法: {'HEAD', 'GET', 'OPTIONS'} - 终端: auth.get_user_roles
2025-05-09 15:24:03,185 - app - INFO - 路由: /users/<int:user_id>/roles - 方法: {'OPTIONS', 'PUT'} - 终端: auth.update_user_roles
2025-05-09 15:24:03,185 - app - INFO - 路由: /users/<int:user_id>/notifications - 方法: {'HEAD', 'GET', 'OPTIONS'} - 终端: auth.get_user_notifications
2025-05-09 15:24:03,185 - app - INFO - 路由: /notifications/<int:notification_id>/read - 方法: {'OPTIONS', 'PUT'} - 终端: auth.mark_notification_as_read
2025-05-09 15:24:03,185 - app - INFO - 路由: /notifications/read_all - 方法: {'OPTIONS', 'PUT'} - 终端: auth.mark_all_notifications_as_read
2025-05-09 15:24:03,185 - app - INFO - 路由: /change-password - 方法: {'OPTIONS', 'POST'} - 终端: auth.change_password
2025-05-09 15:24:03,186 - app - INFO - 路由: /reset-password - 方法: {'HEAD', 'GET', 'OPTIONS'} - 终端: auth.reset_password_page
2025-05-09 15:24:03,186 - app - INFO - 路由: /verify-email/confirm - 方法: {'HEAD', 'GET', 'OPTIONS'} - 终端: auth.verify_email_confirm_page
2025-05-09 15:24:03,186 - app - INFO - 路由: /auth/csrf-token - 方法: {'HEAD', 'GET', 'OPTIONS'} - 终端: auth.get_csrf_token
2025-05-09 15:24:03,187 - app - INFO - 路由: /api/users/<int:user_id> - 方法: {'OPTIONS', 'PUT'} - 终端: auth.api_update_user
2025-05-09 15:24:03,187 - app - INFO - 路由: /api/users/<int:user_id> - 方法: {'DELETE', 'OPTIONS'} - 终端: auth.api_delete_user
2025-05-09 15:24:03,187 - app - INFO - 路由: /api/users - 方法: {'HEAD', 'GET', 'OPTIONS'} - 终端: auth.api_get_users
2025-05-09 15:24:03,187 - app - INFO - 路由: /api/users - 方法: {'OPTIONS', 'POST'} - 终端: auth.api_create_user
2025-05-09 15:24:03,187 - app - INFO - 路由: /auth/users/<int:user_id> - 方法: {'HEAD', 'GET', 'OPTIONS'} - 终端: auth.get_user_details
2025-05-09 15:24:03,188 - app - INFO - 路由: /api/users/<int:user_id> - 方法: {'GET', 'OPTIONS', 'DELETE', 'HEAD', 'PUT'} - 终端: auth.api_user_operations
2025-05-09 15:24:03,188 - app - INFO - 路由: /auth/user-csrf-token - 方法: {'HEAD', 'GET', 'OPTIONS'} - 终端: auth.get_user_csrf_token
2025-05-09 15:24:03,188 - app - INFO - 路由: /main/ - 方法: {'HEAD', 'GET', 'OPTIONS'} - 终端: main.index
2025-05-09 15:24:03,188 - app - INFO - 路由: /main/dashboard - 方法: {'HEAD', 'GET', 'OPTIONS'} - 终端: main.dashboard
2025-05-09 15:24:03,188 - app - INFO - 路由: /main/check_token - 方法: {'HEAD', 'GET', 'OPTIONS'} - 终端: main.check_token
2025-05-09 15:24:03,189 - app - INFO - 路由: /main/projects - 方法: {'HEAD', 'GET', 'OPTIONS'} - 终端: main.projects
2025-05-09 15:24:03,189 - app - INFO - 路由: /main/tasks - 方法: {'HEAD', 'GET', 'OPTIONS'} - 终端: main.tasks
2025-05-09 15:24:03,189 - app - INFO - 路由: /main/risks - 方法: {'HEAD', 'GET', 'OPTIONS'} - 终端: main.risks
2025-05-09 15:24:03,189 - app - INFO - 路由: /main/reports - 方法: {'HEAD', 'GET', 'OPTIONS'} - 终端: main.reports
2025-05-09 15:24:03,190 - app - INFO - 路由: /main/resources - 方法: {'HEAD', 'GET', 'OPTIONS'} - 终端: main.resources
2025-05-09 15:24:03,190 - app - INFO - 路由: /main/profile - 方法: {'HEAD', 'GET', 'OPTIONS'} - 终端: main.profile
2025-05-09 15:24:03,190 - app - INFO - 路由: /main/system/status - 方法: {'HEAD', 'GET', 'OPTIONS'} - 终端: main.system_status
2025-05-09 15:24:03,191 - app - INFO - 路由: /main/api/dashboard/data - 方法: {'HEAD', 'GET', 'OPTIONS'} - 终端: main.get_dashboard_data
2025-05-09 15:24:03,191 - app - INFO - 路由: /main/test - 方法: {'HEAD', 'GET', 'OPTIONS'} - 终端: main.test_route
2025-05-09 15:24:03,191 - app - INFO - 路由: /main/projects/detail/<int:project_id> - 方法: {'HEAD', 'GET', 'OPTIONS'} - 终端: main.project_detail_redirect
2025-05-09 15:24:03,191 - app - INFO - 路由: /main/users - 方法: {'HEAD', 'GET', 'OPTIONS'} - 终端: main.users
2025-05-09 15:24:03,191 - app - INFO - 路由: /main/debug/projects - 方法: {'HEAD', 'GET', 'OPTIONS'} - 终端: main.debug_projects
2025-05-09 15:24:03,192 - app - INFO - 路由: /main/simple/projects - 方法: {'HEAD', 'GET', 'OPTIONS'} - 终端: main.simple_projects
2025-05-09 15:24:03,192 - app - INFO - 路由: /main/static-test - 方法: {'HEAD', 'GET', 'OPTIONS'} - 终端: main.static_test
2025-05-09 15:24:03,192 - app - INFO - 路由: /main/print-projects - 方法: {'HEAD', 'GET', 'OPTIONS'} - 终端: main.print_projects
2025-05-09 15:24:03,192 - app - INFO - 路由: /main/bypass-projects - 方法: {'HEAD', 'GET', 'OPTIONS'} - 终端: main.bypass_projects
2025-05-09 15:24:03,192 - app - INFO - 路由: /main/debug-projects - 方法: {'HEAD', 'GET', 'OPTIONS'} - 终端: main.debug_projects_api
2025-05-09 15:24:03,193 - app - INFO - 路由: /projects/list - 方法: {'HEAD', 'GET', 'OPTIONS'} - 终端: projects.project_list
2025-05-09 15:24:03,193 - app - INFO - 路由: /projects/ - 方法: {'HEAD', 'GET', 'OPTIONS'} - 终端: projects.get_projects
2025-05-09 15:24:03,193 - app - INFO - 路由: /projects/ - 方法: {'OPTIONS', 'POST'} - 终端: projects.create_project
2025-05-09 15:24:03,193 - app - INFO - 路由: /projects/<int:project_id> - 方法: {'HEAD', 'GET', 'OPTIONS'} - 终端: projects.get_project
2025-05-09 15:24:03,193 - app - INFO - 路由: /projects/<int:project_id> - 方法: {'OPTIONS', 'PUT'} - 终端: projects.update_project
2025-05-09 15:24:03,194 - app - INFO - 路由: /projects/<int:project_id> - 方法: {'DELETE', 'OPTIONS'} - 终端: projects.delete_project
2025-05-09 15:24:03,194 - app - INFO - 路由: /projects/<int:project_id>/members - 方法: {'HEAD', 'GET', 'OPTIONS'} - 终端: projects.get_project_members
2025-05-09 15:24:03,194 - app - INFO - 路由: /projects/<int:project_id>/members - 方法: {'OPTIONS', 'POST'} - 终端: projects.add_project_member
2025-05-09 15:24:03,194 - app - INFO - 路由: /projects/<int:project_id>/members/<int:user_id> - 方法: {'DELETE', 'OPTIONS'} - 终端: projects.remove_project_member
2025-05-09 15:24:03,195 - app - INFO - 路由: /projects/detail/<int:project_id> - 方法: {'HEAD', 'GET', 'OPTIONS'} - 终端: projects.detail
2025-05-09 15:24:03,195 - app - INFO - 路由: /projects/api/detail/<int:project_id> - 方法: {'HEAD', 'GET', 'OPTIONS'} - 终端: projects.detail_api
2025-05-09 15:24:03,195 - app - INFO - 路由: /projects/api/projects/<int:project_id> - 方法: {'HEAD', 'GET', 'OPTIONS'} - 终端: projects.get_project_api
2025-05-09 15:24:03,197 - app - INFO - 路由: /projects/api/projects/<int:project_id> - 方法: {'OPTIONS', 'PUT'} - 终端: projects.update_project_api
2025-05-09 15:24:03,197 - app - INFO - 路由: /projects/api/projects/<int:project_id> - 方法: {'DELETE', 'OPTIONS'} - 终端: projects.delete_project_api
2025-05-09 15:24:03,198 - app - INFO - 路由: /projects/api/auth/projects - 方法: {'HEAD', 'GET', 'OPTIONS'} - 终端: projects.get_projects_api
2025-05-09 15:24:03,198 - app - INFO - 路由: /projects/api/auth/projects/<int:project_id> - 方法: {'HEAD', 'GET', 'OPTIONS'} - 终端: projects.get_project_auth_api
2025-05-09 15:24:03,198 - app - INFO - 路由: /projects/api/noauth/projects/<int:project_id> - 方法: {'GET', 'OPTIONS', 'DELETE', 'HEAD', 'PUT'} - 终端: projects.get_project_noauth
2025-05-09 15:24:03,198 - app - INFO - 路由: /projects/api/auth/projects - 方法: {'OPTIONS', 'POST'} - 终端: projects.create_project_auth
2025-05-09 15:24:03,199 - app - INFO - 路由: /projects/api/project-managers - 方法: {'HEAD', 'GET', 'OPTIONS'} - 终端: projects.get_project_managers
2025-05-09 15:24:03,199 - app - INFO - 路由: /projects/api/projects - 方法: {'HEAD', 'GET', 'OPTIONS'} - 终端: projects.get_all_projects_api
2025-05-09 15:24:03,199 - app - INFO - 路由: /projects/api/active-projects - 方法: {'HEAD', 'GET', 'OPTIONS'} - 终端: projects.get_active_projects_api
2025-05-09 15:24:03,199 - app - INFO - 路由: /projects/api/projects/<int:project_id>/members - 方法: {'HEAD', 'GET', 'OPTIONS'} - 终端: projects.get_project_members_api
2025-05-09 15:24:03,200 - app - INFO - 路由: /list - 方法: {'HEAD', 'GET', 'OPTIONS'} - 终端: project_root.project_list
2025-05-09 15:24:03,200 - app - INFO - 路由: / - 方法: {'HEAD', 'GET', 'OPTIONS'} - 终端: project_root.get_projects
2025-05-09 15:24:03,200 - app - INFO - 路由: / - 方法: {'OPTIONS', 'POST'} - 终端: project_root.create_project
2025-05-09 15:24:03,200 - app - INFO - 路由: /<int:project_id> - 方法: {'HEAD', 'GET', 'OPTIONS'} - 终端: project_root.get_project
2025-05-09 15:24:03,201 - app - INFO - 路由: /<int:project_id> - 方法: {'OPTIONS', 'PUT'} - 终端: project_root.update_project
2025-05-09 15:24:03,201 - app - INFO - 路由: /<int:project_id> - 方法: {'DELETE', 'OPTIONS'} - 终端: project_root.delete_project
2025-05-09 15:24:03,201 - app - INFO - 路由: /<int:project_id>/members - 方法: {'HEAD', 'GET', 'OPTIONS'} - 终端: project_root.get_project_members
2025-05-09 15:24:03,201 - app - INFO - 路由: /<int:project_id>/members - 方法: {'OPTIONS', 'POST'} - 终端: project_root.add_project_member
2025-05-09 15:24:03,201 - app - INFO - 路由: /<int:project_id>/members/<int:user_id> - 方法: {'DELETE', 'OPTIONS'} - 终端: project_root.remove_project_member
2025-05-09 15:24:03,202 - app - INFO - 路由: /detail/<int:project_id> - 方法: {'HEAD', 'GET', 'OPTIONS'} - 终端: project_root.detail
2025-05-09 15:24:03,202 - app - INFO - 路由: /api/detail/<int:project_id> - 方法: {'HEAD', 'GET', 'OPTIONS'} - 终端: project_root.detail_api
2025-05-09 15:24:03,202 - app - INFO - 路由: /api/projects/<int:project_id> - 方法: {'HEAD', 'GET', 'OPTIONS'} - 终端: project_root.get_project_api
2025-05-09 15:24:03,202 - app - INFO - 路由: /api/projects/<int:project_id> - 方法: {'OPTIONS', 'PUT'} - 终端: project_root.update_project_api
2025-05-09 15:24:03,202 - app - INFO - 路由: /api/projects/<int:project_id> - 方法: {'DELETE', 'OPTIONS'} - 终端: project_root.delete_project_api
2025-05-09 15:24:03,203 - app - INFO - 路由: /api/auth/projects - 方法: {'HEAD', 'GET', 'OPTIONS'} - 终端: project_root.get_projects_api
2025-05-09 15:24:03,203 - app - INFO - 路由: /api/auth/projects/<int:project_id> - 方法: {'HEAD', 'GET', 'OPTIONS'} - 终端: project_root.get_project_auth_api
2025-05-09 15:24:03,203 - app - INFO - 路由: /api/noauth/projects/<int:project_id> - 方法: {'GET', 'OPTIONS', 'DELETE', 'HEAD', 'PUT'} - 终端: project_root.get_project_noauth
2025-05-09 15:24:03,203 - app - INFO - 路由: /api/auth/projects - 方法: {'OPTIONS', 'POST'} - 终端: project_root.create_project_auth
2025-05-09 15:24:03,203 - app - INFO - 路由: /api/project-managers - 方法: {'HEAD', 'GET', 'OPTIONS'} - 终端: project_root.get_project_managers
2025-05-09 15:24:03,204 - app - INFO - 路由: /api/projects - 方法: {'HEAD', 'GET', 'OPTIONS'} - 终端: project_root.get_all_projects_api
2025-05-09 15:24:03,204 - app - INFO - 路由: /api/active-projects - 方法: {'HEAD', 'GET', 'OPTIONS'} - 终端: project_root.get_active_projects_api
2025-05-09 15:24:03,204 - app - INFO - 路由: /api/projects/<int:project_id>/members - 方法: {'HEAD', 'GET', 'OPTIONS'} - 终端: project_root.get_project_members_api
2025-05-09 15:24:03,204 - app - INFO - 路由: /tasks/ - 方法: {'HEAD', 'GET', 'OPTIONS'} - 终端: tasks.get_tasks
2025-05-09 15:24:03,205 - app - INFO - 路由: /tasks/ - 方法: {'OPTIONS', 'POST'} - 终端: tasks.create_task
2025-05-09 15:24:03,205 - app - INFO - 路由: /tasks/<int:task_id> - 方法: {'HEAD', 'GET', 'OPTIONS'} - 终端: tasks.get_task
2025-05-09 15:24:03,205 - app - INFO - 路由: /tasks/<int:task_id> - 方法: {'OPTIONS', 'PUT'} - 终端: tasks.update_task
2025-05-09 15:24:03,206 - app - INFO - 路由: /tasks/<int:task_id> - 方法: {'DELETE', 'OPTIONS'} - 终端: tasks.delete_task
2025-05-09 15:24:03,206 - app - INFO - 路由: /tasks/<int:task_id>/comments - 方法: {'HEAD', 'GET', 'OPTIONS'} - 终端: tasks.get_task_comments
2025-05-09 15:24:03,206 - app - INFO - 路由: /tasks/<int:task_id>/comments - 方法: {'OPTIONS', 'POST'} - 终端: tasks.add_task_comment
2025-05-09 15:24:03,206 - app - INFO - 路由: /tasks/<int:task_id>/attachments - 方法: {'HEAD', 'GET', 'OPTIONS'} - 终端: tasks.get_task_attachments
2025-05-09 15:24:03,207 - app - INFO - 路由: /tasks/<int:task_id>/attachments - 方法: {'OPTIONS', 'POST'} - 终端: tasks.add_task_attachment
2025-05-09 15:24:03,207 - app - INFO - 路由: /tasks/<int:task_id>/resources - 方法: {'HEAD', 'GET', 'OPTIONS'} - 终端: tasks.get_task_resources
2025-05-09 15:24:03,207 - app - INFO - 路由: /tasks/<int:task_id>/subtasks - 方法: {'HEAD', 'GET', 'OPTIONS'} - 终端: tasks.get_subtasks
2025-05-09 15:24:03,207 - app - INFO - 路由: /tasks/<int:task_id>/subtasks - 方法: {'OPTIONS', 'POST'} - 终端: tasks.create_subtask
2025-05-09 15:24:03,207 - app - INFO - 路由: /tasks/<int:task_id>/dependencies - 方法: {'HEAD', 'GET', 'OPTIONS'} - 终端: tasks.get_dependencies
2025-05-09 15:24:03,208 - app - INFO - 路由: /tasks/<int:task_id>/dependencies - 方法: {'OPTIONS', 'POST'} - 终端: tasks.add_dependency
2025-05-09 15:24:03,208 - app - INFO - 路由: /tasks/<int:task_id>/logs - 方法: {'HEAD', 'GET', 'OPTIONS'} - 终端: tasks.get_task_logs
2025-05-09 15:24:03,208 - app - INFO - 路由: /tasks/<int:task_id>/logs - 方法: {'OPTIONS', 'POST'} - 终端: tasks.add_task_log
2025-05-09 15:24:03,208 - app - INFO - 路由: /tasks/project/<int:project_id>/gantt - 方法: {'HEAD', 'GET', 'OPTIONS'} - 终端: tasks.gantt_chart
2025-05-09 15:24:03,208 - app - INFO - 路由: /tasks/project/<int:project_id>/gantt/data - 方法: {'HEAD', 'GET', 'OPTIONS'} - 终端: tasks.get_gantt_data
2025-05-09 15:24:03,209 - app - INFO - 路由: /tasks/<int:task_id>/gantt - 方法: {'OPTIONS', 'PUT'} - 终端: tasks.update_gantt_task
2025-05-09 15:24:03,209 - app - INFO - 路由: /tasks/dependencies/gantt - 方法: {'OPTIONS', 'POST'} - 终端: tasks.create_gantt_dependency
2025-05-09 15:24:03,209 - app - INFO - 路由: /tasks/<int:task_id>/dependencies/<int:dependency_id>/gantt - 方法: {'DELETE', 'OPTIONS'} - 终端: tasks.delete_gantt_dependency
2025-05-09 15:24:03,209 - app - INFO - 路由: /tasks/<int:task_id>/status - 方法: {'OPTIONS', 'PUT'} - 终端: tasks.update_task_status
2025-05-09 15:24:03,210 - app - INFO - 路由: /tasks/api/tasks/dependencies - 方法: {'OPTIONS', 'POST'} - 终端: tasks.add_task_dependency
2025-05-09 15:24:03,210 - app - INFO - 路由: /tasks/<int:task_id>/detail - 方法: {'HEAD', 'GET', 'OPTIONS'} - 终端: tasks.task_detail_api
2025-05-09 15:24:03,210 - app - INFO - 路由: /tasks/api/auth/tasks/<int:task_id>/detail - 方法: {'HEAD', 'GET', 'OPTIONS'} - 终端: tasks.task_detail_api_auth
2025-05-09 15:24:03,210 - app - INFO - 路由: /tasks/<int:task_id>/view - 方法: {'HEAD', 'GET', 'OPTIONS'} - 终端: tasks.task_detail_page
2025-05-09 15:24:03,211 - app - INFO - 路由: /tasks/<int:task_id>/edit - 方法: {'HEAD', 'GET', 'OPTIONS'} - 终端: tasks.edit_task_page
2025-05-09 15:24:03,211 - app - INFO - 路由: /tasks/api/auth/tasks/<int:task_id>/attachments - 方法: {'OPTIONS', 'POST'} - 终端: tasks.add_task_attachment_auth
2025-05-09 15:24:03,211 - app - INFO - 路由: /tasks/api/auth/tasks/<int:task_id>/attachments/<int:attachment_id>/download - 方法: {'HEAD', 'GET', 'OPTIONS'} - 终端: tasks.download_attachment_auth
2025-05-09 15:24:03,211 - app - INFO - 路由: /tasks/api/tasks/<int:task_id>/attachments - 方法: {'OPTIONS', 'POST'} - 终端: tasks.upload_attachment
2025-05-09 15:24:03,212 - app - INFO - 路由: /tasks/api/tasks/<int:task_id>/attachments/<int:attachment_id>/download - 方法: {'HEAD', 'GET', 'OPTIONS'} - 终端: tasks.download_attachment
2025-05-09 15:24:03,212 - app - INFO - 路由: /tasks/api/tasks/<int:task_id>/attachments/<int:attachment_id> - 方法: {'DELETE', 'OPTIONS'} - 终端: tasks.delete_attachment
2025-05-09 15:24:03,212 - app - INFO - 路由: /tasks/api/tasks/<int:task_id>/attachments/<int:attachment_id>/versions - 方法: {'OPTIONS', 'POST'} - 终端: tasks.upload_new_version
2025-05-09 15:24:03,213 - app - INFO - 路由: /tasks/api/tasks/<int:task_id>/attachments/<int:attachment_id>/versions - 方法: {'HEAD', 'GET', 'OPTIONS'} - 终端: tasks.get_attachment_versions
2025-05-09 15:24:03,213 - app - INFO - 路由: /tasks/api/tasks/<int:task_id>/risks - 方法: {'HEAD', 'GET', 'OPTIONS'} - 终端: tasks.task_risks_front_path
2025-05-09 15:24:03,214 - app - INFO - 路由: /tasks/<int:task_id>/risks - 方法: {'OPTIONS', 'POST'} - 终端: tasks.create_task_risk_front_path
2025-05-09 15:24:03,214 - app - INFO - 路由: /tasks/api/tasks/<int:task_id>/progress - 方法: {'HEAD', 'GET', 'OPTIONS'} - 终端: tasks.get_task_progress
2025-05-09 15:24:03,214 - app - INFO - 路由: /tasks/api/tasks/<int:task_id>/progress - 方法: {'OPTIONS', 'POST'} - 终端: tasks.update_task_progress
2025-05-09 15:24:03,214 - app - INFO - 路由: /tasks/api/tasks/<int:task_id>/progress/approve - 方法: {'OPTIONS', 'POST'} - 终端: tasks.approve_task_progress
2025-05-09 15:24:03,216 - app - INFO - 路由: /tasks/list - 方法: {'HEAD', 'GET', 'OPTIONS'} - 终端: tasks.task_list
2025-05-09 15:24:03,216 - app - INFO - 路由: /tasks/api/auth/tasks/<int:task_id>/logs - 方法: {'HEAD', 'GET', 'OPTIONS'} - 终端: tasks.get_task_logs_auth
2025-05-09 15:24:03,216 - app - INFO - 路由: /tasks/api/auth/tasks/<int:task_id>/subtasks - 方法: {'HEAD', 'GET', 'OPTIONS'} - 终端: tasks.get_subtasks_auth
2025-05-09 15:24:03,216 - app - INFO - 路由: /tasks/api/auth/tasks/<int:task_id>/comments - 方法: {'HEAD', 'GET', 'OPTIONS'} - 终端: tasks.get_task_comments_auth
2025-05-09 15:24:03,217 - app - INFO - 路由: /tasks/api/auth/tasks/<int:task_id>/attachments - 方法: {'HEAD', 'GET', 'OPTIONS'} - 终端: tasks.get_task_attachments_auth
2025-05-09 15:24:03,217 - app - INFO - 路由: /tasks/api/auth/tasks/<int:task_id>/risks - 方法: {'HEAD', 'GET', 'OPTIONS'} - 终端: tasks.get_task_risks_auth
2025-05-09 15:24:03,217 - app - INFO - 路由: /tasks/api/auth/tasks/<int:task_id>/risks - 方法: {'OPTIONS', 'POST'} - 终端: tasks.create_task_risk_auth
2025-05-09 15:24:03,218 - app - INFO - 路由: /tasks/api/auth/tasks/<int:task_id>/comments - 方法: {'OPTIONS', 'POST'} - 终端: tasks.add_task_comment_auth
2025-05-09 15:24:03,218 - app - INFO - 路由: /tasks/api/tasks/<int:task_id> - 方法: {'OPTIONS', 'PUT'} - 终端: tasks.api_update_task
2025-05-09 15:24:03,218 - app - INFO - 路由: /tasks/api/tasks/<int:task_id>/update_bypass - 方法: {'OPTIONS', 'PUT'} - 终端: tasks.update_task_bypass_csrf
2025-05-09 15:24:03,218 - app - INFO - 路由: /tasks/get-csrf-token - 方法: {'HEAD', 'GET', 'OPTIONS'} - 终端: tasks.get_csrf_token
2025-05-09 15:24:03,219 - app - INFO - 路由: /tasks/api/tasks/<int:task_id>/no_csrf - 方法: {'OPTIONS', 'PUT'} - 终端: tasks.update_task_no_csrf
2025-05-09 15:24:03,219 - app - INFO - 路由: /tasks/api/tasks/<int:task_id>/detail - 方法: {'HEAD', 'GET', 'OPTIONS'} - 终端: tasks.api_tasks_detail
2025-05-09 15:24:03,266 - app - WARNING - team_bp 未定义或无法导入
2025-05-09 15:24:03,391 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-05-09 15:24:03,393 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions 
WHERE permissions.name = ?
 LIMIT ? OFFSET ?
2025-05-09 15:24:03,393 - sqlalchemy.engine.Engine - INFO - [generated in 0.00038s] ('manage_users', 1, 0)
2025-05-09 15:24:03,394 - app.utils.permissions - INFO - 更新权限: manage_users
2025-05-09 15:24:03,395 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions 
WHERE permissions.name = ?
 LIMIT ? OFFSET ?
2025-05-09 15:24:03,395 - sqlalchemy.engine.Engine - INFO - [cached since 0.002707s ago] ('manage_roles', 1, 0)
2025-05-09 15:24:03,397 - app.utils.permissions - INFO - 更新权限: manage_roles
2025-05-09 15:24:03,398 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions 
WHERE permissions.name = ?
 LIMIT ? OFFSET ?
2025-05-09 15:24:03,398 - sqlalchemy.engine.Engine - INFO - [cached since 0.00441s ago] ('manage_all_projects', 1, 0)
2025-05-09 15:24:03,398 - app.utils.permissions - INFO - 更新权限: manage_all_projects
2025-05-09 15:24:03,399 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions 
WHERE permissions.name = ?
 LIMIT ? OFFSET ?
2025-05-09 15:24:03,399 - sqlalchemy.engine.Engine - INFO - [cached since 0.005389s ago] ('manage_project', 1, 0)
2025-05-09 15:24:03,399 - app.utils.permissions - INFO - 更新权限: manage_project
2025-05-09 15:24:03,400 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions 
WHERE permissions.name = ?
 LIMIT ? OFFSET ?
2025-05-09 15:24:03,400 - sqlalchemy.engine.Engine - INFO - [cached since 0.006302s ago] ('manage_all_tasks', 1, 0)
2025-05-09 15:24:03,400 - app.utils.permissions - INFO - 更新权限: manage_all_tasks
2025-05-09 15:24:03,400 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions 
WHERE permissions.name = ?
 LIMIT ? OFFSET ?
2025-05-09 15:24:03,400 - sqlalchemy.engine.Engine - INFO - [cached since 0.007087s ago] ('manage_task', 1, 0)
2025-05-09 15:24:03,401 - app.utils.permissions - INFO - 更新权限: manage_task
2025-05-09 15:24:03,401 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions 
WHERE permissions.name = ?
 LIMIT ? OFFSET ?
2025-05-09 15:24:03,401 - sqlalchemy.engine.Engine - INFO - [cached since 0.00781s ago] ('view_project', 1, 0)
2025-05-09 15:24:03,401 - app.utils.permissions - INFO - 更新权限: view_project
2025-05-09 15:24:03,402 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions 
WHERE permissions.name = ?
 LIMIT ? OFFSET ?
2025-05-09 15:24:03,402 - sqlalchemy.engine.Engine - INFO - [cached since 0.008663s ago] ('view_task', 1, 0)
2025-05-09 15:24:03,402 - app.utils.permissions - INFO - 更新权限: view_task
2025-05-09 15:24:03,403 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions 
WHERE permissions.name = ?
 LIMIT ? OFFSET ?
2025-05-09 15:24:03,403 - sqlalchemy.engine.Engine - INFO - [cached since 0.009842s ago] ('manage_resources', 1, 0)
2025-05-09 15:24:03,403 - app.utils.permissions - INFO - 更新权限: manage_resources
2025-05-09 15:24:03,404 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions 
WHERE permissions.name = ?
 LIMIT ? OFFSET ?
2025-05-09 15:24:03,404 - sqlalchemy.engine.Engine - INFO - [cached since 0.01077s ago] ('manage_risks', 1, 0)
2025-05-09 15:24:03,404 - app.utils.permissions - INFO - 更新权限: manage_risks
2025-05-09 15:24:03,405 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions 
WHERE permissions.name = ?
 LIMIT ? OFFSET ?
2025-05-09 15:24:03,405 - sqlalchemy.engine.Engine - INFO - [cached since 0.01166s ago] ('view_reports', 1, 0)
2025-05-09 15:24:03,405 - app.utils.permissions - INFO - 更新权限: view_reports
2025-05-09 15:24:03,405 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions 
WHERE permissions.name = ?
 LIMIT ? OFFSET ?
2025-05-09 15:24:03,406 - sqlalchemy.engine.Engine - INFO - [cached since 0.01255s ago] ('create_task', 1, 0)
2025-05-09 15:24:03,406 - app.utils.permissions - INFO - 更新权限: create_task
2025-05-09 15:24:03,406 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions 
WHERE permissions.name = ?
 LIMIT ? OFFSET ?
2025-05-09 15:24:03,407 - sqlalchemy.engine.Engine - INFO - [cached since 0.01352s ago] ('create_project', 1, 0)
2025-05-09 15:24:03,407 - app.utils.permissions - INFO - 更新权限: create_project
2025-05-09 15:24:03,407 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions 
WHERE permissions.name = ?
 LIMIT ? OFFSET ?
2025-05-09 15:24:03,408 - sqlalchemy.engine.Engine - INFO - [cached since 0.01482s ago] ('assign_task', 1, 0)
2025-05-09 15:24:03,408 - app.utils.permissions - INFO - 更新权限: assign_task
2025-05-09 15:24:03,409 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions 
WHERE permissions.name = ?
 LIMIT ? OFFSET ?
2025-05-09 15:24:03,409 - sqlalchemy.engine.Engine - INFO - [cached since 0.01584s ago] ('change_project_status', 1, 0)
2025-05-09 15:24:03,409 - app.utils.permissions - INFO - 更新权限: change_project_status
2025-05-09 15:24:03,409 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions 
WHERE permissions.name = ?
 LIMIT ? OFFSET ?
2025-05-09 15:24:03,410 - sqlalchemy.engine.Engine - INFO - [cached since 0.01683s ago] ('change_task_status', 1, 0)
2025-05-09 15:24:03,410 - app.utils.permissions - INFO - 更新权限: change_task_status
2025-05-09 15:24:03,410 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-05-09 15:24:03,411 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-05-09 15:24:03,411 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions
2025-05-09 15:24:03,411 - sqlalchemy.engine.Engine - INFO - [generated in 0.00023s] ()
2025-05-09 15:24:03,413 - sqlalchemy.engine.Engine - INFO - SELECT roles.id AS roles_id, roles.name AS roles_name, roles.description AS roles_description, roles.created_at AS roles_created_at 
FROM roles 
WHERE roles.name = ?
 LIMIT ? OFFSET ?
2025-05-09 15:24:03,413 - sqlalchemy.engine.Engine - INFO - [generated in 0.00027s] ('admin', 1, 0)
2025-05-09 15:24:03,414 - app.utils.permissions - INFO - 更新角色: admin
2025-05-09 15:24:03,416 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions, role_permissions 
WHERE ? = role_permissions.role_id AND permissions.id = role_permissions.permission_id
2025-05-09 15:24:03,416 - sqlalchemy.engine.Engine - INFO - [generated in 0.00028s] (1,)
2025-05-09 15:24:03,416 - app.utils.permissions - INFO - 为管理员角色添加所有权限: 16个
2025-05-09 15:24:03,417 - sqlalchemy.engine.Engine - INFO - SELECT roles.id AS roles_id, roles.name AS roles_name, roles.description AS roles_description, roles.created_at AS roles_created_at 
FROM roles 
WHERE roles.name = ?
 LIMIT ? OFFSET ?
2025-05-09 15:24:03,417 - sqlalchemy.engine.Engine - INFO - [cached since 0.004605s ago] ('manager', 1, 0)
2025-05-09 15:24:03,418 - app.utils.permissions - INFO - 更新角色: manager
2025-05-09 15:24:03,418 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions, role_permissions 
WHERE ? = role_permissions.role_id AND permissions.id = role_permissions.permission_id
2025-05-09 15:24:03,419 - sqlalchemy.engine.Engine - INFO - [cached since 0.003338s ago] (2,)
2025-05-09 15:24:03,419 - app.utils.permissions - INFO - 为角色 manager 添加权限: manage_project
2025-05-09 15:24:03,419 - app.utils.permissions - INFO - 为角色 manager 添加权限: manage_task
2025-05-09 15:24:03,421 - app.utils.permissions - INFO - 为角色 manager 添加权限: view_project
2025-05-09 15:24:03,421 - app.utils.permissions - INFO - 为角色 manager 添加权限: view_task
2025-05-09 15:24:03,421 - app.utils.permissions - INFO - 为角色 manager 添加权限: manage_resources
2025-05-09 15:24:03,422 - app.utils.permissions - INFO - 为角色 manager 添加权限: manage_risks
2025-05-09 15:24:03,422 - app.utils.permissions - INFO - 为角色 manager 添加权限: view_reports
2025-05-09 15:24:03,422 - app.utils.permissions - INFO - 为角色 manager 添加权限: create_project
2025-05-09 15:24:03,422 - app.utils.permissions - INFO - 为角色 manager 添加权限: create_task
2025-05-09 15:24:03,423 - app.utils.permissions - INFO - 为角色 manager 添加权限: assign_task
2025-05-09 15:24:03,423 - app.utils.permissions - INFO - 为角色 manager 添加权限: change_project_status
2025-05-09 15:24:03,423 - app.utils.permissions - INFO - 为角色 manager 添加权限: change_task_status
2025-05-09 15:24:03,424 - sqlalchemy.engine.Engine - INFO - SELECT roles.id AS roles_id, roles.name AS roles_name, roles.description AS roles_description, roles.created_at AS roles_created_at 
FROM roles 
WHERE roles.name = ?
 LIMIT ? OFFSET ?
2025-05-09 15:24:03,424 - sqlalchemy.engine.Engine - INFO - [cached since 0.01112s ago] ('user', 1, 0)
2025-05-09 15:24:03,424 - app.utils.permissions - INFO - 更新角色: user
2025-05-09 15:24:03,425 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions, role_permissions 
WHERE ? = role_permissions.role_id AND permissions.id = role_permissions.permission_id
2025-05-09 15:24:03,425 - sqlalchemy.engine.Engine - INFO - [cached since 0.009386s ago] (5,)
2025-05-09 15:24:03,425 - app.utils.permissions - INFO - 为角色 user 添加权限: view_project
2025-05-09 15:24:03,426 - app.utils.permissions - INFO - 为角色 user 添加权限: view_task
2025-05-09 15:24:03,426 - app.utils.permissions - INFO - 为角色 user 添加权限: view_reports
2025-05-09 15:24:03,426 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-05-09 15:24:03,427 - app.utils.permissions - INFO - 角色和权限初始化完成
2025-05-09 15:24:03,427 - __main__ - INFO - 角色和权限初始化成功
2025-05-09 15:24:03,427 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-05-09 15:24:03,429 - sqlalchemy.engine.Engine - INFO - SELECT users.id AS users_id, users.username AS users_username, users.email AS users_email, users.name AS users_name, users.password_hash AS users_password_hash, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.last_login AS users_last_login 
FROM users 
WHERE users.username = ?
 LIMIT ? OFFSET ?
2025-05-09 15:24:03,429 - sqlalchemy.engine.Engine - INFO - [generated in 0.00039s] ('system', 1, 0)
2025-05-09 15:24:03,430 - sqlalchemy.engine.Engine - INFO - SELECT projects.id AS projects_id, projects.name AS projects_name, projects.description AS projects_description, projects.status AS projects_status, projects.start_date AS projects_start_date, projects.end_date AS projects_end_date, projects.progress AS projects_progress, projects.created_at AS projects_created_at, projects.updated_at AS projects_updated_at, projects.manager_id AS projects_manager_id, projects.owner_id AS projects_owner_id 
FROM projects 
WHERE projects.name = ?
 LIMIT ? OFFSET ?
2025-05-09 15:24:03,431 - sqlalchemy.engine.Engine - INFO - [generated in 0.00032s] ('Test Project', 1, 0)
2025-05-09 15:24:03,431 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-05-09 15:24:03,432 - __main__ - INFO - 数据库初始化完成
2025-05-09 15:24:03,432 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-05-09 15:24:03,432 - sqlalchemy.engine.Engine - INFO - SELECT users.id AS users_id, users.username AS users_username, users.email AS users_email, users.name AS users_name, users.password_hash AS users_password_hash, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.last_login AS users_last_login 
FROM users 
WHERE users.username = ?
 LIMIT ? OFFSET ?
2025-05-09 15:24:03,432 - sqlalchemy.engine.Engine - INFO - [cached since 0.004057s ago] ('system', 1, 0)
2025-05-09 15:24:03,438 - sqlalchemy.engine.Engine - INFO - INSERT INTO resource_usages (user_id, cpu_usage, memory_usage, disk_usage, network_usage, recorded_at) VALUES (?, ?, ?, ?, ?, ?)
2025-05-09 15:24:03,440 - sqlalchemy.engine.Engine - INFO - [generated in 0.00047s] (2, 12.8, 52.6, 10.9, 0.0, '2025-05-09 07:24:03.437071')
2025-05-09 15:24:03,440 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-05-09 15:24:03,445 - __main__ - INFO - 系统资源检查完成
2025-05-09 15:24:03,446 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-05-09 15:24:03,446 - sqlalchemy.engine.Engine - INFO - DELETE FROM resource_usages WHERE resource_usages.recorded_at < ?
2025-05-09 15:24:03,447 - sqlalchemy.engine.Engine - INFO - [generated in 0.00030s] ('2025-04-09 07:24:03.445200',)
2025-05-09 15:24:03,448 - sqlalchemy.engine.Engine - INFO - DELETE FROM system_alerts WHERE system_alerts.is_resolved = 1 AND system_alerts.created_at < ?
2025-05-09 15:24:03,448 - sqlalchemy.engine.Engine - INFO - [generated in 0.00033s] ('2025-05-02 07:24:03.447272',)
2025-05-09 15:24:03,448 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-05-09 15:24:03,449 - __main__ - INFO - 旧数据清理完成
2025-05-09 15:24:03,454 - werkzeug - WARNING -  * Debugger is active!
2025-05-09 15:24:03,457 - werkzeug - INFO -  * Debugger PIN: 670-037-726
2025-05-09 15:24:25,982 - app - WARNING - 绕过JWT验证: /tasks/project/1/gantt/data
2025-05-09 15:24:25,983 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-05-09 15:24:25,984 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions 
WHERE permissions.name = ?
 LIMIT ? OFFSET ?
2025-05-09 15:24:25,984 - sqlalchemy.engine.Engine - INFO - [cached since 22.59s ago] ('manage_users', 1, 0)
2025-05-09 15:24:25,985 - app.utils.permissions - INFO - 更新权限: manage_users
2025-05-09 15:24:25,986 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions 
WHERE permissions.name = ?
 LIMIT ? OFFSET ?
2025-05-09 15:24:25,986 - sqlalchemy.engine.Engine - INFO - [cached since 22.59s ago] ('manage_roles', 1, 0)
2025-05-09 15:24:25,988 - app.utils.permissions - INFO - 更新权限: manage_roles
2025-05-09 15:24:25,988 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions 
WHERE permissions.name = ?
 LIMIT ? OFFSET ?
2025-05-09 15:24:25,990 - sqlalchemy.engine.Engine - INFO - [cached since 22.6s ago] ('manage_all_projects', 1, 0)
2025-05-09 15:24:25,991 - app.utils.permissions - INFO - 更新权限: manage_all_projects
2025-05-09 15:24:25,992 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions 
WHERE permissions.name = ?
 LIMIT ? OFFSET ?
2025-05-09 15:24:25,993 - sqlalchemy.engine.Engine - INFO - [cached since 22.6s ago] ('manage_project', 1, 0)
2025-05-09 15:24:25,994 - app.utils.permissions - INFO - 更新权限: manage_project
2025-05-09 15:24:25,995 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions 
WHERE permissions.name = ?
 LIMIT ? OFFSET ?
2025-05-09 15:24:25,995 - sqlalchemy.engine.Engine - INFO - [cached since 22.6s ago] ('manage_all_tasks', 1, 0)
2025-05-09 15:24:25,996 - app.utils.permissions - INFO - 更新权限: manage_all_tasks
2025-05-09 15:24:25,996 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions 
WHERE permissions.name = ?
 LIMIT ? OFFSET ?
2025-05-09 15:24:25,997 - sqlalchemy.engine.Engine - INFO - [cached since 22.6s ago] ('manage_task', 1, 0)
2025-05-09 15:24:25,997 - app.utils.permissions - INFO - 更新权限: manage_task
2025-05-09 15:24:25,999 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions 
WHERE permissions.name = ?
 LIMIT ? OFFSET ?
2025-05-09 15:24:25,999 - sqlalchemy.engine.Engine - INFO - [cached since 22.61s ago] ('view_project', 1, 0)
2025-05-09 15:24:25,999 - app.utils.permissions - INFO - 更新权限: view_project
2025-05-09 15:24:26,001 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions 
WHERE permissions.name = ?
 LIMIT ? OFFSET ?
2025-05-09 15:24:26,001 - sqlalchemy.engine.Engine - INFO - [cached since 22.61s ago] ('view_task', 1, 0)
2025-05-09 15:24:26,001 - app.utils.permissions - INFO - 更新权限: view_task
2025-05-09 15:24:26,003 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions 
WHERE permissions.name = ?
 LIMIT ? OFFSET ?
2025-05-09 15:24:26,003 - sqlalchemy.engine.Engine - INFO - [cached since 22.61s ago] ('manage_resources', 1, 0)
2025-05-09 15:24:26,004 - app.utils.permissions - INFO - 更新权限: manage_resources
2025-05-09 15:24:26,004 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions 
WHERE permissions.name = ?
 LIMIT ? OFFSET ?
2025-05-09 15:24:26,006 - sqlalchemy.engine.Engine - INFO - [cached since 22.61s ago] ('manage_risks', 1, 0)
2025-05-09 15:24:26,006 - app.utils.permissions - INFO - 更新权限: manage_risks
2025-05-09 15:24:26,007 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions 
WHERE permissions.name = ?
 LIMIT ? OFFSET ?
2025-05-09 15:24:26,007 - sqlalchemy.engine.Engine - INFO - [cached since 22.61s ago] ('view_reports', 1, 0)
2025-05-09 15:24:26,008 - app.utils.permissions - INFO - 更新权限: view_reports
2025-05-09 15:24:26,009 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions 
WHERE permissions.name = ?
 LIMIT ? OFFSET ?
2025-05-09 15:24:26,009 - sqlalchemy.engine.Engine - INFO - [cached since 22.62s ago] ('create_task', 1, 0)
2025-05-09 15:24:26,009 - app.utils.permissions - INFO - 更新权限: create_task
2025-05-09 15:24:26,011 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions 
WHERE permissions.name = ?
 LIMIT ? OFFSET ?
2025-05-09 15:24:26,012 - sqlalchemy.engine.Engine - INFO - [cached since 22.62s ago] ('create_project', 1, 0)
2025-05-09 15:24:26,012 - app.utils.permissions - INFO - 更新权限: create_project
2025-05-09 15:24:26,013 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions 
WHERE permissions.name = ?
 LIMIT ? OFFSET ?
2025-05-09 15:24:26,013 - sqlalchemy.engine.Engine - INFO - [cached since 22.62s ago] ('assign_task', 1, 0)
2025-05-09 15:24:26,013 - app.utils.permissions - INFO - 更新权限: assign_task
2025-05-09 15:24:26,015 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions 
WHERE permissions.name = ?
 LIMIT ? OFFSET ?
2025-05-09 15:24:26,016 - sqlalchemy.engine.Engine - INFO - [cached since 22.62s ago] ('change_project_status', 1, 0)
2025-05-09 15:24:26,016 - app.utils.permissions - INFO - 更新权限: change_project_status
2025-05-09 15:24:26,018 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions 
WHERE permissions.name = ?
 LIMIT ? OFFSET ?
2025-05-09 15:24:26,019 - sqlalchemy.engine.Engine - INFO - [cached since 22.63s ago] ('change_task_status', 1, 0)
2025-05-09 15:24:26,019 - app.utils.permissions - INFO - 更新权限: change_task_status
2025-05-09 15:24:26,021 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-05-09 15:24:26,022 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-05-09 15:24:26,023 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions
2025-05-09 15:24:26,023 - sqlalchemy.engine.Engine - INFO - [cached since 22.61s ago] ()
2025-05-09 15:24:26,024 - sqlalchemy.engine.Engine - INFO - SELECT roles.id AS roles_id, roles.name AS roles_name, roles.description AS roles_description, roles.created_at AS roles_created_at 
FROM roles 
WHERE roles.name = ?
 LIMIT ? OFFSET ?
2025-05-09 15:24:26,024 - sqlalchemy.engine.Engine - INFO - [cached since 22.61s ago] ('admin', 1, 0)
2025-05-09 15:24:26,024 - app.utils.permissions - INFO - 更新角色: admin
2025-05-09 15:24:26,025 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions, role_permissions 
WHERE ? = role_permissions.role_id AND permissions.id = role_permissions.permission_id
2025-05-09 15:24:26,025 - sqlalchemy.engine.Engine - INFO - [cached since 22.61s ago] (1,)
2025-05-09 15:24:26,026 - app.utils.permissions - INFO - 为管理员角色添加所有权限: 16个
2025-05-09 15:24:26,028 - sqlalchemy.engine.Engine - INFO - SELECT roles.id AS roles_id, roles.name AS roles_name, roles.description AS roles_description, roles.created_at AS roles_created_at 
FROM roles 
WHERE roles.name = ?
 LIMIT ? OFFSET ?
2025-05-09 15:24:26,028 - sqlalchemy.engine.Engine - INFO - [cached since 22.61s ago] ('manager', 1, 0)
2025-05-09 15:24:26,029 - app.utils.permissions - INFO - 更新角色: manager
2025-05-09 15:24:26,029 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions, role_permissions 
WHERE ? = role_permissions.role_id AND permissions.id = role_permissions.permission_id
2025-05-09 15:24:26,030 - sqlalchemy.engine.Engine - INFO - [cached since 22.61s ago] (2,)
2025-05-09 15:24:26,030 - app.utils.permissions - INFO - 为角色 manager 添加权限: manage_project
2025-05-09 15:24:26,031 - app.utils.permissions - INFO - 为角色 manager 添加权限: manage_task
2025-05-09 15:24:26,031 - app.utils.permissions - INFO - 为角色 manager 添加权限: view_project
2025-05-09 15:24:26,033 - app.utils.permissions - INFO - 为角色 manager 添加权限: view_task
2025-05-09 15:24:26,033 - app.utils.permissions - INFO - 为角色 manager 添加权限: manage_resources
2025-05-09 15:24:26,034 - app.utils.permissions - INFO - 为角色 manager 添加权限: manage_risks
2025-05-09 15:24:26,035 - app.utils.permissions - INFO - 为角色 manager 添加权限: view_reports
2025-05-09 15:24:26,035 - app.utils.permissions - INFO - 为角色 manager 添加权限: create_project
2025-05-09 15:24:26,035 - app.utils.permissions - INFO - 为角色 manager 添加权限: create_task
2025-05-09 15:24:26,036 - app.utils.permissions - INFO - 为角色 manager 添加权限: assign_task
2025-05-09 15:24:26,036 - app.utils.permissions - INFO - 为角色 manager 添加权限: change_project_status
2025-05-09 15:24:26,036 - app.utils.permissions - INFO - 为角色 manager 添加权限: change_task_status
2025-05-09 15:24:26,036 - sqlalchemy.engine.Engine - INFO - SELECT roles.id AS roles_id, roles.name AS roles_name, roles.description AS roles_description, roles.created_at AS roles_created_at 
FROM roles 
WHERE roles.name = ?
 LIMIT ? OFFSET ?
2025-05-09 15:24:26,036 - sqlalchemy.engine.Engine - INFO - [cached since 22.62s ago] ('user', 1, 0)
2025-05-09 15:24:26,037 - app.utils.permissions - INFO - 更新角色: user
2025-05-09 15:24:26,037 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions, role_permissions 
WHERE ? = role_permissions.role_id AND permissions.id = role_permissions.permission_id
2025-05-09 15:24:26,037 - sqlalchemy.engine.Engine - INFO - [cached since 22.62s ago] (5,)
2025-05-09 15:24:26,037 - app.utils.permissions - INFO - 为角色 user 添加权限: view_project
2025-05-09 15:24:26,038 - app.utils.permissions - INFO - 为角色 user 添加权限: view_task
2025-05-09 15:24:26,038 - app.utils.permissions - INFO - 为角色 user 添加权限: view_reports
2025-05-09 15:24:26,038 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-05-09 15:24:26,038 - app.utils.permissions - INFO - 角色和权限初始化完成
2025-05-09 15:24:26,039 - app - INFO - 角色和权限初始化成功
2025-05-09 15:24:26,039 - app - INFO - 应用初始化完成
2025-05-09 15:24:26,039 - app - WARNING - 绕过JWT验证和CSRF保护: /tasks/project/1/gantt/data
2025-05-09 15:24:26,039 - app.routes.tasks - INFO - 甘特图数据请求: 项目ID=1, URL=http://127.0.0.1:5000/tasks/project/1/gantt/data?bypass_jwt=true, 头部={'Accept': 'application/json', 'User-Agent': 'Mozilla/5.0 (Windows NT; Windows NT 10.0; zh-CN) WindowsPowerShell/5.1.26100.3624', 'Host': '127.0.0.1:5000', 'Connection': 'Keep-Alive'}
2025-05-09 15:24:26,040 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-05-09 15:24:26,041 - sqlalchemy.engine.Engine - INFO - SELECT projects.id AS projects_id, projects.name AS projects_name, projects.description AS projects_description, projects.status AS projects_status, projects.start_date AS projects_start_date, projects.end_date AS projects_end_date, projects.progress AS projects_progress, projects.created_at AS projects_created_at, projects.updated_at AS projects_updated_at, projects.manager_id AS projects_manager_id, projects.owner_id AS projects_owner_id 
FROM projects 
WHERE projects.id = ?
2025-05-09 15:24:26,041 - sqlalchemy.engine.Engine - INFO - [generated in 0.00029s] (1,)
2025-05-09 15:24:26,044 - sqlalchemy.engine.Engine - INFO - SELECT tasks.id AS tasks_id, tasks.title AS tasks_title, tasks.description AS tasks_description, tasks.status AS tasks_status, tasks.priority AS tasks_priority, tasks.progress AS tasks_progress, tasks.start_date AS tasks_start_date, tasks.due_date AS tasks_due_date, tasks.created_at AS tasks_created_at, tasks.updated_at AS tasks_updated_at, tasks.project_id AS tasks_project_id, tasks.assignee_id AS tasks_assignee_id, tasks.created_by AS tasks_created_by, tasks.team_id AS tasks_team_id, tasks.parent_id AS tasks_parent_id 
FROM tasks 
WHERE tasks.project_id = ?
2025-05-09 15:24:26,044 - sqlalchemy.engine.Engine - INFO - [generated in 0.00030s] (1,)
2025-05-09 15:24:26,044 - app.routes.tasks - INFO - 甘特图数据查询结果: 项目ID=1, 任务数量=7
2025-05-09 15:24:26,045 - app.routes.tasks - ERROR - 获取甘特图数据失败: type object 'datetime.datetime' has no attribute 'datetime'
Traceback (most recent call last):
  File "D:\tmp\work\app\routes\tasks.py", line 727, in get_gantt_data
    if not isinstance(start_date, (datetime.date, datetime.datetime)):
                                                  ^^^^^^^^^^^^^^^^^
AttributeError: type object 'datetime.datetime' has no attribute 'datetime'
2025-05-09 15:24:26,047 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-05-09 15:24:26,047 - werkzeug - INFO - 127.0.0.1 - - [09/May/2025 15:24:26] "[35m[1mGET /tasks/project/1/gantt/data?bypass_jwt=true HTTP/1.1[0m" 500 -
2025-05-09 15:25:32,798 - werkzeug - INFO -  * Detected change in 'D:\\tmp\\work\\app\\routes\\tasks.py', reloading
2025-05-09 15:25:33,089 - werkzeug - INFO -  * Restarting with stat
2025-05-09 15:25:33,726 - app - INFO - File logging handler initialized successfully
2025-05-09 15:25:33,726 - app - INFO - Console logging handler initialized successfully
2025-05-09 15:25:33,726 - app - INFO - Application logging configuration completed
2025-05-09 15:25:33,726 - app - INFO - Development configuration initialized
2025-05-09 15:25:33,754 - app - INFO - Logging setup completed successfully
2025-05-09 15:25:34,011 - app - INFO - 已注册的路由:
2025-05-09 15:25:34,012 - app - INFO - 路由: /static/<path:filename> - 方法: {'GET', 'HEAD', 'OPTIONS'} - 终端: static
2025-05-09 15:25:34,012 - app - INFO - 路由: /api/users/<int:user_id> - 方法: {'POST', 'OPTIONS', 'HEAD', 'GET', 'PUT', 'DELETE'} - 终端: user_api_exempt.user_api_exempt_route
2025-05-09 15:25:34,013 - app - INFO - 路由: /api/users - 方法: {'POST', 'OPTIONS', 'HEAD', 'GET', 'PUT', 'DELETE'} - 终端: user_api_exempt.user_api_exempt_route
2025-05-09 15:25:34,013 - app - INFO - 路由: /tasks/<int:task_id>/dependencies/<int:dependency_id>/gantt - 方法: {'DELETE', 'OPTIONS'} - 终端: task_api_exempt.task_api_exempt_route
2025-05-09 15:25:34,013 - app - INFO - 路由: /tasks/<int:task_id>/gantt - 方法: {'PUT', 'OPTIONS'} - 终端: task_api_exempt.task_api_exempt_route
2025-05-09 15:25:34,013 - app - INFO - 路由: /tasks/project/<int:project_id>/gantt - 方法: {'GET', 'HEAD', 'OPTIONS'} - 终端: task_api_exempt.task_api_exempt_route
2025-05-09 15:25:34,013 - app - INFO - 路由: /tasks/project/<int:project_id>/gantt/data - 方法: {'GET', 'HEAD', 'OPTIONS'} - 终端: task_api_exempt.task_api_exempt_route
2025-05-09 15:25:34,014 - app - INFO - 路由: /api/tasks/<int:task_id>/no_csrf - 方法: {'POST', 'OPTIONS', 'HEAD', 'GET', 'PUT', 'DELETE'} - 终端: task_api_exempt.task_api_exempt_route
2025-05-09 15:25:34,014 - app - INFO - 路由: /api/tasks/<int:task_id> - 方法: {'POST', 'OPTIONS', 'HEAD', 'GET', 'PUT', 'DELETE'} - 终端: task_api_exempt.task_api_exempt_route
2025-05-09 15:25:34,014 - app - INFO - 路由: /tasks/dependencies/gantt - 方法: {'POST', 'OPTIONS'} - 终端: task_api_exempt.task_api_exempt_route
2025-05-09 15:25:34,015 - app - INFO - 路由: /api/tasks - 方法: {'POST', 'OPTIONS', 'HEAD', 'GET', 'PUT', 'DELETE'} - 终端: task_api_exempt.task_api_exempt_route
2025-05-09 15:25:34,015 - app - INFO - 路由: /login - 方法: {'GET', 'HEAD', 'OPTIONS'} - 终端: auth.login_page
2025-05-09 15:25:34,015 - app - INFO - 路由: /login - 方法: {'POST', 'OPTIONS'} - 终端: auth.login
2025-05-09 15:25:34,015 - app - INFO - 路由: /register - 方法: {'GET', 'HEAD', 'OPTIONS'} - 终端: auth.register_page
2025-05-09 15:25:34,016 - app - INFO - 路由: /register - 方法: {'POST', 'OPTIONS'} - 终端: auth.register
2025-05-09 15:25:34,016 - app - INFO - 路由: /logout - 方法: {'GET', 'POST', 'HEAD', 'OPTIONS'} - 终端: auth.logout
2025-05-09 15:25:34,016 - app - INFO - 路由: /refresh - 方法: {'POST', 'OPTIONS'} - 终端: auth.refresh
2025-05-09 15:25:34,016 - app - INFO - 路由: /profile - 方法: {'GET', 'HEAD', 'OPTIONS'} - 终端: auth.profile
2025-05-09 15:25:34,017 - app - INFO - 路由: /profile - 方法: {'PUT', 'OPTIONS'} - 终端: auth.update_profile
2025-05-09 15:25:34,017 - app - INFO - 路由: /users - 方法: {'GET', 'HEAD', 'OPTIONS'} - 终端: auth.get_users
2025-05-09 15:25:34,017 - app - INFO - 路由: /users/<int:user_id> - 方法: {'GET', 'HEAD', 'OPTIONS'} - 终端: auth.get_user_by_id
2025-05-09 15:25:34,017 - app - INFO - 路由: /update_user/<int:user_id> - 方法: {'PUT', 'OPTIONS'} - 终端: auth.update_user
2025-05-09 15:25:34,017 - app - INFO - 路由: /roles - 方法: {'GET', 'HEAD', 'OPTIONS'} - 终端: auth.get_roles
2025-05-09 15:25:34,018 - app - INFO - 路由: /permissions - 方法: {'GET', 'HEAD', 'OPTIONS'} - 终端: auth.get_permissions
2025-05-09 15:25:34,018 - app - INFO - 路由: /permissions - 方法: {'POST', 'OPTIONS'} - 终端: auth.create_permission
2025-05-09 15:25:34,018 - app - INFO - 路由: /permissions/<int:permission_id> - 方法: {'GET', 'HEAD', 'OPTIONS'} - 终端: auth.get_permission
2025-05-09 15:25:34,019 - app - INFO - 路由: /permissions/<int:permission_id> - 方法: {'PUT', 'OPTIONS'} - 终端: auth.update_permission
2025-05-09 15:25:34,019 - app - INFO - 路由: /permissions/<int:permission_id> - 方法: {'DELETE', 'OPTIONS'} - 终端: auth.delete_permission
2025-05-09 15:25:34,019 - app - INFO - 路由: /roles - 方法: {'POST', 'OPTIONS'} - 终端: auth.create_role
2025-05-09 15:25:34,019 - app - INFO - 路由: /roles/<int:role_id> - 方法: {'GET', 'HEAD', 'OPTIONS'} - 终端: auth.get_role
2025-05-09 15:25:34,020 - app - INFO - 路由: /roles/<int:role_id>/permissions - 方法: {'PUT', 'OPTIONS'} - 终端: auth.update_role_permissions
2025-05-09 15:25:34,020 - app - INFO - 路由: /roles/<int:role_id> - 方法: {'DELETE', 'OPTIONS'} - 终端: auth.delete_role
2025-05-09 15:25:34,020 - app - INFO - 路由: /dashboard - 方法: {'GET', 'HEAD', 'OPTIONS'} - 终端: auth.dashboard
2025-05-09 15:25:34,020 - app - INFO - 路由: /dashboard/redirect - 方法: {'GET', 'POST', 'HEAD', 'OPTIONS'} - 终端: auth.dashboard_redirect
2025-05-09 15:25:34,021 - app - INFO - 路由: /create_test_user - 方法: {'POST', 'OPTIONS'} - 终端: auth.create_test_user
2025-05-09 15:25:34,021 - app - INFO - 路由: /check - 方法: {'GET', 'HEAD', 'OPTIONS'} - 终端: auth.check_auth
2025-05-09 15:25:34,022 - app - INFO - 路由: /create_test_project - 方法: {'POST', 'OPTIONS'} - 终端: auth.create_test_project
2025-05-09 15:25:34,022 - app - INFO - 路由: /logout_all - 方法: {'POST', 'OPTIONS'} - 终端: auth.logout_all
2025-05-09 15:25:34,023 - app - INFO - 路由: /dashboard/data - 方法: {'GET', 'HEAD', 'OPTIONS'} - 终端: auth.dashboard_data
2025-05-09 15:25:34,023 - app - INFO - 路由: /check_token - 方法: {'GET', 'HEAD', 'OPTIONS'} - 终端: auth.check_token
2025-05-09 15:25:34,023 - app - INFO - 路由: /create_user - 方法: {'POST', 'OPTIONS'} - 终端: auth.create_user
2025-05-09 15:25:34,023 - app - INFO - 路由: /user_info - 方法: {'GET', 'HEAD', 'OPTIONS'} - 终端: auth.get_user_info
2025-05-09 15:25:34,025 - app - INFO - 路由: /user/<int:user_id> - 方法: {'DELETE', 'OPTIONS'} - 终端: auth.delete_user
2025-05-09 15:25:34,025 - app - INFO - 路由: /users/<int:user_id>/roles - 方法: {'GET', 'HEAD', 'OPTIONS'} - 终端: auth.get_user_roles
2025-05-09 15:25:34,025 - app - INFO - 路由: /users/<int:user_id>/roles - 方法: {'PUT', 'OPTIONS'} - 终端: auth.update_user_roles
2025-05-09 15:25:34,025 - app - INFO - 路由: /users/<int:user_id>/notifications - 方法: {'GET', 'HEAD', 'OPTIONS'} - 终端: auth.get_user_notifications
2025-05-09 15:25:34,025 - app - INFO - 路由: /notifications/<int:notification_id>/read - 方法: {'PUT', 'OPTIONS'} - 终端: auth.mark_notification_as_read
2025-05-09 15:25:34,026 - app - INFO - 路由: /notifications/read_all - 方法: {'PUT', 'OPTIONS'} - 终端: auth.mark_all_notifications_as_read
2025-05-09 15:25:34,026 - app - INFO - 路由: /change-password - 方法: {'POST', 'OPTIONS'} - 终端: auth.change_password
2025-05-09 15:25:34,026 - app - INFO - 路由: /reset-password - 方法: {'GET', 'HEAD', 'OPTIONS'} - 终端: auth.reset_password_page
2025-05-09 15:25:34,026 - app - INFO - 路由: /verify-email/confirm - 方法: {'GET', 'HEAD', 'OPTIONS'} - 终端: auth.verify_email_confirm_page
2025-05-09 15:25:34,027 - app - INFO - 路由: /auth/csrf-token - 方法: {'GET', 'HEAD', 'OPTIONS'} - 终端: auth.get_csrf_token
2025-05-09 15:25:34,027 - app - INFO - 路由: /api/users/<int:user_id> - 方法: {'PUT', 'OPTIONS'} - 终端: auth.api_update_user
2025-05-09 15:25:34,027 - app - INFO - 路由: /api/users/<int:user_id> - 方法: {'DELETE', 'OPTIONS'} - 终端: auth.api_delete_user
2025-05-09 15:25:34,027 - app - INFO - 路由: /api/users - 方法: {'GET', 'HEAD', 'OPTIONS'} - 终端: auth.api_get_users
2025-05-09 15:25:34,028 - app - INFO - 路由: /api/users - 方法: {'POST', 'OPTIONS'} - 终端: auth.api_create_user
2025-05-09 15:25:34,029 - app - INFO - 路由: /auth/users/<int:user_id> - 方法: {'GET', 'HEAD', 'OPTIONS'} - 终端: auth.get_user_details
2025-05-09 15:25:34,029 - app - INFO - 路由: /api/users/<int:user_id> - 方法: {'HEAD', 'OPTIONS', 'GET', 'PUT', 'DELETE'} - 终端: auth.api_user_operations
2025-05-09 15:25:34,029 - app - INFO - 路由: /auth/user-csrf-token - 方法: {'GET', 'HEAD', 'OPTIONS'} - 终端: auth.get_user_csrf_token
2025-05-09 15:25:34,029 - app - INFO - 路由: /main/ - 方法: {'GET', 'HEAD', 'OPTIONS'} - 终端: main.index
2025-05-09 15:25:34,029 - app - INFO - 路由: /main/dashboard - 方法: {'GET', 'HEAD', 'OPTIONS'} - 终端: main.dashboard
2025-05-09 15:25:34,030 - app - INFO - 路由: /main/check_token - 方法: {'GET', 'HEAD', 'OPTIONS'} - 终端: main.check_token
2025-05-09 15:25:34,030 - app - INFO - 路由: /main/projects - 方法: {'GET', 'HEAD', 'OPTIONS'} - 终端: main.projects
2025-05-09 15:25:34,030 - app - INFO - 路由: /main/tasks - 方法: {'GET', 'HEAD', 'OPTIONS'} - 终端: main.tasks
2025-05-09 15:25:34,030 - app - INFO - 路由: /main/risks - 方法: {'GET', 'HEAD', 'OPTIONS'} - 终端: main.risks
2025-05-09 15:25:34,030 - app - INFO - 路由: /main/reports - 方法: {'GET', 'HEAD', 'OPTIONS'} - 终端: main.reports
2025-05-09 15:25:34,031 - app - INFO - 路由: /main/resources - 方法: {'GET', 'HEAD', 'OPTIONS'} - 终端: main.resources
2025-05-09 15:25:34,031 - app - INFO - 路由: /main/profile - 方法: {'GET', 'HEAD', 'OPTIONS'} - 终端: main.profile
2025-05-09 15:25:34,031 - app - INFO - 路由: /main/system/status - 方法: {'GET', 'HEAD', 'OPTIONS'} - 终端: main.system_status
2025-05-09 15:25:34,031 - app - INFO - 路由: /main/api/dashboard/data - 方法: {'GET', 'HEAD', 'OPTIONS'} - 终端: main.get_dashboard_data
2025-05-09 15:25:34,032 - app - INFO - 路由: /main/test - 方法: {'GET', 'HEAD', 'OPTIONS'} - 终端: main.test_route
2025-05-09 15:25:34,032 - app - INFO - 路由: /main/projects/detail/<int:project_id> - 方法: {'GET', 'HEAD', 'OPTIONS'} - 终端: main.project_detail_redirect
2025-05-09 15:25:34,033 - app - INFO - 路由: /main/users - 方法: {'GET', 'HEAD', 'OPTIONS'} - 终端: main.users
2025-05-09 15:25:34,033 - app - INFO - 路由: /main/debug/projects - 方法: {'GET', 'HEAD', 'OPTIONS'} - 终端: main.debug_projects
2025-05-09 15:25:34,033 - app - INFO - 路由: /main/simple/projects - 方法: {'GET', 'HEAD', 'OPTIONS'} - 终端: main.simple_projects
2025-05-09 15:25:34,034 - app - INFO - 路由: /main/static-test - 方法: {'GET', 'HEAD', 'OPTIONS'} - 终端: main.static_test
2025-05-09 15:25:34,034 - app - INFO - 路由: /main/print-projects - 方法: {'GET', 'HEAD', 'OPTIONS'} - 终端: main.print_projects
2025-05-09 15:25:34,034 - app - INFO - 路由: /main/bypass-projects - 方法: {'GET', 'HEAD', 'OPTIONS'} - 终端: main.bypass_projects
2025-05-09 15:25:34,034 - app - INFO - 路由: /main/debug-projects - 方法: {'GET', 'HEAD', 'OPTIONS'} - 终端: main.debug_projects_api
2025-05-09 15:25:34,034 - app - INFO - 路由: /projects/list - 方法: {'GET', 'HEAD', 'OPTIONS'} - 终端: projects.project_list
2025-05-09 15:25:34,035 - app - INFO - 路由: /projects/ - 方法: {'GET', 'HEAD', 'OPTIONS'} - 终端: projects.get_projects
2025-05-09 15:25:34,035 - app - INFO - 路由: /projects/ - 方法: {'POST', 'OPTIONS'} - 终端: projects.create_project
2025-05-09 15:25:34,035 - app - INFO - 路由: /projects/<int:project_id> - 方法: {'GET', 'HEAD', 'OPTIONS'} - 终端: projects.get_project
2025-05-09 15:25:34,035 - app - INFO - 路由: /projects/<int:project_id> - 方法: {'PUT', 'OPTIONS'} - 终端: projects.update_project
2025-05-09 15:25:34,035 - app - INFO - 路由: /projects/<int:project_id> - 方法: {'DELETE', 'OPTIONS'} - 终端: projects.delete_project
2025-05-09 15:25:34,036 - app - INFO - 路由: /projects/<int:project_id>/members - 方法: {'GET', 'HEAD', 'OPTIONS'} - 终端: projects.get_project_members
2025-05-09 15:25:34,036 - app - INFO - 路由: /projects/<int:project_id>/members - 方法: {'POST', 'OPTIONS'} - 终端: projects.add_project_member
2025-05-09 15:25:34,036 - app - INFO - 路由: /projects/<int:project_id>/members/<int:user_id> - 方法: {'DELETE', 'OPTIONS'} - 终端: projects.remove_project_member
2025-05-09 15:25:34,037 - app - INFO - 路由: /projects/detail/<int:project_id> - 方法: {'GET', 'HEAD', 'OPTIONS'} - 终端: projects.detail
2025-05-09 15:25:34,037 - app - INFO - 路由: /projects/api/detail/<int:project_id> - 方法: {'GET', 'HEAD', 'OPTIONS'} - 终端: projects.detail_api
2025-05-09 15:25:34,037 - app - INFO - 路由: /projects/api/projects/<int:project_id> - 方法: {'GET', 'HEAD', 'OPTIONS'} - 终端: projects.get_project_api
2025-05-09 15:25:34,037 - app - INFO - 路由: /projects/api/projects/<int:project_id> - 方法: {'PUT', 'OPTIONS'} - 终端: projects.update_project_api
2025-05-09 15:25:34,038 - app - INFO - 路由: /projects/api/projects/<int:project_id> - 方法: {'DELETE', 'OPTIONS'} - 终端: projects.delete_project_api
2025-05-09 15:25:34,038 - app - INFO - 路由: /projects/api/auth/projects - 方法: {'GET', 'HEAD', 'OPTIONS'} - 终端: projects.get_projects_api
2025-05-09 15:25:34,038 - app - INFO - 路由: /projects/api/auth/projects/<int:project_id> - 方法: {'GET', 'HEAD', 'OPTIONS'} - 终端: projects.get_project_auth_api
2025-05-09 15:25:34,038 - app - INFO - 路由: /projects/api/noauth/projects/<int:project_id> - 方法: {'HEAD', 'OPTIONS', 'GET', 'PUT', 'DELETE'} - 终端: projects.get_project_noauth
2025-05-09 15:25:34,039 - app - INFO - 路由: /projects/api/auth/projects - 方法: {'POST', 'OPTIONS'} - 终端: projects.create_project_auth
2025-05-09 15:25:34,039 - app - INFO - 路由: /projects/api/project-managers - 方法: {'GET', 'HEAD', 'OPTIONS'} - 终端: projects.get_project_managers
2025-05-09 15:25:34,039 - app - INFO - 路由: /projects/api/projects - 方法: {'GET', 'HEAD', 'OPTIONS'} - 终端: projects.get_all_projects_api
2025-05-09 15:25:34,040 - app - INFO - 路由: /projects/api/active-projects - 方法: {'GET', 'HEAD', 'OPTIONS'} - 终端: projects.get_active_projects_api
2025-05-09 15:25:34,040 - app - INFO - 路由: /projects/api/projects/<int:project_id>/members - 方法: {'GET', 'HEAD', 'OPTIONS'} - 终端: projects.get_project_members_api
2025-05-09 15:25:34,041 - app - INFO - 路由: /list - 方法: {'GET', 'HEAD', 'OPTIONS'} - 终端: project_root.project_list
2025-05-09 15:25:34,041 - app - INFO - 路由: / - 方法: {'GET', 'HEAD', 'OPTIONS'} - 终端: project_root.get_projects
2025-05-09 15:25:34,041 - app - INFO - 路由: / - 方法: {'POST', 'OPTIONS'} - 终端: project_root.create_project
2025-05-09 15:25:34,041 - app - INFO - 路由: /<int:project_id> - 方法: {'GET', 'HEAD', 'OPTIONS'} - 终端: project_root.get_project
2025-05-09 15:25:34,042 - app - INFO - 路由: /<int:project_id> - 方法: {'PUT', 'OPTIONS'} - 终端: project_root.update_project
2025-05-09 15:25:34,042 - app - INFO - 路由: /<int:project_id> - 方法: {'DELETE', 'OPTIONS'} - 终端: project_root.delete_project
2025-05-09 15:25:34,042 - app - INFO - 路由: /<int:project_id>/members - 方法: {'GET', 'HEAD', 'OPTIONS'} - 终端: project_root.get_project_members
2025-05-09 15:25:34,042 - app - INFO - 路由: /<int:project_id>/members - 方法: {'POST', 'OPTIONS'} - 终端: project_root.add_project_member
2025-05-09 15:25:34,042 - app - INFO - 路由: /<int:project_id>/members/<int:user_id> - 方法: {'DELETE', 'OPTIONS'} - 终端: project_root.remove_project_member
2025-05-09 15:25:34,043 - app - INFO - 路由: /detail/<int:project_id> - 方法: {'GET', 'HEAD', 'OPTIONS'} - 终端: project_root.detail
2025-05-09 15:25:34,043 - app - INFO - 路由: /api/detail/<int:project_id> - 方法: {'GET', 'HEAD', 'OPTIONS'} - 终端: project_root.detail_api
2025-05-09 15:25:34,043 - app - INFO - 路由: /api/projects/<int:project_id> - 方法: {'GET', 'HEAD', 'OPTIONS'} - 终端: project_root.get_project_api
2025-05-09 15:25:34,043 - app - INFO - 路由: /api/projects/<int:project_id> - 方法: {'PUT', 'OPTIONS'} - 终端: project_root.update_project_api
2025-05-09 15:25:34,044 - app - INFO - 路由: /api/projects/<int:project_id> - 方法: {'DELETE', 'OPTIONS'} - 终端: project_root.delete_project_api
2025-05-09 15:25:34,044 - app - INFO - 路由: /api/auth/projects - 方法: {'GET', 'HEAD', 'OPTIONS'} - 终端: project_root.get_projects_api
2025-05-09 15:25:34,044 - app - INFO - 路由: /api/auth/projects/<int:project_id> - 方法: {'GET', 'HEAD', 'OPTIONS'} - 终端: project_root.get_project_auth_api
2025-05-09 15:25:34,044 - app - INFO - 路由: /api/noauth/projects/<int:project_id> - 方法: {'HEAD', 'OPTIONS', 'GET', 'PUT', 'DELETE'} - 终端: project_root.get_project_noauth
2025-05-09 15:25:34,044 - app - INFO - 路由: /api/auth/projects - 方法: {'POST', 'OPTIONS'} - 终端: project_root.create_project_auth
2025-05-09 15:25:34,044 - app - INFO - 路由: /api/project-managers - 方法: {'GET', 'HEAD', 'OPTIONS'} - 终端: project_root.get_project_managers
2025-05-09 15:25:34,045 - app - INFO - 路由: /api/projects - 方法: {'GET', 'HEAD', 'OPTIONS'} - 终端: project_root.get_all_projects_api
2025-05-09 15:25:34,045 - app - INFO - 路由: /api/active-projects - 方法: {'GET', 'HEAD', 'OPTIONS'} - 终端: project_root.get_active_projects_api
2025-05-09 15:25:34,045 - app - INFO - 路由: /api/projects/<int:project_id>/members - 方法: {'GET', 'HEAD', 'OPTIONS'} - 终端: project_root.get_project_members_api
2025-05-09 15:25:34,046 - app - INFO - 路由: /tasks/ - 方法: {'GET', 'HEAD', 'OPTIONS'} - 终端: tasks.get_tasks
2025-05-09 15:25:34,046 - app - INFO - 路由: /tasks/ - 方法: {'POST', 'OPTIONS'} - 终端: tasks.create_task
2025-05-09 15:25:34,046 - app - INFO - 路由: /tasks/<int:task_id> - 方法: {'GET', 'HEAD', 'OPTIONS'} - 终端: tasks.get_task
2025-05-09 15:25:34,046 - app - INFO - 路由: /tasks/<int:task_id> - 方法: {'PUT', 'OPTIONS'} - 终端: tasks.update_task
2025-05-09 15:25:34,047 - app - INFO - 路由: /tasks/<int:task_id> - 方法: {'DELETE', 'OPTIONS'} - 终端: tasks.delete_task
2025-05-09 15:25:34,047 - app - INFO - 路由: /tasks/<int:task_id>/comments - 方法: {'GET', 'HEAD', 'OPTIONS'} - 终端: tasks.get_task_comments
2025-05-09 15:25:34,047 - app - INFO - 路由: /tasks/<int:task_id>/comments - 方法: {'POST', 'OPTIONS'} - 终端: tasks.add_task_comment
2025-05-09 15:25:34,047 - app - INFO - 路由: /tasks/<int:task_id>/attachments - 方法: {'GET', 'HEAD', 'OPTIONS'} - 终端: tasks.get_task_attachments
2025-05-09 15:25:34,048 - app - INFO - 路由: /tasks/<int:task_id>/attachments - 方法: {'POST', 'OPTIONS'} - 终端: tasks.add_task_attachment
2025-05-09 15:25:34,048 - app - INFO - 路由: /tasks/<int:task_id>/resources - 方法: {'GET', 'HEAD', 'OPTIONS'} - 终端: tasks.get_task_resources
2025-05-09 15:25:34,048 - app - INFO - 路由: /tasks/<int:task_id>/subtasks - 方法: {'GET', 'HEAD', 'OPTIONS'} - 终端: tasks.get_subtasks
2025-05-09 15:25:34,048 - app - INFO - 路由: /tasks/<int:task_id>/subtasks - 方法: {'POST', 'OPTIONS'} - 终端: tasks.create_subtask
2025-05-09 15:25:34,048 - app - INFO - 路由: /tasks/<int:task_id>/dependencies - 方法: {'GET', 'HEAD', 'OPTIONS'} - 终端: tasks.get_dependencies
2025-05-09 15:25:34,048 - app - INFO - 路由: /tasks/<int:task_id>/dependencies - 方法: {'POST', 'OPTIONS'} - 终端: tasks.add_dependency
2025-05-09 15:25:34,049 - app - INFO - 路由: /tasks/<int:task_id>/logs - 方法: {'GET', 'HEAD', 'OPTIONS'} - 终端: tasks.get_task_logs
2025-05-09 15:25:34,049 - app - INFO - 路由: /tasks/<int:task_id>/logs - 方法: {'POST', 'OPTIONS'} - 终端: tasks.add_task_log
2025-05-09 15:25:34,049 - app - INFO - 路由: /tasks/project/<int:project_id>/gantt - 方法: {'GET', 'HEAD', 'OPTIONS'} - 终端: tasks.gantt_chart
2025-05-09 15:25:34,049 - app - INFO - 路由: /tasks/project/<int:project_id>/gantt/data - 方法: {'GET', 'HEAD', 'OPTIONS'} - 终端: tasks.get_gantt_data
2025-05-09 15:25:34,050 - app - INFO - 路由: /tasks/<int:task_id>/gantt - 方法: {'PUT', 'OPTIONS'} - 终端: tasks.update_gantt_task
2025-05-09 15:25:34,050 - app - INFO - 路由: /tasks/dependencies/gantt - 方法: {'POST', 'OPTIONS'} - 终端: tasks.create_gantt_dependency
2025-05-09 15:25:34,050 - app - INFO - 路由: /tasks/<int:task_id>/dependencies/<int:dependency_id>/gantt - 方法: {'DELETE', 'OPTIONS'} - 终端: tasks.delete_gantt_dependency
2025-05-09 15:25:34,050 - app - INFO - 路由: /tasks/<int:task_id>/status - 方法: {'PUT', 'OPTIONS'} - 终端: tasks.update_task_status
2025-05-09 15:25:34,052 - app - INFO - 路由: /tasks/api/tasks/dependencies - 方法: {'POST', 'OPTIONS'} - 终端: tasks.add_task_dependency
2025-05-09 15:25:34,052 - app - INFO - 路由: /tasks/<int:task_id>/detail - 方法: {'GET', 'HEAD', 'OPTIONS'} - 终端: tasks.task_detail_api
2025-05-09 15:25:34,052 - app - INFO - 路由: /tasks/api/auth/tasks/<int:task_id>/detail - 方法: {'GET', 'HEAD', 'OPTIONS'} - 终端: tasks.task_detail_api_auth
2025-05-09 15:25:34,052 - app - INFO - 路由: /tasks/<int:task_id>/view - 方法: {'GET', 'HEAD', 'OPTIONS'} - 终端: tasks.task_detail_page
2025-05-09 15:25:34,053 - app - INFO - 路由: /tasks/<int:task_id>/edit - 方法: {'GET', 'HEAD', 'OPTIONS'} - 终端: tasks.edit_task_page
2025-05-09 15:25:34,053 - app - INFO - 路由: /tasks/api/auth/tasks/<int:task_id>/attachments - 方法: {'POST', 'OPTIONS'} - 终端: tasks.add_task_attachment_auth
2025-05-09 15:25:34,053 - app - INFO - 路由: /tasks/api/auth/tasks/<int:task_id>/attachments/<int:attachment_id>/download - 方法: {'GET', 'HEAD', 'OPTIONS'} - 终端: tasks.download_attachment_auth
2025-05-09 15:25:34,054 - app - INFO - 路由: /tasks/api/tasks/<int:task_id>/attachments - 方法: {'POST', 'OPTIONS'} - 终端: tasks.upload_attachment
2025-05-09 15:25:34,054 - app - INFO - 路由: /tasks/api/tasks/<int:task_id>/attachments/<int:attachment_id>/download - 方法: {'GET', 'HEAD', 'OPTIONS'} - 终端: tasks.download_attachment
2025-05-09 15:25:34,054 - app - INFO - 路由: /tasks/api/tasks/<int:task_id>/attachments/<int:attachment_id> - 方法: {'DELETE', 'OPTIONS'} - 终端: tasks.delete_attachment
2025-05-09 15:25:34,054 - app - INFO - 路由: /tasks/api/tasks/<int:task_id>/attachments/<int:attachment_id>/versions - 方法: {'POST', 'OPTIONS'} - 终端: tasks.upload_new_version
2025-05-09 15:25:34,054 - app - INFO - 路由: /tasks/api/tasks/<int:task_id>/attachments/<int:attachment_id>/versions - 方法: {'GET', 'HEAD', 'OPTIONS'} - 终端: tasks.get_attachment_versions
2025-05-09 15:25:34,055 - app - INFO - 路由: /tasks/api/tasks/<int:task_id>/risks - 方法: {'GET', 'HEAD', 'OPTIONS'} - 终端: tasks.task_risks_front_path
2025-05-09 15:25:34,055 - app - INFO - 路由: /tasks/<int:task_id>/risks - 方法: {'POST', 'OPTIONS'} - 终端: tasks.create_task_risk_front_path
2025-05-09 15:25:34,055 - app - INFO - 路由: /tasks/api/tasks/<int:task_id>/progress - 方法: {'GET', 'HEAD', 'OPTIONS'} - 终端: tasks.get_task_progress
2025-05-09 15:25:34,055 - app - INFO - 路由: /tasks/api/tasks/<int:task_id>/progress - 方法: {'POST', 'OPTIONS'} - 终端: tasks.update_task_progress
2025-05-09 15:25:34,056 - app - INFO - 路由: /tasks/api/tasks/<int:task_id>/progress/approve - 方法: {'POST', 'OPTIONS'} - 终端: tasks.approve_task_progress
2025-05-09 15:25:34,056 - app - INFO - 路由: /tasks/list - 方法: {'GET', 'HEAD', 'OPTIONS'} - 终端: tasks.task_list
2025-05-09 15:25:34,057 - app - INFO - 路由: /tasks/api/auth/tasks/<int:task_id>/logs - 方法: {'GET', 'HEAD', 'OPTIONS'} - 终端: tasks.get_task_logs_auth
2025-05-09 15:25:34,057 - app - INFO - 路由: /tasks/api/auth/tasks/<int:task_id>/subtasks - 方法: {'GET', 'HEAD', 'OPTIONS'} - 终端: tasks.get_subtasks_auth
2025-05-09 15:25:34,057 - app - INFO - 路由: /tasks/api/auth/tasks/<int:task_id>/comments - 方法: {'GET', 'HEAD', 'OPTIONS'} - 终端: tasks.get_task_comments_auth
2025-05-09 15:25:34,058 - app - INFO - 路由: /tasks/api/auth/tasks/<int:task_id>/attachments - 方法: {'GET', 'HEAD', 'OPTIONS'} - 终端: tasks.get_task_attachments_auth
2025-05-09 15:25:34,058 - app - INFO - 路由: /tasks/api/auth/tasks/<int:task_id>/risks - 方法: {'GET', 'HEAD', 'OPTIONS'} - 终端: tasks.get_task_risks_auth
2025-05-09 15:25:34,059 - app - INFO - 路由: /tasks/api/auth/tasks/<int:task_id>/risks - 方法: {'POST', 'OPTIONS'} - 终端: tasks.create_task_risk_auth
2025-05-09 15:25:34,059 - app - INFO - 路由: /tasks/api/auth/tasks/<int:task_id>/comments - 方法: {'POST', 'OPTIONS'} - 终端: tasks.add_task_comment_auth
2025-05-09 15:25:34,059 - app - INFO - 路由: /tasks/api/tasks/<int:task_id> - 方法: {'PUT', 'OPTIONS'} - 终端: tasks.api_update_task
2025-05-09 15:25:34,059 - app - INFO - 路由: /tasks/api/tasks/<int:task_id>/update_bypass - 方法: {'PUT', 'OPTIONS'} - 终端: tasks.update_task_bypass_csrf
2025-05-09 15:25:34,059 - app - INFO - 路由: /tasks/get-csrf-token - 方法: {'GET', 'HEAD', 'OPTIONS'} - 终端: tasks.get_csrf_token
2025-05-09 15:25:34,060 - app - INFO - 路由: /tasks/api/tasks/<int:task_id>/no_csrf - 方法: {'PUT', 'OPTIONS'} - 终端: tasks.update_task_no_csrf
2025-05-09 15:25:34,060 - app - INFO - 路由: /tasks/api/tasks/<int:task_id>/detail - 方法: {'GET', 'HEAD', 'OPTIONS'} - 终端: tasks.api_tasks_detail
2025-05-09 15:25:34,104 - app - WARNING - team_bp 未定义或无法导入
2025-05-09 15:25:34,219 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-05-09 15:25:34,221 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions 
WHERE permissions.name = ?
 LIMIT ? OFFSET ?
2025-05-09 15:25:34,221 - sqlalchemy.engine.Engine - INFO - [generated in 0.00034s] ('manage_users', 1, 0)
2025-05-09 15:25:34,222 - app.utils.permissions - INFO - 更新权限: manage_users
2025-05-09 15:25:34,223 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions 
WHERE permissions.name = ?
 LIMIT ? OFFSET ?
2025-05-09 15:25:34,223 - sqlalchemy.engine.Engine - INFO - [cached since 0.002333s ago] ('manage_roles', 1, 0)
2025-05-09 15:25:34,223 - app.utils.permissions - INFO - 更新权限: manage_roles
2025-05-09 15:25:34,223 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions 
WHERE permissions.name = ?
 LIMIT ? OFFSET ?
2025-05-09 15:25:34,225 - sqlalchemy.engine.Engine - INFO - [cached since 0.003331s ago] ('manage_all_projects', 1, 0)
2025-05-09 15:25:34,225 - app.utils.permissions - INFO - 更新权限: manage_all_projects
2025-05-09 15:25:34,225 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions 
WHERE permissions.name = ?
 LIMIT ? OFFSET ?
2025-05-09 15:25:34,226 - sqlalchemy.engine.Engine - INFO - [cached since 0.004319s ago] ('manage_project', 1, 0)
2025-05-09 15:25:34,226 - app.utils.permissions - INFO - 更新权限: manage_project
2025-05-09 15:25:34,226 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions 
WHERE permissions.name = ?
 LIMIT ? OFFSET ?
2025-05-09 15:25:34,226 - sqlalchemy.engine.Engine - INFO - [cached since 0.005372s ago] ('manage_all_tasks', 1, 0)
2025-05-09 15:25:34,227 - app.utils.permissions - INFO - 更新权限: manage_all_tasks
2025-05-09 15:25:34,227 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions 
WHERE permissions.name = ?
 LIMIT ? OFFSET ?
2025-05-09 15:25:34,227 - sqlalchemy.engine.Engine - INFO - [cached since 0.006257s ago] ('manage_task', 1, 0)
2025-05-09 15:25:34,227 - app.utils.permissions - INFO - 更新权限: manage_task
2025-05-09 15:25:34,228 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions 
WHERE permissions.name = ?
 LIMIT ? OFFSET ?
2025-05-09 15:25:34,228 - sqlalchemy.engine.Engine - INFO - [cached since 0.007072s ago] ('view_project', 1, 0)
2025-05-09 15:25:34,228 - app.utils.permissions - INFO - 更新权限: view_project
2025-05-09 15:25:34,229 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions 
WHERE permissions.name = ?
 LIMIT ? OFFSET ?
2025-05-09 15:25:34,229 - sqlalchemy.engine.Engine - INFO - [cached since 0.007887s ago] ('view_task', 1, 0)
2025-05-09 15:25:34,229 - app.utils.permissions - INFO - 更新权限: view_task
2025-05-09 15:25:34,229 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions 
WHERE permissions.name = ?
 LIMIT ? OFFSET ?
2025-05-09 15:25:34,229 - sqlalchemy.engine.Engine - INFO - [cached since 0.008745s ago] ('manage_resources', 1, 0)
2025-05-09 15:25:34,230 - app.utils.permissions - INFO - 更新权限: manage_resources
2025-05-09 15:25:34,230 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions 
WHERE permissions.name = ?
 LIMIT ? OFFSET ?
2025-05-09 15:25:34,230 - sqlalchemy.engine.Engine - INFO - [cached since 0.009779s ago] ('manage_risks', 1, 0)
2025-05-09 15:25:34,231 - app.utils.permissions - INFO - 更新权限: manage_risks
2025-05-09 15:25:34,231 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions 
WHERE permissions.name = ?
 LIMIT ? OFFSET ?
2025-05-09 15:25:34,232 - sqlalchemy.engine.Engine - INFO - [cached since 0.01111s ago] ('view_reports', 1, 0)
2025-05-09 15:25:34,232 - app.utils.permissions - INFO - 更新权限: view_reports
2025-05-09 15:25:34,232 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions 
WHERE permissions.name = ?
 LIMIT ? OFFSET ?
2025-05-09 15:25:34,233 - sqlalchemy.engine.Engine - INFO - [cached since 0.01207s ago] ('create_task', 1, 0)
2025-05-09 15:25:34,233 - app.utils.permissions - INFO - 更新权限: create_task
2025-05-09 15:25:34,233 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions 
WHERE permissions.name = ?
 LIMIT ? OFFSET ?
2025-05-09 15:25:34,233 - sqlalchemy.engine.Engine - INFO - [cached since 0.01289s ago] ('create_project', 1, 0)
2025-05-09 15:25:34,234 - app.utils.permissions - INFO - 更新权限: create_project
2025-05-09 15:25:34,234 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions 
WHERE permissions.name = ?
 LIMIT ? OFFSET ?
2025-05-09 15:25:34,234 - sqlalchemy.engine.Engine - INFO - [cached since 0.01384s ago] ('assign_task', 1, 0)
2025-05-09 15:25:34,236 - app.utils.permissions - INFO - 更新权限: assign_task
2025-05-09 15:25:34,236 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions 
WHERE permissions.name = ?
 LIMIT ? OFFSET ?
2025-05-09 15:25:34,236 - sqlalchemy.engine.Engine - INFO - [cached since 0.01508s ago] ('change_project_status', 1, 0)
2025-05-09 15:25:34,237 - app.utils.permissions - INFO - 更新权限: change_project_status
2025-05-09 15:25:34,237 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions 
WHERE permissions.name = ?
 LIMIT ? OFFSET ?
2025-05-09 15:25:34,237 - sqlalchemy.engine.Engine - INFO - [cached since 0.01605s ago] ('change_task_status', 1, 0)
2025-05-09 15:25:34,237 - app.utils.permissions - INFO - 更新权限: change_task_status
2025-05-09 15:25:34,238 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-05-09 15:25:34,238 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-05-09 15:25:34,239 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions
2025-05-09 15:25:34,239 - sqlalchemy.engine.Engine - INFO - [generated in 0.00023s] ()
2025-05-09 15:25:34,241 - sqlalchemy.engine.Engine - INFO - SELECT roles.id AS roles_id, roles.name AS roles_name, roles.description AS roles_description, roles.created_at AS roles_created_at 
FROM roles 
WHERE roles.name = ?
 LIMIT ? OFFSET ?
2025-05-09 15:25:34,241 - sqlalchemy.engine.Engine - INFO - [generated in 0.00036s] ('admin', 1, 0)
2025-05-09 15:25:34,241 - app.utils.permissions - INFO - 更新角色: admin
2025-05-09 15:25:34,243 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions, role_permissions 
WHERE ? = role_permissions.role_id AND permissions.id = role_permissions.permission_id
2025-05-09 15:25:34,243 - sqlalchemy.engine.Engine - INFO - [generated in 0.00031s] (1,)
2025-05-09 15:25:34,243 - app.utils.permissions - INFO - 为管理员角色添加所有权限: 16个
2025-05-09 15:25:34,244 - sqlalchemy.engine.Engine - INFO - SELECT roles.id AS roles_id, roles.name AS roles_name, roles.description AS roles_description, roles.created_at AS roles_created_at 
FROM roles 
WHERE roles.name = ?
 LIMIT ? OFFSET ?
2025-05-09 15:25:34,244 - sqlalchemy.engine.Engine - INFO - [cached since 0.004442s ago] ('manager', 1, 0)
2025-05-09 15:25:34,246 - app.utils.permissions - INFO - 更新角色: manager
2025-05-09 15:25:34,246 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions, role_permissions 
WHERE ? = role_permissions.role_id AND permissions.id = role_permissions.permission_id
2025-05-09 15:25:34,246 - sqlalchemy.engine.Engine - INFO - [cached since 0.002768s ago] (2,)
2025-05-09 15:25:34,247 - app.utils.permissions - INFO - 为角色 manager 添加权限: manage_project
2025-05-09 15:25:34,247 - app.utils.permissions - INFO - 为角色 manager 添加权限: manage_task
2025-05-09 15:25:34,247 - app.utils.permissions - INFO - 为角色 manager 添加权限: view_project
2025-05-09 15:25:34,247 - app.utils.permissions - INFO - 为角色 manager 添加权限: view_task
2025-05-09 15:25:34,248 - app.utils.permissions - INFO - 为角色 manager 添加权限: manage_resources
2025-05-09 15:25:34,248 - app.utils.permissions - INFO - 为角色 manager 添加权限: manage_risks
2025-05-09 15:25:34,248 - app.utils.permissions - INFO - 为角色 manager 添加权限: view_reports
2025-05-09 15:25:34,248 - app.utils.permissions - INFO - 为角色 manager 添加权限: create_project
2025-05-09 15:25:34,248 - app.utils.permissions - INFO - 为角色 manager 添加权限: create_task
2025-05-09 15:25:34,248 - app.utils.permissions - INFO - 为角色 manager 添加权限: assign_task
2025-05-09 15:25:34,249 - app.utils.permissions - INFO - 为角色 manager 添加权限: change_project_status
2025-05-09 15:25:34,249 - app.utils.permissions - INFO - 为角色 manager 添加权限: change_task_status
2025-05-09 15:25:34,249 - sqlalchemy.engine.Engine - INFO - SELECT roles.id AS roles_id, roles.name AS roles_name, roles.description AS roles_description, roles.created_at AS roles_created_at 
FROM roles 
WHERE roles.name = ?
 LIMIT ? OFFSET ?
2025-05-09 15:25:34,249 - sqlalchemy.engine.Engine - INFO - [cached since 0.008713s ago] ('user', 1, 0)
2025-05-09 15:25:34,250 - app.utils.permissions - INFO - 更新角色: user
2025-05-09 15:25:34,250 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions, role_permissions 
WHERE ? = role_permissions.role_id AND permissions.id = role_permissions.permission_id
2025-05-09 15:25:34,250 - sqlalchemy.engine.Engine - INFO - [cached since 0.006886s ago] (5,)
2025-05-09 15:25:34,250 - app.utils.permissions - INFO - 为角色 user 添加权限: view_project
2025-05-09 15:25:34,250 - app.utils.permissions - INFO - 为角色 user 添加权限: view_task
2025-05-09 15:25:34,251 - app.utils.permissions - INFO - 为角色 user 添加权限: view_reports
2025-05-09 15:25:34,251 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-05-09 15:25:34,251 - app.utils.permissions - INFO - 角色和权限初始化完成
2025-05-09 15:25:34,252 - __main__ - INFO - 角色和权限初始化成功
2025-05-09 15:25:34,252 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-05-09 15:25:34,253 - sqlalchemy.engine.Engine - INFO - SELECT users.id AS users_id, users.username AS users_username, users.email AS users_email, users.name AS users_name, users.password_hash AS users_password_hash, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.last_login AS users_last_login 
FROM users 
WHERE users.username = ?
 LIMIT ? OFFSET ?
2025-05-09 15:25:34,253 - sqlalchemy.engine.Engine - INFO - [generated in 0.00032s] ('system', 1, 0)
2025-05-09 15:25:34,255 - sqlalchemy.engine.Engine - INFO - SELECT projects.id AS projects_id, projects.name AS projects_name, projects.description AS projects_description, projects.status AS projects_status, projects.start_date AS projects_start_date, projects.end_date AS projects_end_date, projects.progress AS projects_progress, projects.created_at AS projects_created_at, projects.updated_at AS projects_updated_at, projects.manager_id AS projects_manager_id, projects.owner_id AS projects_owner_id 
FROM projects 
WHERE projects.name = ?
 LIMIT ? OFFSET ?
2025-05-09 15:25:34,255 - sqlalchemy.engine.Engine - INFO - [generated in 0.00039s] ('Test Project', 1, 0)
2025-05-09 15:25:34,255 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-05-09 15:25:34,256 - __main__ - INFO - 数据库初始化完成
2025-05-09 15:25:34,256 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-05-09 15:25:34,256 - sqlalchemy.engine.Engine - INFO - SELECT users.id AS users_id, users.username AS users_username, users.email AS users_email, users.name AS users_name, users.password_hash AS users_password_hash, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.last_login AS users_last_login 
FROM users 
WHERE users.username = ?
 LIMIT ? OFFSET ?
2025-05-09 15:25:34,257 - sqlalchemy.engine.Engine - INFO - [cached since 0.004018s ago] ('system', 1, 0)
2025-05-09 15:25:34,263 - sqlalchemy.engine.Engine - INFO - INSERT INTO resource_usages (user_id, cpu_usage, memory_usage, disk_usage, network_usage, recorded_at) VALUES (?, ?, ?, ?, ?, ?)
2025-05-09 15:25:34,264 - sqlalchemy.engine.Engine - INFO - [generated in 0.00039s] (2, 14.1, 52.3, 10.9, 0.0, '2025-05-09 07:25:34.262125')
2025-05-09 15:25:34,266 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-05-09 15:25:34,270 - __main__ - INFO - 系统资源检查完成
2025-05-09 15:25:34,271 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-05-09 15:25:34,271 - sqlalchemy.engine.Engine - INFO - DELETE FROM resource_usages WHERE resource_usages.recorded_at < ?
2025-05-09 15:25:34,271 - sqlalchemy.engine.Engine - INFO - [generated in 0.00032s] ('2025-04-09 07:25:34.270074',)
2025-05-09 15:25:34,272 - sqlalchemy.engine.Engine - INFO - DELETE FROM system_alerts WHERE system_alerts.is_resolved = 1 AND system_alerts.created_at < ?
2025-05-09 15:25:34,272 - sqlalchemy.engine.Engine - INFO - [generated in 0.00027s] ('2025-05-02 07:25:34.272503',)
2025-05-09 15:25:34,273 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-05-09 15:25:34,273 - __main__ - INFO - 旧数据清理完成
2025-05-09 15:25:34,279 - werkzeug - WARNING -  * Debugger is active!
2025-05-09 15:25:34,282 - werkzeug - INFO -  * Debugger PIN: 670-037-726
2025-05-09 15:25:43,442 - werkzeug - INFO -  * Detected change in 'D:\\tmp\\work\\app\\routes\\tasks.py', reloading
2025-05-09 15:25:43,716 - werkzeug - INFO -  * Restarting with stat
2025-05-09 15:25:44,280 - app - INFO - File logging handler initialized successfully
2025-05-09 15:25:44,281 - app - INFO - Console logging handler initialized successfully
2025-05-09 15:25:44,281 - app - INFO - Application logging configuration completed
2025-05-09 15:25:44,281 - app - INFO - Development configuration initialized
2025-05-09 15:25:44,312 - app - INFO - Logging setup completed successfully
2025-05-09 15:25:44,568 - app - INFO - 已注册的路由:
2025-05-09 15:25:44,569 - app - INFO - 路由: /static/<path:filename> - 方法: {'OPTIONS', 'GET', 'HEAD'} - 终端: static
2025-05-09 15:25:44,570 - app - INFO - 路由: /api/users/<int:user_id> - 方法: {'OPTIONS', 'DELETE', 'POST', 'HEAD', 'PUT', 'GET'} - 终端: user_api_exempt.user_api_exempt_route
2025-05-09 15:25:44,570 - app - INFO - 路由: /api/users - 方法: {'OPTIONS', 'DELETE', 'POST', 'HEAD', 'PUT', 'GET'} - 终端: user_api_exempt.user_api_exempt_route
2025-05-09 15:25:44,570 - app - INFO - 路由: /tasks/<int:task_id>/dependencies/<int:dependency_id>/gantt - 方法: {'OPTIONS', 'DELETE'} - 终端: task_api_exempt.task_api_exempt_route
2025-05-09 15:25:44,570 - app - INFO - 路由: /tasks/<int:task_id>/gantt - 方法: {'PUT', 'OPTIONS'} - 终端: task_api_exempt.task_api_exempt_route
2025-05-09 15:25:44,571 - app - INFO - 路由: /tasks/project/<int:project_id>/gantt - 方法: {'OPTIONS', 'GET', 'HEAD'} - 终端: task_api_exempt.task_api_exempt_route
2025-05-09 15:25:44,571 - app - INFO - 路由: /tasks/project/<int:project_id>/gantt/data - 方法: {'OPTIONS', 'GET', 'HEAD'} - 终端: task_api_exempt.task_api_exempt_route
2025-05-09 15:25:44,571 - app - INFO - 路由: /api/tasks/<int:task_id>/no_csrf - 方法: {'OPTIONS', 'DELETE', 'POST', 'HEAD', 'PUT', 'GET'} - 终端: task_api_exempt.task_api_exempt_route
2025-05-09 15:25:44,571 - app - INFO - 路由: /api/tasks/<int:task_id> - 方法: {'OPTIONS', 'DELETE', 'POST', 'HEAD', 'PUT', 'GET'} - 终端: task_api_exempt.task_api_exempt_route
2025-05-09 15:25:44,571 - app - INFO - 路由: /tasks/dependencies/gantt - 方法: {'OPTIONS', 'POST'} - 终端: task_api_exempt.task_api_exempt_route
2025-05-09 15:25:44,572 - app - INFO - 路由: /api/tasks - 方法: {'OPTIONS', 'DELETE', 'POST', 'HEAD', 'PUT', 'GET'} - 终端: task_api_exempt.task_api_exempt_route
2025-05-09 15:25:44,572 - app - INFO - 路由: /login - 方法: {'OPTIONS', 'GET', 'HEAD'} - 终端: auth.login_page
2025-05-09 15:25:44,572 - app - INFO - 路由: /login - 方法: {'OPTIONS', 'POST'} - 终端: auth.login
2025-05-09 15:25:44,572 - app - INFO - 路由: /register - 方法: {'OPTIONS', 'GET', 'HEAD'} - 终端: auth.register_page
2025-05-09 15:25:44,572 - app - INFO - 路由: /register - 方法: {'OPTIONS', 'POST'} - 终端: auth.register
2025-05-09 15:25:44,573 - app - INFO - 路由: /logout - 方法: {'OPTIONS', 'GET', 'HEAD', 'POST'} - 终端: auth.logout
2025-05-09 15:25:44,573 - app - INFO - 路由: /refresh - 方法: {'OPTIONS', 'POST'} - 终端: auth.refresh
2025-05-09 15:25:44,573 - app - INFO - 路由: /profile - 方法: {'OPTIONS', 'GET', 'HEAD'} - 终端: auth.profile
2025-05-09 15:25:44,573 - app - INFO - 路由: /profile - 方法: {'PUT', 'OPTIONS'} - 终端: auth.update_profile
2025-05-09 15:25:44,573 - app - INFO - 路由: /users - 方法: {'OPTIONS', 'GET', 'HEAD'} - 终端: auth.get_users
2025-05-09 15:25:44,574 - app - INFO - 路由: /users/<int:user_id> - 方法: {'OPTIONS', 'GET', 'HEAD'} - 终端: auth.get_user_by_id
2025-05-09 15:25:44,574 - app - INFO - 路由: /update_user/<int:user_id> - 方法: {'PUT', 'OPTIONS'} - 终端: auth.update_user
2025-05-09 15:25:44,575 - app - INFO - 路由: /roles - 方法: {'OPTIONS', 'GET', 'HEAD'} - 终端: auth.get_roles
2025-05-09 15:25:44,575 - app - INFO - 路由: /permissions - 方法: {'OPTIONS', 'GET', 'HEAD'} - 终端: auth.get_permissions
2025-05-09 15:25:44,575 - app - INFO - 路由: /permissions - 方法: {'OPTIONS', 'POST'} - 终端: auth.create_permission
2025-05-09 15:25:44,576 - app - INFO - 路由: /permissions/<int:permission_id> - 方法: {'OPTIONS', 'GET', 'HEAD'} - 终端: auth.get_permission
2025-05-09 15:25:44,576 - app - INFO - 路由: /permissions/<int:permission_id> - 方法: {'PUT', 'OPTIONS'} - 终端: auth.update_permission
2025-05-09 15:25:44,576 - app - INFO - 路由: /permissions/<int:permission_id> - 方法: {'OPTIONS', 'DELETE'} - 终端: auth.delete_permission
2025-05-09 15:25:44,576 - app - INFO - 路由: /roles - 方法: {'OPTIONS', 'POST'} - 终端: auth.create_role
2025-05-09 15:25:44,576 - app - INFO - 路由: /roles/<int:role_id> - 方法: {'OPTIONS', 'GET', 'HEAD'} - 终端: auth.get_role
2025-05-09 15:25:44,577 - app - INFO - 路由: /roles/<int:role_id>/permissions - 方法: {'PUT', 'OPTIONS'} - 终端: auth.update_role_permissions
2025-05-09 15:25:44,577 - app - INFO - 路由: /roles/<int:role_id> - 方法: {'OPTIONS', 'DELETE'} - 终端: auth.delete_role
2025-05-09 15:25:44,577 - app - INFO - 路由: /dashboard - 方法: {'OPTIONS', 'GET', 'HEAD'} - 终端: auth.dashboard
2025-05-09 15:25:44,577 - app - INFO - 路由: /dashboard/redirect - 方法: {'OPTIONS', 'GET', 'HEAD', 'POST'} - 终端: auth.dashboard_redirect
2025-05-09 15:25:44,577 - app - INFO - 路由: /create_test_user - 方法: {'OPTIONS', 'POST'} - 终端: auth.create_test_user
2025-05-09 15:25:44,577 - app - INFO - 路由: /check - 方法: {'OPTIONS', 'GET', 'HEAD'} - 终端: auth.check_auth
2025-05-09 15:25:44,578 - app - INFO - 路由: /create_test_project - 方法: {'OPTIONS', 'POST'} - 终端: auth.create_test_project
2025-05-09 15:25:44,578 - app - INFO - 路由: /logout_all - 方法: {'OPTIONS', 'POST'} - 终端: auth.logout_all
2025-05-09 15:25:44,578 - app - INFO - 路由: /dashboard/data - 方法: {'OPTIONS', 'GET', 'HEAD'} - 终端: auth.dashboard_data
2025-05-09 15:25:44,578 - app - INFO - 路由: /check_token - 方法: {'OPTIONS', 'GET', 'HEAD'} - 终端: auth.check_token
2025-05-09 15:25:44,579 - app - INFO - 路由: /create_user - 方法: {'OPTIONS', 'POST'} - 终端: auth.create_user
2025-05-09 15:25:44,579 - app - INFO - 路由: /user_info - 方法: {'OPTIONS', 'GET', 'HEAD'} - 终端: auth.get_user_info
2025-05-09 15:25:44,579 - app - INFO - 路由: /user/<int:user_id> - 方法: {'OPTIONS', 'DELETE'} - 终端: auth.delete_user
2025-05-09 15:25:44,579 - app - INFO - 路由: /users/<int:user_id>/roles - 方法: {'OPTIONS', 'GET', 'HEAD'} - 终端: auth.get_user_roles
2025-05-09 15:25:44,581 - app - INFO - 路由: /users/<int:user_id>/roles - 方法: {'PUT', 'OPTIONS'} - 终端: auth.update_user_roles
2025-05-09 15:25:44,581 - app - INFO - 路由: /users/<int:user_id>/notifications - 方法: {'OPTIONS', 'GET', 'HEAD'} - 终端: auth.get_user_notifications
2025-05-09 15:25:44,581 - app - INFO - 路由: /notifications/<int:notification_id>/read - 方法: {'PUT', 'OPTIONS'} - 终端: auth.mark_notification_as_read
2025-05-09 15:25:44,581 - app - INFO - 路由: /notifications/read_all - 方法: {'PUT', 'OPTIONS'} - 终端: auth.mark_all_notifications_as_read
2025-05-09 15:25:44,582 - app - INFO - 路由: /change-password - 方法: {'OPTIONS', 'POST'} - 终端: auth.change_password
2025-05-09 15:25:44,582 - app - INFO - 路由: /reset-password - 方法: {'OPTIONS', 'GET', 'HEAD'} - 终端: auth.reset_password_page
2025-05-09 15:25:44,582 - app - INFO - 路由: /verify-email/confirm - 方法: {'OPTIONS', 'GET', 'HEAD'} - 终端: auth.verify_email_confirm_page
2025-05-09 15:25:44,582 - app - INFO - 路由: /auth/csrf-token - 方法: {'OPTIONS', 'GET', 'HEAD'} - 终端: auth.get_csrf_token
2025-05-09 15:25:44,583 - app - INFO - 路由: /api/users/<int:user_id> - 方法: {'PUT', 'OPTIONS'} - 终端: auth.api_update_user
2025-05-09 15:25:44,583 - app - INFO - 路由: /api/users/<int:user_id> - 方法: {'OPTIONS', 'DELETE'} - 终端: auth.api_delete_user
2025-05-09 15:25:44,583 - app - INFO - 路由: /api/users - 方法: {'OPTIONS', 'GET', 'HEAD'} - 终端: auth.api_get_users
2025-05-09 15:25:44,583 - app - INFO - 路由: /api/users - 方法: {'OPTIONS', 'POST'} - 终端: auth.api_create_user
2025-05-09 15:25:44,583 - app - INFO - 路由: /auth/users/<int:user_id> - 方法: {'OPTIONS', 'GET', 'HEAD'} - 终端: auth.get_user_details
2025-05-09 15:25:44,584 - app - INFO - 路由: /api/users/<int:user_id> - 方法: {'OPTIONS', 'DELETE', 'HEAD', 'PUT', 'GET'} - 终端: auth.api_user_operations
2025-05-09 15:25:44,584 - app - INFO - 路由: /auth/user-csrf-token - 方法: {'OPTIONS', 'GET', 'HEAD'} - 终端: auth.get_user_csrf_token
2025-05-09 15:25:44,584 - app - INFO - 路由: /main/ - 方法: {'OPTIONS', 'GET', 'HEAD'} - 终端: main.index
2025-05-09 15:25:44,584 - app - INFO - 路由: /main/dashboard - 方法: {'OPTIONS', 'GET', 'HEAD'} - 终端: main.dashboard
2025-05-09 15:25:44,585 - app - INFO - 路由: /main/check_token - 方法: {'OPTIONS', 'GET', 'HEAD'} - 终端: main.check_token
2025-05-09 15:25:44,585 - app - INFO - 路由: /main/projects - 方法: {'OPTIONS', 'GET', 'HEAD'} - 终端: main.projects
2025-05-09 15:25:44,585 - app - INFO - 路由: /main/tasks - 方法: {'OPTIONS', 'GET', 'HEAD'} - 终端: main.tasks
2025-05-09 15:25:44,585 - app - INFO - 路由: /main/risks - 方法: {'OPTIONS', 'GET', 'HEAD'} - 终端: main.risks
2025-05-09 15:25:44,586 - app - INFO - 路由: /main/reports - 方法: {'OPTIONS', 'GET', 'HEAD'} - 终端: main.reports
2025-05-09 15:25:44,586 - app - INFO - 路由: /main/resources - 方法: {'OPTIONS', 'GET', 'HEAD'} - 终端: main.resources
2025-05-09 15:25:44,586 - app - INFO - 路由: /main/profile - 方法: {'OPTIONS', 'GET', 'HEAD'} - 终端: main.profile
2025-05-09 15:25:44,587 - app - INFO - 路由: /main/system/status - 方法: {'OPTIONS', 'GET', 'HEAD'} - 终端: main.system_status
2025-05-09 15:25:44,587 - app - INFO - 路由: /main/api/dashboard/data - 方法: {'OPTIONS', 'GET', 'HEAD'} - 终端: main.get_dashboard_data
2025-05-09 15:25:44,587 - app - INFO - 路由: /main/test - 方法: {'OPTIONS', 'GET', 'HEAD'} - 终端: main.test_route
2025-05-09 15:25:44,587 - app - INFO - 路由: /main/projects/detail/<int:project_id> - 方法: {'OPTIONS', 'GET', 'HEAD'} - 终端: main.project_detail_redirect
2025-05-09 15:25:44,588 - app - INFO - 路由: /main/users - 方法: {'OPTIONS', 'GET', 'HEAD'} - 终端: main.users
2025-05-09 15:25:44,588 - app - INFO - 路由: /main/debug/projects - 方法: {'OPTIONS', 'GET', 'HEAD'} - 终端: main.debug_projects
2025-05-09 15:25:44,588 - app - INFO - 路由: /main/simple/projects - 方法: {'OPTIONS', 'GET', 'HEAD'} - 终端: main.simple_projects
2025-05-09 15:25:44,588 - app - INFO - 路由: /main/static-test - 方法: {'OPTIONS', 'GET', 'HEAD'} - 终端: main.static_test
2025-05-09 15:25:44,588 - app - INFO - 路由: /main/print-projects - 方法: {'OPTIONS', 'GET', 'HEAD'} - 终端: main.print_projects
2025-05-09 15:25:44,589 - app - INFO - 路由: /main/bypass-projects - 方法: {'OPTIONS', 'GET', 'HEAD'} - 终端: main.bypass_projects
2025-05-09 15:25:44,589 - app - INFO - 路由: /main/debug-projects - 方法: {'OPTIONS', 'GET', 'HEAD'} - 终端: main.debug_projects_api
2025-05-09 15:25:44,590 - app - INFO - 路由: /projects/list - 方法: {'OPTIONS', 'GET', 'HEAD'} - 终端: projects.project_list
2025-05-09 15:25:44,590 - app - INFO - 路由: /projects/ - 方法: {'OPTIONS', 'GET', 'HEAD'} - 终端: projects.get_projects
2025-05-09 15:25:44,590 - app - INFO - 路由: /projects/ - 方法: {'OPTIONS', 'POST'} - 终端: projects.create_project
2025-05-09 15:25:44,590 - app - INFO - 路由: /projects/<int:project_id> - 方法: {'OPTIONS', 'GET', 'HEAD'} - 终端: projects.get_project
2025-05-09 15:25:44,590 - app - INFO - 路由: /projects/<int:project_id> - 方法: {'PUT', 'OPTIONS'} - 终端: projects.update_project
2025-05-09 15:25:44,591 - app - INFO - 路由: /projects/<int:project_id> - 方法: {'OPTIONS', 'DELETE'} - 终端: projects.delete_project
2025-05-09 15:25:44,591 - app - INFO - 路由: /projects/<int:project_id>/members - 方法: {'OPTIONS', 'GET', 'HEAD'} - 终端: projects.get_project_members
2025-05-09 15:25:44,591 - app - INFO - 路由: /projects/<int:project_id>/members - 方法: {'OPTIONS', 'POST'} - 终端: projects.add_project_member
2025-05-09 15:25:44,592 - app - INFO - 路由: /projects/<int:project_id>/members/<int:user_id> - 方法: {'OPTIONS', 'DELETE'} - 终端: projects.remove_project_member
2025-05-09 15:25:44,592 - app - INFO - 路由: /projects/detail/<int:project_id> - 方法: {'OPTIONS', 'GET', 'HEAD'} - 终端: projects.detail
2025-05-09 15:25:44,592 - app - INFO - 路由: /projects/api/detail/<int:project_id> - 方法: {'OPTIONS', 'GET', 'HEAD'} - 终端: projects.detail_api
2025-05-09 15:25:44,593 - app - INFO - 路由: /projects/api/projects/<int:project_id> - 方法: {'OPTIONS', 'GET', 'HEAD'} - 终端: projects.get_project_api
2025-05-09 15:25:44,593 - app - INFO - 路由: /projects/api/projects/<int:project_id> - 方法: {'PUT', 'OPTIONS'} - 终端: projects.update_project_api
2025-05-09 15:25:44,593 - app - INFO - 路由: /projects/api/projects/<int:project_id> - 方法: {'OPTIONS', 'DELETE'} - 终端: projects.delete_project_api
2025-05-09 15:25:44,593 - app - INFO - 路由: /projects/api/auth/projects - 方法: {'OPTIONS', 'GET', 'HEAD'} - 终端: projects.get_projects_api
2025-05-09 15:25:44,593 - app - INFO - 路由: /projects/api/auth/projects/<int:project_id> - 方法: {'OPTIONS', 'GET', 'HEAD'} - 终端: projects.get_project_auth_api
2025-05-09 15:25:44,594 - app - INFO - 路由: /projects/api/noauth/projects/<int:project_id> - 方法: {'OPTIONS', 'DELETE', 'HEAD', 'PUT', 'GET'} - 终端: projects.get_project_noauth
2025-05-09 15:25:44,594 - app - INFO - 路由: /projects/api/auth/projects - 方法: {'OPTIONS', 'POST'} - 终端: projects.create_project_auth
2025-05-09 15:25:44,594 - app - INFO - 路由: /projects/api/project-managers - 方法: {'OPTIONS', 'GET', 'HEAD'} - 终端: projects.get_project_managers
2025-05-09 15:25:44,594 - app - INFO - 路由: /projects/api/projects - 方法: {'OPTIONS', 'GET', 'HEAD'} - 终端: projects.get_all_projects_api
2025-05-09 15:25:44,595 - app - INFO - 路由: /projects/api/active-projects - 方法: {'OPTIONS', 'GET', 'HEAD'} - 终端: projects.get_active_projects_api
2025-05-09 15:25:44,595 - app - INFO - 路由: /projects/api/projects/<int:project_id>/members - 方法: {'OPTIONS', 'GET', 'HEAD'} - 终端: projects.get_project_members_api
2025-05-09 15:25:44,595 - app - INFO - 路由: /list - 方法: {'OPTIONS', 'GET', 'HEAD'} - 终端: project_root.project_list
2025-05-09 15:25:44,595 - app - INFO - 路由: / - 方法: {'OPTIONS', 'GET', 'HEAD'} - 终端: project_root.get_projects
2025-05-09 15:25:44,595 - app - INFO - 路由: / - 方法: {'OPTIONS', 'POST'} - 终端: project_root.create_project
2025-05-09 15:25:44,597 - app - INFO - 路由: /<int:project_id> - 方法: {'OPTIONS', 'GET', 'HEAD'} - 终端: project_root.get_project
2025-05-09 15:25:44,597 - app - INFO - 路由: /<int:project_id> - 方法: {'PUT', 'OPTIONS'} - 终端: project_root.update_project
2025-05-09 15:25:44,597 - app - INFO - 路由: /<int:project_id> - 方法: {'OPTIONS', 'DELETE'} - 终端: project_root.delete_project
2025-05-09 15:25:44,597 - app - INFO - 路由: /<int:project_id>/members - 方法: {'OPTIONS', 'GET', 'HEAD'} - 终端: project_root.get_project_members
2025-05-09 15:25:44,597 - app - INFO - 路由: /<int:project_id>/members - 方法: {'OPTIONS', 'POST'} - 终端: project_root.add_project_member
2025-05-09 15:25:44,598 - app - INFO - 路由: /<int:project_id>/members/<int:user_id> - 方法: {'OPTIONS', 'DELETE'} - 终端: project_root.remove_project_member
2025-05-09 15:25:44,598 - app - INFO - 路由: /detail/<int:project_id> - 方法: {'OPTIONS', 'GET', 'HEAD'} - 终端: project_root.detail
2025-05-09 15:25:44,598 - app - INFO - 路由: /api/detail/<int:project_id> - 方法: {'OPTIONS', 'GET', 'HEAD'} - 终端: project_root.detail_api
2025-05-09 15:25:44,598 - app - INFO - 路由: /api/projects/<int:project_id> - 方法: {'OPTIONS', 'GET', 'HEAD'} - 终端: project_root.get_project_api
2025-05-09 15:25:44,598 - app - INFO - 路由: /api/projects/<int:project_id> - 方法: {'PUT', 'OPTIONS'} - 终端: project_root.update_project_api
2025-05-09 15:25:44,599 - app - INFO - 路由: /api/projects/<int:project_id> - 方法: {'OPTIONS', 'DELETE'} - 终端: project_root.delete_project_api
2025-05-09 15:25:44,599 - app - INFO - 路由: /api/auth/projects - 方法: {'OPTIONS', 'GET', 'HEAD'} - 终端: project_root.get_projects_api
2025-05-09 15:25:44,599 - app - INFO - 路由: /api/auth/projects/<int:project_id> - 方法: {'OPTIONS', 'GET', 'HEAD'} - 终端: project_root.get_project_auth_api
2025-05-09 15:25:44,599 - app - INFO - 路由: /api/noauth/projects/<int:project_id> - 方法: {'OPTIONS', 'DELETE', 'HEAD', 'PUT', 'GET'} - 终端: project_root.get_project_noauth
2025-05-09 15:25:44,600 - app - INFO - 路由: /api/auth/projects - 方法: {'OPTIONS', 'POST'} - 终端: project_root.create_project_auth
2025-05-09 15:25:44,600 - app - INFO - 路由: /api/project-managers - 方法: {'OPTIONS', 'GET', 'HEAD'} - 终端: project_root.get_project_managers
2025-05-09 15:25:44,600 - app - INFO - 路由: /api/projects - 方法: {'OPTIONS', 'GET', 'HEAD'} - 终端: project_root.get_all_projects_api
2025-05-09 15:25:44,600 - app - INFO - 路由: /api/active-projects - 方法: {'OPTIONS', 'GET', 'HEAD'} - 终端: project_root.get_active_projects_api
2025-05-09 15:25:44,600 - app - INFO - 路由: /api/projects/<int:project_id>/members - 方法: {'OPTIONS', 'GET', 'HEAD'} - 终端: project_root.get_project_members_api
2025-05-09 15:25:44,601 - app - INFO - 路由: /tasks/ - 方法: {'OPTIONS', 'GET', 'HEAD'} - 终端: tasks.get_tasks
2025-05-09 15:25:44,601 - app - INFO - 路由: /tasks/ - 方法: {'OPTIONS', 'POST'} - 终端: tasks.create_task
2025-05-09 15:25:44,601 - app - INFO - 路由: /tasks/<int:task_id> - 方法: {'OPTIONS', 'GET', 'HEAD'} - 终端: tasks.get_task
2025-05-09 15:25:44,601 - app - INFO - 路由: /tasks/<int:task_id> - 方法: {'PUT', 'OPTIONS'} - 终端: tasks.update_task
2025-05-09 15:25:44,602 - app - INFO - 路由: /tasks/<int:task_id> - 方法: {'OPTIONS', 'DELETE'} - 终端: tasks.delete_task
2025-05-09 15:25:44,602 - app - INFO - 路由: /tasks/<int:task_id>/comments - 方法: {'OPTIONS', 'GET', 'HEAD'} - 终端: tasks.get_task_comments
2025-05-09 15:25:44,602 - app - INFO - 路由: /tasks/<int:task_id>/comments - 方法: {'OPTIONS', 'POST'} - 终端: tasks.add_task_comment
2025-05-09 15:25:44,603 - app - INFO - 路由: /tasks/<int:task_id>/attachments - 方法: {'OPTIONS', 'GET', 'HEAD'} - 终端: tasks.get_task_attachments
2025-05-09 15:25:44,603 - app - INFO - 路由: /tasks/<int:task_id>/attachments - 方法: {'OPTIONS', 'POST'} - 终端: tasks.add_task_attachment
2025-05-09 15:25:44,603 - app - INFO - 路由: /tasks/<int:task_id>/resources - 方法: {'OPTIONS', 'GET', 'HEAD'} - 终端: tasks.get_task_resources
2025-05-09 15:25:44,604 - app - INFO - 路由: /tasks/<int:task_id>/subtasks - 方法: {'OPTIONS', 'GET', 'HEAD'} - 终端: tasks.get_subtasks
2025-05-09 15:25:44,604 - app - INFO - 路由: /tasks/<int:task_id>/subtasks - 方法: {'OPTIONS', 'POST'} - 终端: tasks.create_subtask
2025-05-09 15:25:44,604 - app - INFO - 路由: /tasks/<int:task_id>/dependencies - 方法: {'OPTIONS', 'GET', 'HEAD'} - 终端: tasks.get_dependencies
2025-05-09 15:25:44,604 - app - INFO - 路由: /tasks/<int:task_id>/dependencies - 方法: {'OPTIONS', 'POST'} - 终端: tasks.add_dependency
2025-05-09 15:25:44,605 - app - INFO - 路由: /tasks/<int:task_id>/logs - 方法: {'OPTIONS', 'GET', 'HEAD'} - 终端: tasks.get_task_logs
2025-05-09 15:25:44,605 - app - INFO - 路由: /tasks/<int:task_id>/logs - 方法: {'OPTIONS', 'POST'} - 终端: tasks.add_task_log
2025-05-09 15:25:44,606 - app - INFO - 路由: /tasks/project/<int:project_id>/gantt - 方法: {'OPTIONS', 'GET', 'HEAD'} - 终端: tasks.gantt_chart
2025-05-09 15:25:44,606 - app - INFO - 路由: /tasks/project/<int:project_id>/gantt/data - 方法: {'OPTIONS', 'GET', 'HEAD'} - 终端: tasks.get_gantt_data
2025-05-09 15:25:44,606 - app - INFO - 路由: /tasks/<int:task_id>/gantt - 方法: {'PUT', 'OPTIONS'} - 终端: tasks.update_gantt_task
2025-05-09 15:25:44,607 - app - INFO - 路由: /tasks/dependencies/gantt - 方法: {'OPTIONS', 'POST'} - 终端: tasks.create_gantt_dependency
2025-05-09 15:25:44,607 - app - INFO - 路由: /tasks/<int:task_id>/dependencies/<int:dependency_id>/gantt - 方法: {'OPTIONS', 'DELETE'} - 终端: tasks.delete_gantt_dependency
2025-05-09 15:25:44,607 - app - INFO - 路由: /tasks/<int:task_id>/status - 方法: {'PUT', 'OPTIONS'} - 终端: tasks.update_task_status
2025-05-09 15:25:44,607 - app - INFO - 路由: /tasks/api/tasks/dependencies - 方法: {'OPTIONS', 'POST'} - 终端: tasks.add_task_dependency
2025-05-09 15:25:44,607 - app - INFO - 路由: /tasks/<int:task_id>/detail - 方法: {'OPTIONS', 'GET', 'HEAD'} - 终端: tasks.task_detail_api
2025-05-09 15:25:44,607 - app - INFO - 路由: /tasks/api/auth/tasks/<int:task_id>/detail - 方法: {'OPTIONS', 'GET', 'HEAD'} - 终端: tasks.task_detail_api_auth
2025-05-09 15:25:44,608 - app - INFO - 路由: /tasks/<int:task_id>/view - 方法: {'OPTIONS', 'GET', 'HEAD'} - 终端: tasks.task_detail_page
2025-05-09 15:25:44,608 - app - INFO - 路由: /tasks/<int:task_id>/edit - 方法: {'OPTIONS', 'GET', 'HEAD'} - 终端: tasks.edit_task_page
2025-05-09 15:25:44,608 - app - INFO - 路由: /tasks/api/auth/tasks/<int:task_id>/attachments - 方法: {'OPTIONS', 'POST'} - 终端: tasks.add_task_attachment_auth
2025-05-09 15:25:44,608 - app - INFO - 路由: /tasks/api/auth/tasks/<int:task_id>/attachments/<int:attachment_id>/download - 方法: {'OPTIONS', 'GET', 'HEAD'} - 终端: tasks.download_attachment_auth
2025-05-09 15:25:44,609 - app - INFO - 路由: /tasks/api/tasks/<int:task_id>/attachments - 方法: {'OPTIONS', 'POST'} - 终端: tasks.upload_attachment
2025-05-09 15:25:44,609 - app - INFO - 路由: /tasks/api/tasks/<int:task_id>/attachments/<int:attachment_id>/download - 方法: {'OPTIONS', 'GET', 'HEAD'} - 终端: tasks.download_attachment
2025-05-09 15:25:44,609 - app - INFO - 路由: /tasks/api/tasks/<int:task_id>/attachments/<int:attachment_id> - 方法: {'OPTIONS', 'DELETE'} - 终端: tasks.delete_attachment
2025-05-09 15:25:44,609 - app - INFO - 路由: /tasks/api/tasks/<int:task_id>/attachments/<int:attachment_id>/versions - 方法: {'OPTIONS', 'POST'} - 终端: tasks.upload_new_version
2025-05-09 15:25:44,609 - app - INFO - 路由: /tasks/api/tasks/<int:task_id>/attachments/<int:attachment_id>/versions - 方法: {'OPTIONS', 'GET', 'HEAD'} - 终端: tasks.get_attachment_versions
2025-05-09 15:25:44,610 - app - INFO - 路由: /tasks/api/tasks/<int:task_id>/risks - 方法: {'OPTIONS', 'GET', 'HEAD'} - 终端: tasks.task_risks_front_path
2025-05-09 15:25:44,610 - app - INFO - 路由: /tasks/<int:task_id>/risks - 方法: {'OPTIONS', 'POST'} - 终端: tasks.create_task_risk_front_path
2025-05-09 15:25:44,610 - app - INFO - 路由: /tasks/api/tasks/<int:task_id>/progress - 方法: {'OPTIONS', 'GET', 'HEAD'} - 终端: tasks.get_task_progress
2025-05-09 15:25:44,611 - app - INFO - 路由: /tasks/api/tasks/<int:task_id>/progress - 方法: {'OPTIONS', 'POST'} - 终端: tasks.update_task_progress
2025-05-09 15:25:44,611 - app - INFO - 路由: /tasks/api/tasks/<int:task_id>/progress/approve - 方法: {'OPTIONS', 'POST'} - 终端: tasks.approve_task_progress
2025-05-09 15:25:44,611 - app - INFO - 路由: /tasks/list - 方法: {'OPTIONS', 'GET', 'HEAD'} - 终端: tasks.task_list
2025-05-09 15:25:44,611 - app - INFO - 路由: /tasks/api/auth/tasks/<int:task_id>/logs - 方法: {'OPTIONS', 'GET', 'HEAD'} - 终端: tasks.get_task_logs_auth
2025-05-09 15:25:44,611 - app - INFO - 路由: /tasks/api/auth/tasks/<int:task_id>/subtasks - 方法: {'OPTIONS', 'GET', 'HEAD'} - 终端: tasks.get_subtasks_auth
2025-05-09 15:25:44,612 - app - INFO - 路由: /tasks/api/auth/tasks/<int:task_id>/comments - 方法: {'OPTIONS', 'GET', 'HEAD'} - 终端: tasks.get_task_comments_auth
2025-05-09 15:25:44,612 - app - INFO - 路由: /tasks/api/auth/tasks/<int:task_id>/attachments - 方法: {'OPTIONS', 'GET', 'HEAD'} - 终端: tasks.get_task_attachments_auth
2025-05-09 15:25:44,612 - app - INFO - 路由: /tasks/api/auth/tasks/<int:task_id>/risks - 方法: {'OPTIONS', 'GET', 'HEAD'} - 终端: tasks.get_task_risks_auth
2025-05-09 15:25:44,612 - app - INFO - 路由: /tasks/api/auth/tasks/<int:task_id>/risks - 方法: {'OPTIONS', 'POST'} - 终端: tasks.create_task_risk_auth
2025-05-09 15:25:44,613 - app - INFO - 路由: /tasks/api/auth/tasks/<int:task_id>/comments - 方法: {'OPTIONS', 'POST'} - 终端: tasks.add_task_comment_auth
2025-05-09 15:25:44,613 - app - INFO - 路由: /tasks/api/tasks/<int:task_id> - 方法: {'PUT', 'OPTIONS'} - 终端: tasks.api_update_task
2025-05-09 15:25:44,613 - app - INFO - 路由: /tasks/api/tasks/<int:task_id>/update_bypass - 方法: {'PUT', 'OPTIONS'} - 终端: tasks.update_task_bypass_csrf
2025-05-09 15:25:44,613 - app - INFO - 路由: /tasks/get-csrf-token - 方法: {'OPTIONS', 'GET', 'HEAD'} - 终端: tasks.get_csrf_token
2025-05-09 15:25:44,615 - app - INFO - 路由: /tasks/api/tasks/<int:task_id>/no_csrf - 方法: {'PUT', 'OPTIONS'} - 终端: tasks.update_task_no_csrf
2025-05-09 15:25:44,615 - app - INFO - 路由: /tasks/api/tasks/<int:task_id>/detail - 方法: {'OPTIONS', 'GET', 'HEAD'} - 终端: tasks.api_tasks_detail
2025-05-09 15:25:44,660 - app - WARNING - team_bp 未定义或无法导入
2025-05-09 15:25:44,779 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-05-09 15:25:44,781 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions 
WHERE permissions.name = ?
 LIMIT ? OFFSET ?
2025-05-09 15:25:44,781 - sqlalchemy.engine.Engine - INFO - [generated in 0.00039s] ('manage_users', 1, 0)
2025-05-09 15:25:44,782 - app.utils.permissions - INFO - 更新权限: manage_users
2025-05-09 15:25:44,782 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions 
WHERE permissions.name = ?
 LIMIT ? OFFSET ?
2025-05-09 15:25:44,784 - sqlalchemy.engine.Engine - INFO - [cached since 0.002556s ago] ('manage_roles', 1, 0)
2025-05-09 15:25:44,784 - app.utils.permissions - INFO - 更新权限: manage_roles
2025-05-09 15:25:44,784 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions 
WHERE permissions.name = ?
 LIMIT ? OFFSET ?
2025-05-09 15:25:44,784 - sqlalchemy.engine.Engine - INFO - [cached since 0.003587s ago] ('manage_all_projects', 1, 0)
2025-05-09 15:25:44,785 - app.utils.permissions - INFO - 更新权限: manage_all_projects
2025-05-09 15:25:44,785 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions 
WHERE permissions.name = ?
 LIMIT ? OFFSET ?
2025-05-09 15:25:44,786 - sqlalchemy.engine.Engine - INFO - [cached since 0.004716s ago] ('manage_project', 1, 0)
2025-05-09 15:25:44,786 - app.utils.permissions - INFO - 更新权限: manage_project
2025-05-09 15:25:44,786 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions 
WHERE permissions.name = ?
 LIMIT ? OFFSET ?
2025-05-09 15:25:44,787 - sqlalchemy.engine.Engine - INFO - [cached since 0.005796s ago] ('manage_all_tasks', 1, 0)
2025-05-09 15:25:44,787 - app.utils.permissions - INFO - 更新权限: manage_all_tasks
2025-05-09 15:25:44,787 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions 
WHERE permissions.name = ?
 LIMIT ? OFFSET ?
2025-05-09 15:25:44,787 - sqlalchemy.engine.Engine - INFO - [cached since 0.006708s ago] ('manage_task', 1, 0)
2025-05-09 15:25:44,788 - app.utils.permissions - INFO - 更新权限: manage_task
2025-05-09 15:25:44,788 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions 
WHERE permissions.name = ?
 LIMIT ? OFFSET ?
2025-05-09 15:25:44,788 - sqlalchemy.engine.Engine - INFO - [cached since 0.007603s ago] ('view_project', 1, 0)
2025-05-09 15:25:44,789 - app.utils.permissions - INFO - 更新权限: view_project
2025-05-09 15:25:44,789 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions 
WHERE permissions.name = ?
 LIMIT ? OFFSET ?
2025-05-09 15:25:44,790 - sqlalchemy.engine.Engine - INFO - [cached since 0.008956s ago] ('view_task', 1, 0)
2025-05-09 15:25:44,790 - app.utils.permissions - INFO - 更新权限: view_task
2025-05-09 15:25:44,790 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions 
WHERE permissions.name = ?
 LIMIT ? OFFSET ?
2025-05-09 15:25:44,790 - sqlalchemy.engine.Engine - INFO - [cached since 0.009994s ago] ('manage_resources', 1, 0)
2025-05-09 15:25:44,791 - app.utils.permissions - INFO - 更新权限: manage_resources
2025-05-09 15:25:44,791 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions 
WHERE permissions.name = ?
 LIMIT ? OFFSET ?
2025-05-09 15:25:44,791 - sqlalchemy.engine.Engine - INFO - [cached since 0.01081s ago] ('manage_risks', 1, 0)
2025-05-09 15:25:44,791 - app.utils.permissions - INFO - 更新权限: manage_risks
2025-05-09 15:25:44,793 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions 
WHERE permissions.name = ?
 LIMIT ? OFFSET ?
2025-05-09 15:25:44,793 - sqlalchemy.engine.Engine - INFO - [cached since 0.01169s ago] ('view_reports', 1, 0)
2025-05-09 15:25:44,793 - app.utils.permissions - INFO - 更新权限: view_reports
2025-05-09 15:25:44,793 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions 
WHERE permissions.name = ?
 LIMIT ? OFFSET ?
2025-05-09 15:25:44,794 - sqlalchemy.engine.Engine - INFO - [cached since 0.01255s ago] ('create_task', 1, 0)
2025-05-09 15:25:44,794 - app.utils.permissions - INFO - 更新权限: create_task
2025-05-09 15:25:44,794 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions 
WHERE permissions.name = ?
 LIMIT ? OFFSET ?
2025-05-09 15:25:44,794 - sqlalchemy.engine.Engine - INFO - [cached since 0.01341s ago] ('create_project', 1, 0)
2025-05-09 15:25:44,795 - app.utils.permissions - INFO - 更新权限: create_project
2025-05-09 15:25:44,795 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions 
WHERE permissions.name = ?
 LIMIT ? OFFSET ?
2025-05-09 15:25:44,795 - sqlalchemy.engine.Engine - INFO - [cached since 0.01434s ago] ('assign_task', 1, 0)
2025-05-09 15:25:44,796 - app.utils.permissions - INFO - 更新权限: assign_task
2025-05-09 15:25:44,796 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions 
WHERE permissions.name = ?
 LIMIT ? OFFSET ?
2025-05-09 15:25:44,796 - sqlalchemy.engine.Engine - INFO - [cached since 0.0155s ago] ('change_project_status', 1, 0)
2025-05-09 15:25:44,797 - app.utils.permissions - INFO - 更新权限: change_project_status
2025-05-09 15:25:44,797 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions 
WHERE permissions.name = ?
 LIMIT ? OFFSET ?
2025-05-09 15:25:44,797 - sqlalchemy.engine.Engine - INFO - [cached since 0.0162s ago] ('change_task_status', 1, 0)
2025-05-09 15:25:44,797 - app.utils.permissions - INFO - 更新权限: change_task_status
2025-05-09 15:25:44,797 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-05-09 15:25:44,798 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-05-09 15:25:44,798 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions
2025-05-09 15:25:44,798 - sqlalchemy.engine.Engine - INFO - [generated in 0.00029s] ()
2025-05-09 15:25:44,800 - sqlalchemy.engine.Engine - INFO - SELECT roles.id AS roles_id, roles.name AS roles_name, roles.description AS roles_description, roles.created_at AS roles_created_at 
FROM roles 
WHERE roles.name = ?
 LIMIT ? OFFSET ?
2025-05-09 15:25:44,801 - sqlalchemy.engine.Engine - INFO - [generated in 0.00031s] ('admin', 1, 0)
2025-05-09 15:25:44,801 - app.utils.permissions - INFO - 更新角色: admin
2025-05-09 15:25:44,803 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions, role_permissions 
WHERE ? = role_permissions.role_id AND permissions.id = role_permissions.permission_id
2025-05-09 15:25:44,803 - sqlalchemy.engine.Engine - INFO - [generated in 0.00031s] (1,)
2025-05-09 15:25:44,803 - app.utils.permissions - INFO - 为管理员角色添加所有权限: 16个
2025-05-09 15:25:44,804 - sqlalchemy.engine.Engine - INFO - SELECT roles.id AS roles_id, roles.name AS roles_name, roles.description AS roles_description, roles.created_at AS roles_created_at 
FROM roles 
WHERE roles.name = ?
 LIMIT ? OFFSET ?
2025-05-09 15:25:44,804 - sqlalchemy.engine.Engine - INFO - [cached since 0.003972s ago] ('manager', 1, 0)
2025-05-09 15:25:44,804 - app.utils.permissions - INFO - 更新角色: manager
2025-05-09 15:25:44,805 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions, role_permissions 
WHERE ? = role_permissions.role_id AND permissions.id = role_permissions.permission_id
2025-05-09 15:25:44,805 - sqlalchemy.engine.Engine - INFO - [cached since 0.0029s ago] (2,)
2025-05-09 15:25:44,806 - app.utils.permissions - INFO - 为角色 manager 添加权限: manage_project
2025-05-09 15:25:44,806 - app.utils.permissions - INFO - 为角色 manager 添加权限: manage_task
2025-05-09 15:25:44,807 - app.utils.permissions - INFO - 为角色 manager 添加权限: view_project
2025-05-09 15:25:44,807 - app.utils.permissions - INFO - 为角色 manager 添加权限: view_task
2025-05-09 15:25:44,807 - app.utils.permissions - INFO - 为角色 manager 添加权限: manage_resources
2025-05-09 15:25:44,807 - app.utils.permissions - INFO - 为角色 manager 添加权限: manage_risks
2025-05-09 15:25:44,807 - app.utils.permissions - INFO - 为角色 manager 添加权限: view_reports
2025-05-09 15:25:44,807 - app.utils.permissions - INFO - 为角色 manager 添加权限: create_project
2025-05-09 15:25:44,808 - app.utils.permissions - INFO - 为角色 manager 添加权限: create_task
2025-05-09 15:25:44,808 - app.utils.permissions - INFO - 为角色 manager 添加权限: assign_task
2025-05-09 15:25:44,808 - app.utils.permissions - INFO - 为角色 manager 添加权限: change_project_status
2025-05-09 15:25:44,808 - app.utils.permissions - INFO - 为角色 manager 添加权限: change_task_status
2025-05-09 15:25:44,809 - sqlalchemy.engine.Engine - INFO - SELECT roles.id AS roles_id, roles.name AS roles_name, roles.description AS roles_description, roles.created_at AS roles_created_at 
FROM roles 
WHERE roles.name = ?
 LIMIT ? OFFSET ?
2025-05-09 15:25:44,809 - sqlalchemy.engine.Engine - INFO - [cached since 0.008815s ago] ('user', 1, 0)
2025-05-09 15:25:44,809 - app.utils.permissions - INFO - 更新角色: user
2025-05-09 15:25:44,809 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions, role_permissions 
WHERE ? = role_permissions.role_id AND permissions.id = role_permissions.permission_id
2025-05-09 15:25:44,810 - sqlalchemy.engine.Engine - INFO - [cached since 0.007425s ago] (5,)
2025-05-09 15:25:44,810 - app.utils.permissions - INFO - 为角色 user 添加权限: view_project
2025-05-09 15:25:44,810 - app.utils.permissions - INFO - 为角色 user 添加权限: view_task
2025-05-09 15:25:44,810 - app.utils.permissions - INFO - 为角色 user 添加权限: view_reports
2025-05-09 15:25:44,810 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-05-09 15:25:44,810 - app.utils.permissions - INFO - 角色和权限初始化完成
2025-05-09 15:25:44,812 - __main__ - INFO - 角色和权限初始化成功
2025-05-09 15:25:44,812 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-05-09 15:25:44,813 - sqlalchemy.engine.Engine - INFO - SELECT users.id AS users_id, users.username AS users_username, users.email AS users_email, users.name AS users_name, users.password_hash AS users_password_hash, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.last_login AS users_last_login 
FROM users 
WHERE users.username = ?
 LIMIT ? OFFSET ?
2025-05-09 15:25:44,813 - sqlalchemy.engine.Engine - INFO - [generated in 0.00030s] ('system', 1, 0)
2025-05-09 15:25:44,814 - sqlalchemy.engine.Engine - INFO - SELECT projects.id AS projects_id, projects.name AS projects_name, projects.description AS projects_description, projects.status AS projects_status, projects.start_date AS projects_start_date, projects.end_date AS projects_end_date, projects.progress AS projects_progress, projects.created_at AS projects_created_at, projects.updated_at AS projects_updated_at, projects.manager_id AS projects_manager_id, projects.owner_id AS projects_owner_id 
FROM projects 
WHERE projects.name = ?
 LIMIT ? OFFSET ?
2025-05-09 15:25:44,814 - sqlalchemy.engine.Engine - INFO - [generated in 0.00031s] ('Test Project', 1, 0)
2025-05-09 15:25:44,815 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-05-09 15:25:44,815 - __main__ - INFO - 数据库初始化完成
2025-05-09 15:25:44,815 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-05-09 15:25:44,815 - sqlalchemy.engine.Engine - INFO - SELECT users.id AS users_id, users.username AS users_username, users.email AS users_email, users.name AS users_name, users.password_hash AS users_password_hash, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.last_login AS users_last_login 
FROM users 
WHERE users.username = ?
 LIMIT ? OFFSET ?
2025-05-09 15:25:44,817 - sqlalchemy.engine.Engine - INFO - [cached since 0.003538s ago] ('system', 1, 0)
2025-05-09 15:25:44,822 - sqlalchemy.engine.Engine - INFO - INSERT INTO resource_usages (user_id, cpu_usage, memory_usage, disk_usage, network_usage, recorded_at) VALUES (?, ?, ?, ?, ?, ?)
2025-05-09 15:25:44,823 - sqlalchemy.engine.Engine - INFO - [generated in 0.00036s] (2, 12.7, 52.5, 10.9, 0.0, '2025-05-09 07:25:44.821292')
2025-05-09 15:25:44,824 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-05-09 15:25:44,828 - __main__ - INFO - 系统资源检查完成
2025-05-09 15:25:44,828 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-05-09 15:25:44,829 - sqlalchemy.engine.Engine - INFO - DELETE FROM resource_usages WHERE resource_usages.recorded_at < ?
2025-05-09 15:25:44,829 - sqlalchemy.engine.Engine - INFO - [generated in 0.00036s] ('2025-04-09 07:25:44.828152',)
2025-05-09 15:25:44,831 - sqlalchemy.engine.Engine - INFO - DELETE FROM system_alerts WHERE system_alerts.is_resolved = 1 AND system_alerts.created_at < ?
2025-05-09 15:25:44,831 - sqlalchemy.engine.Engine - INFO - [generated in 0.00028s] ('2025-05-02 07:25:44.829807',)
2025-05-09 15:25:44,831 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-05-09 15:25:44,831 - __main__ - INFO - 旧数据清理完成
2025-05-09 15:25:44,836 - werkzeug - WARNING -  * Debugger is active!
2025-05-09 15:25:44,840 - werkzeug - INFO -  * Debugger PIN: 670-037-726
2025-05-09 15:25:54,438 - app - INFO - File logging handler initialized successfully
2025-05-09 15:25:54,438 - app - INFO - Console logging handler initialized successfully
2025-05-09 15:25:54,438 - app - INFO - Application logging configuration completed
2025-05-09 15:25:54,438 - app - INFO - Development configuration initialized
2025-05-09 15:25:54,466 - app - INFO - Logging setup completed successfully
2025-05-09 15:25:54,720 - app - INFO - 已注册的路由:
2025-05-09 15:25:54,721 - app - INFO - 路由: /static/<path:filename> - 方法: {'HEAD', 'GET', 'OPTIONS'} - 终端: static
2025-05-09 15:25:54,721 - app - INFO - 路由: /api/users/<int:user_id> - 方法: {'HEAD', 'PUT', 'POST', 'DELETE', 'GET', 'OPTIONS'} - 终端: user_api_exempt.user_api_exempt_route
2025-05-09 15:25:54,721 - app - INFO - 路由: /api/users - 方法: {'HEAD', 'PUT', 'POST', 'DELETE', 'GET', 'OPTIONS'} - 终端: user_api_exempt.user_api_exempt_route
2025-05-09 15:25:54,722 - app - INFO - 路由: /tasks/<int:task_id>/dependencies/<int:dependency_id>/gantt - 方法: {'DELETE', 'OPTIONS'} - 终端: task_api_exempt.task_api_exempt_route
2025-05-09 15:25:54,722 - app - INFO - 路由: /tasks/<int:task_id>/gantt - 方法: {'OPTIONS', 'PUT'} - 终端: task_api_exempt.task_api_exempt_route
2025-05-09 15:25:54,723 - app - INFO - 路由: /tasks/project/<int:project_id>/gantt - 方法: {'HEAD', 'GET', 'OPTIONS'} - 终端: task_api_exempt.task_api_exempt_route
2025-05-09 15:25:54,723 - app - INFO - 路由: /tasks/project/<int:project_id>/gantt/data - 方法: {'HEAD', 'GET', 'OPTIONS'} - 终端: task_api_exempt.task_api_exempt_route
2025-05-09 15:25:54,723 - app - INFO - 路由: /api/tasks/<int:task_id>/no_csrf - 方法: {'HEAD', 'PUT', 'POST', 'DELETE', 'GET', 'OPTIONS'} - 终端: task_api_exempt.task_api_exempt_route
2025-05-09 15:25:54,724 - app - INFO - 路由: /api/tasks/<int:task_id> - 方法: {'HEAD', 'PUT', 'POST', 'DELETE', 'GET', 'OPTIONS'} - 终端: task_api_exempt.task_api_exempt_route
2025-05-09 15:25:54,724 - app - INFO - 路由: /tasks/dependencies/gantt - 方法: {'POST', 'OPTIONS'} - 终端: task_api_exempt.task_api_exempt_route
2025-05-09 15:25:54,725 - app - INFO - 路由: /api/tasks - 方法: {'HEAD', 'PUT', 'POST', 'DELETE', 'GET', 'OPTIONS'} - 终端: task_api_exempt.task_api_exempt_route
2025-05-09 15:25:54,725 - app - INFO - 路由: /login - 方法: {'HEAD', 'GET', 'OPTIONS'} - 终端: auth.login_page
2025-05-09 15:25:54,726 - app - INFO - 路由: /login - 方法: {'POST', 'OPTIONS'} - 终端: auth.login
2025-05-09 15:25:54,726 - app - INFO - 路由: /register - 方法: {'HEAD', 'GET', 'OPTIONS'} - 终端: auth.register_page
2025-05-09 15:25:54,727 - app - INFO - 路由: /register - 方法: {'POST', 'OPTIONS'} - 终端: auth.register
2025-05-09 15:25:54,729 - app - INFO - 路由: /logout - 方法: {'HEAD', 'POST', 'GET', 'OPTIONS'} - 终端: auth.logout
2025-05-09 15:25:54,729 - app - INFO - 路由: /refresh - 方法: {'POST', 'OPTIONS'} - 终端: auth.refresh
2025-05-09 15:25:54,729 - app - INFO - 路由: /profile - 方法: {'HEAD', 'GET', 'OPTIONS'} - 终端: auth.profile
2025-05-09 15:25:54,730 - app - INFO - 路由: /profile - 方法: {'OPTIONS', 'PUT'} - 终端: auth.update_profile
2025-05-09 15:25:54,730 - app - INFO - 路由: /users - 方法: {'HEAD', 'GET', 'OPTIONS'} - 终端: auth.get_users
2025-05-09 15:25:54,730 - app - INFO - 路由: /users/<int:user_id> - 方法: {'HEAD', 'GET', 'OPTIONS'} - 终端: auth.get_user_by_id
2025-05-09 15:25:54,731 - app - INFO - 路由: /update_user/<int:user_id> - 方法: {'OPTIONS', 'PUT'} - 终端: auth.update_user
2025-05-09 15:25:54,731 - app - INFO - 路由: /roles - 方法: {'HEAD', 'GET', 'OPTIONS'} - 终端: auth.get_roles
2025-05-09 15:25:54,731 - app - INFO - 路由: /permissions - 方法: {'HEAD', 'GET', 'OPTIONS'} - 终端: auth.get_permissions
2025-05-09 15:25:54,732 - app - INFO - 路由: /permissions - 方法: {'POST', 'OPTIONS'} - 终端: auth.create_permission
2025-05-09 15:25:54,732 - app - INFO - 路由: /permissions/<int:permission_id> - 方法: {'HEAD', 'GET', 'OPTIONS'} - 终端: auth.get_permission
2025-05-09 15:25:54,733 - app - INFO - 路由: /permissions/<int:permission_id> - 方法: {'OPTIONS', 'PUT'} - 终端: auth.update_permission
2025-05-09 15:25:54,733 - app - INFO - 路由: /permissions/<int:permission_id> - 方法: {'DELETE', 'OPTIONS'} - 终端: auth.delete_permission
2025-05-09 15:25:54,733 - app - INFO - 路由: /roles - 方法: {'POST', 'OPTIONS'} - 终端: auth.create_role
2025-05-09 15:25:54,734 - app - INFO - 路由: /roles/<int:role_id> - 方法: {'HEAD', 'GET', 'OPTIONS'} - 终端: auth.get_role
2025-05-09 15:25:54,734 - app - INFO - 路由: /roles/<int:role_id>/permissions - 方法: {'OPTIONS', 'PUT'} - 终端: auth.update_role_permissions
2025-05-09 15:25:54,735 - app - INFO - 路由: /roles/<int:role_id> - 方法: {'DELETE', 'OPTIONS'} - 终端: auth.delete_role
2025-05-09 15:25:54,735 - app - INFO - 路由: /dashboard - 方法: {'HEAD', 'GET', 'OPTIONS'} - 终端: auth.dashboard
2025-05-09 15:25:54,736 - app - INFO - 路由: /dashboard/redirect - 方法: {'HEAD', 'POST', 'GET', 'OPTIONS'} - 终端: auth.dashboard_redirect
2025-05-09 15:25:54,736 - app - INFO - 路由: /create_test_user - 方法: {'POST', 'OPTIONS'} - 终端: auth.create_test_user
2025-05-09 15:25:54,737 - app - INFO - 路由: /check - 方法: {'HEAD', 'GET', 'OPTIONS'} - 终端: auth.check_auth
2025-05-09 15:25:54,737 - app - INFO - 路由: /create_test_project - 方法: {'POST', 'OPTIONS'} - 终端: auth.create_test_project
2025-05-09 15:25:54,738 - app - INFO - 路由: /logout_all - 方法: {'POST', 'OPTIONS'} - 终端: auth.logout_all
2025-05-09 15:25:54,738 - app - INFO - 路由: /dashboard/data - 方法: {'HEAD', 'GET', 'OPTIONS'} - 终端: auth.dashboard_data
2025-05-09 15:25:54,738 - app - INFO - 路由: /check_token - 方法: {'HEAD', 'GET', 'OPTIONS'} - 终端: auth.check_token
2025-05-09 15:25:54,739 - app - INFO - 路由: /create_user - 方法: {'POST', 'OPTIONS'} - 终端: auth.create_user
2025-05-09 15:25:54,739 - app - INFO - 路由: /user_info - 方法: {'HEAD', 'GET', 'OPTIONS'} - 终端: auth.get_user_info
2025-05-09 15:25:54,740 - app - INFO - 路由: /user/<int:user_id> - 方法: {'DELETE', 'OPTIONS'} - 终端: auth.delete_user
2025-05-09 15:25:54,740 - app - INFO - 路由: /users/<int:user_id>/roles - 方法: {'HEAD', 'GET', 'OPTIONS'} - 终端: auth.get_user_roles
2025-05-09 15:25:54,741 - app - INFO - 路由: /users/<int:user_id>/roles - 方法: {'OPTIONS', 'PUT'} - 终端: auth.update_user_roles
2025-05-09 15:25:54,741 - app - INFO - 路由: /users/<int:user_id>/notifications - 方法: {'HEAD', 'GET', 'OPTIONS'} - 终端: auth.get_user_notifications
2025-05-09 15:25:54,741 - app - INFO - 路由: /notifications/<int:notification_id>/read - 方法: {'OPTIONS', 'PUT'} - 终端: auth.mark_notification_as_read
2025-05-09 15:25:54,741 - app - INFO - 路由: /notifications/read_all - 方法: {'OPTIONS', 'PUT'} - 终端: auth.mark_all_notifications_as_read
2025-05-09 15:25:54,742 - app - INFO - 路由: /change-password - 方法: {'POST', 'OPTIONS'} - 终端: auth.change_password
2025-05-09 15:25:54,742 - app - INFO - 路由: /reset-password - 方法: {'HEAD', 'GET', 'OPTIONS'} - 终端: auth.reset_password_page
2025-05-09 15:25:54,742 - app - INFO - 路由: /verify-email/confirm - 方法: {'HEAD', 'GET', 'OPTIONS'} - 终端: auth.verify_email_confirm_page
2025-05-09 15:25:54,744 - app - INFO - 路由: /auth/csrf-token - 方法: {'HEAD', 'GET', 'OPTIONS'} - 终端: auth.get_csrf_token
2025-05-09 15:25:54,744 - app - INFO - 路由: /api/users/<int:user_id> - 方法: {'OPTIONS', 'PUT'} - 终端: auth.api_update_user
2025-05-09 15:25:54,744 - app - INFO - 路由: /api/users/<int:user_id> - 方法: {'DELETE', 'OPTIONS'} - 终端: auth.api_delete_user
2025-05-09 15:25:54,744 - app - INFO - 路由: /api/users - 方法: {'HEAD', 'GET', 'OPTIONS'} - 终端: auth.api_get_users
2025-05-09 15:25:54,745 - app - INFO - 路由: /api/users - 方法: {'POST', 'OPTIONS'} - 终端: auth.api_create_user
2025-05-09 15:25:54,745 - app - INFO - 路由: /auth/users/<int:user_id> - 方法: {'HEAD', 'GET', 'OPTIONS'} - 终端: auth.get_user_details
2025-05-09 15:25:54,745 - app - INFO - 路由: /api/users/<int:user_id> - 方法: {'HEAD', 'PUT', 'DELETE', 'GET', 'OPTIONS'} - 终端: auth.api_user_operations
2025-05-09 15:25:54,746 - app - INFO - 路由: /auth/user-csrf-token - 方法: {'HEAD', 'GET', 'OPTIONS'} - 终端: auth.get_user_csrf_token
2025-05-09 15:25:54,746 - app - INFO - 路由: /main/ - 方法: {'HEAD', 'GET', 'OPTIONS'} - 终端: main.index
2025-05-09 15:25:54,747 - app - INFO - 路由: /main/dashboard - 方法: {'HEAD', 'GET', 'OPTIONS'} - 终端: main.dashboard
2025-05-09 15:25:54,747 - app - INFO - 路由: /main/check_token - 方法: {'HEAD', 'GET', 'OPTIONS'} - 终端: main.check_token
2025-05-09 15:25:54,747 - app - INFO - 路由: /main/projects - 方法: {'HEAD', 'GET', 'OPTIONS'} - 终端: main.projects
2025-05-09 15:25:54,748 - app - INFO - 路由: /main/tasks - 方法: {'HEAD', 'GET', 'OPTIONS'} - 终端: main.tasks
2025-05-09 15:25:54,748 - app - INFO - 路由: /main/risks - 方法: {'HEAD', 'GET', 'OPTIONS'} - 终端: main.risks
2025-05-09 15:25:54,748 - app - INFO - 路由: /main/reports - 方法: {'HEAD', 'GET', 'OPTIONS'} - 终端: main.reports
2025-05-09 15:25:54,748 - app - INFO - 路由: /main/resources - 方法: {'HEAD', 'GET', 'OPTIONS'} - 终端: main.resources
2025-05-09 15:25:54,749 - app - INFO - 路由: /main/profile - 方法: {'HEAD', 'GET', 'OPTIONS'} - 终端: main.profile
2025-05-09 15:25:54,749 - app - INFO - 路由: /main/system/status - 方法: {'HEAD', 'GET', 'OPTIONS'} - 终端: main.system_status
2025-05-09 15:25:54,749 - app - INFO - 路由: /main/api/dashboard/data - 方法: {'HEAD', 'GET', 'OPTIONS'} - 终端: main.get_dashboard_data
2025-05-09 15:25:54,750 - app - INFO - 路由: /main/test - 方法: {'HEAD', 'GET', 'OPTIONS'} - 终端: main.test_route
2025-05-09 15:25:54,751 - app - INFO - 路由: /main/projects/detail/<int:project_id> - 方法: {'HEAD', 'GET', 'OPTIONS'} - 终端: main.project_detail_redirect
2025-05-09 15:25:54,752 - app - INFO - 路由: /main/users - 方法: {'HEAD', 'GET', 'OPTIONS'} - 终端: main.users
2025-05-09 15:25:54,752 - app - INFO - 路由: /main/debug/projects - 方法: {'HEAD', 'GET', 'OPTIONS'} - 终端: main.debug_projects
2025-05-09 15:25:54,753 - app - INFO - 路由: /main/simple/projects - 方法: {'HEAD', 'GET', 'OPTIONS'} - 终端: main.simple_projects
2025-05-09 15:25:54,753 - app - INFO - 路由: /main/static-test - 方法: {'HEAD', 'GET', 'OPTIONS'} - 终端: main.static_test
2025-05-09 15:25:54,755 - app - INFO - 路由: /main/print-projects - 方法: {'HEAD', 'GET', 'OPTIONS'} - 终端: main.print_projects
2025-05-09 15:25:54,755 - app - INFO - 路由: /main/bypass-projects - 方法: {'HEAD', 'GET', 'OPTIONS'} - 终端: main.bypass_projects
2025-05-09 15:25:54,756 - app - INFO - 路由: /main/debug-projects - 方法: {'HEAD', 'GET', 'OPTIONS'} - 终端: main.debug_projects_api
2025-05-09 15:25:54,756 - app - INFO - 路由: /projects/list - 方法: {'HEAD', 'GET', 'OPTIONS'} - 终端: projects.project_list
2025-05-09 15:25:54,756 - app - INFO - 路由: /projects/ - 方法: {'HEAD', 'GET', 'OPTIONS'} - 终端: projects.get_projects
2025-05-09 15:25:54,757 - app - INFO - 路由: /projects/ - 方法: {'POST', 'OPTIONS'} - 终端: projects.create_project
2025-05-09 15:25:54,757 - app - INFO - 路由: /projects/<int:project_id> - 方法: {'HEAD', 'GET', 'OPTIONS'} - 终端: projects.get_project
2025-05-09 15:25:54,757 - app - INFO - 路由: /projects/<int:project_id> - 方法: {'OPTIONS', 'PUT'} - 终端: projects.update_project
2025-05-09 15:25:54,758 - app - INFO - 路由: /projects/<int:project_id> - 方法: {'DELETE', 'OPTIONS'} - 终端: projects.delete_project
2025-05-09 15:25:54,758 - app - INFO - 路由: /projects/<int:project_id>/members - 方法: {'HEAD', 'GET', 'OPTIONS'} - 终端: projects.get_project_members
2025-05-09 15:25:54,758 - app - INFO - 路由: /projects/<int:project_id>/members - 方法: {'POST', 'OPTIONS'} - 终端: projects.add_project_member
2025-05-09 15:25:54,759 - app - INFO - 路由: /projects/<int:project_id>/members/<int:user_id> - 方法: {'DELETE', 'OPTIONS'} - 终端: projects.remove_project_member
2025-05-09 15:25:54,759 - app - INFO - 路由: /projects/detail/<int:project_id> - 方法: {'HEAD', 'GET', 'OPTIONS'} - 终端: projects.detail
2025-05-09 15:25:54,759 - app - INFO - 路由: /projects/api/detail/<int:project_id> - 方法: {'HEAD', 'GET', 'OPTIONS'} - 终端: projects.detail_api
2025-05-09 15:25:54,760 - app - INFO - 路由: /projects/api/projects/<int:project_id> - 方法: {'HEAD', 'GET', 'OPTIONS'} - 终端: projects.get_project_api
2025-05-09 15:25:54,760 - app - INFO - 路由: /projects/api/projects/<int:project_id> - 方法: {'OPTIONS', 'PUT'} - 终端: projects.update_project_api
2025-05-09 15:25:54,761 - app - INFO - 路由: /projects/api/projects/<int:project_id> - 方法: {'DELETE', 'OPTIONS'} - 终端: projects.delete_project_api
2025-05-09 15:25:54,761 - app - INFO - 路由: /projects/api/auth/projects - 方法: {'HEAD', 'GET', 'OPTIONS'} - 终端: projects.get_projects_api
2025-05-09 15:25:54,762 - app - INFO - 路由: /projects/api/auth/projects/<int:project_id> - 方法: {'HEAD', 'GET', 'OPTIONS'} - 终端: projects.get_project_auth_api
2025-05-09 15:25:54,762 - app - INFO - 路由: /projects/api/noauth/projects/<int:project_id> - 方法: {'HEAD', 'PUT', 'DELETE', 'GET', 'OPTIONS'} - 终端: projects.get_project_noauth
2025-05-09 15:25:54,762 - app - INFO - 路由: /projects/api/auth/projects - 方法: {'POST', 'OPTIONS'} - 终端: projects.create_project_auth
2025-05-09 15:25:54,763 - app - INFO - 路由: /projects/api/project-managers - 方法: {'HEAD', 'GET', 'OPTIONS'} - 终端: projects.get_project_managers
2025-05-09 15:25:54,763 - app - INFO - 路由: /projects/api/projects - 方法: {'HEAD', 'GET', 'OPTIONS'} - 终端: projects.get_all_projects_api
2025-05-09 15:25:54,763 - app - INFO - 路由: /projects/api/active-projects - 方法: {'HEAD', 'GET', 'OPTIONS'} - 终端: projects.get_active_projects_api
2025-05-09 15:25:54,764 - app - INFO - 路由: /projects/api/projects/<int:project_id>/members - 方法: {'HEAD', 'GET', 'OPTIONS'} - 终端: projects.get_project_members_api
2025-05-09 15:25:54,764 - app - INFO - 路由: /list - 方法: {'HEAD', 'GET', 'OPTIONS'} - 终端: project_root.project_list
2025-05-09 15:25:54,764 - app - INFO - 路由: / - 方法: {'HEAD', 'GET', 'OPTIONS'} - 终端: project_root.get_projects
2025-05-09 15:25:54,765 - app - INFO - 路由: / - 方法: {'POST', 'OPTIONS'} - 终端: project_root.create_project
2025-05-09 15:25:54,765 - app - INFO - 路由: /<int:project_id> - 方法: {'HEAD', 'GET', 'OPTIONS'} - 终端: project_root.get_project
2025-05-09 15:25:54,767 - app - INFO - 路由: /<int:project_id> - 方法: {'OPTIONS', 'PUT'} - 终端: project_root.update_project
2025-05-09 15:25:54,767 - app - INFO - 路由: /<int:project_id> - 方法: {'DELETE', 'OPTIONS'} - 终端: project_root.delete_project
2025-05-09 15:25:54,768 - app - INFO - 路由: /<int:project_id>/members - 方法: {'HEAD', 'GET', 'OPTIONS'} - 终端: project_root.get_project_members
2025-05-09 15:25:54,768 - app - INFO - 路由: /<int:project_id>/members - 方法: {'POST', 'OPTIONS'} - 终端: project_root.add_project_member
2025-05-09 15:25:54,768 - app - INFO - 路由: /<int:project_id>/members/<int:user_id> - 方法: {'DELETE', 'OPTIONS'} - 终端: project_root.remove_project_member
2025-05-09 15:25:54,769 - app - INFO - 路由: /detail/<int:project_id> - 方法: {'HEAD', 'GET', 'OPTIONS'} - 终端: project_root.detail
2025-05-09 15:25:54,769 - app - INFO - 路由: /api/detail/<int:project_id> - 方法: {'HEAD', 'GET', 'OPTIONS'} - 终端: project_root.detail_api
2025-05-09 15:25:54,770 - app - INFO - 路由: /api/projects/<int:project_id> - 方法: {'HEAD', 'GET', 'OPTIONS'} - 终端: project_root.get_project_api
2025-05-09 15:25:54,770 - app - INFO - 路由: /api/projects/<int:project_id> - 方法: {'OPTIONS', 'PUT'} - 终端: project_root.update_project_api
2025-05-09 15:25:54,770 - app - INFO - 路由: /api/projects/<int:project_id> - 方法: {'DELETE', 'OPTIONS'} - 终端: project_root.delete_project_api
2025-05-09 15:25:54,770 - app - INFO - 路由: /api/auth/projects - 方法: {'HEAD', 'GET', 'OPTIONS'} - 终端: project_root.get_projects_api
2025-05-09 15:25:54,771 - app - INFO - 路由: /api/auth/projects/<int:project_id> - 方法: {'HEAD', 'GET', 'OPTIONS'} - 终端: project_root.get_project_auth_api
2025-05-09 15:25:54,771 - app - INFO - 路由: /api/noauth/projects/<int:project_id> - 方法: {'HEAD', 'PUT', 'DELETE', 'GET', 'OPTIONS'} - 终端: project_root.get_project_noauth
2025-05-09 15:25:54,771 - app - INFO - 路由: /api/auth/projects - 方法: {'POST', 'OPTIONS'} - 终端: project_root.create_project_auth
2025-05-09 15:25:54,772 - app - INFO - 路由: /api/project-managers - 方法: {'HEAD', 'GET', 'OPTIONS'} - 终端: project_root.get_project_managers
2025-05-09 15:25:54,772 - app - INFO - 路由: /api/projects - 方法: {'HEAD', 'GET', 'OPTIONS'} - 终端: project_root.get_all_projects_api
2025-05-09 15:25:54,773 - app - INFO - 路由: /api/active-projects - 方法: {'HEAD', 'GET', 'OPTIONS'} - 终端: project_root.get_active_projects_api
2025-05-09 15:25:54,774 - app - INFO - 路由: /api/projects/<int:project_id>/members - 方法: {'HEAD', 'GET', 'OPTIONS'} - 终端: project_root.get_project_members_api
2025-05-09 15:25:54,774 - app - INFO - 路由: /tasks/ - 方法: {'HEAD', 'GET', 'OPTIONS'} - 终端: tasks.get_tasks
2025-05-09 15:25:54,774 - app - INFO - 路由: /tasks/ - 方法: {'POST', 'OPTIONS'} - 终端: tasks.create_task
2025-05-09 15:25:54,775 - app - INFO - 路由: /tasks/<int:task_id> - 方法: {'HEAD', 'GET', 'OPTIONS'} - 终端: tasks.get_task
2025-05-09 15:25:54,775 - app - INFO - 路由: /tasks/<int:task_id> - 方法: {'OPTIONS', 'PUT'} - 终端: tasks.update_task
2025-05-09 15:25:54,775 - app - INFO - 路由: /tasks/<int:task_id> - 方法: {'DELETE', 'OPTIONS'} - 终端: tasks.delete_task
2025-05-09 15:25:54,775 - app - INFO - 路由: /tasks/<int:task_id>/comments - 方法: {'HEAD', 'GET', 'OPTIONS'} - 终端: tasks.get_task_comments
2025-05-09 15:25:54,776 - app - INFO - 路由: /tasks/<int:task_id>/comments - 方法: {'POST', 'OPTIONS'} - 终端: tasks.add_task_comment
2025-05-09 15:25:54,776 - app - INFO - 路由: /tasks/<int:task_id>/attachments - 方法: {'HEAD', 'GET', 'OPTIONS'} - 终端: tasks.get_task_attachments
2025-05-09 15:25:54,776 - app - INFO - 路由: /tasks/<int:task_id>/attachments - 方法: {'POST', 'OPTIONS'} - 终端: tasks.add_task_attachment
2025-05-09 15:25:54,776 - app - INFO - 路由: /tasks/<int:task_id>/resources - 方法: {'HEAD', 'GET', 'OPTIONS'} - 终端: tasks.get_task_resources
2025-05-09 15:25:54,777 - app - INFO - 路由: /tasks/<int:task_id>/subtasks - 方法: {'HEAD', 'GET', 'OPTIONS'} - 终端: tasks.get_subtasks
2025-05-09 15:25:54,777 - app - INFO - 路由: /tasks/<int:task_id>/subtasks - 方法: {'POST', 'OPTIONS'} - 终端: tasks.create_subtask
2025-05-09 15:25:54,777 - app - INFO - 路由: /tasks/<int:task_id>/dependencies - 方法: {'HEAD', 'GET', 'OPTIONS'} - 终端: tasks.get_dependencies
2025-05-09 15:25:54,777 - app - INFO - 路由: /tasks/<int:task_id>/dependencies - 方法: {'POST', 'OPTIONS'} - 终端: tasks.add_dependency
2025-05-09 15:25:54,778 - app - INFO - 路由: /tasks/<int:task_id>/logs - 方法: {'HEAD', 'GET', 'OPTIONS'} - 终端: tasks.get_task_logs
2025-05-09 15:25:54,778 - app - INFO - 路由: /tasks/<int:task_id>/logs - 方法: {'POST', 'OPTIONS'} - 终端: tasks.add_task_log
2025-05-09 15:25:54,778 - app - INFO - 路由: /tasks/project/<int:project_id>/gantt - 方法: {'HEAD', 'GET', 'OPTIONS'} - 终端: tasks.gantt_chart
2025-05-09 15:25:54,778 - app - INFO - 路由: /tasks/project/<int:project_id>/gantt/data - 方法: {'HEAD', 'GET', 'OPTIONS'} - 终端: tasks.get_gantt_data
2025-05-09 15:25:54,779 - app - INFO - 路由: /tasks/<int:task_id>/gantt - 方法: {'OPTIONS', 'PUT'} - 终端: tasks.update_gantt_task
2025-05-09 15:25:54,780 - app - INFO - 路由: /tasks/dependencies/gantt - 方法: {'POST', 'OPTIONS'} - 终端: tasks.create_gantt_dependency
2025-05-09 15:25:54,780 - app - INFO - 路由: /tasks/<int:task_id>/dependencies/<int:dependency_id>/gantt - 方法: {'DELETE', 'OPTIONS'} - 终端: tasks.delete_gantt_dependency
2025-05-09 15:25:54,780 - app - INFO - 路由: /tasks/<int:task_id>/status - 方法: {'OPTIONS', 'PUT'} - 终端: tasks.update_task_status
2025-05-09 15:25:54,782 - app - INFO - 路由: /tasks/api/tasks/dependencies - 方法: {'POST', 'OPTIONS'} - 终端: tasks.add_task_dependency
2025-05-09 15:25:54,784 - app - INFO - 路由: /tasks/<int:task_id>/detail - 方法: {'HEAD', 'GET', 'OPTIONS'} - 终端: tasks.task_detail_api
2025-05-09 15:25:54,785 - app - INFO - 路由: /tasks/api/auth/tasks/<int:task_id>/detail - 方法: {'HEAD', 'GET', 'OPTIONS'} - 终端: tasks.task_detail_api_auth
2025-05-09 15:25:54,785 - app - INFO - 路由: /tasks/<int:task_id>/view - 方法: {'HEAD', 'GET', 'OPTIONS'} - 终端: tasks.task_detail_page
2025-05-09 15:25:54,786 - app - INFO - 路由: /tasks/<int:task_id>/edit - 方法: {'HEAD', 'GET', 'OPTIONS'} - 终端: tasks.edit_task_page
2025-05-09 15:25:54,786 - app - INFO - 路由: /tasks/api/auth/tasks/<int:task_id>/attachments - 方法: {'POST', 'OPTIONS'} - 终端: tasks.add_task_attachment_auth
2025-05-09 15:25:54,786 - app - INFO - 路由: /tasks/api/auth/tasks/<int:task_id>/attachments/<int:attachment_id>/download - 方法: {'HEAD', 'GET', 'OPTIONS'} - 终端: tasks.download_attachment_auth
2025-05-09 15:25:54,786 - app - INFO - 路由: /tasks/api/tasks/<int:task_id>/attachments - 方法: {'POST', 'OPTIONS'} - 终端: tasks.upload_attachment
2025-05-09 15:25:54,787 - app - INFO - 路由: /tasks/api/tasks/<int:task_id>/attachments/<int:attachment_id>/download - 方法: {'HEAD', 'GET', 'OPTIONS'} - 终端: tasks.download_attachment
2025-05-09 15:25:54,787 - app - INFO - 路由: /tasks/api/tasks/<int:task_id>/attachments/<int:attachment_id> - 方法: {'DELETE', 'OPTIONS'} - 终端: tasks.delete_attachment
2025-05-09 15:25:54,787 - app - INFO - 路由: /tasks/api/tasks/<int:task_id>/attachments/<int:attachment_id>/versions - 方法: {'POST', 'OPTIONS'} - 终端: tasks.upload_new_version
2025-05-09 15:25:54,789 - app - INFO - 路由: /tasks/api/tasks/<int:task_id>/attachments/<int:attachment_id>/versions - 方法: {'HEAD', 'GET', 'OPTIONS'} - 终端: tasks.get_attachment_versions
2025-05-09 15:25:54,789 - app - INFO - 路由: /tasks/api/tasks/<int:task_id>/risks - 方法: {'HEAD', 'GET', 'OPTIONS'} - 终端: tasks.task_risks_front_path
2025-05-09 15:25:54,790 - app - INFO - 路由: /tasks/<int:task_id>/risks - 方法: {'POST', 'OPTIONS'} - 终端: tasks.create_task_risk_front_path
2025-05-09 15:25:54,790 - app - INFO - 路由: /tasks/api/tasks/<int:task_id>/progress - 方法: {'HEAD', 'GET', 'OPTIONS'} - 终端: tasks.get_task_progress
2025-05-09 15:25:54,790 - app - INFO - 路由: /tasks/api/tasks/<int:task_id>/progress - 方法: {'POST', 'OPTIONS'} - 终端: tasks.update_task_progress
2025-05-09 15:25:54,790 - app - INFO - 路由: /tasks/api/tasks/<int:task_id>/progress/approve - 方法: {'POST', 'OPTIONS'} - 终端: tasks.approve_task_progress
2025-05-09 15:25:54,791 - app - INFO - 路由: /tasks/list - 方法: {'HEAD', 'GET', 'OPTIONS'} - 终端: tasks.task_list
2025-05-09 15:25:54,791 - app - INFO - 路由: /tasks/api/auth/tasks/<int:task_id>/logs - 方法: {'HEAD', 'GET', 'OPTIONS'} - 终端: tasks.get_task_logs_auth
2025-05-09 15:25:54,791 - app - INFO - 路由: /tasks/api/auth/tasks/<int:task_id>/subtasks - 方法: {'HEAD', 'GET', 'OPTIONS'} - 终端: tasks.get_subtasks_auth
2025-05-09 15:25:54,791 - app - INFO - 路由: /tasks/api/auth/tasks/<int:task_id>/comments - 方法: {'HEAD', 'GET', 'OPTIONS'} - 终端: tasks.get_task_comments_auth
2025-05-09 15:25:54,792 - app - INFO - 路由: /tasks/api/auth/tasks/<int:task_id>/attachments - 方法: {'HEAD', 'GET', 'OPTIONS'} - 终端: tasks.get_task_attachments_auth
2025-05-09 15:25:54,792 - app - INFO - 路由: /tasks/api/auth/tasks/<int:task_id>/risks - 方法: {'HEAD', 'GET', 'OPTIONS'} - 终端: tasks.get_task_risks_auth
2025-05-09 15:25:54,792 - app - INFO - 路由: /tasks/api/auth/tasks/<int:task_id>/risks - 方法: {'POST', 'OPTIONS'} - 终端: tasks.create_task_risk_auth
2025-05-09 15:25:54,792 - app - INFO - 路由: /tasks/api/auth/tasks/<int:task_id>/comments - 方法: {'POST', 'OPTIONS'} - 终端: tasks.add_task_comment_auth
2025-05-09 15:25:54,793 - app - INFO - 路由: /tasks/api/tasks/<int:task_id> - 方法: {'OPTIONS', 'PUT'} - 终端: tasks.api_update_task
2025-05-09 15:25:54,793 - app - INFO - 路由: /tasks/api/tasks/<int:task_id>/update_bypass - 方法: {'OPTIONS', 'PUT'} - 终端: tasks.update_task_bypass_csrf
2025-05-09 15:25:54,793 - app - INFO - 路由: /tasks/get-csrf-token - 方法: {'HEAD', 'GET', 'OPTIONS'} - 终端: tasks.get_csrf_token
2025-05-09 15:25:54,793 - app - INFO - 路由: /tasks/api/tasks/<int:task_id>/no_csrf - 方法: {'OPTIONS', 'PUT'} - 终端: tasks.update_task_no_csrf
2025-05-09 15:25:54,793 - app - INFO - 路由: /tasks/api/tasks/<int:task_id>/detail - 方法: {'HEAD', 'GET', 'OPTIONS'} - 终端: tasks.api_tasks_detail
2025-05-09 15:25:54,839 - app - WARNING - team_bp 未定义或无法导入
2025-05-09 15:25:54,958 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-05-09 15:25:54,959 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions 
WHERE permissions.name = ?
 LIMIT ? OFFSET ?
2025-05-09 15:25:54,960 - sqlalchemy.engine.Engine - INFO - [generated in 0.00035s] ('manage_users', 1, 0)
2025-05-09 15:25:54,960 - app.utils.permissions - INFO - 更新权限: manage_users
2025-05-09 15:25:54,961 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions 
WHERE permissions.name = ?
 LIMIT ? OFFSET ?
2025-05-09 15:25:54,961 - sqlalchemy.engine.Engine - INFO - [cached since 0.002063s ago] ('manage_roles', 1, 0)
2025-05-09 15:25:54,962 - app.utils.permissions - INFO - 更新权限: manage_roles
2025-05-09 15:25:54,962 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions 
WHERE permissions.name = ?
 LIMIT ? OFFSET ?
2025-05-09 15:25:54,962 - sqlalchemy.engine.Engine - INFO - [cached since 0.002951s ago] ('manage_all_projects', 1, 0)
2025-05-09 15:25:54,962 - app.utils.permissions - INFO - 更新权限: manage_all_projects
2025-05-09 15:25:54,963 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions 
WHERE permissions.name = ?
 LIMIT ? OFFSET ?
2025-05-09 15:25:54,963 - sqlalchemy.engine.Engine - INFO - [cached since 0.00383s ago] ('manage_project', 1, 0)
2025-05-09 15:25:54,963 - app.utils.permissions - INFO - 更新权限: manage_project
2025-05-09 15:25:54,964 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions 
WHERE permissions.name = ?
 LIMIT ? OFFSET ?
2025-05-09 15:25:54,964 - sqlalchemy.engine.Engine - INFO - [cached since 0.004771s ago] ('manage_all_tasks', 1, 0)
2025-05-09 15:25:54,964 - app.utils.permissions - INFO - 更新权限: manage_all_tasks
2025-05-09 15:25:54,965 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions 
WHERE permissions.name = ?
 LIMIT ? OFFSET ?
2025-05-09 15:25:54,965 - sqlalchemy.engine.Engine - INFO - [cached since 0.005536s ago] ('manage_task', 1, 0)
2025-05-09 15:25:54,965 - app.utils.permissions - INFO - 更新权限: manage_task
2025-05-09 15:25:54,965 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions 
WHERE permissions.name = ?
 LIMIT ? OFFSET ?
2025-05-09 15:25:54,965 - sqlalchemy.engine.Engine - INFO - [cached since 0.006185s ago] ('view_project', 1, 0)
2025-05-09 15:25:54,965 - app.utils.permissions - INFO - 更新权限: view_project
2025-05-09 15:25:54,966 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions 
WHERE permissions.name = ?
 LIMIT ? OFFSET ?
2025-05-09 15:25:54,966 - sqlalchemy.engine.Engine - INFO - [cached since 0.00685s ago] ('view_task', 1, 0)
2025-05-09 15:25:54,966 - app.utils.permissions - INFO - 更新权限: view_task
2025-05-09 15:25:54,966 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions 
WHERE permissions.name = ?
 LIMIT ? OFFSET ?
2025-05-09 15:25:54,967 - sqlalchemy.engine.Engine - INFO - [cached since 0.007674s ago] ('manage_resources', 1, 0)
2025-05-09 15:25:54,967 - app.utils.permissions - INFO - 更新权限: manage_resources
2025-05-09 15:25:54,967 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions 
WHERE permissions.name = ?
 LIMIT ? OFFSET ?
2025-05-09 15:25:54,967 - sqlalchemy.engine.Engine - INFO - [cached since 0.008477s ago] ('manage_risks', 1, 0)
2025-05-09 15:25:54,968 - app.utils.permissions - INFO - 更新权限: manage_risks
2025-05-09 15:25:54,968 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions 
WHERE permissions.name = ?
 LIMIT ? OFFSET ?
2025-05-09 15:25:54,970 - sqlalchemy.engine.Engine - INFO - [cached since 0.009971s ago] ('view_reports', 1, 0)
2025-05-09 15:25:54,970 - app.utils.permissions - INFO - 更新权限: view_reports
2025-05-09 15:25:54,971 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions 
WHERE permissions.name = ?
 LIMIT ? OFFSET ?
2025-05-09 15:25:54,971 - sqlalchemy.engine.Engine - INFO - [cached since 0.01151s ago] ('create_task', 1, 0)
2025-05-09 15:25:54,971 - app.utils.permissions - INFO - 更新权限: create_task
2025-05-09 15:25:54,972 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions 
WHERE permissions.name = ?
 LIMIT ? OFFSET ?
2025-05-09 15:25:54,972 - sqlalchemy.engine.Engine - INFO - [cached since 0.01269s ago] ('create_project', 1, 0)
2025-05-09 15:25:54,972 - app.utils.permissions - INFO - 更新权限: create_project
2025-05-09 15:25:54,972 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions 
WHERE permissions.name = ?
 LIMIT ? OFFSET ?
2025-05-09 15:25:54,974 - sqlalchemy.engine.Engine - INFO - [cached since 0.0137s ago] ('assign_task', 1, 0)
2025-05-09 15:25:54,974 - app.utils.permissions - INFO - 更新权限: assign_task
2025-05-09 15:25:54,974 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions 
WHERE permissions.name = ?
 LIMIT ? OFFSET ?
2025-05-09 15:25:54,974 - sqlalchemy.engine.Engine - INFO - [cached since 0.01456s ago] ('change_project_status', 1, 0)
2025-05-09 15:25:54,975 - app.utils.permissions - INFO - 更新权限: change_project_status
2025-05-09 15:25:54,975 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions 
WHERE permissions.name = ?
 LIMIT ? OFFSET ?
2025-05-09 15:25:54,975 - sqlalchemy.engine.Engine - INFO - [cached since 0.01545s ago] ('change_task_status', 1, 0)
2025-05-09 15:25:54,976 - app.utils.permissions - INFO - 更新权限: change_task_status
2025-05-09 15:25:54,976 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-05-09 15:25:54,976 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-05-09 15:25:54,977 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions
2025-05-09 15:25:54,977 - sqlalchemy.engine.Engine - INFO - [generated in 0.00028s] ()
2025-05-09 15:25:54,977 - sqlalchemy.engine.Engine - INFO - SELECT roles.id AS roles_id, roles.name AS roles_name, roles.description AS roles_description, roles.created_at AS roles_created_at 
FROM roles 
WHERE roles.name = ?
 LIMIT ? OFFSET ?
2025-05-09 15:25:54,978 - sqlalchemy.engine.Engine - INFO - [generated in 0.00022s] ('admin', 1, 0)
2025-05-09 15:25:54,979 - app.utils.permissions - INFO - 更新角色: admin
2025-05-09 15:25:54,979 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions, role_permissions 
WHERE ? = role_permissions.role_id AND permissions.id = role_permissions.permission_id
2025-05-09 15:25:54,980 - sqlalchemy.engine.Engine - INFO - [generated in 0.00027s] (1,)
2025-05-09 15:25:54,980 - app.utils.permissions - INFO - 为管理员角色添加所有权限: 16个
2025-05-09 15:25:54,980 - sqlalchemy.engine.Engine - INFO - SELECT roles.id AS roles_id, roles.name AS roles_name, roles.description AS roles_description, roles.created_at AS roles_created_at 
FROM roles 
WHERE roles.name = ?
 LIMIT ? OFFSET ?
2025-05-09 15:25:54,980 - sqlalchemy.engine.Engine - INFO - [cached since 0.003368s ago] ('manager', 1, 0)
2025-05-09 15:25:54,980 - app.utils.permissions - INFO - 更新角色: manager
2025-05-09 15:25:54,982 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions, role_permissions 
WHERE ? = role_permissions.role_id AND permissions.id = role_permissions.permission_id
2025-05-09 15:25:54,982 - sqlalchemy.engine.Engine - INFO - [cached since 0.001968s ago] (2,)
2025-05-09 15:25:54,982 - app.utils.permissions - INFO - 为角色 manager 添加权限: manage_project
2025-05-09 15:25:54,982 - app.utils.permissions - INFO - 为角色 manager 添加权限: manage_task
2025-05-09 15:25:54,982 - app.utils.permissions - INFO - 为角色 manager 添加权限: view_project
2025-05-09 15:25:54,982 - app.utils.permissions - INFO - 为角色 manager 添加权限: view_task
2025-05-09 15:25:54,984 - app.utils.permissions - INFO - 为角色 manager 添加权限: manage_resources
2025-05-09 15:25:54,984 - app.utils.permissions - INFO - 为角色 manager 添加权限: manage_risks
2025-05-09 15:25:54,984 - app.utils.permissions - INFO - 为角色 manager 添加权限: view_reports
2025-05-09 15:25:54,984 - app.utils.permissions - INFO - 为角色 manager 添加权限: create_project
2025-05-09 15:25:54,984 - app.utils.permissions - INFO - 为角色 manager 添加权限: create_task
2025-05-09 15:25:54,985 - app.utils.permissions - INFO - 为角色 manager 添加权限: assign_task
2025-05-09 15:25:54,985 - app.utils.permissions - INFO - 为角色 manager 添加权限: change_project_status
2025-05-09 15:25:54,985 - app.utils.permissions - INFO - 为角色 manager 添加权限: change_task_status
2025-05-09 15:25:54,985 - sqlalchemy.engine.Engine - INFO - SELECT roles.id AS roles_id, roles.name AS roles_name, roles.description AS roles_description, roles.created_at AS roles_created_at 
FROM roles 
WHERE roles.name = ?
 LIMIT ? OFFSET ?
2025-05-09 15:25:54,987 - sqlalchemy.engine.Engine - INFO - [cached since 0.008445s ago] ('user', 1, 0)
2025-05-09 15:25:54,987 - app.utils.permissions - INFO - 更新角色: user
2025-05-09 15:25:54,987 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions, role_permissions 
WHERE ? = role_permissions.role_id AND permissions.id = role_permissions.permission_id
2025-05-09 15:25:54,988 - sqlalchemy.engine.Engine - INFO - [cached since 0.007458s ago] (5,)
2025-05-09 15:25:54,988 - app.utils.permissions - INFO - 为角色 user 添加权限: view_project
2025-05-09 15:25:54,988 - app.utils.permissions - INFO - 为角色 user 添加权限: view_task
2025-05-09 15:25:54,989 - app.utils.permissions - INFO - 为角色 user 添加权限: view_reports
2025-05-09 15:25:54,989 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-05-09 15:25:54,989 - app.utils.permissions - INFO - 角色和权限初始化完成
2025-05-09 15:25:54,990 - __main__ - INFO - 角色和权限初始化成功
2025-05-09 15:25:54,990 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-05-09 15:25:54,991 - sqlalchemy.engine.Engine - INFO - SELECT users.id AS users_id, users.username AS users_username, users.email AS users_email, users.name AS users_name, users.password_hash AS users_password_hash, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.last_login AS users_last_login 
FROM users 
WHERE users.username = ?
 LIMIT ? OFFSET ?
2025-05-09 15:25:54,991 - sqlalchemy.engine.Engine - INFO - [generated in 0.00030s] ('system', 1, 0)
2025-05-09 15:25:54,993 - sqlalchemy.engine.Engine - INFO - SELECT projects.id AS projects_id, projects.name AS projects_name, projects.description AS projects_description, projects.status AS projects_status, projects.start_date AS projects_start_date, projects.end_date AS projects_end_date, projects.progress AS projects_progress, projects.created_at AS projects_created_at, projects.updated_at AS projects_updated_at, projects.manager_id AS projects_manager_id, projects.owner_id AS projects_owner_id 
FROM projects 
WHERE projects.name = ?
 LIMIT ? OFFSET ?
2025-05-09 15:25:54,993 - sqlalchemy.engine.Engine - INFO - [generated in 0.00045s] ('Test Project', 1, 0)
2025-05-09 15:25:54,994 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-05-09 15:25:54,994 - __main__ - INFO - 数据库初始化完成
2025-05-09 15:25:54,995 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-05-09 15:25:54,995 - sqlalchemy.engine.Engine - INFO - SELECT users.id AS users_id, users.username AS users_username, users.email AS users_email, users.name AS users_name, users.password_hash AS users_password_hash, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.last_login AS users_last_login 
FROM users 
WHERE users.username = ?
 LIMIT ? OFFSET ?
2025-05-09 15:25:54,995 - sqlalchemy.engine.Engine - INFO - [cached since 0.004382s ago] ('system', 1, 0)
2025-05-09 15:25:55,002 - sqlalchemy.engine.Engine - INFO - INSERT INTO resource_usages (user_id, cpu_usage, memory_usage, disk_usage, network_usage, recorded_at) VALUES (?, ?, ?, ?, ?, ?)
2025-05-09 15:25:55,003 - sqlalchemy.engine.Engine - INFO - [generated in 0.00042s] (2, 13.9, 52.1, 10.9, 0.0, '2025-05-09 07:25:55.001110')
2025-05-09 15:25:55,005 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-05-09 15:25:55,009 - __main__ - INFO - 系统资源检查完成
2025-05-09 15:25:55,010 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-05-09 15:25:55,010 - sqlalchemy.engine.Engine - INFO - DELETE FROM resource_usages WHERE resource_usages.recorded_at < ?
2025-05-09 15:25:55,010 - sqlalchemy.engine.Engine - INFO - [generated in 0.00032s] ('2025-04-09 07:25:55.009923',)
2025-05-09 15:25:55,012 - sqlalchemy.engine.Engine - INFO - DELETE FROM system_alerts WHERE system_alerts.is_resolved = 1 AND system_alerts.created_at < ?
2025-05-09 15:25:55,013 - sqlalchemy.engine.Engine - INFO - [generated in 0.00028s] ('2025-05-02 07:25:55.012234',)
2025-05-09 15:25:55,013 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-05-09 15:25:55,013 - __main__ - INFO - 旧数据清理完成
2025-05-09 15:25:55,025 - werkzeug - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:5000
 * Running on http://192.168.0.75:5000
2025-05-09 15:25:55,025 - werkzeug - INFO - [33mPress CTRL+C to quit[0m
2025-05-09 15:25:55,026 - werkzeug - INFO -  * Restarting with stat
2025-05-09 15:25:55,599 - app - INFO - File logging handler initialized successfully
2025-05-09 15:25:55,599 - app - INFO - Console logging handler initialized successfully
2025-05-09 15:25:55,600 - app - INFO - Application logging configuration completed
2025-05-09 15:25:55,600 - app - INFO - Development configuration initialized
2025-05-09 15:25:55,629 - app - INFO - Logging setup completed successfully
2025-05-09 15:25:55,870 - app - INFO - 已注册的路由:
2025-05-09 15:25:55,870 - app - INFO - 路由: /static/<path:filename> - 方法: {'GET', 'OPTIONS', 'HEAD'} - 终端: static
2025-05-09 15:25:55,871 - app - INFO - 路由: /api/users/<int:user_id> - 方法: {'POST', 'OPTIONS', 'PUT', 'HEAD', 'GET', 'DELETE'} - 终端: user_api_exempt.user_api_exempt_route
2025-05-09 15:25:55,871 - app - INFO - 路由: /api/users - 方法: {'POST', 'OPTIONS', 'PUT', 'HEAD', 'GET', 'DELETE'} - 终端: user_api_exempt.user_api_exempt_route
2025-05-09 15:25:55,871 - app - INFO - 路由: /tasks/<int:task_id>/dependencies/<int:dependency_id>/gantt - 方法: {'OPTIONS', 'DELETE'} - 终端: task_api_exempt.task_api_exempt_route
2025-05-09 15:25:55,871 - app - INFO - 路由: /tasks/<int:task_id>/gantt - 方法: {'OPTIONS', 'PUT'} - 终端: task_api_exempt.task_api_exempt_route
2025-05-09 15:25:55,872 - app - INFO - 路由: /tasks/project/<int:project_id>/gantt - 方法: {'GET', 'OPTIONS', 'HEAD'} - 终端: task_api_exempt.task_api_exempt_route
2025-05-09 15:25:55,872 - app - INFO - 路由: /tasks/project/<int:project_id>/gantt/data - 方法: {'GET', 'OPTIONS', 'HEAD'} - 终端: task_api_exempt.task_api_exempt_route
2025-05-09 15:25:55,872 - app - INFO - 路由: /api/tasks/<int:task_id>/no_csrf - 方法: {'POST', 'OPTIONS', 'PUT', 'HEAD', 'GET', 'DELETE'} - 终端: task_api_exempt.task_api_exempt_route
2025-05-09 15:25:55,872 - app - INFO - 路由: /api/tasks/<int:task_id> - 方法: {'POST', 'OPTIONS', 'PUT', 'HEAD', 'GET', 'DELETE'} - 终端: task_api_exempt.task_api_exempt_route
2025-05-09 15:25:55,872 - app - INFO - 路由: /tasks/dependencies/gantt - 方法: {'POST', 'OPTIONS'} - 终端: task_api_exempt.task_api_exempt_route
2025-05-09 15:25:55,873 - app - INFO - 路由: /api/tasks - 方法: {'POST', 'OPTIONS', 'PUT', 'HEAD', 'GET', 'DELETE'} - 终端: task_api_exempt.task_api_exempt_route
2025-05-09 15:25:55,873 - app - INFO - 路由: /login - 方法: {'GET', 'OPTIONS', 'HEAD'} - 终端: auth.login_page
2025-05-09 15:25:55,873 - app - INFO - 路由: /login - 方法: {'POST', 'OPTIONS'} - 终端: auth.login
2025-05-09 15:25:55,873 - app - INFO - 路由: /register - 方法: {'GET', 'OPTIONS', 'HEAD'} - 终端: auth.register_page
2025-05-09 15:25:55,873 - app - INFO - 路由: /register - 方法: {'POST', 'OPTIONS'} - 终端: auth.register
2025-05-09 15:25:55,874 - app - INFO - 路由: /logout - 方法: {'POST', 'GET', 'OPTIONS', 'HEAD'} - 终端: auth.logout
2025-05-09 15:25:55,874 - app - INFO - 路由: /refresh - 方法: {'POST', 'OPTIONS'} - 终端: auth.refresh
2025-05-09 15:25:55,874 - app - INFO - 路由: /profile - 方法: {'GET', 'OPTIONS', 'HEAD'} - 终端: auth.profile
2025-05-09 15:25:55,874 - app - INFO - 路由: /profile - 方法: {'OPTIONS', 'PUT'} - 终端: auth.update_profile
2025-05-09 15:25:55,874 - app - INFO - 路由: /users - 方法: {'GET', 'OPTIONS', 'HEAD'} - 终端: auth.get_users
2025-05-09 15:25:55,874 - app - INFO - 路由: /users/<int:user_id> - 方法: {'GET', 'OPTIONS', 'HEAD'} - 终端: auth.get_user_by_id
2025-05-09 15:25:55,875 - app - INFO - 路由: /update_user/<int:user_id> - 方法: {'OPTIONS', 'PUT'} - 终端: auth.update_user
2025-05-09 15:25:55,875 - app - INFO - 路由: /roles - 方法: {'GET', 'OPTIONS', 'HEAD'} - 终端: auth.get_roles
2025-05-09 15:25:55,875 - app - INFO - 路由: /permissions - 方法: {'GET', 'OPTIONS', 'HEAD'} - 终端: auth.get_permissions
2025-05-09 15:25:55,876 - app - INFO - 路由: /permissions - 方法: {'POST', 'OPTIONS'} - 终端: auth.create_permission
2025-05-09 15:25:55,876 - app - INFO - 路由: /permissions/<int:permission_id> - 方法: {'GET', 'OPTIONS', 'HEAD'} - 终端: auth.get_permission
2025-05-09 15:25:55,876 - app - INFO - 路由: /permissions/<int:permission_id> - 方法: {'OPTIONS', 'PUT'} - 终端: auth.update_permission
2025-05-09 15:25:55,876 - app - INFO - 路由: /permissions/<int:permission_id> - 方法: {'OPTIONS', 'DELETE'} - 终端: auth.delete_permission
2025-05-09 15:25:55,877 - app - INFO - 路由: /roles - 方法: {'POST', 'OPTIONS'} - 终端: auth.create_role
2025-05-09 15:25:55,877 - app - INFO - 路由: /roles/<int:role_id> - 方法: {'GET', 'OPTIONS', 'HEAD'} - 终端: auth.get_role
2025-05-09 15:25:55,877 - app - INFO - 路由: /roles/<int:role_id>/permissions - 方法: {'OPTIONS', 'PUT'} - 终端: auth.update_role_permissions
2025-05-09 15:25:55,877 - app - INFO - 路由: /roles/<int:role_id> - 方法: {'OPTIONS', 'DELETE'} - 终端: auth.delete_role
2025-05-09 15:25:55,878 - app - INFO - 路由: /dashboard - 方法: {'GET', 'OPTIONS', 'HEAD'} - 终端: auth.dashboard
2025-05-09 15:25:55,878 - app - INFO - 路由: /dashboard/redirect - 方法: {'POST', 'GET', 'OPTIONS', 'HEAD'} - 终端: auth.dashboard_redirect
2025-05-09 15:25:55,878 - app - INFO - 路由: /create_test_user - 方法: {'POST', 'OPTIONS'} - 终端: auth.create_test_user
2025-05-09 15:25:55,878 - app - INFO - 路由: /check - 方法: {'GET', 'OPTIONS', 'HEAD'} - 终端: auth.check_auth
2025-05-09 15:25:55,879 - app - INFO - 路由: /create_test_project - 方法: {'POST', 'OPTIONS'} - 终端: auth.create_test_project
2025-05-09 15:25:55,879 - app - INFO - 路由: /logout_all - 方法: {'POST', 'OPTIONS'} - 终端: auth.logout_all
2025-05-09 15:25:55,879 - app - INFO - 路由: /dashboard/data - 方法: {'GET', 'OPTIONS', 'HEAD'} - 终端: auth.dashboard_data
2025-05-09 15:25:55,879 - app - INFO - 路由: /check_token - 方法: {'GET', 'OPTIONS', 'HEAD'} - 终端: auth.check_token
2025-05-09 15:25:55,880 - app - INFO - 路由: /create_user - 方法: {'POST', 'OPTIONS'} - 终端: auth.create_user
2025-05-09 15:25:55,880 - app - INFO - 路由: /user_info - 方法: {'GET', 'OPTIONS', 'HEAD'} - 终端: auth.get_user_info
2025-05-09 15:25:55,880 - app - INFO - 路由: /user/<int:user_id> - 方法: {'OPTIONS', 'DELETE'} - 终端: auth.delete_user
2025-05-09 15:25:55,880 - app - INFO - 路由: /users/<int:user_id>/roles - 方法: {'GET', 'OPTIONS', 'HEAD'} - 终端: auth.get_user_roles
2025-05-09 15:25:55,881 - app - INFO - 路由: /users/<int:user_id>/roles - 方法: {'OPTIONS', 'PUT'} - 终端: auth.update_user_roles
2025-05-09 15:25:55,881 - app - INFO - 路由: /users/<int:user_id>/notifications - 方法: {'GET', 'OPTIONS', 'HEAD'} - 终端: auth.get_user_notifications
2025-05-09 15:25:55,881 - app - INFO - 路由: /notifications/<int:notification_id>/read - 方法: {'OPTIONS', 'PUT'} - 终端: auth.mark_notification_as_read
2025-05-09 15:25:55,881 - app - INFO - 路由: /notifications/read_all - 方法: {'OPTIONS', 'PUT'} - 终端: auth.mark_all_notifications_as_read
2025-05-09 15:25:55,882 - app - INFO - 路由: /change-password - 方法: {'POST', 'OPTIONS'} - 终端: auth.change_password
2025-05-09 15:25:55,882 - app - INFO - 路由: /reset-password - 方法: {'GET', 'OPTIONS', 'HEAD'} - 终端: auth.reset_password_page
2025-05-09 15:25:55,882 - app - INFO - 路由: /verify-email/confirm - 方法: {'GET', 'OPTIONS', 'HEAD'} - 终端: auth.verify_email_confirm_page
2025-05-09 15:25:55,882 - app - INFO - 路由: /auth/csrf-token - 方法: {'GET', 'OPTIONS', 'HEAD'} - 终端: auth.get_csrf_token
2025-05-09 15:25:55,882 - app - INFO - 路由: /api/users/<int:user_id> - 方法: {'OPTIONS', 'PUT'} - 终端: auth.api_update_user
2025-05-09 15:25:55,882 - app - INFO - 路由: /api/users/<int:user_id> - 方法: {'OPTIONS', 'DELETE'} - 终端: auth.api_delete_user
2025-05-09 15:25:55,883 - app - INFO - 路由: /api/users - 方法: {'GET', 'OPTIONS', 'HEAD'} - 终端: auth.api_get_users
2025-05-09 15:25:55,883 - app - INFO - 路由: /api/users - 方法: {'POST', 'OPTIONS'} - 终端: auth.api_create_user
2025-05-09 15:25:55,883 - app - INFO - 路由: /auth/users/<int:user_id> - 方法: {'GET', 'OPTIONS', 'HEAD'} - 终端: auth.get_user_details
2025-05-09 15:25:55,883 - app - INFO - 路由: /api/users/<int:user_id> - 方法: {'OPTIONS', 'PUT', 'HEAD', 'GET', 'DELETE'} - 终端: auth.api_user_operations
2025-05-09 15:25:55,883 - app - INFO - 路由: /auth/user-csrf-token - 方法: {'GET', 'OPTIONS', 'HEAD'} - 终端: auth.get_user_csrf_token
2025-05-09 15:25:55,883 - app - INFO - 路由: /main/ - 方法: {'GET', 'OPTIONS', 'HEAD'} - 终端: main.index
2025-05-09 15:25:55,884 - app - INFO - 路由: /main/dashboard - 方法: {'GET', 'OPTIONS', 'HEAD'} - 终端: main.dashboard
2025-05-09 15:25:55,884 - app - INFO - 路由: /main/check_token - 方法: {'GET', 'OPTIONS', 'HEAD'} - 终端: main.check_token
2025-05-09 15:25:55,884 - app - INFO - 路由: /main/projects - 方法: {'GET', 'OPTIONS', 'HEAD'} - 终端: main.projects
2025-05-09 15:25:55,884 - app - INFO - 路由: /main/tasks - 方法: {'GET', 'OPTIONS', 'HEAD'} - 终端: main.tasks
2025-05-09 15:25:55,885 - app - INFO - 路由: /main/risks - 方法: {'GET', 'OPTIONS', 'HEAD'} - 终端: main.risks
2025-05-09 15:25:55,885 - app - INFO - 路由: /main/reports - 方法: {'GET', 'OPTIONS', 'HEAD'} - 终端: main.reports
2025-05-09 15:25:55,885 - app - INFO - 路由: /main/resources - 方法: {'GET', 'OPTIONS', 'HEAD'} - 终端: main.resources
2025-05-09 15:25:55,887 - app - INFO - 路由: /main/profile - 方法: {'GET', 'OPTIONS', 'HEAD'} - 终端: main.profile
2025-05-09 15:25:55,887 - app - INFO - 路由: /main/system/status - 方法: {'GET', 'OPTIONS', 'HEAD'} - 终端: main.system_status
2025-05-09 15:25:55,888 - app - INFO - 路由: /main/api/dashboard/data - 方法: {'GET', 'OPTIONS', 'HEAD'} - 终端: main.get_dashboard_data
2025-05-09 15:25:55,888 - app - INFO - 路由: /main/test - 方法: {'GET', 'OPTIONS', 'HEAD'} - 终端: main.test_route
2025-05-09 15:25:55,888 - app - INFO - 路由: /main/projects/detail/<int:project_id> - 方法: {'GET', 'OPTIONS', 'HEAD'} - 终端: main.project_detail_redirect
2025-05-09 15:25:55,888 - app - INFO - 路由: /main/users - 方法: {'GET', 'OPTIONS', 'HEAD'} - 终端: main.users
2025-05-09 15:25:55,888 - app - INFO - 路由: /main/debug/projects - 方法: {'GET', 'OPTIONS', 'HEAD'} - 终端: main.debug_projects
2025-05-09 15:25:55,889 - app - INFO - 路由: /main/simple/projects - 方法: {'GET', 'OPTIONS', 'HEAD'} - 终端: main.simple_projects
2025-05-09 15:25:55,889 - app - INFO - 路由: /main/static-test - 方法: {'GET', 'OPTIONS', 'HEAD'} - 终端: main.static_test
2025-05-09 15:25:55,889 - app - INFO - 路由: /main/print-projects - 方法: {'GET', 'OPTIONS', 'HEAD'} - 终端: main.print_projects
2025-05-09 15:25:55,889 - app - INFO - 路由: /main/bypass-projects - 方法: {'GET', 'OPTIONS', 'HEAD'} - 终端: main.bypass_projects
2025-05-09 15:25:55,889 - app - INFO - 路由: /main/debug-projects - 方法: {'GET', 'OPTIONS', 'HEAD'} - 终端: main.debug_projects_api
2025-05-09 15:25:55,890 - app - INFO - 路由: /projects/list - 方法: {'GET', 'OPTIONS', 'HEAD'} - 终端: projects.project_list
2025-05-09 15:25:55,890 - app - INFO - 路由: /projects/ - 方法: {'GET', 'OPTIONS', 'HEAD'} - 终端: projects.get_projects
2025-05-09 15:25:55,890 - app - INFO - 路由: /projects/ - 方法: {'POST', 'OPTIONS'} - 终端: projects.create_project
2025-05-09 15:25:55,890 - app - INFO - 路由: /projects/<int:project_id> - 方法: {'GET', 'OPTIONS', 'HEAD'} - 终端: projects.get_project
2025-05-09 15:25:55,891 - app - INFO - 路由: /projects/<int:project_id> - 方法: {'OPTIONS', 'PUT'} - 终端: projects.update_project
2025-05-09 15:25:55,891 - app - INFO - 路由: /projects/<int:project_id> - 方法: {'OPTIONS', 'DELETE'} - 终端: projects.delete_project
2025-05-09 15:25:55,891 - app - INFO - 路由: /projects/<int:project_id>/members - 方法: {'GET', 'OPTIONS', 'HEAD'} - 终端: projects.get_project_members
2025-05-09 15:25:55,892 - app - INFO - 路由: /projects/<int:project_id>/members - 方法: {'POST', 'OPTIONS'} - 终端: projects.add_project_member
2025-05-09 15:25:55,892 - app - INFO - 路由: /projects/<int:project_id>/members/<int:user_id> - 方法: {'OPTIONS', 'DELETE'} - 终端: projects.remove_project_member
2025-05-09 15:25:55,892 - app - INFO - 路由: /projects/detail/<int:project_id> - 方法: {'GET', 'OPTIONS', 'HEAD'} - 终端: projects.detail
2025-05-09 15:25:55,892 - app - INFO - 路由: /projects/api/detail/<int:project_id> - 方法: {'GET', 'OPTIONS', 'HEAD'} - 终端: projects.detail_api
2025-05-09 15:25:55,892 - app - INFO - 路由: /projects/api/projects/<int:project_id> - 方法: {'GET', 'OPTIONS', 'HEAD'} - 终端: projects.get_project_api
2025-05-09 15:25:55,893 - app - INFO - 路由: /projects/api/projects/<int:project_id> - 方法: {'OPTIONS', 'PUT'} - 终端: projects.update_project_api
2025-05-09 15:25:55,893 - app - INFO - 路由: /projects/api/projects/<int:project_id> - 方法: {'OPTIONS', 'DELETE'} - 终端: projects.delete_project_api
2025-05-09 15:25:55,893 - app - INFO - 路由: /projects/api/auth/projects - 方法: {'GET', 'OPTIONS', 'HEAD'} - 终端: projects.get_projects_api
2025-05-09 15:25:55,894 - app - INFO - 路由: /projects/api/auth/projects/<int:project_id> - 方法: {'GET', 'OPTIONS', 'HEAD'} - 终端: projects.get_project_auth_api
2025-05-09 15:25:55,894 - app - INFO - 路由: /projects/api/noauth/projects/<int:project_id> - 方法: {'OPTIONS', 'PUT', 'HEAD', 'GET', 'DELETE'} - 终端: projects.get_project_noauth
2025-05-09 15:25:55,894 - app - INFO - 路由: /projects/api/auth/projects - 方法: {'POST', 'OPTIONS'} - 终端: projects.create_project_auth
2025-05-09 15:25:55,894 - app - INFO - 路由: /projects/api/project-managers - 方法: {'GET', 'OPTIONS', 'HEAD'} - 终端: projects.get_project_managers
2025-05-09 15:25:55,894 - app - INFO - 路由: /projects/api/projects - 方法: {'GET', 'OPTIONS', 'HEAD'} - 终端: projects.get_all_projects_api
2025-05-09 15:25:55,895 - app - INFO - 路由: /projects/api/active-projects - 方法: {'GET', 'OPTIONS', 'HEAD'} - 终端: projects.get_active_projects_api
2025-05-09 15:25:55,895 - app - INFO - 路由: /projects/api/projects/<int:project_id>/members - 方法: {'GET', 'OPTIONS', 'HEAD'} - 终端: projects.get_project_members_api
2025-05-09 15:25:55,895 - app - INFO - 路由: /list - 方法: {'GET', 'OPTIONS', 'HEAD'} - 终端: project_root.project_list
2025-05-09 15:25:55,895 - app - INFO - 路由: / - 方法: {'GET', 'OPTIONS', 'HEAD'} - 终端: project_root.get_projects
2025-05-09 15:25:55,896 - app - INFO - 路由: / - 方法: {'POST', 'OPTIONS'} - 终端: project_root.create_project
2025-05-09 15:25:55,896 - app - INFO - 路由: /<int:project_id> - 方法: {'GET', 'OPTIONS', 'HEAD'} - 终端: project_root.get_project
2025-05-09 15:25:55,896 - app - INFO - 路由: /<int:project_id> - 方法: {'OPTIONS', 'PUT'} - 终端: project_root.update_project
2025-05-09 15:25:55,896 - app - INFO - 路由: /<int:project_id> - 方法: {'OPTIONS', 'DELETE'} - 终端: project_root.delete_project
2025-05-09 15:25:55,896 - app - INFO - 路由: /<int:project_id>/members - 方法: {'GET', 'OPTIONS', 'HEAD'} - 终端: project_root.get_project_members
2025-05-09 15:25:55,897 - app - INFO - 路由: /<int:project_id>/members - 方法: {'POST', 'OPTIONS'} - 终端: project_root.add_project_member
2025-05-09 15:25:55,897 - app - INFO - 路由: /<int:project_id>/members/<int:user_id> - 方法: {'OPTIONS', 'DELETE'} - 终端: project_root.remove_project_member
2025-05-09 15:25:55,897 - app - INFO - 路由: /detail/<int:project_id> - 方法: {'GET', 'OPTIONS', 'HEAD'} - 终端: project_root.detail
2025-05-09 15:25:55,897 - app - INFO - 路由: /api/detail/<int:project_id> - 方法: {'GET', 'OPTIONS', 'HEAD'} - 终端: project_root.detail_api
2025-05-09 15:25:55,897 - app - INFO - 路由: /api/projects/<int:project_id> - 方法: {'GET', 'OPTIONS', 'HEAD'} - 终端: project_root.get_project_api
2025-05-09 15:25:55,898 - app - INFO - 路由: /api/projects/<int:project_id> - 方法: {'OPTIONS', 'PUT'} - 终端: project_root.update_project_api
2025-05-09 15:25:55,898 - app - INFO - 路由: /api/projects/<int:project_id> - 方法: {'OPTIONS', 'DELETE'} - 终端: project_root.delete_project_api
2025-05-09 15:25:55,898 - app - INFO - 路由: /api/auth/projects - 方法: {'GET', 'OPTIONS', 'HEAD'} - 终端: project_root.get_projects_api
2025-05-09 15:25:55,898 - app - INFO - 路由: /api/auth/projects/<int:project_id> - 方法: {'GET', 'OPTIONS', 'HEAD'} - 终端: project_root.get_project_auth_api
2025-05-09 15:25:55,898 - app - INFO - 路由: /api/noauth/projects/<int:project_id> - 方法: {'OPTIONS', 'PUT', 'HEAD', 'GET', 'DELETE'} - 终端: project_root.get_project_noauth
2025-05-09 15:25:55,899 - app - INFO - 路由: /api/auth/projects - 方法: {'POST', 'OPTIONS'} - 终端: project_root.create_project_auth
2025-05-09 15:25:55,899 - app - INFO - 路由: /api/project-managers - 方法: {'GET', 'OPTIONS', 'HEAD'} - 终端: project_root.get_project_managers
2025-05-09 15:25:55,899 - app - INFO - 路由: /api/projects - 方法: {'GET', 'OPTIONS', 'HEAD'} - 终端: project_root.get_all_projects_api
2025-05-09 15:25:55,899 - app - INFO - 路由: /api/active-projects - 方法: {'GET', 'OPTIONS', 'HEAD'} - 终端: project_root.get_active_projects_api
2025-05-09 15:25:55,899 - app - INFO - 路由: /api/projects/<int:project_id>/members - 方法: {'GET', 'OPTIONS', 'HEAD'} - 终端: project_root.get_project_members_api
2025-05-09 15:25:55,899 - app - INFO - 路由: /tasks/ - 方法: {'GET', 'OPTIONS', 'HEAD'} - 终端: tasks.get_tasks
2025-05-09 15:25:55,900 - app - INFO - 路由: /tasks/ - 方法: {'POST', 'OPTIONS'} - 终端: tasks.create_task
2025-05-09 15:25:55,900 - app - INFO - 路由: /tasks/<int:task_id> - 方法: {'GET', 'OPTIONS', 'HEAD'} - 终端: tasks.get_task
2025-05-09 15:25:55,900 - app - INFO - 路由: /tasks/<int:task_id> - 方法: {'OPTIONS', 'PUT'} - 终端: tasks.update_task
2025-05-09 15:25:55,900 - app - INFO - 路由: /tasks/<int:task_id> - 方法: {'OPTIONS', 'DELETE'} - 终端: tasks.delete_task
2025-05-09 15:25:55,901 - app - INFO - 路由: /tasks/<int:task_id>/comments - 方法: {'GET', 'OPTIONS', 'HEAD'} - 终端: tasks.get_task_comments
2025-05-09 15:25:55,901 - app - INFO - 路由: /tasks/<int:task_id>/comments - 方法: {'POST', 'OPTIONS'} - 终端: tasks.add_task_comment
2025-05-09 15:25:55,902 - app - INFO - 路由: /tasks/<int:task_id>/attachments - 方法: {'GET', 'OPTIONS', 'HEAD'} - 终端: tasks.get_task_attachments
2025-05-09 15:25:55,902 - app - INFO - 路由: /tasks/<int:task_id>/attachments - 方法: {'POST', 'OPTIONS'} - 终端: tasks.add_task_attachment
2025-05-09 15:25:55,902 - app - INFO - 路由: /tasks/<int:task_id>/resources - 方法: {'GET', 'OPTIONS', 'HEAD'} - 终端: tasks.get_task_resources
2025-05-09 15:25:55,904 - app - INFO - 路由: /tasks/<int:task_id>/subtasks - 方法: {'GET', 'OPTIONS', 'HEAD'} - 终端: tasks.get_subtasks
2025-05-09 15:25:55,904 - app - INFO - 路由: /tasks/<int:task_id>/subtasks - 方法: {'POST', 'OPTIONS'} - 终端: tasks.create_subtask
2025-05-09 15:25:55,905 - app - INFO - 路由: /tasks/<int:task_id>/dependencies - 方法: {'GET', 'OPTIONS', 'HEAD'} - 终端: tasks.get_dependencies
2025-05-09 15:25:55,905 - app - INFO - 路由: /tasks/<int:task_id>/dependencies - 方法: {'POST', 'OPTIONS'} - 终端: tasks.add_dependency
2025-05-09 15:25:55,905 - app - INFO - 路由: /tasks/<int:task_id>/logs - 方法: {'GET', 'OPTIONS', 'HEAD'} - 终端: tasks.get_task_logs
2025-05-09 15:25:55,906 - app - INFO - 路由: /tasks/<int:task_id>/logs - 方法: {'POST', 'OPTIONS'} - 终端: tasks.add_task_log
2025-05-09 15:25:55,906 - app - INFO - 路由: /tasks/project/<int:project_id>/gantt - 方法: {'GET', 'OPTIONS', 'HEAD'} - 终端: tasks.gantt_chart
2025-05-09 15:25:55,906 - app - INFO - 路由: /tasks/project/<int:project_id>/gantt/data - 方法: {'GET', 'OPTIONS', 'HEAD'} - 终端: tasks.get_gantt_data
2025-05-09 15:25:55,907 - app - INFO - 路由: /tasks/<int:task_id>/gantt - 方法: {'OPTIONS', 'PUT'} - 终端: tasks.update_gantt_task
2025-05-09 15:25:55,907 - app - INFO - 路由: /tasks/dependencies/gantt - 方法: {'POST', 'OPTIONS'} - 终端: tasks.create_gantt_dependency
2025-05-09 15:25:55,907 - app - INFO - 路由: /tasks/<int:task_id>/dependencies/<int:dependency_id>/gantt - 方法: {'OPTIONS', 'DELETE'} - 终端: tasks.delete_gantt_dependency
2025-05-09 15:25:55,907 - app - INFO - 路由: /tasks/<int:task_id>/status - 方法: {'OPTIONS', 'PUT'} - 终端: tasks.update_task_status
2025-05-09 15:25:55,908 - app - INFO - 路由: /tasks/api/tasks/dependencies - 方法: {'POST', 'OPTIONS'} - 终端: tasks.add_task_dependency
2025-05-09 15:25:55,908 - app - INFO - 路由: /tasks/<int:task_id>/detail - 方法: {'GET', 'OPTIONS', 'HEAD'} - 终端: tasks.task_detail_api
2025-05-09 15:25:55,908 - app - INFO - 路由: /tasks/api/auth/tasks/<int:task_id>/detail - 方法: {'GET', 'OPTIONS', 'HEAD'} - 终端: tasks.task_detail_api_auth
2025-05-09 15:25:55,908 - app - INFO - 路由: /tasks/<int:task_id>/view - 方法: {'GET', 'OPTIONS', 'HEAD'} - 终端: tasks.task_detail_page
2025-05-09 15:25:55,908 - app - INFO - 路由: /tasks/<int:task_id>/edit - 方法: {'GET', 'OPTIONS', 'HEAD'} - 终端: tasks.edit_task_page
2025-05-09 15:25:55,909 - app - INFO - 路由: /tasks/api/auth/tasks/<int:task_id>/attachments - 方法: {'POST', 'OPTIONS'} - 终端: tasks.add_task_attachment_auth
2025-05-09 15:25:55,909 - app - INFO - 路由: /tasks/api/auth/tasks/<int:task_id>/attachments/<int:attachment_id>/download - 方法: {'GET', 'OPTIONS', 'HEAD'} - 终端: tasks.download_attachment_auth
2025-05-09 15:25:55,909 - app - INFO - 路由: /tasks/api/tasks/<int:task_id>/attachments - 方法: {'POST', 'OPTIONS'} - 终端: tasks.upload_attachment
2025-05-09 15:25:55,909 - app - INFO - 路由: /tasks/api/tasks/<int:task_id>/attachments/<int:attachment_id>/download - 方法: {'GET', 'OPTIONS', 'HEAD'} - 终端: tasks.download_attachment
2025-05-09 15:25:55,909 - app - INFO - 路由: /tasks/api/tasks/<int:task_id>/attachments/<int:attachment_id> - 方法: {'OPTIONS', 'DELETE'} - 终端: tasks.delete_attachment
2025-05-09 15:25:55,910 - app - INFO - 路由: /tasks/api/tasks/<int:task_id>/attachments/<int:attachment_id>/versions - 方法: {'POST', 'OPTIONS'} - 终端: tasks.upload_new_version
2025-05-09 15:25:55,910 - app - INFO - 路由: /tasks/api/tasks/<int:task_id>/attachments/<int:attachment_id>/versions - 方法: {'GET', 'OPTIONS', 'HEAD'} - 终端: tasks.get_attachment_versions
2025-05-09 15:25:55,910 - app - INFO - 路由: /tasks/api/tasks/<int:task_id>/risks - 方法: {'GET', 'OPTIONS', 'HEAD'} - 终端: tasks.task_risks_front_path
2025-05-09 15:25:55,910 - app - INFO - 路由: /tasks/<int:task_id>/risks - 方法: {'POST', 'OPTIONS'} - 终端: tasks.create_task_risk_front_path
2025-05-09 15:25:55,911 - app - INFO - 路由: /tasks/api/tasks/<int:task_id>/progress - 方法: {'GET', 'OPTIONS', 'HEAD'} - 终端: tasks.get_task_progress
2025-05-09 15:25:55,911 - app - INFO - 路由: /tasks/api/tasks/<int:task_id>/progress - 方法: {'POST', 'OPTIONS'} - 终端: tasks.update_task_progress
2025-05-09 15:25:55,911 - app - INFO - 路由: /tasks/api/tasks/<int:task_id>/progress/approve - 方法: {'POST', 'OPTIONS'} - 终端: tasks.approve_task_progress
2025-05-09 15:25:55,912 - app - INFO - 路由: /tasks/list - 方法: {'GET', 'OPTIONS', 'HEAD'} - 终端: tasks.task_list
2025-05-09 15:25:55,912 - app - INFO - 路由: /tasks/api/auth/tasks/<int:task_id>/logs - 方法: {'GET', 'OPTIONS', 'HEAD'} - 终端: tasks.get_task_logs_auth
2025-05-09 15:25:55,912 - app - INFO - 路由: /tasks/api/auth/tasks/<int:task_id>/subtasks - 方法: {'GET', 'OPTIONS', 'HEAD'} - 终端: tasks.get_subtasks_auth
2025-05-09 15:25:55,912 - app - INFO - 路由: /tasks/api/auth/tasks/<int:task_id>/comments - 方法: {'GET', 'OPTIONS', 'HEAD'} - 终端: tasks.get_task_comments_auth
2025-05-09 15:25:55,912 - app - INFO - 路由: /tasks/api/auth/tasks/<int:task_id>/attachments - 方法: {'GET', 'OPTIONS', 'HEAD'} - 终端: tasks.get_task_attachments_auth
2025-05-09 15:25:55,913 - app - INFO - 路由: /tasks/api/auth/tasks/<int:task_id>/risks - 方法: {'GET', 'OPTIONS', 'HEAD'} - 终端: tasks.get_task_risks_auth
2025-05-09 15:25:55,913 - app - INFO - 路由: /tasks/api/auth/tasks/<int:task_id>/risks - 方法: {'POST', 'OPTIONS'} - 终端: tasks.create_task_risk_auth
2025-05-09 15:25:55,913 - app - INFO - 路由: /tasks/api/auth/tasks/<int:task_id>/comments - 方法: {'POST', 'OPTIONS'} - 终端: tasks.add_task_comment_auth
2025-05-09 15:25:55,913 - app - INFO - 路由: /tasks/api/tasks/<int:task_id> - 方法: {'OPTIONS', 'PUT'} - 终端: tasks.api_update_task
2025-05-09 15:25:55,914 - app - INFO - 路由: /tasks/api/tasks/<int:task_id>/update_bypass - 方法: {'OPTIONS', 'PUT'} - 终端: tasks.update_task_bypass_csrf
2025-05-09 15:25:55,914 - app - INFO - 路由: /tasks/get-csrf-token - 方法: {'GET', 'OPTIONS', 'HEAD'} - 终端: tasks.get_csrf_token
2025-05-09 15:25:55,914 - app - INFO - 路由: /tasks/api/tasks/<int:task_id>/no_csrf - 方法: {'OPTIONS', 'PUT'} - 终端: tasks.update_task_no_csrf
2025-05-09 15:25:55,914 - app - INFO - 路由: /tasks/api/tasks/<int:task_id>/detail - 方法: {'GET', 'OPTIONS', 'HEAD'} - 终端: tasks.api_tasks_detail
2025-05-09 15:25:55,963 - app - WARNING - team_bp 未定义或无法导入
2025-05-09 15:25:56,081 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-05-09 15:25:56,083 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions 
WHERE permissions.name = ?
 LIMIT ? OFFSET ?
2025-05-09 15:25:56,083 - sqlalchemy.engine.Engine - INFO - [generated in 0.00041s] ('manage_users', 1, 0)
2025-05-09 15:25:56,084 - app.utils.permissions - INFO - 更新权限: manage_users
2025-05-09 15:25:56,085 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions 
WHERE permissions.name = ?
 LIMIT ? OFFSET ?
2025-05-09 15:25:56,085 - sqlalchemy.engine.Engine - INFO - [cached since 0.00234s ago] ('manage_roles', 1, 0)
2025-05-09 15:25:56,085 - app.utils.permissions - INFO - 更新权限: manage_roles
2025-05-09 15:25:56,086 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions 
WHERE permissions.name = ?
 LIMIT ? OFFSET ?
2025-05-09 15:25:56,086 - sqlalchemy.engine.Engine - INFO - [cached since 0.003382s ago] ('manage_all_projects', 1, 0)
2025-05-09 15:25:56,086 - app.utils.permissions - INFO - 更新权限: manage_all_projects
2025-05-09 15:25:56,088 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions 
WHERE permissions.name = ?
 LIMIT ? OFFSET ?
2025-05-09 15:25:56,088 - sqlalchemy.engine.Engine - INFO - [cached since 0.004463s ago] ('manage_project', 1, 0)
2025-05-09 15:25:56,088 - app.utils.permissions - INFO - 更新权限: manage_project
2025-05-09 15:25:56,089 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions 
WHERE permissions.name = ?
 LIMIT ? OFFSET ?
2025-05-09 15:25:56,089 - sqlalchemy.engine.Engine - INFO - [cached since 0.005226s ago] ('manage_all_tasks', 1, 0)
2025-05-09 15:25:56,089 - app.utils.permissions - INFO - 更新权限: manage_all_tasks
2025-05-09 15:25:56,089 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions 
WHERE permissions.name = ?
 LIMIT ? OFFSET ?
2025-05-09 15:25:56,090 - sqlalchemy.engine.Engine - INFO - [cached since 0.005976s ago] ('manage_task', 1, 0)
2025-05-09 15:25:56,090 - app.utils.permissions - INFO - 更新权限: manage_task
2025-05-09 15:25:56,090 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions 
WHERE permissions.name = ?
 LIMIT ? OFFSET ?
2025-05-09 15:25:56,090 - sqlalchemy.engine.Engine - INFO - [cached since 0.006718s ago] ('view_project', 1, 0)
2025-05-09 15:25:56,091 - app.utils.permissions - INFO - 更新权限: view_project
2025-05-09 15:25:56,091 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions 
WHERE permissions.name = ?
 LIMIT ? OFFSET ?
2025-05-09 15:25:56,091 - sqlalchemy.engine.Engine - INFO - [cached since 0.007448s ago] ('view_task', 1, 0)
2025-05-09 15:25:56,091 - app.utils.permissions - INFO - 更新权限: view_task
2025-05-09 15:25:56,092 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions 
WHERE permissions.name = ?
 LIMIT ? OFFSET ?
2025-05-09 15:25:56,092 - sqlalchemy.engine.Engine - INFO - [cached since 0.008196s ago] ('manage_resources', 1, 0)
2025-05-09 15:25:56,092 - app.utils.permissions - INFO - 更新权限: manage_resources
2025-05-09 15:25:56,093 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions 
WHERE permissions.name = ?
 LIMIT ? OFFSET ?
2025-05-09 15:25:56,093 - sqlalchemy.engine.Engine - INFO - [cached since 0.009195s ago] ('manage_risks', 1, 0)
2025-05-09 15:25:56,093 - app.utils.permissions - INFO - 更新权限: manage_risks
2025-05-09 15:25:56,094 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions 
WHERE permissions.name = ?
 LIMIT ? OFFSET ?
2025-05-09 15:25:56,094 - sqlalchemy.engine.Engine - INFO - [cached since 0.0105s ago] ('view_reports', 1, 0)
2025-05-09 15:25:56,094 - app.utils.permissions - INFO - 更新权限: view_reports
2025-05-09 15:25:56,095 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions 
WHERE permissions.name = ?
 LIMIT ? OFFSET ?
2025-05-09 15:25:56,095 - sqlalchemy.engine.Engine - INFO - [cached since 0.01151s ago] ('create_task', 1, 0)
2025-05-09 15:25:56,095 - app.utils.permissions - INFO - 更新权限: create_task
2025-05-09 15:25:56,096 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions 
WHERE permissions.name = ?
 LIMIT ? OFFSET ?
2025-05-09 15:25:56,096 - sqlalchemy.engine.Engine - INFO - [cached since 0.0123s ago] ('create_project', 1, 0)
2025-05-09 15:25:56,096 - app.utils.permissions - INFO - 更新权限: create_project
2025-05-09 15:25:56,096 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions 
WHERE permissions.name = ?
 LIMIT ? OFFSET ?
2025-05-09 15:25:56,097 - sqlalchemy.engine.Engine - INFO - [cached since 0.01299s ago] ('assign_task', 1, 0)
2025-05-09 15:25:56,097 - app.utils.permissions - INFO - 更新权限: assign_task
2025-05-09 15:25:56,097 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions 
WHERE permissions.name = ?
 LIMIT ? OFFSET ?
2025-05-09 15:25:56,097 - sqlalchemy.engine.Engine - INFO - [cached since 0.01383s ago] ('change_project_status', 1, 0)
2025-05-09 15:25:56,098 - app.utils.permissions - INFO - 更新权限: change_project_status
2025-05-09 15:25:56,098 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions 
WHERE permissions.name = ?
 LIMIT ? OFFSET ?
2025-05-09 15:25:56,098 - sqlalchemy.engine.Engine - INFO - [cached since 0.01484s ago] ('change_task_status', 1, 0)
2025-05-09 15:25:56,098 - app.utils.permissions - INFO - 更新权限: change_task_status
2025-05-09 15:25:56,099 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-05-09 15:25:56,099 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-05-09 15:25:56,100 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions
2025-05-09 15:25:56,100 - sqlalchemy.engine.Engine - INFO - [generated in 0.00023s] ()
2025-05-09 15:25:56,101 - sqlalchemy.engine.Engine - INFO - SELECT roles.id AS roles_id, roles.name AS roles_name, roles.description AS roles_description, roles.created_at AS roles_created_at 
FROM roles 
WHERE roles.name = ?
 LIMIT ? OFFSET ?
2025-05-09 15:25:56,101 - sqlalchemy.engine.Engine - INFO - [generated in 0.00029s] ('admin', 1, 0)
2025-05-09 15:25:56,101 - app.utils.permissions - INFO - 更新角色: admin
2025-05-09 15:25:56,103 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions, role_permissions 
WHERE ? = role_permissions.role_id AND permissions.id = role_permissions.permission_id
2025-05-09 15:25:56,103 - sqlalchemy.engine.Engine - INFO - [generated in 0.00029s] (1,)
2025-05-09 15:25:56,104 - app.utils.permissions - INFO - 为管理员角色添加所有权限: 16个
2025-05-09 15:25:56,104 - sqlalchemy.engine.Engine - INFO - SELECT roles.id AS roles_id, roles.name AS roles_name, roles.description AS roles_description, roles.created_at AS roles_created_at 
FROM roles 
WHERE roles.name = ?
 LIMIT ? OFFSET ?
2025-05-09 15:25:56,104 - sqlalchemy.engine.Engine - INFO - [cached since 0.003932s ago] ('manager', 1, 0)
2025-05-09 15:25:56,105 - app.utils.permissions - INFO - 更新角色: manager
2025-05-09 15:25:56,105 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions, role_permissions 
WHERE ? = role_permissions.role_id AND permissions.id = role_permissions.permission_id
2025-05-09 15:25:56,105 - sqlalchemy.engine.Engine - INFO - [cached since 0.002708s ago] (2,)
2025-05-09 15:25:56,106 - app.utils.permissions - INFO - 为角色 manager 添加权限: manage_project
2025-05-09 15:25:56,106 - app.utils.permissions - INFO - 为角色 manager 添加权限: manage_task
2025-05-09 15:25:56,106 - app.utils.permissions - INFO - 为角色 manager 添加权限: view_project
2025-05-09 15:25:56,106 - app.utils.permissions - INFO - 为角色 manager 添加权限: view_task
2025-05-09 15:25:56,108 - app.utils.permissions - INFO - 为角色 manager 添加权限: manage_resources
2025-05-09 15:25:56,108 - app.utils.permissions - INFO - 为角色 manager 添加权限: manage_risks
2025-05-09 15:25:56,109 - app.utils.permissions - INFO - 为角色 manager 添加权限: view_reports
2025-05-09 15:25:56,109 - app.utils.permissions - INFO - 为角色 manager 添加权限: create_project
2025-05-09 15:25:56,109 - app.utils.permissions - INFO - 为角色 manager 添加权限: create_task
2025-05-09 15:25:56,109 - app.utils.permissions - INFO - 为角色 manager 添加权限: assign_task
2025-05-09 15:25:56,110 - app.utils.permissions - INFO - 为角色 manager 添加权限: change_project_status
2025-05-09 15:25:56,111 - app.utils.permissions - INFO - 为角色 manager 添加权限: change_task_status
2025-05-09 15:25:56,111 - sqlalchemy.engine.Engine - INFO - SELECT roles.id AS roles_id, roles.name AS roles_name, roles.description AS roles_description, roles.created_at AS roles_created_at 
FROM roles 
WHERE roles.name = ?
 LIMIT ? OFFSET ?
2025-05-09 15:25:56,111 - sqlalchemy.engine.Engine - INFO - [cached since 0.01035s ago] ('user', 1, 0)
2025-05-09 15:25:56,112 - app.utils.permissions - INFO - 更新角色: user
2025-05-09 15:25:56,112 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions, role_permissions 
WHERE ? = role_permissions.role_id AND permissions.id = role_permissions.permission_id
2025-05-09 15:25:56,113 - sqlalchemy.engine.Engine - INFO - [cached since 0.009849s ago] (5,)
2025-05-09 15:25:56,113 - app.utils.permissions - INFO - 为角色 user 添加权限: view_project
2025-05-09 15:25:56,113 - app.utils.permissions - INFO - 为角色 user 添加权限: view_task
2025-05-09 15:25:56,114 - app.utils.permissions - INFO - 为角色 user 添加权限: view_reports
2025-05-09 15:25:56,114 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-05-09 15:25:56,115 - app.utils.permissions - INFO - 角色和权限初始化完成
2025-05-09 15:25:56,115 - __main__ - INFO - 角色和权限初始化成功
2025-05-09 15:25:56,116 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-05-09 15:25:56,117 - sqlalchemy.engine.Engine - INFO - SELECT users.id AS users_id, users.username AS users_username, users.email AS users_email, users.name AS users_name, users.password_hash AS users_password_hash, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.last_login AS users_last_login 
FROM users 
WHERE users.username = ?
 LIMIT ? OFFSET ?
2025-05-09 15:25:56,117 - sqlalchemy.engine.Engine - INFO - [generated in 0.00026s] ('system', 1, 0)
2025-05-09 15:25:56,119 - sqlalchemy.engine.Engine - INFO - SELECT projects.id AS projects_id, projects.name AS projects_name, projects.description AS projects_description, projects.status AS projects_status, projects.start_date AS projects_start_date, projects.end_date AS projects_end_date, projects.progress AS projects_progress, projects.created_at AS projects_created_at, projects.updated_at AS projects_updated_at, projects.manager_id AS projects_manager_id, projects.owner_id AS projects_owner_id 
FROM projects 
WHERE projects.name = ?
 LIMIT ? OFFSET ?
2025-05-09 15:25:56,119 - sqlalchemy.engine.Engine - INFO - [generated in 0.00038s] ('Test Project', 1, 0)
2025-05-09 15:25:56,120 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-05-09 15:25:56,120 - __main__ - INFO - 数据库初始化完成
2025-05-09 15:25:56,120 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-05-09 15:25:56,122 - sqlalchemy.engine.Engine - INFO - SELECT users.id AS users_id, users.username AS users_username, users.email AS users_email, users.name AS users_name, users.password_hash AS users_password_hash, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.last_login AS users_last_login 
FROM users 
WHERE users.username = ?
 LIMIT ? OFFSET ?
2025-05-09 15:25:56,122 - sqlalchemy.engine.Engine - INFO - [cached since 0.00489s ago] ('system', 1, 0)
2025-05-09 15:25:56,135 - sqlalchemy.engine.Engine - INFO - INSERT INTO resource_usages (user_id, cpu_usage, memory_usage, disk_usage, network_usage, recorded_at) VALUES (?, ?, ?, ?, ?, ?)
2025-05-09 15:25:56,135 - sqlalchemy.engine.Engine - INFO - [generated in 0.00061s] (2, 11.2, 52.5, 10.9, 0.0, '2025-05-09 07:25:56.133088')
2025-05-09 15:25:56,139 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-05-09 15:25:56,144 - __main__ - INFO - 系统资源检查完成
2025-05-09 15:25:56,145 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-05-09 15:25:56,146 - sqlalchemy.engine.Engine - INFO - DELETE FROM resource_usages WHERE resource_usages.recorded_at < ?
2025-05-09 15:25:56,146 - sqlalchemy.engine.Engine - INFO - [generated in 0.00044s] ('2025-04-09 07:25:56.144373',)
2025-05-09 15:25:56,147 - sqlalchemy.engine.Engine - INFO - DELETE FROM system_alerts WHERE system_alerts.is_resolved = 1 AND system_alerts.created_at < ?
2025-05-09 15:25:56,148 - sqlalchemy.engine.Engine - INFO - [generated in 0.00034s] ('2025-05-02 07:25:56.147478',)
2025-05-09 15:25:56,148 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-05-09 15:25:56,148 - __main__ - INFO - 旧数据清理完成
2025-05-09 15:25:56,153 - werkzeug - WARNING -  * Debugger is active!
2025-05-09 15:25:56,155 - werkzeug - INFO -  * Debugger PIN: 670-037-726
2025-05-09 15:26:16,368 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-05-09 15:26:16,368 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions 
WHERE permissions.name = ?
 LIMIT ? OFFSET ?
2025-05-09 15:26:16,369 - sqlalchemy.engine.Engine - INFO - [cached since 20.29s ago] ('manage_users', 1, 0)
2025-05-09 15:26:16,369 - app.utils.permissions - INFO - 更新权限: manage_users
2025-05-09 15:26:16,370 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions 
WHERE permissions.name = ?
 LIMIT ? OFFSET ?
2025-05-09 15:26:16,370 - sqlalchemy.engine.Engine - INFO - [cached since 20.29s ago] ('manage_roles', 1, 0)
2025-05-09 15:26:16,371 - app.utils.permissions - INFO - 更新权限: manage_roles
2025-05-09 15:26:16,372 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions 
WHERE permissions.name = ?
 LIMIT ? OFFSET ?
2025-05-09 15:26:16,372 - sqlalchemy.engine.Engine - INFO - [cached since 20.29s ago] ('manage_all_projects', 1, 0)
2025-05-09 15:26:16,373 - app.utils.permissions - INFO - 更新权限: manage_all_projects
2025-05-09 15:26:16,374 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions 
WHERE permissions.name = ?
 LIMIT ? OFFSET ?
2025-05-09 15:26:16,374 - sqlalchemy.engine.Engine - INFO - [cached since 20.29s ago] ('manage_project', 1, 0)
2025-05-09 15:26:16,375 - app.utils.permissions - INFO - 更新权限: manage_project
2025-05-09 15:26:16,375 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions 
WHERE permissions.name = ?
 LIMIT ? OFFSET ?
2025-05-09 15:26:16,376 - sqlalchemy.engine.Engine - INFO - [cached since 20.29s ago] ('manage_all_tasks', 1, 0)
2025-05-09 15:26:16,376 - app.utils.permissions - INFO - 更新权限: manage_all_tasks
2025-05-09 15:26:16,378 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions 
WHERE permissions.name = ?
 LIMIT ? OFFSET ?
2025-05-09 15:26:16,379 - sqlalchemy.engine.Engine - INFO - [cached since 20.3s ago] ('manage_task', 1, 0)
2025-05-09 15:26:16,381 - app.utils.permissions - INFO - 更新权限: manage_task
2025-05-09 15:26:16,383 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions 
WHERE permissions.name = ?
 LIMIT ? OFFSET ?
2025-05-09 15:26:16,383 - sqlalchemy.engine.Engine - INFO - [cached since 20.3s ago] ('view_project', 1, 0)
2025-05-09 15:26:16,384 - app.utils.permissions - INFO - 更新权限: view_project
2025-05-09 15:26:16,384 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions 
WHERE permissions.name = ?
 LIMIT ? OFFSET ?
2025-05-09 15:26:16,386 - sqlalchemy.engine.Engine - INFO - [cached since 20.3s ago] ('view_task', 1, 0)
2025-05-09 15:26:16,387 - app.utils.permissions - INFO - 更新权限: view_task
2025-05-09 15:26:16,388 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions 
WHERE permissions.name = ?
 LIMIT ? OFFSET ?
2025-05-09 15:26:16,388 - sqlalchemy.engine.Engine - INFO - [cached since 20.3s ago] ('manage_resources', 1, 0)
2025-05-09 15:26:16,389 - app.utils.permissions - INFO - 更新权限: manage_resources
2025-05-09 15:26:16,391 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions 
WHERE permissions.name = ?
 LIMIT ? OFFSET ?
2025-05-09 15:26:16,391 - sqlalchemy.engine.Engine - INFO - [cached since 20.31s ago] ('manage_risks', 1, 0)
2025-05-09 15:26:16,392 - app.utils.permissions - INFO - 更新权限: manage_risks
2025-05-09 15:26:16,394 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions 
WHERE permissions.name = ?
 LIMIT ? OFFSET ?
2025-05-09 15:26:16,395 - sqlalchemy.engine.Engine - INFO - [cached since 20.31s ago] ('view_reports', 1, 0)
2025-05-09 15:26:16,396 - app.utils.permissions - INFO - 更新权限: view_reports
2025-05-09 15:26:16,398 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions 
WHERE permissions.name = ?
 LIMIT ? OFFSET ?
2025-05-09 15:26:16,399 - sqlalchemy.engine.Engine - INFO - [cached since 20.32s ago] ('create_task', 1, 0)
2025-05-09 15:26:16,400 - app.utils.permissions - INFO - 更新权限: create_task
2025-05-09 15:26:16,401 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions 
WHERE permissions.name = ?
 LIMIT ? OFFSET ?
2025-05-09 15:26:16,402 - sqlalchemy.engine.Engine - INFO - [cached since 20.32s ago] ('create_project', 1, 0)
2025-05-09 15:26:16,402 - app.utils.permissions - INFO - 更新权限: create_project
2025-05-09 15:26:16,403 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions 
WHERE permissions.name = ?
 LIMIT ? OFFSET ?
2025-05-09 15:26:16,404 - sqlalchemy.engine.Engine - INFO - [cached since 20.32s ago] ('assign_task', 1, 0)
2025-05-09 15:26:16,405 - app.utils.permissions - INFO - 更新权限: assign_task
2025-05-09 15:26:16,408 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions 
WHERE permissions.name = ?
 LIMIT ? OFFSET ?
2025-05-09 15:26:16,409 - sqlalchemy.engine.Engine - INFO - [cached since 20.33s ago] ('change_project_status', 1, 0)
2025-05-09 15:26:16,410 - app.utils.permissions - INFO - 更新权限: change_project_status
2025-05-09 15:26:16,412 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions 
WHERE permissions.name = ?
 LIMIT ? OFFSET ?
2025-05-09 15:26:16,413 - sqlalchemy.engine.Engine - INFO - [cached since 20.33s ago] ('change_task_status', 1, 0)
2025-05-09 15:26:16,414 - app.utils.permissions - INFO - 更新权限: change_task_status
2025-05-09 15:26:16,415 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-05-09 15:26:16,416 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-05-09 15:26:16,417 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions
2025-05-09 15:26:16,418 - sqlalchemy.engine.Engine - INFO - [cached since 20.32s ago] ()
2025-05-09 15:26:16,421 - sqlalchemy.engine.Engine - INFO - SELECT roles.id AS roles_id, roles.name AS roles_name, roles.description AS roles_description, roles.created_at AS roles_created_at 
FROM roles 
WHERE roles.name = ?
 LIMIT ? OFFSET ?
2025-05-09 15:26:16,422 - sqlalchemy.engine.Engine - INFO - [cached since 20.32s ago] ('admin', 1, 0)
2025-05-09 15:26:16,424 - app.utils.permissions - INFO - 更新角色: admin
2025-05-09 15:26:16,426 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions, role_permissions 
WHERE ? = role_permissions.role_id AND permissions.id = role_permissions.permission_id
2025-05-09 15:26:16,427 - sqlalchemy.engine.Engine - INFO - [cached since 20.32s ago] (1,)
2025-05-09 15:26:16,428 - app.utils.permissions - INFO - 为管理员角色添加所有权限: 16个
2025-05-09 15:26:16,431 - sqlalchemy.engine.Engine - INFO - SELECT roles.id AS roles_id, roles.name AS roles_name, roles.description AS roles_description, roles.created_at AS roles_created_at 
FROM roles 
WHERE roles.name = ?
 LIMIT ? OFFSET ?
2025-05-09 15:26:16,432 - sqlalchemy.engine.Engine - INFO - [cached since 20.33s ago] ('manager', 1, 0)
2025-05-09 15:26:16,433 - app.utils.permissions - INFO - 更新角色: manager
2025-05-09 15:26:16,437 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions, role_permissions 
WHERE ? = role_permissions.role_id AND permissions.id = role_permissions.permission_id
2025-05-09 15:26:16,438 - sqlalchemy.engine.Engine - INFO - [cached since 20.34s ago] (2,)
2025-05-09 15:26:16,439 - app.utils.permissions - INFO - 为角色 manager 添加权限: manage_project
2025-05-09 15:26:16,440 - app.utils.permissions - INFO - 为角色 manager 添加权限: manage_task
2025-05-09 15:26:16,443 - app.utils.permissions - INFO - 为角色 manager 添加权限: view_project
2025-05-09 15:26:16,446 - app.utils.permissions - INFO - 为角色 manager 添加权限: view_task
2025-05-09 15:26:16,447 - app.utils.permissions - INFO - 为角色 manager 添加权限: manage_resources
2025-05-09 15:26:16,449 - app.utils.permissions - INFO - 为角色 manager 添加权限: manage_risks
2025-05-09 15:26:16,451 - app.utils.permissions - INFO - 为角色 manager 添加权限: view_reports
2025-05-09 15:26:16,452 - app.utils.permissions - INFO - 为角色 manager 添加权限: create_project
2025-05-09 15:26:16,454 - app.utils.permissions - INFO - 为角色 manager 添加权限: create_task
2025-05-09 15:26:16,455 - app.utils.permissions - INFO - 为角色 manager 添加权限: assign_task
2025-05-09 15:26:16,456 - app.utils.permissions - INFO - 为角色 manager 添加权限: change_project_status
2025-05-09 15:26:16,457 - app.utils.permissions - INFO - 为角色 manager 添加权限: change_task_status
2025-05-09 15:26:16,459 - sqlalchemy.engine.Engine - INFO - SELECT roles.id AS roles_id, roles.name AS roles_name, roles.description AS roles_description, roles.created_at AS roles_created_at 
FROM roles 
WHERE roles.name = ?
 LIMIT ? OFFSET ?
2025-05-09 15:26:16,459 - sqlalchemy.engine.Engine - INFO - [cached since 20.36s ago] ('user', 1, 0)
2025-05-09 15:26:16,460 - app.utils.permissions - INFO - 更新角色: user
2025-05-09 15:26:16,462 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions, role_permissions 
WHERE ? = role_permissions.role_id AND permissions.id = role_permissions.permission_id
2025-05-09 15:26:16,462 - sqlalchemy.engine.Engine - INFO - [cached since 20.36s ago] (5,)
2025-05-09 15:26:16,463 - app.utils.permissions - INFO - 为角色 user 添加权限: view_project
2025-05-09 15:26:16,465 - app.utils.permissions - INFO - 为角色 user 添加权限: view_task
2025-05-09 15:26:16,466 - app.utils.permissions - INFO - 为角色 user 添加权限: view_reports
2025-05-09 15:26:16,467 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-05-09 15:26:16,468 - app.utils.permissions - INFO - 角色和权限初始化完成
2025-05-09 15:26:16,470 - app - INFO - 角色和权限初始化成功
2025-05-09 15:26:16,470 - app - INFO - 应用初始化完成
2025-05-09 15:26:16,518 - werkzeug - INFO - 127.0.0.1 - - [09/May/2025 15:26:16] "GET /login HTTP/1.1" 200 -
2025-05-09 15:26:16,546 - app.utils.jwt_callbacks - INFO - Checking if token c484fa88-2af6-451e-8922-930382a7a2e4 is in blocklist
2025-05-09 15:26:16,553 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-05-09 15:26:16,557 - sqlalchemy.engine.Engine - INFO - SELECT token_blacklist.id AS token_blacklist_id, token_blacklist.jti AS token_blacklist_jti, token_blacklist.token_type AS token_blacklist_token_type, token_blacklist.user_id AS token_blacklist_user_id, token_blacklist.revoked_at AS token_blacklist_revoked_at, token_blacklist.expires_at AS token_blacklist_expires_at 
FROM token_blacklist 
WHERE token_blacklist.jti = ?
 LIMIT ? OFFSET ?
2025-05-09 15:26:16,561 - sqlalchemy.engine.Engine - INFO - [generated in 0.00478s] ('c484fa88-2af6-451e-8922-930382a7a2e4', 1, 0)
2025-05-09 15:26:16,563 - app.utils.jwt_callbacks - INFO - Token c484fa88-2af6-451e-8922-930382a7a2e4 is valid
2025-05-09 15:26:16,564 - app.utils.jwt_callbacks - INFO - Verifying token
2025-05-09 15:26:16,567 - app.utils.jwt_callbacks - INFO - JWT Header: {'alg': 'HS256', 'typ': 'JWT'}
2025-05-09 15:26:16,568 - app.utils.jwt_callbacks - INFO - JWT Data: {'fresh': False, 'iat': 1746775197, 'jti': 'c484fa88-2af6-451e-8922-930382a7a2e4', 'type': 'access', 'sub': 1, 'nbf': 1746775197, 'csrf': 'IjY2NjEzOWExZTRmODhkZmYzMDRlMjQ2OTcyOTI1ODM4YjQzMWVlZDki.aB2snQ.2PWF4e1aW1oGssP0x9lzJyuG-Qw', 'exp': 1746778797, 'aud': 'task_management_system', 'user_claims': {'username': 'admin', 'roles': ['admin'], 'permissions': ['manage_users', 'manage_roles', 'manage_all_projects', 'manage_project', 'manage_all_tasks', 'manage_task', 'view_project', 'view_task', 'manage_resources', 'manage_risks', 'view_reports', 'create_task', 'assign_task', 'change_project_status', 'change_task_status', 'create_project'], 'is_active': True}, 'roles': ['admin']}
2025-05-09 15:26:16,568 - app.utils.jwt_callbacks - INFO - Token time difference: -379.568079 seconds
2025-05-09 15:26:16,570 - app.utils.jwt_callbacks - INFO - Token verification successful
2025-05-09 15:26:16,571 - app.utils.jwt_callbacks - INFO - Looking up user with identity: 1
2025-05-09 15:26:16,575 - sqlalchemy.engine.Engine - INFO - SELECT users.id AS users_id, users.username AS users_username, users.email AS users_email, users.name AS users_name, users.password_hash AS users_password_hash, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.last_login AS users_last_login 
FROM users 
WHERE users.id = ?
2025-05-09 15:26:16,575 - sqlalchemy.engine.Engine - INFO - [generated in 0.00086s] (1,)
2025-05-09 15:26:16,577 - app.utils.jwt_callbacks - INFO - User found: admin
2025-05-09 15:26:16,580 - sqlalchemy.engine.Engine - INFO - SELECT roles.id AS roles_id, roles.name AS roles_name, roles.description AS roles_description, roles.created_at AS roles_created_at 
FROM roles, user_roles 
WHERE ? = user_roles.user_id AND roles.id = user_roles.role_id
2025-05-09 15:26:16,581 - sqlalchemy.engine.Engine - INFO - [generated in 0.00091s] (1,)
2025-05-09 15:26:16,582 - app.utils.jwt_callbacks - INFO - User roles: ['admin']
2025-05-09 15:26:16,583 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions, role_permissions 
WHERE ? = role_permissions.role_id AND permissions.id = role_permissions.permission_id
2025-05-09 15:26:16,583 - sqlalchemy.engine.Engine - INFO - [cached since 20.48s ago] (1,)
2025-05-09 15:26:16,584 - app.utils.jwt_callbacks - INFO - User permissions: ['manage_users', 'manage_roles', 'manage_all_projects', 'manage_project', 'manage_all_tasks', 'manage_task', 'view_project', 'view_task', 'manage_resources', 'manage_risks', 'view_reports', 'create_task', 'assign_task', 'change_project_status', 'change_task_status', 'create_project']
2025-05-09 15:26:16,585 - app.utils.jwt_callbacks - INFO - Checking if token c484fa88-2af6-451e-8922-930382a7a2e4 is in blocklist
2025-05-09 15:26:16,587 - sqlalchemy.engine.Engine - INFO - SELECT token_blacklist.id AS token_blacklist_id, token_blacklist.jti AS token_blacklist_jti, token_blacklist.token_type AS token_blacklist_token_type, token_blacklist.user_id AS token_blacklist_user_id, token_blacklist.revoked_at AS token_blacklist_revoked_at, token_blacklist.expires_at AS token_blacklist_expires_at 
FROM token_blacklist 
WHERE token_blacklist.jti = ?
 LIMIT ? OFFSET ?
2025-05-09 15:26:16,589 - sqlalchemy.engine.Engine - INFO - [cached since 0.03138s ago] ('c484fa88-2af6-451e-8922-930382a7a2e4', 1, 0)
2025-05-09 15:26:16,590 - app.utils.jwt_callbacks - INFO - Token c484fa88-2af6-451e-8922-930382a7a2e4 is valid
2025-05-09 15:26:16,591 - app.utils.jwt_callbacks - INFO - Verifying token
2025-05-09 15:26:16,593 - app.utils.jwt_callbacks - INFO - JWT Header: {'alg': 'HS256', 'typ': 'JWT'}
2025-05-09 15:26:16,594 - app.utils.jwt_callbacks - INFO - JWT Data: {'fresh': False, 'iat': 1746775197, 'jti': 'c484fa88-2af6-451e-8922-930382a7a2e4', 'type': 'access', 'sub': 1, 'nbf': 1746775197, 'csrf': 'IjY2NjEzOWExZTRmODhkZmYzMDRlMjQ2OTcyOTI1ODM4YjQzMWVlZDki.aB2snQ.2PWF4e1aW1oGssP0x9lzJyuG-Qw', 'exp': 1746778797, 'aud': 'task_management_system', 'user_claims': {'username': 'admin', 'roles': ['admin'], 'permissions': ['manage_users', 'manage_roles', 'manage_all_projects', 'manage_project', 'manage_all_tasks', 'manage_task', 'view_project', 'view_task', 'manage_resources', 'manage_risks', 'view_reports', 'create_task', 'assign_task', 'change_project_status', 'change_task_status', 'create_project'], 'is_active': True}, 'roles': ['admin']}
2025-05-09 15:26:16,596 - app.utils.jwt_callbacks - INFO - Token time difference: -379.596336 seconds
2025-05-09 15:26:16,597 - app.utils.jwt_callbacks - INFO - Token verification successful
2025-05-09 15:26:16,598 - app.utils.jwt_callbacks - INFO - Looking up user with identity: 1
2025-05-09 15:26:16,599 - app.utils.jwt_callbacks - INFO - User found: admin
2025-05-09 15:26:16,599 - app.utils.jwt_callbacks - INFO - User roles: ['admin']
2025-05-09 15:26:16,600 - app.utils.jwt_callbacks - INFO - User permissions: ['manage_users', 'manage_roles', 'manage_all_projects', 'manage_project', 'manage_all_tasks', 'manage_task', 'view_project', 'view_task', 'manage_resources', 'manage_risks', 'view_reports', 'create_task', 'assign_task', 'change_project_status', 'change_task_status', 'create_project']
2025-05-09 15:26:16,601 - app - INFO - 用户已认证，重定向到仪表板页面: /.well-known/appspecific/com.chrome.devtools.json
2025-05-09 15:26:16,603 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-05-09 15:26:16,604 - werkzeug - INFO - 127.0.0.1 - - [09/May/2025 15:26:16] "[32mGET /.well-known/appspecific/com.chrome.devtools.json HTTP/1.1[0m" 302 -
2025-05-09 15:26:16,763 - werkzeug - INFO - 127.0.0.1 - - [09/May/2025 15:26:16] "[36mGET /static/js/jquery.min.js HTTP/1.1[0m" 304 -
2025-05-09 15:26:16,764 - werkzeug - INFO - 127.0.0.1 - - [09/May/2025 15:26:16] "[36mGET /static/css/bootstrap.min.css HTTP/1.1[0m" 304 -
2025-05-09 15:26:16,771 - werkzeug - INFO - 127.0.0.1 - - [09/May/2025 15:26:16] "[36mGET /static/css/bootstrap-icons.css HTTP/1.1[0m" 304 -
2025-05-09 15:26:16,772 - werkzeug - INFO - 127.0.0.1 - - [09/May/2025 15:26:16] "[36mGET /static/js/bootstrap.bundle.min.js HTTP/1.1[0m" 304 -
2025-05-09 15:26:16,773 - werkzeug - INFO - 127.0.0.1 - - [09/May/2025 15:26:16] "[36mGET /static/css/style.css HTTP/1.1[0m" 304 -
2025-05-09 15:26:16,771 - app.utils.jwt_callbacks - INFO - Checking if token c484fa88-2af6-451e-8922-930382a7a2e4 is in blocklist
2025-05-09 15:26:16,776 - werkzeug - INFO - 127.0.0.1 - - [09/May/2025 15:26:16] "[36mGET /static/js/auth.js HTTP/1.1[0m" 304 -
2025-05-09 15:26:16,780 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-05-09 15:26:16,784 - sqlalchemy.engine.Engine - INFO - SELECT token_blacklist.id AS token_blacklist_id, token_blacklist.jti AS token_blacklist_jti, token_blacklist.token_type AS token_blacklist_token_type, token_blacklist.user_id AS token_blacklist_user_id, token_blacklist.revoked_at AS token_blacklist_revoked_at, token_blacklist.expires_at AS token_blacklist_expires_at 
FROM token_blacklist 
WHERE token_blacklist.jti = ?
 LIMIT ? OFFSET ?
2025-05-09 15:26:16,784 - werkzeug - INFO - 127.0.0.1 - - [09/May/2025 15:26:16] "[36mGET /static/images/background.png HTTP/1.1[0m" 304 -
2025-05-09 15:26:16,785 - sqlalchemy.engine.Engine - INFO - [cached since 0.228s ago] ('c484fa88-2af6-451e-8922-930382a7a2e4', 1, 0)
2025-05-09 15:26:16,787 - app.utils.jwt_callbacks - INFO - Token c484fa88-2af6-451e-8922-930382a7a2e4 is valid
2025-05-09 15:26:16,790 - app.utils.jwt_callbacks - INFO - Verifying token
2025-05-09 15:26:16,793 - werkzeug - INFO - 127.0.0.1 - - [09/May/2025 15:26:16] "[36mGET /static/js/fix-modals.js HTTP/1.1[0m" 304 -
2025-05-09 15:26:16,797 - werkzeug - INFO - 127.0.0.1 - - [09/May/2025 15:26:16] "[36mGET /static/js/background-helper.js HTTP/1.1[0m" 304 -
2025-05-09 15:26:16,798 - werkzeug - INFO - 127.0.0.1 - - [09/May/2025 15:26:16] "[36mGET /static/js/csrf.js HTTP/1.1[0m" 304 -
2025-05-09 15:26:16,796 - app.utils.jwt_callbacks - INFO - JWT Header: {'alg': 'HS256', 'typ': 'JWT'}
2025-05-09 15:26:16,803 - werkzeug - INFO - 127.0.0.1 - - [09/May/2025 15:26:16] "[33mGET /static/uploads/background.png HTTP/1.1[0m" 404 -
2025-05-09 15:26:16,806 - werkzeug - INFO - 127.0.0.1 - - [09/May/2025 15:26:16] "[36mGET /static/css/bootstrap.min.css.map HTTP/1.1[0m" 304 -
2025-05-09 15:26:16,806 - app.utils.jwt_callbacks - INFO - JWT Data: {'fresh': False, 'iat': 1746775197, 'jti': 'c484fa88-2af6-451e-8922-930382a7a2e4', 'type': 'access', 'sub': 1, 'nbf': 1746775197, 'csrf': 'IjY2NjEzOWExZTRmODhkZmYzMDRlMjQ2OTcyOTI1ODM4YjQzMWVlZDki.aB2snQ.2PWF4e1aW1oGssP0x9lzJyuG-Qw', 'exp': 1746778797, 'aud': 'task_management_system', 'user_claims': {'username': 'admin', 'roles': ['admin'], 'permissions': ['manage_users', 'manage_roles', 'manage_all_projects', 'manage_project', 'manage_all_tasks', 'manage_task', 'view_project', 'view_task', 'manage_resources', 'manage_risks', 'view_reports', 'create_task', 'assign_task', 'change_project_status', 'change_task_status', 'create_project'], 'is_active': True}, 'roles': ['admin']}
2025-05-09 15:26:16,809 - app.utils.jwt_callbacks - INFO - Token time difference: -379.809037 seconds
2025-05-09 15:26:16,810 - app.utils.jwt_callbacks - INFO - Token verification successful
2025-05-09 15:26:16,813 - app.utils.jwt_callbacks - INFO - Looking up user with identity: 1
2025-05-09 15:26:16,815 - sqlalchemy.engine.Engine - INFO - SELECT users.id AS users_id, users.username AS users_username, users.email AS users_email, users.name AS users_name, users.password_hash AS users_password_hash, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.last_login AS users_last_login 
FROM users 
WHERE users.id = ?
2025-05-09 15:26:16,816 - sqlalchemy.engine.Engine - INFO - [cached since 0.2407s ago] (1,)
2025-05-09 15:26:16,817 - app.utils.jwt_callbacks - INFO - User found: admin
2025-05-09 15:26:16,818 - sqlalchemy.engine.Engine - INFO - SELECT roles.id AS roles_id, roles.name AS roles_name, roles.description AS roles_description, roles.created_at AS roles_created_at 
FROM roles, user_roles 
WHERE ? = user_roles.user_id AND roles.id = user_roles.role_id
2025-05-09 15:26:16,819 - sqlalchemy.engine.Engine - INFO - [cached since 0.2383s ago] (1,)
2025-05-09 15:26:16,820 - app.utils.jwt_callbacks - INFO - User roles: ['admin']
2025-05-09 15:26:16,821 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions, role_permissions 
WHERE ? = role_permissions.role_id AND permissions.id = role_permissions.permission_id
2025-05-09 15:26:16,821 - sqlalchemy.engine.Engine - INFO - [cached since 20.72s ago] (1,)
2025-05-09 15:26:16,823 - app.utils.jwt_callbacks - INFO - User permissions: ['manage_users', 'manage_roles', 'manage_all_projects', 'manage_project', 'manage_all_tasks', 'manage_task', 'view_project', 'view_task', 'manage_resources', 'manage_risks', 'view_reports', 'create_task', 'assign_task', 'change_project_status', 'change_task_status', 'create_project']
2025-05-09 15:26:16,827 - werkzeug - INFO - 127.0.0.1 - - [09/May/2025 15:26:16] "[33mGET /static/uploads/background.png HTTP/1.1[0m" 404 -
2025-05-09 15:26:16,827 - app.utils.jwt_callbacks - INFO - Checking if token c484fa88-2af6-451e-8922-930382a7a2e4 is in blocklist
2025-05-09 15:26:16,829 - sqlalchemy.engine.Engine - INFO - SELECT token_blacklist.id AS token_blacklist_id, token_blacklist.jti AS token_blacklist_jti, token_blacklist.token_type AS token_blacklist_token_type, token_blacklist.user_id AS token_blacklist_user_id, token_blacklist.revoked_at AS token_blacklist_revoked_at, token_blacklist.expires_at AS token_blacklist_expires_at 
FROM token_blacklist 
WHERE token_blacklist.jti = ?
 LIMIT ? OFFSET ?
2025-05-09 15:26:16,830 - sqlalchemy.engine.Engine - INFO - [cached since 0.2727s ago] ('c484fa88-2af6-451e-8922-930382a7a2e4', 1, 0)
2025-05-09 15:26:16,830 - app.utils.jwt_callbacks - INFO - Token c484fa88-2af6-451e-8922-930382a7a2e4 is valid
2025-05-09 15:26:16,831 - app.utils.jwt_callbacks - INFO - Verifying token
2025-05-09 15:26:16,832 - app.utils.jwt_callbacks - INFO - JWT Header: {'alg': 'HS256', 'typ': 'JWT'}
2025-05-09 15:26:16,833 - app.utils.jwt_callbacks - INFO - JWT Data: {'fresh': False, 'iat': 1746775197, 'jti': 'c484fa88-2af6-451e-8922-930382a7a2e4', 'type': 'access', 'sub': 1, 'nbf': 1746775197, 'csrf': 'IjY2NjEzOWExZTRmODhkZmYzMDRlMjQ2OTcyOTI1ODM4YjQzMWVlZDki.aB2snQ.2PWF4e1aW1oGssP0x9lzJyuG-Qw', 'exp': 1746778797, 'aud': 'task_management_system', 'user_claims': {'username': 'admin', 'roles': ['admin'], 'permissions': ['manage_users', 'manage_roles', 'manage_all_projects', 'manage_project', 'manage_all_tasks', 'manage_task', 'view_project', 'view_task', 'manage_resources', 'manage_risks', 'view_reports', 'create_task', 'assign_task', 'change_project_status', 'change_task_status', 'create_project'], 'is_active': True}, 'roles': ['admin']}
2025-05-09 15:26:16,834 - app.utils.jwt_callbacks - INFO - Token time difference: -379.834757 seconds
2025-05-09 15:26:16,835 - app.utils.jwt_callbacks - INFO - Token verification successful
2025-05-09 15:26:16,836 - app.utils.jwt_callbacks - INFO - Looking up user with identity: 1
2025-05-09 15:26:16,838 - app.utils.jwt_callbacks - INFO - User found: admin
2025-05-09 15:26:16,840 - app.utils.jwt_callbacks - INFO - User roles: ['admin']
2025-05-09 15:26:16,841 - app.utils.jwt_callbacks - INFO - User permissions: ['manage_users', 'manage_roles', 'manage_all_projects', 'manage_project', 'manage_all_tasks', 'manage_task', 'view_project', 'view_task', 'manage_resources', 'manage_risks', 'view_reports', 'create_task', 'assign_task', 'change_project_status', 'change_task_status', 'create_project']
2025-05-09 15:26:16,842 - app - INFO - Dashboard access with user ID: 1
2025-05-09 15:26:16,843 - app - INFO - Token found in: cookies
2025-05-09 15:26:16,844 - app - INFO - Dashboard context user_data: {'id': 1, 'username': 'admin', 'email': 'admin@example.com', 'name': '管理员', 'is_active': True, 'created_at': '2025-05-07T01:07:21.773527', 'last_login': '2025-05-09T07:19:57.486401', 'roles': ['admin'], 'permissions': ['manage_project', 'create_task', 'manage_all_tasks', 'manage_all_projects', 'manage_users', 'manage_task', 'view_task', 'manage_risks', 'view_project', 'view_reports', 'manage_roles', 'change_project_status', 'create_project', 'manage_resources', 'change_task_status', 'assign_task']}
2025-05-09 15:26:16,845 - app - INFO - 用户 admin 的角色: ['admin']
2025-05-09 15:26:16,845 - app - INFO - 用户 admin 的权限: ['manage_project', 'create_task', 'manage_all_tasks', 'manage_all_projects', 'manage_users', 'manage_task', 'view_task', 'manage_risks', 'view_project', 'view_reports', 'manage_roles', 'change_project_status', 'create_project', 'manage_resources', 'change_task_status', 'assign_task']
2025-05-09 15:26:16,846 - app - INFO - 用户 admin - 是否管理员: True, 是否项目经理: False
2025-05-09 15:26:16,859 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-05-09 15:26:16,862 - werkzeug - INFO - 127.0.0.1 - - [09/May/2025 15:26:16] "GET /main/dashboard HTTP/1.1" 200 -
2025-05-09 15:26:16,864 - werkzeug - INFO - 127.0.0.1 - - [09/May/2025 15:26:16] "[36mGET /static/favicon.ico HTTP/1.1[0m" 304 -
2025-05-09 15:26:17,824 - werkzeug - INFO - 127.0.0.1 - - [09/May/2025 15:26:17] "[33mGET /static/uploads/background.png HTTP/1.1[0m" 404 -
2025-05-09 15:26:18,228 - app - INFO - 登录请求 - 方法: POST, 内容类型: application/x-www-form-urlencoded
2025-05-09 15:26:18,231 - app - INFO - 请求头: {'Host': '127.0.0.1:5000', 'Connection': 'keep-alive', 'Content-Length': '135', 'Cache-Control': 'max-age=0', 'Sec-Ch-Ua': '"Chromium";v="136", "Microsoft Edge";v="136", "Not.A/Brand";v="99"', 'Sec-Ch-Ua-Mobile': '?0', 'Sec-Ch-Ua-Platform': '"Windows"', 'Origin': 'http://127.0.0.1:5000', 'Content-Type': 'application/x-www-form-urlencoded', 'Upgrade-Insecure-Requests': '1', 'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36 Edg/136.0.0.0', 'Accept': 'text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.7', 'Sec-Fetch-Site': 'same-origin', 'Sec-Fetch-Mode': 'navigate', 'Sec-Fetch-User': '?1', 'Sec-Fetch-Dest': 'document', 'Referer': 'http://127.0.0.1:5000/login', 'Accept-Encoding': 'gzip, deflate, br, zstd', 'Accept-Language': 'zh-CN,zh;q=0.9,en;q=0.8,en-GB;q=0.7,en-US;q=0.6', 'Cookie': 'user_roles=admin; access_token_cookie=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJmcmVzaCI6ZmFsc2UsImlhdCI6MTc0Njc3NTE5NywianRpIjoiYzQ4NGZhODgtMmFmNi00NTFlLTg5MjItOTMwMzgyYTdhMmU0IiwidHlwZSI6ImFjY2VzcyIsInN1YiI6MSwibmJmIjoxNzQ2Nzc1MTk3LCJjc3JmIjoiSWpZMk5qRXpPV0V4WlRSbU9EaGtabVl6TURSbE1qUTJPVGN5T1RJMU9ETTRZalF6TVdWbFpEa2kuYUIyc25RLjJQV0Y0ZTFhVzFvR3NzUDB4OWx6Snl1Ry1RdyIsImV4cCI6MTc0Njc3ODc5NywiYXVkIjoidGFza19tYW5hZ2VtZW50X3N5c3RlbSIsInVzZXJfY2xhaW1zIjp7InVzZXJuYW1lIjoiYWRtaW4iLCJyb2xlcyI6WyJhZG1pbiJdLCJwZXJtaXNzaW9ucyI6WyJtYW5hZ2VfdXNlcnMiLCJtYW5hZ2Vfcm9sZXMiLCJtYW5hZ2VfYWxsX3Byb2plY3RzIiwibWFuYWdlX3Byb2plY3QiLCJtYW5hZ2VfYWxsX3Rhc2tzIiwibWFuYWdlX3Rhc2siLCJ2aWV3X3Byb2plY3QiLCJ2aWV3X3Rhc2siLCJtYW5hZ2VfcmVzb3VyY2VzIiwibWFuYWdlX3Jpc2tzIiwidmlld19yZXBvcnRzIiwiY3JlYXRlX3Rhc2siLCJhc3NpZ25fdGFzayIsImNoYW5nZV9wcm9qZWN0X3N0YXR1cyIsImNoYW5nZV90YXNrX3N0YXR1cyIsImNyZWF0ZV9wcm9qZWN0Il0sImlzX2FjdGl2ZSI6dHJ1ZX0sInJvbGVzIjpbImFkbWluIl19.hXsB_VC6ZUXzr953KOXhhu5YNPsibXbT2-B9F8Fe0E4; csrf_access_token=IjY2NjEzOWExZTRmODhkZmYzMDRlMjQ2OTcyOTI1ODM4YjQzMWVlZDki.aB2snQ.2PWF4e1aW1oGssP0x9lzJyuG-Qw; csrf_token=IjY2NjEzOWExZTRmODhkZmYzMDRlMjQ2OTcyOTI1ODM4YjQzMWVlZDki.aB2snQ.2PWF4e1aW1oGssP0x9lzJyuG-Qw; session=eyJjc3JmX3Rva2VuIjoiNjY2MTM5YTFlNGY4OGRmZjMwNGUyNDY5NzI5MjU4MzhiNDMxZWVkOSJ9.aB2uGQ._CSQwStYVEPtqW0RWCYQ42Ag_ng'}
2025-05-09 15:26:18,233 - app - INFO - 处理表单格式的登录请求
2025-05-09 15:26:18,233 - app - INFO - 表单数据: username=admin, password=********
2025-05-09 15:26:18,235 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-05-09 15:26:18,236 - sqlalchemy.engine.Engine - INFO - SELECT users.id AS users_id, users.username AS users_username, users.email AS users_email, users.name AS users_name, users.password_hash AS users_password_hash, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.last_login AS users_last_login 
FROM users 
WHERE users.username = ?
 LIMIT ? OFFSET ?
2025-05-09 15:26:18,237 - sqlalchemy.engine.Engine - INFO - [cached since 22.12s ago] ('admin', 1, 0)
2025-05-09 15:26:18,748 - app - INFO - 已生成CSRF令牌: IjY2NjEzOW...
2025-05-09 15:26:18,751 - sqlalchemy.engine.Engine - INFO - SELECT roles.id AS roles_id, roles.name AS roles_name, roles.description AS roles_description, roles.created_at AS roles_created_at 
FROM roles, user_roles 
WHERE ? = user_roles.user_id AND roles.id = user_roles.role_id
2025-05-09 15:26:18,752 - sqlalchemy.engine.Engine - INFO - [cached since 2.171s ago] (1,)
2025-05-09 15:26:18,753 - app - INFO - 用户 admin 的角色: ['admin']
2025-05-09 15:26:18,757 - app.utils.jwt_callbacks - INFO - Adding additional claims for user 1
2025-05-09 15:26:18,764 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions, role_permissions 
WHERE ? = role_permissions.role_id AND permissions.id = role_permissions.permission_id
2025-05-09 15:26:18,765 - sqlalchemy.engine.Engine - INFO - [cached since 22.66s ago] (1,)
2025-05-09 15:26:18,766 - app.utils.jwt_callbacks - INFO - Added claims for user 1: {'aud': 'task_management_system', 'user_claims': {'username': 'admin', 'roles': ['admin'], 'permissions': ['manage_users', 'manage_roles', 'manage_all_projects', 'manage_project', 'manage_all_tasks', 'manage_task', 'view_project', 'view_task', 'manage_resources', 'manage_risks', 'view_reports', 'create_task', 'assign_task', 'change_project_status', 'change_task_status', 'create_project'], 'is_active': True}}
2025-05-09 15:26:18,773 - app.utils.jwt_callbacks - INFO - Adding additional claims for user 1
2025-05-09 15:26:18,777 - app.utils.jwt_callbacks - INFO - Added claims for user 1: {'aud': 'task_management_system', 'user_claims': {'username': 'admin', 'roles': ['admin'], 'permissions': ['manage_users', 'manage_roles', 'manage_all_projects', 'manage_project', 'manage_all_tasks', 'manage_task', 'view_project', 'view_task', 'manage_resources', 'manage_risks', 'view_reports', 'create_task', 'assign_task', 'change_project_status', 'change_task_status', 'create_project'], 'is_active': True}}
2025-05-09 15:26:18,789 - sqlalchemy.engine.Engine - INFO - UPDATE users SET updated_at=?, last_login=? WHERE users.id = ?
2025-05-09 15:26:18,790 - sqlalchemy.engine.Engine - INFO - [generated in 0.00160s] ('2025-05-09 07:26:18.789669', '2025-05-09 07:26:18.783070', 1)
2025-05-09 15:26:18,801 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-05-09 15:26:18,807 - app - INFO - 用户登录成功: admin
2025-05-09 15:26:18,809 - werkzeug - INFO - 127.0.0.1 - - [09/May/2025 15:26:18] "[32mPOST /login HTTP/1.1[0m" 302 -
2025-05-09 15:26:18,824 - app.utils.jwt_callbacks - INFO - Checking if token 051ad551-75b6-4246-8deb-a3228d35e4e4 is in blocklist
2025-05-09 15:26:18,826 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-05-09 15:26:18,827 - sqlalchemy.engine.Engine - INFO - SELECT token_blacklist.id AS token_blacklist_id, token_blacklist.jti AS token_blacklist_jti, token_blacklist.token_type AS token_blacklist_token_type, token_blacklist.user_id AS token_blacklist_user_id, token_blacklist.revoked_at AS token_blacklist_revoked_at, token_blacklist.expires_at AS token_blacklist_expires_at 
FROM token_blacklist 
WHERE token_blacklist.jti = ?
 LIMIT ? OFFSET ?
2025-05-09 15:26:18,828 - sqlalchemy.engine.Engine - INFO - [cached since 2.271s ago] ('051ad551-75b6-4246-8deb-a3228d35e4e4', 1, 0)
2025-05-09 15:26:18,828 - app.utils.jwt_callbacks - INFO - Token 051ad551-75b6-4246-8deb-a3228d35e4e4 is valid
2025-05-09 15:26:18,829 - app.utils.jwt_callbacks - INFO - Verifying token
2025-05-09 15:26:18,830 - app.utils.jwt_callbacks - INFO - JWT Header: {'alg': 'HS256', 'typ': 'JWT'}
2025-05-09 15:26:18,831 - app.utils.jwt_callbacks - INFO - JWT Data: {'fresh': False, 'iat': 1746775578, 'jti': '051ad551-75b6-4246-8deb-a3228d35e4e4', 'type': 'access', 'sub': 1, 'nbf': 1746775578, 'csrf': 'IjY2NjEzOWExZTRmODhkZmYzMDRlMjQ2OTcyOTI1ODM4YjQzMWVlZDki.aB2uGg.jgVFJQK5Nco9wCP7hwxW73ebrE0', 'exp': 1746779178, 'aud': 'task_management_system', 'user_claims': {'username': 'admin', 'roles': ['admin'], 'permissions': ['manage_users', 'manage_roles', 'manage_all_projects', 'manage_project', 'manage_all_tasks', 'manage_task', 'view_project', 'view_task', 'manage_resources', 'manage_risks', 'view_reports', 'create_task', 'assign_task', 'change_project_status', 'change_task_status', 'create_project'], 'is_active': True}, 'roles': ['admin']}
2025-05-09 15:26:18,833 - app.utils.jwt_callbacks - INFO - Token time difference: -0.832976 seconds
2025-05-09 15:26:18,835 - app.utils.jwt_callbacks - INFO - Token verification successful
2025-05-09 15:26:18,841 - app.utils.jwt_callbacks - INFO - Looking up user with identity: 1
2025-05-09 15:26:18,843 - sqlalchemy.engine.Engine - INFO - SELECT users.id AS users_id, users.username AS users_username, users.email AS users_email, users.name AS users_name, users.password_hash AS users_password_hash, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.last_login AS users_last_login 
FROM users 
WHERE users.id = ?
2025-05-09 15:26:18,844 - sqlalchemy.engine.Engine - INFO - [cached since 2.269s ago] (1,)
2025-05-09 15:26:18,846 - app.utils.jwt_callbacks - INFO - User found: admin
2025-05-09 15:26:18,850 - sqlalchemy.engine.Engine - INFO - SELECT roles.id AS roles_id, roles.name AS roles_name, roles.description AS roles_description, roles.created_at AS roles_created_at 
FROM roles, user_roles 
WHERE ? = user_roles.user_id AND roles.id = user_roles.role_id
2025-05-09 15:26:18,851 - sqlalchemy.engine.Engine - INFO - [cached since 2.27s ago] (1,)
2025-05-09 15:26:18,853 - app.utils.jwt_callbacks - INFO - User roles: ['admin']
2025-05-09 15:26:18,858 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions, role_permissions 
WHERE ? = role_permissions.role_id AND permissions.id = role_permissions.permission_id
2025-05-09 15:26:18,859 - sqlalchemy.engine.Engine - INFO - [cached since 22.76s ago] (1,)
2025-05-09 15:26:18,861 - app.utils.jwt_callbacks - INFO - User permissions: ['manage_users', 'manage_roles', 'manage_all_projects', 'manage_project', 'manage_all_tasks', 'manage_task', 'view_project', 'view_task', 'manage_resources', 'manage_risks', 'view_reports', 'create_task', 'assign_task', 'change_project_status', 'change_task_status', 'create_project']
2025-05-09 15:26:18,863 - app.utils.jwt_callbacks - INFO - Checking if token 051ad551-75b6-4246-8deb-a3228d35e4e4 is in blocklist
2025-05-09 15:26:18,866 - sqlalchemy.engine.Engine - INFO - SELECT token_blacklist.id AS token_blacklist_id, token_blacklist.jti AS token_blacklist_jti, token_blacklist.token_type AS token_blacklist_token_type, token_blacklist.user_id AS token_blacklist_user_id, token_blacklist.revoked_at AS token_blacklist_revoked_at, token_blacklist.expires_at AS token_blacklist_expires_at 
FROM token_blacklist 
WHERE token_blacklist.jti = ?
 LIMIT ? OFFSET ?
2025-05-09 15:26:18,867 - sqlalchemy.engine.Engine - INFO - [cached since 2.31s ago] ('051ad551-75b6-4246-8deb-a3228d35e4e4', 1, 0)
2025-05-09 15:26:18,869 - app.utils.jwt_callbacks - INFO - Token 051ad551-75b6-4246-8deb-a3228d35e4e4 is valid
2025-05-09 15:26:18,871 - app.utils.jwt_callbacks - INFO - Verifying token
2025-05-09 15:26:18,872 - app.utils.jwt_callbacks - INFO - JWT Header: {'alg': 'HS256', 'typ': 'JWT'}
2025-05-09 15:26:18,874 - app.utils.jwt_callbacks - INFO - JWT Data: {'fresh': False, 'iat': 1746775578, 'jti': '051ad551-75b6-4246-8deb-a3228d35e4e4', 'type': 'access', 'sub': 1, 'nbf': 1746775578, 'csrf': 'IjY2NjEzOWExZTRmODhkZmYzMDRlMjQ2OTcyOTI1ODM4YjQzMWVlZDki.aB2uGg.jgVFJQK5Nco9wCP7hwxW73ebrE0', 'exp': 1746779178, 'aud': 'task_management_system', 'user_claims': {'username': 'admin', 'roles': ['admin'], 'permissions': ['manage_users', 'manage_roles', 'manage_all_projects', 'manage_project', 'manage_all_tasks', 'manage_task', 'view_project', 'view_task', 'manage_resources', 'manage_risks', 'view_reports', 'create_task', 'assign_task', 'change_project_status', 'change_task_status', 'create_project'], 'is_active': True}, 'roles': ['admin']}
2025-05-09 15:26:18,875 - app.utils.jwt_callbacks - INFO - Token time difference: -0.875704 seconds
2025-05-09 15:26:18,877 - app.utils.jwt_callbacks - INFO - Token verification successful
2025-05-09 15:26:18,878 - app.utils.jwt_callbacks - INFO - Looking up user with identity: 1
2025-05-09 15:26:18,882 - app.utils.jwt_callbacks - INFO - User found: admin
2025-05-09 15:26:18,887 - app.utils.jwt_callbacks - INFO - User roles: ['admin']
2025-05-09 15:26:18,889 - app.utils.jwt_callbacks - INFO - User permissions: ['manage_users', 'manage_roles', 'manage_all_projects', 'manage_project', 'manage_all_tasks', 'manage_task', 'view_project', 'view_task', 'manage_resources', 'manage_risks', 'view_reports', 'create_task', 'assign_task', 'change_project_status', 'change_task_status', 'create_project']
2025-05-09 15:26:18,891 - app - INFO - Dashboard access with user ID: 1
2025-05-09 15:26:18,893 - app - INFO - Token found in: cookies
2025-05-09 15:26:18,896 - app - INFO - Dashboard context user_data: {'id': 1, 'username': 'admin', 'email': 'admin@example.com', 'name': '管理员', 'is_active': True, 'created_at': '2025-05-07T01:07:21.773527', 'last_login': '2025-05-09T07:26:18.783070', 'roles': ['admin'], 'permissions': ['manage_project', 'create_task', 'manage_all_tasks', 'manage_all_projects', 'manage_users', 'manage_task', 'view_task', 'manage_risks', 'view_project', 'view_reports', 'manage_roles', 'change_project_status', 'create_project', 'manage_resources', 'change_task_status', 'assign_task']}
2025-05-09 15:26:18,898 - app - INFO - 用户 admin 的角色: ['admin']
2025-05-09 15:26:18,899 - app - INFO - 用户 admin 的权限: ['manage_project', 'create_task', 'manage_all_tasks', 'manage_all_projects', 'manage_users', 'manage_task', 'view_task', 'manage_risks', 'view_project', 'view_reports', 'manage_roles', 'change_project_status', 'create_project', 'manage_resources', 'change_task_status', 'assign_task']
2025-05-09 15:26:18,904 - app - INFO - 用户 admin - 是否管理员: True, 是否项目经理: False
2025-05-09 15:26:18,910 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-05-09 15:26:18,911 - werkzeug - INFO - 127.0.0.1 - - [09/May/2025 15:26:18] "GET /main/dashboard HTTP/1.1" 200 -
2025-05-09 15:26:18,949 - app.utils.jwt_callbacks - INFO - Checking if token 051ad551-75b6-4246-8deb-a3228d35e4e4 is in blocklist
2025-05-09 15:26:18,954 - werkzeug - INFO - 127.0.0.1 - - [09/May/2025 15:26:18] "[36mGET /static/css/bootstrap.min.css HTTP/1.1[0m" 304 -
2025-05-09 15:26:18,957 - werkzeug - INFO - 127.0.0.1 - - [09/May/2025 15:26:18] "[36mGET /static/css/bootstrap-icons.css HTTP/1.1[0m" 304 -
2025-05-09 15:26:18,957 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-05-09 15:26:18,957 - werkzeug - INFO - 127.0.0.1 - - [09/May/2025 15:26:18] "[36mGET /static/css/style.css HTTP/1.1[0m" 304 -
2025-05-09 15:26:18,962 - werkzeug - INFO - 127.0.0.1 - - [09/May/2025 15:26:18] "[36mGET /static/js/jquery.min.js HTTP/1.1[0m" 304 -
2025-05-09 15:26:18,962 - werkzeug - INFO - 127.0.0.1 - - [09/May/2025 15:26:18] "[36mGET /static/js/bootstrap.bundle.min.js HTTP/1.1[0m" 304 -
2025-05-09 15:26:18,965 - sqlalchemy.engine.Engine - INFO - SELECT token_blacklist.id AS token_blacklist_id, token_blacklist.jti AS token_blacklist_jti, token_blacklist.token_type AS token_blacklist_token_type, token_blacklist.user_id AS token_blacklist_user_id, token_blacklist.revoked_at AS token_blacklist_revoked_at, token_blacklist.expires_at AS token_blacklist_expires_at 
FROM token_blacklist 
WHERE token_blacklist.jti = ?
 LIMIT ? OFFSET ?
2025-05-09 15:26:18,966 - werkzeug - INFO - 127.0.0.1 - - [09/May/2025 15:26:18] "[36mGET /static/js/auth.js HTTP/1.1[0m" 304 -
2025-05-09 15:26:18,967 - werkzeug - INFO - 127.0.0.1 - - [09/May/2025 15:26:18] "[36mGET /static/js/fix-modals.js HTTP/1.1[0m" 304 -
2025-05-09 15:26:18,968 - sqlalchemy.engine.Engine - INFO - [cached since 2.411s ago] ('051ad551-75b6-4246-8deb-a3228d35e4e4', 1, 0)
2025-05-09 15:26:18,969 - app.utils.jwt_callbacks - INFO - Token 051ad551-75b6-4246-8deb-a3228d35e4e4 is valid
2025-05-09 15:26:18,974 - werkzeug - INFO - 127.0.0.1 - - [09/May/2025 15:26:18] "[36mGET /static/js/csrf.js HTTP/1.1[0m" 304 -
2025-05-09 15:26:18,975 - app.utils.jwt_callbacks - INFO - Verifying token
2025-05-09 15:26:18,975 - app.utils.jwt_callbacks - INFO - JWT Header: {'alg': 'HS256', 'typ': 'JWT'}
2025-05-09 15:26:18,976 - app.utils.jwt_callbacks - INFO - JWT Data: {'fresh': False, 'iat': 1746775578, 'jti': '051ad551-75b6-4246-8deb-a3228d35e4e4', 'type': 'access', 'sub': 1, 'nbf': 1746775578, 'csrf': 'IjY2NjEzOWExZTRmODhkZmYzMDRlMjQ2OTcyOTI1ODM4YjQzMWVlZDki.aB2uGg.jgVFJQK5Nco9wCP7hwxW73ebrE0', 'exp': 1746779178, 'aud': 'task_management_system', 'user_claims': {'username': 'admin', 'roles': ['admin'], 'permissions': ['manage_users', 'manage_roles', 'manage_all_projects', 'manage_project', 'manage_all_tasks', 'manage_task', 'view_project', 'view_task', 'manage_resources', 'manage_risks', 'view_reports', 'create_task', 'assign_task', 'change_project_status', 'change_task_status', 'create_project'], 'is_active': True}, 'roles': ['admin']}
2025-05-09 15:26:18,977 - app.utils.jwt_callbacks - INFO - Token time difference: -0.977799 seconds
2025-05-09 15:26:18,978 - app.utils.jwt_callbacks - INFO - Token verification successful
2025-05-09 15:26:18,979 - app.utils.jwt_callbacks - INFO - Looking up user with identity: 1
2025-05-09 15:26:18,980 - sqlalchemy.engine.Engine - INFO - SELECT users.id AS users_id, users.username AS users_username, users.email AS users_email, users.name AS users_name, users.password_hash AS users_password_hash, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.last_login AS users_last_login 
FROM users 
WHERE users.id = ?
2025-05-09 15:26:18,982 - sqlalchemy.engine.Engine - INFO - [cached since 2.407s ago] (1,)
2025-05-09 15:26:18,983 - app.utils.jwt_callbacks - INFO - User found: admin
2025-05-09 15:26:18,984 - sqlalchemy.engine.Engine - INFO - SELECT roles.id AS roles_id, roles.name AS roles_name, roles.description AS roles_description, roles.created_at AS roles_created_at 
FROM roles, user_roles 
WHERE ? = user_roles.user_id AND roles.id = user_roles.role_id
2025-05-09 15:26:18,984 - sqlalchemy.engine.Engine - INFO - [cached since 2.404s ago] (1,)
2025-05-09 15:26:18,985 - app.utils.jwt_callbacks - INFO - User roles: ['admin']
2025-05-09 15:26:18,986 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions, role_permissions 
WHERE ? = role_permissions.role_id AND permissions.id = role_permissions.permission_id
2025-05-09 15:26:18,987 - sqlalchemy.engine.Engine - INFO - [cached since 22.88s ago] (1,)
2025-05-09 15:26:18,987 - app.utils.jwt_callbacks - INFO - User permissions: ['manage_users', 'manage_roles', 'manage_all_projects', 'manage_project', 'manage_all_tasks', 'manage_task', 'view_project', 'view_task', 'manage_resources', 'manage_risks', 'view_reports', 'create_task', 'assign_task', 'change_project_status', 'change_task_status', 'create_project']
2025-05-09 15:26:18,992 - app.utils.jwt_callbacks - INFO - Checking if token 051ad551-75b6-4246-8deb-a3228d35e4e4 is in blocklist
2025-05-09 15:26:18,996 - sqlalchemy.engine.Engine - INFO - SELECT token_blacklist.id AS token_blacklist_id, token_blacklist.jti AS token_blacklist_jti, token_blacklist.token_type AS token_blacklist_token_type, token_blacklist.user_id AS token_blacklist_user_id, token_blacklist.revoked_at AS token_blacklist_revoked_at, token_blacklist.expires_at AS token_blacklist_expires_at 
FROM token_blacklist 
WHERE token_blacklist.jti = ?
 LIMIT ? OFFSET ?
2025-05-09 15:26:18,997 - sqlalchemy.engine.Engine - INFO - [cached since 2.44s ago] ('051ad551-75b6-4246-8deb-a3228d35e4e4', 1, 0)
2025-05-09 15:26:19,004 - werkzeug - INFO - 127.0.0.1 - - [09/May/2025 15:26:19] "[36mGET /static/css/fonts/bootstrap-icons.woff2 HTTP/1.1[0m" 304 -
2025-05-09 15:26:19,002 - app.utils.jwt_callbacks - INFO - Token 051ad551-75b6-4246-8deb-a3228d35e4e4 is valid
2025-05-09 15:26:19,005 - werkzeug - INFO - 127.0.0.1 - - [09/May/2025 15:26:19] "[36mGET /static/css/bootstrap.min.css.map HTTP/1.1[0m" 304 -
2025-05-09 15:26:19,006 - app.utils.jwt_callbacks - INFO - Verifying token
2025-05-09 15:26:19,006 - app.utils.jwt_callbacks - INFO - JWT Header: {'alg': 'HS256', 'typ': 'JWT'}
2025-05-09 15:26:19,007 - app.utils.jwt_callbacks - INFO - JWT Data: {'fresh': False, 'iat': 1746775578, 'jti': '051ad551-75b6-4246-8deb-a3228d35e4e4', 'type': 'access', 'sub': 1, 'nbf': 1746775578, 'csrf': 'IjY2NjEzOWExZTRmODhkZmYzMDRlMjQ2OTcyOTI1ODM4YjQzMWVlZDki.aB2uGg.jgVFJQK5Nco9wCP7hwxW73ebrE0', 'exp': 1746779178, 'aud': 'task_management_system', 'user_claims': {'username': 'admin', 'roles': ['admin'], 'permissions': ['manage_users', 'manage_roles', 'manage_all_projects', 'manage_project', 'manage_all_tasks', 'manage_task', 'view_project', 'view_task', 'manage_resources', 'manage_risks', 'view_reports', 'create_task', 'assign_task', 'change_project_status', 'change_task_status', 'create_project'], 'is_active': True}, 'roles': ['admin']}
2025-05-09 15:26:19,009 - app.utils.jwt_callbacks - INFO - Token time difference: -1.009903 seconds
2025-05-09 15:26:19,011 - app.utils.jwt_callbacks - INFO - Token verification successful
2025-05-09 15:26:19,011 - app.utils.jwt_callbacks - INFO - Looking up user with identity: 1
2025-05-09 15:26:19,013 - app.utils.jwt_callbacks - INFO - User found: admin
2025-05-09 15:26:19,013 - app.utils.jwt_callbacks - INFO - User roles: ['admin']
2025-05-09 15:26:19,014 - app.utils.jwt_callbacks - INFO - User permissions: ['manage_users', 'manage_roles', 'manage_all_projects', 'manage_project', 'manage_all_tasks', 'manage_task', 'view_project', 'view_task', 'manage_resources', 'manage_risks', 'view_reports', 'create_task', 'assign_task', 'change_project_status', 'change_task_status', 'create_project']
2025-05-09 15:26:19,015 - app - INFO - 用户已认证，重定向到仪表板页面: /.well-known/appspecific/com.chrome.devtools.json
2025-05-09 15:26:19,016 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-05-09 15:26:19,017 - werkzeug - INFO - 127.0.0.1 - - [09/May/2025 15:26:19] "[32mGET /.well-known/appspecific/com.chrome.devtools.json HTTP/1.1[0m" 302 -
2025-05-09 15:26:19,025 - app.utils.jwt_callbacks - INFO - Checking if token 051ad551-75b6-4246-8deb-a3228d35e4e4 is in blocklist
2025-05-09 15:26:19,026 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-05-09 15:26:19,027 - sqlalchemy.engine.Engine - INFO - SELECT token_blacklist.id AS token_blacklist_id, token_blacklist.jti AS token_blacklist_jti, token_blacklist.token_type AS token_blacklist_token_type, token_blacklist.user_id AS token_blacklist_user_id, token_blacklist.revoked_at AS token_blacklist_revoked_at, token_blacklist.expires_at AS token_blacklist_expires_at 
FROM token_blacklist 
WHERE token_blacklist.jti = ?
 LIMIT ? OFFSET ?
2025-05-09 15:26:19,027 - sqlalchemy.engine.Engine - INFO - [cached since 2.47s ago] ('051ad551-75b6-4246-8deb-a3228d35e4e4', 1, 0)
2025-05-09 15:26:19,028 - app.utils.jwt_callbacks - INFO - Token 051ad551-75b6-4246-8deb-a3228d35e4e4 is valid
2025-05-09 15:26:19,029 - app.utils.jwt_callbacks - INFO - Verifying token
2025-05-09 15:26:19,031 - werkzeug - INFO - 127.0.0.1 - - [09/May/2025 15:26:19] "[36mGET /static/favicon.ico HTTP/1.1[0m" 304 -
2025-05-09 15:26:19,031 - app.utils.jwt_callbacks - INFO - JWT Header: {'alg': 'HS256', 'typ': 'JWT'}
2025-05-09 15:26:19,033 - app.utils.jwt_callbacks - INFO - JWT Data: {'fresh': False, 'iat': 1746775578, 'jti': '051ad551-75b6-4246-8deb-a3228d35e4e4', 'type': 'access', 'sub': 1, 'nbf': 1746775578, 'csrf': 'IjY2NjEzOWExZTRmODhkZmYzMDRlMjQ2OTcyOTI1ODM4YjQzMWVlZDki.aB2uGg.jgVFJQK5Nco9wCP7hwxW73ebrE0', 'exp': 1746779178, 'aud': 'task_management_system', 'user_claims': {'username': 'admin', 'roles': ['admin'], 'permissions': ['manage_users', 'manage_roles', 'manage_all_projects', 'manage_project', 'manage_all_tasks', 'manage_task', 'view_project', 'view_task', 'manage_resources', 'manage_risks', 'view_reports', 'create_task', 'assign_task', 'change_project_status', 'change_task_status', 'create_project'], 'is_active': True}, 'roles': ['admin']}
2025-05-09 15:26:19,034 - app.utils.jwt_callbacks - INFO - Token time difference: -1.03403 seconds
2025-05-09 15:26:19,035 - app.utils.jwt_callbacks - INFO - Token verification successful
2025-05-09 15:26:19,035 - app.utils.jwt_callbacks - INFO - Looking up user with identity: 1
2025-05-09 15:26:19,036 - sqlalchemy.engine.Engine - INFO - SELECT users.id AS users_id, users.username AS users_username, users.email AS users_email, users.name AS users_name, users.password_hash AS users_password_hash, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.last_login AS users_last_login 
FROM users 
WHERE users.id = ?
2025-05-09 15:26:19,038 - sqlalchemy.engine.Engine - INFO - [cached since 2.463s ago] (1,)
2025-05-09 15:26:19,039 - app.utils.jwt_callbacks - INFO - User found: admin
2025-05-09 15:26:19,040 - sqlalchemy.engine.Engine - INFO - SELECT roles.id AS roles_id, roles.name AS roles_name, roles.description AS roles_description, roles.created_at AS roles_created_at 
FROM roles, user_roles 
WHERE ? = user_roles.user_id AND roles.id = user_roles.role_id
2025-05-09 15:26:19,040 - sqlalchemy.engine.Engine - INFO - [cached since 2.46s ago] (1,)
2025-05-09 15:26:19,041 - app.utils.jwt_callbacks - INFO - User roles: ['admin']
2025-05-09 15:26:19,042 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions, role_permissions 
WHERE ? = role_permissions.role_id AND permissions.id = role_permissions.permission_id
2025-05-09 15:26:19,042 - sqlalchemy.engine.Engine - INFO - [cached since 22.94s ago] (1,)
2025-05-09 15:26:19,043 - app.utils.jwt_callbacks - INFO - User permissions: ['manage_users', 'manage_roles', 'manage_all_projects', 'manage_project', 'manage_all_tasks', 'manage_task', 'view_project', 'view_task', 'manage_resources', 'manage_risks', 'view_reports', 'create_task', 'assign_task', 'change_project_status', 'change_task_status', 'create_project']
2025-05-09 15:26:19,045 - app.utils.jwt_callbacks - INFO - Checking if token 051ad551-75b6-4246-8deb-a3228d35e4e4 is in blocklist
2025-05-09 15:26:19,047 - sqlalchemy.engine.Engine - INFO - SELECT token_blacklist.id AS token_blacklist_id, token_blacklist.jti AS token_blacklist_jti, token_blacklist.token_type AS token_blacklist_token_type, token_blacklist.user_id AS token_blacklist_user_id, token_blacklist.revoked_at AS token_blacklist_revoked_at, token_blacklist.expires_at AS token_blacklist_expires_at 
FROM token_blacklist 
WHERE token_blacklist.jti = ?
 LIMIT ? OFFSET ?
2025-05-09 15:26:19,047 - sqlalchemy.engine.Engine - INFO - [cached since 2.491s ago] ('051ad551-75b6-4246-8deb-a3228d35e4e4', 1, 0)
2025-05-09 15:26:19,049 - app.utils.jwt_callbacks - INFO - Token 051ad551-75b6-4246-8deb-a3228d35e4e4 is valid
2025-05-09 15:26:19,050 - app.utils.jwt_callbacks - INFO - Verifying token
2025-05-09 15:26:19,050 - app.utils.jwt_callbacks - INFO - JWT Header: {'alg': 'HS256', 'typ': 'JWT'}
2025-05-09 15:26:19,051 - app.utils.jwt_callbacks - INFO - JWT Data: {'fresh': False, 'iat': 1746775578, 'jti': '051ad551-75b6-4246-8deb-a3228d35e4e4', 'type': 'access', 'sub': 1, 'nbf': 1746775578, 'csrf': 'IjY2NjEzOWExZTRmODhkZmYzMDRlMjQ2OTcyOTI1ODM4YjQzMWVlZDki.aB2uGg.jgVFJQK5Nco9wCP7hwxW73ebrE0', 'exp': 1746779178, 'aud': 'task_management_system', 'user_claims': {'username': 'admin', 'roles': ['admin'], 'permissions': ['manage_users', 'manage_roles', 'manage_all_projects', 'manage_project', 'manage_all_tasks', 'manage_task', 'view_project', 'view_task', 'manage_resources', 'manage_risks', 'view_reports', 'create_task', 'assign_task', 'change_project_status', 'change_task_status', 'create_project'], 'is_active': True}, 'roles': ['admin']}
2025-05-09 15:26:19,052 - app.utils.jwt_callbacks - INFO - Token time difference: -1.052826 seconds
2025-05-09 15:26:19,053 - app.utils.jwt_callbacks - INFO - Token verification successful
2025-05-09 15:26:19,054 - app.utils.jwt_callbacks - INFO - Looking up user with identity: 1
2025-05-09 15:26:19,055 - app.utils.jwt_callbacks - INFO - User found: admin
2025-05-09 15:26:19,056 - app.utils.jwt_callbacks - INFO - User roles: ['admin']
2025-05-09 15:26:19,057 - app.utils.jwt_callbacks - INFO - User permissions: ['manage_users', 'manage_roles', 'manage_all_projects', 'manage_project', 'manage_all_tasks', 'manage_task', 'view_project', 'view_task', 'manage_resources', 'manage_risks', 'view_reports', 'create_task', 'assign_task', 'change_project_status', 'change_task_status', 'create_project']
2025-05-09 15:26:19,060 - app - INFO - Dashboard access with user ID: 1
2025-05-09 15:26:19,061 - app - INFO - Token found in: cookies
2025-05-09 15:26:19,062 - app - INFO - Dashboard context user_data: {'id': 1, 'username': 'admin', 'email': 'admin@example.com', 'name': '管理员', 'is_active': True, 'created_at': '2025-05-07T01:07:21.773527', 'last_login': '2025-05-09T07:26:18.783070', 'roles': ['admin'], 'permissions': ['manage_project', 'create_task', 'manage_all_tasks', 'manage_all_projects', 'manage_users', 'manage_task', 'view_task', 'manage_risks', 'view_project', 'view_reports', 'manage_roles', 'change_project_status', 'create_project', 'manage_resources', 'change_task_status', 'assign_task']}
2025-05-09 15:26:19,064 - app - INFO - 用户 admin 的角色: ['admin']
2025-05-09 15:26:19,064 - app - INFO - 用户 admin 的权限: ['manage_project', 'create_task', 'manage_all_tasks', 'manage_all_projects', 'manage_users', 'manage_task', 'view_task', 'manage_risks', 'view_project', 'view_reports', 'manage_roles', 'change_project_status', 'create_project', 'manage_resources', 'change_task_status', 'assign_task']
2025-05-09 15:26:19,065 - app - INFO - 用户 admin - 是否管理员: True, 是否项目经理: False
2025-05-09 15:26:19,067 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-05-09 15:26:19,068 - werkzeug - INFO - 127.0.0.1 - - [09/May/2025 15:26:19] "GET /main/dashboard HTTP/1.1" 200 -
2025-05-09 15:26:20,017 - app - WARNING - 绕过JWT验证: /main/projects
2025-05-09 15:26:20,018 - app.utils.jwt_callbacks - INFO - Checking if token 051ad551-75b6-4246-8deb-a3228d35e4e4 is in blocklist
2025-05-09 15:26:20,020 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-05-09 15:26:20,020 - sqlalchemy.engine.Engine - INFO - SELECT token_blacklist.id AS token_blacklist_id, token_blacklist.jti AS token_blacklist_jti, token_blacklist.token_type AS token_blacklist_token_type, token_blacklist.user_id AS token_blacklist_user_id, token_blacklist.revoked_at AS token_blacklist_revoked_at, token_blacklist.expires_at AS token_blacklist_expires_at 
FROM token_blacklist 
WHERE token_blacklist.jti = ?
 LIMIT ? OFFSET ?
2025-05-09 15:26:20,021 - sqlalchemy.engine.Engine - INFO - [cached since 3.464s ago] ('051ad551-75b6-4246-8deb-a3228d35e4e4', 1, 0)
2025-05-09 15:26:20,022 - app.utils.jwt_callbacks - INFO - Token 051ad551-75b6-4246-8deb-a3228d35e4e4 is valid
2025-05-09 15:26:20,024 - app.utils.jwt_callbacks - INFO - Verifying token
2025-05-09 15:26:20,024 - app.utils.jwt_callbacks - INFO - JWT Header: {'alg': 'HS256', 'typ': 'JWT'}
2025-05-09 15:26:20,025 - app.utils.jwt_callbacks - INFO - JWT Data: {'fresh': False, 'iat': 1746775578, 'jti': '051ad551-75b6-4246-8deb-a3228d35e4e4', 'type': 'access', 'sub': 1, 'nbf': 1746775578, 'csrf': 'IjY2NjEzOWExZTRmODhkZmYzMDRlMjQ2OTcyOTI1ODM4YjQzMWVlZDki.aB2uGg.jgVFJQK5Nco9wCP7hwxW73ebrE0', 'exp': 1746779178, 'aud': 'task_management_system', 'user_claims': {'username': 'admin', 'roles': ['admin'], 'permissions': ['manage_users', 'manage_roles', 'manage_all_projects', 'manage_project', 'manage_all_tasks', 'manage_task', 'view_project', 'view_task', 'manage_resources', 'manage_risks', 'view_reports', 'create_task', 'assign_task', 'change_project_status', 'change_task_status', 'create_project'], 'is_active': True}, 'roles': ['admin']}
2025-05-09 15:26:20,026 - app.utils.jwt_callbacks - INFO - Token time difference: -2.026671 seconds
2025-05-09 15:26:20,027 - app.utils.jwt_callbacks - INFO - Token verification successful
2025-05-09 15:26:20,027 - app.utils.jwt_callbacks - INFO - Looking up user with identity: 1
2025-05-09 15:26:20,028 - sqlalchemy.engine.Engine - INFO - SELECT users.id AS users_id, users.username AS users_username, users.email AS users_email, users.name AS users_name, users.password_hash AS users_password_hash, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.last_login AS users_last_login 
FROM users 
WHERE users.id = ?
2025-05-09 15:26:20,030 - sqlalchemy.engine.Engine - INFO - [cached since 3.455s ago] (1,)
2025-05-09 15:26:20,030 - app.utils.jwt_callbacks - INFO - User found: admin
2025-05-09 15:26:20,032 - sqlalchemy.engine.Engine - INFO - SELECT roles.id AS roles_id, roles.name AS roles_name, roles.description AS roles_description, roles.created_at AS roles_created_at 
FROM roles, user_roles 
WHERE ? = user_roles.user_id AND roles.id = user_roles.role_id
2025-05-09 15:26:20,033 - sqlalchemy.engine.Engine - INFO - [cached since 3.452s ago] (1,)
2025-05-09 15:26:20,033 - app.utils.jwt_callbacks - INFO - User roles: ['admin']
2025-05-09 15:26:20,035 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions, role_permissions 
WHERE ? = role_permissions.role_id AND permissions.id = role_permissions.permission_id
2025-05-09 15:26:20,036 - sqlalchemy.engine.Engine - INFO - [cached since 23.93s ago] (1,)
2025-05-09 15:26:20,037 - app.utils.jwt_callbacks - INFO - User permissions: ['manage_users', 'manage_roles', 'manage_all_projects', 'manage_project', 'manage_all_tasks', 'manage_task', 'view_project', 'view_task', 'manage_resources', 'manage_risks', 'view_reports', 'create_task', 'assign_task', 'change_project_status', 'change_task_status', 'create_project']
2025-05-09 15:26:20,040 - app.routes.main - INFO - JWT bypass enabled for projects - Using test user
2025-05-09 15:26:20,044 - sqlalchemy.engine.Engine - INFO - SELECT projects.id AS projects_id, projects.name AS projects_name, projects.description AS projects_description, projects.status AS projects_status, projects.start_date AS projects_start_date, projects.end_date AS projects_end_date, projects.progress AS projects_progress, projects.created_at AS projects_created_at, projects.updated_at AS projects_updated_at, projects.manager_id AS projects_manager_id, projects.owner_id AS projects_owner_id 
FROM projects
2025-05-09 15:26:20,044 - sqlalchemy.engine.Engine - INFO - [generated in 0.00071s] ()
2025-05-09 15:26:20,046 - sqlalchemy.engine.Engine - INFO - SELECT users.id AS users_id, users.username AS users_username, users.email AS users_email, users.name AS users_name, users.password_hash AS users_password_hash, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.last_login AS users_last_login 
FROM users 
WHERE users.id = ?
2025-05-09 15:26:20,046 - sqlalchemy.engine.Engine - INFO - [cached since 3.472s ago] (3,)
2025-05-09 15:26:20,048 - sqlalchemy.engine.Engine - INFO - SELECT users.id AS users_id, users.username AS users_username, users.email AS users_email, users.name AS users_name, users.password_hash AS users_password_hash, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.last_login AS users_last_login 
FROM users 
WHERE users.id = ?
2025-05-09 15:26:20,049 - sqlalchemy.engine.Engine - INFO - [cached since 3.475s ago] (5,)
2025-05-09 15:26:20,051 - sqlalchemy.engine.Engine - INFO - SELECT users.id AS users_id, users.username AS users_username, users.email AS users_email, users.name AS users_name, users.password_hash AS users_password_hash, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.last_login AS users_last_login 
FROM users 
WHERE users.id = ?
2025-05-09 15:26:20,052 - sqlalchemy.engine.Engine - INFO - [cached since 3.478s ago] (8,)
2025-05-09 15:26:20,053 - sqlalchemy.engine.Engine - INFO - SELECT users.id AS users_id, users.username AS users_username, users.email AS users_email, users.name AS users_name, users.password_hash AS users_password_hash, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.last_login AS users_last_login 
FROM users 
WHERE users.id = ?
2025-05-09 15:26:20,054 - sqlalchemy.engine.Engine - INFO - [cached since 3.48s ago] (5,)
2025-05-09 15:26:20,080 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-05-09 15:26:20,082 - werkzeug - INFO - 127.0.0.1 - - [09/May/2025 15:26:20] "GET /main/projects?bypass_jwt=true HTTP/1.1" 200 -
2025-05-09 15:26:20,108 - app.utils.jwt_callbacks - INFO - Checking if token 051ad551-75b6-4246-8deb-a3228d35e4e4 is in blocklist
2025-05-09 15:26:20,109 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-05-09 15:26:20,110 - sqlalchemy.engine.Engine - INFO - SELECT token_blacklist.id AS token_blacklist_id, token_blacklist.jti AS token_blacklist_jti, token_blacklist.token_type AS token_blacklist_token_type, token_blacklist.user_id AS token_blacklist_user_id, token_blacklist.revoked_at AS token_blacklist_revoked_at, token_blacklist.expires_at AS token_blacklist_expires_at 
FROM token_blacklist 
WHERE token_blacklist.jti = ?
 LIMIT ? OFFSET ?
2025-05-09 15:26:20,110 - sqlalchemy.engine.Engine - INFO - [cached since 3.553s ago] ('051ad551-75b6-4246-8deb-a3228d35e4e4', 1, 0)
2025-05-09 15:26:20,111 - app.utils.jwt_callbacks - INFO - Token 051ad551-75b6-4246-8deb-a3228d35e4e4 is valid
2025-05-09 15:26:20,112 - app.utils.jwt_callbacks - INFO - Verifying token
2025-05-09 15:26:20,112 - app.utils.jwt_callbacks - INFO - JWT Header: {'alg': 'HS256', 'typ': 'JWT'}
2025-05-09 15:26:20,113 - app.utils.jwt_callbacks - INFO - JWT Data: {'fresh': False, 'iat': 1746775578, 'jti': '051ad551-75b6-4246-8deb-a3228d35e4e4', 'type': 'access', 'sub': 1, 'nbf': 1746775578, 'csrf': 'IjY2NjEzOWExZTRmODhkZmYzMDRlMjQ2OTcyOTI1ODM4YjQzMWVlZDki.aB2uGg.jgVFJQK5Nco9wCP7hwxW73ebrE0', 'exp': 1746779178, 'aud': 'task_management_system', 'user_claims': {'username': 'admin', 'roles': ['admin'], 'permissions': ['manage_users', 'manage_roles', 'manage_all_projects', 'manage_project', 'manage_all_tasks', 'manage_task', 'view_project', 'view_task', 'manage_resources', 'manage_risks', 'view_reports', 'create_task', 'assign_task', 'change_project_status', 'change_task_status', 'create_project'], 'is_active': True}, 'roles': ['admin']}
2025-05-09 15:26:20,114 - app.utils.jwt_callbacks - INFO - Token time difference: -2.114083 seconds
2025-05-09 15:26:20,115 - app.utils.jwt_callbacks - INFO - Token verification successful
2025-05-09 15:26:20,116 - app.utils.jwt_callbacks - INFO - Looking up user with identity: 1
2025-05-09 15:26:20,117 - sqlalchemy.engine.Engine - INFO - SELECT users.id AS users_id, users.username AS users_username, users.email AS users_email, users.name AS users_name, users.password_hash AS users_password_hash, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.last_login AS users_last_login 
FROM users 
WHERE users.id = ?
2025-05-09 15:26:20,119 - sqlalchemy.engine.Engine - INFO - [cached since 3.545s ago] (1,)
2025-05-09 15:26:20,122 - werkzeug - INFO - 127.0.0.1 - - [09/May/2025 15:26:20] "[36mGET /static/css/bootstrap.min.css HTTP/1.1[0m" 304 -
2025-05-09 15:26:20,123 - werkzeug - INFO - 127.0.0.1 - - [09/May/2025 15:26:20] "[36mGET /static/css/bootstrap-icons.css HTTP/1.1[0m" 304 -
2025-05-09 15:26:20,125 - werkzeug - INFO - 127.0.0.1 - - [09/May/2025 15:26:20] "[36mGET /static/css/style.css HTTP/1.1[0m" 304 -
2025-05-09 15:26:20,124 - app.utils.jwt_callbacks - INFO - User found: admin
2025-05-09 15:26:20,127 - werkzeug - INFO - 127.0.0.1 - - [09/May/2025 15:26:20] "[36mGET /static/css/frappe-gantt.min.css HTTP/1.1[0m" 304 -
2025-05-09 15:26:20,130 - werkzeug - INFO - 127.0.0.1 - - [09/May/2025 15:26:20] "[36mGET /static/js/jquery.min.js HTTP/1.1[0m" 304 -
2025-05-09 15:26:20,135 - sqlalchemy.engine.Engine - INFO - SELECT roles.id AS roles_id, roles.name AS roles_name, roles.description AS roles_description, roles.created_at AS roles_created_at 
FROM roles, user_roles 
WHERE ? = user_roles.user_id AND roles.id = user_roles.role_id
2025-05-09 15:26:20,136 - werkzeug - INFO - 127.0.0.1 - - [09/May/2025 15:26:20] "[36mGET /static/js/bootstrap.bundle.min.js HTTP/1.1[0m" 304 -
2025-05-09 15:26:20,137 - werkzeug - INFO - 127.0.0.1 - - [09/May/2025 15:26:20] "[36mGET /static/js/auth.js HTTP/1.1[0m" 304 -
2025-05-09 15:26:20,139 - werkzeug - INFO - 127.0.0.1 - - [09/May/2025 15:26:20] "[36mGET /static/js/fix-modals.js HTTP/1.1[0m" 304 -
2025-05-09 15:26:20,141 - sqlalchemy.engine.Engine - INFO - [cached since 3.56s ago] (1,)
2025-05-09 15:26:20,143 - werkzeug - INFO - 127.0.0.1 - - [09/May/2025 15:26:20] "[36mGET /static/js/csrf.js HTTP/1.1[0m" 304 -
2025-05-09 15:26:20,147 - werkzeug - INFO - 127.0.0.1 - - [09/May/2025 15:26:20] "[36mGET /static/js/frappe-gantt.min.js HTTP/1.1[0m" 304 -
2025-05-09 15:26:20,148 - werkzeug - INFO - 127.0.0.1 - - [09/May/2025 15:26:20] "[36mGET /static/css/bootstrap.min.css.map HTTP/1.1[0m" 304 -
2025-05-09 15:26:20,150 - app.utils.jwt_callbacks - INFO - User roles: ['admin']
2025-05-09 15:26:20,152 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions, role_permissions 
WHERE ? = role_permissions.role_id AND permissions.id = role_permissions.permission_id
2025-05-09 15:26:20,155 - sqlalchemy.engine.Engine - INFO - [cached since 24.05s ago] (1,)
2025-05-09 15:26:20,156 - app.utils.jwt_callbacks - INFO - User permissions: ['manage_users', 'manage_roles', 'manage_all_projects', 'manage_project', 'manage_all_tasks', 'manage_task', 'view_project', 'view_task', 'manage_resources', 'manage_risks', 'view_reports', 'create_task', 'assign_task', 'change_project_status', 'change_task_status', 'create_project']
2025-05-09 15:26:20,158 - app.utils.jwt_callbacks - INFO - Checking if token 051ad551-75b6-4246-8deb-a3228d35e4e4 is in blocklist
2025-05-09 15:26:20,159 - sqlalchemy.engine.Engine - INFO - SELECT token_blacklist.id AS token_blacklist_id, token_blacklist.jti AS token_blacklist_jti, token_blacklist.token_type AS token_blacklist_token_type, token_blacklist.user_id AS token_blacklist_user_id, token_blacklist.revoked_at AS token_blacklist_revoked_at, token_blacklist.expires_at AS token_blacklist_expires_at 
FROM token_blacklist 
WHERE token_blacklist.jti = ?
 LIMIT ? OFFSET ?
2025-05-09 15:26:20,159 - sqlalchemy.engine.Engine - INFO - [cached since 3.603s ago] ('051ad551-75b6-4246-8deb-a3228d35e4e4', 1, 0)
2025-05-09 15:26:20,160 - app.utils.jwt_callbacks - INFO - Token 051ad551-75b6-4246-8deb-a3228d35e4e4 is valid
2025-05-09 15:26:20,162 - app.utils.jwt_callbacks - INFO - Verifying token
2025-05-09 15:26:20,163 - app.utils.jwt_callbacks - INFO - JWT Header: {'alg': 'HS256', 'typ': 'JWT'}
2025-05-09 15:26:20,163 - app.utils.jwt_callbacks - INFO - JWT Data: {'fresh': False, 'iat': 1746775578, 'jti': '051ad551-75b6-4246-8deb-a3228d35e4e4', 'type': 'access', 'sub': 1, 'nbf': 1746775578, 'csrf': 'IjY2NjEzOWExZTRmODhkZmYzMDRlMjQ2OTcyOTI1ODM4YjQzMWVlZDki.aB2uGg.jgVFJQK5Nco9wCP7hwxW73ebrE0', 'exp': 1746779178, 'aud': 'task_management_system', 'user_claims': {'username': 'admin', 'roles': ['admin'], 'permissions': ['manage_users', 'manage_roles', 'manage_all_projects', 'manage_project', 'manage_all_tasks', 'manage_task', 'view_project', 'view_task', 'manage_resources', 'manage_risks', 'view_reports', 'create_task', 'assign_task', 'change_project_status', 'change_task_status', 'create_project'], 'is_active': True}, 'roles': ['admin']}
2025-05-09 15:26:20,164 - app.utils.jwt_callbacks - INFO - Token time difference: -2.164228 seconds
2025-05-09 15:26:20,166 - app - WARNING - 绕过JWT验证: /api/project-managers
2025-05-09 15:26:20,166 - app.utils.jwt_callbacks - INFO - Token verification successful
2025-05-09 15:26:20,167 - app.utils.jwt_callbacks - INFO - Checking if token 051ad551-75b6-4246-8deb-a3228d35e4e4 is in blocklist
2025-05-09 15:26:20,168 - app.utils.jwt_callbacks - INFO - Looking up user with identity: 1
2025-05-09 15:26:20,173 - app.utils.jwt_callbacks - INFO - User found: admin
2025-05-09 15:26:20,175 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-05-09 15:26:20,174 - app.utils.jwt_callbacks - INFO - User roles: ['admin']
2025-05-09 15:26:20,175 - sqlalchemy.engine.Engine - INFO - SELECT token_blacklist.id AS token_blacklist_id, token_blacklist.jti AS token_blacklist_jti, token_blacklist.token_type AS token_blacklist_token_type, token_blacklist.user_id AS token_blacklist_user_id, token_blacklist.revoked_at AS token_blacklist_revoked_at, token_blacklist.expires_at AS token_blacklist_expires_at 
FROM token_blacklist 
WHERE token_blacklist.jti = ?
 LIMIT ? OFFSET ?
2025-05-09 15:26:20,176 - sqlalchemy.engine.Engine - INFO - [cached since 3.619s ago] ('051ad551-75b6-4246-8deb-a3228d35e4e4', 1, 0)
2025-05-09 15:26:20,176 - app.utils.jwt_callbacks - INFO - User permissions: ['manage_users', 'manage_roles', 'manage_all_projects', 'manage_project', 'manage_all_tasks', 'manage_task', 'view_project', 'view_task', 'manage_resources', 'manage_risks', 'view_reports', 'create_task', 'assign_task', 'change_project_status', 'change_task_status', 'create_project']
2025-05-09 15:26:20,177 - app - INFO - 用户已认证，重定向到仪表板页面: /.well-known/appspecific/com.chrome.devtools.json
2025-05-09 15:26:20,178 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-05-09 15:26:20,177 - app.utils.jwt_callbacks - INFO - Token 051ad551-75b6-4246-8deb-a3228d35e4e4 is valid
2025-05-09 15:26:20,179 - werkzeug - INFO - 127.0.0.1 - - [09/May/2025 15:26:20] "[32mGET /.well-known/appspecific/com.chrome.devtools.json HTTP/1.1[0m" 302 -
2025-05-09 15:26:20,179 - app.utils.jwt_callbacks - INFO - Verifying token
2025-05-09 15:26:20,180 - app.utils.jwt_callbacks - INFO - JWT Header: {'alg': 'HS256', 'typ': 'JWT'}
2025-05-09 15:26:20,180 - app.utils.jwt_callbacks - INFO - JWT Data: {'fresh': False, 'iat': 1746775578, 'jti': '051ad551-75b6-4246-8deb-a3228d35e4e4', 'type': 'access', 'sub': 1, 'nbf': 1746775578, 'csrf': 'IjY2NjEzOWExZTRmODhkZmYzMDRlMjQ2OTcyOTI1ODM4YjQzMWVlZDki.aB2uGg.jgVFJQK5Nco9wCP7hwxW73ebrE0', 'exp': 1746779178, 'aud': 'task_management_system', 'user_claims': {'username': 'admin', 'roles': ['admin'], 'permissions': ['manage_users', 'manage_roles', 'manage_all_projects', 'manage_project', 'manage_all_tasks', 'manage_task', 'view_project', 'view_task', 'manage_resources', 'manage_risks', 'view_reports', 'create_task', 'assign_task', 'change_project_status', 'change_task_status', 'create_project'], 'is_active': True}, 'roles': ['admin']}
2025-05-09 15:26:20,182 - app.utils.jwt_callbacks - INFO - Token time difference: -2.18242 seconds
2025-05-09 15:26:20,182 - app.utils.jwt_callbacks - INFO - Token verification successful
2025-05-09 15:26:20,183 - app.utils.jwt_callbacks - INFO - Looking up user with identity: 1
2025-05-09 15:26:20,184 - sqlalchemy.engine.Engine - INFO - SELECT users.id AS users_id, users.username AS users_username, users.email AS users_email, users.name AS users_name, users.password_hash AS users_password_hash, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.last_login AS users_last_login 
FROM users 
WHERE users.id = ?
2025-05-09 15:26:20,187 - sqlalchemy.engine.Engine - INFO - [cached since 3.612s ago] (1,)
2025-05-09 15:26:20,186 - app.utils.jwt_callbacks - INFO - Checking if token 051ad551-75b6-4246-8deb-a3228d35e4e4 is in blocklist
2025-05-09 15:26:20,188 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-05-09 15:26:20,188 - app.utils.jwt_callbacks - INFO - User found: admin
2025-05-09 15:26:20,189 - sqlalchemy.engine.Engine - INFO - SELECT token_blacklist.id AS token_blacklist_id, token_blacklist.jti AS token_blacklist_jti, token_blacklist.token_type AS token_blacklist_token_type, token_blacklist.user_id AS token_blacklist_user_id, token_blacklist.revoked_at AS token_blacklist_revoked_at, token_blacklist.expires_at AS token_blacklist_expires_at 
FROM token_blacklist 
WHERE token_blacklist.jti = ?
 LIMIT ? OFFSET ?
2025-05-09 15:26:20,190 - sqlalchemy.engine.Engine - INFO - SELECT roles.id AS roles_id, roles.name AS roles_name, roles.description AS roles_description, roles.created_at AS roles_created_at 
FROM roles, user_roles 
WHERE ? = user_roles.user_id AND roles.id = user_roles.role_id
2025-05-09 15:26:20,190 - sqlalchemy.engine.Engine - INFO - [cached since 3.633s ago] ('051ad551-75b6-4246-8deb-a3228d35e4e4', 1, 0)
2025-05-09 15:26:20,190 - sqlalchemy.engine.Engine - INFO - [cached since 3.61s ago] (1,)
2025-05-09 15:26:20,192 - werkzeug - INFO - 127.0.0.1 - - [09/May/2025 15:26:20] "[36mGET /static/favicon.ico HTTP/1.1[0m" 304 -
2025-05-09 15:26:20,192 - app.utils.jwt_callbacks - INFO - Token 051ad551-75b6-4246-8deb-a3228d35e4e4 is valid
2025-05-09 15:26:20,194 - app.utils.jwt_callbacks - INFO - User roles: ['admin']
2025-05-09 15:26:20,195 - app.utils.jwt_callbacks - INFO - Verifying token
2025-05-09 15:26:20,195 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions, role_permissions 
WHERE ? = role_permissions.role_id AND permissions.id = role_permissions.permission_id
2025-05-09 15:26:20,197 - sqlalchemy.engine.Engine - INFO - [cached since 24.09s ago] (1,)
2025-05-09 15:26:20,196 - app.utils.jwt_callbacks - INFO - JWT Header: {'alg': 'HS256', 'typ': 'JWT'}
2025-05-09 15:26:20,197 - app.utils.jwt_callbacks - INFO - JWT Data: {'fresh': False, 'iat': 1746775578, 'jti': '051ad551-75b6-4246-8deb-a3228d35e4e4', 'type': 'access', 'sub': 1, 'nbf': 1746775578, 'csrf': 'IjY2NjEzOWExZTRmODhkZmYzMDRlMjQ2OTcyOTI1ODM4YjQzMWVlZDki.aB2uGg.jgVFJQK5Nco9wCP7hwxW73ebrE0', 'exp': 1746779178, 'aud': 'task_management_system', 'user_claims': {'username': 'admin', 'roles': ['admin'], 'permissions': ['manage_users', 'manage_roles', 'manage_all_projects', 'manage_project', 'manage_all_tasks', 'manage_task', 'view_project', 'view_task', 'manage_resources', 'manage_risks', 'view_reports', 'create_task', 'assign_task', 'change_project_status', 'change_task_status', 'create_project'], 'is_active': True}, 'roles': ['admin']}
2025-05-09 15:26:20,198 - app.utils.jwt_callbacks - INFO - User permissions: ['manage_users', 'manage_roles', 'manage_all_projects', 'manage_project', 'manage_all_tasks', 'manage_task', 'view_project', 'view_task', 'manage_resources', 'manage_risks', 'view_reports', 'create_task', 'assign_task', 'change_project_status', 'change_task_status', 'create_project']
2025-05-09 15:26:20,199 - app.utils.jwt_callbacks - INFO - Token time difference: -2.19967 seconds
2025-05-09 15:26:20,199 - app.routes.projects - INFO - 获取项目经理列表API被调用
2025-05-09 15:26:20,203 - sqlalchemy.engine.Engine - INFO - SELECT users.id AS users_id, users.username AS users_username, users.email AS users_email, users.name AS users_name, users.password_hash AS users_password_hash, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.last_login AS users_last_login 
FROM users 
WHERE users.is_active = 1
2025-05-09 15:26:20,200 - app.utils.jwt_callbacks - INFO - Token verification successful
2025-05-09 15:26:20,204 - sqlalchemy.engine.Engine - INFO - [generated in 0.00106s] ()
2025-05-09 15:26:20,204 - app.utils.jwt_callbacks - INFO - Looking up user with identity: 1
2025-05-09 15:26:20,206 - app.routes.projects - INFO - 已找到 9 个活跃用户用于项目经理选择
2025-05-09 15:26:20,207 - sqlalchemy.engine.Engine - INFO - SELECT users.id AS users_id, users.username AS users_username, users.email AS users_email, users.name AS users_name, users.password_hash AS users_password_hash, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.last_login AS users_last_login 
FROM users 
WHERE users.id = ?
2025-05-09 15:26:20,209 - sqlalchemy.engine.Engine - INFO - SELECT roles.id AS roles_id, roles.name AS roles_name, roles.description AS roles_description, roles.created_at AS roles_created_at 
FROM roles, user_roles 
WHERE ? = user_roles.user_id AND roles.id = user_roles.role_id
2025-05-09 15:26:20,209 - sqlalchemy.engine.Engine - INFO - [cached since 3.634s ago] (1,)
2025-05-09 15:26:20,210 - sqlalchemy.engine.Engine - INFO - [cached since 3.629s ago] (8,)
2025-05-09 15:26:20,212 - sqlalchemy.engine.Engine - INFO - SELECT roles.id AS roles_id, roles.name AS roles_name, roles.description AS roles_description, roles.created_at AS roles_created_at 
FROM roles, user_roles 
WHERE ? = user_roles.user_id AND roles.id = user_roles.role_id
2025-05-09 15:26:20,211 - app.utils.jwt_callbacks - INFO - User found: admin
2025-05-09 15:26:20,213 - sqlalchemy.engine.Engine - INFO - [cached since 3.632s ago] (9,)
2025-05-09 15:26:20,214 - sqlalchemy.engine.Engine - INFO - SELECT roles.id AS roles_id, roles.name AS roles_name, roles.description AS roles_description, roles.created_at AS roles_created_at 
FROM roles, user_roles 
WHERE ? = user_roles.user_id AND roles.id = user_roles.role_id
2025-05-09 15:26:20,215 - sqlalchemy.engine.Engine - INFO - SELECT roles.id AS roles_id, roles.name AS roles_name, roles.description AS roles_description, roles.created_at AS roles_created_at 
FROM roles, user_roles 
WHERE ? = user_roles.user_id AND roles.id = user_roles.role_id
2025-05-09 15:26:20,215 - sqlalchemy.engine.Engine - INFO - [cached since 3.635s ago] (1,)
2025-05-09 15:26:20,216 - sqlalchemy.engine.Engine - INFO - [cached since 3.635s ago] (4,)
2025-05-09 15:26:20,217 - sqlalchemy.engine.Engine - INFO - SELECT roles.id AS roles_id, roles.name AS roles_name, roles.description AS roles_description, roles.created_at AS roles_created_at 
FROM roles, user_roles 
WHERE ? = user_roles.user_id AND roles.id = user_roles.role_id
2025-05-09 15:26:20,217 - app.utils.jwt_callbacks - INFO - User roles: ['admin']
2025-05-09 15:26:20,218 - sqlalchemy.engine.Engine - INFO - [cached since 3.638s ago] (5,)
2025-05-09 15:26:20,219 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions, role_permissions 
WHERE ? = role_permissions.role_id AND permissions.id = role_permissions.permission_id
2025-05-09 15:26:20,220 - sqlalchemy.engine.Engine - INFO - SELECT roles.id AS roles_id, roles.name AS roles_name, roles.description AS roles_description, roles.created_at AS roles_created_at 
FROM roles, user_roles 
WHERE ? = user_roles.user_id AND roles.id = user_roles.role_id
2025-05-09 15:26:20,221 - sqlalchemy.engine.Engine - INFO - [cached since 24.12s ago] (1,)
2025-05-09 15:26:20,221 - sqlalchemy.engine.Engine - INFO - [cached since 3.641s ago] (6,)
2025-05-09 15:26:20,223 - sqlalchemy.engine.Engine - INFO - SELECT roles.id AS roles_id, roles.name AS roles_name, roles.description AS roles_description, roles.created_at AS roles_created_at 
FROM roles, user_roles 
WHERE ? = user_roles.user_id AND roles.id = user_roles.role_id
2025-05-09 15:26:20,222 - app.utils.jwt_callbacks - INFO - User permissions: ['manage_users', 'manage_roles', 'manage_all_projects', 'manage_project', 'manage_all_tasks', 'manage_task', 'view_project', 'view_task', 'manage_resources', 'manage_risks', 'view_reports', 'create_task', 'assign_task', 'change_project_status', 'change_task_status', 'create_project']
2025-05-09 15:26:20,224 - sqlalchemy.engine.Engine - INFO - [cached since 3.644s ago] (7,)
2025-05-09 15:26:20,227 - sqlalchemy.engine.Engine - INFO - SELECT roles.id AS roles_id, roles.name AS roles_name, roles.description AS roles_description, roles.created_at AS roles_created_at 
FROM roles, user_roles 
WHERE ? = user_roles.user_id AND roles.id = user_roles.role_id
2025-05-09 15:26:20,225 - app.utils.jwt_callbacks - INFO - Checking if token 051ad551-75b6-4246-8deb-a3228d35e4e4 is in blocklist
2025-05-09 15:26:20,228 - sqlalchemy.engine.Engine - INFO - [cached since 3.648s ago] (2,)
2025-05-09 15:26:20,229 - sqlalchemy.engine.Engine - INFO - SELECT token_blacklist.id AS token_blacklist_id, token_blacklist.jti AS token_blacklist_jti, token_blacklist.token_type AS token_blacklist_token_type, token_blacklist.user_id AS token_blacklist_user_id, token_blacklist.revoked_at AS token_blacklist_revoked_at, token_blacklist.expires_at AS token_blacklist_expires_at 
FROM token_blacklist 
WHERE token_blacklist.jti = ?
 LIMIT ? OFFSET ?
2025-05-09 15:26:20,231 - sqlalchemy.engine.Engine - INFO - SELECT roles.id AS roles_id, roles.name AS roles_name, roles.description AS roles_description, roles.created_at AS roles_created_at 
FROM roles, user_roles 
WHERE ? = user_roles.user_id AND roles.id = user_roles.role_id
2025-05-09 15:26:20,231 - sqlalchemy.engine.Engine - INFO - [cached since 3.674s ago] ('051ad551-75b6-4246-8deb-a3228d35e4e4', 1, 0)
2025-05-09 15:26:20,232 - sqlalchemy.engine.Engine - INFO - [cached since 3.651s ago] (3,)
2025-05-09 15:26:20,233 - app.utils.jwt_callbacks - INFO - Token 051ad551-75b6-4246-8deb-a3228d35e4e4 is valid
2025-05-09 15:26:20,233 - app.routes.projects - INFO - 返回 9 个可选的项目负责人
2025-05-09 15:26:20,236 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-05-09 15:26:20,235 - app.utils.jwt_callbacks - INFO - Verifying token
2025-05-09 15:26:20,237 - werkzeug - INFO - 127.0.0.1 - - [09/May/2025 15:26:20] "GET /api/project-managers?bypass_jwt=true HTTP/1.1" 200 -
2025-05-09 15:26:20,237 - app.utils.jwt_callbacks - INFO - JWT Header: {'alg': 'HS256', 'typ': 'JWT'}
2025-05-09 15:26:20,239 - app.utils.jwt_callbacks - INFO - JWT Data: {'fresh': False, 'iat': 1746775578, 'jti': '051ad551-75b6-4246-8deb-a3228d35e4e4', 'type': 'access', 'sub': 1, 'nbf': 1746775578, 'csrf': 'IjY2NjEzOWExZTRmODhkZmYzMDRlMjQ2OTcyOTI1ODM4YjQzMWVlZDki.aB2uGg.jgVFJQK5Nco9wCP7hwxW73ebrE0', 'exp': 1746779178, 'aud': 'task_management_system', 'user_claims': {'username': 'admin', 'roles': ['admin'], 'permissions': ['manage_users', 'manage_roles', 'manage_all_projects', 'manage_project', 'manage_all_tasks', 'manage_task', 'view_project', 'view_task', 'manage_resources', 'manage_risks', 'view_reports', 'create_task', 'assign_task', 'change_project_status', 'change_task_status', 'create_project'], 'is_active': True}, 'roles': ['admin']}
2025-05-09 15:26:20,240 - app.utils.jwt_callbacks - INFO - Token time difference: -2.240576 seconds
2025-05-09 15:26:20,241 - app.utils.jwt_callbacks - INFO - Token verification successful
2025-05-09 15:26:20,243 - app.utils.jwt_callbacks - INFO - Looking up user with identity: 1
2025-05-09 15:26:20,244 - app.utils.jwt_callbacks - INFO - User found: admin
2025-05-09 15:26:20,244 - app.utils.jwt_callbacks - INFO - User roles: ['admin']
2025-05-09 15:26:20,245 - app.utils.jwt_callbacks - INFO - User permissions: ['manage_users', 'manage_roles', 'manage_all_projects', 'manage_project', 'manage_all_tasks', 'manage_task', 'view_project', 'view_task', 'manage_resources', 'manage_risks', 'view_reports', 'create_task', 'assign_task', 'change_project_status', 'change_task_status', 'create_project']
2025-05-09 15:26:20,245 - app - INFO - Dashboard access with user ID: 1
2025-05-09 15:26:20,246 - app - INFO - Token found in: cookies
2025-05-09 15:26:20,248 - app - INFO - Dashboard context user_data: {'id': 1, 'username': 'admin', 'email': 'admin@example.com', 'name': '管理员', 'is_active': True, 'created_at': '2025-05-07T01:07:21.773527', 'last_login': '2025-05-09T07:26:18.783070', 'roles': ['admin'], 'permissions': ['manage_project', 'create_task', 'manage_all_tasks', 'manage_all_projects', 'manage_users', 'manage_task', 'view_task', 'manage_risks', 'view_project', 'view_reports', 'manage_roles', 'change_project_status', 'create_project', 'manage_resources', 'change_task_status', 'assign_task']}
2025-05-09 15:26:20,249 - app - INFO - 用户 admin 的角色: ['admin']
2025-05-09 15:26:20,250 - app - INFO - 用户 admin 的权限: ['manage_project', 'create_task', 'manage_all_tasks', 'manage_all_projects', 'manage_users', 'manage_task', 'view_task', 'manage_risks', 'view_project', 'view_reports', 'manage_roles', 'change_project_status', 'create_project', 'manage_resources', 'change_task_status', 'assign_task']
2025-05-09 15:26:20,250 - app - INFO - 用户 admin - 是否管理员: True, 是否项目经理: False
2025-05-09 15:26:20,252 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-05-09 15:26:20,253 - werkzeug - INFO - 127.0.0.1 - - [09/May/2025 15:26:20] "GET /main/dashboard HTTP/1.1" 200 -
2025-05-09 15:27:54,936 - app - INFO - File logging handler initialized successfully
2025-05-09 15:27:54,936 - app - INFO - Console logging handler initialized successfully
2025-05-09 15:27:54,936 - app - INFO - Application logging configuration completed
2025-05-09 15:27:54,937 - app - INFO - Development configuration initialized
2025-05-09 15:27:54,967 - app - INFO - Logging setup completed successfully
2025-05-09 15:27:55,220 - app - INFO - 已注册的路由:
2025-05-09 15:27:55,220 - app - INFO - 路由: /static/<path:filename> - 方法: {'HEAD', 'OPTIONS', 'GET'} - 终端: static
2025-05-09 15:27:55,221 - app - INFO - 路由: /api/users/<int:user_id> - 方法: {'HEAD', 'OPTIONS', 'GET', 'DELETE', 'PUT', 'POST'} - 终端: user_api_exempt.user_api_exempt_route
2025-05-09 15:27:55,221 - app - INFO - 路由: /api/users - 方法: {'HEAD', 'OPTIONS', 'GET', 'DELETE', 'PUT', 'POST'} - 终端: user_api_exempt.user_api_exempt_route
2025-05-09 15:27:55,221 - app - INFO - 路由: /tasks/<int:task_id>/dependencies/<int:dependency_id>/gantt - 方法: {'DELETE', 'OPTIONS'} - 终端: task_api_exempt.task_api_exempt_route
2025-05-09 15:27:55,222 - app - INFO - 路由: /tasks/<int:task_id>/gantt - 方法: {'OPTIONS', 'PUT'} - 终端: task_api_exempt.task_api_exempt_route
2025-05-09 15:27:55,222 - app - INFO - 路由: /tasks/project/<int:project_id>/gantt - 方法: {'HEAD', 'OPTIONS', 'GET'} - 终端: task_api_exempt.task_api_exempt_route
2025-05-09 15:27:55,223 - app - INFO - 路由: /tasks/project/<int:project_id>/gantt/data - 方法: {'HEAD', 'OPTIONS', 'GET'} - 终端: task_api_exempt.task_api_exempt_route
2025-05-09 15:27:55,223 - app - INFO - 路由: /api/tasks/<int:task_id>/no_csrf - 方法: {'HEAD', 'OPTIONS', 'GET', 'DELETE', 'PUT', 'POST'} - 终端: task_api_exempt.task_api_exempt_route
2025-05-09 15:27:55,223 - app - INFO - 路由: /api/tasks/<int:task_id> - 方法: {'HEAD', 'OPTIONS', 'GET', 'DELETE', 'PUT', 'POST'} - 终端: task_api_exempt.task_api_exempt_route
2025-05-09 15:27:55,224 - app - INFO - 路由: /tasks/dependencies/gantt - 方法: {'OPTIONS', 'POST'} - 终端: task_api_exempt.task_api_exempt_route
2025-05-09 15:27:55,224 - app - INFO - 路由: /api/tasks - 方法: {'HEAD', 'OPTIONS', 'GET', 'DELETE', 'PUT', 'POST'} - 终端: task_api_exempt.task_api_exempt_route
2025-05-09 15:27:55,224 - app - INFO - 路由: /login - 方法: {'HEAD', 'OPTIONS', 'GET'} - 终端: auth.login_page
2025-05-09 15:27:55,225 - app - INFO - 路由: /login - 方法: {'OPTIONS', 'POST'} - 终端: auth.login
2025-05-09 15:27:55,225 - app - INFO - 路由: /register - 方法: {'HEAD', 'OPTIONS', 'GET'} - 终端: auth.register_page
2025-05-09 15:27:55,226 - app - INFO - 路由: /register - 方法: {'OPTIONS', 'POST'} - 终端: auth.register
2025-05-09 15:27:55,226 - app - INFO - 路由: /logout - 方法: {'GET', 'HEAD', 'OPTIONS', 'POST'} - 终端: auth.logout
2025-05-09 15:27:55,226 - app - INFO - 路由: /refresh - 方法: {'OPTIONS', 'POST'} - 终端: auth.refresh
2025-05-09 15:27:55,226 - app - INFO - 路由: /profile - 方法: {'HEAD', 'OPTIONS', 'GET'} - 终端: auth.profile
2025-05-09 15:27:55,228 - app - INFO - 路由: /profile - 方法: {'OPTIONS', 'PUT'} - 终端: auth.update_profile
2025-05-09 15:27:55,228 - app - INFO - 路由: /users - 方法: {'HEAD', 'OPTIONS', 'GET'} - 终端: auth.get_users
2025-05-09 15:27:55,228 - app - INFO - 路由: /users/<int:user_id> - 方法: {'HEAD', 'OPTIONS', 'GET'} - 终端: auth.get_user_by_id
2025-05-09 15:27:55,228 - app - INFO - 路由: /update_user/<int:user_id> - 方法: {'OPTIONS', 'PUT'} - 终端: auth.update_user
2025-05-09 15:27:55,229 - app - INFO - 路由: /roles - 方法: {'HEAD', 'OPTIONS', 'GET'} - 终端: auth.get_roles
2025-05-09 15:27:55,229 - app - INFO - 路由: /permissions - 方法: {'HEAD', 'OPTIONS', 'GET'} - 终端: auth.get_permissions
2025-05-09 15:27:55,229 - app - INFO - 路由: /permissions - 方法: {'OPTIONS', 'POST'} - 终端: auth.create_permission
2025-05-09 15:27:55,229 - app - INFO - 路由: /permissions/<int:permission_id> - 方法: {'HEAD', 'OPTIONS', 'GET'} - 终端: auth.get_permission
2025-05-09 15:27:55,230 - app - INFO - 路由: /permissions/<int:permission_id> - 方法: {'OPTIONS', 'PUT'} - 终端: auth.update_permission
2025-05-09 15:27:55,230 - app - INFO - 路由: /permissions/<int:permission_id> - 方法: {'DELETE', 'OPTIONS'} - 终端: auth.delete_permission
2025-05-09 15:27:55,231 - app - INFO - 路由: /roles - 方法: {'OPTIONS', 'POST'} - 终端: auth.create_role
2025-05-09 15:27:55,231 - app - INFO - 路由: /roles/<int:role_id> - 方法: {'HEAD', 'OPTIONS', 'GET'} - 终端: auth.get_role
2025-05-09 15:27:55,231 - app - INFO - 路由: /roles/<int:role_id>/permissions - 方法: {'OPTIONS', 'PUT'} - 终端: auth.update_role_permissions
2025-05-09 15:27:55,232 - app - INFO - 路由: /roles/<int:role_id> - 方法: {'DELETE', 'OPTIONS'} - 终端: auth.delete_role
2025-05-09 15:27:55,232 - app - INFO - 路由: /dashboard - 方法: {'HEAD', 'OPTIONS', 'GET'} - 终端: auth.dashboard
2025-05-09 15:27:55,232 - app - INFO - 路由: /dashboard/redirect - 方法: {'GET', 'HEAD', 'OPTIONS', 'POST'} - 终端: auth.dashboard_redirect
2025-05-09 15:27:55,234 - app - INFO - 路由: /create_test_user - 方法: {'OPTIONS', 'POST'} - 终端: auth.create_test_user
2025-05-09 15:27:55,234 - app - INFO - 路由: /check - 方法: {'HEAD', 'OPTIONS', 'GET'} - 终端: auth.check_auth
2025-05-09 15:27:55,234 - app - INFO - 路由: /create_test_project - 方法: {'OPTIONS', 'POST'} - 终端: auth.create_test_project
2025-05-09 15:27:55,234 - app - INFO - 路由: /logout_all - 方法: {'OPTIONS', 'POST'} - 终端: auth.logout_all
2025-05-09 15:27:55,235 - app - INFO - 路由: /dashboard/data - 方法: {'HEAD', 'OPTIONS', 'GET'} - 终端: auth.dashboard_data
2025-05-09 15:27:55,235 - app - INFO - 路由: /check_token - 方法: {'HEAD', 'OPTIONS', 'GET'} - 终端: auth.check_token
2025-05-09 15:27:55,235 - app - INFO - 路由: /create_user - 方法: {'OPTIONS', 'POST'} - 终端: auth.create_user
2025-05-09 15:27:55,236 - app - INFO - 路由: /user_info - 方法: {'HEAD', 'OPTIONS', 'GET'} - 终端: auth.get_user_info
2025-05-09 15:27:55,236 - app - INFO - 路由: /user/<int:user_id> - 方法: {'DELETE', 'OPTIONS'} - 终端: auth.delete_user
2025-05-09 15:27:55,236 - app - INFO - 路由: /users/<int:user_id>/roles - 方法: {'HEAD', 'OPTIONS', 'GET'} - 终端: auth.get_user_roles
2025-05-09 15:27:55,237 - app - INFO - 路由: /users/<int:user_id>/roles - 方法: {'OPTIONS', 'PUT'} - 终端: auth.update_user_roles
2025-05-09 15:27:55,237 - app - INFO - 路由: /users/<int:user_id>/notifications - 方法: {'HEAD', 'OPTIONS', 'GET'} - 终端: auth.get_user_notifications
2025-05-09 15:27:55,237 - app - INFO - 路由: /notifications/<int:notification_id>/read - 方法: {'OPTIONS', 'PUT'} - 终端: auth.mark_notification_as_read
2025-05-09 15:27:55,238 - app - INFO - 路由: /notifications/read_all - 方法: {'OPTIONS', 'PUT'} - 终端: auth.mark_all_notifications_as_read
2025-05-09 15:27:55,238 - app - INFO - 路由: /change-password - 方法: {'OPTIONS', 'POST'} - 终端: auth.change_password
2025-05-09 15:27:55,238 - app - INFO - 路由: /reset-password - 方法: {'HEAD', 'OPTIONS', 'GET'} - 终端: auth.reset_password_page
2025-05-09 15:27:55,238 - app - INFO - 路由: /verify-email/confirm - 方法: {'HEAD', 'OPTIONS', 'GET'} - 终端: auth.verify_email_confirm_page
2025-05-09 15:27:55,239 - app - INFO - 路由: /auth/csrf-token - 方法: {'HEAD', 'OPTIONS', 'GET'} - 终端: auth.get_csrf_token
2025-05-09 15:27:55,239 - app - INFO - 路由: /api/users/<int:user_id> - 方法: {'OPTIONS', 'PUT'} - 终端: auth.api_update_user
2025-05-09 15:27:55,239 - app - INFO - 路由: /api/users/<int:user_id> - 方法: {'DELETE', 'OPTIONS'} - 终端: auth.api_delete_user
2025-05-09 15:27:55,240 - app - INFO - 路由: /api/users - 方法: {'HEAD', 'OPTIONS', 'GET'} - 终端: auth.api_get_users
2025-05-09 15:27:55,241 - app - INFO - 路由: /api/users - 方法: {'OPTIONS', 'POST'} - 终端: auth.api_create_user
2025-05-09 15:27:55,241 - app - INFO - 路由: /auth/users/<int:user_id> - 方法: {'HEAD', 'OPTIONS', 'GET'} - 终端: auth.get_user_details
2025-05-09 15:27:55,242 - app - INFO - 路由: /api/users/<int:user_id> - 方法: {'HEAD', 'OPTIONS', 'GET', 'DELETE', 'PUT'} - 终端: auth.api_user_operations
2025-05-09 15:27:55,242 - app - INFO - 路由: /auth/user-csrf-token - 方法: {'HEAD', 'OPTIONS', 'GET'} - 终端: auth.get_user_csrf_token
2025-05-09 15:27:55,243 - app - INFO - 路由: /main/ - 方法: {'HEAD', 'OPTIONS', 'GET'} - 终端: main.index
2025-05-09 15:27:55,243 - app - INFO - 路由: /main/dashboard - 方法: {'HEAD', 'OPTIONS', 'GET'} - 终端: main.dashboard
2025-05-09 15:27:55,243 - app - INFO - 路由: /main/check_token - 方法: {'HEAD', 'OPTIONS', 'GET'} - 终端: main.check_token
2025-05-09 15:27:55,244 - app - INFO - 路由: /main/projects - 方法: {'HEAD', 'OPTIONS', 'GET'} - 终端: main.projects
2025-05-09 15:27:55,244 - app - INFO - 路由: /main/tasks - 方法: {'HEAD', 'OPTIONS', 'GET'} - 终端: main.tasks
2025-05-09 15:27:55,244 - app - INFO - 路由: /main/risks - 方法: {'HEAD', 'OPTIONS', 'GET'} - 终端: main.risks
2025-05-09 15:27:55,245 - app - INFO - 路由: /main/reports - 方法: {'HEAD', 'OPTIONS', 'GET'} - 终端: main.reports
2025-05-09 15:27:55,246 - app - INFO - 路由: /main/resources - 方法: {'HEAD', 'OPTIONS', 'GET'} - 终端: main.resources
2025-05-09 15:27:55,246 - app - INFO - 路由: /main/profile - 方法: {'HEAD', 'OPTIONS', 'GET'} - 终端: main.profile
2025-05-09 15:27:55,246 - app - INFO - 路由: /main/system/status - 方法: {'HEAD', 'OPTIONS', 'GET'} - 终端: main.system_status
2025-05-09 15:27:55,247 - app - INFO - 路由: /main/api/dashboard/data - 方法: {'HEAD', 'OPTIONS', 'GET'} - 终端: main.get_dashboard_data
2025-05-09 15:27:55,248 - app - INFO - 路由: /main/test - 方法: {'HEAD', 'OPTIONS', 'GET'} - 终端: main.test_route
2025-05-09 15:27:55,249 - app - INFO - 路由: /main/projects/detail/<int:project_id> - 方法: {'HEAD', 'OPTIONS', 'GET'} - 终端: main.project_detail_redirect
2025-05-09 15:27:55,249 - app - INFO - 路由: /main/users - 方法: {'HEAD', 'OPTIONS', 'GET'} - 终端: main.users
2025-05-09 15:27:55,249 - app - INFO - 路由: /main/debug/projects - 方法: {'HEAD', 'OPTIONS', 'GET'} - 终端: main.debug_projects
2025-05-09 15:27:55,249 - app - INFO - 路由: /main/simple/projects - 方法: {'HEAD', 'OPTIONS', 'GET'} - 终端: main.simple_projects
2025-05-09 15:27:55,251 - app - INFO - 路由: /main/static-test - 方法: {'HEAD', 'OPTIONS', 'GET'} - 终端: main.static_test
2025-05-09 15:27:55,251 - app - INFO - 路由: /main/print-projects - 方法: {'HEAD', 'OPTIONS', 'GET'} - 终端: main.print_projects
2025-05-09 15:27:55,252 - app - INFO - 路由: /main/bypass-projects - 方法: {'HEAD', 'OPTIONS', 'GET'} - 终端: main.bypass_projects
2025-05-09 15:27:55,252 - app - INFO - 路由: /main/debug-projects - 方法: {'HEAD', 'OPTIONS', 'GET'} - 终端: main.debug_projects_api
2025-05-09 15:27:55,252 - app - INFO - 路由: /projects/list - 方法: {'HEAD', 'OPTIONS', 'GET'} - 终端: projects.project_list
2025-05-09 15:27:55,252 - app - INFO - 路由: /projects/ - 方法: {'HEAD', 'OPTIONS', 'GET'} - 终端: projects.get_projects
2025-05-09 15:27:55,253 - app - INFO - 路由: /projects/ - 方法: {'OPTIONS', 'POST'} - 终端: projects.create_project
2025-05-09 15:27:55,253 - app - INFO - 路由: /projects/<int:project_id> - 方法: {'HEAD', 'OPTIONS', 'GET'} - 终端: projects.get_project
2025-05-09 15:27:55,253 - app - INFO - 路由: /projects/<int:project_id> - 方法: {'OPTIONS', 'PUT'} - 终端: projects.update_project
2025-05-09 15:27:55,254 - app - INFO - 路由: /projects/<int:project_id> - 方法: {'DELETE', 'OPTIONS'} - 终端: projects.delete_project
2025-05-09 15:27:55,254 - app - INFO - 路由: /projects/<int:project_id>/members - 方法: {'HEAD', 'OPTIONS', 'GET'} - 终端: projects.get_project_members
2025-05-09 15:27:55,256 - app - INFO - 路由: /projects/<int:project_id>/members - 方法: {'OPTIONS', 'POST'} - 终端: projects.add_project_member
2025-05-09 15:27:55,256 - app - INFO - 路由: /projects/<int:project_id>/members/<int:user_id> - 方法: {'DELETE', 'OPTIONS'} - 终端: projects.remove_project_member
2025-05-09 15:27:55,256 - app - INFO - 路由: /projects/detail/<int:project_id> - 方法: {'HEAD', 'OPTIONS', 'GET'} - 终端: projects.detail
2025-05-09 15:27:55,257 - app - INFO - 路由: /projects/api/detail/<int:project_id> - 方法: {'HEAD', 'OPTIONS', 'GET'} - 终端: projects.detail_api
2025-05-09 15:27:55,257 - app - INFO - 路由: /projects/api/projects/<int:project_id> - 方法: {'HEAD', 'OPTIONS', 'GET'} - 终端: projects.get_project_api
2025-05-09 15:27:55,258 - app - INFO - 路由: /projects/api/projects/<int:project_id> - 方法: {'OPTIONS', 'PUT'} - 终端: projects.update_project_api
2025-05-09 15:27:55,258 - app - INFO - 路由: /projects/api/projects/<int:project_id> - 方法: {'DELETE', 'OPTIONS'} - 终端: projects.delete_project_api
2025-05-09 15:27:55,258 - app - INFO - 路由: /projects/api/auth/projects - 方法: {'HEAD', 'OPTIONS', 'GET'} - 终端: projects.get_projects_api
2025-05-09 15:27:55,259 - app - INFO - 路由: /projects/api/auth/projects/<int:project_id> - 方法: {'HEAD', 'OPTIONS', 'GET'} - 终端: projects.get_project_auth_api
2025-05-09 15:27:55,259 - app - INFO - 路由: /projects/api/noauth/projects/<int:project_id> - 方法: {'HEAD', 'OPTIONS', 'GET', 'DELETE', 'PUT'} - 终端: projects.get_project_noauth
2025-05-09 15:27:55,259 - app - INFO - 路由: /projects/api/auth/projects - 方法: {'OPTIONS', 'POST'} - 终端: projects.create_project_auth
2025-05-09 15:27:55,259 - app - INFO - 路由: /projects/api/project-managers - 方法: {'HEAD', 'OPTIONS', 'GET'} - 终端: projects.get_project_managers
2025-05-09 15:27:55,260 - app - INFO - 路由: /projects/api/projects - 方法: {'HEAD', 'OPTIONS', 'GET'} - 终端: projects.get_all_projects_api
2025-05-09 15:27:55,260 - app - INFO - 路由: /projects/api/active-projects - 方法: {'HEAD', 'OPTIONS', 'GET'} - 终端: projects.get_active_projects_api
2025-05-09 15:27:55,261 - app - INFO - 路由: /projects/api/projects/<int:project_id>/members - 方法: {'HEAD', 'OPTIONS', 'GET'} - 终端: projects.get_project_members_api
2025-05-09 15:27:55,261 - app - INFO - 路由: /list - 方法: {'HEAD', 'OPTIONS', 'GET'} - 终端: project_root.project_list
2025-05-09 15:27:55,261 - app - INFO - 路由: / - 方法: {'HEAD', 'OPTIONS', 'GET'} - 终端: project_root.get_projects
2025-05-09 15:27:55,262 - app - INFO - 路由: / - 方法: {'OPTIONS', 'POST'} - 终端: project_root.create_project
2025-05-09 15:27:55,262 - app - INFO - 路由: /<int:project_id> - 方法: {'HEAD', 'OPTIONS', 'GET'} - 终端: project_root.get_project
2025-05-09 15:27:55,263 - app - INFO - 路由: /<int:project_id> - 方法: {'OPTIONS', 'PUT'} - 终端: project_root.update_project
2025-05-09 15:27:55,263 - app - INFO - 路由: /<int:project_id> - 方法: {'DELETE', 'OPTIONS'} - 终端: project_root.delete_project
2025-05-09 15:27:55,265 - app - INFO - 路由: /<int:project_id>/members - 方法: {'HEAD', 'OPTIONS', 'GET'} - 终端: project_root.get_project_members
2025-05-09 15:27:55,265 - app - INFO - 路由: /<int:project_id>/members - 方法: {'OPTIONS', 'POST'} - 终端: project_root.add_project_member
2025-05-09 15:27:55,266 - app - INFO - 路由: /<int:project_id>/members/<int:user_id> - 方法: {'DELETE', 'OPTIONS'} - 终端: project_root.remove_project_member
2025-05-09 15:27:55,266 - app - INFO - 路由: /detail/<int:project_id> - 方法: {'HEAD', 'OPTIONS', 'GET'} - 终端: project_root.detail
2025-05-09 15:27:55,266 - app - INFO - 路由: /api/detail/<int:project_id> - 方法: {'HEAD', 'OPTIONS', 'GET'} - 终端: project_root.detail_api
2025-05-09 15:27:55,267 - app - INFO - 路由: /api/projects/<int:project_id> - 方法: {'HEAD', 'OPTIONS', 'GET'} - 终端: project_root.get_project_api
2025-05-09 15:27:55,267 - app - INFO - 路由: /api/projects/<int:project_id> - 方法: {'OPTIONS', 'PUT'} - 终端: project_root.update_project_api
2025-05-09 15:27:55,267 - app - INFO - 路由: /api/projects/<int:project_id> - 方法: {'DELETE', 'OPTIONS'} - 终端: project_root.delete_project_api
2025-05-09 15:27:55,268 - app - INFO - 路由: /api/auth/projects - 方法: {'HEAD', 'OPTIONS', 'GET'} - 终端: project_root.get_projects_api
2025-05-09 15:27:55,268 - app - INFO - 路由: /api/auth/projects/<int:project_id> - 方法: {'HEAD', 'OPTIONS', 'GET'} - 终端: project_root.get_project_auth_api
2025-05-09 15:27:55,268 - app - INFO - 路由: /api/noauth/projects/<int:project_id> - 方法: {'HEAD', 'OPTIONS', 'GET', 'DELETE', 'PUT'} - 终端: project_root.get_project_noauth
2025-05-09 15:27:55,268 - app - INFO - 路由: /api/auth/projects - 方法: {'OPTIONS', 'POST'} - 终端: project_root.create_project_auth
2025-05-09 15:27:55,269 - app - INFO - 路由: /api/project-managers - 方法: {'HEAD', 'OPTIONS', 'GET'} - 终端: project_root.get_project_managers
2025-05-09 15:27:55,269 - app - INFO - 路由: /api/projects - 方法: {'HEAD', 'OPTIONS', 'GET'} - 终端: project_root.get_all_projects_api
2025-05-09 15:27:55,269 - app - INFO - 路由: /api/active-projects - 方法: {'HEAD', 'OPTIONS', 'GET'} - 终端: project_root.get_active_projects_api
2025-05-09 15:27:55,270 - app - INFO - 路由: /api/projects/<int:project_id>/members - 方法: {'HEAD', 'OPTIONS', 'GET'} - 终端: project_root.get_project_members_api
2025-05-09 15:27:55,270 - app - INFO - 路由: /tasks/ - 方法: {'HEAD', 'OPTIONS', 'GET'} - 终端: tasks.get_tasks
2025-05-09 15:27:55,270 - app - INFO - 路由: /tasks/ - 方法: {'OPTIONS', 'POST'} - 终端: tasks.create_task
2025-05-09 15:27:55,270 - app - INFO - 路由: /tasks/<int:task_id> - 方法: {'HEAD', 'OPTIONS', 'GET'} - 终端: tasks.get_task
2025-05-09 15:27:55,271 - app - INFO - 路由: /tasks/<int:task_id> - 方法: {'OPTIONS', 'PUT'} - 终端: tasks.update_task
2025-05-09 15:27:55,271 - app - INFO - 路由: /tasks/<int:task_id> - 方法: {'DELETE', 'OPTIONS'} - 终端: tasks.delete_task
2025-05-09 15:27:55,272 - app - INFO - 路由: /tasks/<int:task_id>/comments - 方法: {'HEAD', 'OPTIONS', 'GET'} - 终端: tasks.get_task_comments
2025-05-09 15:27:55,272 - app - INFO - 路由: /tasks/<int:task_id>/comments - 方法: {'OPTIONS', 'POST'} - 终端: tasks.add_task_comment
2025-05-09 15:27:55,272 - app - INFO - 路由: /tasks/<int:task_id>/attachments - 方法: {'HEAD', 'OPTIONS', 'GET'} - 终端: tasks.get_task_attachments
2025-05-09 15:27:55,274 - app - INFO - 路由: /tasks/<int:task_id>/attachments - 方法: {'OPTIONS', 'POST'} - 终端: tasks.add_task_attachment
2025-05-09 15:27:55,274 - app - INFO - 路由: /tasks/<int:task_id>/resources - 方法: {'HEAD', 'OPTIONS', 'GET'} - 终端: tasks.get_task_resources
2025-05-09 15:27:55,275 - app - INFO - 路由: /tasks/<int:task_id>/subtasks - 方法: {'HEAD', 'OPTIONS', 'GET'} - 终端: tasks.get_subtasks
2025-05-09 15:27:55,275 - app - INFO - 路由: /tasks/<int:task_id>/subtasks - 方法: {'OPTIONS', 'POST'} - 终端: tasks.create_subtask
2025-05-09 15:27:55,275 - app - INFO - 路由: /tasks/<int:task_id>/dependencies - 方法: {'HEAD', 'OPTIONS', 'GET'} - 终端: tasks.get_dependencies
2025-05-09 15:27:55,276 - app - INFO - 路由: /tasks/<int:task_id>/dependencies - 方法: {'OPTIONS', 'POST'} - 终端: tasks.add_dependency
2025-05-09 15:27:55,276 - app - INFO - 路由: /tasks/<int:task_id>/logs - 方法: {'HEAD', 'OPTIONS', 'GET'} - 终端: tasks.get_task_logs
2025-05-09 15:27:55,276 - app - INFO - 路由: /tasks/<int:task_id>/logs - 方法: {'OPTIONS', 'POST'} - 终端: tasks.add_task_log
2025-05-09 15:27:55,277 - app - INFO - 路由: /tasks/project/<int:project_id>/gantt - 方法: {'HEAD', 'OPTIONS', 'GET'} - 终端: tasks.gantt_chart
2025-05-09 15:27:55,277 - app - INFO - 路由: /tasks/project/<int:project_id>/gantt/data - 方法: {'HEAD', 'OPTIONS', 'GET'} - 终端: tasks.get_gantt_data
2025-05-09 15:27:55,277 - app - INFO - 路由: /tasks/<int:task_id>/gantt - 方法: {'OPTIONS', 'PUT'} - 终端: tasks.update_gantt_task
2025-05-09 15:27:55,278 - app - INFO - 路由: /tasks/dependencies/gantt - 方法: {'OPTIONS', 'POST'} - 终端: tasks.create_gantt_dependency
2025-05-09 15:27:55,278 - app - INFO - 路由: /tasks/<int:task_id>/dependencies/<int:dependency_id>/gantt - 方法: {'DELETE', 'OPTIONS'} - 终端: tasks.delete_gantt_dependency
2025-05-09 15:27:55,278 - app - INFO - 路由: /tasks/<int:task_id>/status - 方法: {'OPTIONS', 'PUT'} - 终端: tasks.update_task_status
2025-05-09 15:27:55,279 - app - INFO - 路由: /tasks/api/tasks/dependencies - 方法: {'OPTIONS', 'POST'} - 终端: tasks.add_task_dependency
2025-05-09 15:27:55,279 - app - INFO - 路由: /tasks/<int:task_id>/detail - 方法: {'HEAD', 'OPTIONS', 'GET'} - 终端: tasks.task_detail_api
2025-05-09 15:27:55,279 - app - INFO - 路由: /tasks/api/auth/tasks/<int:task_id>/detail - 方法: {'HEAD', 'OPTIONS', 'GET'} - 终端: tasks.task_detail_api_auth
2025-05-09 15:27:55,281 - app - INFO - 路由: /tasks/<int:task_id>/view - 方法: {'HEAD', 'OPTIONS', 'GET'} - 终端: tasks.task_detail_page
2025-05-09 15:27:55,281 - app - INFO - 路由: /tasks/<int:task_id>/edit - 方法: {'HEAD', 'OPTIONS', 'GET'} - 终端: tasks.edit_task_page
2025-05-09 15:27:55,282 - app - INFO - 路由: /tasks/api/auth/tasks/<int:task_id>/attachments - 方法: {'OPTIONS', 'POST'} - 终端: tasks.add_task_attachment_auth
2025-05-09 15:27:55,282 - app - INFO - 路由: /tasks/api/auth/tasks/<int:task_id>/attachments/<int:attachment_id>/download - 方法: {'HEAD', 'OPTIONS', 'GET'} - 终端: tasks.download_attachment_auth
2025-05-09 15:27:55,282 - app - INFO - 路由: /tasks/api/tasks/<int:task_id>/attachments - 方法: {'OPTIONS', 'POST'} - 终端: tasks.upload_attachment
2025-05-09 15:27:55,283 - app - INFO - 路由: /tasks/api/tasks/<int:task_id>/attachments/<int:attachment_id>/download - 方法: {'HEAD', 'OPTIONS', 'GET'} - 终端: tasks.download_attachment
2025-05-09 15:27:55,283 - app - INFO - 路由: /tasks/api/tasks/<int:task_id>/attachments/<int:attachment_id> - 方法: {'DELETE', 'OPTIONS'} - 终端: tasks.delete_attachment
2025-05-09 15:27:55,283 - app - INFO - 路由: /tasks/api/tasks/<int:task_id>/attachments/<int:attachment_id>/versions - 方法: {'OPTIONS', 'POST'} - 终端: tasks.upload_new_version
2025-05-09 15:27:55,283 - app - INFO - 路由: /tasks/api/tasks/<int:task_id>/attachments/<int:attachment_id>/versions - 方法: {'HEAD', 'OPTIONS', 'GET'} - 终端: tasks.get_attachment_versions
2025-05-09 15:27:55,284 - app - INFO - 路由: /tasks/api/tasks/<int:task_id>/risks - 方法: {'HEAD', 'OPTIONS', 'GET'} - 终端: tasks.task_risks_front_path
2025-05-09 15:27:55,284 - app - INFO - 路由: /tasks/<int:task_id>/risks - 方法: {'OPTIONS', 'POST'} - 终端: tasks.create_task_risk_front_path
2025-05-09 15:27:55,284 - app - INFO - 路由: /tasks/api/tasks/<int:task_id>/progress - 方法: {'HEAD', 'OPTIONS', 'GET'} - 终端: tasks.get_task_progress
2025-05-09 15:27:55,284 - app - INFO - 路由: /tasks/api/tasks/<int:task_id>/progress - 方法: {'OPTIONS', 'POST'} - 终端: tasks.update_task_progress
2025-05-09 15:27:55,285 - app - INFO - 路由: /tasks/api/tasks/<int:task_id>/progress/approve - 方法: {'OPTIONS', 'POST'} - 终端: tasks.approve_task_progress
2025-05-09 15:27:55,285 - app - INFO - 路由: /tasks/list - 方法: {'HEAD', 'OPTIONS', 'GET'} - 终端: tasks.task_list
2025-05-09 15:27:55,285 - app - INFO - 路由: /tasks/api/auth/tasks/<int:task_id>/logs - 方法: {'HEAD', 'OPTIONS', 'GET'} - 终端: tasks.get_task_logs_auth
2025-05-09 15:27:55,285 - app - INFO - 路由: /tasks/api/auth/tasks/<int:task_id>/subtasks - 方法: {'HEAD', 'OPTIONS', 'GET'} - 终端: tasks.get_subtasks_auth
2025-05-09 15:27:55,286 - app - INFO - 路由: /tasks/api/auth/tasks/<int:task_id>/comments - 方法: {'HEAD', 'OPTIONS', 'GET'} - 终端: tasks.get_task_comments_auth
2025-05-09 15:27:55,287 - app - INFO - 路由: /tasks/api/auth/tasks/<int:task_id>/attachments - 方法: {'HEAD', 'OPTIONS', 'GET'} - 终端: tasks.get_task_attachments_auth
2025-05-09 15:27:55,287 - app - INFO - 路由: /tasks/api/auth/tasks/<int:task_id>/risks - 方法: {'HEAD', 'OPTIONS', 'GET'} - 终端: tasks.get_task_risks_auth
2025-05-09 15:27:55,288 - app - INFO - 路由: /tasks/api/auth/tasks/<int:task_id>/risks - 方法: {'OPTIONS', 'POST'} - 终端: tasks.create_task_risk_auth
2025-05-09 15:27:55,288 - app - INFO - 路由: /tasks/api/auth/tasks/<int:task_id>/comments - 方法: {'OPTIONS', 'POST'} - 终端: tasks.add_task_comment_auth
2025-05-09 15:27:55,288 - app - INFO - 路由: /tasks/api/tasks/<int:task_id> - 方法: {'OPTIONS', 'PUT'} - 终端: tasks.api_update_task
2025-05-09 15:27:55,288 - app - INFO - 路由: /tasks/api/tasks/<int:task_id>/update_bypass - 方法: {'OPTIONS', 'PUT'} - 终端: tasks.update_task_bypass_csrf
2025-05-09 15:27:55,288 - app - INFO - 路由: /tasks/get-csrf-token - 方法: {'HEAD', 'OPTIONS', 'GET'} - 终端: tasks.get_csrf_token
2025-05-09 15:27:55,290 - app - INFO - 路由: /tasks/api/tasks/<int:task_id>/no_csrf - 方法: {'OPTIONS', 'PUT'} - 终端: tasks.update_task_no_csrf
2025-05-09 15:27:55,290 - app - INFO - 路由: /tasks/api/tasks/<int:task_id>/detail - 方法: {'HEAD', 'OPTIONS', 'GET'} - 终端: tasks.api_tasks_detail
2025-05-09 15:27:55,336 - app - WARNING - team_bp 未定义或无法导入
2025-05-09 15:27:55,456 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-05-09 15:27:55,458 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions 
WHERE permissions.name = ?
 LIMIT ? OFFSET ?
2025-05-09 15:27:55,458 - sqlalchemy.engine.Engine - INFO - [generated in 0.00038s] ('manage_users', 1, 0)
2025-05-09 15:27:55,459 - app.utils.permissions - INFO - 更新权限: manage_users
2025-05-09 15:27:55,461 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions 
WHERE permissions.name = ?
 LIMIT ? OFFSET ?
2025-05-09 15:27:55,461 - sqlalchemy.engine.Engine - INFO - [cached since 0.002428s ago] ('manage_roles', 1, 0)
2025-05-09 15:27:55,461 - app.utils.permissions - INFO - 更新权限: manage_roles
2025-05-09 15:27:55,462 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions 
WHERE permissions.name = ?
 LIMIT ? OFFSET ?
2025-05-09 15:27:55,462 - sqlalchemy.engine.Engine - INFO - [cached since 0.003493s ago] ('manage_all_projects', 1, 0)
2025-05-09 15:27:55,462 - app.utils.permissions - INFO - 更新权限: manage_all_projects
2025-05-09 15:27:55,462 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions 
WHERE permissions.name = ?
 LIMIT ? OFFSET ?
2025-05-09 15:27:55,463 - sqlalchemy.engine.Engine - INFO - [cached since 0.004491s ago] ('manage_project', 1, 0)
2025-05-09 15:27:55,463 - app.utils.permissions - INFO - 更新权限: manage_project
2025-05-09 15:27:55,463 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions 
WHERE permissions.name = ?
 LIMIT ? OFFSET ?
2025-05-09 15:27:55,464 - sqlalchemy.engine.Engine - INFO - [cached since 0.005456s ago] ('manage_all_tasks', 1, 0)
2025-05-09 15:27:55,464 - app.utils.permissions - INFO - 更新权限: manage_all_tasks
2025-05-09 15:27:55,464 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions 
WHERE permissions.name = ?
 LIMIT ? OFFSET ?
2025-05-09 15:27:55,464 - sqlalchemy.engine.Engine - INFO - [cached since 0.006321s ago] ('manage_task', 1, 0)
2025-05-09 15:27:55,465 - app.utils.permissions - INFO - 更新权限: manage_task
2025-05-09 15:27:55,465 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions 
WHERE permissions.name = ?
 LIMIT ? OFFSET ?
2025-05-09 15:27:55,465 - sqlalchemy.engine.Engine - INFO - [cached since 0.007239s ago] ('view_project', 1, 0)
2025-05-09 15:27:55,465 - app.utils.permissions - INFO - 更新权限: view_project
2025-05-09 15:27:55,466 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions 
WHERE permissions.name = ?
 LIMIT ? OFFSET ?
2025-05-09 15:27:55,466 - sqlalchemy.engine.Engine - INFO - [cached since 0.008184s ago] ('view_task', 1, 0)
2025-05-09 15:27:55,466 - app.utils.permissions - INFO - 更新权限: view_task
2025-05-09 15:27:55,467 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions 
WHERE permissions.name = ?
 LIMIT ? OFFSET ?
2025-05-09 15:27:55,467 - sqlalchemy.engine.Engine - INFO - [cached since 0.009871s ago] ('manage_resources', 1, 0)
2025-05-09 15:27:55,469 - app.utils.permissions - INFO - 更新权限: manage_resources
2025-05-09 15:27:55,469 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions 
WHERE permissions.name = ?
 LIMIT ? OFFSET ?
2025-05-09 15:27:55,469 - sqlalchemy.engine.Engine - INFO - [cached since 0.01088s ago] ('manage_risks', 1, 0)
2025-05-09 15:27:55,470 - app.utils.permissions - INFO - 更新权限: manage_risks
2025-05-09 15:27:55,470 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions 
WHERE permissions.name = ?
 LIMIT ? OFFSET ?
2025-05-09 15:27:55,470 - sqlalchemy.engine.Engine - INFO - [cached since 0.01173s ago] ('view_reports', 1, 0)
2025-05-09 15:27:55,470 - app.utils.permissions - INFO - 更新权限: view_reports
2025-05-09 15:27:55,471 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions 
WHERE permissions.name = ?
 LIMIT ? OFFSET ?
2025-05-09 15:27:55,471 - sqlalchemy.engine.Engine - INFO - [cached since 0.01271s ago] ('create_task', 1, 0)
2025-05-09 15:27:55,471 - app.utils.permissions - INFO - 更新权限: create_task
2025-05-09 15:27:55,472 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions 
WHERE permissions.name = ?
 LIMIT ? OFFSET ?
2025-05-09 15:27:55,472 - sqlalchemy.engine.Engine - INFO - [cached since 0.01378s ago] ('create_project', 1, 0)
2025-05-09 15:27:55,472 - app.utils.permissions - INFO - 更新权限: create_project
2025-05-09 15:27:55,474 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions 
WHERE permissions.name = ?
 LIMIT ? OFFSET ?
2025-05-09 15:27:55,474 - sqlalchemy.engine.Engine - INFO - [cached since 0.01618s ago] ('assign_task', 1, 0)
2025-05-09 15:27:55,474 - app.utils.permissions - INFO - 更新权限: assign_task
2025-05-09 15:27:55,475 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions 
WHERE permissions.name = ?
 LIMIT ? OFFSET ?
2025-05-09 15:27:55,475 - sqlalchemy.engine.Engine - INFO - [cached since 0.01737s ago] ('change_project_status', 1, 0)
2025-05-09 15:27:55,475 - app.utils.permissions - INFO - 更新权限: change_project_status
2025-05-09 15:27:55,476 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions 
WHERE permissions.name = ?
 LIMIT ? OFFSET ?
2025-05-09 15:27:55,476 - sqlalchemy.engine.Engine - INFO - [cached since 0.01841s ago] ('change_task_status', 1, 0)
2025-05-09 15:27:55,476 - app.utils.permissions - INFO - 更新权限: change_task_status
2025-05-09 15:27:55,476 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-05-09 15:27:55,478 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-05-09 15:27:55,478 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions
2025-05-09 15:27:55,478 - sqlalchemy.engine.Engine - INFO - [generated in 0.00024s] ()
2025-05-09 15:27:55,479 - sqlalchemy.engine.Engine - INFO - SELECT roles.id AS roles_id, roles.name AS roles_name, roles.description AS roles_description, roles.created_at AS roles_created_at 
FROM roles 
WHERE roles.name = ?
 LIMIT ? OFFSET ?
2025-05-09 15:27:55,479 - sqlalchemy.engine.Engine - INFO - [generated in 0.00027s] ('admin', 1, 0)
2025-05-09 15:27:55,479 - app.utils.permissions - INFO - 更新角色: admin
2025-05-09 15:27:55,481 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions, role_permissions 
WHERE ? = role_permissions.role_id AND permissions.id = role_permissions.permission_id
2025-05-09 15:27:55,481 - sqlalchemy.engine.Engine - INFO - [generated in 0.00029s] (1,)
2025-05-09 15:27:55,483 - app.utils.permissions - INFO - 为管理员角色添加所有权限: 16个
2025-05-09 15:27:55,484 - sqlalchemy.engine.Engine - INFO - SELECT roles.id AS roles_id, roles.name AS roles_name, roles.description AS roles_description, roles.created_at AS roles_created_at 
FROM roles 
WHERE roles.name = ?
 LIMIT ? OFFSET ?
2025-05-09 15:27:55,484 - sqlalchemy.engine.Engine - INFO - [cached since 0.004304s ago] ('manager', 1, 0)
2025-05-09 15:27:55,484 - app.utils.permissions - INFO - 更新角色: manager
2025-05-09 15:27:55,484 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions, role_permissions 
WHERE ? = role_permissions.role_id AND permissions.id = role_permissions.permission_id
2025-05-09 15:27:55,484 - sqlalchemy.engine.Engine - INFO - [cached since 0.003191s ago] (2,)
2025-05-09 15:27:55,484 - app.utils.permissions - INFO - 为角色 manager 添加权限: manage_project
2025-05-09 15:27:55,486 - app.utils.permissions - INFO - 为角色 manager 添加权限: manage_task
2025-05-09 15:27:55,486 - app.utils.permissions - INFO - 为角色 manager 添加权限: view_project
2025-05-09 15:27:55,486 - app.utils.permissions - INFO - 为角色 manager 添加权限: view_task
2025-05-09 15:27:55,487 - app.utils.permissions - INFO - 为角色 manager 添加权限: manage_resources
2025-05-09 15:27:55,487 - app.utils.permissions - INFO - 为角色 manager 添加权限: manage_risks
2025-05-09 15:27:55,487 - app.utils.permissions - INFO - 为角色 manager 添加权限: view_reports
2025-05-09 15:27:55,487 - app.utils.permissions - INFO - 为角色 manager 添加权限: create_project
2025-05-09 15:27:55,487 - app.utils.permissions - INFO - 为角色 manager 添加权限: create_task
2025-05-09 15:27:55,488 - app.utils.permissions - INFO - 为角色 manager 添加权限: assign_task
2025-05-09 15:27:55,488 - app.utils.permissions - INFO - 为角色 manager 添加权限: change_project_status
2025-05-09 15:27:55,488 - app.utils.permissions - INFO - 为角色 manager 添加权限: change_task_status
2025-05-09 15:27:55,489 - sqlalchemy.engine.Engine - INFO - SELECT roles.id AS roles_id, roles.name AS roles_name, roles.description AS roles_description, roles.created_at AS roles_created_at 
FROM roles 
WHERE roles.name = ?
 LIMIT ? OFFSET ?
2025-05-09 15:27:55,489 - sqlalchemy.engine.Engine - INFO - [cached since 0.009406s ago] ('user', 1, 0)
2025-05-09 15:27:55,489 - app.utils.permissions - INFO - 更新角色: user
2025-05-09 15:27:55,490 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions, role_permissions 
WHERE ? = role_permissions.role_id AND permissions.id = role_permissions.permission_id
2025-05-09 15:27:55,490 - sqlalchemy.engine.Engine - INFO - [cached since 0.008572s ago] (5,)
2025-05-09 15:27:55,490 - app.utils.permissions - INFO - 为角色 user 添加权限: view_project
2025-05-09 15:27:55,491 - app.utils.permissions - INFO - 为角色 user 添加权限: view_task
2025-05-09 15:27:55,491 - app.utils.permissions - INFO - 为角色 user 添加权限: view_reports
2025-05-09 15:27:55,491 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-05-09 15:27:55,491 - app.utils.permissions - INFO - 角色和权限初始化完成
2025-05-09 15:27:55,492 - __main__ - INFO - 角色和权限初始化成功
2025-05-09 15:27:55,492 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-05-09 15:27:55,493 - sqlalchemy.engine.Engine - INFO - SELECT users.id AS users_id, users.username AS users_username, users.email AS users_email, users.name AS users_name, users.password_hash AS users_password_hash, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.last_login AS users_last_login 
FROM users 
WHERE users.username = ?
 LIMIT ? OFFSET ?
2025-05-09 15:27:55,493 - sqlalchemy.engine.Engine - INFO - [generated in 0.00033s] ('system', 1, 0)
2025-05-09 15:27:55,496 - sqlalchemy.engine.Engine - INFO - SELECT projects.id AS projects_id, projects.name AS projects_name, projects.description AS projects_description, projects.status AS projects_status, projects.start_date AS projects_start_date, projects.end_date AS projects_end_date, projects.progress AS projects_progress, projects.created_at AS projects_created_at, projects.updated_at AS projects_updated_at, projects.manager_id AS projects_manager_id, projects.owner_id AS projects_owner_id 
FROM projects 
WHERE projects.name = ?
 LIMIT ? OFFSET ?
2025-05-09 15:27:55,496 - sqlalchemy.engine.Engine - INFO - [generated in 0.00034s] ('Test Project', 1, 0)
2025-05-09 15:27:55,496 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-05-09 15:27:55,497 - __main__ - INFO - 数据库初始化完成
2025-05-09 15:27:55,497 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-05-09 15:27:55,497 - sqlalchemy.engine.Engine - INFO - SELECT users.id AS users_id, users.username AS users_username, users.email AS users_email, users.name AS users_name, users.password_hash AS users_password_hash, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.last_login AS users_last_login 
FROM users 
WHERE users.username = ?
 LIMIT ? OFFSET ?
2025-05-09 15:27:55,498 - sqlalchemy.engine.Engine - INFO - [cached since 0.003553s ago] ('system', 1, 0)
2025-05-09 15:27:55,502 - sqlalchemy.engine.Engine - INFO - INSERT INTO resource_usages (user_id, cpu_usage, memory_usage, disk_usage, network_usage, recorded_at) VALUES (?, ?, ?, ?, ?, ?)
2025-05-09 15:27:55,503 - sqlalchemy.engine.Engine - INFO - [generated in 0.00031s] (2, 11.3, 52.5, 10.9, 0.0, '2025-05-09 07:27:55.501513')
2025-05-09 15:27:55,507 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-05-09 15:27:55,512 - __main__ - INFO - 系统资源检查完成
2025-05-09 15:27:55,513 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-05-09 15:27:55,514 - sqlalchemy.engine.Engine - INFO - DELETE FROM resource_usages WHERE resource_usages.recorded_at < ?
2025-05-09 15:27:55,514 - sqlalchemy.engine.Engine - INFO - [generated in 0.00027s] ('2025-04-09 07:27:55.513550',)
2025-05-09 15:27:55,515 - sqlalchemy.engine.Engine - INFO - DELETE FROM system_alerts WHERE system_alerts.is_resolved = 1 AND system_alerts.created_at < ?
2025-05-09 15:27:55,515 - sqlalchemy.engine.Engine - INFO - [generated in 0.00028s] ('2025-05-02 07:27:55.515629',)
2025-05-09 15:27:55,515 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-05-09 15:27:55,516 - __main__ - INFO - 旧数据清理完成
2025-05-09 15:27:55,528 - werkzeug - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:5000
 * Running on http://192.168.0.75:5000
2025-05-09 15:27:55,528 - werkzeug - INFO - [33mPress CTRL+C to quit[0m
2025-05-09 15:27:55,528 - werkzeug - INFO -  * Restarting with stat
2025-05-09 15:27:56,090 - app - INFO - File logging handler initialized successfully
2025-05-09 15:27:56,090 - app - INFO - Console logging handler initialized successfully
2025-05-09 15:27:56,090 - app - INFO - Application logging configuration completed
2025-05-09 15:27:56,090 - app - INFO - Development configuration initialized
2025-05-09 15:27:56,121 - app - INFO - Logging setup completed successfully
2025-05-09 15:27:56,372 - app - INFO - 已注册的路由:
2025-05-09 15:27:56,373 - app - INFO - 路由: /static/<path:filename> - 方法: {'GET', 'OPTIONS', 'HEAD'} - 终端: static
2025-05-09 15:27:56,374 - app - INFO - 路由: /api/users/<int:user_id> - 方法: {'GET', 'OPTIONS', 'DELETE', 'PUT', 'POST', 'HEAD'} - 终端: user_api_exempt.user_api_exempt_route
2025-05-09 15:27:56,374 - app - INFO - 路由: /api/users - 方法: {'GET', 'OPTIONS', 'DELETE', 'PUT', 'POST', 'HEAD'} - 终端: user_api_exempt.user_api_exempt_route
2025-05-09 15:27:56,375 - app - INFO - 路由: /tasks/<int:task_id>/dependencies/<int:dependency_id>/gantt - 方法: {'DELETE', 'OPTIONS'} - 终端: task_api_exempt.task_api_exempt_route
2025-05-09 15:27:56,375 - app - INFO - 路由: /tasks/<int:task_id>/gantt - 方法: {'OPTIONS', 'PUT'} - 终端: task_api_exempt.task_api_exempt_route
2025-05-09 15:27:56,375 - app - INFO - 路由: /tasks/project/<int:project_id>/gantt - 方法: {'GET', 'OPTIONS', 'HEAD'} - 终端: task_api_exempt.task_api_exempt_route
2025-05-09 15:27:56,375 - app - INFO - 路由: /tasks/project/<int:project_id>/gantt/data - 方法: {'GET', 'OPTIONS', 'HEAD'} - 终端: task_api_exempt.task_api_exempt_route
2025-05-09 15:27:56,376 - app - INFO - 路由: /api/tasks/<int:task_id>/no_csrf - 方法: {'GET', 'OPTIONS', 'DELETE', 'PUT', 'POST', 'HEAD'} - 终端: task_api_exempt.task_api_exempt_route
2025-05-09 15:27:56,376 - app - INFO - 路由: /api/tasks/<int:task_id> - 方法: {'GET', 'OPTIONS', 'DELETE', 'PUT', 'POST', 'HEAD'} - 终端: task_api_exempt.task_api_exempt_route
2025-05-09 15:27:56,376 - app - INFO - 路由: /tasks/dependencies/gantt - 方法: {'POST', 'OPTIONS'} - 终端: task_api_exempt.task_api_exempt_route
2025-05-09 15:27:56,376 - app - INFO - 路由: /api/tasks - 方法: {'GET', 'OPTIONS', 'DELETE', 'PUT', 'POST', 'HEAD'} - 终端: task_api_exempt.task_api_exempt_route
2025-05-09 15:27:56,377 - app - INFO - 路由: /login - 方法: {'GET', 'OPTIONS', 'HEAD'} - 终端: auth.login_page
2025-05-09 15:27:56,377 - app - INFO - 路由: /login - 方法: {'POST', 'OPTIONS'} - 终端: auth.login
2025-05-09 15:27:56,377 - app - INFO - 路由: /register - 方法: {'GET', 'OPTIONS', 'HEAD'} - 终端: auth.register_page
2025-05-09 15:27:56,378 - app - INFO - 路由: /register - 方法: {'POST', 'OPTIONS'} - 终端: auth.register
2025-05-09 15:27:56,378 - app - INFO - 路由: /logout - 方法: {'GET', 'POST', 'OPTIONS', 'HEAD'} - 终端: auth.logout
2025-05-09 15:27:56,378 - app - INFO - 路由: /refresh - 方法: {'POST', 'OPTIONS'} - 终端: auth.refresh
2025-05-09 15:27:56,379 - app - INFO - 路由: /profile - 方法: {'GET', 'OPTIONS', 'HEAD'} - 终端: auth.profile
2025-05-09 15:27:56,379 - app - INFO - 路由: /profile - 方法: {'OPTIONS', 'PUT'} - 终端: auth.update_profile
2025-05-09 15:27:56,379 - app - INFO - 路由: /users - 方法: {'GET', 'OPTIONS', 'HEAD'} - 终端: auth.get_users
2025-05-09 15:27:56,379 - app - INFO - 路由: /users/<int:user_id> - 方法: {'GET', 'OPTIONS', 'HEAD'} - 终端: auth.get_user_by_id
2025-05-09 15:27:56,380 - app - INFO - 路由: /update_user/<int:user_id> - 方法: {'OPTIONS', 'PUT'} - 终端: auth.update_user
2025-05-09 15:27:56,380 - app - INFO - 路由: /roles - 方法: {'GET', 'OPTIONS', 'HEAD'} - 终端: auth.get_roles
2025-05-09 15:27:56,380 - app - INFO - 路由: /permissions - 方法: {'GET', 'OPTIONS', 'HEAD'} - 终端: auth.get_permissions
2025-05-09 15:27:56,380 - app - INFO - 路由: /permissions - 方法: {'POST', 'OPTIONS'} - 终端: auth.create_permission
2025-05-09 15:27:56,381 - app - INFO - 路由: /permissions/<int:permission_id> - 方法: {'GET', 'OPTIONS', 'HEAD'} - 终端: auth.get_permission
2025-05-09 15:27:56,381 - app - INFO - 路由: /permissions/<int:permission_id> - 方法: {'OPTIONS', 'PUT'} - 终端: auth.update_permission
2025-05-09 15:27:56,381 - app - INFO - 路由: /permissions/<int:permission_id> - 方法: {'DELETE', 'OPTIONS'} - 终端: auth.delete_permission
2025-05-09 15:27:56,381 - app - INFO - 路由: /roles - 方法: {'POST', 'OPTIONS'} - 终端: auth.create_role
2025-05-09 15:27:56,381 - app - INFO - 路由: /roles/<int:role_id> - 方法: {'GET', 'OPTIONS', 'HEAD'} - 终端: auth.get_role
2025-05-09 15:27:56,381 - app - INFO - 路由: /roles/<int:role_id>/permissions - 方法: {'OPTIONS', 'PUT'} - 终端: auth.update_role_permissions
2025-05-09 15:27:56,382 - app - INFO - 路由: /roles/<int:role_id> - 方法: {'DELETE', 'OPTIONS'} - 终端: auth.delete_role
2025-05-09 15:27:56,382 - app - INFO - 路由: /dashboard - 方法: {'GET', 'OPTIONS', 'HEAD'} - 终端: auth.dashboard
2025-05-09 15:27:56,382 - app - INFO - 路由: /dashboard/redirect - 方法: {'GET', 'POST', 'OPTIONS', 'HEAD'} - 终端: auth.dashboard_redirect
2025-05-09 15:27:56,382 - app - INFO - 路由: /create_test_user - 方法: {'POST', 'OPTIONS'} - 终端: auth.create_test_user
2025-05-09 15:27:56,382 - app - INFO - 路由: /check - 方法: {'GET', 'OPTIONS', 'HEAD'} - 终端: auth.check_auth
2025-05-09 15:27:56,383 - app - INFO - 路由: /create_test_project - 方法: {'POST', 'OPTIONS'} - 终端: auth.create_test_project
2025-05-09 15:27:56,383 - app - INFO - 路由: /logout_all - 方法: {'POST', 'OPTIONS'} - 终端: auth.logout_all
2025-05-09 15:27:56,383 - app - INFO - 路由: /dashboard/data - 方法: {'GET', 'OPTIONS', 'HEAD'} - 终端: auth.dashboard_data
2025-05-09 15:27:56,383 - app - INFO - 路由: /check_token - 方法: {'GET', 'OPTIONS', 'HEAD'} - 终端: auth.check_token
2025-05-09 15:27:56,384 - app - INFO - 路由: /create_user - 方法: {'POST', 'OPTIONS'} - 终端: auth.create_user
2025-05-09 15:27:56,384 - app - INFO - 路由: /user_info - 方法: {'GET', 'OPTIONS', 'HEAD'} - 终端: auth.get_user_info
2025-05-09 15:27:56,384 - app - INFO - 路由: /user/<int:user_id> - 方法: {'DELETE', 'OPTIONS'} - 终端: auth.delete_user
2025-05-09 15:27:56,384 - app - INFO - 路由: /users/<int:user_id>/roles - 方法: {'GET', 'OPTIONS', 'HEAD'} - 终端: auth.get_user_roles
2025-05-09 15:27:56,385 - app - INFO - 路由: /users/<int:user_id>/roles - 方法: {'OPTIONS', 'PUT'} - 终端: auth.update_user_roles
2025-05-09 15:27:56,385 - app - INFO - 路由: /users/<int:user_id>/notifications - 方法: {'GET', 'OPTIONS', 'HEAD'} - 终端: auth.get_user_notifications
2025-05-09 15:27:56,385 - app - INFO - 路由: /notifications/<int:notification_id>/read - 方法: {'OPTIONS', 'PUT'} - 终端: auth.mark_notification_as_read
2025-05-09 15:27:56,385 - app - INFO - 路由: /notifications/read_all - 方法: {'OPTIONS', 'PUT'} - 终端: auth.mark_all_notifications_as_read
2025-05-09 15:27:56,385 - app - INFO - 路由: /change-password - 方法: {'POST', 'OPTIONS'} - 终端: auth.change_password
2025-05-09 15:27:56,386 - app - INFO - 路由: /reset-password - 方法: {'GET', 'OPTIONS', 'HEAD'} - 终端: auth.reset_password_page
2025-05-09 15:27:56,386 - app - INFO - 路由: /verify-email/confirm - 方法: {'GET', 'OPTIONS', 'HEAD'} - 终端: auth.verify_email_confirm_page
2025-05-09 15:27:56,386 - app - INFO - 路由: /auth/csrf-token - 方法: {'GET', 'OPTIONS', 'HEAD'} - 终端: auth.get_csrf_token
2025-05-09 15:27:56,386 - app - INFO - 路由: /api/users/<int:user_id> - 方法: {'OPTIONS', 'PUT'} - 终端: auth.api_update_user
2025-05-09 15:27:56,386 - app - INFO - 路由: /api/users/<int:user_id> - 方法: {'DELETE', 'OPTIONS'} - 终端: auth.api_delete_user
2025-05-09 15:27:56,387 - app - INFO - 路由: /api/users - 方法: {'GET', 'OPTIONS', 'HEAD'} - 终端: auth.api_get_users
2025-05-09 15:27:56,387 - app - INFO - 路由: /api/users - 方法: {'POST', 'OPTIONS'} - 终端: auth.api_create_user
2025-05-09 15:27:56,387 - app - INFO - 路由: /auth/users/<int:user_id> - 方法: {'GET', 'OPTIONS', 'HEAD'} - 终端: auth.get_user_details
2025-05-09 15:27:56,387 - app - INFO - 路由: /api/users/<int:user_id> - 方法: {'GET', 'OPTIONS', 'DELETE', 'PUT', 'HEAD'} - 终端: auth.api_user_operations
2025-05-09 15:27:56,387 - app - INFO - 路由: /auth/user-csrf-token - 方法: {'GET', 'OPTIONS', 'HEAD'} - 终端: auth.get_user_csrf_token
2025-05-09 15:27:56,387 - app - INFO - 路由: /main/ - 方法: {'GET', 'OPTIONS', 'HEAD'} - 终端: main.index
2025-05-09 15:27:56,388 - app - INFO - 路由: /main/dashboard - 方法: {'GET', 'OPTIONS', 'HEAD'} - 终端: main.dashboard
2025-05-09 15:27:56,388 - app - INFO - 路由: /main/check_token - 方法: {'GET', 'OPTIONS', 'HEAD'} - 终端: main.check_token
2025-05-09 15:27:56,389 - app - INFO - 路由: /main/projects - 方法: {'GET', 'OPTIONS', 'HEAD'} - 终端: main.projects
2025-05-09 15:27:56,389 - app - INFO - 路由: /main/tasks - 方法: {'GET', 'OPTIONS', 'HEAD'} - 终端: main.tasks
2025-05-09 15:27:56,389 - app - INFO - 路由: /main/risks - 方法: {'GET', 'OPTIONS', 'HEAD'} - 终端: main.risks
2025-05-09 15:27:56,390 - app - INFO - 路由: /main/reports - 方法: {'GET', 'OPTIONS', 'HEAD'} - 终端: main.reports
2025-05-09 15:27:56,390 - app - INFO - 路由: /main/resources - 方法: {'GET', 'OPTIONS', 'HEAD'} - 终端: main.resources
2025-05-09 15:27:56,390 - app - INFO - 路由: /main/profile - 方法: {'GET', 'OPTIONS', 'HEAD'} - 终端: main.profile
2025-05-09 15:27:56,391 - app - INFO - 路由: /main/system/status - 方法: {'GET', 'OPTIONS', 'HEAD'} - 终端: main.system_status
2025-05-09 15:27:56,391 - app - INFO - 路由: /main/api/dashboard/data - 方法: {'GET', 'OPTIONS', 'HEAD'} - 终端: main.get_dashboard_data
2025-05-09 15:27:56,391 - app - INFO - 路由: /main/test - 方法: {'GET', 'OPTIONS', 'HEAD'} - 终端: main.test_route
2025-05-09 15:27:56,393 - app - INFO - 路由: /main/projects/detail/<int:project_id> - 方法: {'GET', 'OPTIONS', 'HEAD'} - 终端: main.project_detail_redirect
2025-05-09 15:27:56,393 - app - INFO - 路由: /main/users - 方法: {'GET', 'OPTIONS', 'HEAD'} - 终端: main.users
2025-05-09 15:27:56,393 - app - INFO - 路由: /main/debug/projects - 方法: {'GET', 'OPTIONS', 'HEAD'} - 终端: main.debug_projects
2025-05-09 15:27:56,393 - app - INFO - 路由: /main/simple/projects - 方法: {'GET', 'OPTIONS', 'HEAD'} - 终端: main.simple_projects
2025-05-09 15:27:56,393 - app - INFO - 路由: /main/static-test - 方法: {'GET', 'OPTIONS', 'HEAD'} - 终端: main.static_test
2025-05-09 15:27:56,394 - app - INFO - 路由: /main/print-projects - 方法: {'GET', 'OPTIONS', 'HEAD'} - 终端: main.print_projects
2025-05-09 15:27:56,394 - app - INFO - 路由: /main/bypass-projects - 方法: {'GET', 'OPTIONS', 'HEAD'} - 终端: main.bypass_projects
2025-05-09 15:27:56,394 - app - INFO - 路由: /main/debug-projects - 方法: {'GET', 'OPTIONS', 'HEAD'} - 终端: main.debug_projects_api
2025-05-09 15:27:56,395 - app - INFO - 路由: /projects/list - 方法: {'GET', 'OPTIONS', 'HEAD'} - 终端: projects.project_list
2025-05-09 15:27:56,395 - app - INFO - 路由: /projects/ - 方法: {'GET', 'OPTIONS', 'HEAD'} - 终端: projects.get_projects
2025-05-09 15:27:56,395 - app - INFO - 路由: /projects/ - 方法: {'POST', 'OPTIONS'} - 终端: projects.create_project
2025-05-09 15:27:56,395 - app - INFO - 路由: /projects/<int:project_id> - 方法: {'GET', 'OPTIONS', 'HEAD'} - 终端: projects.get_project
2025-05-09 15:27:56,395 - app - INFO - 路由: /projects/<int:project_id> - 方法: {'OPTIONS', 'PUT'} - 终端: projects.update_project
2025-05-09 15:27:56,396 - app - INFO - 路由: /projects/<int:project_id> - 方法: {'DELETE', 'OPTIONS'} - 终端: projects.delete_project
2025-05-09 15:27:56,396 - app - INFO - 路由: /projects/<int:project_id>/members - 方法: {'GET', 'OPTIONS', 'HEAD'} - 终端: projects.get_project_members
2025-05-09 15:27:56,396 - app - INFO - 路由: /projects/<int:project_id>/members - 方法: {'POST', 'OPTIONS'} - 终端: projects.add_project_member
2025-05-09 15:27:56,396 - app - INFO - 路由: /projects/<int:project_id>/members/<int:user_id> - 方法: {'DELETE', 'OPTIONS'} - 终端: projects.remove_project_member
2025-05-09 15:27:56,396 - app - INFO - 路由: /projects/detail/<int:project_id> - 方法: {'GET', 'OPTIONS', 'HEAD'} - 终端: projects.detail
2025-05-09 15:27:56,396 - app - INFO - 路由: /projects/api/detail/<int:project_id> - 方法: {'GET', 'OPTIONS', 'HEAD'} - 终端: projects.detail_api
2025-05-09 15:27:56,397 - app - INFO - 路由: /projects/api/projects/<int:project_id> - 方法: {'GET', 'OPTIONS', 'HEAD'} - 终端: projects.get_project_api
2025-05-09 15:27:56,397 - app - INFO - 路由: /projects/api/projects/<int:project_id> - 方法: {'OPTIONS', 'PUT'} - 终端: projects.update_project_api
2025-05-09 15:27:56,397 - app - INFO - 路由: /projects/api/projects/<int:project_id> - 方法: {'DELETE', 'OPTIONS'} - 终端: projects.delete_project_api
2025-05-09 15:27:56,397 - app - INFO - 路由: /projects/api/auth/projects - 方法: {'GET', 'OPTIONS', 'HEAD'} - 终端: projects.get_projects_api
2025-05-09 15:27:56,397 - app - INFO - 路由: /projects/api/auth/projects/<int:project_id> - 方法: {'GET', 'OPTIONS', 'HEAD'} - 终端: projects.get_project_auth_api
2025-05-09 15:27:56,397 - app - INFO - 路由: /projects/api/noauth/projects/<int:project_id> - 方法: {'GET', 'OPTIONS', 'DELETE', 'PUT', 'HEAD'} - 终端: projects.get_project_noauth
2025-05-09 15:27:56,398 - app - INFO - 路由: /projects/api/auth/projects - 方法: {'POST', 'OPTIONS'} - 终端: projects.create_project_auth
2025-05-09 15:27:56,398 - app - INFO - 路由: /projects/api/project-managers - 方法: {'GET', 'OPTIONS', 'HEAD'} - 终端: projects.get_project_managers
2025-05-09 15:27:56,398 - app - INFO - 路由: /projects/api/projects - 方法: {'GET', 'OPTIONS', 'HEAD'} - 终端: projects.get_all_projects_api
2025-05-09 15:27:56,398 - app - INFO - 路由: /projects/api/active-projects - 方法: {'GET', 'OPTIONS', 'HEAD'} - 终端: projects.get_active_projects_api
2025-05-09 15:27:56,399 - app - INFO - 路由: /projects/api/projects/<int:project_id>/members - 方法: {'GET', 'OPTIONS', 'HEAD'} - 终端: projects.get_project_members_api
2025-05-09 15:27:56,399 - app - INFO - 路由: /list - 方法: {'GET', 'OPTIONS', 'HEAD'} - 终端: project_root.project_list
2025-05-09 15:27:56,399 - app - INFO - 路由: / - 方法: {'GET', 'OPTIONS', 'HEAD'} - 终端: project_root.get_projects
2025-05-09 15:27:56,400 - app - INFO - 路由: / - 方法: {'POST', 'OPTIONS'} - 终端: project_root.create_project
2025-05-09 15:27:56,400 - app - INFO - 路由: /<int:project_id> - 方法: {'GET', 'OPTIONS', 'HEAD'} - 终端: project_root.get_project
2025-05-09 15:27:56,400 - app - INFO - 路由: /<int:project_id> - 方法: {'OPTIONS', 'PUT'} - 终端: project_root.update_project
2025-05-09 15:27:56,400 - app - INFO - 路由: /<int:project_id> - 方法: {'DELETE', 'OPTIONS'} - 终端: project_root.delete_project
2025-05-09 15:27:56,400 - app - INFO - 路由: /<int:project_id>/members - 方法: {'GET', 'OPTIONS', 'HEAD'} - 终端: project_root.get_project_members
2025-05-09 15:27:56,400 - app - INFO - 路由: /<int:project_id>/members - 方法: {'POST', 'OPTIONS'} - 终端: project_root.add_project_member
2025-05-09 15:27:56,401 - app - INFO - 路由: /<int:project_id>/members/<int:user_id> - 方法: {'DELETE', 'OPTIONS'} - 终端: project_root.remove_project_member
2025-05-09 15:27:56,401 - app - INFO - 路由: /detail/<int:project_id> - 方法: {'GET', 'OPTIONS', 'HEAD'} - 终端: project_root.detail
2025-05-09 15:27:56,401 - app - INFO - 路由: /api/detail/<int:project_id> - 方法: {'GET', 'OPTIONS', 'HEAD'} - 终端: project_root.detail_api
2025-05-09 15:27:56,401 - app - INFO - 路由: /api/projects/<int:project_id> - 方法: {'GET', 'OPTIONS', 'HEAD'} - 终端: project_root.get_project_api
2025-05-09 15:27:56,401 - app - INFO - 路由: /api/projects/<int:project_id> - 方法: {'OPTIONS', 'PUT'} - 终端: project_root.update_project_api
2025-05-09 15:27:56,402 - app - INFO - 路由: /api/projects/<int:project_id> - 方法: {'DELETE', 'OPTIONS'} - 终端: project_root.delete_project_api
2025-05-09 15:27:56,402 - app - INFO - 路由: /api/auth/projects - 方法: {'GET', 'OPTIONS', 'HEAD'} - 终端: project_root.get_projects_api
2025-05-09 15:27:56,402 - app - INFO - 路由: /api/auth/projects/<int:project_id> - 方法: {'GET', 'OPTIONS', 'HEAD'} - 终端: project_root.get_project_auth_api
2025-05-09 15:27:56,402 - app - INFO - 路由: /api/noauth/projects/<int:project_id> - 方法: {'GET', 'OPTIONS', 'DELETE', 'PUT', 'HEAD'} - 终端: project_root.get_project_noauth
2025-05-09 15:27:56,402 - app - INFO - 路由: /api/auth/projects - 方法: {'POST', 'OPTIONS'} - 终端: project_root.create_project_auth
2025-05-09 15:27:56,402 - app - INFO - 路由: /api/project-managers - 方法: {'GET', 'OPTIONS', 'HEAD'} - 终端: project_root.get_project_managers
2025-05-09 15:27:56,403 - app - INFO - 路由: /api/projects - 方法: {'GET', 'OPTIONS', 'HEAD'} - 终端: project_root.get_all_projects_api
2025-05-09 15:27:56,403 - app - INFO - 路由: /api/active-projects - 方法: {'GET', 'OPTIONS', 'HEAD'} - 终端: project_root.get_active_projects_api
2025-05-09 15:27:56,403 - app - INFO - 路由: /api/projects/<int:project_id>/members - 方法: {'GET', 'OPTIONS', 'HEAD'} - 终端: project_root.get_project_members_api
2025-05-09 15:27:56,404 - app - INFO - 路由: /tasks/ - 方法: {'GET', 'OPTIONS', 'HEAD'} - 终端: tasks.get_tasks
2025-05-09 15:27:56,404 - app - INFO - 路由: /tasks/ - 方法: {'POST', 'OPTIONS'} - 终端: tasks.create_task
2025-05-09 15:27:56,404 - app - INFO - 路由: /tasks/<int:task_id> - 方法: {'GET', 'OPTIONS', 'HEAD'} - 终端: tasks.get_task
2025-05-09 15:27:56,404 - app - INFO - 路由: /tasks/<int:task_id> - 方法: {'OPTIONS', 'PUT'} - 终端: tasks.update_task
2025-05-09 15:27:56,404 - app - INFO - 路由: /tasks/<int:task_id> - 方法: {'DELETE', 'OPTIONS'} - 终端: tasks.delete_task
2025-05-09 15:27:56,404 - app - INFO - 路由: /tasks/<int:task_id>/comments - 方法: {'GET', 'OPTIONS', 'HEAD'} - 终端: tasks.get_task_comments
2025-05-09 15:27:56,405 - app - INFO - 路由: /tasks/<int:task_id>/comments - 方法: {'POST', 'OPTIONS'} - 终端: tasks.add_task_comment
2025-05-09 15:27:56,405 - app - INFO - 路由: /tasks/<int:task_id>/attachments - 方法: {'GET', 'OPTIONS', 'HEAD'} - 终端: tasks.get_task_attachments
2025-05-09 15:27:56,405 - app - INFO - 路由: /tasks/<int:task_id>/attachments - 方法: {'POST', 'OPTIONS'} - 终端: tasks.add_task_attachment
2025-05-09 15:27:56,406 - app - INFO - 路由: /tasks/<int:task_id>/resources - 方法: {'GET', 'OPTIONS', 'HEAD'} - 终端: tasks.get_task_resources
2025-05-09 15:27:56,406 - app - INFO - 路由: /tasks/<int:task_id>/subtasks - 方法: {'GET', 'OPTIONS', 'HEAD'} - 终端: tasks.get_subtasks
2025-05-09 15:27:56,407 - app - INFO - 路由: /tasks/<int:task_id>/subtasks - 方法: {'POST', 'OPTIONS'} - 终端: tasks.create_subtask
2025-05-09 15:27:56,409 - app - INFO - 路由: /tasks/<int:task_id>/dependencies - 方法: {'GET', 'OPTIONS', 'HEAD'} - 终端: tasks.get_dependencies
2025-05-09 15:27:56,409 - app - INFO - 路由: /tasks/<int:task_id>/dependencies - 方法: {'POST', 'OPTIONS'} - 终端: tasks.add_dependency
2025-05-09 15:27:56,409 - app - INFO - 路由: /tasks/<int:task_id>/logs - 方法: {'GET', 'OPTIONS', 'HEAD'} - 终端: tasks.get_task_logs
2025-05-09 15:27:56,410 - app - INFO - 路由: /tasks/<int:task_id>/logs - 方法: {'POST', 'OPTIONS'} - 终端: tasks.add_task_log
2025-05-09 15:27:56,410 - app - INFO - 路由: /tasks/project/<int:project_id>/gantt - 方法: {'GET', 'OPTIONS', 'HEAD'} - 终端: tasks.gantt_chart
2025-05-09 15:27:56,410 - app - INFO - 路由: /tasks/project/<int:project_id>/gantt/data - 方法: {'GET', 'OPTIONS', 'HEAD'} - 终端: tasks.get_gantt_data
2025-05-09 15:27:56,410 - app - INFO - 路由: /tasks/<int:task_id>/gantt - 方法: {'OPTIONS', 'PUT'} - 终端: tasks.update_gantt_task
2025-05-09 15:27:56,410 - app - INFO - 路由: /tasks/dependencies/gantt - 方法: {'POST', 'OPTIONS'} - 终端: tasks.create_gantt_dependency
2025-05-09 15:27:56,411 - app - INFO - 路由: /tasks/<int:task_id>/dependencies/<int:dependency_id>/gantt - 方法: {'DELETE', 'OPTIONS'} - 终端: tasks.delete_gantt_dependency
2025-05-09 15:27:56,411 - app - INFO - 路由: /tasks/<int:task_id>/status - 方法: {'OPTIONS', 'PUT'} - 终端: tasks.update_task_status
2025-05-09 15:27:56,411 - app - INFO - 路由: /tasks/api/tasks/dependencies - 方法: {'POST', 'OPTIONS'} - 终端: tasks.add_task_dependency
2025-05-09 15:27:56,411 - app - INFO - 路由: /tasks/<int:task_id>/detail - 方法: {'GET', 'OPTIONS', 'HEAD'} - 终端: tasks.task_detail_api
2025-05-09 15:27:56,411 - app - INFO - 路由: /tasks/api/auth/tasks/<int:task_id>/detail - 方法: {'GET', 'OPTIONS', 'HEAD'} - 终端: tasks.task_detail_api_auth
2025-05-09 15:27:56,411 - app - INFO - 路由: /tasks/<int:task_id>/view - 方法: {'GET', 'OPTIONS', 'HEAD'} - 终端: tasks.task_detail_page
2025-05-09 15:27:56,412 - app - INFO - 路由: /tasks/<int:task_id>/edit - 方法: {'GET', 'OPTIONS', 'HEAD'} - 终端: tasks.edit_task_page
2025-05-09 15:27:56,412 - app - INFO - 路由: /tasks/api/auth/tasks/<int:task_id>/attachments - 方法: {'POST', 'OPTIONS'} - 终端: tasks.add_task_attachment_auth
2025-05-09 15:27:56,412 - app - INFO - 路由: /tasks/api/auth/tasks/<int:task_id>/attachments/<int:attachment_id>/download - 方法: {'GET', 'OPTIONS', 'HEAD'} - 终端: tasks.download_attachment_auth
2025-05-09 15:27:56,412 - app - INFO - 路由: /tasks/api/tasks/<int:task_id>/attachments - 方法: {'POST', 'OPTIONS'} - 终端: tasks.upload_attachment
2025-05-09 15:27:56,412 - app - INFO - 路由: /tasks/api/tasks/<int:task_id>/attachments/<int:attachment_id>/download - 方法: {'GET', 'OPTIONS', 'HEAD'} - 终端: tasks.download_attachment
2025-05-09 15:27:56,413 - app - INFO - 路由: /tasks/api/tasks/<int:task_id>/attachments/<int:attachment_id> - 方法: {'DELETE', 'OPTIONS'} - 终端: tasks.delete_attachment
2025-05-09 15:27:56,413 - app - INFO - 路由: /tasks/api/tasks/<int:task_id>/attachments/<int:attachment_id>/versions - 方法: {'POST', 'OPTIONS'} - 终端: tasks.upload_new_version
2025-05-09 15:27:56,413 - app - INFO - 路由: /tasks/api/tasks/<int:task_id>/attachments/<int:attachment_id>/versions - 方法: {'GET', 'OPTIONS', 'HEAD'} - 终端: tasks.get_attachment_versions
2025-05-09 15:27:56,415 - app - INFO - 路由: /tasks/api/tasks/<int:task_id>/risks - 方法: {'GET', 'OPTIONS', 'HEAD'} - 终端: tasks.task_risks_front_path
2025-05-09 15:27:56,417 - app - INFO - 路由: /tasks/<int:task_id>/risks - 方法: {'POST', 'OPTIONS'} - 终端: tasks.create_task_risk_front_path
2025-05-09 15:27:56,423 - app - INFO - 路由: /tasks/api/tasks/<int:task_id>/progress - 方法: {'GET', 'OPTIONS', 'HEAD'} - 终端: tasks.get_task_progress
2025-05-09 15:27:56,426 - app - INFO - 路由: /tasks/api/tasks/<int:task_id>/progress - 方法: {'POST', 'OPTIONS'} - 终端: tasks.update_task_progress
2025-05-09 15:27:56,428 - app - INFO - 路由: /tasks/api/tasks/<int:task_id>/progress/approve - 方法: {'POST', 'OPTIONS'} - 终端: tasks.approve_task_progress
2025-05-09 15:27:56,431 - app - INFO - 路由: /tasks/list - 方法: {'GET', 'OPTIONS', 'HEAD'} - 终端: tasks.task_list
2025-05-09 15:27:56,432 - app - INFO - 路由: /tasks/api/auth/tasks/<int:task_id>/logs - 方法: {'GET', 'OPTIONS', 'HEAD'} - 终端: tasks.get_task_logs_auth
2025-05-09 15:27:56,434 - app - INFO - 路由: /tasks/api/auth/tasks/<int:task_id>/subtasks - 方法: {'GET', 'OPTIONS', 'HEAD'} - 终端: tasks.get_subtasks_auth
2025-05-09 15:27:56,436 - app - INFO - 路由: /tasks/api/auth/tasks/<int:task_id>/comments - 方法: {'GET', 'OPTIONS', 'HEAD'} - 终端: tasks.get_task_comments_auth
2025-05-09 15:27:56,438 - app - INFO - 路由: /tasks/api/auth/tasks/<int:task_id>/attachments - 方法: {'GET', 'OPTIONS', 'HEAD'} - 终端: tasks.get_task_attachments_auth
2025-05-09 15:27:56,441 - app - INFO - 路由: /tasks/api/auth/tasks/<int:task_id>/risks - 方法: {'GET', 'OPTIONS', 'HEAD'} - 终端: tasks.get_task_risks_auth
2025-05-09 15:27:56,444 - app - INFO - 路由: /tasks/api/auth/tasks/<int:task_id>/risks - 方法: {'POST', 'OPTIONS'} - 终端: tasks.create_task_risk_auth
2025-05-09 15:27:56,446 - app - INFO - 路由: /tasks/api/auth/tasks/<int:task_id>/comments - 方法: {'POST', 'OPTIONS'} - 终端: tasks.add_task_comment_auth
2025-05-09 15:27:56,447 - app - INFO - 路由: /tasks/api/tasks/<int:task_id> - 方法: {'OPTIONS', 'PUT'} - 终端: tasks.api_update_task
2025-05-09 15:27:56,449 - app - INFO - 路由: /tasks/api/tasks/<int:task_id>/update_bypass - 方法: {'OPTIONS', 'PUT'} - 终端: tasks.update_task_bypass_csrf
2025-05-09 15:27:56,450 - app - INFO - 路由: /tasks/get-csrf-token - 方法: {'GET', 'OPTIONS', 'HEAD'} - 终端: tasks.get_csrf_token
2025-05-09 15:27:56,452 - app - INFO - 路由: /tasks/api/tasks/<int:task_id>/no_csrf - 方法: {'OPTIONS', 'PUT'} - 终端: tasks.update_task_no_csrf
2025-05-09 15:27:56,454 - app - INFO - 路由: /tasks/api/tasks/<int:task_id>/detail - 方法: {'GET', 'OPTIONS', 'HEAD'} - 终端: tasks.api_tasks_detail
2025-05-09 15:27:56,501 - app - WARNING - team_bp 未定义或无法导入
2025-05-09 15:27:56,622 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-05-09 15:27:56,628 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions 
WHERE permissions.name = ?
 LIMIT ? OFFSET ?
2025-05-09 15:27:56,632 - sqlalchemy.engine.Engine - INFO - [generated in 0.00290s] ('manage_users', 1, 0)
2025-05-09 15:27:56,634 - app.utils.permissions - INFO - 更新权限: manage_users
2025-05-09 15:27:56,636 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions 
WHERE permissions.name = ?
 LIMIT ? OFFSET ?
2025-05-09 15:27:56,638 - sqlalchemy.engine.Engine - INFO - [cached since 0.009166s ago] ('manage_roles', 1, 0)
2025-05-09 15:27:56,639 - app.utils.permissions - INFO - 更新权限: manage_roles
2025-05-09 15:27:56,643 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions 
WHERE permissions.name = ?
 LIMIT ? OFFSET ?
2025-05-09 15:27:56,645 - sqlalchemy.engine.Engine - INFO - [cached since 0.01633s ago] ('manage_all_projects', 1, 0)
2025-05-09 15:27:56,646 - app.utils.permissions - INFO - 更新权限: manage_all_projects
2025-05-09 15:27:56,648 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions 
WHERE permissions.name = ?
 LIMIT ? OFFSET ?
2025-05-09 15:27:56,650 - sqlalchemy.engine.Engine - INFO - [cached since 0.02155s ago] ('manage_project', 1, 0)
2025-05-09 15:27:56,651 - app.utils.permissions - INFO - 更新权限: manage_project
2025-05-09 15:27:56,654 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions 
WHERE permissions.name = ?
 LIMIT ? OFFSET ?
2025-05-09 15:27:56,657 - sqlalchemy.engine.Engine - INFO - [cached since 0.02757s ago] ('manage_all_tasks', 1, 0)
2025-05-09 15:27:56,659 - app.utils.permissions - INFO - 更新权限: manage_all_tasks
2025-05-09 15:27:56,662 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions 
WHERE permissions.name = ?
 LIMIT ? OFFSET ?
2025-05-09 15:27:56,663 - sqlalchemy.engine.Engine - INFO - [cached since 0.03418s ago] ('manage_task', 1, 0)
2025-05-09 15:27:56,665 - app.utils.permissions - INFO - 更新权限: manage_task
2025-05-09 15:27:56,667 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions 
WHERE permissions.name = ?
 LIMIT ? OFFSET ?
2025-05-09 15:27:56,668 - sqlalchemy.engine.Engine - INFO - [cached since 0.03943s ago] ('view_project', 1, 0)
2025-05-09 15:27:56,670 - app.utils.permissions - INFO - 更新权限: view_project
2025-05-09 15:27:56,673 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions 
WHERE permissions.name = ?
 LIMIT ? OFFSET ?
2025-05-09 15:27:56,677 - sqlalchemy.engine.Engine - INFO - [cached since 0.04765s ago] ('view_task', 1, 0)
2025-05-09 15:27:56,678 - app.utils.permissions - INFO - 更新权限: view_task
2025-05-09 15:27:56,681 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions 
WHERE permissions.name = ?
 LIMIT ? OFFSET ?
2025-05-09 15:27:56,682 - sqlalchemy.engine.Engine - INFO - [cached since 0.05365s ago] ('manage_resources', 1, 0)
2025-05-09 15:27:56,683 - app.utils.permissions - INFO - 更新权限: manage_resources
2025-05-09 15:27:56,686 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions 
WHERE permissions.name = ?
 LIMIT ? OFFSET ?
2025-05-09 15:27:56,688 - sqlalchemy.engine.Engine - INFO - [cached since 0.05906s ago] ('manage_risks', 1, 0)
2025-05-09 15:27:56,690 - app.utils.permissions - INFO - 更新权限: manage_risks
2025-05-09 15:27:56,693 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions 
WHERE permissions.name = ?
 LIMIT ? OFFSET ?
2025-05-09 15:27:56,695 - sqlalchemy.engine.Engine - INFO - [cached since 0.06656s ago] ('view_reports', 1, 0)
2025-05-09 15:27:56,696 - app.utils.permissions - INFO - 更新权限: view_reports
2025-05-09 15:27:56,700 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions 
WHERE permissions.name = ?
 LIMIT ? OFFSET ?
2025-05-09 15:27:56,701 - sqlalchemy.engine.Engine - INFO - [cached since 0.07205s ago] ('create_task', 1, 0)
2025-05-09 15:27:56,702 - app.utils.permissions - INFO - 更新权限: create_task
2025-05-09 15:27:56,704 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions 
WHERE permissions.name = ?
 LIMIT ? OFFSET ?
2025-05-09 15:27:56,707 - sqlalchemy.engine.Engine - INFO - [cached since 0.07861s ago] ('create_project', 1, 0)
2025-05-09 15:27:56,709 - app.utils.permissions - INFO - 更新权限: create_project
2025-05-09 15:27:56,711 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions 
WHERE permissions.name = ?
 LIMIT ? OFFSET ?
2025-05-09 15:27:56,713 - sqlalchemy.engine.Engine - INFO - [cached since 0.08417s ago] ('assign_task', 1, 0)
2025-05-09 15:27:56,714 - app.utils.permissions - INFO - 更新权限: assign_task
2025-05-09 15:27:56,717 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions 
WHERE permissions.name = ?
 LIMIT ? OFFSET ?
2025-05-09 15:27:56,718 - sqlalchemy.engine.Engine - INFO - [cached since 0.08973s ago] ('change_project_status', 1, 0)
2025-05-09 15:27:56,720 - app.utils.permissions - INFO - 更新权限: change_project_status
2025-05-09 15:27:56,722 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions 
WHERE permissions.name = ?
 LIMIT ? OFFSET ?
2025-05-09 15:27:56,724 - sqlalchemy.engine.Engine - INFO - [cached since 0.09655s ago] ('change_task_status', 1, 0)
2025-05-09 15:27:56,727 - app.utils.permissions - INFO - 更新权限: change_task_status
2025-05-09 15:27:56,729 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-05-09 15:27:56,732 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-05-09 15:27:56,734 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions
2025-05-09 15:27:56,735 - sqlalchemy.engine.Engine - INFO - [generated in 0.00184s] ()
2025-05-09 15:27:56,738 - sqlalchemy.engine.Engine - INFO - SELECT roles.id AS roles_id, roles.name AS roles_name, roles.description AS roles_description, roles.created_at AS roles_created_at 
FROM roles 
WHERE roles.name = ?
 LIMIT ? OFFSET ?
2025-05-09 15:27:56,740 - sqlalchemy.engine.Engine - INFO - [generated in 0.00264s] ('admin', 1, 0)
2025-05-09 15:27:56,742 - app.utils.permissions - INFO - 更新角色: admin
2025-05-09 15:27:56,746 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions, role_permissions 
WHERE ? = role_permissions.role_id AND permissions.id = role_permissions.permission_id
2025-05-09 15:27:56,749 - sqlalchemy.engine.Engine - INFO - [generated in 0.00349s] (1,)
2025-05-09 15:27:56,763 - app.utils.permissions - INFO - 为管理员角色添加所有权限: 16个
2025-05-09 15:27:56,767 - sqlalchemy.engine.Engine - INFO - SELECT roles.id AS roles_id, roles.name AS roles_name, roles.description AS roles_description, roles.created_at AS roles_created_at 
FROM roles 
WHERE roles.name = ?
 LIMIT ? OFFSET ?
2025-05-09 15:27:56,769 - sqlalchemy.engine.Engine - INFO - [cached since 0.03125s ago] ('manager', 1, 0)
2025-05-09 15:27:56,771 - app.utils.permissions - INFO - 更新角色: manager
2025-05-09 15:27:56,773 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions, role_permissions 
WHERE ? = role_permissions.role_id AND permissions.id = role_permissions.permission_id
2025-05-09 15:27:56,776 - sqlalchemy.engine.Engine - INFO - [cached since 0.03001s ago] (2,)
2025-05-09 15:27:56,778 - app.utils.permissions - INFO - 为角色 manager 添加权限: manage_project
2025-05-09 15:27:56,781 - app.utils.permissions - INFO - 为角色 manager 添加权限: manage_task
2025-05-09 15:27:56,783 - app.utils.permissions - INFO - 为角色 manager 添加权限: view_project
2025-05-09 15:27:56,785 - app.utils.permissions - INFO - 为角色 manager 添加权限: view_task
2025-05-09 15:27:56,787 - app.utils.permissions - INFO - 为角色 manager 添加权限: manage_resources
2025-05-09 15:27:56,789 - app.utils.permissions - INFO - 为角色 manager 添加权限: manage_risks
2025-05-09 15:27:56,792 - app.utils.permissions - INFO - 为角色 manager 添加权限: view_reports
2025-05-09 15:27:56,793 - app.utils.permissions - INFO - 为角色 manager 添加权限: create_project
2025-05-09 15:27:56,796 - app.utils.permissions - INFO - 为角色 manager 添加权限: create_task
2025-05-09 15:27:56,797 - app.utils.permissions - INFO - 为角色 manager 添加权限: assign_task
2025-05-09 15:27:56,799 - app.utils.permissions - INFO - 为角色 manager 添加权限: change_project_status
2025-05-09 15:27:56,801 - app.utils.permissions - INFO - 为角色 manager 添加权限: change_task_status
2025-05-09 15:27:56,803 - sqlalchemy.engine.Engine - INFO - SELECT roles.id AS roles_id, roles.name AS roles_name, roles.description AS roles_description, roles.created_at AS roles_created_at 
FROM roles 
WHERE roles.name = ?
 LIMIT ? OFFSET ?
2025-05-09 15:27:56,805 - sqlalchemy.engine.Engine - INFO - [cached since 0.0685s ago] ('user', 1, 0)
2025-05-09 15:27:56,809 - app.utils.permissions - INFO - 更新角色: user
2025-05-09 15:27:56,811 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions, role_permissions 
WHERE ? = role_permissions.role_id AND permissions.id = role_permissions.permission_id
2025-05-09 15:27:56,813 - sqlalchemy.engine.Engine - INFO - [cached since 0.06766s ago] (5,)
2025-05-09 15:27:56,816 - app.utils.permissions - INFO - 为角色 user 添加权限: view_project
2025-05-09 15:27:56,818 - app.utils.permissions - INFO - 为角色 user 添加权限: view_task
2025-05-09 15:27:56,820 - app.utils.permissions - INFO - 为角色 user 添加权限: view_reports
2025-05-09 15:27:56,822 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-05-09 15:27:56,824 - app.utils.permissions - INFO - 角色和权限初始化完成
2025-05-09 15:27:56,827 - __main__ - INFO - 角色和权限初始化成功
2025-05-09 15:27:56,827 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-05-09 15:27:56,831 - sqlalchemy.engine.Engine - INFO - SELECT users.id AS users_id, users.username AS users_username, users.email AS users_email, users.name AS users_name, users.password_hash AS users_password_hash, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.last_login AS users_last_login 
FROM users 
WHERE users.username = ?
 LIMIT ? OFFSET ?
2025-05-09 15:27:56,832 - sqlalchemy.engine.Engine - INFO - [generated in 0.00152s] ('system', 1, 0)
2025-05-09 15:27:56,835 - sqlalchemy.engine.Engine - INFO - SELECT projects.id AS projects_id, projects.name AS projects_name, projects.description AS projects_description, projects.status AS projects_status, projects.start_date AS projects_start_date, projects.end_date AS projects_end_date, projects.progress AS projects_progress, projects.created_at AS projects_created_at, projects.updated_at AS projects_updated_at, projects.manager_id AS projects_manager_id, projects.owner_id AS projects_owner_id 
FROM projects 
WHERE projects.name = ?
 LIMIT ? OFFSET ?
2025-05-09 15:27:56,837 - sqlalchemy.engine.Engine - INFO - [generated in 0.00172s] ('Test Project', 1, 0)
2025-05-09 15:27:56,839 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-05-09 15:27:56,841 - __main__ - INFO - 数据库初始化完成
2025-05-09 15:27:56,841 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-05-09 15:27:56,843 - sqlalchemy.engine.Engine - INFO - SELECT users.id AS users_id, users.username AS users_username, users.email AS users_email, users.name AS users_name, users.password_hash AS users_password_hash, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.last_login AS users_last_login 
FROM users 
WHERE users.username = ?
 LIMIT ? OFFSET ?
2025-05-09 15:27:56,845 - sqlalchemy.engine.Engine - INFO - [cached since 0.01436s ago] ('system', 1, 0)
2025-05-09 15:27:56,852 - sqlalchemy.engine.Engine - INFO - INSERT INTO resource_usages (user_id, cpu_usage, memory_usage, disk_usage, network_usage, recorded_at) VALUES (?, ?, ?, ?, ?, ?)
2025-05-09 15:27:56,855 - sqlalchemy.engine.Engine - INFO - [generated in 0.00243s] (2, 13.4, 52.9, 10.9, 0.0, '2025-05-09 07:27:56.851934')
2025-05-09 15:27:56,859 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-05-09 15:27:56,864 - __main__ - INFO - 系统资源检查完成
2025-05-09 15:27:56,865 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-05-09 15:27:56,867 - sqlalchemy.engine.Engine - INFO - DELETE FROM resource_usages WHERE resource_usages.recorded_at < ?
2025-05-09 15:27:56,869 - sqlalchemy.engine.Engine - INFO - [generated in 0.00183s] ('2025-04-09 07:27:56.864674',)
2025-05-09 15:27:56,872 - sqlalchemy.engine.Engine - INFO - DELETE FROM system_alerts WHERE system_alerts.is_resolved = 1 AND system_alerts.created_at < ?
2025-05-09 15:27:56,874 - sqlalchemy.engine.Engine - INFO - [generated in 0.00218s] ('2025-05-02 07:27:56.871109',)
2025-05-09 15:27:56,876 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-05-09 15:27:56,877 - __main__ - INFO - 旧数据清理完成
2025-05-09 15:27:56,882 - werkzeug - WARNING -  * Debugger is active!
2025-05-09 15:27:56,887 - werkzeug - INFO -  * Debugger PIN: 670-037-726
2025-05-09 15:33:12,692 - werkzeug - INFO -  * Detected change in 'D:\\tmp\\work\\app\\__init__.py', reloading
2025-05-09 15:33:12,948 - werkzeug - INFO -  * Restarting with stat
2025-05-09 15:33:13,659 - app - INFO - File logging handler initialized successfully
2025-05-09 15:33:13,661 - app - INFO - Console logging handler initialized successfully
2025-05-09 15:33:13,662 - app - INFO - Application logging configuration completed
2025-05-09 15:33:13,663 - app - INFO - Development configuration initialized
2025-05-09 15:33:13,693 - app - INFO - Logging setup completed successfully
2025-05-09 15:33:13,944 - app - INFO - 已注册的路由:
2025-05-09 15:33:13,945 - app - INFO - 路由: /static/<path:filename> - 方法: {'OPTIONS', 'GET', 'HEAD'} - 终端: static
2025-05-09 15:33:13,946 - app - INFO - 路由: /api/users/<int:user_id> - 方法: {'OPTIONS', 'HEAD', 'GET', 'POST', 'PUT', 'DELETE'} - 终端: user_api_exempt.user_api_exempt_route
2025-05-09 15:33:13,947 - app - INFO - 路由: /api/users - 方法: {'OPTIONS', 'HEAD', 'GET', 'POST', 'PUT', 'DELETE'} - 终端: user_api_exempt.user_api_exempt_route
2025-05-09 15:33:13,948 - app - INFO - 路由: /tasks/<int:task_id>/dependencies/<int:dependency_id>/gantt - 方法: {'DELETE', 'OPTIONS'} - 终端: task_api_exempt.task_api_exempt_route
2025-05-09 15:33:13,949 - app - INFO - 路由: /tasks/<int:task_id>/gantt - 方法: {'PUT', 'OPTIONS'} - 终端: task_api_exempt.task_api_exempt_route
2025-05-09 15:33:13,951 - app - INFO - 路由: /tasks/project/<int:project_id>/gantt - 方法: {'OPTIONS', 'GET', 'HEAD'} - 终端: task_api_exempt.task_api_exempt_route
2025-05-09 15:33:13,952 - app - INFO - 路由: /tasks/project/<int:project_id>/gantt/data - 方法: {'OPTIONS', 'GET', 'HEAD'} - 终端: task_api_exempt.task_api_exempt_route
2025-05-09 15:33:13,953 - app - INFO - 路由: /api/tasks/<int:task_id>/no_csrf - 方法: {'OPTIONS', 'HEAD', 'GET', 'POST', 'PUT', 'DELETE'} - 终端: task_api_exempt.task_api_exempt_route
2025-05-09 15:33:13,954 - app - INFO - 路由: /api/tasks/<int:task_id> - 方法: {'OPTIONS', 'HEAD', 'GET', 'POST', 'PUT', 'DELETE'} - 终端: task_api_exempt.task_api_exempt_route
2025-05-09 15:33:13,956 - app - INFO - 路由: /tasks/dependencies/gantt - 方法: {'OPTIONS', 'POST'} - 终端: task_api_exempt.task_api_exempt_route
2025-05-09 15:33:13,957 - app - INFO - 路由: /api/tasks - 方法: {'OPTIONS', 'HEAD', 'GET', 'POST', 'PUT', 'DELETE'} - 终端: task_api_exempt.task_api_exempt_route
2025-05-09 15:33:13,959 - app - INFO - 路由: /login - 方法: {'OPTIONS', 'GET', 'HEAD'} - 终端: auth.login_page
2025-05-09 15:33:13,960 - app - INFO - 路由: /login - 方法: {'OPTIONS', 'POST'} - 终端: auth.login
2025-05-09 15:33:13,962 - app - INFO - 路由: /register - 方法: {'OPTIONS', 'GET', 'HEAD'} - 终端: auth.register_page
2025-05-09 15:33:13,962 - app - INFO - 路由: /register - 方法: {'OPTIONS', 'POST'} - 终端: auth.register
2025-05-09 15:33:13,964 - app - INFO - 路由: /logout - 方法: {'HEAD', 'OPTIONS', 'GET', 'POST'} - 终端: auth.logout
2025-05-09 15:33:13,966 - app - INFO - 路由: /refresh - 方法: {'OPTIONS', 'POST'} - 终端: auth.refresh
2025-05-09 15:33:13,967 - app - INFO - 路由: /profile - 方法: {'OPTIONS', 'GET', 'HEAD'} - 终端: auth.profile
2025-05-09 15:33:13,968 - app - INFO - 路由: /profile - 方法: {'PUT', 'OPTIONS'} - 终端: auth.update_profile
2025-05-09 15:33:13,969 - app - INFO - 路由: /users - 方法: {'OPTIONS', 'GET', 'HEAD'} - 终端: auth.get_users
2025-05-09 15:33:13,969 - app - INFO - 路由: /users/<int:user_id> - 方法: {'OPTIONS', 'GET', 'HEAD'} - 终端: auth.get_user_by_id
2025-05-09 15:33:13,971 - app - INFO - 路由: /update_user/<int:user_id> - 方法: {'PUT', 'OPTIONS'} - 终端: auth.update_user
2025-05-09 15:33:13,972 - app - INFO - 路由: /roles - 方法: {'OPTIONS', 'GET', 'HEAD'} - 终端: auth.get_roles
2025-05-09 15:33:13,973 - app - INFO - 路由: /permissions - 方法: {'OPTIONS', 'GET', 'HEAD'} - 终端: auth.get_permissions
2025-05-09 15:33:13,975 - app - INFO - 路由: /permissions - 方法: {'OPTIONS', 'POST'} - 终端: auth.create_permission
2025-05-09 15:33:13,976 - app - INFO - 路由: /permissions/<int:permission_id> - 方法: {'OPTIONS', 'GET', 'HEAD'} - 终端: auth.get_permission
2025-05-09 15:33:13,978 - app - INFO - 路由: /permissions/<int:permission_id> - 方法: {'PUT', 'OPTIONS'} - 终端: auth.update_permission
2025-05-09 15:33:13,980 - app - INFO - 路由: /permissions/<int:permission_id> - 方法: {'DELETE', 'OPTIONS'} - 终端: auth.delete_permission
2025-05-09 15:33:13,982 - app - INFO - 路由: /roles - 方法: {'OPTIONS', 'POST'} - 终端: auth.create_role
2025-05-09 15:33:13,983 - app - INFO - 路由: /roles/<int:role_id> - 方法: {'OPTIONS', 'GET', 'HEAD'} - 终端: auth.get_role
2025-05-09 15:33:13,985 - app - INFO - 路由: /roles/<int:role_id>/permissions - 方法: {'PUT', 'OPTIONS'} - 终端: auth.update_role_permissions
2025-05-09 15:33:13,988 - app - INFO - 路由: /roles/<int:role_id> - 方法: {'DELETE', 'OPTIONS'} - 终端: auth.delete_role
2025-05-09 15:33:13,989 - app - INFO - 路由: /dashboard - 方法: {'OPTIONS', 'GET', 'HEAD'} - 终端: auth.dashboard
2025-05-09 15:33:13,990 - app - INFO - 路由: /dashboard/redirect - 方法: {'HEAD', 'OPTIONS', 'GET', 'POST'} - 终端: auth.dashboard_redirect
2025-05-09 15:33:13,991 - app - INFO - 路由: /create_test_user - 方法: {'OPTIONS', 'POST'} - 终端: auth.create_test_user
2025-05-09 15:33:13,992 - app - INFO - 路由: /check - 方法: {'OPTIONS', 'GET', 'HEAD'} - 终端: auth.check_auth
2025-05-09 15:33:13,994 - app - INFO - 路由: /create_test_project - 方法: {'OPTIONS', 'POST'} - 终端: auth.create_test_project
2025-05-09 15:33:13,996 - app - INFO - 路由: /logout_all - 方法: {'OPTIONS', 'POST'} - 终端: auth.logout_all
2025-05-09 15:33:13,997 - app - INFO - 路由: /dashboard/data - 方法: {'OPTIONS', 'GET', 'HEAD'} - 终端: auth.dashboard_data
2025-05-09 15:33:13,998 - app - INFO - 路由: /check_token - 方法: {'OPTIONS', 'GET', 'HEAD'} - 终端: auth.check_token
2025-05-09 15:33:14,000 - app - INFO - 路由: /create_user - 方法: {'OPTIONS', 'POST'} - 终端: auth.create_user
2025-05-09 15:33:14,000 - app - INFO - 路由: /user_info - 方法: {'OPTIONS', 'GET', 'HEAD'} - 终端: auth.get_user_info
2025-05-09 15:33:14,001 - app - INFO - 路由: /user/<int:user_id> - 方法: {'DELETE', 'OPTIONS'} - 终端: auth.delete_user
2025-05-09 15:33:14,002 - app - INFO - 路由: /users/<int:user_id>/roles - 方法: {'OPTIONS', 'GET', 'HEAD'} - 终端: auth.get_user_roles
2025-05-09 15:33:14,003 - app - INFO - 路由: /users/<int:user_id>/roles - 方法: {'PUT', 'OPTIONS'} - 终端: auth.update_user_roles
2025-05-09 15:33:14,005 - app - INFO - 路由: /users/<int:user_id>/notifications - 方法: {'OPTIONS', 'GET', 'HEAD'} - 终端: auth.get_user_notifications
2025-05-09 15:33:14,005 - app - INFO - 路由: /notifications/<int:notification_id>/read - 方法: {'PUT', 'OPTIONS'} - 终端: auth.mark_notification_as_read
2025-05-09 15:33:14,006 - app - INFO - 路由: /notifications/read_all - 方法: {'PUT', 'OPTIONS'} - 终端: auth.mark_all_notifications_as_read
2025-05-09 15:33:14,008 - app - INFO - 路由: /change-password - 方法: {'OPTIONS', 'POST'} - 终端: auth.change_password
2025-05-09 15:33:14,011 - app - INFO - 路由: /reset-password - 方法: {'OPTIONS', 'GET', 'HEAD'} - 终端: auth.reset_password_page
2025-05-09 15:33:14,011 - app - INFO - 路由: /verify-email/confirm - 方法: {'OPTIONS', 'GET', 'HEAD'} - 终端: auth.verify_email_confirm_page
2025-05-09 15:33:14,012 - app - INFO - 路由: /auth/csrf-token - 方法: {'OPTIONS', 'GET', 'HEAD'} - 终端: auth.get_csrf_token
2025-05-09 15:33:14,014 - app - INFO - 路由: /api/users/<int:user_id> - 方法: {'PUT', 'OPTIONS'} - 终端: auth.api_update_user
2025-05-09 15:33:14,015 - app - INFO - 路由: /api/users/<int:user_id> - 方法: {'DELETE', 'OPTIONS'} - 终端: auth.api_delete_user
2025-05-09 15:33:14,016 - app - INFO - 路由: /api/users - 方法: {'OPTIONS', 'GET', 'HEAD'} - 终端: auth.api_get_users
2025-05-09 15:33:14,017 - app - INFO - 路由: /api/users - 方法: {'OPTIONS', 'POST'} - 终端: auth.api_create_user
2025-05-09 15:33:14,018 - app - INFO - 路由: /auth/users/<int:user_id> - 方法: {'OPTIONS', 'GET', 'HEAD'} - 终端: auth.get_user_details
2025-05-09 15:33:14,019 - app - INFO - 路由: /api/users/<int:user_id> - 方法: {'OPTIONS', 'HEAD', 'GET', 'PUT', 'DELETE'} - 终端: auth.api_user_operations
2025-05-09 15:33:14,020 - app - INFO - 路由: /auth/user-csrf-token - 方法: {'OPTIONS', 'GET', 'HEAD'} - 终端: auth.get_user_csrf_token
2025-05-09 15:33:14,021 - app - INFO - 路由: /main/ - 方法: {'OPTIONS', 'GET', 'HEAD'} - 终端: main.index
2025-05-09 15:33:14,022 - app - INFO - 路由: /main/dashboard - 方法: {'OPTIONS', 'GET', 'HEAD'} - 终端: main.dashboard
2025-05-09 15:33:14,023 - app - INFO - 路由: /main/check_token - 方法: {'OPTIONS', 'GET', 'HEAD'} - 终端: main.check_token
2025-05-09 15:33:14,026 - app - INFO - 路由: /main/projects - 方法: {'OPTIONS', 'GET', 'HEAD'} - 终端: main.projects
2025-05-09 15:33:14,027 - app - INFO - 路由: /main/tasks - 方法: {'OPTIONS', 'GET', 'HEAD'} - 终端: main.tasks
2025-05-09 15:33:14,028 - app - INFO - 路由: /main/risks - 方法: {'OPTIONS', 'GET', 'HEAD'} - 终端: main.risks
2025-05-09 15:33:14,029 - app - INFO - 路由: /main/reports - 方法: {'OPTIONS', 'GET', 'HEAD'} - 终端: main.reports
2025-05-09 15:33:14,030 - app - INFO - 路由: /main/resources - 方法: {'OPTIONS', 'GET', 'HEAD'} - 终端: main.resources
2025-05-09 15:33:14,031 - app - INFO - 路由: /main/profile - 方法: {'OPTIONS', 'GET', 'HEAD'} - 终端: main.profile
2025-05-09 15:33:14,032 - app - INFO - 路由: /main/system/status - 方法: {'OPTIONS', 'GET', 'HEAD'} - 终端: main.system_status
2025-05-09 15:33:14,033 - app - INFO - 路由: /main/api/dashboard/data - 方法: {'OPTIONS', 'GET', 'HEAD'} - 终端: main.get_dashboard_data
2025-05-09 15:33:14,034 - app - INFO - 路由: /main/test - 方法: {'OPTIONS', 'GET', 'HEAD'} - 终端: main.test_route
2025-05-09 15:33:14,034 - app - INFO - 路由: /main/projects/detail/<int:project_id> - 方法: {'OPTIONS', 'GET', 'HEAD'} - 终端: main.project_detail_redirect
2025-05-09 15:33:14,036 - app - INFO - 路由: /main/users - 方法: {'OPTIONS', 'GET', 'HEAD'} - 终端: main.users
2025-05-09 15:33:14,037 - app - INFO - 路由: /main/debug/projects - 方法: {'OPTIONS', 'GET', 'HEAD'} - 终端: main.debug_projects
2025-05-09 15:33:14,038 - app - INFO - 路由: /main/simple/projects - 方法: {'OPTIONS', 'GET', 'HEAD'} - 终端: main.simple_projects
2025-05-09 15:33:14,039 - app - INFO - 路由: /main/static-test - 方法: {'OPTIONS', 'GET', 'HEAD'} - 终端: main.static_test
2025-05-09 15:33:14,041 - app - INFO - 路由: /main/print-projects - 方法: {'OPTIONS', 'GET', 'HEAD'} - 终端: main.print_projects
2025-05-09 15:33:14,043 - app - INFO - 路由: /main/bypass-projects - 方法: {'OPTIONS', 'GET', 'HEAD'} - 终端: main.bypass_projects
2025-05-09 15:33:14,044 - app - INFO - 路由: /main/debug-projects - 方法: {'OPTIONS', 'GET', 'HEAD'} - 终端: main.debug_projects_api
2025-05-09 15:33:14,045 - app - INFO - 路由: /projects/list - 方法: {'OPTIONS', 'GET', 'HEAD'} - 终端: projects.project_list
2025-05-09 15:33:14,046 - app - INFO - 路由: /projects/ - 方法: {'OPTIONS', 'GET', 'HEAD'} - 终端: projects.get_projects
2025-05-09 15:33:14,047 - app - INFO - 路由: /projects/ - 方法: {'OPTIONS', 'POST'} - 终端: projects.create_project
2025-05-09 15:33:14,048 - app - INFO - 路由: /projects/<int:project_id> - 方法: {'OPTIONS', 'GET', 'HEAD'} - 终端: projects.get_project
2025-05-09 15:33:14,049 - app - INFO - 路由: /projects/<int:project_id> - 方法: {'PUT', 'OPTIONS'} - 终端: projects.update_project
2025-05-09 15:33:14,050 - app - INFO - 路由: /projects/<int:project_id> - 方法: {'DELETE', 'OPTIONS'} - 终端: projects.delete_project
2025-05-09 15:33:14,050 - app - INFO - 路由: /projects/<int:project_id>/members - 方法: {'OPTIONS', 'GET', 'HEAD'} - 终端: projects.get_project_members
2025-05-09 15:33:14,052 - app - INFO - 路由: /projects/<int:project_id>/members - 方法: {'OPTIONS', 'POST'} - 终端: projects.add_project_member
2025-05-09 15:33:14,053 - app - INFO - 路由: /projects/<int:project_id>/members/<int:user_id> - 方法: {'DELETE', 'OPTIONS'} - 终端: projects.remove_project_member
2025-05-09 15:33:14,055 - app - INFO - 路由: /projects/detail/<int:project_id> - 方法: {'OPTIONS', 'GET', 'HEAD'} - 终端: projects.detail
2025-05-09 15:33:14,057 - app - INFO - 路由: /projects/api/detail/<int:project_id> - 方法: {'OPTIONS', 'GET', 'HEAD'} - 终端: projects.detail_api
2025-05-09 15:33:14,057 - app - INFO - 路由: /projects/api/projects/<int:project_id> - 方法: {'OPTIONS', 'GET', 'HEAD'} - 终端: projects.get_project_api
2025-05-09 15:33:14,058 - app - INFO - 路由: /projects/api/projects/<int:project_id> - 方法: {'PUT', 'OPTIONS'} - 终端: projects.update_project_api
2025-05-09 15:33:14,060 - app - INFO - 路由: /projects/api/projects/<int:project_id> - 方法: {'DELETE', 'OPTIONS'} - 终端: projects.delete_project_api
2025-05-09 15:33:14,061 - app - INFO - 路由: /projects/api/auth/projects - 方法: {'OPTIONS', 'GET', 'HEAD'} - 终端: projects.get_projects_api
2025-05-09 15:33:14,062 - app - INFO - 路由: /projects/api/auth/projects/<int:project_id> - 方法: {'OPTIONS', 'GET', 'HEAD'} - 终端: projects.get_project_auth_api
2025-05-09 15:33:14,063 - app - INFO - 路由: /projects/api/noauth/projects/<int:project_id> - 方法: {'OPTIONS', 'HEAD', 'GET', 'PUT', 'DELETE'} - 终端: projects.get_project_noauth
2025-05-09 15:33:14,064 - app - INFO - 路由: /projects/api/auth/projects - 方法: {'OPTIONS', 'POST'} - 终端: projects.create_project_auth
2025-05-09 15:33:14,065 - app - INFO - 路由: /projects/api/project-managers - 方法: {'OPTIONS', 'GET', 'HEAD'} - 终端: projects.get_project_managers
2025-05-09 15:33:14,066 - app - INFO - 路由: /projects/api/projects - 方法: {'OPTIONS', 'GET', 'HEAD'} - 终端: projects.get_all_projects_api
2025-05-09 15:33:14,066 - app - INFO - 路由: /projects/api/active-projects - 方法: {'OPTIONS', 'GET', 'HEAD'} - 终端: projects.get_active_projects_api
2025-05-09 15:33:14,068 - app - INFO - 路由: /projects/api/projects/<int:project_id>/members - 方法: {'OPTIONS', 'GET', 'HEAD'} - 终端: projects.get_project_members_api
2025-05-09 15:33:14,069 - app - INFO - 路由: /list - 方法: {'OPTIONS', 'GET', 'HEAD'} - 终端: project_root.project_list
2025-05-09 15:33:14,070 - app - INFO - 路由: / - 方法: {'OPTIONS', 'GET', 'HEAD'} - 终端: project_root.get_projects
2025-05-09 15:33:14,071 - app - INFO - 路由: / - 方法: {'OPTIONS', 'POST'} - 终端: project_root.create_project
2025-05-09 15:33:14,072 - app - INFO - 路由: /<int:project_id> - 方法: {'OPTIONS', 'GET', 'HEAD'} - 终端: project_root.get_project
2025-05-09 15:33:14,073 - app - INFO - 路由: /<int:project_id> - 方法: {'PUT', 'OPTIONS'} - 终端: project_root.update_project
2025-05-09 15:33:14,074 - app - INFO - 路由: /<int:project_id> - 方法: {'DELETE', 'OPTIONS'} - 终端: project_root.delete_project
2025-05-09 15:33:14,076 - app - INFO - 路由: /<int:project_id>/members - 方法: {'OPTIONS', 'GET', 'HEAD'} - 终端: project_root.get_project_members
2025-05-09 15:33:14,077 - app - INFO - 路由: /<int:project_id>/members - 方法: {'OPTIONS', 'POST'} - 终端: project_root.add_project_member
2025-05-09 15:33:14,078 - app - INFO - 路由: /<int:project_id>/members/<int:user_id> - 方法: {'DELETE', 'OPTIONS'} - 终端: project_root.remove_project_member
2025-05-09 15:33:14,079 - app - INFO - 路由: /detail/<int:project_id> - 方法: {'OPTIONS', 'GET', 'HEAD'} - 终端: project_root.detail
2025-05-09 15:33:14,080 - app - INFO - 路由: /api/detail/<int:project_id> - 方法: {'OPTIONS', 'GET', 'HEAD'} - 终端: project_root.detail_api
2025-05-09 15:33:14,081 - app - INFO - 路由: /api/projects/<int:project_id> - 方法: {'OPTIONS', 'GET', 'HEAD'} - 终端: project_root.get_project_api
2025-05-09 15:33:14,082 - app - INFO - 路由: /api/projects/<int:project_id> - 方法: {'PUT', 'OPTIONS'} - 终端: project_root.update_project_api
2025-05-09 15:33:14,083 - app - INFO - 路由: /api/projects/<int:project_id> - 方法: {'DELETE', 'OPTIONS'} - 终端: project_root.delete_project_api
2025-05-09 15:33:14,083 - app - INFO - 路由: /api/auth/projects - 方法: {'OPTIONS', 'GET', 'HEAD'} - 终端: project_root.get_projects_api
2025-05-09 15:33:14,084 - app - INFO - 路由: /api/auth/projects/<int:project_id> - 方法: {'OPTIONS', 'GET', 'HEAD'} - 终端: project_root.get_project_auth_api
2025-05-09 15:33:14,086 - app - INFO - 路由: /api/noauth/projects/<int:project_id> - 方法: {'OPTIONS', 'HEAD', 'GET', 'PUT', 'DELETE'} - 终端: project_root.get_project_noauth
2025-05-09 15:33:14,086 - app - INFO - 路由: /api/auth/projects - 方法: {'OPTIONS', 'POST'} - 终端: project_root.create_project_auth
2025-05-09 15:33:14,087 - app - INFO - 路由: /api/project-managers - 方法: {'OPTIONS', 'GET', 'HEAD'} - 终端: project_root.get_project_managers
2025-05-09 15:33:14,088 - app - INFO - 路由: /api/projects - 方法: {'OPTIONS', 'GET', 'HEAD'} - 终端: project_root.get_all_projects_api
2025-05-09 15:33:14,091 - app - INFO - 路由: /api/active-projects - 方法: {'OPTIONS', 'GET', 'HEAD'} - 终端: project_root.get_active_projects_api
2025-05-09 15:33:14,092 - app - INFO - 路由: /api/projects/<int:project_id>/members - 方法: {'OPTIONS', 'GET', 'HEAD'} - 终端: project_root.get_project_members_api
2025-05-09 15:33:14,093 - app - INFO - 路由: /tasks/ - 方法: {'OPTIONS', 'GET', 'HEAD'} - 终端: tasks.get_tasks
2025-05-09 15:33:14,094 - app - INFO - 路由: /tasks/ - 方法: {'OPTIONS', 'POST'} - 终端: tasks.create_task
2025-05-09 15:33:14,095 - app - INFO - 路由: /tasks/<int:task_id> - 方法: {'OPTIONS', 'GET', 'HEAD'} - 终端: tasks.get_task
2025-05-09 15:33:14,096 - app - INFO - 路由: /tasks/<int:task_id> - 方法: {'PUT', 'OPTIONS'} - 终端: tasks.update_task
2025-05-09 15:33:14,097 - app - INFO - 路由: /tasks/<int:task_id> - 方法: {'DELETE', 'OPTIONS'} - 终端: tasks.delete_task
2025-05-09 15:33:14,098 - app - INFO - 路由: /tasks/<int:task_id>/comments - 方法: {'OPTIONS', 'GET', 'HEAD'} - 终端: tasks.get_task_comments
2025-05-09 15:33:14,098 - app - INFO - 路由: /tasks/<int:task_id>/comments - 方法: {'OPTIONS', 'POST'} - 终端: tasks.add_task_comment
2025-05-09 15:33:14,099 - app - INFO - 路由: /tasks/<int:task_id>/attachments - 方法: {'OPTIONS', 'GET', 'HEAD'} - 终端: tasks.get_task_attachments
2025-05-09 15:33:14,100 - app - INFO - 路由: /tasks/<int:task_id>/attachments - 方法: {'OPTIONS', 'POST'} - 终端: tasks.add_task_attachment
2025-05-09 15:33:14,101 - app - INFO - 路由: /tasks/<int:task_id>/resources - 方法: {'OPTIONS', 'GET', 'HEAD'} - 终端: tasks.get_task_resources
2025-05-09 15:33:14,102 - app - INFO - 路由: /tasks/<int:task_id>/subtasks - 方法: {'OPTIONS', 'GET', 'HEAD'} - 终端: tasks.get_subtasks
2025-05-09 15:33:14,103 - app - INFO - 路由: /tasks/<int:task_id>/subtasks - 方法: {'OPTIONS', 'POST'} - 终端: tasks.create_subtask
2025-05-09 15:33:14,104 - app - INFO - 路由: /tasks/<int:task_id>/dependencies - 方法: {'OPTIONS', 'GET', 'HEAD'} - 终端: tasks.get_dependencies
2025-05-09 15:33:14,105 - app - INFO - 路由: /tasks/<int:task_id>/dependencies - 方法: {'OPTIONS', 'POST'} - 终端: tasks.add_dependency
2025-05-09 15:33:14,105 - app - INFO - 路由: /tasks/<int:task_id>/logs - 方法: {'OPTIONS', 'GET', 'HEAD'} - 终端: tasks.get_task_logs
2025-05-09 15:33:14,107 - app - INFO - 路由: /tasks/<int:task_id>/logs - 方法: {'OPTIONS', 'POST'} - 终端: tasks.add_task_log
2025-05-09 15:33:14,108 - app - INFO - 路由: /tasks/project/<int:project_id>/gantt - 方法: {'OPTIONS', 'GET', 'HEAD'} - 终端: tasks.gantt_chart
2025-05-09 15:33:14,110 - app - INFO - 路由: /tasks/project/<int:project_id>/gantt/data - 方法: {'OPTIONS', 'GET', 'HEAD'} - 终端: tasks.get_gantt_data
2025-05-09 15:33:14,111 - app - INFO - 路由: /tasks/<int:task_id>/gantt - 方法: {'PUT', 'OPTIONS'} - 终端: tasks.update_gantt_task
2025-05-09 15:33:14,112 - app - INFO - 路由: /tasks/dependencies/gantt - 方法: {'OPTIONS', 'POST'} - 终端: tasks.create_gantt_dependency
2025-05-09 15:33:14,113 - app - INFO - 路由: /tasks/<int:task_id>/dependencies/<int:dependency_id>/gantt - 方法: {'DELETE', 'OPTIONS'} - 终端: tasks.delete_gantt_dependency
2025-05-09 15:33:14,114 - app - INFO - 路由: /tasks/<int:task_id>/status - 方法: {'PUT', 'OPTIONS'} - 终端: tasks.update_task_status
2025-05-09 15:33:14,115 - app - INFO - 路由: /tasks/api/tasks/dependencies - 方法: {'OPTIONS', 'POST'} - 终端: tasks.add_task_dependency
2025-05-09 15:33:14,116 - app - INFO - 路由: /tasks/<int:task_id>/detail - 方法: {'OPTIONS', 'GET', 'HEAD'} - 终端: tasks.task_detail_api
2025-05-09 15:33:14,116 - app - INFO - 路由: /tasks/api/auth/tasks/<int:task_id>/detail - 方法: {'OPTIONS', 'GET', 'HEAD'} - 终端: tasks.task_detail_api_auth
2025-05-09 15:33:14,117 - app - INFO - 路由: /tasks/<int:task_id>/view - 方法: {'OPTIONS', 'GET', 'HEAD'} - 终端: tasks.task_detail_page
2025-05-09 15:33:14,118 - app - INFO - 路由: /tasks/<int:task_id>/edit - 方法: {'OPTIONS', 'GET', 'HEAD'} - 终端: tasks.edit_task_page
2025-05-09 15:33:14,119 - app - INFO - 路由: /tasks/api/auth/tasks/<int:task_id>/attachments - 方法: {'OPTIONS', 'POST'} - 终端: tasks.add_task_attachment_auth
2025-05-09 15:33:14,120 - app - INFO - 路由: /tasks/api/auth/tasks/<int:task_id>/attachments/<int:attachment_id>/download - 方法: {'OPTIONS', 'GET', 'HEAD'} - 终端: tasks.download_attachment_auth
2025-05-09 15:33:14,121 - app - INFO - 路由: /tasks/api/tasks/<int:task_id>/attachments - 方法: {'OPTIONS', 'POST'} - 终端: tasks.upload_attachment
2025-05-09 15:33:14,124 - app - INFO - 路由: /tasks/api/tasks/<int:task_id>/attachments/<int:attachment_id>/download - 方法: {'OPTIONS', 'GET', 'HEAD'} - 终端: tasks.download_attachment
2025-05-09 15:33:14,126 - app - INFO - 路由: /tasks/api/tasks/<int:task_id>/attachments/<int:attachment_id> - 方法: {'DELETE', 'OPTIONS'} - 终端: tasks.delete_attachment
2025-05-09 15:33:14,127 - app - INFO - 路由: /tasks/api/tasks/<int:task_id>/attachments/<int:attachment_id>/versions - 方法: {'OPTIONS', 'POST'} - 终端: tasks.upload_new_version
2025-05-09 15:33:14,128 - app - INFO - 路由: /tasks/api/tasks/<int:task_id>/attachments/<int:attachment_id>/versions - 方法: {'OPTIONS', 'GET', 'HEAD'} - 终端: tasks.get_attachment_versions
2025-05-09 15:33:14,129 - app - INFO - 路由: /tasks/api/tasks/<int:task_id>/risks - 方法: {'OPTIONS', 'GET', 'HEAD'} - 终端: tasks.task_risks_front_path
2025-05-09 15:33:14,130 - app - INFO - 路由: /tasks/<int:task_id>/risks - 方法: {'OPTIONS', 'POST'} - 终端: tasks.create_task_risk_front_path
2025-05-09 15:33:14,131 - app - INFO - 路由: /tasks/api/tasks/<int:task_id>/progress - 方法: {'OPTIONS', 'GET', 'HEAD'} - 终端: tasks.get_task_progress
2025-05-09 15:33:14,132 - app - INFO - 路由: /tasks/api/tasks/<int:task_id>/progress - 方法: {'OPTIONS', 'POST'} - 终端: tasks.update_task_progress
2025-05-09 15:33:14,132 - app - INFO - 路由: /tasks/api/tasks/<int:task_id>/progress/approve - 方法: {'OPTIONS', 'POST'} - 终端: tasks.approve_task_progress
2025-05-09 15:33:14,134 - app - INFO - 路由: /tasks/list - 方法: {'OPTIONS', 'GET', 'HEAD'} - 终端: tasks.task_list
2025-05-09 15:33:14,135 - app - INFO - 路由: /tasks/api/auth/tasks/<int:task_id>/logs - 方法: {'OPTIONS', 'GET', 'HEAD'} - 终端: tasks.get_task_logs_auth
2025-05-09 15:33:14,136 - app - INFO - 路由: /tasks/api/auth/tasks/<int:task_id>/subtasks - 方法: {'OPTIONS', 'GET', 'HEAD'} - 终端: tasks.get_subtasks_auth
2025-05-09 15:33:14,137 - app - INFO - 路由: /tasks/api/auth/tasks/<int:task_id>/comments - 方法: {'OPTIONS', 'GET', 'HEAD'} - 终端: tasks.get_task_comments_auth
2025-05-09 15:33:14,137 - app - INFO - 路由: /tasks/api/auth/tasks/<int:task_id>/attachments - 方法: {'OPTIONS', 'GET', 'HEAD'} - 终端: tasks.get_task_attachments_auth
2025-05-09 15:33:14,138 - app - INFO - 路由: /tasks/api/auth/tasks/<int:task_id>/risks - 方法: {'OPTIONS', 'GET', 'HEAD'} - 终端: tasks.get_task_risks_auth
2025-05-09 15:33:14,139 - app - INFO - 路由: /tasks/api/auth/tasks/<int:task_id>/risks - 方法: {'OPTIONS', 'POST'} - 终端: tasks.create_task_risk_auth
2025-05-09 15:33:14,140 - app - INFO - 路由: /tasks/api/auth/tasks/<int:task_id>/comments - 方法: {'OPTIONS', 'POST'} - 终端: tasks.add_task_comment_auth
2025-05-09 15:33:14,141 - app - INFO - 路由: /tasks/api/tasks/<int:task_id> - 方法: {'PUT', 'OPTIONS'} - 终端: tasks.api_update_task
2025-05-09 15:33:14,142 - app - INFO - 路由: /tasks/api/tasks/<int:task_id>/update_bypass - 方法: {'PUT', 'OPTIONS'} - 终端: tasks.update_task_bypass_csrf
2025-05-09 15:33:14,143 - app - INFO - 路由: /tasks/get-csrf-token - 方法: {'OPTIONS', 'GET', 'HEAD'} - 终端: tasks.get_csrf_token
2025-05-09 15:33:14,144 - app - INFO - 路由: /tasks/api/tasks/<int:task_id>/no_csrf - 方法: {'PUT', 'OPTIONS'} - 终端: tasks.update_task_no_csrf
2025-05-09 15:33:14,146 - app - INFO - 路由: /tasks/api/tasks/<int:task_id>/detail - 方法: {'OPTIONS', 'GET', 'HEAD'} - 终端: tasks.api_tasks_detail
2025-05-09 15:33:14,192 - app - WARNING - team_bp 未定义或无法导入
2025-05-09 15:33:14,307 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-05-09 15:33:14,313 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions 
WHERE permissions.name = ?
 LIMIT ? OFFSET ?
2025-05-09 15:33:14,316 - sqlalchemy.engine.Engine - INFO - [generated in 0.00371s] ('manage_users', 1, 0)
2025-05-09 15:33:14,319 - app.utils.permissions - INFO - 更新权限: manage_users
2025-05-09 15:33:14,321 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions 
WHERE permissions.name = ?
 LIMIT ? OFFSET ?
2025-05-09 15:33:14,324 - sqlalchemy.engine.Engine - INFO - [cached since 0.01121s ago] ('manage_roles', 1, 0)
2025-05-09 15:33:14,327 - app.utils.permissions - INFO - 更新权限: manage_roles
2025-05-09 15:33:14,328 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions 
WHERE permissions.name = ?
 LIMIT ? OFFSET ?
2025-05-09 15:33:14,330 - sqlalchemy.engine.Engine - INFO - [cached since 0.01766s ago] ('manage_all_projects', 1, 0)
2025-05-09 15:33:14,332 - app.utils.permissions - INFO - 更新权限: manage_all_projects
2025-05-09 15:33:14,333 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions 
WHERE permissions.name = ?
 LIMIT ? OFFSET ?
2025-05-09 15:33:14,336 - sqlalchemy.engine.Engine - INFO - [cached since 0.0227s ago] ('manage_project', 1, 0)
2025-05-09 15:33:14,337 - app.utils.permissions - INFO - 更新权限: manage_project
2025-05-09 15:33:14,338 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions 
WHERE permissions.name = ?
 LIMIT ? OFFSET ?
2025-05-09 15:33:14,340 - sqlalchemy.engine.Engine - INFO - [cached since 0.02725s ago] ('manage_all_tasks', 1, 0)
2025-05-09 15:33:14,342 - app.utils.permissions - INFO - 更新权限: manage_all_tasks
2025-05-09 15:33:14,344 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions 
WHERE permissions.name = ?
 LIMIT ? OFFSET ?
2025-05-09 15:33:14,346 - sqlalchemy.engine.Engine - INFO - [cached since 0.03392s ago] ('manage_task', 1, 0)
2025-05-09 15:33:14,348 - app.utils.permissions - INFO - 更新权限: manage_task
2025-05-09 15:33:14,349 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions 
WHERE permissions.name = ?
 LIMIT ? OFFSET ?
2025-05-09 15:33:14,350 - sqlalchemy.engine.Engine - INFO - [cached since 0.03839s ago] ('view_project', 1, 0)
2025-05-09 15:33:14,353 - app.utils.permissions - INFO - 更新权限: view_project
2025-05-09 15:33:14,355 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions 
WHERE permissions.name = ?
 LIMIT ? OFFSET ?
2025-05-09 15:33:14,356 - sqlalchemy.engine.Engine - INFO - [cached since 0.04341s ago] ('view_task', 1, 0)
2025-05-09 15:33:14,358 - app.utils.permissions - INFO - 更新权限: view_task
2025-05-09 15:33:14,360 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions 
WHERE permissions.name = ?
 LIMIT ? OFFSET ?
2025-05-09 15:33:14,362 - sqlalchemy.engine.Engine - INFO - [cached since 0.0495s ago] ('manage_resources', 1, 0)
2025-05-09 15:33:14,363 - app.utils.permissions - INFO - 更新权限: manage_resources
2025-05-09 15:33:14,366 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions 
WHERE permissions.name = ?
 LIMIT ? OFFSET ?
2025-05-09 15:33:14,367 - sqlalchemy.engine.Engine - INFO - [cached since 0.05421s ago] ('manage_risks', 1, 0)
2025-05-09 15:33:14,368 - app.utils.permissions - INFO - 更新权限: manage_risks
2025-05-09 15:33:14,370 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions 
WHERE permissions.name = ?
 LIMIT ? OFFSET ?
2025-05-09 15:33:14,371 - sqlalchemy.engine.Engine - INFO - [cached since 0.05863s ago] ('view_reports', 1, 0)
2025-05-09 15:33:14,372 - app.utils.permissions - INFO - 更新权限: view_reports
2025-05-09 15:33:14,374 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions 
WHERE permissions.name = ?
 LIMIT ? OFFSET ?
2025-05-09 15:33:14,376 - sqlalchemy.engine.Engine - INFO - [cached since 0.06315s ago] ('create_task', 1, 0)
2025-05-09 15:33:14,378 - app.utils.permissions - INFO - 更新权限: create_task
2025-05-09 15:33:14,379 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions 
WHERE permissions.name = ?
 LIMIT ? OFFSET ?
2025-05-09 15:33:14,381 - sqlalchemy.engine.Engine - INFO - [cached since 0.06817s ago] ('create_project', 1, 0)
2025-05-09 15:33:14,382 - app.utils.permissions - INFO - 更新权限: create_project
2025-05-09 15:33:14,384 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions 
WHERE permissions.name = ?
 LIMIT ? OFFSET ?
2025-05-09 15:33:14,385 - sqlalchemy.engine.Engine - INFO - [cached since 0.0726s ago] ('assign_task', 1, 0)
2025-05-09 15:33:14,386 - app.utils.permissions - INFO - 更新权限: assign_task
2025-05-09 15:33:14,388 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions 
WHERE permissions.name = ?
 LIMIT ? OFFSET ?
2025-05-09 15:33:14,390 - sqlalchemy.engine.Engine - INFO - [cached since 0.07725s ago] ('change_project_status', 1, 0)
2025-05-09 15:33:14,392 - app.utils.permissions - INFO - 更新权限: change_project_status
2025-05-09 15:33:14,394 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions 
WHERE permissions.name = ?
 LIMIT ? OFFSET ?
2025-05-09 15:33:14,396 - sqlalchemy.engine.Engine - INFO - [cached since 0.08327s ago] ('change_task_status', 1, 0)
2025-05-09 15:33:14,398 - app.utils.permissions - INFO - 更新权限: change_task_status
2025-05-09 15:33:14,399 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-05-09 15:33:14,401 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-05-09 15:33:14,402 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions
2025-05-09 15:33:14,404 - sqlalchemy.engine.Engine - INFO - [generated in 0.00188s] ()
2025-05-09 15:33:14,407 - sqlalchemy.engine.Engine - INFO - SELECT roles.id AS roles_id, roles.name AS roles_name, roles.description AS roles_description, roles.created_at AS roles_created_at 
FROM roles 
WHERE roles.name = ?
 LIMIT ? OFFSET ?
2025-05-09 15:33:14,410 - sqlalchemy.engine.Engine - INFO - [generated in 0.00242s] ('admin', 1, 0)
2025-05-09 15:33:14,412 - app.utils.permissions - INFO - 更新角色: admin
2025-05-09 15:33:14,414 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions, role_permissions 
WHERE ? = role_permissions.role_id AND permissions.id = role_permissions.permission_id
2025-05-09 15:33:14,416 - sqlalchemy.engine.Engine - INFO - [generated in 0.00276s] (1,)
2025-05-09 15:33:14,419 - app.utils.permissions - INFO - 为管理员角色添加所有权限: 16个
2025-05-09 15:33:14,420 - sqlalchemy.engine.Engine - INFO - SELECT roles.id AS roles_id, roles.name AS roles_name, roles.description AS roles_description, roles.created_at AS roles_created_at 
FROM roles 
WHERE roles.name = ?
 LIMIT ? OFFSET ?
2025-05-09 15:33:14,422 - sqlalchemy.engine.Engine - INFO - [cached since 0.01433s ago] ('manager', 1, 0)
2025-05-09 15:33:14,423 - app.utils.permissions - INFO - 更新角色: manager
2025-05-09 15:33:14,425 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions, role_permissions 
WHERE ? = role_permissions.role_id AND permissions.id = role_permissions.permission_id
2025-05-09 15:33:14,426 - sqlalchemy.engine.Engine - INFO - [cached since 0.01251s ago] (2,)
2025-05-09 15:33:14,429 - app.utils.permissions - INFO - 为角色 manager 添加权限: manage_project
2025-05-09 15:33:14,431 - app.utils.permissions - INFO - 为角色 manager 添加权限: manage_task
2025-05-09 15:33:14,432 - app.utils.permissions - INFO - 为角色 manager 添加权限: view_project
2025-05-09 15:33:14,432 - app.utils.permissions - INFO - 为角色 manager 添加权限: view_task
2025-05-09 15:33:14,433 - app.utils.permissions - INFO - 为角色 manager 添加权限: manage_resources
2025-05-09 15:33:14,434 - app.utils.permissions - INFO - 为角色 manager 添加权限: manage_risks
2025-05-09 15:33:14,435 - app.utils.permissions - INFO - 为角色 manager 添加权限: view_reports
2025-05-09 15:33:14,437 - app.utils.permissions - INFO - 为角色 manager 添加权限: create_project
2025-05-09 15:33:14,438 - app.utils.permissions - INFO - 为角色 manager 添加权限: create_task
2025-05-09 15:33:14,438 - app.utils.permissions - INFO - 为角色 manager 添加权限: assign_task
2025-05-09 15:33:14,439 - app.utils.permissions - INFO - 为角色 manager 添加权限: change_project_status
2025-05-09 15:33:14,440 - app.utils.permissions - INFO - 为角色 manager 添加权限: change_task_status
2025-05-09 15:33:14,442 - sqlalchemy.engine.Engine - INFO - SELECT roles.id AS roles_id, roles.name AS roles_name, roles.description AS roles_description, roles.created_at AS roles_created_at 
FROM roles 
WHERE roles.name = ?
 LIMIT ? OFFSET ?
2025-05-09 15:33:14,444 - sqlalchemy.engine.Engine - INFO - [cached since 0.03687s ago] ('user', 1, 0)
2025-05-09 15:33:14,446 - app.utils.permissions - INFO - 更新角色: user
2025-05-09 15:33:14,448 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions, role_permissions 
WHERE ? = role_permissions.role_id AND permissions.id = role_permissions.permission_id
2025-05-09 15:33:14,449 - sqlalchemy.engine.Engine - INFO - [cached since 0.03446s ago] (5,)
2025-05-09 15:33:14,451 - app.utils.permissions - INFO - 为角色 user 添加权限: view_project
2025-05-09 15:33:14,452 - app.utils.permissions - INFO - 为角色 user 添加权限: view_task
2025-05-09 15:33:14,453 - app.utils.permissions - INFO - 为角色 user 添加权限: view_reports
2025-05-09 15:33:14,454 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-05-09 15:33:14,455 - app.utils.permissions - INFO - 角色和权限初始化完成
2025-05-09 15:33:14,456 - __main__ - INFO - 角色和权限初始化成功
2025-05-09 15:33:14,457 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-05-09 15:33:14,459 - sqlalchemy.engine.Engine - INFO - SELECT users.id AS users_id, users.username AS users_username, users.email AS users_email, users.name AS users_name, users.password_hash AS users_password_hash, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.last_login AS users_last_login 
FROM users 
WHERE users.username = ?
 LIMIT ? OFFSET ?
2025-05-09 15:33:14,461 - sqlalchemy.engine.Engine - INFO - [generated in 0.00162s] ('system', 1, 0)
2025-05-09 15:33:14,463 - sqlalchemy.engine.Engine - INFO - SELECT projects.id AS projects_id, projects.name AS projects_name, projects.description AS projects_description, projects.status AS projects_status, projects.start_date AS projects_start_date, projects.end_date AS projects_end_date, projects.progress AS projects_progress, projects.created_at AS projects_created_at, projects.updated_at AS projects_updated_at, projects.manager_id AS projects_manager_id, projects.owner_id AS projects_owner_id 
FROM projects 
WHERE projects.name = ?
 LIMIT ? OFFSET ?
2025-05-09 15:33:14,466 - sqlalchemy.engine.Engine - INFO - [generated in 0.00151s] ('Test Project', 1, 0)
2025-05-09 15:33:14,467 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-05-09 15:33:14,469 - __main__ - INFO - 数据库初始化完成
2025-05-09 15:33:14,469 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-05-09 15:33:14,471 - sqlalchemy.engine.Engine - INFO - SELECT users.id AS users_id, users.username AS users_username, users.email AS users_email, users.name AS users_name, users.password_hash AS users_password_hash, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.last_login AS users_last_login 
FROM users 
WHERE users.username = ?
 LIMIT ? OFFSET ?
2025-05-09 15:33:14,472 - sqlalchemy.engine.Engine - INFO - [cached since 0.01272s ago] ('system', 1, 0)
2025-05-09 15:33:14,481 - sqlalchemy.engine.Engine - INFO - INSERT INTO resource_usages (user_id, cpu_usage, memory_usage, disk_usage, network_usage, recorded_at) VALUES (?, ?, ?, ?, ?, ?)
2025-05-09 15:33:14,483 - sqlalchemy.engine.Engine - INFO - [generated in 0.00278s] (2, 11.8, 52.1, 10.9, 0.0, '2025-05-09 07:33:14.478752')
2025-05-09 15:33:14,489 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-05-09 15:33:14,495 - __main__ - INFO - 系统资源检查完成
2025-05-09 15:33:14,496 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-05-09 15:33:14,498 - sqlalchemy.engine.Engine - INFO - DELETE FROM resource_usages WHERE resource_usages.recorded_at < ?
2025-05-09 15:33:14,500 - sqlalchemy.engine.Engine - INFO - [generated in 0.00201s] ('2025-04-09 07:33:14.496425',)
2025-05-09 15:33:14,502 - sqlalchemy.engine.Engine - INFO - DELETE FROM system_alerts WHERE system_alerts.is_resolved = 1 AND system_alerts.created_at < ?
2025-05-09 15:33:14,503 - sqlalchemy.engine.Engine - INFO - [generated in 0.00136s] ('2025-05-02 07:33:14.501753',)
2025-05-09 15:33:14,504 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-05-09 15:33:14,506 - __main__ - INFO - 旧数据清理完成
2025-05-09 15:33:14,512 - werkzeug - WARNING -  * Debugger is active!
2025-05-09 15:33:14,516 - werkzeug - INFO -  * Debugger PIN: 670-037-726
2025-05-09 15:35:13,323 - werkzeug - INFO -  * Detected change in 'D:\\tmp\\work\\run.py', reloading
2025-05-09 15:35:13,549 - werkzeug - INFO -  * Restarting with stat
2025-05-09 15:35:14,237 - app - INFO - File logging handler initialized successfully
2025-05-09 15:35:14,239 - app - INFO - Console logging handler initialized successfully
2025-05-09 15:35:14,240 - app - INFO - Application logging configuration completed
2025-05-09 15:35:14,241 - app - INFO - Development configuration initialized
2025-05-09 15:35:14,271 - app - INFO - Logging setup completed successfully
2025-05-09 15:35:14,578 - app - INFO - 已注册的路由:
2025-05-09 15:35:14,579 - app - INFO - 路由: /static/<path:filename> - 方法: {'OPTIONS', 'GET', 'HEAD'} - 终端: static
2025-05-09 15:35:14,581 - app - INFO - 路由: /api/users/<int:user_id> - 方法: {'GET', 'OPTIONS', 'DELETE', 'POST', 'PUT', 'HEAD'} - 终端: user_api_exempt.user_api_exempt_route
2025-05-09 15:35:14,583 - app - INFO - 路由: /api/users - 方法: {'GET', 'OPTIONS', 'DELETE', 'POST', 'PUT', 'HEAD'} - 终端: user_api_exempt.user_api_exempt_route
2025-05-09 15:35:14,584 - app - INFO - 路由: /tasks/<int:task_id>/dependencies/<int:dependency_id>/gantt - 方法: {'OPTIONS', 'DELETE'} - 终端: task_api_exempt.task_api_exempt_route
2025-05-09 15:35:14,585 - app - INFO - 路由: /tasks/<int:task_id>/gantt - 方法: {'OPTIONS', 'PUT'} - 终端: task_api_exempt.task_api_exempt_route
2025-05-09 15:35:14,586 - app - INFO - 路由: /tasks/project/<int:project_id>/gantt - 方法: {'OPTIONS', 'GET', 'HEAD'} - 终端: task_api_exempt.task_api_exempt_route
2025-05-09 15:35:14,588 - app - INFO - 路由: /tasks/project/<int:project_id>/gantt/data - 方法: {'OPTIONS', 'GET', 'HEAD'} - 终端: task_api_exempt.task_api_exempt_route
2025-05-09 15:35:14,589 - app - INFO - 路由: /api/tasks/<int:task_id>/no_csrf - 方法: {'GET', 'OPTIONS', 'DELETE', 'POST', 'PUT', 'HEAD'} - 终端: task_api_exempt.task_api_exempt_route
2025-05-09 15:35:14,590 - app - INFO - 路由: /api/tasks/<int:task_id> - 方法: {'GET', 'OPTIONS', 'DELETE', 'POST', 'PUT', 'HEAD'} - 终端: task_api_exempt.task_api_exempt_route
2025-05-09 15:35:14,591 - app - INFO - 路由: /tasks/dependencies/gantt - 方法: {'POST', 'OPTIONS'} - 终端: task_api_exempt.task_api_exempt_route
2025-05-09 15:35:14,592 - app - INFO - 路由: /api/tasks - 方法: {'GET', 'OPTIONS', 'DELETE', 'POST', 'PUT', 'HEAD'} - 终端: task_api_exempt.task_api_exempt_route
2025-05-09 15:35:14,593 - app - INFO - 路由: /login - 方法: {'OPTIONS', 'GET', 'HEAD'} - 终端: auth.login_page
2025-05-09 15:35:14,594 - app - INFO - 路由: /login - 方法: {'POST', 'OPTIONS'} - 终端: auth.login
2025-05-09 15:35:14,596 - app - INFO - 路由: /register - 方法: {'OPTIONS', 'GET', 'HEAD'} - 终端: auth.register_page
2025-05-09 15:35:14,598 - app - INFO - 路由: /register - 方法: {'POST', 'OPTIONS'} - 终端: auth.register
2025-05-09 15:35:14,599 - app - INFO - 路由: /logout - 方法: {'POST', 'OPTIONS', 'GET', 'HEAD'} - 终端: auth.logout
2025-05-09 15:35:14,600 - app - INFO - 路由: /refresh - 方法: {'POST', 'OPTIONS'} - 终端: auth.refresh
2025-05-09 15:35:14,601 - app - INFO - 路由: /profile - 方法: {'OPTIONS', 'GET', 'HEAD'} - 终端: auth.profile
2025-05-09 15:35:14,602 - app - INFO - 路由: /profile - 方法: {'OPTIONS', 'PUT'} - 终端: auth.update_profile
2025-05-09 15:35:14,603 - app - INFO - 路由: /users - 方法: {'OPTIONS', 'GET', 'HEAD'} - 终端: auth.get_users
2025-05-09 15:35:14,605 - app - INFO - 路由: /users/<int:user_id> - 方法: {'OPTIONS', 'GET', 'HEAD'} - 终端: auth.get_user_by_id
2025-05-09 15:35:14,606 - app - INFO - 路由: /update_user/<int:user_id> - 方法: {'OPTIONS', 'PUT'} - 终端: auth.update_user
2025-05-09 15:35:14,607 - app - INFO - 路由: /roles - 方法: {'OPTIONS', 'GET', 'HEAD'} - 终端: auth.get_roles
2025-05-09 15:35:14,608 - app - INFO - 路由: /permissions - 方法: {'OPTIONS', 'GET', 'HEAD'} - 终端: auth.get_permissions
2025-05-09 15:35:14,609 - app - INFO - 路由: /permissions - 方法: {'POST', 'OPTIONS'} - 终端: auth.create_permission
2025-05-09 15:35:14,610 - app - INFO - 路由: /permissions/<int:permission_id> - 方法: {'OPTIONS', 'GET', 'HEAD'} - 终端: auth.get_permission
2025-05-09 15:35:14,611 - app - INFO - 路由: /permissions/<int:permission_id> - 方法: {'OPTIONS', 'PUT'} - 终端: auth.update_permission
2025-05-09 15:35:14,613 - app - INFO - 路由: /permissions/<int:permission_id> - 方法: {'OPTIONS', 'DELETE'} - 终端: auth.delete_permission
2025-05-09 15:35:14,614 - app - INFO - 路由: /roles - 方法: {'POST', 'OPTIONS'} - 终端: auth.create_role
2025-05-09 15:35:14,615 - app - INFO - 路由: /roles/<int:role_id> - 方法: {'OPTIONS', 'GET', 'HEAD'} - 终端: auth.get_role
2025-05-09 15:35:14,616 - app - INFO - 路由: /roles/<int:role_id>/permissions - 方法: {'OPTIONS', 'PUT'} - 终端: auth.update_role_permissions
2025-05-09 15:35:14,617 - app - INFO - 路由: /roles/<int:role_id> - 方法: {'OPTIONS', 'DELETE'} - 终端: auth.delete_role
2025-05-09 15:35:14,617 - app - INFO - 路由: /dashboard - 方法: {'OPTIONS', 'GET', 'HEAD'} - 终端: auth.dashboard
2025-05-09 15:35:14,618 - app - INFO - 路由: /dashboard/redirect - 方法: {'POST', 'OPTIONS', 'GET', 'HEAD'} - 终端: auth.dashboard_redirect
2025-05-09 15:35:14,619 - app - INFO - 路由: /create_test_user - 方法: {'POST', 'OPTIONS'} - 终端: auth.create_test_user
2025-05-09 15:35:14,620 - app - INFO - 路由: /check - 方法: {'OPTIONS', 'GET', 'HEAD'} - 终端: auth.check_auth
2025-05-09 15:35:14,622 - app - INFO - 路由: /create_test_project - 方法: {'POST', 'OPTIONS'} - 终端: auth.create_test_project
2025-05-09 15:35:14,623 - app - INFO - 路由: /logout_all - 方法: {'POST', 'OPTIONS'} - 终端: auth.logout_all
2025-05-09 15:35:14,624 - app - INFO - 路由: /dashboard/data - 方法: {'OPTIONS', 'GET', 'HEAD'} - 终端: auth.dashboard_data
2025-05-09 15:35:14,625 - app - INFO - 路由: /check_token - 方法: {'OPTIONS', 'GET', 'HEAD'} - 终端: auth.check_token
2025-05-09 15:35:14,626 - app - INFO - 路由: /create_user - 方法: {'POST', 'OPTIONS'} - 终端: auth.create_user
2025-05-09 15:35:14,627 - app - INFO - 路由: /user_info - 方法: {'OPTIONS', 'GET', 'HEAD'} - 终端: auth.get_user_info
2025-05-09 15:35:14,628 - app - INFO - 路由: /user/<int:user_id> - 方法: {'OPTIONS', 'DELETE'} - 终端: auth.delete_user
2025-05-09 15:35:14,629 - app - INFO - 路由: /users/<int:user_id>/roles - 方法: {'OPTIONS', 'GET', 'HEAD'} - 终端: auth.get_user_roles
2025-05-09 15:35:14,630 - app - INFO - 路由: /users/<int:user_id>/roles - 方法: {'OPTIONS', 'PUT'} - 终端: auth.update_user_roles
2025-05-09 15:35:14,631 - app - INFO - 路由: /users/<int:user_id>/notifications - 方法: {'OPTIONS', 'GET', 'HEAD'} - 终端: auth.get_user_notifications
2025-05-09 15:35:14,631 - app - INFO - 路由: /notifications/<int:notification_id>/read - 方法: {'OPTIONS', 'PUT'} - 终端: auth.mark_notification_as_read
2025-05-09 15:35:14,632 - app - INFO - 路由: /notifications/read_all - 方法: {'OPTIONS', 'PUT'} - 终端: auth.mark_all_notifications_as_read
2025-05-09 15:35:14,633 - app - INFO - 路由: /change-password - 方法: {'POST', 'OPTIONS'} - 终端: auth.change_password
2025-05-09 15:35:14,634 - app - INFO - 路由: /reset-password - 方法: {'OPTIONS', 'GET', 'HEAD'} - 终端: auth.reset_password_page
2025-05-09 15:35:14,635 - app - INFO - 路由: /verify-email/confirm - 方法: {'OPTIONS', 'GET', 'HEAD'} - 终端: auth.verify_email_confirm_page
2025-05-09 15:35:14,636 - app - INFO - 路由: /auth/csrf-token - 方法: {'OPTIONS', 'GET', 'HEAD'} - 终端: auth.get_csrf_token
2025-05-09 15:35:14,639 - app - INFO - 路由: /api/users/<int:user_id> - 方法: {'OPTIONS', 'PUT'} - 终端: auth.api_update_user
2025-05-09 15:35:14,640 - app - INFO - 路由: /api/users/<int:user_id> - 方法: {'OPTIONS', 'DELETE'} - 终端: auth.api_delete_user
2025-05-09 15:35:14,641 - app - INFO - 路由: /api/users - 方法: {'OPTIONS', 'GET', 'HEAD'} - 终端: auth.api_get_users
2025-05-09 15:35:14,642 - app - INFO - 路由: /api/users - 方法: {'POST', 'OPTIONS'} - 终端: auth.api_create_user
2025-05-09 15:35:14,643 - app - INFO - 路由: /auth/users/<int:user_id> - 方法: {'OPTIONS', 'GET', 'HEAD'} - 终端: auth.get_user_details
2025-05-09 15:35:14,644 - app - INFO - 路由: /api/users/<int:user_id> - 方法: {'GET', 'OPTIONS', 'DELETE', 'PUT', 'HEAD'} - 终端: auth.api_user_operations
2025-05-09 15:35:14,645 - app - INFO - 路由: /auth/user-csrf-token - 方法: {'OPTIONS', 'GET', 'HEAD'} - 终端: auth.get_user_csrf_token
2025-05-09 15:35:14,646 - app - INFO - 路由: /main/ - 方法: {'OPTIONS', 'GET', 'HEAD'} - 终端: main.index
2025-05-09 15:35:14,647 - app - INFO - 路由: /main/dashboard - 方法: {'OPTIONS', 'GET', 'HEAD'} - 终端: main.dashboard
2025-05-09 15:35:14,648 - app - INFO - 路由: /main/check_token - 方法: {'OPTIONS', 'GET', 'HEAD'} - 终端: main.check_token
2025-05-09 15:35:14,648 - app - INFO - 路由: /main/projects - 方法: {'OPTIONS', 'GET', 'HEAD'} - 终端: main.projects
2025-05-09 15:35:14,649 - app - INFO - 路由: /main/tasks - 方法: {'OPTIONS', 'GET', 'HEAD'} - 终端: main.tasks
2025-05-09 15:35:14,650 - app - INFO - 路由: /main/risks - 方法: {'OPTIONS', 'GET', 'HEAD'} - 终端: main.risks
2025-05-09 15:35:14,651 - app - INFO - 路由: /main/reports - 方法: {'OPTIONS', 'GET', 'HEAD'} - 终端: main.reports
2025-05-09 15:35:14,652 - app - INFO - 路由: /main/resources - 方法: {'OPTIONS', 'GET', 'HEAD'} - 终端: main.resources
2025-05-09 15:35:14,653 - app - INFO - 路由: /main/profile - 方法: {'OPTIONS', 'GET', 'HEAD'} - 终端: main.profile
2025-05-09 15:35:14,654 - app - INFO - 路由: /main/system/status - 方法: {'OPTIONS', 'GET', 'HEAD'} - 终端: main.system_status
2025-05-09 15:35:14,654 - app - INFO - 路由: /main/api/dashboard/data - 方法: {'OPTIONS', 'GET', 'HEAD'} - 终端: main.get_dashboard_data
2025-05-09 15:35:14,656 - app - INFO - 路由: /main/test - 方法: {'OPTIONS', 'GET', 'HEAD'} - 终端: main.test_route
2025-05-09 15:35:14,658 - app - INFO - 路由: /main/projects/detail/<int:project_id> - 方法: {'OPTIONS', 'GET', 'HEAD'} - 终端: main.project_detail_redirect
2025-05-09 15:35:14,659 - app - INFO - 路由: /main/users - 方法: {'OPTIONS', 'GET', 'HEAD'} - 终端: main.users
2025-05-09 15:35:14,661 - app - INFO - 路由: /main/debug/projects - 方法: {'OPTIONS', 'GET', 'HEAD'} - 终端: main.debug_projects
2025-05-09 15:35:14,662 - app - INFO - 路由: /main/simple/projects - 方法: {'OPTIONS', 'GET', 'HEAD'} - 终端: main.simple_projects
2025-05-09 15:35:14,663 - app - INFO - 路由: /main/static-test - 方法: {'OPTIONS', 'GET', 'HEAD'} - 终端: main.static_test
2025-05-09 15:35:14,664 - app - INFO - 路由: /main/print-projects - 方法: {'OPTIONS', 'GET', 'HEAD'} - 终端: main.print_projects
2025-05-09 15:35:14,665 - app - INFO - 路由: /main/bypass-projects - 方法: {'OPTIONS', 'GET', 'HEAD'} - 终端: main.bypass_projects
2025-05-09 15:35:14,666 - app - INFO - 路由: /main/debug-projects - 方法: {'OPTIONS', 'GET', 'HEAD'} - 终端: main.debug_projects_api
2025-05-09 15:35:14,666 - app - INFO - 路由: /projects/list - 方法: {'OPTIONS', 'GET', 'HEAD'} - 终端: projects.project_list
2025-05-09 15:35:14,667 - app - INFO - 路由: /projects/ - 方法: {'OPTIONS', 'GET', 'HEAD'} - 终端: projects.get_projects
2025-05-09 15:35:14,668 - app - INFO - 路由: /projects/ - 方法: {'POST', 'OPTIONS'} - 终端: projects.create_project
2025-05-09 15:35:14,669 - app - INFO - 路由: /projects/<int:project_id> - 方法: {'OPTIONS', 'GET', 'HEAD'} - 终端: projects.get_project
2025-05-09 15:35:14,670 - app - INFO - 路由: /projects/<int:project_id> - 方法: {'OPTIONS', 'PUT'} - 终端: projects.update_project
2025-05-09 15:35:14,671 - app - INFO - 路由: /projects/<int:project_id> - 方法: {'OPTIONS', 'DELETE'} - 终端: projects.delete_project
2025-05-09 15:35:14,672 - app - INFO - 路由: /projects/<int:project_id>/members - 方法: {'OPTIONS', 'GET', 'HEAD'} - 终端: projects.get_project_members
2025-05-09 15:35:14,673 - app - INFO - 路由: /projects/<int:project_id>/members - 方法: {'POST', 'OPTIONS'} - 终端: projects.add_project_member
2025-05-09 15:35:14,674 - app - INFO - 路由: /projects/<int:project_id>/members/<int:user_id> - 方法: {'OPTIONS', 'DELETE'} - 终端: projects.remove_project_member
2025-05-09 15:35:14,675 - app - INFO - 路由: /projects/detail/<int:project_id> - 方法: {'OPTIONS', 'GET', 'HEAD'} - 终端: projects.detail
2025-05-09 15:35:14,677 - app - INFO - 路由: /projects/api/detail/<int:project_id> - 方法: {'OPTIONS', 'GET', 'HEAD'} - 终端: projects.detail_api
2025-05-09 15:35:14,678 - app - INFO - 路由: /projects/api/projects/<int:project_id> - 方法: {'OPTIONS', 'GET', 'HEAD'} - 终端: projects.get_project_api
2025-05-09 15:35:14,679 - app - INFO - 路由: /projects/api/projects/<int:project_id> - 方法: {'OPTIONS', 'PUT'} - 终端: projects.update_project_api
2025-05-09 15:35:14,680 - app - INFO - 路由: /projects/api/projects/<int:project_id> - 方法: {'OPTIONS', 'DELETE'} - 终端: projects.delete_project_api
2025-05-09 15:35:14,681 - app - INFO - 路由: /projects/api/auth/projects - 方法: {'OPTIONS', 'GET', 'HEAD'} - 终端: projects.get_projects_api
2025-05-09 15:35:14,682 - app - INFO - 路由: /projects/api/auth/projects/<int:project_id> - 方法: {'OPTIONS', 'GET', 'HEAD'} - 终端: projects.get_project_auth_api
2025-05-09 15:35:14,683 - app - INFO - 路由: /projects/api/noauth/projects/<int:project_id> - 方法: {'GET', 'OPTIONS', 'DELETE', 'PUT', 'HEAD'} - 终端: projects.get_project_noauth
2025-05-09 15:35:14,683 - app - INFO - 路由: /projects/api/auth/projects - 方法: {'POST', 'OPTIONS'} - 终端: projects.create_project_auth
2025-05-09 15:35:14,684 - app - INFO - 路由: /projects/api/project-managers - 方法: {'OPTIONS', 'GET', 'HEAD'} - 终端: projects.get_project_managers
2025-05-09 15:35:14,685 - app - INFO - 路由: /projects/api/projects - 方法: {'OPTIONS', 'GET', 'HEAD'} - 终端: projects.get_all_projects_api
2025-05-09 15:35:14,686 - app - INFO - 路由: /projects/api/active-projects - 方法: {'OPTIONS', 'GET', 'HEAD'} - 终端: projects.get_active_projects_api
2025-05-09 15:35:14,688 - app - INFO - 路由: /projects/api/projects/<int:project_id>/members - 方法: {'OPTIONS', 'GET', 'HEAD'} - 终端: projects.get_project_members_api
2025-05-09 15:35:14,689 - app - INFO - 路由: /list - 方法: {'OPTIONS', 'GET', 'HEAD'} - 终端: project_root.project_list
2025-05-09 15:35:14,691 - app - INFO - 路由: / - 方法: {'OPTIONS', 'GET', 'HEAD'} - 终端: project_root.get_projects
2025-05-09 15:35:14,692 - app - INFO - 路由: / - 方法: {'POST', 'OPTIONS'} - 终端: project_root.create_project
2025-05-09 15:35:14,693 - app - INFO - 路由: /<int:project_id> - 方法: {'OPTIONS', 'GET', 'HEAD'} - 终端: project_root.get_project
2025-05-09 15:35:14,693 - app - INFO - 路由: /<int:project_id> - 方法: {'OPTIONS', 'PUT'} - 终端: project_root.update_project
2025-05-09 15:35:14,694 - app - INFO - 路由: /<int:project_id> - 方法: {'OPTIONS', 'DELETE'} - 终端: project_root.delete_project
2025-05-09 15:35:14,696 - app - INFO - 路由: /<int:project_id>/members - 方法: {'OPTIONS', 'GET', 'HEAD'} - 终端: project_root.get_project_members
2025-05-09 15:35:14,697 - app - INFO - 路由: /<int:project_id>/members - 方法: {'POST', 'OPTIONS'} - 终端: project_root.add_project_member
2025-05-09 15:35:14,698 - app - INFO - 路由: /<int:project_id>/members/<int:user_id> - 方法: {'OPTIONS', 'DELETE'} - 终端: project_root.remove_project_member
2025-05-09 15:35:14,699 - app - INFO - 路由: /detail/<int:project_id> - 方法: {'OPTIONS', 'GET', 'HEAD'} - 终端: project_root.detail
2025-05-09 15:35:14,700 - app - INFO - 路由: /api/detail/<int:project_id> - 方法: {'OPTIONS', 'GET', 'HEAD'} - 终端: project_root.detail_api
2025-05-09 15:35:14,700 - app - INFO - 路由: /api/projects/<int:project_id> - 方法: {'OPTIONS', 'GET', 'HEAD'} - 终端: project_root.get_project_api
2025-05-09 15:35:14,701 - app - INFO - 路由: /api/projects/<int:project_id> - 方法: {'OPTIONS', 'PUT'} - 终端: project_root.update_project_api
2025-05-09 15:35:14,702 - app - INFO - 路由: /api/projects/<int:project_id> - 方法: {'OPTIONS', 'DELETE'} - 终端: project_root.delete_project_api
2025-05-09 15:35:14,703 - app - INFO - 路由: /api/auth/projects - 方法: {'OPTIONS', 'GET', 'HEAD'} - 终端: project_root.get_projects_api
2025-05-09 15:35:14,704 - app - INFO - 路由: /api/auth/projects/<int:project_id> - 方法: {'OPTIONS', 'GET', 'HEAD'} - 终端: project_root.get_project_auth_api
2025-05-09 15:35:14,705 - app - INFO - 路由: /api/noauth/projects/<int:project_id> - 方法: {'GET', 'OPTIONS', 'DELETE', 'PUT', 'HEAD'} - 终端: project_root.get_project_noauth
2025-05-09 15:35:14,706 - app - INFO - 路由: /api/auth/projects - 方法: {'POST', 'OPTIONS'} - 终端: project_root.create_project_auth
2025-05-09 15:35:14,708 - app - INFO - 路由: /api/project-managers - 方法: {'OPTIONS', 'GET', 'HEAD'} - 终端: project_root.get_project_managers
2025-05-09 15:35:14,709 - app - INFO - 路由: /api/projects - 方法: {'OPTIONS', 'GET', 'HEAD'} - 终端: project_root.get_all_projects_api
2025-05-09 15:35:14,711 - app - INFO - 路由: /api/active-projects - 方法: {'OPTIONS', 'GET', 'HEAD'} - 终端: project_root.get_active_projects_api
2025-05-09 15:35:14,712 - app - INFO - 路由: /api/projects/<int:project_id>/members - 方法: {'OPTIONS', 'GET', 'HEAD'} - 终端: project_root.get_project_members_api
2025-05-09 15:35:14,713 - app - INFO - 路由: /tasks/ - 方法: {'OPTIONS', 'GET', 'HEAD'} - 终端: tasks.get_tasks
2025-05-09 15:35:14,713 - app - INFO - 路由: /tasks/ - 方法: {'POST', 'OPTIONS'} - 终端: tasks.create_task
2025-05-09 15:35:14,715 - app - INFO - 路由: /tasks/<int:task_id> - 方法: {'OPTIONS', 'GET', 'HEAD'} - 终端: tasks.get_task
2025-05-09 15:35:14,715 - app - INFO - 路由: /tasks/<int:task_id> - 方法: {'OPTIONS', 'PUT'} - 终端: tasks.update_task
2025-05-09 15:35:14,716 - app - INFO - 路由: /tasks/<int:task_id> - 方法: {'OPTIONS', 'DELETE'} - 终端: tasks.delete_task
2025-05-09 15:35:14,717 - app - INFO - 路由: /tasks/<int:task_id>/comments - 方法: {'OPTIONS', 'GET', 'HEAD'} - 终端: tasks.get_task_comments
2025-05-09 15:35:14,718 - app - INFO - 路由: /tasks/<int:task_id>/comments - 方法: {'POST', 'OPTIONS'} - 终端: tasks.add_task_comment
2025-05-09 15:35:14,719 - app - INFO - 路由: /tasks/<int:task_id>/attachments - 方法: {'OPTIONS', 'GET', 'HEAD'} - 终端: tasks.get_task_attachments
2025-05-09 15:35:14,720 - app - INFO - 路由: /tasks/<int:task_id>/attachments - 方法: {'POST', 'OPTIONS'} - 终端: tasks.add_task_attachment
2025-05-09 15:35:14,721 - app - INFO - 路由: /tasks/<int:task_id>/resources - 方法: {'OPTIONS', 'GET', 'HEAD'} - 终端: tasks.get_task_resources
2025-05-09 15:35:14,722 - app - INFO - 路由: /tasks/<int:task_id>/subtasks - 方法: {'OPTIONS', 'GET', 'HEAD'} - 终端: tasks.get_subtasks
2025-05-09 15:35:14,723 - app - INFO - 路由: /tasks/<int:task_id>/subtasks - 方法: {'POST', 'OPTIONS'} - 终端: tasks.create_subtask
2025-05-09 15:35:14,724 - app - INFO - 路由: /tasks/<int:task_id>/dependencies - 方法: {'OPTIONS', 'GET', 'HEAD'} - 终端: tasks.get_dependencies
2025-05-09 15:35:14,726 - app - INFO - 路由: /tasks/<int:task_id>/dependencies - 方法: {'POST', 'OPTIONS'} - 终端: tasks.add_dependency
2025-05-09 15:35:14,727 - app - INFO - 路由: /tasks/<int:task_id>/logs - 方法: {'OPTIONS', 'GET', 'HEAD'} - 终端: tasks.get_task_logs
2025-05-09 15:35:14,728 - app - INFO - 路由: /tasks/<int:task_id>/logs - 方法: {'POST', 'OPTIONS'} - 终端: tasks.add_task_log
2025-05-09 15:35:14,730 - app - INFO - 路由: /tasks/project/<int:project_id>/gantt - 方法: {'OPTIONS', 'GET', 'HEAD'} - 终端: tasks.gantt_chart
2025-05-09 15:35:14,731 - app - INFO - 路由: /tasks/project/<int:project_id>/gantt/data - 方法: {'OPTIONS', 'GET', 'HEAD'} - 终端: tasks.get_gantt_data
2025-05-09 15:35:14,732 - app - INFO - 路由: /tasks/<int:task_id>/gantt - 方法: {'OPTIONS', 'PUT'} - 终端: tasks.update_gantt_task
2025-05-09 15:35:14,733 - app - INFO - 路由: /tasks/dependencies/gantt - 方法: {'POST', 'OPTIONS'} - 终端: tasks.create_gantt_dependency
2025-05-09 15:35:14,734 - app - INFO - 路由: /tasks/<int:task_id>/dependencies/<int:dependency_id>/gantt - 方法: {'OPTIONS', 'DELETE'} - 终端: tasks.delete_gantt_dependency
2025-05-09 15:35:14,735 - app - INFO - 路由: /tasks/<int:task_id>/status - 方法: {'OPTIONS', 'PUT'} - 终端: tasks.update_task_status
2025-05-09 15:35:14,736 - app - INFO - 路由: /tasks/api/tasks/dependencies - 方法: {'POST', 'OPTIONS'} - 终端: tasks.add_task_dependency
2025-05-09 15:35:14,737 - app - INFO - 路由: /tasks/<int:task_id>/detail - 方法: {'OPTIONS', 'GET', 'HEAD'} - 终端: tasks.task_detail_api
2025-05-09 15:35:14,738 - app - INFO - 路由: /tasks/api/auth/tasks/<int:task_id>/detail - 方法: {'OPTIONS', 'GET', 'HEAD'} - 终端: tasks.task_detail_api_auth
2025-05-09 15:35:14,740 - app - INFO - 路由: /tasks/<int:task_id>/view - 方法: {'OPTIONS', 'GET', 'HEAD'} - 终端: tasks.task_detail_page
2025-05-09 15:35:14,741 - app - INFO - 路由: /tasks/<int:task_id>/edit - 方法: {'OPTIONS', 'GET', 'HEAD'} - 终端: tasks.edit_task_page
2025-05-09 15:35:14,742 - app - INFO - 路由: /tasks/api/auth/tasks/<int:task_id>/attachments - 方法: {'POST', 'OPTIONS'} - 终端: tasks.add_task_attachment_auth
2025-05-09 15:35:14,743 - app - INFO - 路由: /tasks/api/auth/tasks/<int:task_id>/attachments/<int:attachment_id>/download - 方法: {'OPTIONS', 'GET', 'HEAD'} - 终端: tasks.download_attachment_auth
2025-05-09 15:35:14,744 - app - INFO - 路由: /tasks/api/tasks/<int:task_id>/attachments - 方法: {'POST', 'OPTIONS'} - 终端: tasks.upload_attachment
2025-05-09 15:35:14,745 - app - INFO - 路由: /tasks/api/tasks/<int:task_id>/attachments/<int:attachment_id>/download - 方法: {'OPTIONS', 'GET', 'HEAD'} - 终端: tasks.download_attachment
2025-05-09 15:35:14,745 - app - INFO - 路由: /tasks/api/tasks/<int:task_id>/attachments/<int:attachment_id> - 方法: {'OPTIONS', 'DELETE'} - 终端: tasks.delete_attachment
2025-05-09 15:35:14,746 - app - INFO - 路由: /tasks/api/tasks/<int:task_id>/attachments/<int:attachment_id>/versions - 方法: {'POST', 'OPTIONS'} - 终端: tasks.upload_new_version
2025-05-09 15:35:14,747 - app - INFO - 路由: /tasks/api/tasks/<int:task_id>/attachments/<int:attachment_id>/versions - 方法: {'OPTIONS', 'GET', 'HEAD'} - 终端: tasks.get_attachment_versions
2025-05-09 15:35:14,748 - app - INFO - 路由: /tasks/api/tasks/<int:task_id>/risks - 方法: {'OPTIONS', 'GET', 'HEAD'} - 终端: tasks.task_risks_front_path
2025-05-09 15:35:14,749 - app - INFO - 路由: /tasks/<int:task_id>/risks - 方法: {'POST', 'OPTIONS'} - 终端: tasks.create_task_risk_front_path
2025-05-09 15:35:14,750 - app - INFO - 路由: /tasks/api/tasks/<int:task_id>/progress - 方法: {'OPTIONS', 'GET', 'HEAD'} - 终端: tasks.get_task_progress
2025-05-09 15:35:14,751 - app - INFO - 路由: /tasks/api/tasks/<int:task_id>/progress - 方法: {'POST', 'OPTIONS'} - 终端: tasks.update_task_progress
2025-05-09 15:35:14,752 - app - INFO - 路由: /tasks/api/tasks/<int:task_id>/progress/approve - 方法: {'POST', 'OPTIONS'} - 终端: tasks.approve_task_progress
2025-05-09 15:35:14,753 - app - INFO - 路由: /tasks/list - 方法: {'OPTIONS', 'GET', 'HEAD'} - 终端: tasks.task_list
2025-05-09 15:35:14,754 - app - INFO - 路由: /tasks/api/auth/tasks/<int:task_id>/logs - 方法: {'OPTIONS', 'GET', 'HEAD'} - 终端: tasks.get_task_logs_auth
2025-05-09 15:35:14,756 - app - INFO - 路由: /tasks/api/auth/tasks/<int:task_id>/subtasks - 方法: {'OPTIONS', 'GET', 'HEAD'} - 终端: tasks.get_subtasks_auth
2025-05-09 15:35:14,757 - app - INFO - 路由: /tasks/api/auth/tasks/<int:task_id>/comments - 方法: {'OPTIONS', 'GET', 'HEAD'} - 终端: tasks.get_task_comments_auth
2025-05-09 15:35:14,758 - app - INFO - 路由: /tasks/api/auth/tasks/<int:task_id>/attachments - 方法: {'OPTIONS', 'GET', 'HEAD'} - 终端: tasks.get_task_attachments_auth
2025-05-09 15:35:14,759 - app - INFO - 路由: /tasks/api/auth/tasks/<int:task_id>/risks - 方法: {'OPTIONS', 'GET', 'HEAD'} - 终端: tasks.get_task_risks_auth
2025-05-09 15:35:14,760 - app - INFO - 路由: /tasks/api/auth/tasks/<int:task_id>/risks - 方法: {'POST', 'OPTIONS'} - 终端: tasks.create_task_risk_auth
2025-05-09 15:35:14,761 - app - INFO - 路由: /tasks/api/auth/tasks/<int:task_id>/comments - 方法: {'POST', 'OPTIONS'} - 终端: tasks.add_task_comment_auth
2025-05-09 15:35:14,762 - app - INFO - 路由: /tasks/api/tasks/<int:task_id> - 方法: {'OPTIONS', 'PUT'} - 终端: tasks.api_update_task
2025-05-09 15:35:14,763 - app - INFO - 路由: /tasks/api/tasks/<int:task_id>/update_bypass - 方法: {'OPTIONS', 'PUT'} - 终端: tasks.update_task_bypass_csrf
2025-05-09 15:35:14,763 - app - INFO - 路由: /tasks/get-csrf-token - 方法: {'OPTIONS', 'GET', 'HEAD'} - 终端: tasks.get_csrf_token
2025-05-09 15:35:14,764 - app - INFO - 路由: /tasks/api/tasks/<int:task_id>/no_csrf - 方法: {'OPTIONS', 'PUT'} - 终端: tasks.update_task_no_csrf
2025-05-09 15:35:14,764 - app - INFO - 路由: /tasks/api/tasks/<int:task_id>/detail - 方法: {'OPTIONS', 'GET', 'HEAD'} - 终端: tasks.api_tasks_detail
2025-05-09 15:35:14,812 - app - WARNING - team_bp 未定义或无法导入
2025-05-09 15:35:14,931 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-05-09 15:35:14,936 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions 
WHERE permissions.name = ?
 LIMIT ? OFFSET ?
2025-05-09 15:35:14,939 - sqlalchemy.engine.Engine - INFO - [generated in 0.00320s] ('manage_users', 1, 0)
2025-05-09 15:35:14,942 - app.utils.permissions - INFO - 更新权限: manage_users
2025-05-09 15:35:14,944 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions 
WHERE permissions.name = ?
 LIMIT ? OFFSET ?
2025-05-09 15:35:14,945 - sqlalchemy.engine.Engine - INFO - [cached since 0.009448s ago] ('manage_roles', 1, 0)
2025-05-09 15:35:14,947 - app.utils.permissions - INFO - 更新权限: manage_roles
2025-05-09 15:35:14,949 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions 
WHERE permissions.name = ?
 LIMIT ? OFFSET ?
2025-05-09 15:35:14,950 - sqlalchemy.engine.Engine - INFO - [cached since 0.01432s ago] ('manage_all_projects', 1, 0)
2025-05-09 15:35:14,952 - app.utils.permissions - INFO - 更新权限: manage_all_projects
2025-05-09 15:35:14,953 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions 
WHERE permissions.name = ?
 LIMIT ? OFFSET ?
2025-05-09 15:35:14,958 - sqlalchemy.engine.Engine - INFO - [cached since 0.02091s ago] ('manage_project', 1, 0)
2025-05-09 15:35:14,959 - app.utils.permissions - INFO - 更新权限: manage_project
2025-05-09 15:35:14,961 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions 
WHERE permissions.name = ?
 LIMIT ? OFFSET ?
2025-05-09 15:35:14,964 - sqlalchemy.engine.Engine - INFO - [cached since 0.02787s ago] ('manage_all_tasks', 1, 0)
2025-05-09 15:35:14,966 - app.utils.permissions - INFO - 更新权限: manage_all_tasks
2025-05-09 15:35:14,967 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions 
WHERE permissions.name = ?
 LIMIT ? OFFSET ?
2025-05-09 15:35:14,968 - sqlalchemy.engine.Engine - INFO - [cached since 0.0322s ago] ('manage_task', 1, 0)
2025-05-09 15:35:14,970 - app.utils.permissions - INFO - 更新权限: manage_task
2025-05-09 15:35:14,972 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions 
WHERE permissions.name = ?
 LIMIT ? OFFSET ?
2025-05-09 15:35:14,974 - sqlalchemy.engine.Engine - INFO - [cached since 0.03783s ago] ('view_project', 1, 0)
2025-05-09 15:35:14,976 - app.utils.permissions - INFO - 更新权限: view_project
2025-05-09 15:35:14,977 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions 
WHERE permissions.name = ?
 LIMIT ? OFFSET ?
2025-05-09 15:35:14,979 - sqlalchemy.engine.Engine - INFO - [cached since 0.04324s ago] ('view_task', 1, 0)
2025-05-09 15:35:14,980 - app.utils.permissions - INFO - 更新权限: view_task
2025-05-09 15:35:14,983 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions 
WHERE permissions.name = ?
 LIMIT ? OFFSET ?
2025-05-09 15:35:14,984 - sqlalchemy.engine.Engine - INFO - [cached since 0.04757s ago] ('manage_resources', 1, 0)
2025-05-09 15:35:14,985 - app.utils.permissions - INFO - 更新权限: manage_resources
2025-05-09 15:35:14,987 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions 
WHERE permissions.name = ?
 LIMIT ? OFFSET ?
2025-05-09 15:35:14,989 - sqlalchemy.engine.Engine - INFO - [cached since 0.05322s ago] ('manage_risks', 1, 0)
2025-05-09 15:35:14,992 - app.utils.permissions - INFO - 更新权限: manage_risks
2025-05-09 15:35:14,994 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions 
WHERE permissions.name = ?
 LIMIT ? OFFSET ?
2025-05-09 15:35:14,996 - sqlalchemy.engine.Engine - INFO - [cached since 0.0589s ago] ('view_reports', 1, 0)
2025-05-09 15:35:14,997 - app.utils.permissions - INFO - 更新权限: view_reports
2025-05-09 15:35:14,998 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions 
WHERE permissions.name = ?
 LIMIT ? OFFSET ?
2025-05-09 15:35:15,000 - sqlalchemy.engine.Engine - INFO - [cached since 0.06323s ago] ('create_task', 1, 0)
2025-05-09 15:35:15,001 - app.utils.permissions - INFO - 更新权限: create_task
2025-05-09 15:35:15,002 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions 
WHERE permissions.name = ?
 LIMIT ? OFFSET ?
2025-05-09 15:35:15,003 - sqlalchemy.engine.Engine - INFO - [cached since 0.06781s ago] ('create_project', 1, 0)
2025-05-09 15:35:15,006 - app.utils.permissions - INFO - 更新权限: create_project
2025-05-09 15:35:15,008 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions 
WHERE permissions.name = ?
 LIMIT ? OFFSET ?
2025-05-09 15:35:15,009 - sqlalchemy.engine.Engine - INFO - [cached since 0.07336s ago] ('assign_task', 1, 0)
2025-05-09 15:35:15,011 - app.utils.permissions - INFO - 更新权限: assign_task
2025-05-09 15:35:15,012 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions 
WHERE permissions.name = ?
 LIMIT ? OFFSET ?
2025-05-09 15:35:15,013 - sqlalchemy.engine.Engine - INFO - [cached since 0.07774s ago] ('change_project_status', 1, 0)
2025-05-09 15:35:15,015 - app.utils.permissions - INFO - 更新权限: change_project_status
2025-05-09 15:35:15,017 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions 
WHERE permissions.name = ?
 LIMIT ? OFFSET ?
2025-05-09 15:35:15,018 - sqlalchemy.engine.Engine - INFO - [cached since 0.08167s ago] ('change_task_status', 1, 0)
2025-05-09 15:35:15,020 - app.utils.permissions - INFO - 更新权限: change_task_status
2025-05-09 15:35:15,021 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-05-09 15:35:15,024 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-05-09 15:35:15,026 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions
2025-05-09 15:35:15,028 - sqlalchemy.engine.Engine - INFO - [generated in 0.00170s] ()
2025-05-09 15:35:15,030 - sqlalchemy.engine.Engine - INFO - SELECT roles.id AS roles_id, roles.name AS roles_name, roles.description AS roles_description, roles.created_at AS roles_created_at 
FROM roles 
WHERE roles.name = ?
 LIMIT ? OFFSET ?
2025-05-09 15:35:15,032 - sqlalchemy.engine.Engine - INFO - [generated in 0.00141s] ('admin', 1, 0)
2025-05-09 15:35:15,033 - app.utils.permissions - INFO - 更新角色: admin
2025-05-09 15:35:15,036 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions, role_permissions 
WHERE ? = role_permissions.role_id AND permissions.id = role_permissions.permission_id
2025-05-09 15:35:15,040 - sqlalchemy.engine.Engine - INFO - [generated in 0.00315s] (1,)
2025-05-09 15:35:15,042 - app.utils.permissions - INFO - 为管理员角色添加所有权限: 16个
2025-05-09 15:35:15,043 - sqlalchemy.engine.Engine - INFO - SELECT roles.id AS roles_id, roles.name AS roles_name, roles.description AS roles_description, roles.created_at AS roles_created_at 
FROM roles 
WHERE roles.name = ?
 LIMIT ? OFFSET ?
2025-05-09 15:35:15,045 - sqlalchemy.engine.Engine - INFO - [cached since 0.01436s ago] ('manager', 1, 0)
2025-05-09 15:35:15,046 - app.utils.permissions - INFO - 更新角色: manager
2025-05-09 15:35:15,047 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions, role_permissions 
WHERE ? = role_permissions.role_id AND permissions.id = role_permissions.permission_id
2025-05-09 15:35:15,049 - sqlalchemy.engine.Engine - INFO - [cached since 0.01283s ago] (2,)
2025-05-09 15:35:15,051 - app.utils.permissions - INFO - 为角色 manager 添加权限: manage_project
2025-05-09 15:35:15,052 - app.utils.permissions - INFO - 为角色 manager 添加权限: manage_task
2025-05-09 15:35:15,054 - app.utils.permissions - INFO - 为角色 manager 添加权限: view_project
2025-05-09 15:35:15,055 - app.utils.permissions - INFO - 为角色 manager 添加权限: view_task
2025-05-09 15:35:15,056 - app.utils.permissions - INFO - 为角色 manager 添加权限: manage_resources
2025-05-09 15:35:15,057 - app.utils.permissions - INFO - 为角色 manager 添加权限: manage_risks
2025-05-09 15:35:15,058 - app.utils.permissions - INFO - 为角色 manager 添加权限: view_reports
2025-05-09 15:35:15,059 - app.utils.permissions - INFO - 为角色 manager 添加权限: create_project
2025-05-09 15:35:15,061 - app.utils.permissions - INFO - 为角色 manager 添加权限: create_task
2025-05-09 15:35:15,062 - app.utils.permissions - INFO - 为角色 manager 添加权限: assign_task
2025-05-09 15:35:15,063 - app.utils.permissions - INFO - 为角色 manager 添加权限: change_project_status
2025-05-09 15:35:15,064 - app.utils.permissions - INFO - 为角色 manager 添加权限: change_task_status
2025-05-09 15:35:15,065 - sqlalchemy.engine.Engine - INFO - SELECT roles.id AS roles_id, roles.name AS roles_name, roles.description AS roles_description, roles.created_at AS roles_created_at 
FROM roles 
WHERE roles.name = ?
 LIMIT ? OFFSET ?
2025-05-09 15:35:15,067 - sqlalchemy.engine.Engine - INFO - [cached since 0.03571s ago] ('user', 1, 0)
2025-05-09 15:35:15,068 - app.utils.permissions - INFO - 更新角色: user
2025-05-09 15:35:15,070 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions, role_permissions 
WHERE ? = role_permissions.role_id AND permissions.id = role_permissions.permission_id
2025-05-09 15:35:15,074 - sqlalchemy.engine.Engine - INFO - [cached since 0.0369s ago] (5,)
2025-05-09 15:35:15,076 - app.utils.permissions - INFO - 为角色 user 添加权限: view_project
2025-05-09 15:35:15,077 - app.utils.permissions - INFO - 为角色 user 添加权限: view_task
2025-05-09 15:35:15,079 - app.utils.permissions - INFO - 为角色 user 添加权限: view_reports
2025-05-09 15:35:15,080 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-05-09 15:35:15,082 - app.utils.permissions - INFO - 角色和权限初始化完成
2025-05-09 15:35:15,083 - __main__ - INFO - 角色和权限初始化成功
2025-05-09 15:35:15,083 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-05-09 15:35:15,085 - sqlalchemy.engine.Engine - INFO - SELECT users.id AS users_id, users.username AS users_username, users.email AS users_email, users.name AS users_name, users.password_hash AS users_password_hash, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.last_login AS users_last_login 
FROM users 
WHERE users.username = ?
 LIMIT ? OFFSET ?
2025-05-09 15:35:15,088 - sqlalchemy.engine.Engine - INFO - [generated in 0.00184s] ('system', 1, 0)
2025-05-09 15:35:15,091 - sqlalchemy.engine.Engine - INFO - SELECT projects.id AS projects_id, projects.name AS projects_name, projects.description AS projects_description, projects.status AS projects_status, projects.start_date AS projects_start_date, projects.end_date AS projects_end_date, projects.progress AS projects_progress, projects.created_at AS projects_created_at, projects.updated_at AS projects_updated_at, projects.manager_id AS projects_manager_id, projects.owner_id AS projects_owner_id 
FROM projects 
WHERE projects.name = ?
 LIMIT ? OFFSET ?
2025-05-09 15:35:15,094 - sqlalchemy.engine.Engine - INFO - [generated in 0.00195s] ('Test Project', 1, 0)
2025-05-09 15:35:15,095 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-05-09 15:35:15,097 - __main__ - INFO - 数据库初始化完成
2025-05-09 15:35:15,097 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-05-09 15:35:15,099 - sqlalchemy.engine.Engine - INFO - SELECT users.id AS users_id, users.username AS users_username, users.email AS users_email, users.name AS users_name, users.password_hash AS users_password_hash, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.last_login AS users_last_login 
FROM users 
WHERE users.username = ?
 LIMIT ? OFFSET ?
2025-05-09 15:35:15,100 - sqlalchemy.engine.Engine - INFO - [cached since 0.01449s ago] ('system', 1, 0)
2025-05-09 15:35:15,112 - sqlalchemy.engine.Engine - INFO - INSERT INTO resource_usages (user_id, cpu_usage, memory_usage, disk_usage, network_usage, recorded_at) VALUES (?, ?, ?, ?, ?, ?)
2025-05-09 15:35:15,116 - sqlalchemy.engine.Engine - INFO - [generated in 0.00341s] (2, 22.4, 52.4, 10.9, 0.0, '2025-05-09 07:35:15.111653')
2025-05-09 15:35:15,123 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-05-09 15:35:15,129 - __main__ - INFO - 系统资源检查完成
2025-05-09 15:35:15,129 - __main__ - INFO - 开始清理旧数据
2025-05-09 15:35:15,130 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-05-09 15:35:15,133 - sqlalchemy.engine.Engine - INFO - DELETE FROM resource_usages WHERE resource_usages.recorded_at < ?
2025-05-09 15:35:15,135 - sqlalchemy.engine.Engine - INFO - [generated in 0.00238s] ('2025-04-09 07:35:15.130057',)
2025-05-09 15:35:15,137 - __main__ - INFO - 删除了 0 条过期的资源使用记录
2025-05-09 15:35:15,138 - sqlalchemy.engine.Engine - INFO - DELETE FROM system_alerts WHERE system_alerts.is_resolved = 1 AND system_alerts.created_at < ?
2025-05-09 15:35:15,140 - sqlalchemy.engine.Engine - INFO - [generated in 0.00206s] ('2025-05-02 07:35:15.138125',)
2025-05-09 15:35:15,142 - __main__ - INFO - 删除了 0 条已解决的过期警报
2025-05-09 15:35:15,142 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-05-09 15:35:15,143 - __main__ - INFO - 旧数据清理完成
2025-05-09 15:35:15,149 - werkzeug - WARNING -  * Debugger is active!
2025-05-09 15:35:15,153 - werkzeug - INFO -  * Debugger PIN: 670-037-726
2025-05-09 15:35:28,364 - werkzeug - INFO -  * Detected change in 'D:\\tmp\\work\\run.py', reloading
2025-05-09 15:35:28,680 - werkzeug - INFO -  * Restarting with stat
2025-05-09 15:35:29,322 - app - INFO - File logging handler initialized successfully
2025-05-09 15:35:29,324 - app - INFO - Console logging handler initialized successfully
2025-05-09 15:35:29,325 - app - INFO - Application logging configuration completed
2025-05-09 15:35:29,327 - app - INFO - Development configuration initialized
2025-05-09 15:35:29,371 - app - INFO - Logging setup completed successfully
2025-05-09 15:35:29,683 - app - INFO - 已注册的路由:
2025-05-09 15:35:29,686 - app - INFO - 路由: /static/<path:filename> - 方法: {'OPTIONS', 'GET', 'HEAD'} - 终端: static
2025-05-09 15:35:29,687 - app - INFO - 路由: /api/users/<int:user_id> - 方法: {'GET', 'DELETE', 'PUT', 'OPTIONS', 'POST', 'HEAD'} - 终端: user_api_exempt.user_api_exempt_route
2025-05-09 15:35:29,689 - app - INFO - 路由: /api/users - 方法: {'GET', 'DELETE', 'PUT', 'OPTIONS', 'POST', 'HEAD'} - 终端: user_api_exempt.user_api_exempt_route
2025-05-09 15:35:29,690 - app - INFO - 路由: /tasks/<int:task_id>/dependencies/<int:dependency_id>/gantt - 方法: {'OPTIONS', 'DELETE'} - 终端: task_api_exempt.task_api_exempt_route
2025-05-09 15:35:29,692 - app - INFO - 路由: /tasks/<int:task_id>/gantt - 方法: {'OPTIONS', 'PUT'} - 终端: task_api_exempt.task_api_exempt_route
2025-05-09 15:35:29,693 - app - INFO - 路由: /tasks/project/<int:project_id>/gantt - 方法: {'OPTIONS', 'GET', 'HEAD'} - 终端: task_api_exempt.task_api_exempt_route
2025-05-09 15:35:29,694 - app - INFO - 路由: /tasks/project/<int:project_id>/gantt/data - 方法: {'OPTIONS', 'GET', 'HEAD'} - 终端: task_api_exempt.task_api_exempt_route
2025-05-09 15:35:29,695 - app - INFO - 路由: /api/tasks/<int:task_id>/no_csrf - 方法: {'GET', 'DELETE', 'PUT', 'OPTIONS', 'POST', 'HEAD'} - 终端: task_api_exempt.task_api_exempt_route
2025-05-09 15:35:29,698 - app - INFO - 路由: /api/tasks/<int:task_id> - 方法: {'GET', 'DELETE', 'PUT', 'OPTIONS', 'POST', 'HEAD'} - 终端: task_api_exempt.task_api_exempt_route
2025-05-09 15:35:29,699 - app - INFO - 路由: /tasks/dependencies/gantt - 方法: {'OPTIONS', 'POST'} - 终端: task_api_exempt.task_api_exempt_route
2025-05-09 15:35:29,701 - app - INFO - 路由: /api/tasks - 方法: {'GET', 'DELETE', 'PUT', 'OPTIONS', 'POST', 'HEAD'} - 终端: task_api_exempt.task_api_exempt_route
2025-05-09 15:35:29,702 - app - INFO - 路由: /login - 方法: {'OPTIONS', 'GET', 'HEAD'} - 终端: auth.login_page
2025-05-09 15:35:29,703 - app - INFO - 路由: /login - 方法: {'OPTIONS', 'POST'} - 终端: auth.login
2025-05-09 15:35:29,704 - app - INFO - 路由: /register - 方法: {'OPTIONS', 'GET', 'HEAD'} - 终端: auth.register_page
2025-05-09 15:35:29,706 - app - INFO - 路由: /register - 方法: {'OPTIONS', 'POST'} - 终端: auth.register
2025-05-09 15:35:29,708 - app - INFO - 路由: /logout - 方法: {'OPTIONS', 'GET', 'POST', 'HEAD'} - 终端: auth.logout
2025-05-09 15:35:29,709 - app - INFO - 路由: /refresh - 方法: {'OPTIONS', 'POST'} - 终端: auth.refresh
2025-05-09 15:35:29,710 - app - INFO - 路由: /profile - 方法: {'OPTIONS', 'GET', 'HEAD'} - 终端: auth.profile
2025-05-09 15:35:29,711 - app - INFO - 路由: /profile - 方法: {'OPTIONS', 'PUT'} - 终端: auth.update_profile
2025-05-09 15:35:29,713 - app - INFO - 路由: /users - 方法: {'OPTIONS', 'GET', 'HEAD'} - 终端: auth.get_users
2025-05-09 15:35:29,714 - app - INFO - 路由: /users/<int:user_id> - 方法: {'OPTIONS', 'GET', 'HEAD'} - 终端: auth.get_user_by_id
2025-05-09 15:35:29,715 - app - INFO - 路由: /update_user/<int:user_id> - 方法: {'OPTIONS', 'PUT'} - 终端: auth.update_user
2025-05-09 15:35:29,717 - app - INFO - 路由: /roles - 方法: {'OPTIONS', 'GET', 'HEAD'} - 终端: auth.get_roles
2025-05-09 15:35:29,718 - app - INFO - 路由: /permissions - 方法: {'OPTIONS', 'GET', 'HEAD'} - 终端: auth.get_permissions
2025-05-09 15:35:29,720 - app - INFO - 路由: /permissions - 方法: {'OPTIONS', 'POST'} - 终端: auth.create_permission
2025-05-09 15:35:29,722 - app - INFO - 路由: /permissions/<int:permission_id> - 方法: {'OPTIONS', 'GET', 'HEAD'} - 终端: auth.get_permission
2025-05-09 15:35:29,723 - app - INFO - 路由: /permissions/<int:permission_id> - 方法: {'OPTIONS', 'PUT'} - 终端: auth.update_permission
2025-05-09 15:35:29,724 - app - INFO - 路由: /permissions/<int:permission_id> - 方法: {'OPTIONS', 'DELETE'} - 终端: auth.delete_permission
2025-05-09 15:35:29,725 - app - INFO - 路由: /roles - 方法: {'OPTIONS', 'POST'} - 终端: auth.create_role
2025-05-09 15:35:29,727 - app - INFO - 路由: /roles/<int:role_id> - 方法: {'OPTIONS', 'GET', 'HEAD'} - 终端: auth.get_role
2025-05-09 15:35:29,728 - app - INFO - 路由: /roles/<int:role_id>/permissions - 方法: {'OPTIONS', 'PUT'} - 终端: auth.update_role_permissions
2025-05-09 15:35:29,730 - app - INFO - 路由: /roles/<int:role_id> - 方法: {'OPTIONS', 'DELETE'} - 终端: auth.delete_role
2025-05-09 15:35:29,731 - app - INFO - 路由: /dashboard - 方法: {'OPTIONS', 'GET', 'HEAD'} - 终端: auth.dashboard
2025-05-09 15:35:29,732 - app - INFO - 路由: /dashboard/redirect - 方法: {'OPTIONS', 'GET', 'POST', 'HEAD'} - 终端: auth.dashboard_redirect
2025-05-09 15:35:29,734 - app - INFO - 路由: /create_test_user - 方法: {'OPTIONS', 'POST'} - 终端: auth.create_test_user
2025-05-09 15:35:29,736 - app - INFO - 路由: /check - 方法: {'OPTIONS', 'GET', 'HEAD'} - 终端: auth.check_auth
2025-05-09 15:35:29,737 - app - INFO - 路由: /create_test_project - 方法: {'OPTIONS', 'POST'} - 终端: auth.create_test_project
2025-05-09 15:35:29,740 - app - INFO - 路由: /logout_all - 方法: {'OPTIONS', 'POST'} - 终端: auth.logout_all
2025-05-09 15:35:29,741 - app - INFO - 路由: /dashboard/data - 方法: {'OPTIONS', 'GET', 'HEAD'} - 终端: auth.dashboard_data
2025-05-09 15:35:29,742 - app - INFO - 路由: /check_token - 方法: {'OPTIONS', 'GET', 'HEAD'} - 终端: auth.check_token
2025-05-09 15:35:29,743 - app - INFO - 路由: /create_user - 方法: {'OPTIONS', 'POST'} - 终端: auth.create_user
2025-05-09 15:35:29,744 - app - INFO - 路由: /user_info - 方法: {'OPTIONS', 'GET', 'HEAD'} - 终端: auth.get_user_info
2025-05-09 15:35:29,745 - app - INFO - 路由: /user/<int:user_id> - 方法: {'OPTIONS', 'DELETE'} - 终端: auth.delete_user
2025-05-09 15:35:29,747 - app - INFO - 路由: /users/<int:user_id>/roles - 方法: {'OPTIONS', 'GET', 'HEAD'} - 终端: auth.get_user_roles
2025-05-09 15:35:29,748 - app - INFO - 路由: /users/<int:user_id>/roles - 方法: {'OPTIONS', 'PUT'} - 终端: auth.update_user_roles
2025-05-09 15:35:29,749 - app - INFO - 路由: /users/<int:user_id>/notifications - 方法: {'OPTIONS', 'GET', 'HEAD'} - 终端: auth.get_user_notifications
2025-05-09 15:35:29,751 - app - INFO - 路由: /notifications/<int:notification_id>/read - 方法: {'OPTIONS', 'PUT'} - 终端: auth.mark_notification_as_read
2025-05-09 15:35:29,752 - app - INFO - 路由: /notifications/read_all - 方法: {'OPTIONS', 'PUT'} - 终端: auth.mark_all_notifications_as_read
2025-05-09 15:35:29,755 - app - INFO - 路由: /change-password - 方法: {'OPTIONS', 'POST'} - 终端: auth.change_password
2025-05-09 15:35:29,756 - app - INFO - 路由: /reset-password - 方法: {'OPTIONS', 'GET', 'HEAD'} - 终端: auth.reset_password_page
2025-05-09 15:35:29,757 - app - INFO - 路由: /verify-email/confirm - 方法: {'OPTIONS', 'GET', 'HEAD'} - 终端: auth.verify_email_confirm_page
2025-05-09 15:35:29,758 - app - INFO - 路由: /auth/csrf-token - 方法: {'OPTIONS', 'GET', 'HEAD'} - 终端: auth.get_csrf_token
2025-05-09 15:35:29,759 - app - INFO - 路由: /api/users/<int:user_id> - 方法: {'OPTIONS', 'PUT'} - 终端: auth.api_update_user
2025-05-09 15:35:29,760 - app - INFO - 路由: /api/users/<int:user_id> - 方法: {'OPTIONS', 'DELETE'} - 终端: auth.api_delete_user
2025-05-09 15:35:29,761 - app - INFO - 路由: /api/users - 方法: {'OPTIONS', 'GET', 'HEAD'} - 终端: auth.api_get_users
2025-05-09 15:35:29,763 - app - INFO - 路由: /api/users - 方法: {'OPTIONS', 'POST'} - 终端: auth.api_create_user
2025-05-09 15:35:29,763 - app - INFO - 路由: /auth/users/<int:user_id> - 方法: {'OPTIONS', 'GET', 'HEAD'} - 终端: auth.get_user_details
2025-05-09 15:35:29,765 - app - INFO - 路由: /api/users/<int:user_id> - 方法: {'GET', 'DELETE', 'PUT', 'OPTIONS', 'HEAD'} - 终端: auth.api_user_operations
2025-05-09 15:35:29,767 - app - INFO - 路由: /auth/user-csrf-token - 方法: {'OPTIONS', 'GET', 'HEAD'} - 终端: auth.get_user_csrf_token
2025-05-09 15:35:29,768 - app - INFO - 路由: /main/ - 方法: {'OPTIONS', 'GET', 'HEAD'} - 终端: main.index
2025-05-09 15:35:29,769 - app - INFO - 路由: /main/dashboard - 方法: {'OPTIONS', 'GET', 'HEAD'} - 终端: main.dashboard
2025-05-09 15:35:29,771 - app - INFO - 路由: /main/check_token - 方法: {'OPTIONS', 'GET', 'HEAD'} - 终端: main.check_token
2025-05-09 15:35:29,772 - app - INFO - 路由: /main/projects - 方法: {'OPTIONS', 'GET', 'HEAD'} - 终端: main.projects
2025-05-09 15:35:29,773 - app - INFO - 路由: /main/tasks - 方法: {'OPTIONS', 'GET', 'HEAD'} - 终端: main.tasks
2025-05-09 15:35:29,774 - app - INFO - 路由: /main/risks - 方法: {'OPTIONS', 'GET', 'HEAD'} - 终端: main.risks
2025-05-09 15:35:29,775 - app - INFO - 路由: /main/reports - 方法: {'OPTIONS', 'GET', 'HEAD'} - 终端: main.reports
2025-05-09 15:35:29,777 - app - INFO - 路由: /main/resources - 方法: {'OPTIONS', 'GET', 'HEAD'} - 终端: main.resources
2025-05-09 15:35:29,778 - app - INFO - 路由: /main/profile - 方法: {'OPTIONS', 'GET', 'HEAD'} - 终端: main.profile
2025-05-09 15:35:29,779 - app - INFO - 路由: /main/system/status - 方法: {'OPTIONS', 'GET', 'HEAD'} - 终端: main.system_status
2025-05-09 15:35:29,780 - app - INFO - 路由: /main/api/dashboard/data - 方法: {'OPTIONS', 'GET', 'HEAD'} - 终端: main.get_dashboard_data
2025-05-09 15:35:29,782 - app - INFO - 路由: /main/test - 方法: {'OPTIONS', 'GET', 'HEAD'} - 终端: main.test_route
2025-05-09 15:35:29,783 - app - INFO - 路由: /main/projects/detail/<int:project_id> - 方法: {'OPTIONS', 'GET', 'HEAD'} - 终端: main.project_detail_redirect
2025-05-09 15:35:29,784 - app - INFO - 路由: /main/users - 方法: {'OPTIONS', 'GET', 'HEAD'} - 终端: main.users
2025-05-09 15:35:29,786 - app - INFO - 路由: /main/debug/projects - 方法: {'OPTIONS', 'GET', 'HEAD'} - 终端: main.debug_projects
2025-05-09 15:35:29,787 - app - INFO - 路由: /main/simple/projects - 方法: {'OPTIONS', 'GET', 'HEAD'} - 终端: main.simple_projects
2025-05-09 15:35:29,788 - app - INFO - 路由: /main/static-test - 方法: {'OPTIONS', 'GET', 'HEAD'} - 终端: main.static_test
2025-05-09 15:35:29,791 - app - INFO - 路由: /main/print-projects - 方法: {'OPTIONS', 'GET', 'HEAD'} - 终端: main.print_projects
2025-05-09 15:35:29,792 - app - INFO - 路由: /main/bypass-projects - 方法: {'OPTIONS', 'GET', 'HEAD'} - 终端: main.bypass_projects
2025-05-09 15:35:29,793 - app - INFO - 路由: /main/debug-projects - 方法: {'OPTIONS', 'GET', 'HEAD'} - 终端: main.debug_projects_api
2025-05-09 15:35:29,794 - app - INFO - 路由: /projects/list - 方法: {'OPTIONS', 'GET', 'HEAD'} - 终端: projects.project_list
2025-05-09 15:35:29,796 - app - INFO - 路由: /projects/ - 方法: {'OPTIONS', 'GET', 'HEAD'} - 终端: projects.get_projects
2025-05-09 15:35:29,797 - app - INFO - 路由: /projects/ - 方法: {'OPTIONS', 'POST'} - 终端: projects.create_project
2025-05-09 15:35:29,798 - app - INFO - 路由: /projects/<int:project_id> - 方法: {'OPTIONS', 'GET', 'HEAD'} - 终端: projects.get_project
2025-05-09 15:35:29,799 - app - INFO - 路由: /projects/<int:project_id> - 方法: {'OPTIONS', 'PUT'} - 终端: projects.update_project
2025-05-09 15:35:29,802 - app - INFO - 路由: /projects/<int:project_id> - 方法: {'OPTIONS', 'DELETE'} - 终端: projects.delete_project
2025-05-09 15:35:29,803 - app - INFO - 路由: /projects/<int:project_id>/members - 方法: {'OPTIONS', 'GET', 'HEAD'} - 终端: projects.get_project_members
2025-05-09 15:35:29,805 - app - INFO - 路由: /projects/<int:project_id>/members - 方法: {'OPTIONS', 'POST'} - 终端: projects.add_project_member
2025-05-09 15:35:29,806 - app - INFO - 路由: /projects/<int:project_id>/members/<int:user_id> - 方法: {'OPTIONS', 'DELETE'} - 终端: projects.remove_project_member
2025-05-09 15:35:29,807 - app - INFO - 路由: /projects/detail/<int:project_id> - 方法: {'OPTIONS', 'GET', 'HEAD'} - 终端: projects.detail
2025-05-09 15:35:29,809 - app - INFO - 路由: /projects/api/detail/<int:project_id> - 方法: {'OPTIONS', 'GET', 'HEAD'} - 终端: projects.detail_api
2025-05-09 15:35:29,810 - app - INFO - 路由: /projects/api/projects/<int:project_id> - 方法: {'OPTIONS', 'GET', 'HEAD'} - 终端: projects.get_project_api
2025-05-09 15:35:29,812 - app - INFO - 路由: /projects/api/projects/<int:project_id> - 方法: {'OPTIONS', 'PUT'} - 终端: projects.update_project_api
2025-05-09 15:35:29,813 - app - INFO - 路由: /projects/api/projects/<int:project_id> - 方法: {'OPTIONS', 'DELETE'} - 终端: projects.delete_project_api
2025-05-09 15:35:29,815 - app - INFO - 路由: /projects/api/auth/projects - 方法: {'OPTIONS', 'GET', 'HEAD'} - 终端: projects.get_projects_api
2025-05-09 15:35:29,816 - app - INFO - 路由: /projects/api/auth/projects/<int:project_id> - 方法: {'OPTIONS', 'GET', 'HEAD'} - 终端: projects.get_project_auth_api
2025-05-09 15:35:29,818 - app - INFO - 路由: /projects/api/noauth/projects/<int:project_id> - 方法: {'GET', 'DELETE', 'PUT', 'OPTIONS', 'HEAD'} - 终端: projects.get_project_noauth
2025-05-09 15:35:29,820 - app - INFO - 路由: /projects/api/auth/projects - 方法: {'OPTIONS', 'POST'} - 终端: projects.create_project_auth
2025-05-09 15:35:29,821 - app - INFO - 路由: /projects/api/project-managers - 方法: {'OPTIONS', 'GET', 'HEAD'} - 终端: projects.get_project_managers
2025-05-09 15:35:29,822 - app - INFO - 路由: /projects/api/projects - 方法: {'OPTIONS', 'GET', 'HEAD'} - 终端: projects.get_all_projects_api
2025-05-09 15:35:29,824 - app - INFO - 路由: /projects/api/active-projects - 方法: {'OPTIONS', 'GET', 'HEAD'} - 终端: projects.get_active_projects_api
2025-05-09 15:35:29,825 - app - INFO - 路由: /projects/api/projects/<int:project_id>/members - 方法: {'OPTIONS', 'GET', 'HEAD'} - 终端: projects.get_project_members_api
2025-05-09 15:35:29,827 - app - INFO - 路由: /list - 方法: {'OPTIONS', 'GET', 'HEAD'} - 终端: project_root.project_list
2025-05-09 15:35:29,829 - app - INFO - 路由: / - 方法: {'OPTIONS', 'GET', 'HEAD'} - 终端: project_root.get_projects
2025-05-09 15:35:29,830 - app - INFO - 路由: / - 方法: {'OPTIONS', 'POST'} - 终端: project_root.create_project
2025-05-09 15:35:29,832 - app - INFO - 路由: /<int:project_id> - 方法: {'OPTIONS', 'GET', 'HEAD'} - 终端: project_root.get_project
2025-05-09 15:35:29,833 - app - INFO - 路由: /<int:project_id> - 方法: {'OPTIONS', 'PUT'} - 终端: project_root.update_project
2025-05-09 15:35:29,834 - app - INFO - 路由: /<int:project_id> - 方法: {'OPTIONS', 'DELETE'} - 终端: project_root.delete_project
2025-05-09 15:35:29,836 - app - INFO - 路由: /<int:project_id>/members - 方法: {'OPTIONS', 'GET', 'HEAD'} - 终端: project_root.get_project_members
2025-05-09 15:35:29,837 - app - INFO - 路由: /<int:project_id>/members - 方法: {'OPTIONS', 'POST'} - 终端: project_root.add_project_member
2025-05-09 15:35:29,838 - app - INFO - 路由: /<int:project_id>/members/<int:user_id> - 方法: {'OPTIONS', 'DELETE'} - 终端: project_root.remove_project_member
2025-05-09 15:35:29,839 - app - INFO - 路由: /detail/<int:project_id> - 方法: {'OPTIONS', 'GET', 'HEAD'} - 终端: project_root.detail
2025-05-09 15:35:29,841 - app - INFO - 路由: /api/detail/<int:project_id> - 方法: {'OPTIONS', 'GET', 'HEAD'} - 终端: project_root.detail_api
2025-05-09 15:35:29,842 - app - INFO - 路由: /api/projects/<int:project_id> - 方法: {'OPTIONS', 'GET', 'HEAD'} - 终端: project_root.get_project_api
2025-05-09 15:35:29,843 - app - INFO - 路由: /api/projects/<int:project_id> - 方法: {'OPTIONS', 'PUT'} - 终端: project_root.update_project_api
2025-05-09 15:35:29,845 - app - INFO - 路由: /api/projects/<int:project_id> - 方法: {'OPTIONS', 'DELETE'} - 终端: project_root.delete_project_api
2025-05-09 15:35:29,846 - app - INFO - 路由: /api/auth/projects - 方法: {'OPTIONS', 'GET', 'HEAD'} - 终端: project_root.get_projects_api
2025-05-09 15:35:29,847 - app - INFO - 路由: /api/auth/projects/<int:project_id> - 方法: {'OPTIONS', 'GET', 'HEAD'} - 终端: project_root.get_project_auth_api
2025-05-09 15:35:29,849 - app - INFO - 路由: /api/noauth/projects/<int:project_id> - 方法: {'GET', 'DELETE', 'PUT', 'OPTIONS', 'HEAD'} - 终端: project_root.get_project_noauth
2025-05-09 15:35:29,850 - app - INFO - 路由: /api/auth/projects - 方法: {'OPTIONS', 'POST'} - 终端: project_root.create_project_auth
2025-05-09 15:35:29,853 - app - INFO - 路由: /api/project-managers - 方法: {'OPTIONS', 'GET', 'HEAD'} - 终端: project_root.get_project_managers
2025-05-09 15:35:29,854 - app - INFO - 路由: /api/projects - 方法: {'OPTIONS', 'GET', 'HEAD'} - 终端: project_root.get_all_projects_api
2025-05-09 15:35:29,856 - app - INFO - 路由: /api/active-projects - 方法: {'OPTIONS', 'GET', 'HEAD'} - 终端: project_root.get_active_projects_api
2025-05-09 15:35:29,857 - app - INFO - 路由: /api/projects/<int:project_id>/members - 方法: {'OPTIONS', 'GET', 'HEAD'} - 终端: project_root.get_project_members_api
2025-05-09 15:35:29,858 - app - INFO - 路由: /tasks/ - 方法: {'OPTIONS', 'GET', 'HEAD'} - 终端: tasks.get_tasks
2025-05-09 15:35:29,860 - app - INFO - 路由: /tasks/ - 方法: {'OPTIONS', 'POST'} - 终端: tasks.create_task
2025-05-09 15:35:29,861 - app - INFO - 路由: /tasks/<int:task_id> - 方法: {'OPTIONS', 'GET', 'HEAD'} - 终端: tasks.get_task
2025-05-09 15:35:29,862 - app - INFO - 路由: /tasks/<int:task_id> - 方法: {'OPTIONS', 'PUT'} - 终端: tasks.update_task
2025-05-09 15:35:29,864 - app - INFO - 路由: /tasks/<int:task_id> - 方法: {'OPTIONS', 'DELETE'} - 终端: tasks.delete_task
2025-05-09 15:35:29,865 - app - INFO - 路由: /tasks/<int:task_id>/comments - 方法: {'OPTIONS', 'GET', 'HEAD'} - 终端: tasks.get_task_comments
2025-05-09 15:35:29,866 - app - INFO - 路由: /tasks/<int:task_id>/comments - 方法: {'OPTIONS', 'POST'} - 终端: tasks.add_task_comment
2025-05-09 15:35:29,867 - app - INFO - 路由: /tasks/<int:task_id>/attachments - 方法: {'OPTIONS', 'GET', 'HEAD'} - 终端: tasks.get_task_attachments
2025-05-09 15:35:29,869 - app - INFO - 路由: /tasks/<int:task_id>/attachments - 方法: {'OPTIONS', 'POST'} - 终端: tasks.add_task_attachment
2025-05-09 15:35:29,871 - app - INFO - 路由: /tasks/<int:task_id>/resources - 方法: {'OPTIONS', 'GET', 'HEAD'} - 终端: tasks.get_task_resources
2025-05-09 15:35:29,872 - app - INFO - 路由: /tasks/<int:task_id>/subtasks - 方法: {'OPTIONS', 'GET', 'HEAD'} - 终端: tasks.get_subtasks
2025-05-09 15:35:29,873 - app - INFO - 路由: /tasks/<int:task_id>/subtasks - 方法: {'OPTIONS', 'POST'} - 终端: tasks.create_subtask
2025-05-09 15:35:29,874 - app - INFO - 路由: /tasks/<int:task_id>/dependencies - 方法: {'OPTIONS', 'GET', 'HEAD'} - 终端: tasks.get_dependencies
2025-05-09 15:35:29,875 - app - INFO - 路由: /tasks/<int:task_id>/dependencies - 方法: {'OPTIONS', 'POST'} - 终端: tasks.add_dependency
2025-05-09 15:35:29,877 - app - INFO - 路由: /tasks/<int:task_id>/logs - 方法: {'OPTIONS', 'GET', 'HEAD'} - 终端: tasks.get_task_logs
2025-05-09 15:35:29,878 - app - INFO - 路由: /tasks/<int:task_id>/logs - 方法: {'OPTIONS', 'POST'} - 终端: tasks.add_task_log
2025-05-09 15:35:29,880 - app - INFO - 路由: /tasks/project/<int:project_id>/gantt - 方法: {'OPTIONS', 'GET', 'HEAD'} - 终端: tasks.gantt_chart
2025-05-09 15:35:29,880 - app - INFO - 路由: /tasks/project/<int:project_id>/gantt/data - 方法: {'OPTIONS', 'GET', 'HEAD'} - 终端: tasks.get_gantt_data
2025-05-09 15:35:29,881 - app - INFO - 路由: /tasks/<int:task_id>/gantt - 方法: {'OPTIONS', 'PUT'} - 终端: tasks.update_gantt_task
2025-05-09 15:35:29,883 - app - INFO - 路由: /tasks/dependencies/gantt - 方法: {'OPTIONS', 'POST'} - 终端: tasks.create_gantt_dependency
2025-05-09 15:35:29,884 - app - INFO - 路由: /tasks/<int:task_id>/dependencies/<int:dependency_id>/gantt - 方法: {'OPTIONS', 'DELETE'} - 终端: tasks.delete_gantt_dependency
2025-05-09 15:35:29,885 - app - INFO - 路由: /tasks/<int:task_id>/status - 方法: {'OPTIONS', 'PUT'} - 终端: tasks.update_task_status
2025-05-09 15:35:29,886 - app - INFO - 路由: /tasks/api/tasks/dependencies - 方法: {'OPTIONS', 'POST'} - 终端: tasks.add_task_dependency
2025-05-09 15:35:29,887 - app - INFO - 路由: /tasks/<int:task_id>/detail - 方法: {'OPTIONS', 'GET', 'HEAD'} - 终端: tasks.task_detail_api
2025-05-09 15:35:29,890 - app - INFO - 路由: /tasks/api/auth/tasks/<int:task_id>/detail - 方法: {'OPTIONS', 'GET', 'HEAD'} - 终端: tasks.task_detail_api_auth
2025-05-09 15:35:29,891 - app - INFO - 路由: /tasks/<int:task_id>/view - 方法: {'OPTIONS', 'GET', 'HEAD'} - 终端: tasks.task_detail_page
2025-05-09 15:35:29,893 - app - INFO - 路由: /tasks/<int:task_id>/edit - 方法: {'OPTIONS', 'GET', 'HEAD'} - 终端: tasks.edit_task_page
2025-05-09 15:35:29,894 - app - INFO - 路由: /tasks/api/auth/tasks/<int:task_id>/attachments - 方法: {'OPTIONS', 'POST'} - 终端: tasks.add_task_attachment_auth
2025-05-09 15:35:29,895 - app - INFO - 路由: /tasks/api/auth/tasks/<int:task_id>/attachments/<int:attachment_id>/download - 方法: {'OPTIONS', 'GET', 'HEAD'} - 终端: tasks.download_attachment_auth
2025-05-09 15:35:29,896 - app - INFO - 路由: /tasks/api/tasks/<int:task_id>/attachments - 方法: {'OPTIONS', 'POST'} - 终端: tasks.upload_attachment
2025-05-09 15:35:29,897 - app - INFO - 路由: /tasks/api/tasks/<int:task_id>/attachments/<int:attachment_id>/download - 方法: {'OPTIONS', 'GET', 'HEAD'} - 终端: tasks.download_attachment
2025-05-09 15:35:29,898 - app - INFO - 路由: /tasks/api/tasks/<int:task_id>/attachments/<int:attachment_id> - 方法: {'OPTIONS', 'DELETE'} - 终端: tasks.delete_attachment
2025-05-09 15:35:29,899 - app - INFO - 路由: /tasks/api/tasks/<int:task_id>/attachments/<int:attachment_id>/versions - 方法: {'OPTIONS', 'POST'} - 终端: tasks.upload_new_version
2025-05-09 15:35:29,901 - app - INFO - 路由: /tasks/api/tasks/<int:task_id>/attachments/<int:attachment_id>/versions - 方法: {'OPTIONS', 'GET', 'HEAD'} - 终端: tasks.get_attachment_versions
2025-05-09 15:35:29,903 - app - INFO - 路由: /tasks/api/tasks/<int:task_id>/risks - 方法: {'OPTIONS', 'GET', 'HEAD'} - 终端: tasks.task_risks_front_path
2025-05-09 15:35:29,904 - app - INFO - 路由: /tasks/<int:task_id>/risks - 方法: {'OPTIONS', 'POST'} - 终端: tasks.create_task_risk_front_path
2025-05-09 15:35:29,907 - app - INFO - 路由: /tasks/api/tasks/<int:task_id>/progress - 方法: {'OPTIONS', 'GET', 'HEAD'} - 终端: tasks.get_task_progress
2025-05-09 15:35:29,909 - app - INFO - 路由: /tasks/api/tasks/<int:task_id>/progress - 方法: {'OPTIONS', 'POST'} - 终端: tasks.update_task_progress
2025-05-09 15:35:29,910 - app - INFO - 路由: /tasks/api/tasks/<int:task_id>/progress/approve - 方法: {'OPTIONS', 'POST'} - 终端: tasks.approve_task_progress
2025-05-09 15:35:29,912 - app - INFO - 路由: /tasks/list - 方法: {'OPTIONS', 'GET', 'HEAD'} - 终端: tasks.task_list
2025-05-09 15:35:29,913 - app - INFO - 路由: /tasks/api/auth/tasks/<int:task_id>/logs - 方法: {'OPTIONS', 'GET', 'HEAD'} - 终端: tasks.get_task_logs_auth
2025-05-09 15:35:29,914 - app - INFO - 路由: /tasks/api/auth/tasks/<int:task_id>/subtasks - 方法: {'OPTIONS', 'GET', 'HEAD'} - 终端: tasks.get_subtasks_auth
2025-05-09 15:35:29,916 - app - INFO - 路由: /tasks/api/auth/tasks/<int:task_id>/comments - 方法: {'OPTIONS', 'GET', 'HEAD'} - 终端: tasks.get_task_comments_auth
2025-05-09 15:35:29,918 - app - INFO - 路由: /tasks/api/auth/tasks/<int:task_id>/attachments - 方法: {'OPTIONS', 'GET', 'HEAD'} - 终端: tasks.get_task_attachments_auth
2025-05-09 15:35:29,919 - app - INFO - 路由: /tasks/api/auth/tasks/<int:task_id>/risks - 方法: {'OPTIONS', 'GET', 'HEAD'} - 终端: tasks.get_task_risks_auth
2025-05-09 15:35:29,920 - app - INFO - 路由: /tasks/api/auth/tasks/<int:task_id>/risks - 方法: {'OPTIONS', 'POST'} - 终端: tasks.create_task_risk_auth
2025-05-09 15:35:29,922 - app - INFO - 路由: /tasks/api/auth/tasks/<int:task_id>/comments - 方法: {'OPTIONS', 'POST'} - 终端: tasks.add_task_comment_auth
2025-05-09 15:35:29,923 - app - INFO - 路由: /tasks/api/tasks/<int:task_id> - 方法: {'OPTIONS', 'PUT'} - 终端: tasks.api_update_task
2025-05-09 15:35:29,924 - app - INFO - 路由: /tasks/api/tasks/<int:task_id>/update_bypass - 方法: {'OPTIONS', 'PUT'} - 终端: tasks.update_task_bypass_csrf
2025-05-09 15:35:29,925 - app - INFO - 路由: /tasks/get-csrf-token - 方法: {'OPTIONS', 'GET', 'HEAD'} - 终端: tasks.get_csrf_token
2025-05-09 15:35:29,926 - app - INFO - 路由: /tasks/api/tasks/<int:task_id>/no_csrf - 方法: {'OPTIONS', 'PUT'} - 终端: tasks.update_task_no_csrf
2025-05-09 15:35:29,928 - app - INFO - 路由: /tasks/api/tasks/<int:task_id>/detail - 方法: {'OPTIONS', 'GET', 'HEAD'} - 终端: tasks.api_tasks_detail
2025-05-09 15:35:29,984 - app - WARNING - team_bp 未定义或无法导入
2025-05-09 15:35:30,133 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-05-09 15:35:30,140 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions 
WHERE permissions.name = ?
 LIMIT ? OFFSET ?
2025-05-09 15:35:30,144 - sqlalchemy.engine.Engine - INFO - [generated in 0.00365s] ('manage_users', 1, 0)
2025-05-09 15:35:30,147 - app.utils.permissions - INFO - 更新权限: manage_users
2025-05-09 15:35:30,150 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions 
WHERE permissions.name = ?
 LIMIT ? OFFSET ?
2025-05-09 15:35:30,153 - sqlalchemy.engine.Engine - INFO - [cached since 0.01413s ago] ('manage_roles', 1, 0)
2025-05-09 15:35:30,157 - app.utils.permissions - INFO - 更新权限: manage_roles
2025-05-09 15:35:30,159 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions 
WHERE permissions.name = ?
 LIMIT ? OFFSET ?
2025-05-09 15:35:30,161 - sqlalchemy.engine.Engine - INFO - [cached since 0.02086s ago] ('manage_all_projects', 1, 0)
2025-05-09 15:35:30,163 - app.utils.permissions - INFO - 更新权限: manage_all_projects
2025-05-09 15:35:30,166 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions 
WHERE permissions.name = ?
 LIMIT ? OFFSET ?
2025-05-09 15:35:30,168 - sqlalchemy.engine.Engine - INFO - [cached since 0.02838s ago] ('manage_project', 1, 0)
2025-05-09 15:35:30,171 - app.utils.permissions - INFO - 更新权限: manage_project
2025-05-09 15:35:30,173 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions 
WHERE permissions.name = ?
 LIMIT ? OFFSET ?
2025-05-09 15:35:30,176 - sqlalchemy.engine.Engine - INFO - [cached since 0.03566s ago] ('manage_all_tasks', 1, 0)
2025-05-09 15:35:30,178 - app.utils.permissions - INFO - 更新权限: manage_all_tasks
2025-05-09 15:35:30,181 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions 
WHERE permissions.name = ?
 LIMIT ? OFFSET ?
2025-05-09 15:35:30,184 - sqlalchemy.engine.Engine - INFO - [cached since 0.04409s ago] ('manage_task', 1, 0)
2025-05-09 15:35:30,187 - app.utils.permissions - INFO - 更新权限: manage_task
2025-05-09 15:35:30,189 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions 
WHERE permissions.name = ?
 LIMIT ? OFFSET ?
2025-05-09 15:35:30,192 - sqlalchemy.engine.Engine - INFO - [cached since 0.05134s ago] ('view_project', 1, 0)
2025-05-09 15:35:30,194 - app.utils.permissions - INFO - 更新权限: view_project
2025-05-09 15:35:30,195 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions 
WHERE permissions.name = ?
 LIMIT ? OFFSET ?
2025-05-09 15:35:30,198 - sqlalchemy.engine.Engine - INFO - [cached since 0.05816s ago] ('view_task', 1, 0)
2025-05-09 15:35:30,200 - app.utils.permissions - INFO - 更新权限: view_task
2025-05-09 15:35:30,203 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions 
WHERE permissions.name = ?
 LIMIT ? OFFSET ?
2025-05-09 15:35:30,205 - sqlalchemy.engine.Engine - INFO - [cached since 0.06533s ago] ('manage_resources', 1, 0)
2025-05-09 15:35:30,208 - app.utils.permissions - INFO - 更新权限: manage_resources
2025-05-09 15:35:30,210 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions 
WHERE permissions.name = ?
 LIMIT ? OFFSET ?
2025-05-09 15:35:30,213 - sqlalchemy.engine.Engine - INFO - [cached since 0.07294s ago] ('manage_risks', 1, 0)
2025-05-09 15:35:30,214 - app.utils.permissions - INFO - 更新权限: manage_risks
2025-05-09 15:35:30,217 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions 
WHERE permissions.name = ?
 LIMIT ? OFFSET ?
2025-05-09 15:35:30,219 - sqlalchemy.engine.Engine - INFO - [cached since 0.07978s ago] ('view_reports', 1, 0)
2025-05-09 15:35:30,222 - app.utils.permissions - INFO - 更新权限: view_reports
2025-05-09 15:35:30,225 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions 
WHERE permissions.name = ?
 LIMIT ? OFFSET ?
2025-05-09 15:35:30,226 - sqlalchemy.engine.Engine - INFO - [cached since 0.0866s ago] ('create_task', 1, 0)
2025-05-09 15:35:30,229 - app.utils.permissions - INFO - 更新权限: create_task
2025-05-09 15:35:30,231 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions 
WHERE permissions.name = ?
 LIMIT ? OFFSET ?
2025-05-09 15:35:30,234 - sqlalchemy.engine.Engine - INFO - [cached since 0.09421s ago] ('create_project', 1, 0)
2025-05-09 15:35:30,237 - app.utils.permissions - INFO - 更新权限: create_project
2025-05-09 15:35:30,239 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions 
WHERE permissions.name = ?
 LIMIT ? OFFSET ?
2025-05-09 15:35:30,241 - sqlalchemy.engine.Engine - INFO - [cached since 0.1012s ago] ('assign_task', 1, 0)
2025-05-09 15:35:30,243 - app.utils.permissions - INFO - 更新权限: assign_task
2025-05-09 15:35:30,246 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions 
WHERE permissions.name = ?
 LIMIT ? OFFSET ?
2025-05-09 15:35:30,248 - sqlalchemy.engine.Engine - INFO - [cached since 0.1081s ago] ('change_project_status', 1, 0)
2025-05-09 15:35:30,251 - app.utils.permissions - INFO - 更新权限: change_project_status
2025-05-09 15:35:30,253 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions 
WHERE permissions.name = ?
 LIMIT ? OFFSET ?
2025-05-09 15:35:30,256 - sqlalchemy.engine.Engine - INFO - [cached since 0.116s ago] ('change_task_status', 1, 0)
2025-05-09 15:35:30,258 - app.utils.permissions - INFO - 更新权限: change_task_status
2025-05-09 15:35:30,260 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-05-09 15:35:30,263 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-05-09 15:35:30,268 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions
2025-05-09 15:35:30,270 - sqlalchemy.engine.Engine - INFO - [generated in 0.00254s] ()
2025-05-09 15:35:30,274 - sqlalchemy.engine.Engine - INFO - SELECT roles.id AS roles_id, roles.name AS roles_name, roles.description AS roles_description, roles.created_at AS roles_created_at 
FROM roles 
WHERE roles.name = ?
 LIMIT ? OFFSET ?
2025-05-09 15:35:30,276 - sqlalchemy.engine.Engine - INFO - [generated in 0.00230s] ('admin', 1, 0)
2025-05-09 15:35:30,278 - app.utils.permissions - INFO - 更新角色: admin
2025-05-09 15:35:30,281 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions, role_permissions 
WHERE ? = role_permissions.role_id AND permissions.id = role_permissions.permission_id
2025-05-09 15:35:30,286 - sqlalchemy.engine.Engine - INFO - [generated in 0.00410s] (1,)
2025-05-09 15:35:30,288 - app.utils.permissions - INFO - 为管理员角色添加所有权限: 16个
2025-05-09 15:35:30,290 - sqlalchemy.engine.Engine - INFO - SELECT roles.id AS roles_id, roles.name AS roles_name, roles.description AS roles_description, roles.created_at AS roles_created_at 
FROM roles 
WHERE roles.name = ?
 LIMIT ? OFFSET ?
2025-05-09 15:35:30,292 - sqlalchemy.engine.Engine - INFO - [cached since 0.01884s ago] ('manager', 1, 0)
2025-05-09 15:35:30,295 - app.utils.permissions - INFO - 更新角色: manager
2025-05-09 15:35:30,297 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions, role_permissions 
WHERE ? = role_permissions.role_id AND permissions.id = role_permissions.permission_id
2025-05-09 15:35:30,299 - sqlalchemy.engine.Engine - INFO - [cached since 0.01782s ago] (2,)
2025-05-09 15:35:30,302 - app.utils.permissions - INFO - 为角色 manager 添加权限: manage_project
2025-05-09 15:35:30,303 - app.utils.permissions - INFO - 为角色 manager 添加权限: manage_task
2025-05-09 15:35:30,305 - app.utils.permissions - INFO - 为角色 manager 添加权限: view_project
2025-05-09 15:35:30,306 - app.utils.permissions - INFO - 为角色 manager 添加权限: view_task
2025-05-09 15:35:30,307 - app.utils.permissions - INFO - 为角色 manager 添加权限: manage_resources
2025-05-09 15:35:30,308 - app.utils.permissions - INFO - 为角色 manager 添加权限: manage_risks
2025-05-09 15:35:30,310 - app.utils.permissions - INFO - 为角色 manager 添加权限: view_reports
2025-05-09 15:35:30,311 - app.utils.permissions - INFO - 为角色 manager 添加权限: create_project
2025-05-09 15:35:30,313 - app.utils.permissions - INFO - 为角色 manager 添加权限: create_task
2025-05-09 15:35:30,315 - app.utils.permissions - INFO - 为角色 manager 添加权限: assign_task
2025-05-09 15:35:30,316 - app.utils.permissions - INFO - 为角色 manager 添加权限: change_project_status
2025-05-09 15:35:30,317 - app.utils.permissions - INFO - 为角色 manager 添加权限: change_task_status
2025-05-09 15:35:30,319 - sqlalchemy.engine.Engine - INFO - SELECT roles.id AS roles_id, roles.name AS roles_name, roles.description AS roles_description, roles.created_at AS roles_created_at 
FROM roles 
WHERE roles.name = ?
 LIMIT ? OFFSET ?
2025-05-09 15:35:30,321 - sqlalchemy.engine.Engine - INFO - [cached since 0.04782s ago] ('user', 1, 0)
2025-05-09 15:35:30,323 - app.utils.permissions - INFO - 更新角色: user
2025-05-09 15:35:30,325 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions, role_permissions 
WHERE ? = role_permissions.role_id AND permissions.id = role_permissions.permission_id
2025-05-09 15:35:30,327 - sqlalchemy.engine.Engine - INFO - [cached since 0.0452s ago] (5,)
2025-05-09 15:35:30,329 - app.utils.permissions - INFO - 为角色 user 添加权限: view_project
2025-05-09 15:35:30,330 - app.utils.permissions - INFO - 为角色 user 添加权限: view_task
2025-05-09 15:35:30,331 - app.utils.permissions - INFO - 为角色 user 添加权限: view_reports
2025-05-09 15:35:30,334 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-05-09 15:35:30,335 - app.utils.permissions - INFO - 角色和权限初始化完成
2025-05-09 15:35:30,336 - __main__ - INFO - 角色和权限初始化成功
2025-05-09 15:35:30,337 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-05-09 15:35:30,340 - sqlalchemy.engine.Engine - INFO - SELECT users.id AS users_id, users.username AS users_username, users.email AS users_email, users.name AS users_name, users.password_hash AS users_password_hash, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.last_login AS users_last_login 
FROM users 
WHERE users.username = ?
 LIMIT ? OFFSET ?
2025-05-09 15:35:30,342 - sqlalchemy.engine.Engine - INFO - [generated in 0.00190s] ('system', 1, 0)
2025-05-09 15:35:30,345 - sqlalchemy.engine.Engine - INFO - SELECT projects.id AS projects_id, projects.name AS projects_name, projects.description AS projects_description, projects.status AS projects_status, projects.start_date AS projects_start_date, projects.end_date AS projects_end_date, projects.progress AS projects_progress, projects.created_at AS projects_created_at, projects.updated_at AS projects_updated_at, projects.manager_id AS projects_manager_id, projects.owner_id AS projects_owner_id 
FROM projects 
WHERE projects.name = ?
 LIMIT ? OFFSET ?
2025-05-09 15:35:30,347 - sqlalchemy.engine.Engine - INFO - [generated in 0.00186s] ('Test Project', 1, 0)
2025-05-09 15:35:30,350 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-05-09 15:35:30,351 - __main__ - INFO - 数据库初始化完成
2025-05-09 15:35:30,352 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-05-09 15:35:30,354 - sqlalchemy.engine.Engine - INFO - SELECT users.id AS users_id, users.username AS users_username, users.email AS users_email, users.name AS users_name, users.password_hash AS users_password_hash, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.last_login AS users_last_login 
FROM users 
WHERE users.username = ?
 LIMIT ? OFFSET ?
2025-05-09 15:35:30,355 - sqlalchemy.engine.Engine - INFO - [cached since 0.01541s ago] ('system', 1, 0)
2025-05-09 15:35:30,363 - sqlalchemy.engine.Engine - INFO - INSERT INTO resource_usages (user_id, cpu_usage, memory_usage, disk_usage, network_usage, recorded_at) VALUES (?, ?, ?, ?, ?, ?)
2025-05-09 15:35:30,366 - sqlalchemy.engine.Engine - INFO - [generated in 0.00316s] (2, 27.2, 53.8, 10.9, 0.0, '2025-05-09 07:35:30.362189')
2025-05-09 15:35:30,371 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-05-09 15:35:30,378 - __main__ - INFO - 系统资源检查完成
2025-05-09 15:35:30,378 - __main__ - INFO - 开始清理旧数据
2025-05-09 15:35:30,379 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-05-09 15:35:30,381 - sqlalchemy.engine.Engine - INFO - DELETE FROM resource_usages WHERE resource_usages.recorded_at < ?
2025-05-09 15:35:30,383 - sqlalchemy.engine.Engine - INFO - [generated in 0.00190s] ('2025-04-09 07:35:30.379463',)
2025-05-09 15:35:30,385 - __main__ - INFO - 删除了 0 条过期的资源使用记录
2025-05-09 15:35:30,386 - sqlalchemy.engine.Engine - INFO - DELETE FROM system_alerts WHERE system_alerts.is_resolved = 1 AND system_alerts.created_at < ?
2025-05-09 15:35:30,387 - sqlalchemy.engine.Engine - INFO - [generated in 0.00171s] ('2025-05-02 07:35:30.385443',)
2025-05-09 15:35:30,389 - __main__ - INFO - 删除了 0 条已解决的过期警报
2025-05-09 15:35:30,389 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-05-09 15:35:30,391 - __main__ - INFO - 旧数据清理完成
2025-05-09 15:35:30,396 - werkzeug - WARNING -  * Debugger is active!
2025-05-09 15:35:30,400 - werkzeug - INFO -  * Debugger PIN: 670-037-726
2025-05-09 15:35:46,322 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-05-09 15:35:46,334 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions 
WHERE permissions.name = ?
 LIMIT ? OFFSET ?
2025-05-09 15:35:46,339 - sqlalchemy.engine.Engine - INFO - [cached since 16.2s ago] ('manage_users', 1, 0)
2025-05-09 15:35:46,345 - app.utils.permissions - INFO - 更新权限: manage_users
2025-05-09 15:35:46,350 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions 
WHERE permissions.name = ?
 LIMIT ? OFFSET ?
2025-05-09 15:35:46,357 - sqlalchemy.engine.Engine - INFO - [cached since 16.22s ago] ('manage_roles', 1, 0)
2025-05-09 15:35:46,364 - app.utils.permissions - INFO - 更新权限: manage_roles
2025-05-09 15:35:46,373 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions 
WHERE permissions.name = ?
 LIMIT ? OFFSET ?
2025-05-09 15:35:46,383 - sqlalchemy.engine.Engine - INFO - [cached since 16.24s ago] ('manage_all_projects', 1, 0)
2025-05-09 15:35:46,395 - app.utils.permissions - INFO - 更新权限: manage_all_projects
2025-05-09 15:35:46,401 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions 
WHERE permissions.name = ?
 LIMIT ? OFFSET ?
2025-05-09 15:35:46,409 - sqlalchemy.engine.Engine - INFO - [cached since 16.27s ago] ('manage_project', 1, 0)
2025-05-09 15:35:46,415 - app.utils.permissions - INFO - 更新权限: manage_project
2025-05-09 15:35:46,421 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions 
WHERE permissions.name = ?
 LIMIT ? OFFSET ?
2025-05-09 15:35:46,430 - sqlalchemy.engine.Engine - INFO - [cached since 16.29s ago] ('manage_all_tasks', 1, 0)
2025-05-09 15:35:46,436 - app.utils.permissions - INFO - 更新权限: manage_all_tasks
2025-05-09 15:35:46,445 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions 
WHERE permissions.name = ?
 LIMIT ? OFFSET ?
2025-05-09 15:35:46,453 - sqlalchemy.engine.Engine - INFO - [cached since 16.31s ago] ('manage_task', 1, 0)
2025-05-09 15:35:46,459 - app.utils.permissions - INFO - 更新权限: manage_task
2025-05-09 15:35:46,464 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions 
WHERE permissions.name = ?
 LIMIT ? OFFSET ?
2025-05-09 15:35:46,471 - sqlalchemy.engine.Engine - INFO - [cached since 16.33s ago] ('view_project', 1, 0)
2025-05-09 15:35:46,478 - app.utils.permissions - INFO - 更新权限: view_project
2025-05-09 15:35:46,484 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions 
WHERE permissions.name = ?
 LIMIT ? OFFSET ?
2025-05-09 15:35:46,490 - sqlalchemy.engine.Engine - INFO - [cached since 16.35s ago] ('view_task', 1, 0)
2025-05-09 15:35:46,496 - app.utils.permissions - INFO - 更新权限: view_task
2025-05-09 15:35:46,502 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions 
WHERE permissions.name = ?
 LIMIT ? OFFSET ?
2025-05-09 15:35:46,508 - sqlalchemy.engine.Engine - INFO - [cached since 16.37s ago] ('manage_resources', 1, 0)
2025-05-09 15:35:46,515 - app.utils.permissions - INFO - 更新权限: manage_resources
2025-05-09 15:35:46,524 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions 
WHERE permissions.name = ?
 LIMIT ? OFFSET ?
2025-05-09 15:35:46,531 - sqlalchemy.engine.Engine - INFO - [cached since 16.39s ago] ('manage_risks', 1, 0)
2025-05-09 15:35:46,536 - app.utils.permissions - INFO - 更新权限: manage_risks
2025-05-09 15:35:46,542 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions 
WHERE permissions.name = ?
 LIMIT ? OFFSET ?
2025-05-09 15:35:46,552 - sqlalchemy.engine.Engine - INFO - [cached since 16.41s ago] ('view_reports', 1, 0)
2025-05-09 15:35:46,559 - app.utils.permissions - INFO - 更新权限: view_reports
2025-05-09 15:35:46,568 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions 
WHERE permissions.name = ?
 LIMIT ? OFFSET ?
2025-05-09 15:35:46,574 - sqlalchemy.engine.Engine - INFO - [cached since 16.43s ago] ('create_task', 1, 0)
2025-05-09 15:35:46,581 - app.utils.permissions - INFO - 更新权限: create_task
2025-05-09 15:35:46,586 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions 
WHERE permissions.name = ?
 LIMIT ? OFFSET ?
2025-05-09 15:35:46,592 - sqlalchemy.engine.Engine - INFO - [cached since 16.45s ago] ('create_project', 1, 0)
2025-05-09 15:35:46,598 - app.utils.permissions - INFO - 更新权限: create_project
2025-05-09 15:35:46,603 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions 
WHERE permissions.name = ?
 LIMIT ? OFFSET ?
2025-05-09 15:35:46,610 - sqlalchemy.engine.Engine - INFO - [cached since 16.47s ago] ('assign_task', 1, 0)
2025-05-09 15:35:46,617 - app.utils.permissions - INFO - 更新权限: assign_task
2025-05-09 15:35:46,623 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions 
WHERE permissions.name = ?
 LIMIT ? OFFSET ?
2025-05-09 15:35:46,628 - sqlalchemy.engine.Engine - INFO - [cached since 16.49s ago] ('change_project_status', 1, 0)
2025-05-09 15:35:46,635 - app.utils.permissions - INFO - 更新权限: change_project_status
2025-05-09 15:35:46,640 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions 
WHERE permissions.name = ?
 LIMIT ? OFFSET ?
2025-05-09 15:35:46,646 - sqlalchemy.engine.Engine - INFO - [cached since 16.51s ago] ('change_task_status', 1, 0)
2025-05-09 15:35:46,656 - app.utils.permissions - INFO - 更新权限: change_task_status
2025-05-09 15:35:46,661 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-05-09 15:35:46,666 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-05-09 15:35:46,671 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions
2025-05-09 15:35:46,676 - sqlalchemy.engine.Engine - INFO - [cached since 16.41s ago] ()
2025-05-09 15:35:46,684 - sqlalchemy.engine.Engine - INFO - SELECT roles.id AS roles_id, roles.name AS roles_name, roles.description AS roles_description, roles.created_at AS roles_created_at 
FROM roles 
WHERE roles.name = ?
 LIMIT ? OFFSET ?
2025-05-09 15:35:46,690 - sqlalchemy.engine.Engine - INFO - [cached since 16.42s ago] ('admin', 1, 0)
2025-05-09 15:35:46,695 - app.utils.permissions - INFO - 更新角色: admin
2025-05-09 15:35:46,702 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions, role_permissions 
WHERE ? = role_permissions.role_id AND permissions.id = role_permissions.permission_id
2025-05-09 15:35:46,709 - sqlalchemy.engine.Engine - INFO - [cached since 16.43s ago] (1,)
2025-05-09 15:35:46,715 - app.utils.permissions - INFO - 为管理员角色添加所有权限: 16个
2025-05-09 15:35:46,719 - sqlalchemy.engine.Engine - INFO - SELECT roles.id AS roles_id, roles.name AS roles_name, roles.description AS roles_description, roles.created_at AS roles_created_at 
FROM roles 
WHERE roles.name = ?
 LIMIT ? OFFSET ?
2025-05-09 15:35:46,727 - sqlalchemy.engine.Engine - INFO - [cached since 16.45s ago] ('manager', 1, 0)
2025-05-09 15:35:46,733 - app.utils.permissions - INFO - 更新角色: manager
2025-05-09 15:35:46,739 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions, role_permissions 
WHERE ? = role_permissions.role_id AND permissions.id = role_permissions.permission_id
2025-05-09 15:35:46,746 - sqlalchemy.engine.Engine - INFO - [cached since 16.46s ago] (2,)
2025-05-09 15:35:46,755 - app.utils.permissions - INFO - 为角色 manager 添加权限: manage_project
2025-05-09 15:35:46,760 - app.utils.permissions - INFO - 为角色 manager 添加权限: manage_task
2025-05-09 15:35:46,767 - app.utils.permissions - INFO - 为角色 manager 添加权限: view_project
2025-05-09 15:35:46,771 - app.utils.permissions - INFO - 为角色 manager 添加权限: view_task
2025-05-09 15:35:46,778 - app.utils.permissions - INFO - 为角色 manager 添加权限: manage_resources
2025-05-09 15:35:46,784 - app.utils.permissions - INFO - 为角色 manager 添加权限: manage_risks
2025-05-09 15:35:46,788 - app.utils.permissions - INFO - 为角色 manager 添加权限: view_reports
2025-05-09 15:35:46,794 - app.utils.permissions - INFO - 为角色 manager 添加权限: create_project
2025-05-09 15:35:46,801 - app.utils.permissions - INFO - 为角色 manager 添加权限: create_task
2025-05-09 15:35:46,807 - app.utils.permissions - INFO - 为角色 manager 添加权限: assign_task
2025-05-09 15:35:46,814 - app.utils.permissions - INFO - 为角色 manager 添加权限: change_project_status
2025-05-09 15:35:46,820 - app.utils.permissions - INFO - 为角色 manager 添加权限: change_task_status
2025-05-09 15:35:46,825 - sqlalchemy.engine.Engine - INFO - SELECT roles.id AS roles_id, roles.name AS roles_name, roles.description AS roles_description, roles.created_at AS roles_created_at 
FROM roles 
WHERE roles.name = ?
 LIMIT ? OFFSET ?
2025-05-09 15:35:46,832 - sqlalchemy.engine.Engine - INFO - [cached since 16.56s ago] ('user', 1, 0)
2025-05-09 15:35:46,836 - app.utils.permissions - INFO - 更新角色: user
2025-05-09 15:35:46,842 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions, role_permissions 
WHERE ? = role_permissions.role_id AND permissions.id = role_permissions.permission_id
2025-05-09 15:35:46,848 - sqlalchemy.engine.Engine - INFO - [cached since 16.57s ago] (5,)
2025-05-09 15:35:46,856 - app.utils.permissions - INFO - 为角色 user 添加权限: view_project
2025-05-09 15:35:46,861 - app.utils.permissions - INFO - 为角色 user 添加权限: view_task
2025-05-09 15:35:46,865 - app.utils.permissions - INFO - 为角色 user 添加权限: view_reports
2025-05-09 15:35:46,870 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-05-09 15:35:46,875 - app.utils.permissions - INFO - 角色和权限初始化完成
2025-05-09 15:35:46,882 - app - INFO - 角色和权限初始化成功
2025-05-09 15:35:46,889 - app - INFO - 应用初始化完成
2025-05-09 15:35:46,957 - werkzeug - INFO - 127.0.0.1 - - [09/May/2025 15:35:46] "GET /login HTTP/1.1" 200 -
2025-05-09 15:35:46,986 - app.utils.jwt_callbacks - INFO - Checking if token 051ad551-75b6-4246-8deb-a3228d35e4e4 is in blocklist
2025-05-09 15:35:46,990 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-05-09 15:35:47,003 - sqlalchemy.engine.Engine - INFO - SELECT token_blacklist.id AS token_blacklist_id, token_blacklist.jti AS token_blacklist_jti, token_blacklist.token_type AS token_blacklist_token_type, token_blacklist.user_id AS token_blacklist_user_id, token_blacklist.revoked_at AS token_blacklist_revoked_at, token_blacklist.expires_at AS token_blacklist_expires_at 
FROM token_blacklist 
WHERE token_blacklist.jti = ?
 LIMIT ? OFFSET ?
2025-05-09 15:35:47,006 - sqlalchemy.engine.Engine - INFO - [generated in 0.00249s] ('051ad551-75b6-4246-8deb-a3228d35e4e4', 1, 0)
2025-05-09 15:35:47,009 - app.utils.jwt_callbacks - INFO - Token 051ad551-75b6-4246-8deb-a3228d35e4e4 is valid
2025-05-09 15:35:47,011 - app.utils.jwt_callbacks - INFO - Verifying token
2025-05-09 15:35:47,013 - app.utils.jwt_callbacks - INFO - JWT Header: {'alg': 'HS256', 'typ': 'JWT'}
2025-05-09 15:35:47,016 - app.utils.jwt_callbacks - INFO - JWT Data: {'fresh': False, 'iat': 1746775578, 'jti': '051ad551-75b6-4246-8deb-a3228d35e4e4', 'type': 'access', 'sub': 1, 'nbf': 1746775578, 'csrf': 'IjY2NjEzOWExZTRmODhkZmYzMDRlMjQ2OTcyOTI1ODM4YjQzMWVlZDki.aB2uGg.jgVFJQK5Nco9wCP7hwxW73ebrE0', 'exp': 1746779178, 'aud': 'task_management_system', 'user_claims': {'username': 'admin', 'roles': ['admin'], 'permissions': ['manage_users', 'manage_roles', 'manage_all_projects', 'manage_project', 'manage_all_tasks', 'manage_task', 'view_project', 'view_task', 'manage_resources', 'manage_risks', 'view_reports', 'create_task', 'assign_task', 'change_project_status', 'change_task_status', 'create_project'], 'is_active': True}, 'roles': ['admin']}
2025-05-09 15:35:47,018 - app.utils.jwt_callbacks - INFO - Token time difference: -569.018931 seconds
2025-05-09 15:35:47,021 - app.utils.jwt_callbacks - INFO - Token verification successful
2025-05-09 15:35:47,023 - app.utils.jwt_callbacks - INFO - Looking up user with identity: 1
2025-05-09 15:35:47,028 - sqlalchemy.engine.Engine - INFO - SELECT users.id AS users_id, users.username AS users_username, users.email AS users_email, users.name AS users_name, users.password_hash AS users_password_hash, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.last_login AS users_last_login 
FROM users 
WHERE users.id = ?
2025-05-09 15:35:47,034 - sqlalchemy.engine.Engine - INFO - [generated in 0.00626s] (1,)
2025-05-09 15:35:47,038 - app.utils.jwt_callbacks - INFO - User found: admin
2025-05-09 15:35:47,041 - sqlalchemy.engine.Engine - INFO - SELECT roles.id AS roles_id, roles.name AS roles_name, roles.description AS roles_description, roles.created_at AS roles_created_at 
FROM roles, user_roles 
WHERE ? = user_roles.user_id AND roles.id = user_roles.role_id
2025-05-09 15:35:47,044 - sqlalchemy.engine.Engine - INFO - [generated in 0.00288s] (1,)
2025-05-09 15:35:47,048 - app.utils.jwt_callbacks - INFO - User roles: ['admin']
2025-05-09 15:35:47,055 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions, role_permissions 
WHERE ? = role_permissions.role_id AND permissions.id = role_permissions.permission_id
2025-05-09 15:35:47,063 - sqlalchemy.engine.Engine - INFO - [cached since 16.78s ago] (1,)
2025-05-09 15:35:47,073 - app.utils.jwt_callbacks - INFO - User permissions: ['manage_users', 'manage_roles', 'manage_all_projects', 'manage_project', 'manage_all_tasks', 'manage_task', 'view_project', 'view_task', 'manage_resources', 'manage_risks', 'view_reports', 'create_task', 'assign_task', 'change_project_status', 'change_task_status', 'create_project']
2025-05-09 15:35:47,080 - app.utils.jwt_callbacks - INFO - Checking if token 051ad551-75b6-4246-8deb-a3228d35e4e4 is in blocklist
2025-05-09 15:35:47,089 - sqlalchemy.engine.Engine - INFO - SELECT token_blacklist.id AS token_blacklist_id, token_blacklist.jti AS token_blacklist_jti, token_blacklist.token_type AS token_blacklist_token_type, token_blacklist.user_id AS token_blacklist_user_id, token_blacklist.revoked_at AS token_blacklist_revoked_at, token_blacklist.expires_at AS token_blacklist_expires_at 
FROM token_blacklist 
WHERE token_blacklist.jti = ?
 LIMIT ? OFFSET ?
2025-05-09 15:35:47,098 - sqlalchemy.engine.Engine - INFO - [cached since 0.09507s ago] ('051ad551-75b6-4246-8deb-a3228d35e4e4', 1, 0)
2025-05-09 15:35:47,105 - app.utils.jwt_callbacks - INFO - Token 051ad551-75b6-4246-8deb-a3228d35e4e4 is valid
2025-05-09 15:35:47,110 - app.utils.jwt_callbacks - INFO - Verifying token
2025-05-09 15:35:47,115 - app.utils.jwt_callbacks - INFO - JWT Header: {'alg': 'HS256', 'typ': 'JWT'}
2025-05-09 15:35:47,121 - app.utils.jwt_callbacks - INFO - JWT Data: {'fresh': False, 'iat': 1746775578, 'jti': '051ad551-75b6-4246-8deb-a3228d35e4e4', 'type': 'access', 'sub': 1, 'nbf': 1746775578, 'csrf': 'IjY2NjEzOWExZTRmODhkZmYzMDRlMjQ2OTcyOTI1ODM4YjQzMWVlZDki.aB2uGg.jgVFJQK5Nco9wCP7hwxW73ebrE0', 'exp': 1746779178, 'aud': 'task_management_system', 'user_claims': {'username': 'admin', 'roles': ['admin'], 'permissions': ['manage_users', 'manage_roles', 'manage_all_projects', 'manage_project', 'manage_all_tasks', 'manage_task', 'view_project', 'view_task', 'manage_resources', 'manage_risks', 'view_reports', 'create_task', 'assign_task', 'change_project_status', 'change_task_status', 'create_project'], 'is_active': True}, 'roles': ['admin']}
2025-05-09 15:35:47,126 - app.utils.jwt_callbacks - INFO - Token time difference: -569.126589 seconds
2025-05-09 15:35:47,132 - app.utils.jwt_callbacks - INFO - Token verification successful
2025-05-09 15:35:47,138 - app.utils.jwt_callbacks - INFO - Looking up user with identity: 1
2025-05-09 15:35:47,144 - app.utils.jwt_callbacks - INFO - User found: admin
2025-05-09 15:35:47,153 - app.utils.jwt_callbacks - INFO - User roles: ['admin']
2025-05-09 15:35:47,157 - app.utils.jwt_callbacks - INFO - User permissions: ['manage_users', 'manage_roles', 'manage_all_projects', 'manage_project', 'manage_all_tasks', 'manage_task', 'view_project', 'view_task', 'manage_resources', 'manage_risks', 'view_reports', 'create_task', 'assign_task', 'change_project_status', 'change_task_status', 'create_project']
2025-05-09 15:35:47,163 - app - INFO - 用户已认证，重定向到仪表板页面: /.well-known/appspecific/com.chrome.devtools.json
2025-05-09 15:35:47,168 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-05-09 15:35:47,177 - werkzeug - INFO - 127.0.0.1 - - [09/May/2025 15:35:47] "[32mGET /.well-known/appspecific/com.chrome.devtools.json HTTP/1.1[0m" 302 -
2025-05-09 15:35:47,247 - werkzeug - INFO - 127.0.0.1 - - [09/May/2025 15:35:47] "[36mGET /static/css/bootstrap-icons.css HTTP/1.1[0m" 304 -
2025-05-09 15:35:47,253 - werkzeug - INFO - 127.0.0.1 - - [09/May/2025 15:35:47] "[36mGET /static/css/style.css HTTP/1.1[0m" 304 -
2025-05-09 15:35:47,254 - werkzeug - INFO - 127.0.0.1 - - [09/May/2025 15:35:47] "[36mGET /static/css/bootstrap.min.css HTTP/1.1[0m" 304 -
2025-05-09 15:35:47,261 - werkzeug - INFO - 127.0.0.1 - - [09/May/2025 15:35:47] "[36mGET /static/js/bootstrap.bundle.min.js HTTP/1.1[0m" 304 -
2025-05-09 15:35:47,263 - app.utils.jwt_callbacks - INFO - Checking if token 051ad551-75b6-4246-8deb-a3228d35e4e4 is in blocklist
2025-05-09 15:35:47,264 - werkzeug - INFO - 127.0.0.1 - - [09/May/2025 15:35:47] "[36mGET /static/js/jquery.min.js HTTP/1.1[0m" 304 -
2025-05-09 15:35:47,273 - werkzeug - INFO - 127.0.0.1 - - [09/May/2025 15:35:47] "[36mGET /static/js/auth.js HTTP/1.1[0m" 304 -
2025-05-09 15:35:47,284 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-05-09 15:35:47,304 - werkzeug - INFO - 127.0.0.1 - - [09/May/2025 15:35:47] "[36mGET /static/js/fix-modals.js HTTP/1.1[0m" 304 -
2025-05-09 15:35:47,304 - werkzeug - INFO - 127.0.0.1 - - [09/May/2025 15:35:47] "[36mGET /static/images/background.png HTTP/1.1[0m" 304 -
2025-05-09 15:35:47,306 - sqlalchemy.engine.Engine - INFO - SELECT token_blacklist.id AS token_blacklist_id, token_blacklist.jti AS token_blacklist_jti, token_blacklist.token_type AS token_blacklist_token_type, token_blacklist.user_id AS token_blacklist_user_id, token_blacklist.revoked_at AS token_blacklist_revoked_at, token_blacklist.expires_at AS token_blacklist_expires_at 
FROM token_blacklist 
WHERE token_blacklist.jti = ?
 LIMIT ? OFFSET ?
2025-05-09 15:35:47,308 - werkzeug - INFO - 127.0.0.1 - - [09/May/2025 15:35:47] "[36mGET /static/js/csrf.js HTTP/1.1[0m" 304 -
2025-05-09 15:35:47,312 - werkzeug - INFO - 127.0.0.1 - - [09/May/2025 15:35:47] "[36mGET /static/js/background-helper.js HTTP/1.1[0m" 304 -
2025-05-09 15:35:47,326 - werkzeug - INFO - 127.0.0.1 - - [09/May/2025 15:35:47] "[33mGET /static/uploads/background.png HTTP/1.1[0m" 404 -
2025-05-09 15:35:47,373 - werkzeug - INFO - 127.0.0.1 - - [09/May/2025 15:35:47] "[36mGET /static/css/bootstrap.min.css.map HTTP/1.1[0m" 304 -
2025-05-09 15:35:47,379 - sqlalchemy.engine.Engine - INFO - [cached since 0.3757s ago] ('051ad551-75b6-4246-8deb-a3228d35e4e4', 1, 0)
2025-05-09 15:35:47,455 - app.utils.jwt_callbacks - INFO - Token 051ad551-75b6-4246-8deb-a3228d35e4e4 is valid
2025-05-09 15:35:47,472 - werkzeug - INFO - 127.0.0.1 - - [09/May/2025 15:35:47] "[36mGET /static/favicon.ico HTTP/1.1[0m" 304 -
2025-05-09 15:35:47,517 - app.utils.jwt_callbacks - INFO - Verifying token
2025-05-09 15:35:47,557 - app.utils.jwt_callbacks - INFO - JWT Header: {'alg': 'HS256', 'typ': 'JWT'}
2025-05-09 15:35:47,587 - app.utils.jwt_callbacks - INFO - JWT Data: {'fresh': False, 'iat': 1746775578, 'jti': '051ad551-75b6-4246-8deb-a3228d35e4e4', 'type': 'access', 'sub': 1, 'nbf': 1746775578, 'csrf': 'IjY2NjEzOWExZTRmODhkZmYzMDRlMjQ2OTcyOTI1ODM4YjQzMWVlZDki.aB2uGg.jgVFJQK5Nco9wCP7hwxW73ebrE0', 'exp': 1746779178, 'aud': 'task_management_system', 'user_claims': {'username': 'admin', 'roles': ['admin'], 'permissions': ['manage_users', 'manage_roles', 'manage_all_projects', 'manage_project', 'manage_all_tasks', 'manage_task', 'view_project', 'view_task', 'manage_resources', 'manage_risks', 'view_reports', 'create_task', 'assign_task', 'change_project_status', 'change_task_status', 'create_project'], 'is_active': True}, 'roles': ['admin']}
2025-05-09 15:35:47,590 - app.utils.jwt_callbacks - INFO - Token time difference: -569.590628 seconds
2025-05-09 15:35:47,635 - app.utils.jwt_callbacks - INFO - Token verification successful
2025-05-09 15:35:47,652 - app.utils.jwt_callbacks - INFO - Looking up user with identity: 1
2025-05-09 15:35:47,659 - sqlalchemy.engine.Engine - INFO - SELECT users.id AS users_id, users.username AS users_username, users.email AS users_email, users.name AS users_name, users.password_hash AS users_password_hash, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.last_login AS users_last_login 
FROM users 
WHERE users.id = ?
2025-05-09 15:35:47,666 - sqlalchemy.engine.Engine - INFO - [cached since 0.6387s ago] (1,)
2025-05-09 15:35:47,681 - app.utils.jwt_callbacks - INFO - User found: admin
2025-05-09 15:35:47,689 - sqlalchemy.engine.Engine - INFO - SELECT roles.id AS roles_id, roles.name AS roles_name, roles.description AS roles_description, roles.created_at AS roles_created_at 
FROM roles, user_roles 
WHERE ? = user_roles.user_id AND roles.id = user_roles.role_id
2025-05-09 15:35:47,732 - sqlalchemy.engine.Engine - INFO - [cached since 0.692s ago] (1,)
2025-05-09 15:35:47,757 - app.utils.jwt_callbacks - INFO - User roles: ['admin']
2025-05-09 15:35:47,762 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions, role_permissions 
WHERE ? = role_permissions.role_id AND permissions.id = role_permissions.permission_id
2025-05-09 15:35:47,769 - sqlalchemy.engine.Engine - INFO - [cached since 17.49s ago] (1,)
2025-05-09 15:35:47,776 - app.utils.jwt_callbacks - INFO - User permissions: ['manage_users', 'manage_roles', 'manage_all_projects', 'manage_project', 'manage_all_tasks', 'manage_task', 'view_project', 'view_task', 'manage_resources', 'manage_risks', 'view_reports', 'create_task', 'assign_task', 'change_project_status', 'change_task_status', 'create_project']
2025-05-09 15:35:47,781 - app.utils.jwt_callbacks - INFO - Checking if token 051ad551-75b6-4246-8deb-a3228d35e4e4 is in blocklist
2025-05-09 15:35:47,790 - sqlalchemy.engine.Engine - INFO - SELECT token_blacklist.id AS token_blacklist_id, token_blacklist.jti AS token_blacklist_jti, token_blacklist.token_type AS token_blacklist_token_type, token_blacklist.user_id AS token_blacklist_user_id, token_blacklist.revoked_at AS token_blacklist_revoked_at, token_blacklist.expires_at AS token_blacklist_expires_at 
FROM token_blacklist 
WHERE token_blacklist.jti = ?
 LIMIT ? OFFSET ?
2025-05-09 15:35:47,797 - sqlalchemy.engine.Engine - INFO - [cached since 0.7936s ago] ('051ad551-75b6-4246-8deb-a3228d35e4e4', 1, 0)
2025-05-09 15:35:47,803 - app.utils.jwt_callbacks - INFO - Token 051ad551-75b6-4246-8deb-a3228d35e4e4 is valid
2025-05-09 15:35:47,810 - app.utils.jwt_callbacks - INFO - Verifying token
2025-05-09 15:35:47,815 - app.utils.jwt_callbacks - INFO - JWT Header: {'alg': 'HS256', 'typ': 'JWT'}
2025-05-09 15:35:47,821 - app.utils.jwt_callbacks - INFO - JWT Data: {'fresh': False, 'iat': 1746775578, 'jti': '051ad551-75b6-4246-8deb-a3228d35e4e4', 'type': 'access', 'sub': 1, 'nbf': 1746775578, 'csrf': 'IjY2NjEzOWExZTRmODhkZmYzMDRlMjQ2OTcyOTI1ODM4YjQzMWVlZDki.aB2uGg.jgVFJQK5Nco9wCP7hwxW73ebrE0', 'exp': 1746779178, 'aud': 'task_management_system', 'user_claims': {'username': 'admin', 'roles': ['admin'], 'permissions': ['manage_users', 'manage_roles', 'manage_all_projects', 'manage_project', 'manage_all_tasks', 'manage_task', 'view_project', 'view_task', 'manage_resources', 'manage_risks', 'view_reports', 'create_task', 'assign_task', 'change_project_status', 'change_task_status', 'create_project'], 'is_active': True}, 'roles': ['admin']}
2025-05-09 15:35:47,829 - app.utils.jwt_callbacks - INFO - Token time difference: -569.829009 seconds
2025-05-09 15:35:47,836 - app.utils.jwt_callbacks - INFO - Token verification successful
2025-05-09 15:35:47,843 - app.utils.jwt_callbacks - INFO - Looking up user with identity: 1
2025-05-09 15:35:47,851 - app.utils.jwt_callbacks - INFO - User found: admin
2025-05-09 15:35:47,858 - app.utils.jwt_callbacks - INFO - User roles: ['admin']
2025-05-09 15:35:47,864 - app.utils.jwt_callbacks - INFO - User permissions: ['manage_users', 'manage_roles', 'manage_all_projects', 'manage_project', 'manage_all_tasks', 'manage_task', 'view_project', 'view_task', 'manage_resources', 'manage_risks', 'view_reports', 'create_task', 'assign_task', 'change_project_status', 'change_task_status', 'create_project']
2025-05-09 15:35:47,870 - app - INFO - Dashboard access with user ID: 1
2025-05-09 15:35:47,876 - app - INFO - Token found in: cookies
2025-05-09 15:35:47,881 - app - INFO - Dashboard context user_data: {'id': 1, 'username': 'admin', 'email': 'admin@example.com', 'name': '管理员', 'is_active': True, 'created_at': '2025-05-07T01:07:21.773527', 'last_login': '2025-05-09T07:26:18.783070', 'roles': ['admin'], 'permissions': ['assign_task', 'manage_roles', 'manage_users', 'view_project', 'manage_risks', 'view_task', 'change_project_status', 'manage_project', 'manage_all_tasks', 'create_project', 'change_task_status', 'manage_all_projects', 'manage_resources', 'view_reports', 'manage_task', 'create_task']}
2025-05-09 15:35:47,886 - app - INFO - 用户 admin 的角色: ['admin']
2025-05-09 15:35:47,891 - app - INFO - 用户 admin 的权限: ['assign_task', 'manage_roles', 'manage_users', 'view_project', 'manage_risks', 'view_task', 'change_project_status', 'manage_project', 'manage_all_tasks', 'create_project', 'change_task_status', 'manage_all_projects', 'manage_resources', 'view_reports', 'manage_task', 'create_task']
2025-05-09 15:35:47,895 - app - INFO - 用户 admin - 是否管理员: True, 是否项目经理: False
2025-05-09 15:35:47,921 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-05-09 15:35:47,925 - werkzeug - INFO - 127.0.0.1 - - [09/May/2025 15:35:47] "GET /main/dashboard HTTP/1.1" 200 -
2025-05-09 15:35:48,428 - werkzeug - INFO - 127.0.0.1 - - [09/May/2025 15:35:48] "[33mGET /static/uploads/background.png HTTP/1.1[0m" 404 -
2025-05-09 15:35:51,406 - app - INFO - 登录请求 - 方法: POST, 内容类型: application/x-www-form-urlencoded
2025-05-09 15:35:51,411 - app - INFO - 请求头: {'Host': '127.0.0.1:5000', 'Connection': 'keep-alive', 'Content-Length': '135', 'Cache-Control': 'max-age=0', 'Sec-Ch-Ua': '"Chromium";v="136", "Microsoft Edge";v="136", "Not.A/Brand";v="99"', 'Sec-Ch-Ua-Mobile': '?0', 'Sec-Ch-Ua-Platform': '"Windows"', 'Origin': 'http://127.0.0.1:5000', 'Content-Type': 'application/x-www-form-urlencoded', 'Upgrade-Insecure-Requests': '1', 'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36 Edg/136.0.0.0', 'Accept': 'text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.7', 'Sec-Fetch-Site': 'same-origin', 'Sec-Fetch-Mode': 'navigate', 'Sec-Fetch-User': '?1', 'Sec-Fetch-Dest': 'document', 'Referer': 'http://127.0.0.1:5000/login', 'Accept-Encoding': 'gzip, deflate, br, zstd', 'Accept-Language': 'zh-CN,zh;q=0.9,en;q=0.8,en-GB;q=0.7,en-US;q=0.6', 'Cookie': 'user_roles=admin; access_token_cookie=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJmcmVzaCI6ZmFsc2UsImlhdCI6MTc0Njc3NTU3OCwianRpIjoiMDUxYWQ1NTEtNzViNi00MjQ2LThkZWItYTMyMjhkMzVlNGU0IiwidHlwZSI6ImFjY2VzcyIsInN1YiI6MSwibmJmIjoxNzQ2Nzc1NTc4LCJjc3JmIjoiSWpZMk5qRXpPV0V4WlRSbU9EaGtabVl6TURSbE1qUTJPVGN5T1RJMU9ETTRZalF6TVdWbFpEa2kuYUIydUdnLmpnVkZKUUs1TmNvOXdDUDdod3hXNzNlYnJFMCIsImV4cCI6MTc0Njc3OTE3OCwiYXVkIjoidGFza19tYW5hZ2VtZW50X3N5c3RlbSIsInVzZXJfY2xhaW1zIjp7InVzZXJuYW1lIjoiYWRtaW4iLCJyb2xlcyI6WyJhZG1pbiJdLCJwZXJtaXNzaW9ucyI6WyJtYW5hZ2VfdXNlcnMiLCJtYW5hZ2Vfcm9sZXMiLCJtYW5hZ2VfYWxsX3Byb2plY3RzIiwibWFuYWdlX3Byb2plY3QiLCJtYW5hZ2VfYWxsX3Rhc2tzIiwibWFuYWdlX3Rhc2siLCJ2aWV3X3Byb2plY3QiLCJ2aWV3X3Rhc2siLCJtYW5hZ2VfcmVzb3VyY2VzIiwibWFuYWdlX3Jpc2tzIiwidmlld19yZXBvcnRzIiwiY3JlYXRlX3Rhc2siLCJhc3NpZ25fdGFzayIsImNoYW5nZV9wcm9qZWN0X3N0YXR1cyIsImNoYW5nZV90YXNrX3N0YXR1cyIsImNyZWF0ZV9wcm9qZWN0Il0sImlzX2FjdGl2ZSI6dHJ1ZX0sInJvbGVzIjpbImFkbWluIl19.Ca9qGjsNyD3y0C5ufGUJGD3mpsdClzQklUgE2_VxZxs; csrf_access_token=IjY2NjEzOWExZTRmODhkZmYzMDRlMjQ2OTcyOTI1ODM4YjQzMWVlZDki.aB2uGg.jgVFJQK5Nco9wCP7hwxW73ebrE0; csrf_token=IjY2NjEzOWExZTRmODhkZmYzMDRlMjQ2OTcyOTI1ODM4YjQzMWVlZDki.aB2uGg.jgVFJQK5Nco9wCP7hwxW73ebrE0; session=eyJjc3JmX3Rva2VuIjoiNjY2MTM5YTFlNGY4OGRmZjMwNGUyNDY5NzI5MjU4MzhiNDMxZWVkOSJ9.aB2wVA.rne9usyA_jMEILTmrmAaZln_SBw'}
2025-05-09 15:35:51,418 - app - INFO - 处理表单格式的登录请求
2025-05-09 15:35:51,423 - app - INFO - 表单数据: username=admin, password=********
2025-05-09 15:35:51,428 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-05-09 15:35:51,433 - sqlalchemy.engine.Engine - INFO - SELECT users.id AS users_id, users.username AS users_username, users.email AS users_email, users.name AS users_name, users.password_hash AS users_password_hash, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.last_login AS users_last_login 
FROM users 
WHERE users.username = ?
 LIMIT ? OFFSET ?
2025-05-09 15:35:51,438 - sqlalchemy.engine.Engine - INFO - [cached since 21.1s ago] ('admin', 1, 0)
2025-05-09 15:35:52,106 - app - INFO - 已生成CSRF令牌: IjY2NjEzOW...
2025-05-09 15:35:52,114 - sqlalchemy.engine.Engine - INFO - SELECT roles.id AS roles_id, roles.name AS roles_name, roles.description AS roles_description, roles.created_at AS roles_created_at 
FROM roles, user_roles 
WHERE ? = user_roles.user_id AND roles.id = user_roles.role_id
2025-05-09 15:35:52,120 - sqlalchemy.engine.Engine - INFO - [cached since 5.08s ago] (1,)
2025-05-09 15:35:52,127 - app - INFO - 用户 admin 的角色: ['admin']
2025-05-09 15:35:52,133 - app.utils.jwt_callbacks - INFO - Adding additional claims for user 1
2025-05-09 15:35:52,141 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions, role_permissions 
WHERE ? = role_permissions.role_id AND permissions.id = role_permissions.permission_id
2025-05-09 15:35:52,148 - sqlalchemy.engine.Engine - INFO - [cached since 21.87s ago] (1,)
2025-05-09 15:35:52,156 - app.utils.jwt_callbacks - INFO - Added claims for user 1: {'aud': 'task_management_system', 'user_claims': {'username': 'admin', 'roles': ['admin'], 'permissions': ['manage_users', 'manage_roles', 'manage_all_projects', 'manage_project', 'manage_all_tasks', 'manage_task', 'view_project', 'view_task', 'manage_resources', 'manage_risks', 'view_reports', 'create_task', 'assign_task', 'change_project_status', 'change_task_status', 'create_project'], 'is_active': True}}
2025-05-09 15:35:52,160 - app.utils.jwt_callbacks - INFO - Adding additional claims for user 1
2025-05-09 15:35:52,166 - app.utils.jwt_callbacks - INFO - Added claims for user 1: {'aud': 'task_management_system', 'user_claims': {'username': 'admin', 'roles': ['admin'], 'permissions': ['manage_users', 'manage_roles', 'manage_all_projects', 'manage_project', 'manage_all_tasks', 'manage_task', 'view_project', 'view_task', 'manage_resources', 'manage_risks', 'view_reports', 'create_task', 'assign_task', 'change_project_status', 'change_task_status', 'create_project'], 'is_active': True}}
2025-05-09 15:35:52,176 - sqlalchemy.engine.Engine - INFO - UPDATE users SET updated_at=?, last_login=? WHERE users.id = ?
2025-05-09 15:35:52,182 - sqlalchemy.engine.Engine - INFO - [generated in 0.00595s] ('2025-05-09 07:35:52.176979', '2025-05-09 07:35:52.171599', 1)
2025-05-09 15:35:52,191 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-05-09 15:35:52,203 - app - INFO - 用户登录成功: admin
2025-05-09 15:35:52,210 - werkzeug - INFO - 127.0.0.1 - - [09/May/2025 15:35:52] "[32mPOST /login HTTP/1.1[0m" 302 -
2025-05-09 15:35:52,225 - app.utils.jwt_callbacks - INFO - Checking if token 17da690c-4e80-4387-82e2-af4f917aff52 is in blocklist
2025-05-09 15:35:52,228 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-05-09 15:35:52,231 - sqlalchemy.engine.Engine - INFO - SELECT token_blacklist.id AS token_blacklist_id, token_blacklist.jti AS token_blacklist_jti, token_blacklist.token_type AS token_blacklist_token_type, token_blacklist.user_id AS token_blacklist_user_id, token_blacklist.revoked_at AS token_blacklist_revoked_at, token_blacklist.expires_at AS token_blacklist_expires_at 
FROM token_blacklist 
WHERE token_blacklist.jti = ?
 LIMIT ? OFFSET ?
2025-05-09 15:35:52,234 - sqlalchemy.engine.Engine - INFO - [cached since 5.23s ago] ('17da690c-4e80-4387-82e2-af4f917aff52', 1, 0)
2025-05-09 15:35:52,236 - app.utils.jwt_callbacks - INFO - Token 17da690c-4e80-4387-82e2-af4f917aff52 is valid
2025-05-09 15:35:52,238 - app.utils.jwt_callbacks - INFO - Verifying token
2025-05-09 15:35:52,240 - app.utils.jwt_callbacks - INFO - JWT Header: {'alg': 'HS256', 'typ': 'JWT'}
2025-05-09 15:35:52,242 - app.utils.jwt_callbacks - INFO - JWT Data: {'fresh': False, 'iat': 1746776152, 'jti': '17da690c-4e80-4387-82e2-af4f917aff52', 'type': 'access', 'sub': 1, 'nbf': 1746776152, 'csrf': 'IjY2NjEzOWExZTRmODhkZmYzMDRlMjQ2OTcyOTI1ODM4YjQzMWVlZDki.aB2wWA.UCAmnHZxE9G1Am09ZPv3Bcdf2EQ', 'exp': 1746779752, 'aud': 'task_management_system', 'user_claims': {'username': 'admin', 'roles': ['admin'], 'permissions': ['manage_users', 'manage_roles', 'manage_all_projects', 'manage_project', 'manage_all_tasks', 'manage_task', 'view_project', 'view_task', 'manage_resources', 'manage_risks', 'view_reports', 'create_task', 'assign_task', 'change_project_status', 'change_task_status', 'create_project'], 'is_active': True}, 'roles': ['admin']}
2025-05-09 15:35:52,244 - app.utils.jwt_callbacks - INFO - Token time difference: -0.244723 seconds
2025-05-09 15:35:52,246 - app.utils.jwt_callbacks - INFO - Token verification successful
2025-05-09 15:35:52,248 - app.utils.jwt_callbacks - INFO - Looking up user with identity: 1
2025-05-09 15:35:52,252 - sqlalchemy.engine.Engine - INFO - SELECT users.id AS users_id, users.username AS users_username, users.email AS users_email, users.name AS users_name, users.password_hash AS users_password_hash, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.last_login AS users_last_login 
FROM users 
WHERE users.id = ?
2025-05-09 15:35:52,257 - sqlalchemy.engine.Engine - INFO - [cached since 5.229s ago] (1,)
2025-05-09 15:35:52,260 - app.utils.jwt_callbacks - INFO - User found: admin
2025-05-09 15:35:52,263 - sqlalchemy.engine.Engine - INFO - SELECT roles.id AS roles_id, roles.name AS roles_name, roles.description AS roles_description, roles.created_at AS roles_created_at 
FROM roles, user_roles 
WHERE ? = user_roles.user_id AND roles.id = user_roles.role_id
2025-05-09 15:35:52,267 - sqlalchemy.engine.Engine - INFO - [cached since 5.226s ago] (1,)
2025-05-09 15:35:52,270 - app.utils.jwt_callbacks - INFO - User roles: ['admin']
2025-05-09 15:35:52,272 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions, role_permissions 
WHERE ? = role_permissions.role_id AND permissions.id = role_permissions.permission_id
2025-05-09 15:35:52,276 - sqlalchemy.engine.Engine - INFO - [cached since 21.99s ago] (1,)
2025-05-09 15:35:52,281 - app.utils.jwt_callbacks - INFO - User permissions: ['manage_users', 'manage_roles', 'manage_all_projects', 'manage_project', 'manage_all_tasks', 'manage_task', 'view_project', 'view_task', 'manage_resources', 'manage_risks', 'view_reports', 'create_task', 'assign_task', 'change_project_status', 'change_task_status', 'create_project']
2025-05-09 15:35:52,284 - app.utils.jwt_callbacks - INFO - Checking if token 17da690c-4e80-4387-82e2-af4f917aff52 is in blocklist
2025-05-09 15:35:52,286 - sqlalchemy.engine.Engine - INFO - SELECT token_blacklist.id AS token_blacklist_id, token_blacklist.jti AS token_blacklist_jti, token_blacklist.token_type AS token_blacklist_token_type, token_blacklist.user_id AS token_blacklist_user_id, token_blacklist.revoked_at AS token_blacklist_revoked_at, token_blacklist.expires_at AS token_blacklist_expires_at 
FROM token_blacklist 
WHERE token_blacklist.jti = ?
 LIMIT ? OFFSET ?
2025-05-09 15:35:52,288 - sqlalchemy.engine.Engine - INFO - [cached since 5.286s ago] ('17da690c-4e80-4387-82e2-af4f917aff52', 1, 0)
2025-05-09 15:35:52,292 - app.utils.jwt_callbacks - INFO - Token 17da690c-4e80-4387-82e2-af4f917aff52 is valid
2025-05-09 15:35:52,294 - app.utils.jwt_callbacks - INFO - Verifying token
2025-05-09 15:35:52,297 - app.utils.jwt_callbacks - INFO - JWT Header: {'alg': 'HS256', 'typ': 'JWT'}
2025-05-09 15:35:52,302 - app.utils.jwt_callbacks - INFO - JWT Data: {'fresh': False, 'iat': 1746776152, 'jti': '17da690c-4e80-4387-82e2-af4f917aff52', 'type': 'access', 'sub': 1, 'nbf': 1746776152, 'csrf': 'IjY2NjEzOWExZTRmODhkZmYzMDRlMjQ2OTcyOTI1ODM4YjQzMWVlZDki.aB2wWA.UCAmnHZxE9G1Am09ZPv3Bcdf2EQ', 'exp': 1746779752, 'aud': 'task_management_system', 'user_claims': {'username': 'admin', 'roles': ['admin'], 'permissions': ['manage_users', 'manage_roles', 'manage_all_projects', 'manage_project', 'manage_all_tasks', 'manage_task', 'view_project', 'view_task', 'manage_resources', 'manage_risks', 'view_reports', 'create_task', 'assign_task', 'change_project_status', 'change_task_status', 'create_project'], 'is_active': True}, 'roles': ['admin']}
2025-05-09 15:35:52,308 - app.utils.jwt_callbacks - INFO - Token time difference: -0.308189 seconds
2025-05-09 15:35:52,313 - app.utils.jwt_callbacks - INFO - Token verification successful
2025-05-09 15:35:52,317 - app.utils.jwt_callbacks - INFO - Looking up user with identity: 1
2025-05-09 15:35:52,323 - app.utils.jwt_callbacks - INFO - User found: admin
2025-05-09 15:35:52,328 - app.utils.jwt_callbacks - INFO - User roles: ['admin']
2025-05-09 15:35:52,333 - app.utils.jwt_callbacks - INFO - User permissions: ['manage_users', 'manage_roles', 'manage_all_projects', 'manage_project', 'manage_all_tasks', 'manage_task', 'view_project', 'view_task', 'manage_resources', 'manage_risks', 'view_reports', 'create_task', 'assign_task', 'change_project_status', 'change_task_status', 'create_project']
2025-05-09 15:35:52,338 - app - INFO - Dashboard access with user ID: 1
2025-05-09 15:35:52,343 - app - INFO - Token found in: cookies
2025-05-09 15:35:52,347 - app - INFO - Dashboard context user_data: {'id': 1, 'username': 'admin', 'email': 'admin@example.com', 'name': '管理员', 'is_active': True, 'created_at': '2025-05-07T01:07:21.773527', 'last_login': '2025-05-09T07:35:52.171599', 'roles': ['admin'], 'permissions': ['assign_task', 'manage_roles', 'manage_users', 'view_project', 'manage_risks', 'view_task', 'change_project_status', 'manage_project', 'manage_all_tasks', 'create_project', 'change_task_status', 'manage_all_projects', 'manage_resources', 'view_reports', 'manage_task', 'create_task']}
2025-05-09 15:35:52,353 - app - INFO - 用户 admin 的角色: ['admin']
2025-05-09 15:35:52,357 - app - INFO - 用户 admin 的权限: ['assign_task', 'manage_roles', 'manage_users', 'view_project', 'manage_risks', 'view_task', 'change_project_status', 'manage_project', 'manage_all_tasks', 'create_project', 'change_task_status', 'manage_all_projects', 'manage_resources', 'view_reports', 'manage_task', 'create_task']
2025-05-09 15:35:52,362 - app - INFO - 用户 admin - 是否管理员: True, 是否项目经理: False
2025-05-09 15:35:52,368 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-05-09 15:35:52,375 - werkzeug - INFO - 127.0.0.1 - - [09/May/2025 15:35:52] "GET /main/dashboard HTTP/1.1" 200 -
2025-05-09 15:35:52,409 - app.utils.jwt_callbacks - INFO - Checking if token 17da690c-4e80-4387-82e2-af4f917aff52 is in blocklist
2025-05-09 15:35:52,425 - werkzeug - INFO - 127.0.0.1 - - [09/May/2025 15:35:52] "[36mGET /static/css/bootstrap.min.css HTTP/1.1[0m" 304 -
2025-05-09 15:35:52,426 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-05-09 15:35:52,429 - werkzeug - INFO - 127.0.0.1 - - [09/May/2025 15:35:52] "[36mGET /static/css/bootstrap-icons.css HTTP/1.1[0m" 304 -
2025-05-09 15:35:52,431 - werkzeug - INFO - 127.0.0.1 - - [09/May/2025 15:35:52] "[36mGET /static/css/style.css HTTP/1.1[0m" 304 -
2025-05-09 15:35:52,436 - werkzeug - INFO - 127.0.0.1 - - [09/May/2025 15:35:52] "[36mGET /static/js/jquery.min.js HTTP/1.1[0m" 304 -
2025-05-09 15:35:52,439 - werkzeug - INFO - 127.0.0.1 - - [09/May/2025 15:35:52] "[36mGET /static/js/bootstrap.bundle.min.js HTTP/1.1[0m" 304 -
2025-05-09 15:35:52,448 - werkzeug - INFO - 127.0.0.1 - - [09/May/2025 15:35:52] "[36mGET /static/js/auth.js HTTP/1.1[0m" 304 -
2025-05-09 15:35:52,451 - sqlalchemy.engine.Engine - INFO - SELECT token_blacklist.id AS token_blacklist_id, token_blacklist.jti AS token_blacklist_jti, token_blacklist.token_type AS token_blacklist_token_type, token_blacklist.user_id AS token_blacklist_user_id, token_blacklist.revoked_at AS token_blacklist_revoked_at, token_blacklist.expires_at AS token_blacklist_expires_at 
FROM token_blacklist 
WHERE token_blacklist.jti = ?
 LIMIT ? OFFSET ?
2025-05-09 15:35:52,461 - werkzeug - INFO - 127.0.0.1 - - [09/May/2025 15:35:52] "[36mGET /static/js/fix-modals.js HTTP/1.1[0m" 304 -
2025-05-09 15:35:52,469 - werkzeug - INFO - 127.0.0.1 - - [09/May/2025 15:35:52] "[36mGET /static/js/csrf.js HTTP/1.1[0m" 304 -
2025-05-09 15:35:52,488 - sqlalchemy.engine.Engine - INFO - [cached since 5.484s ago] ('17da690c-4e80-4387-82e2-af4f917aff52', 1, 0)
2025-05-09 15:35:52,493 - werkzeug - INFO - 127.0.0.1 - - [09/May/2025 15:35:52] "[36mGET /static/css/fonts/bootstrap-icons.woff2 HTTP/1.1[0m" 304 -
2025-05-09 15:35:52,499 - werkzeug - INFO - 127.0.0.1 - - [09/May/2025 15:35:52] "[36mGET /static/css/bootstrap.min.css.map HTTP/1.1[0m" 304 -
2025-05-09 15:35:52,508 - app.utils.jwt_callbacks - INFO - Token 17da690c-4e80-4387-82e2-af4f917aff52 is valid
2025-05-09 15:35:52,519 - app.utils.jwt_callbacks - INFO - Verifying token
2025-05-09 15:35:52,525 - app.utils.jwt_callbacks - INFO - JWT Header: {'alg': 'HS256', 'typ': 'JWT'}
2025-05-09 15:35:52,531 - werkzeug - INFO - 127.0.0.1 - - [09/May/2025 15:35:52] "[36mGET /static/favicon.ico HTTP/1.1[0m" 304 -
2025-05-09 15:35:52,533 - app.utils.jwt_callbacks - INFO - JWT Data: {'fresh': False, 'iat': 1746776152, 'jti': '17da690c-4e80-4387-82e2-af4f917aff52', 'type': 'access', 'sub': 1, 'nbf': 1746776152, 'csrf': 'IjY2NjEzOWExZTRmODhkZmYzMDRlMjQ2OTcyOTI1ODM4YjQzMWVlZDki.aB2wWA.UCAmnHZxE9G1Am09ZPv3Bcdf2EQ', 'exp': 1746779752, 'aud': 'task_management_system', 'user_claims': {'username': 'admin', 'roles': ['admin'], 'permissions': ['manage_users', 'manage_roles', 'manage_all_projects', 'manage_project', 'manage_all_tasks', 'manage_task', 'view_project', 'view_task', 'manage_resources', 'manage_risks', 'view_reports', 'create_task', 'assign_task', 'change_project_status', 'change_task_status', 'create_project'], 'is_active': True}, 'roles': ['admin']}
2025-05-09 15:35:52,542 - app.utils.jwt_callbacks - INFO - Token time difference: -0.542076 seconds
2025-05-09 15:35:52,547 - app.utils.jwt_callbacks - INFO - Token verification successful
2025-05-09 15:35:52,554 - app.utils.jwt_callbacks - INFO - Looking up user with identity: 1
2025-05-09 15:35:52,559 - sqlalchemy.engine.Engine - INFO - SELECT users.id AS users_id, users.username AS users_username, users.email AS users_email, users.name AS users_name, users.password_hash AS users_password_hash, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.last_login AS users_last_login 
FROM users 
WHERE users.id = ?
2025-05-09 15:35:52,566 - sqlalchemy.engine.Engine - INFO - [cached since 5.538s ago] (1,)
2025-05-09 15:35:52,572 - app.utils.jwt_callbacks - INFO - User found: admin
2025-05-09 15:35:52,578 - sqlalchemy.engine.Engine - INFO - SELECT roles.id AS roles_id, roles.name AS roles_name, roles.description AS roles_description, roles.created_at AS roles_created_at 
FROM roles, user_roles 
WHERE ? = user_roles.user_id AND roles.id = user_roles.role_id
2025-05-09 15:35:52,585 - sqlalchemy.engine.Engine - INFO - [cached since 5.545s ago] (1,)
2025-05-09 15:35:52,592 - app.utils.jwt_callbacks - INFO - User roles: ['admin']
2025-05-09 15:35:52,599 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions, role_permissions 
WHERE ? = role_permissions.role_id AND permissions.id = role_permissions.permission_id
2025-05-09 15:35:52,605 - sqlalchemy.engine.Engine - INFO - [cached since 22.32s ago] (1,)
2025-05-09 15:35:52,614 - app.utils.jwt_callbacks - INFO - User permissions: ['manage_users', 'manage_roles', 'manage_all_projects', 'manage_project', 'manage_all_tasks', 'manage_task', 'view_project', 'view_task', 'manage_resources', 'manage_risks', 'view_reports', 'create_task', 'assign_task', 'change_project_status', 'change_task_status', 'create_project']
2025-05-09 15:35:52,619 - app.utils.jwt_callbacks - INFO - Checking if token 17da690c-4e80-4387-82e2-af4f917aff52 is in blocklist
2025-05-09 15:35:52,625 - sqlalchemy.engine.Engine - INFO - SELECT token_blacklist.id AS token_blacklist_id, token_blacklist.jti AS token_blacklist_jti, token_blacklist.token_type AS token_blacklist_token_type, token_blacklist.user_id AS token_blacklist_user_id, token_blacklist.revoked_at AS token_blacklist_revoked_at, token_blacklist.expires_at AS token_blacklist_expires_at 
FROM token_blacklist 
WHERE token_blacklist.jti = ?
 LIMIT ? OFFSET ?
2025-05-09 15:35:52,631 - sqlalchemy.engine.Engine - INFO - [cached since 5.628s ago] ('17da690c-4e80-4387-82e2-af4f917aff52', 1, 0)
2025-05-09 15:35:52,637 - app.utils.jwt_callbacks - INFO - Token 17da690c-4e80-4387-82e2-af4f917aff52 is valid
2025-05-09 15:35:52,642 - app.utils.jwt_callbacks - INFO - Verifying token
2025-05-09 15:35:52,648 - app.utils.jwt_callbacks - INFO - JWT Header: {'alg': 'HS256', 'typ': 'JWT'}
2025-05-09 15:35:52,652 - app.utils.jwt_callbacks - INFO - JWT Data: {'fresh': False, 'iat': 1746776152, 'jti': '17da690c-4e80-4387-82e2-af4f917aff52', 'type': 'access', 'sub': 1, 'nbf': 1746776152, 'csrf': 'IjY2NjEzOWExZTRmODhkZmYzMDRlMjQ2OTcyOTI1ODM4YjQzMWVlZDki.aB2wWA.UCAmnHZxE9G1Am09ZPv3Bcdf2EQ', 'exp': 1746779752, 'aud': 'task_management_system', 'user_claims': {'username': 'admin', 'roles': ['admin'], 'permissions': ['manage_users', 'manage_roles', 'manage_all_projects', 'manage_project', 'manage_all_tasks', 'manage_task', 'view_project', 'view_task', 'manage_resources', 'manage_risks', 'view_reports', 'create_task', 'assign_task', 'change_project_status', 'change_task_status', 'create_project'], 'is_active': True}, 'roles': ['admin']}
2025-05-09 15:35:52,658 - app.utils.jwt_callbacks - INFO - Token time difference: -0.658055 seconds
2025-05-09 15:35:52,663 - app.utils.jwt_callbacks - INFO - Token verification successful
2025-05-09 15:35:52,668 - app.utils.jwt_callbacks - INFO - Looking up user with identity: 1
2025-05-09 15:35:52,674 - app.utils.jwt_callbacks - INFO - User found: admin
2025-05-09 15:35:52,679 - app.utils.jwt_callbacks - INFO - User roles: ['admin']
2025-05-09 15:35:52,684 - app.utils.jwt_callbacks - INFO - User permissions: ['manage_users', 'manage_roles', 'manage_all_projects', 'manage_project', 'manage_all_tasks', 'manage_task', 'view_project', 'view_task', 'manage_resources', 'manage_risks', 'view_reports', 'create_task', 'assign_task', 'change_project_status', 'change_task_status', 'create_project']
2025-05-09 15:35:52,688 - app - INFO - 用户已认证，重定向到仪表板页面: /.well-known/appspecific/com.chrome.devtools.json
2025-05-09 15:35:52,694 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-05-09 15:35:52,698 - werkzeug - INFO - 127.0.0.1 - - [09/May/2025 15:35:52] "[32mGET /.well-known/appspecific/com.chrome.devtools.json HTTP/1.1[0m" 302 -
2025-05-09 15:35:52,707 - app.utils.jwt_callbacks - INFO - Checking if token 17da690c-4e80-4387-82e2-af4f917aff52 is in blocklist
2025-05-09 15:35:52,713 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-05-09 15:35:52,719 - sqlalchemy.engine.Engine - INFO - SELECT token_blacklist.id AS token_blacklist_id, token_blacklist.jti AS token_blacklist_jti, token_blacklist.token_type AS token_blacklist_token_type, token_blacklist.user_id AS token_blacklist_user_id, token_blacklist.revoked_at AS token_blacklist_revoked_at, token_blacklist.expires_at AS token_blacklist_expires_at 
FROM token_blacklist 
WHERE token_blacklist.jti = ?
 LIMIT ? OFFSET ?
2025-05-09 15:35:52,726 - sqlalchemy.engine.Engine - INFO - [cached since 5.722s ago] ('17da690c-4e80-4387-82e2-af4f917aff52', 1, 0)
2025-05-09 15:35:52,731 - app.utils.jwt_callbacks - INFO - Token 17da690c-4e80-4387-82e2-af4f917aff52 is valid
2025-05-09 15:35:52,736 - app.utils.jwt_callbacks - INFO - Verifying token
2025-05-09 15:35:52,742 - app.utils.jwt_callbacks - INFO - JWT Header: {'alg': 'HS256', 'typ': 'JWT'}
2025-05-09 15:35:52,748 - app.utils.jwt_callbacks - INFO - JWT Data: {'fresh': False, 'iat': 1746776152, 'jti': '17da690c-4e80-4387-82e2-af4f917aff52', 'type': 'access', 'sub': 1, 'nbf': 1746776152, 'csrf': 'IjY2NjEzOWExZTRmODhkZmYzMDRlMjQ2OTcyOTI1ODM4YjQzMWVlZDki.aB2wWA.UCAmnHZxE9G1Am09ZPv3Bcdf2EQ', 'exp': 1746779752, 'aud': 'task_management_system', 'user_claims': {'username': 'admin', 'roles': ['admin'], 'permissions': ['manage_users', 'manage_roles', 'manage_all_projects', 'manage_project', 'manage_all_tasks', 'manage_task', 'view_project', 'view_task', 'manage_resources', 'manage_risks', 'view_reports', 'create_task', 'assign_task', 'change_project_status', 'change_task_status', 'create_project'], 'is_active': True}, 'roles': ['admin']}
2025-05-09 15:35:52,753 - app.utils.jwt_callbacks - INFO - Token time difference: -0.752253 seconds
2025-05-09 15:35:52,758 - app.utils.jwt_callbacks - INFO - Token verification successful
2025-05-09 15:35:52,764 - app.utils.jwt_callbacks - INFO - Looking up user with identity: 1
2025-05-09 15:35:52,770 - sqlalchemy.engine.Engine - INFO - SELECT users.id AS users_id, users.username AS users_username, users.email AS users_email, users.name AS users_name, users.password_hash AS users_password_hash, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.last_login AS users_last_login 
FROM users 
WHERE users.id = ?
2025-05-09 15:35:52,776 - sqlalchemy.engine.Engine - INFO - [cached since 5.748s ago] (1,)
2025-05-09 15:35:52,784 - app.utils.jwt_callbacks - INFO - User found: admin
2025-05-09 15:35:52,791 - sqlalchemy.engine.Engine - INFO - SELECT roles.id AS roles_id, roles.name AS roles_name, roles.description AS roles_description, roles.created_at AS roles_created_at 
FROM roles, user_roles 
WHERE ? = user_roles.user_id AND roles.id = user_roles.role_id
2025-05-09 15:35:52,797 - sqlalchemy.engine.Engine - INFO - [cached since 5.757s ago] (1,)
2025-05-09 15:35:52,805 - app.utils.jwt_callbacks - INFO - User roles: ['admin']
2025-05-09 15:35:52,810 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions, role_permissions 
WHERE ? = role_permissions.role_id AND permissions.id = role_permissions.permission_id
2025-05-09 15:35:52,816 - sqlalchemy.engine.Engine - INFO - [cached since 22.53s ago] (1,)
2025-05-09 15:35:52,823 - app.utils.jwt_callbacks - INFO - User permissions: ['manage_users', 'manage_roles', 'manage_all_projects', 'manage_project', 'manage_all_tasks', 'manage_task', 'view_project', 'view_task', 'manage_resources', 'manage_risks', 'view_reports', 'create_task', 'assign_task', 'change_project_status', 'change_task_status', 'create_project']
2025-05-09 15:35:52,830 - app.utils.jwt_callbacks - INFO - Checking if token 17da690c-4e80-4387-82e2-af4f917aff52 is in blocklist
2025-05-09 15:35:52,834 - sqlalchemy.engine.Engine - INFO - SELECT token_blacklist.id AS token_blacklist_id, token_blacklist.jti AS token_blacklist_jti, token_blacklist.token_type AS token_blacklist_token_type, token_blacklist.user_id AS token_blacklist_user_id, token_blacklist.revoked_at AS token_blacklist_revoked_at, token_blacklist.expires_at AS token_blacklist_expires_at 
FROM token_blacklist 
WHERE token_blacklist.jti = ?
 LIMIT ? OFFSET ?
2025-05-09 15:35:52,844 - sqlalchemy.engine.Engine - INFO - [cached since 5.841s ago] ('17da690c-4e80-4387-82e2-af4f917aff52', 1, 0)
2025-05-09 15:35:52,852 - app.utils.jwt_callbacks - INFO - Token 17da690c-4e80-4387-82e2-af4f917aff52 is valid
2025-05-09 15:35:52,856 - app.utils.jwt_callbacks - INFO - Verifying token
2025-05-09 15:35:52,862 - app.utils.jwt_callbacks - INFO - JWT Header: {'alg': 'HS256', 'typ': 'JWT'}
2025-05-09 15:35:52,867 - app.utils.jwt_callbacks - INFO - JWT Data: {'fresh': False, 'iat': 1746776152, 'jti': '17da690c-4e80-4387-82e2-af4f917aff52', 'type': 'access', 'sub': 1, 'nbf': 1746776152, 'csrf': 'IjY2NjEzOWExZTRmODhkZmYzMDRlMjQ2OTcyOTI1ODM4YjQzMWVlZDki.aB2wWA.UCAmnHZxE9G1Am09ZPv3Bcdf2EQ', 'exp': 1746779752, 'aud': 'task_management_system', 'user_claims': {'username': 'admin', 'roles': ['admin'], 'permissions': ['manage_users', 'manage_roles', 'manage_all_projects', 'manage_project', 'manage_all_tasks', 'manage_task', 'view_project', 'view_task', 'manage_resources', 'manage_risks', 'view_reports', 'create_task', 'assign_task', 'change_project_status', 'change_task_status', 'create_project'], 'is_active': True}, 'roles': ['admin']}
2025-05-09 15:35:52,871 - app.utils.jwt_callbacks - INFO - Token time difference: -0.871198 seconds
2025-05-09 15:35:52,877 - app.utils.jwt_callbacks - INFO - Token verification successful
2025-05-09 15:35:52,881 - app.utils.jwt_callbacks - INFO - Looking up user with identity: 1
2025-05-09 15:35:52,885 - app.utils.jwt_callbacks - INFO - User found: admin
2025-05-09 15:35:52,890 - app.utils.jwt_callbacks - INFO - User roles: ['admin']
2025-05-09 15:35:52,895 - app.utils.jwt_callbacks - INFO - User permissions: ['manage_users', 'manage_roles', 'manage_all_projects', 'manage_project', 'manage_all_tasks', 'manage_task', 'view_project', 'view_task', 'manage_resources', 'manage_risks', 'view_reports', 'create_task', 'assign_task', 'change_project_status', 'change_task_status', 'create_project']
2025-05-09 15:35:52,900 - app - INFO - Dashboard access with user ID: 1
2025-05-09 15:35:52,904 - app - INFO - Token found in: cookies
2025-05-09 15:35:52,909 - app - INFO - Dashboard context user_data: {'id': 1, 'username': 'admin', 'email': 'admin@example.com', 'name': '管理员', 'is_active': True, 'created_at': '2025-05-07T01:07:21.773527', 'last_login': '2025-05-09T07:35:52.171599', 'roles': ['admin'], 'permissions': ['assign_task', 'manage_roles', 'manage_users', 'view_project', 'manage_risks', 'view_task', 'change_project_status', 'manage_project', 'manage_all_tasks', 'create_project', 'change_task_status', 'manage_all_projects', 'manage_resources', 'view_reports', 'manage_task', 'create_task']}
2025-05-09 15:35:52,914 - app - INFO - 用户 admin 的角色: ['admin']
2025-05-09 15:35:52,918 - app - INFO - 用户 admin 的权限: ['assign_task', 'manage_roles', 'manage_users', 'view_project', 'manage_risks', 'view_task', 'change_project_status', 'manage_project', 'manage_all_tasks', 'create_project', 'change_task_status', 'manage_all_projects', 'manage_resources', 'view_reports', 'manage_task', 'create_task']
2025-05-09 15:35:52,923 - app - INFO - 用户 admin - 是否管理员: True, 是否项目经理: False
2025-05-09 15:35:52,931 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-05-09 15:35:52,937 - werkzeug - INFO - 127.0.0.1 - - [09/May/2025 15:35:52] "GET /main/dashboard HTTP/1.1" 200 -
2025-05-09 15:35:55,177 - app - WARNING - 绕过JWT验证: /main/projects
2025-05-09 15:35:55,181 - app.utils.jwt_callbacks - INFO - Checking if token 17da690c-4e80-4387-82e2-af4f917aff52 is in blocklist
2025-05-09 15:35:55,184 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-05-09 15:35:55,188 - sqlalchemy.engine.Engine - INFO - SELECT token_blacklist.id AS token_blacklist_id, token_blacklist.jti AS token_blacklist_jti, token_blacklist.token_type AS token_blacklist_token_type, token_blacklist.user_id AS token_blacklist_user_id, token_blacklist.revoked_at AS token_blacklist_revoked_at, token_blacklist.expires_at AS token_blacklist_expires_at 
FROM token_blacklist 
WHERE token_blacklist.jti = ?
 LIMIT ? OFFSET ?
2025-05-09 15:35:55,190 - sqlalchemy.engine.Engine - INFO - [cached since 8.187s ago] ('17da690c-4e80-4387-82e2-af4f917aff52', 1, 0)
2025-05-09 15:35:55,193 - app.utils.jwt_callbacks - INFO - Token 17da690c-4e80-4387-82e2-af4f917aff52 is valid
2025-05-09 15:35:55,196 - app.utils.jwt_callbacks - INFO - Verifying token
2025-05-09 15:35:55,200 - app.utils.jwt_callbacks - INFO - JWT Header: {'alg': 'HS256', 'typ': 'JWT'}
2025-05-09 15:35:55,202 - app.utils.jwt_callbacks - INFO - JWT Data: {'fresh': False, 'iat': 1746776152, 'jti': '17da690c-4e80-4387-82e2-af4f917aff52', 'type': 'access', 'sub': 1, 'nbf': 1746776152, 'csrf': 'IjY2NjEzOWExZTRmODhkZmYzMDRlMjQ2OTcyOTI1ODM4YjQzMWVlZDki.aB2wWA.UCAmnHZxE9G1Am09ZPv3Bcdf2EQ', 'exp': 1746779752, 'aud': 'task_management_system', 'user_claims': {'username': 'admin', 'roles': ['admin'], 'permissions': ['manage_users', 'manage_roles', 'manage_all_projects', 'manage_project', 'manage_all_tasks', 'manage_task', 'view_project', 'view_task', 'manage_resources', 'manage_risks', 'view_reports', 'create_task', 'assign_task', 'change_project_status', 'change_task_status', 'create_project'], 'is_active': True}, 'roles': ['admin']}
2025-05-09 15:35:55,205 - app.utils.jwt_callbacks - INFO - Token time difference: -3.2052 seconds
2025-05-09 15:35:55,207 - app.utils.jwt_callbacks - INFO - Token verification successful
2025-05-09 15:35:55,209 - app.utils.jwt_callbacks - INFO - Looking up user with identity: 1
2025-05-09 15:35:55,212 - sqlalchemy.engine.Engine - INFO - SELECT users.id AS users_id, users.username AS users_username, users.email AS users_email, users.name AS users_name, users.password_hash AS users_password_hash, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.last_login AS users_last_login 
FROM users 
WHERE users.id = ?
2025-05-09 15:35:55,217 - sqlalchemy.engine.Engine - INFO - [cached since 8.188s ago] (1,)
2025-05-09 15:35:55,220 - app.utils.jwt_callbacks - INFO - User found: admin
2025-05-09 15:35:55,222 - sqlalchemy.engine.Engine - INFO - SELECT roles.id AS roles_id, roles.name AS roles_name, roles.description AS roles_description, roles.created_at AS roles_created_at 
FROM roles, user_roles 
WHERE ? = user_roles.user_id AND roles.id = user_roles.role_id
2025-05-09 15:35:55,225 - sqlalchemy.engine.Engine - INFO - [cached since 8.185s ago] (1,)
2025-05-09 15:35:55,230 - app.utils.jwt_callbacks - INFO - User roles: ['admin']
2025-05-09 15:35:55,233 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions, role_permissions 
WHERE ? = role_permissions.role_id AND permissions.id = role_permissions.permission_id
2025-05-09 15:35:55,236 - sqlalchemy.engine.Engine - INFO - [cached since 24.95s ago] (1,)
2025-05-09 15:35:55,242 - app.utils.jwt_callbacks - INFO - User permissions: ['manage_users', 'manage_roles', 'manage_all_projects', 'manage_project', 'manage_all_tasks', 'manage_task', 'view_project', 'view_task', 'manage_resources', 'manage_risks', 'view_reports', 'create_task', 'assign_task', 'change_project_status', 'change_task_status', 'create_project']
2025-05-09 15:35:55,248 - app.routes.main - INFO - JWT bypass enabled for projects - Using test user
2025-05-09 15:35:55,255 - sqlalchemy.engine.Engine - INFO - SELECT projects.id AS projects_id, projects.name AS projects_name, projects.description AS projects_description, projects.status AS projects_status, projects.start_date AS projects_start_date, projects.end_date AS projects_end_date, projects.progress AS projects_progress, projects.created_at AS projects_created_at, projects.updated_at AS projects_updated_at, projects.manager_id AS projects_manager_id, projects.owner_id AS projects_owner_id 
FROM projects
2025-05-09 15:35:55,262 - sqlalchemy.engine.Engine - INFO - [generated in 0.00701s] ()
2025-05-09 15:35:55,269 - sqlalchemy.engine.Engine - INFO - SELECT users.id AS users_id, users.username AS users_username, users.email AS users_email, users.name AS users_name, users.password_hash AS users_password_hash, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.last_login AS users_last_login 
FROM users 
WHERE users.id = ?
2025-05-09 15:35:55,275 - sqlalchemy.engine.Engine - INFO - [cached since 8.247s ago] (3,)
2025-05-09 15:35:55,283 - sqlalchemy.engine.Engine - INFO - SELECT users.id AS users_id, users.username AS users_username, users.email AS users_email, users.name AS users_name, users.password_hash AS users_password_hash, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.last_login AS users_last_login 
FROM users 
WHERE users.id = ?
2025-05-09 15:35:55,289 - sqlalchemy.engine.Engine - INFO - [cached since 8.261s ago] (5,)
2025-05-09 15:35:55,296 - sqlalchemy.engine.Engine - INFO - SELECT users.id AS users_id, users.username AS users_username, users.email AS users_email, users.name AS users_name, users.password_hash AS users_password_hash, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.last_login AS users_last_login 
FROM users 
WHERE users.id = ?
2025-05-09 15:35:55,301 - sqlalchemy.engine.Engine - INFO - [cached since 8.274s ago] (8,)
2025-05-09 15:35:55,308 - sqlalchemy.engine.Engine - INFO - SELECT users.id AS users_id, users.username AS users_username, users.email AS users_email, users.name AS users_name, users.password_hash AS users_password_hash, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.last_login AS users_last_login 
FROM users 
WHERE users.id = ?
2025-05-09 15:35:55,314 - sqlalchemy.engine.Engine - INFO - [cached since 8.286s ago] (5,)
2025-05-09 15:35:55,357 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-05-09 15:35:55,365 - werkzeug - INFO - 127.0.0.1 - - [09/May/2025 15:35:55] "GET /main/projects?bypass_jwt=true HTTP/1.1" 200 -
2025-05-09 15:35:55,395 - app.utils.jwt_callbacks - INFO - Checking if token 17da690c-4e80-4387-82e2-af4f917aff52 is in blocklist
2025-05-09 15:35:55,400 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-05-09 15:35:55,409 - werkzeug - INFO - 127.0.0.1 - - [09/May/2025 15:35:55] "[36mGET /static/css/bootstrap.min.css HTTP/1.1[0m" 304 -
2025-05-09 15:35:55,410 - sqlalchemy.engine.Engine - INFO - SELECT token_blacklist.id AS token_blacklist_id, token_blacklist.jti AS token_blacklist_jti, token_blacklist.token_type AS token_blacklist_token_type, token_blacklist.user_id AS token_blacklist_user_id, token_blacklist.revoked_at AS token_blacklist_revoked_at, token_blacklist.expires_at AS token_blacklist_expires_at 
FROM token_blacklist 
WHERE token_blacklist.jti = ?
 LIMIT ? OFFSET ?
2025-05-09 15:35:55,410 - werkzeug - INFO - 127.0.0.1 - - [09/May/2025 15:35:55] "[36mGET /static/css/bootstrap-icons.css HTTP/1.1[0m" 304 -
2025-05-09 15:35:55,415 - werkzeug - INFO - 127.0.0.1 - - [09/May/2025 15:35:55] "[36mGET /static/css/style.css HTTP/1.1[0m" 304 -
2025-05-09 15:35:55,416 - werkzeug - INFO - 127.0.0.1 - - [09/May/2025 15:35:55] "[36mGET /static/css/frappe-gantt.min.css HTTP/1.1[0m" 304 -
2025-05-09 15:35:55,418 - werkzeug - INFO - 127.0.0.1 - - [09/May/2025 15:35:55] "[36mGET /static/js/jquery.min.js HTTP/1.1[0m" 304 -
2025-05-09 15:35:55,427 - werkzeug - INFO - 127.0.0.1 - - [09/May/2025 15:35:55] "[36mGET /static/js/bootstrap.bundle.min.js HTTP/1.1[0m" 304 -
2025-05-09 15:35:55,429 - sqlalchemy.engine.Engine - INFO - [cached since 8.425s ago] ('17da690c-4e80-4387-82e2-af4f917aff52', 1, 0)
2025-05-09 15:35:55,439 - werkzeug - INFO - 127.0.0.1 - - [09/May/2025 15:35:55] "[36mGET /static/js/auth.js HTTP/1.1[0m" 304 -
2025-05-09 15:35:55,445 - werkzeug - INFO - 127.0.0.1 - - [09/May/2025 15:35:55] "[36mGET /static/js/fix-modals.js HTTP/1.1[0m" 304 -
2025-05-09 15:35:55,452 - werkzeug - INFO - 127.0.0.1 - - [09/May/2025 15:35:55] "[36mGET /static/js/csrf.js HTTP/1.1[0m" 304 -
2025-05-09 15:35:55,460 - werkzeug - INFO - 127.0.0.1 - - [09/May/2025 15:35:55] "[36mGET /static/js/frappe-gantt.min.js HTTP/1.1[0m" 304 -
2025-05-09 15:35:55,469 - app.utils.jwt_callbacks - INFO - Token 17da690c-4e80-4387-82e2-af4f917aff52 is valid
2025-05-09 15:35:55,483 - werkzeug - INFO - 127.0.0.1 - - [09/May/2025 15:35:55] "[36mGET /static/css/bootstrap.min.css.map HTTP/1.1[0m" 304 -
2025-05-09 15:35:55,494 - app.utils.jwt_callbacks - INFO - Verifying token
2025-05-09 15:35:55,500 - app - WARNING - 绕过JWT验证: /api/project-managers
2025-05-09 15:35:55,504 - app.utils.jwt_callbacks - INFO - JWT Header: {'alg': 'HS256', 'typ': 'JWT'}
2025-05-09 15:35:55,509 - app.utils.jwt_callbacks - INFO - Checking if token 17da690c-4e80-4387-82e2-af4f917aff52 is in blocklist
2025-05-09 15:35:55,514 - app.utils.jwt_callbacks - INFO - JWT Data: {'fresh': False, 'iat': 1746776152, 'jti': '17da690c-4e80-4387-82e2-af4f917aff52', 'type': 'access', 'sub': 1, 'nbf': 1746776152, 'csrf': 'IjY2NjEzOWExZTRmODhkZmYzMDRlMjQ2OTcyOTI1ODM4YjQzMWVlZDki.aB2wWA.UCAmnHZxE9G1Am09ZPv3Bcdf2EQ', 'exp': 1746779752, 'aud': 'task_management_system', 'user_claims': {'username': 'admin', 'roles': ['admin'], 'permissions': ['manage_users', 'manage_roles', 'manage_all_projects', 'manage_project', 'manage_all_tasks', 'manage_task', 'view_project', 'view_task', 'manage_resources', 'manage_risks', 'view_reports', 'create_task', 'assign_task', 'change_project_status', 'change_task_status', 'create_project'], 'is_active': True}, 'roles': ['admin']}
2025-05-09 15:35:55,523 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-05-09 15:35:55,524 - werkzeug - INFO - 127.0.0.1 - - [09/May/2025 15:35:55] "[36mGET /static/favicon.ico HTTP/1.1[0m" 304 -
2025-05-09 15:35:55,527 - app.utils.jwt_callbacks - INFO - Token time difference: -3.527784 seconds
2025-05-09 15:35:55,538 - sqlalchemy.engine.Engine - INFO - SELECT token_blacklist.id AS token_blacklist_id, token_blacklist.jti AS token_blacklist_jti, token_blacklist.token_type AS token_blacklist_token_type, token_blacklist.user_id AS token_blacklist_user_id, token_blacklist.revoked_at AS token_blacklist_revoked_at, token_blacklist.expires_at AS token_blacklist_expires_at 
FROM token_blacklist 
WHERE token_blacklist.jti = ?
 LIMIT ? OFFSET ?
2025-05-09 15:35:55,548 - app.utils.jwt_callbacks - INFO - Token verification successful
2025-05-09 15:35:55,554 - sqlalchemy.engine.Engine - INFO - [cached since 8.551s ago] ('17da690c-4e80-4387-82e2-af4f917aff52', 1, 0)
2025-05-09 15:35:55,559 - app.utils.jwt_callbacks - INFO - Looking up user with identity: 1
2025-05-09 15:35:55,567 - app.utils.jwt_callbacks - INFO - Token 17da690c-4e80-4387-82e2-af4f917aff52 is valid
2025-05-09 15:35:55,571 - sqlalchemy.engine.Engine - INFO - SELECT users.id AS users_id, users.username AS users_username, users.email AS users_email, users.name AS users_name, users.password_hash AS users_password_hash, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.last_login AS users_last_login 
FROM users 
WHERE users.id = ?
2025-05-09 15:35:55,577 - app.utils.jwt_callbacks - INFO - Verifying token
2025-05-09 15:35:55,582 - sqlalchemy.engine.Engine - INFO - [cached since 8.554s ago] (1,)
2025-05-09 15:35:55,587 - app.utils.jwt_callbacks - INFO - JWT Header: {'alg': 'HS256', 'typ': 'JWT'}
2025-05-09 15:35:55,592 - app.utils.jwt_callbacks - INFO - User found: admin
2025-05-09 15:35:55,597 - app.utils.jwt_callbacks - INFO - JWT Data: {'fresh': False, 'iat': 1746776152, 'jti': '17da690c-4e80-4387-82e2-af4f917aff52', 'type': 'access', 'sub': 1, 'nbf': 1746776152, 'csrf': 'IjY2NjEzOWExZTRmODhkZmYzMDRlMjQ2OTcyOTI1ODM4YjQzMWVlZDki.aB2wWA.UCAmnHZxE9G1Am09ZPv3Bcdf2EQ', 'exp': 1746779752, 'aud': 'task_management_system', 'user_claims': {'username': 'admin', 'roles': ['admin'], 'permissions': ['manage_users', 'manage_roles', 'manage_all_projects', 'manage_project', 'manage_all_tasks', 'manage_task', 'view_project', 'view_task', 'manage_resources', 'manage_risks', 'view_reports', 'create_task', 'assign_task', 'change_project_status', 'change_task_status', 'create_project'], 'is_active': True}, 'roles': ['admin']}
2025-05-09 15:35:55,602 - sqlalchemy.engine.Engine - INFO - SELECT roles.id AS roles_id, roles.name AS roles_name, roles.description AS roles_description, roles.created_at AS roles_created_at 
FROM roles, user_roles 
WHERE ? = user_roles.user_id AND roles.id = user_roles.role_id
2025-05-09 15:35:55,608 - app.utils.jwt_callbacks - INFO - Token time difference: -3.608992 seconds
2025-05-09 15:35:55,615 - sqlalchemy.engine.Engine - INFO - [cached since 8.574s ago] (1,)
2025-05-09 15:35:55,620 - app.utils.jwt_callbacks - INFO - Token verification successful
2025-05-09 15:35:55,628 - app.utils.jwt_callbacks - INFO - User roles: ['admin']
2025-05-09 15:35:55,632 - app.utils.jwt_callbacks - INFO - Looking up user with identity: 1
2025-05-09 15:35:55,637 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions, role_permissions 
WHERE ? = role_permissions.role_id AND permissions.id = role_permissions.permission_id
2025-05-09 15:35:55,642 - sqlalchemy.engine.Engine - INFO - SELECT users.id AS users_id, users.username AS users_username, users.email AS users_email, users.name AS users_name, users.password_hash AS users_password_hash, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.last_login AS users_last_login 
FROM users 
WHERE users.id = ?
2025-05-09 15:35:55,650 - sqlalchemy.engine.Engine - INFO - [cached since 25.37s ago] (1,)
2025-05-09 15:35:55,656 - sqlalchemy.engine.Engine - INFO - [cached since 8.628s ago] (1,)
2025-05-09 15:35:55,662 - app.utils.jwt_callbacks - INFO - User permissions: ['manage_users', 'manage_roles', 'manage_all_projects', 'manage_project', 'manage_all_tasks', 'manage_task', 'view_project', 'view_task', 'manage_resources', 'manage_risks', 'view_reports', 'create_task', 'assign_task', 'change_project_status', 'change_task_status', 'create_project']
2025-05-09 15:35:55,670 - app.utils.jwt_callbacks - INFO - User found: admin
2025-05-09 15:35:55,675 - app.utils.jwt_callbacks - INFO - Checking if token 17da690c-4e80-4387-82e2-af4f917aff52 is in blocklist
2025-05-09 15:35:55,681 - sqlalchemy.engine.Engine - INFO - SELECT roles.id AS roles_id, roles.name AS roles_name, roles.description AS roles_description, roles.created_at AS roles_created_at 
FROM roles, user_roles 
WHERE ? = user_roles.user_id AND roles.id = user_roles.role_id
2025-05-09 15:35:55,687 - sqlalchemy.engine.Engine - INFO - SELECT token_blacklist.id AS token_blacklist_id, token_blacklist.jti AS token_blacklist_jti, token_blacklist.token_type AS token_blacklist_token_type, token_blacklist.user_id AS token_blacklist_user_id, token_blacklist.revoked_at AS token_blacklist_revoked_at, token_blacklist.expires_at AS token_blacklist_expires_at 
FROM token_blacklist 
WHERE token_blacklist.jti = ?
 LIMIT ? OFFSET ?
2025-05-09 15:35:55,692 - sqlalchemy.engine.Engine - INFO - [cached since 8.652s ago] (1,)
2025-05-09 15:35:55,698 - sqlalchemy.engine.Engine - INFO - [cached since 8.695s ago] ('17da690c-4e80-4387-82e2-af4f917aff52', 1, 0)
2025-05-09 15:35:55,707 - app.utils.jwt_callbacks - INFO - User roles: ['admin']
2025-05-09 15:35:55,715 - app.utils.jwt_callbacks - INFO - Token 17da690c-4e80-4387-82e2-af4f917aff52 is valid
2025-05-09 15:35:55,720 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions, role_permissions 
WHERE ? = role_permissions.role_id AND permissions.id = role_permissions.permission_id
2025-05-09 15:35:55,726 - app.utils.jwt_callbacks - INFO - Verifying token
2025-05-09 15:35:55,731 - sqlalchemy.engine.Engine - INFO - [cached since 25.45s ago] (1,)
2025-05-09 15:35:55,736 - app.utils.jwt_callbacks - INFO - JWT Header: {'alg': 'HS256', 'typ': 'JWT'}
2025-05-09 15:35:55,743 - app.utils.jwt_callbacks - INFO - User permissions: ['manage_users', 'manage_roles', 'manage_all_projects', 'manage_project', 'manage_all_tasks', 'manage_task', 'view_project', 'view_task', 'manage_resources', 'manage_risks', 'view_reports', 'create_task', 'assign_task', 'change_project_status', 'change_task_status', 'create_project']
2025-05-09 15:35:55,747 - app.utils.jwt_callbacks - INFO - JWT Data: {'fresh': False, 'iat': 1746776152, 'jti': '17da690c-4e80-4387-82e2-af4f917aff52', 'type': 'access', 'sub': 1, 'nbf': 1746776152, 'csrf': 'IjY2NjEzOWExZTRmODhkZmYzMDRlMjQ2OTcyOTI1ODM4YjQzMWVlZDki.aB2wWA.UCAmnHZxE9G1Am09ZPv3Bcdf2EQ', 'exp': 1746779752, 'aud': 'task_management_system', 'user_claims': {'username': 'admin', 'roles': ['admin'], 'permissions': ['manage_users', 'manage_roles', 'manage_all_projects', 'manage_project', 'manage_all_tasks', 'manage_task', 'view_project', 'view_task', 'manage_resources', 'manage_risks', 'view_reports', 'create_task', 'assign_task', 'change_project_status', 'change_task_status', 'create_project'], 'is_active': True}, 'roles': ['admin']}
2025-05-09 15:35:55,751 - app.routes.projects - INFO - 获取项目经理列表API被调用
2025-05-09 15:35:55,758 - app.utils.jwt_callbacks - INFO - Token time difference: -3.758041 seconds
2025-05-09 15:35:55,765 - sqlalchemy.engine.Engine - INFO - SELECT users.id AS users_id, users.username AS users_username, users.email AS users_email, users.name AS users_name, users.password_hash AS users_password_hash, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.last_login AS users_last_login 
FROM users 
WHERE users.is_active = 1
2025-05-09 15:35:55,769 - app.utils.jwt_callbacks - INFO - Token verification successful
2025-05-09 15:35:55,774 - sqlalchemy.engine.Engine - INFO - [generated in 0.00955s] ()
2025-05-09 15:35:55,780 - app.utils.jwt_callbacks - INFO - Looking up user with identity: 1
2025-05-09 15:35:55,787 - app.routes.projects - INFO - 已找到 9 个活跃用户用于项目经理选择
2025-05-09 15:35:55,792 - app.utils.jwt_callbacks - INFO - User found: admin
2025-05-09 15:35:55,798 - sqlalchemy.engine.Engine - INFO - SELECT roles.id AS roles_id, roles.name AS roles_name, roles.description AS roles_description, roles.created_at AS roles_created_at 
FROM roles, user_roles 
WHERE ? = user_roles.user_id AND roles.id = user_roles.role_id
2025-05-09 15:35:55,802 - app.utils.jwt_callbacks - INFO - User roles: ['admin']
2025-05-09 15:35:55,806 - sqlalchemy.engine.Engine - INFO - [cached since 8.767s ago] (8,)
2025-05-09 15:35:55,812 - app.utils.jwt_callbacks - INFO - User permissions: ['manage_users', 'manage_roles', 'manage_all_projects', 'manage_project', 'manage_all_tasks', 'manage_task', 'view_project', 'view_task', 'manage_resources', 'manage_risks', 'view_reports', 'create_task', 'assign_task', 'change_project_status', 'change_task_status', 'create_project']
2025-05-09 15:35:55,819 - sqlalchemy.engine.Engine - INFO - SELECT roles.id AS roles_id, roles.name AS roles_name, roles.description AS roles_description, roles.created_at AS roles_created_at 
FROM roles, user_roles 
WHERE ? = user_roles.user_id AND roles.id = user_roles.role_id
2025-05-09 15:35:55,824 - app - INFO - 用户已认证，重定向到仪表板页面: /.well-known/appspecific/com.chrome.devtools.json
2025-05-09 15:35:55,829 - sqlalchemy.engine.Engine - INFO - [cached since 8.789s ago] (9,)
2025-05-09 15:35:55,834 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-05-09 15:35:55,844 - sqlalchemy.engine.Engine - INFO - SELECT roles.id AS roles_id, roles.name AS roles_name, roles.description AS roles_description, roles.created_at AS roles_created_at 
FROM roles, user_roles 
WHERE ? = user_roles.user_id AND roles.id = user_roles.role_id
2025-05-09 15:35:55,848 - werkzeug - INFO - 127.0.0.1 - - [09/May/2025 15:35:55] "[32mGET /.well-known/appspecific/com.chrome.devtools.json HTTP/1.1[0m" 302 -
2025-05-09 15:35:55,854 - sqlalchemy.engine.Engine - INFO - [cached since 8.813s ago] (4,)
2025-05-09 15:35:55,863 - app.utils.jwt_callbacks - INFO - Checking if token 17da690c-4e80-4387-82e2-af4f917aff52 is in blocklist
2025-05-09 15:35:55,870 - sqlalchemy.engine.Engine - INFO - SELECT roles.id AS roles_id, roles.name AS roles_name, roles.description AS roles_description, roles.created_at AS roles_created_at 
FROM roles, user_roles 
WHERE ? = user_roles.user_id AND roles.id = user_roles.role_id
2025-05-09 15:35:55,874 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-05-09 15:35:55,881 - sqlalchemy.engine.Engine - INFO - [cached since 8.841s ago] (5,)
2025-05-09 15:35:55,886 - sqlalchemy.engine.Engine - INFO - SELECT token_blacklist.id AS token_blacklist_id, token_blacklist.jti AS token_blacklist_jti, token_blacklist.token_type AS token_blacklist_token_type, token_blacklist.user_id AS token_blacklist_user_id, token_blacklist.revoked_at AS token_blacklist_revoked_at, token_blacklist.expires_at AS token_blacklist_expires_at 
FROM token_blacklist 
WHERE token_blacklist.jti = ?
 LIMIT ? OFFSET ?
2025-05-09 15:35:55,893 - sqlalchemy.engine.Engine - INFO - SELECT roles.id AS roles_id, roles.name AS roles_name, roles.description AS roles_description, roles.created_at AS roles_created_at 
FROM roles, user_roles 
WHERE ? = user_roles.user_id AND roles.id = user_roles.role_id
2025-05-09 15:35:55,898 - sqlalchemy.engine.Engine - INFO - [cached since 8.895s ago] ('17da690c-4e80-4387-82e2-af4f917aff52', 1, 0)
2025-05-09 15:35:55,904 - sqlalchemy.engine.Engine - INFO - [cached since 8.863s ago] (6,)
2025-05-09 15:35:55,909 - app.utils.jwt_callbacks - INFO - Token 17da690c-4e80-4387-82e2-af4f917aff52 is valid
2025-05-09 15:35:55,917 - sqlalchemy.engine.Engine - INFO - SELECT roles.id AS roles_id, roles.name AS roles_name, roles.description AS roles_description, roles.created_at AS roles_created_at 
FROM roles, user_roles 
WHERE ? = user_roles.user_id AND roles.id = user_roles.role_id
2025-05-09 15:35:55,923 - app.utils.jwt_callbacks - INFO - Verifying token
2025-05-09 15:35:55,929 - sqlalchemy.engine.Engine - INFO - [cached since 8.888s ago] (7,)
2025-05-09 15:35:55,934 - app.utils.jwt_callbacks - INFO - JWT Header: {'alg': 'HS256', 'typ': 'JWT'}
2025-05-09 15:35:55,941 - sqlalchemy.engine.Engine - INFO - SELECT roles.id AS roles_id, roles.name AS roles_name, roles.description AS roles_description, roles.created_at AS roles_created_at 
FROM roles, user_roles 
WHERE ? = user_roles.user_id AND roles.id = user_roles.role_id
2025-05-09 15:35:55,946 - app.utils.jwt_callbacks - INFO - JWT Data: {'fresh': False, 'iat': 1746776152, 'jti': '17da690c-4e80-4387-82e2-af4f917aff52', 'type': 'access', 'sub': 1, 'nbf': 1746776152, 'csrf': 'IjY2NjEzOWExZTRmODhkZmYzMDRlMjQ2OTcyOTI1ODM4YjQzMWVlZDki.aB2wWA.UCAmnHZxE9G1Am09ZPv3Bcdf2EQ', 'exp': 1746779752, 'aud': 'task_management_system', 'user_claims': {'username': 'admin', 'roles': ['admin'], 'permissions': ['manage_users', 'manage_roles', 'manage_all_projects', 'manage_project', 'manage_all_tasks', 'manage_task', 'view_project', 'view_task', 'manage_resources', 'manage_risks', 'view_reports', 'create_task', 'assign_task', 'change_project_status', 'change_task_status', 'create_project'], 'is_active': True}, 'roles': ['admin']}
2025-05-09 15:35:55,952 - sqlalchemy.engine.Engine - INFO - [cached since 8.912s ago] (2,)
2025-05-09 15:35:55,958 - app.utils.jwt_callbacks - INFO - Token time difference: -3.958336 seconds
2025-05-09 15:35:55,965 - sqlalchemy.engine.Engine - INFO - SELECT roles.id AS roles_id, roles.name AS roles_name, roles.description AS roles_description, roles.created_at AS roles_created_at 
FROM roles, user_roles 
WHERE ? = user_roles.user_id AND roles.id = user_roles.role_id
2025-05-09 15:35:55,969 - app.utils.jwt_callbacks - INFO - Token verification successful
2025-05-09 15:35:55,975 - sqlalchemy.engine.Engine - INFO - [cached since 8.935s ago] (3,)
2025-05-09 15:35:55,981 - app.utils.jwt_callbacks - INFO - Looking up user with identity: 1
2025-05-09 15:35:55,985 - app.routes.projects - INFO - 返回 9 个可选的项目负责人
2025-05-09 15:35:55,989 - sqlalchemy.engine.Engine - INFO - SELECT users.id AS users_id, users.username AS users_username, users.email AS users_email, users.name AS users_name, users.password_hash AS users_password_hash, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.last_login AS users_last_login 
FROM users 
WHERE users.id = ?
2025-05-09 15:35:55,995 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-05-09 15:35:56,001 - sqlalchemy.engine.Engine - INFO - [cached since 8.973s ago] (1,)
2025-05-09 15:35:56,006 - werkzeug - INFO - 127.0.0.1 - - [09/May/2025 15:35:56] "GET /api/project-managers?bypass_jwt=true HTTP/1.1" 200 -
2025-05-09 15:35:56,013 - app.utils.jwt_callbacks - INFO - User found: admin
2025-05-09 15:35:56,021 - sqlalchemy.engine.Engine - INFO - SELECT roles.id AS roles_id, roles.name AS roles_name, roles.description AS roles_description, roles.created_at AS roles_created_at 
FROM roles, user_roles 
WHERE ? = user_roles.user_id AND roles.id = user_roles.role_id
2025-05-09 15:35:56,028 - sqlalchemy.engine.Engine - INFO - [cached since 8.987s ago] (1,)
2025-05-09 15:35:56,034 - app.utils.jwt_callbacks - INFO - User roles: ['admin']
2025-05-09 15:35:56,040 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions, role_permissions 
WHERE ? = role_permissions.role_id AND permissions.id = role_permissions.permission_id
2025-05-09 15:35:56,046 - sqlalchemy.engine.Engine - INFO - [cached since 25.76s ago] (1,)
2025-05-09 15:35:56,053 - app.utils.jwt_callbacks - INFO - User permissions: ['manage_users', 'manage_roles', 'manage_all_projects', 'manage_project', 'manage_all_tasks', 'manage_task', 'view_project', 'view_task', 'manage_resources', 'manage_risks', 'view_reports', 'create_task', 'assign_task', 'change_project_status', 'change_task_status', 'create_project']
2025-05-09 15:35:56,058 - app.utils.jwt_callbacks - INFO - Checking if token 17da690c-4e80-4387-82e2-af4f917aff52 is in blocklist
2025-05-09 15:35:56,065 - sqlalchemy.engine.Engine - INFO - SELECT token_blacklist.id AS token_blacklist_id, token_blacklist.jti AS token_blacklist_jti, token_blacklist.token_type AS token_blacklist_token_type, token_blacklist.user_id AS token_blacklist_user_id, token_blacklist.revoked_at AS token_blacklist_revoked_at, token_blacklist.expires_at AS token_blacklist_expires_at 
FROM token_blacklist 
WHERE token_blacklist.jti = ?
 LIMIT ? OFFSET ?
2025-05-09 15:35:56,071 - sqlalchemy.engine.Engine - INFO - [cached since 9.067s ago] ('17da690c-4e80-4387-82e2-af4f917aff52', 1, 0)
2025-05-09 15:35:56,077 - app.utils.jwt_callbacks - INFO - Token 17da690c-4e80-4387-82e2-af4f917aff52 is valid
2025-05-09 15:35:56,083 - app.utils.jwt_callbacks - INFO - Verifying token
2025-05-09 15:35:56,087 - app.utils.jwt_callbacks - INFO - JWT Header: {'alg': 'HS256', 'typ': 'JWT'}
2025-05-09 15:35:56,093 - app.utils.jwt_callbacks - INFO - JWT Data: {'fresh': False, 'iat': 1746776152, 'jti': '17da690c-4e80-4387-82e2-af4f917aff52', 'type': 'access', 'sub': 1, 'nbf': 1746776152, 'csrf': 'IjY2NjEzOWExZTRmODhkZmYzMDRlMjQ2OTcyOTI1ODM4YjQzMWVlZDki.aB2wWA.UCAmnHZxE9G1Am09ZPv3Bcdf2EQ', 'exp': 1746779752, 'aud': 'task_management_system', 'user_claims': {'username': 'admin', 'roles': ['admin'], 'permissions': ['manage_users', 'manage_roles', 'manage_all_projects', 'manage_project', 'manage_all_tasks', 'manage_task', 'view_project', 'view_task', 'manage_resources', 'manage_risks', 'view_reports', 'create_task', 'assign_task', 'change_project_status', 'change_task_status', 'create_project'], 'is_active': True}, 'roles': ['admin']}
2025-05-09 15:35:56,098 - app.utils.jwt_callbacks - INFO - Token time difference: -4.098959 seconds
2025-05-09 15:35:56,104 - app.utils.jwt_callbacks - INFO - Token verification successful
2025-05-09 15:35:56,109 - app.utils.jwt_callbacks - INFO - Looking up user with identity: 1
2025-05-09 15:35:56,115 - app.utils.jwt_callbacks - INFO - User found: admin
2025-05-09 15:35:56,120 - app.utils.jwt_callbacks - INFO - User roles: ['admin']
2025-05-09 15:35:56,124 - app.utils.jwt_callbacks - INFO - User permissions: ['manage_users', 'manage_roles', 'manage_all_projects', 'manage_project', 'manage_all_tasks', 'manage_task', 'view_project', 'view_task', 'manage_resources', 'manage_risks', 'view_reports', 'create_task', 'assign_task', 'change_project_status', 'change_task_status', 'create_project']
2025-05-09 15:35:56,131 - app - INFO - Dashboard access with user ID: 1
2025-05-09 15:35:56,135 - app - INFO - Token found in: cookies
2025-05-09 15:35:56,140 - app - INFO - Dashboard context user_data: {'id': 1, 'username': 'admin', 'email': 'admin@example.com', 'name': '管理员', 'is_active': True, 'created_at': '2025-05-07T01:07:21.773527', 'last_login': '2025-05-09T07:35:52.171599', 'roles': ['admin'], 'permissions': ['assign_task', 'manage_roles', 'manage_users', 'view_project', 'manage_risks', 'view_task', 'change_project_status', 'manage_project', 'manage_all_tasks', 'create_project', 'change_task_status', 'manage_all_projects', 'manage_resources', 'view_reports', 'manage_task', 'create_task']}
2025-05-09 15:35:56,146 - app - INFO - 用户 admin 的角色: ['admin']
2025-05-09 15:35:56,150 - app - INFO - 用户 admin 的权限: ['assign_task', 'manage_roles', 'manage_users', 'view_project', 'manage_risks', 'view_task', 'change_project_status', 'manage_project', 'manage_all_tasks', 'create_project', 'change_task_status', 'manage_all_projects', 'manage_resources', 'view_reports', 'manage_task', 'create_task']
2025-05-09 15:35:56,155 - app - INFO - 用户 admin - 是否管理员: True, 是否项目经理: False
2025-05-09 15:35:56,161 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-05-09 15:35:56,167 - werkzeug - INFO - 127.0.0.1 - - [09/May/2025 15:35:56] "GET /main/dashboard HTTP/1.1" 200 -
2025-05-09 15:40:05,768 - werkzeug - INFO - 127.0.0.1 - - [09/May/2025 15:40:05] "GET /login HTTP/1.1" 200 -
2025-05-09 15:40:05,802 - app.utils.jwt_callbacks - INFO - Checking if token 17da690c-4e80-4387-82e2-af4f917aff52 is in blocklist
2025-05-09 15:40:05,805 - werkzeug - INFO - 127.0.0.1 - - [09/May/2025 15:40:05] "[36mGET /static/css/bootstrap.min.css HTTP/1.1[0m" 304 -
2025-05-09 15:40:05,806 - werkzeug - INFO - 127.0.0.1 - - [09/May/2025 15:40:05] "[36mGET /static/css/bootstrap-icons.css HTTP/1.1[0m" 304 -
2025-05-09 15:40:05,807 - werkzeug - INFO - 127.0.0.1 - - [09/May/2025 15:40:05] "[36mGET /static/css/style.css HTTP/1.1[0m" 304 -
2025-05-09 15:40:05,809 - werkzeug - INFO - 127.0.0.1 - - [09/May/2025 15:40:05] "[36mGET /static/js/jquery.min.js HTTP/1.1[0m" 304 -
2025-05-09 15:40:05,810 - werkzeug - INFO - 127.0.0.1 - - [09/May/2025 15:40:05] "[36mGET /static/js/bootstrap.bundle.min.js HTTP/1.1[0m" 304 -
2025-05-09 15:40:05,811 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-05-09 15:40:05,816 - werkzeug - INFO - 127.0.0.1 - - [09/May/2025 15:40:05] "[36mGET /static/images/background.png HTTP/1.1[0m" 304 -
2025-05-09 15:40:05,821 - werkzeug - INFO - 127.0.0.1 - - [09/May/2025 15:40:05] "[36mGET /static/js/auth.js HTTP/1.1[0m" 304 -
2025-05-09 15:40:05,830 - sqlalchemy.engine.Engine - INFO - SELECT token_blacklist.id AS token_blacklist_id, token_blacklist.jti AS token_blacklist_jti, token_blacklist.token_type AS token_blacklist_token_type, token_blacklist.user_id AS token_blacklist_user_id, token_blacklist.revoked_at AS token_blacklist_revoked_at, token_blacklist.expires_at AS token_blacklist_expires_at 
FROM token_blacklist 
WHERE token_blacklist.jti = ?
 LIMIT ? OFFSET ?
2025-05-09 15:40:05,841 - werkzeug - INFO - 127.0.0.1 - - [09/May/2025 15:40:05] "[36mGET /static/js/fix-modals.js HTTP/1.1[0m" 304 -
2025-05-09 15:40:05,844 - werkzeug - INFO - 127.0.0.1 - - [09/May/2025 15:40:05] "[36mGET /static/js/csrf.js HTTP/1.1[0m" 304 -
2025-05-09 15:40:05,846 - werkzeug - INFO - 127.0.0.1 - - [09/May/2025 15:40:05] "[36mGET /static/js/background-helper.js HTTP/1.1[0m" 304 -
2025-05-09 15:40:05,847 - werkzeug - INFO - 127.0.0.1 - - [09/May/2025 15:40:05] "[33mGET /static/uploads/background.png HTTP/1.1[0m" 404 -
2025-05-09 15:40:05,847 - werkzeug - INFO - 127.0.0.1 - - [09/May/2025 15:40:05] "[36mGET /static/css/bootstrap.min.css.map HTTP/1.1[0m" 304 -
2025-05-09 15:40:05,850 - sqlalchemy.engine.Engine - INFO - [cached since 258.8s ago] ('17da690c-4e80-4387-82e2-af4f917aff52', 1, 0)
2025-05-09 15:40:05,876 - app.utils.jwt_callbacks - INFO - Token 17da690c-4e80-4387-82e2-af4f917aff52 is valid
2025-05-09 15:40:05,881 - app.utils.jwt_callbacks - INFO - Verifying token
2025-05-09 15:40:05,886 - app.utils.jwt_callbacks - INFO - JWT Header: {'alg': 'HS256', 'typ': 'JWT'}
2025-05-09 15:40:05,891 - app.utils.jwt_callbacks - INFO - JWT Data: {'fresh': False, 'iat': 1746776152, 'jti': '17da690c-4e80-4387-82e2-af4f917aff52', 'type': 'access', 'sub': 1, 'nbf': 1746776152, 'csrf': 'IjY2NjEzOWExZTRmODhkZmYzMDRlMjQ2OTcyOTI1ODM4YjQzMWVlZDki.aB2wWA.UCAmnHZxE9G1Am09ZPv3Bcdf2EQ', 'exp': 1746779752, 'aud': 'task_management_system', 'user_claims': {'username': 'admin', 'roles': ['admin'], 'permissions': ['manage_users', 'manage_roles', 'manage_all_projects', 'manage_project', 'manage_all_tasks', 'manage_task', 'view_project', 'view_task', 'manage_resources', 'manage_risks', 'view_reports', 'create_task', 'assign_task', 'change_project_status', 'change_task_status', 'create_project'], 'is_active': True}, 'roles': ['admin']}
2025-05-09 15:40:05,896 - app.utils.jwt_callbacks - INFO - Token time difference: -253.896957 seconds
2025-05-09 15:40:05,901 - werkzeug - INFO - 127.0.0.1 - - [09/May/2025 15:40:05] "[36mGET /static/favicon.ico HTTP/1.1[0m" 304 -
2025-05-09 15:40:05,904 - app.utils.jwt_callbacks - INFO - Token verification successful
2025-05-09 15:40:05,913 - app.utils.jwt_callbacks - INFO - Looking up user with identity: 1
2025-05-09 15:40:05,919 - sqlalchemy.engine.Engine - INFO - SELECT users.id AS users_id, users.username AS users_username, users.email AS users_email, users.name AS users_name, users.password_hash AS users_password_hash, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.last_login AS users_last_login 
FROM users 
WHERE users.id = ?
2025-05-09 15:40:05,930 - sqlalchemy.engine.Engine - INFO - [cached since 258.9s ago] (1,)
2025-05-09 15:40:05,937 - app.utils.jwt_callbacks - INFO - User found: admin
2025-05-09 15:40:05,945 - sqlalchemy.engine.Engine - INFO - SELECT roles.id AS roles_id, roles.name AS roles_name, roles.description AS roles_description, roles.created_at AS roles_created_at 
FROM roles, user_roles 
WHERE ? = user_roles.user_id AND roles.id = user_roles.role_id
2025-05-09 15:40:05,953 - sqlalchemy.engine.Engine - INFO - [cached since 258.9s ago] (1,)
2025-05-09 15:40:05,962 - app.utils.jwt_callbacks - INFO - User roles: ['admin']
2025-05-09 15:40:05,967 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions, role_permissions 
WHERE ? = role_permissions.role_id AND permissions.id = role_permissions.permission_id
2025-05-09 15:40:05,976 - sqlalchemy.engine.Engine - INFO - [cached since 275.7s ago] (1,)
2025-05-09 15:40:05,985 - app.utils.jwt_callbacks - INFO - User permissions: ['manage_users', 'manage_roles', 'manage_all_projects', 'manage_project', 'manage_all_tasks', 'manage_task', 'view_project', 'view_task', 'manage_resources', 'manage_risks', 'view_reports', 'create_task', 'assign_task', 'change_project_status', 'change_task_status', 'create_project']
2025-05-09 15:40:05,989 - app.utils.jwt_callbacks - INFO - Checking if token 17da690c-4e80-4387-82e2-af4f917aff52 is in blocklist
2025-05-09 15:40:05,997 - sqlalchemy.engine.Engine - INFO - SELECT token_blacklist.id AS token_blacklist_id, token_blacklist.jti AS token_blacklist_jti, token_blacklist.token_type AS token_blacklist_token_type, token_blacklist.user_id AS token_blacklist_user_id, token_blacklist.revoked_at AS token_blacklist_revoked_at, token_blacklist.expires_at AS token_blacklist_expires_at 
FROM token_blacklist 
WHERE token_blacklist.jti = ?
 LIMIT ? OFFSET ?
2025-05-09 15:40:06,004 - sqlalchemy.engine.Engine - INFO - [cached since 259s ago] ('17da690c-4e80-4387-82e2-af4f917aff52', 1, 0)
2025-05-09 15:40:06,011 - app.utils.jwt_callbacks - INFO - Token 17da690c-4e80-4387-82e2-af4f917aff52 is valid
2025-05-09 15:40:06,015 - app.utils.jwt_callbacks - INFO - Verifying token
2025-05-09 15:40:06,020 - app.utils.jwt_callbacks - INFO - JWT Header: {'alg': 'HS256', 'typ': 'JWT'}
2025-05-09 15:40:06,028 - app.utils.jwt_callbacks - INFO - JWT Data: {'fresh': False, 'iat': 1746776152, 'jti': '17da690c-4e80-4387-82e2-af4f917aff52', 'type': 'access', 'sub': 1, 'nbf': 1746776152, 'csrf': 'IjY2NjEzOWExZTRmODhkZmYzMDRlMjQ2OTcyOTI1ODM4YjQzMWVlZDki.aB2wWA.UCAmnHZxE9G1Am09ZPv3Bcdf2EQ', 'exp': 1746779752, 'aud': 'task_management_system', 'user_claims': {'username': 'admin', 'roles': ['admin'], 'permissions': ['manage_users', 'manage_roles', 'manage_all_projects', 'manage_project', 'manage_all_tasks', 'manage_task', 'view_project', 'view_task', 'manage_resources', 'manage_risks', 'view_reports', 'create_task', 'assign_task', 'change_project_status', 'change_task_status', 'create_project'], 'is_active': True}, 'roles': ['admin']}
2025-05-09 15:40:06,033 - app.utils.jwt_callbacks - INFO - Token time difference: -254.033344 seconds
2025-05-09 15:40:06,042 - app.utils.jwt_callbacks - INFO - Token verification successful
2025-05-09 15:40:06,046 - app.utils.jwt_callbacks - INFO - Looking up user with identity: 1
2025-05-09 15:40:06,054 - app.utils.jwt_callbacks - INFO - User found: admin
2025-05-09 15:40:06,059 - app.utils.jwt_callbacks - INFO - User roles: ['admin']
2025-05-09 15:40:06,067 - app.utils.jwt_callbacks - INFO - User permissions: ['manage_users', 'manage_roles', 'manage_all_projects', 'manage_project', 'manage_all_tasks', 'manage_task', 'view_project', 'view_task', 'manage_resources', 'manage_risks', 'view_reports', 'create_task', 'assign_task', 'change_project_status', 'change_task_status', 'create_project']
2025-05-09 15:40:06,075 - app - INFO - 用户已认证，重定向到仪表板页面: /.well-known/appspecific/com.chrome.devtools.json
2025-05-09 15:40:06,082 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-05-09 15:40:06,092 - werkzeug - INFO - 127.0.0.1 - - [09/May/2025 15:40:06] "[32mGET /.well-known/appspecific/com.chrome.devtools.json HTTP/1.1[0m" 302 -
2025-05-09 15:40:06,106 - app.utils.jwt_callbacks - INFO - Checking if token 17da690c-4e80-4387-82e2-af4f917aff52 is in blocklist
2025-05-09 15:40:06,113 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-05-09 15:40:06,123 - sqlalchemy.engine.Engine - INFO - SELECT token_blacklist.id AS token_blacklist_id, token_blacklist.jti AS token_blacklist_jti, token_blacklist.token_type AS token_blacklist_token_type, token_blacklist.user_id AS token_blacklist_user_id, token_blacklist.revoked_at AS token_blacklist_revoked_at, token_blacklist.expires_at AS token_blacklist_expires_at 
FROM token_blacklist 
WHERE token_blacklist.jti = ?
 LIMIT ? OFFSET ?
2025-05-09 15:40:06,128 - sqlalchemy.engine.Engine - INFO - [cached since 259.1s ago] ('17da690c-4e80-4387-82e2-af4f917aff52', 1, 0)
2025-05-09 15:40:06,139 - app.utils.jwt_callbacks - INFO - Token 17da690c-4e80-4387-82e2-af4f917aff52 is valid
2025-05-09 15:40:06,148 - app.utils.jwt_callbacks - INFO - Verifying token
2025-05-09 15:40:06,155 - app.utils.jwt_callbacks - INFO - JWT Header: {'alg': 'HS256', 'typ': 'JWT'}
2025-05-09 15:40:06,161 - app.utils.jwt_callbacks - INFO - JWT Data: {'fresh': False, 'iat': 1746776152, 'jti': '17da690c-4e80-4387-82e2-af4f917aff52', 'type': 'access', 'sub': 1, 'nbf': 1746776152, 'csrf': 'IjY2NjEzOWExZTRmODhkZmYzMDRlMjQ2OTcyOTI1ODM4YjQzMWVlZDki.aB2wWA.UCAmnHZxE9G1Am09ZPv3Bcdf2EQ', 'exp': 1746779752, 'aud': 'task_management_system', 'user_claims': {'username': 'admin', 'roles': ['admin'], 'permissions': ['manage_users', 'manage_roles', 'manage_all_projects', 'manage_project', 'manage_all_tasks', 'manage_task', 'view_project', 'view_task', 'manage_resources', 'manage_risks', 'view_reports', 'create_task', 'assign_task', 'change_project_status', 'change_task_status', 'create_project'], 'is_active': True}, 'roles': ['admin']}
2025-05-09 15:40:06,170 - app.utils.jwt_callbacks - INFO - Token time difference: -254.170065 seconds
2025-05-09 15:40:06,178 - app.utils.jwt_callbacks - INFO - Token verification successful
2025-05-09 15:40:06,185 - app.utils.jwt_callbacks - INFO - Looking up user with identity: 1
2025-05-09 15:40:06,191 - sqlalchemy.engine.Engine - INFO - SELECT users.id AS users_id, users.username AS users_username, users.email AS users_email, users.name AS users_name, users.password_hash AS users_password_hash, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.last_login AS users_last_login 
FROM users 
WHERE users.id = ?
2025-05-09 15:40:06,202 - sqlalchemy.engine.Engine - INFO - [cached since 259.2s ago] (1,)
2025-05-09 15:40:06,213 - app.utils.jwt_callbacks - INFO - User found: admin
2025-05-09 15:40:06,221 - sqlalchemy.engine.Engine - INFO - SELECT roles.id AS roles_id, roles.name AS roles_name, roles.description AS roles_description, roles.created_at AS roles_created_at 
FROM roles, user_roles 
WHERE ? = user_roles.user_id AND roles.id = user_roles.role_id
2025-05-09 15:40:06,231 - sqlalchemy.engine.Engine - INFO - [cached since 259.2s ago] (1,)
2025-05-09 15:40:06,243 - app.utils.jwt_callbacks - INFO - User roles: ['admin']
2025-05-09 15:40:06,252 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions, role_permissions 
WHERE ? = role_permissions.role_id AND permissions.id = role_permissions.permission_id
2025-05-09 15:40:06,264 - sqlalchemy.engine.Engine - INFO - [cached since 276s ago] (1,)
2025-05-09 15:40:06,275 - app.utils.jwt_callbacks - INFO - User permissions: ['manage_users', 'manage_roles', 'manage_all_projects', 'manage_project', 'manage_all_tasks', 'manage_task', 'view_project', 'view_task', 'manage_resources', 'manage_risks', 'view_reports', 'create_task', 'assign_task', 'change_project_status', 'change_task_status', 'create_project']
2025-05-09 15:40:06,283 - app.utils.jwt_callbacks - INFO - Checking if token 17da690c-4e80-4387-82e2-af4f917aff52 is in blocklist
2025-05-09 15:40:06,293 - sqlalchemy.engine.Engine - INFO - SELECT token_blacklist.id AS token_blacklist_id, token_blacklist.jti AS token_blacklist_jti, token_blacklist.token_type AS token_blacklist_token_type, token_blacklist.user_id AS token_blacklist_user_id, token_blacklist.revoked_at AS token_blacklist_revoked_at, token_blacklist.expires_at AS token_blacklist_expires_at 
FROM token_blacklist 
WHERE token_blacklist.jti = ?
 LIMIT ? OFFSET ?
2025-05-09 15:40:06,305 - sqlalchemy.engine.Engine - INFO - [cached since 259.3s ago] ('17da690c-4e80-4387-82e2-af4f917aff52', 1, 0)
2025-05-09 15:40:06,312 - app.utils.jwt_callbacks - INFO - Token 17da690c-4e80-4387-82e2-af4f917aff52 is valid
2025-05-09 15:40:06,323 - app.utils.jwt_callbacks - INFO - Verifying token
2025-05-09 15:40:06,331 - app.utils.jwt_callbacks - INFO - JWT Header: {'alg': 'HS256', 'typ': 'JWT'}
2025-05-09 15:40:06,341 - app.utils.jwt_callbacks - INFO - JWT Data: {'fresh': False, 'iat': 1746776152, 'jti': '17da690c-4e80-4387-82e2-af4f917aff52', 'type': 'access', 'sub': 1, 'nbf': 1746776152, 'csrf': 'IjY2NjEzOWExZTRmODhkZmYzMDRlMjQ2OTcyOTI1ODM4YjQzMWVlZDki.aB2wWA.UCAmnHZxE9G1Am09ZPv3Bcdf2EQ', 'exp': 1746779752, 'aud': 'task_management_system', 'user_claims': {'username': 'admin', 'roles': ['admin'], 'permissions': ['manage_users', 'manage_roles', 'manage_all_projects', 'manage_project', 'manage_all_tasks', 'manage_task', 'view_project', 'view_task', 'manage_resources', 'manage_risks', 'view_reports', 'create_task', 'assign_task', 'change_project_status', 'change_task_status', 'create_project'], 'is_active': True}, 'roles': ['admin']}
2025-05-09 15:40:06,346 - app.utils.jwt_callbacks - INFO - Token time difference: -254.346227 seconds
2025-05-09 15:40:06,355 - app.utils.jwt_callbacks - INFO - Token verification successful
2025-05-09 15:40:06,360 - app.utils.jwt_callbacks - INFO - Looking up user with identity: 1
2025-05-09 15:40:06,368 - app.utils.jwt_callbacks - INFO - User found: admin
2025-05-09 15:40:06,375 - app.utils.jwt_callbacks - INFO - User roles: ['admin']
2025-05-09 15:40:06,383 - app.utils.jwt_callbacks - INFO - User permissions: ['manage_users', 'manage_roles', 'manage_all_projects', 'manage_project', 'manage_all_tasks', 'manage_task', 'view_project', 'view_task', 'manage_resources', 'manage_risks', 'view_reports', 'create_task', 'assign_task', 'change_project_status', 'change_task_status', 'create_project']
2025-05-09 15:40:06,388 - app - INFO - Dashboard access with user ID: 1
2025-05-09 15:40:06,395 - app - INFO - Token found in: cookies
2025-05-09 15:40:06,402 - app - INFO - Dashboard context user_data: {'id': 1, 'username': 'admin', 'email': 'admin@example.com', 'name': '管理员', 'is_active': True, 'created_at': '2025-05-07T01:07:21.773527', 'last_login': '2025-05-09T07:35:52.171599', 'roles': ['admin'], 'permissions': ['assign_task', 'manage_roles', 'manage_users', 'view_project', 'manage_risks', 'view_task', 'change_project_status', 'manage_project', 'manage_all_tasks', 'create_project', 'change_task_status', 'manage_all_projects', 'manage_resources', 'view_reports', 'manage_task', 'create_task']}
2025-05-09 15:40:06,409 - app - INFO - 用户 admin 的角色: ['admin']
2025-05-09 15:40:06,415 - app - INFO - 用户 admin 的权限: ['assign_task', 'manage_roles', 'manage_users', 'view_project', 'manage_risks', 'view_task', 'change_project_status', 'manage_project', 'manage_all_tasks', 'create_project', 'change_task_status', 'manage_all_projects', 'manage_resources', 'view_reports', 'manage_task', 'create_task']
2025-05-09 15:40:06,425 - app - INFO - 用户 admin - 是否管理员: True, 是否项目经理: False
2025-05-09 15:40:06,435 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-05-09 15:40:06,446 - werkzeug - INFO - 127.0.0.1 - - [09/May/2025 15:40:06] "GET /main/dashboard HTTP/1.1" 200 -
2025-05-09 15:40:06,873 - werkzeug - INFO - 127.0.0.1 - - [09/May/2025 15:40:06] "[33mGET /static/uploads/background.png HTTP/1.1[0m" 404 -
2025-05-09 15:40:07,726 - app - INFO - 登录请求 - 方法: POST, 内容类型: application/x-www-form-urlencoded
2025-05-09 15:40:07,730 - app - INFO - 请求头: {'Host': '127.0.0.1:5000', 'Connection': 'keep-alive', 'Content-Length': '135', 'Cache-Control': 'max-age=0', 'Sec-Ch-Ua': '"Chromium";v="136", "Microsoft Edge";v="136", "Not.A/Brand";v="99"', 'Sec-Ch-Ua-Mobile': '?0', 'Sec-Ch-Ua-Platform': '"Windows"', 'Origin': 'http://127.0.0.1:5000', 'Content-Type': 'application/x-www-form-urlencoded', 'Upgrade-Insecure-Requests': '1', 'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36 Edg/136.0.0.0', 'Accept': 'text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.7', 'Sec-Fetch-Site': 'same-origin', 'Sec-Fetch-Mode': 'navigate', 'Sec-Fetch-User': '?1', 'Sec-Fetch-Dest': 'document', 'Referer': 'http://127.0.0.1:5000/login', 'Accept-Encoding': 'gzip, deflate, br, zstd', 'Accept-Language': 'zh-CN,zh;q=0.9,en;q=0.8,en-GB;q=0.7,en-US;q=0.6', 'Cookie': 'user_roles=admin; access_token_cookie=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJmcmVzaCI6ZmFsc2UsImlhdCI6MTc0Njc3NjE1MiwianRpIjoiMTdkYTY5MGMtNGU4MC00Mzg3LTgyZTItYWY0ZjkxN2FmZjUyIiwidHlwZSI6ImFjY2VzcyIsInN1YiI6MSwibmJmIjoxNzQ2Nzc2MTUyLCJjc3JmIjoiSWpZMk5qRXpPV0V4WlRSbU9EaGtabVl6TURSbE1qUTJPVGN5T1RJMU9ETTRZalF6TVdWbFpEa2kuYUIyd1dBLlVDQW1uSFp4RTlHMUFtMDlaUHYzQmNkZjJFUSIsImV4cCI6MTc0Njc3OTc1MiwiYXVkIjoidGFza19tYW5hZ2VtZW50X3N5c3RlbSIsInVzZXJfY2xhaW1zIjp7InVzZXJuYW1lIjoiYWRtaW4iLCJyb2xlcyI6WyJhZG1pbiJdLCJwZXJtaXNzaW9ucyI6WyJtYW5hZ2VfdXNlcnMiLCJtYW5hZ2Vfcm9sZXMiLCJtYW5hZ2VfYWxsX3Byb2plY3RzIiwibWFuYWdlX3Byb2plY3QiLCJtYW5hZ2VfYWxsX3Rhc2tzIiwibWFuYWdlX3Rhc2siLCJ2aWV3X3Byb2plY3QiLCJ2aWV3X3Rhc2siLCJtYW5hZ2VfcmVzb3VyY2VzIiwibWFuYWdlX3Jpc2tzIiwidmlld19yZXBvcnRzIiwiY3JlYXRlX3Rhc2siLCJhc3NpZ25fdGFzayIsImNoYW5nZV9wcm9qZWN0X3N0YXR1cyIsImNoYW5nZV90YXNrX3N0YXR1cyIsImNyZWF0ZV9wcm9qZWN0Il0sImlzX2FjdGl2ZSI6dHJ1ZX0sInJvbGVzIjpbImFkbWluIl19.Bm-GdOlPlX_9eu6ykle_X5tRlQjqVl9SSKaVriN7S-k; csrf_access_token=IjY2NjEzOWExZTRmODhkZmYzMDRlMjQ2OTcyOTI1ODM4YjQzMWVlZDki.aB2wWA.UCAmnHZxE9G1Am09ZPv3Bcdf2EQ; csrf_token=IjY2NjEzOWExZTRmODhkZmYzMDRlMjQ2OTcyOTI1ODM4YjQzMWVlZDki.aB2wWA.UCAmnHZxE9G1Am09ZPv3Bcdf2EQ; session=eyJjc3JmX3Rva2VuIjoiNjY2MTM5YTFlNGY4OGRmZjMwNGUyNDY5NzI5MjU4MzhiNDMxZWVkOSJ9.aB2xVg.g4cD-y7xJY34ACroQkM1bEJbRr4'}
2025-05-09 15:40:07,733 - app - INFO - 处理表单格式的登录请求
2025-05-09 15:40:07,738 - app - INFO - 表单数据: username=admin, password=********
2025-05-09 15:40:07,745 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-05-09 15:40:07,753 - sqlalchemy.engine.Engine - INFO - SELECT users.id AS users_id, users.username AS users_username, users.email AS users_email, users.name AS users_name, users.password_hash AS users_password_hash, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.last_login AS users_last_login 
FROM users 
WHERE users.username = ?
 LIMIT ? OFFSET ?
2025-05-09 15:40:07,761 - sqlalchemy.engine.Engine - INFO - [cached since 277.4s ago] ('admin', 1, 0)
2025-05-09 15:40:08,264 - app - INFO - 已生成CSRF令牌: IjY2NjEzOW...
2025-05-09 15:40:08,279 - sqlalchemy.engine.Engine - INFO - SELECT roles.id AS roles_id, roles.name AS roles_name, roles.description AS roles_description, roles.created_at AS roles_created_at 
FROM roles, user_roles 
WHERE ? = user_roles.user_id AND roles.id = user_roles.role_id
2025-05-09 15:40:08,315 - sqlalchemy.engine.Engine - INFO - [cached since 261.3s ago] (1,)
2025-05-09 15:40:08,337 - app - INFO - 用户 admin 的角色: ['admin']
2025-05-09 15:40:08,353 - app.utils.jwt_callbacks - INFO - Adding additional claims for user 1
2025-05-09 15:40:08,374 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions, role_permissions 
WHERE ? = role_permissions.role_id AND permissions.id = role_permissions.permission_id
2025-05-09 15:40:08,394 - sqlalchemy.engine.Engine - INFO - [cached since 278.1s ago] (1,)
2025-05-09 15:40:08,408 - app.utils.jwt_callbacks - INFO - Added claims for user 1: {'aud': 'task_management_system', 'user_claims': {'username': 'admin', 'roles': ['admin'], 'permissions': ['manage_users', 'manage_roles', 'manage_all_projects', 'manage_project', 'manage_all_tasks', 'manage_task', 'view_project', 'view_task', 'manage_resources', 'manage_risks', 'view_reports', 'create_task', 'assign_task', 'change_project_status', 'change_task_status', 'create_project'], 'is_active': True}}
2025-05-09 15:40:08,422 - app.utils.jwt_callbacks - INFO - Adding additional claims for user 1
2025-05-09 15:40:08,440 - app.utils.jwt_callbacks - INFO - Added claims for user 1: {'aud': 'task_management_system', 'user_claims': {'username': 'admin', 'roles': ['admin'], 'permissions': ['manage_users', 'manage_roles', 'manage_all_projects', 'manage_project', 'manage_all_tasks', 'manage_task', 'view_project', 'view_task', 'manage_resources', 'manage_risks', 'view_reports', 'create_task', 'assign_task', 'change_project_status', 'change_task_status', 'create_project'], 'is_active': True}}
2025-05-09 15:40:08,470 - sqlalchemy.engine.Engine - INFO - UPDATE users SET updated_at=?, last_login=? WHERE users.id = ?
2025-05-09 15:40:08,516 - sqlalchemy.engine.Engine - INFO - [cached since 256.3s ago] ('2025-05-09 07:40:08.470203', '2025-05-09 07:40:08.466437', 1)
2025-05-09 15:40:08,555 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-05-09 15:40:08,576 - app - INFO - 用户登录成功: admin
2025-05-09 15:40:08,591 - werkzeug - INFO - 127.0.0.1 - - [09/May/2025 15:40:08] "[32mPOST /login HTTP/1.1[0m" 302 -
2025-05-09 15:40:08,607 - app.utils.jwt_callbacks - INFO - Checking if token 0a8cc478-b5e2-45ac-843f-994695ded95c is in blocklist
2025-05-09 15:40:08,613 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-05-09 15:40:08,627 - sqlalchemy.engine.Engine - INFO - SELECT token_blacklist.id AS token_blacklist_id, token_blacklist.jti AS token_blacklist_jti, token_blacklist.token_type AS token_blacklist_token_type, token_blacklist.user_id AS token_blacklist_user_id, token_blacklist.revoked_at AS token_blacklist_revoked_at, token_blacklist.expires_at AS token_blacklist_expires_at 
FROM token_blacklist 
WHERE token_blacklist.jti = ?
 LIMIT ? OFFSET ?
2025-05-09 15:40:08,644 - sqlalchemy.engine.Engine - INFO - [cached since 261.6s ago] ('0a8cc478-b5e2-45ac-843f-994695ded95c', 1, 0)
2025-05-09 15:40:08,659 - app.utils.jwt_callbacks - INFO - Token 0a8cc478-b5e2-45ac-843f-994695ded95c is valid
2025-05-09 15:40:08,662 - app.utils.jwt_callbacks - INFO - Verifying token
2025-05-09 15:40:08,698 - app.utils.jwt_callbacks - INFO - JWT Header: {'alg': 'HS256', 'typ': 'JWT'}
2025-05-09 15:40:08,746 - app.utils.jwt_callbacks - INFO - JWT Data: {'fresh': False, 'iat': 1746776408, 'jti': '0a8cc478-b5e2-45ac-843f-994695ded95c', 'type': 'access', 'sub': 1, 'nbf': 1746776408, 'csrf': 'IjY2NjEzOWExZTRmODhkZmYzMDRlMjQ2OTcyOTI1ODM4YjQzMWVlZDki.aB2xWA.ituAojhg-QaTe_wrpZAXwXXDyq0', 'exp': 1746780008, 'aud': 'task_management_system', 'user_claims': {'username': 'admin', 'roles': ['admin'], 'permissions': ['manage_users', 'manage_roles', 'manage_all_projects', 'manage_project', 'manage_all_tasks', 'manage_task', 'view_project', 'view_task', 'manage_resources', 'manage_risks', 'view_reports', 'create_task', 'assign_task', 'change_project_status', 'change_task_status', 'create_project'], 'is_active': True}, 'roles': ['admin']}
2025-05-09 15:40:08,779 - app.utils.jwt_callbacks - INFO - Token time difference: -0.779988 seconds
2025-05-09 15:40:08,813 - app.utils.jwt_callbacks - INFO - Token verification successful
2025-05-09 15:40:08,842 - app.utils.jwt_callbacks - INFO - Looking up user with identity: 1
2025-05-09 15:40:08,890 - sqlalchemy.engine.Engine - INFO - SELECT users.id AS users_id, users.username AS users_username, users.email AS users_email, users.name AS users_name, users.password_hash AS users_password_hash, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.last_login AS users_last_login 
FROM users 
WHERE users.id = ?
2025-05-09 15:40:08,939 - sqlalchemy.engine.Engine - INFO - [cached since 261.9s ago] (1,)
2025-05-09 15:40:08,950 - app.utils.jwt_callbacks - INFO - User found: admin
2025-05-09 15:40:08,958 - sqlalchemy.engine.Engine - INFO - SELECT roles.id AS roles_id, roles.name AS roles_name, roles.description AS roles_description, roles.created_at AS roles_created_at 
FROM roles, user_roles 
WHERE ? = user_roles.user_id AND roles.id = user_roles.role_id
2025-05-09 15:40:08,964 - sqlalchemy.engine.Engine - INFO - [cached since 261.9s ago] (1,)
2025-05-09 15:40:08,972 - app.utils.jwt_callbacks - INFO - User roles: ['admin']
2025-05-09 15:40:08,995 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions, role_permissions 
WHERE ? = role_permissions.role_id AND permissions.id = role_permissions.permission_id
2025-05-09 15:40:09,020 - sqlalchemy.engine.Engine - INFO - [cached since 278.7s ago] (1,)
2025-05-09 15:40:09,030 - app.utils.jwt_callbacks - INFO - User permissions: ['manage_users', 'manage_roles', 'manage_all_projects', 'manage_project', 'manage_all_tasks', 'manage_task', 'view_project', 'view_task', 'manage_resources', 'manage_risks', 'view_reports', 'create_task', 'assign_task', 'change_project_status', 'change_task_status', 'create_project']
2025-05-09 15:40:09,037 - app.utils.jwt_callbacks - INFO - Checking if token 0a8cc478-b5e2-45ac-843f-994695ded95c is in blocklist
2025-05-09 15:40:09,041 - sqlalchemy.engine.Engine - INFO - SELECT token_blacklist.id AS token_blacklist_id, token_blacklist.jti AS token_blacklist_jti, token_blacklist.token_type AS token_blacklist_token_type, token_blacklist.user_id AS token_blacklist_user_id, token_blacklist.revoked_at AS token_blacklist_revoked_at, token_blacklist.expires_at AS token_blacklist_expires_at 
FROM token_blacklist 
WHERE token_blacklist.jti = ?
 LIMIT ? OFFSET ?
2025-05-09 15:40:09,050 - sqlalchemy.engine.Engine - INFO - [cached since 262s ago] ('0a8cc478-b5e2-45ac-843f-994695ded95c', 1, 0)
2025-05-09 15:40:09,055 - app.utils.jwt_callbacks - INFO - Token 0a8cc478-b5e2-45ac-843f-994695ded95c is valid
2025-05-09 15:40:09,063 - app.utils.jwt_callbacks - INFO - Verifying token
2025-05-09 15:40:09,068 - app.utils.jwt_callbacks - INFO - JWT Header: {'alg': 'HS256', 'typ': 'JWT'}
2025-05-09 15:40:09,072 - app.utils.jwt_callbacks - INFO - JWT Data: {'fresh': False, 'iat': 1746776408, 'jti': '0a8cc478-b5e2-45ac-843f-994695ded95c', 'type': 'access', 'sub': 1, 'nbf': 1746776408, 'csrf': 'IjY2NjEzOWExZTRmODhkZmYzMDRlMjQ2OTcyOTI1ODM4YjQzMWVlZDki.aB2xWA.ituAojhg-QaTe_wrpZAXwXXDyq0', 'exp': 1746780008, 'aud': 'task_management_system', 'user_claims': {'username': 'admin', 'roles': ['admin'], 'permissions': ['manage_users', 'manage_roles', 'manage_all_projects', 'manage_project', 'manage_all_tasks', 'manage_task', 'view_project', 'view_task', 'manage_resources', 'manage_risks', 'view_reports', 'create_task', 'assign_task', 'change_project_status', 'change_task_status', 'create_project'], 'is_active': True}, 'roles': ['admin']}
2025-05-09 15:40:09,079 - app.utils.jwt_callbacks - INFO - Token time difference: -1.079802 seconds
2025-05-09 15:40:09,085 - app.utils.jwt_callbacks - INFO - Token verification successful
2025-05-09 15:40:09,089 - app.utils.jwt_callbacks - INFO - Looking up user with identity: 1
2025-05-09 15:40:09,096 - app.utils.jwt_callbacks - INFO - User found: admin
2025-05-09 15:40:09,103 - app.utils.jwt_callbacks - INFO - User roles: ['admin']
2025-05-09 15:40:09,107 - app.utils.jwt_callbacks - INFO - User permissions: ['manage_users', 'manage_roles', 'manage_all_projects', 'manage_project', 'manage_all_tasks', 'manage_task', 'view_project', 'view_task', 'manage_resources', 'manage_risks', 'view_reports', 'create_task', 'assign_task', 'change_project_status', 'change_task_status', 'create_project']
2025-05-09 15:40:09,115 - app - INFO - Dashboard access with user ID: 1
2025-05-09 15:40:09,122 - app - INFO - Token found in: cookies
2025-05-09 15:40:09,129 - app - INFO - Dashboard context user_data: {'id': 1, 'username': 'admin', 'email': 'admin@example.com', 'name': '管理员', 'is_active': True, 'created_at': '2025-05-07T01:07:21.773527', 'last_login': '2025-05-09T07:40:08.466437', 'roles': ['admin'], 'permissions': ['assign_task', 'manage_roles', 'manage_users', 'view_project', 'manage_risks', 'view_task', 'change_project_status', 'manage_project', 'manage_all_tasks', 'create_project', 'change_task_status', 'manage_all_projects', 'manage_resources', 'view_reports', 'manage_task', 'create_task']}
2025-05-09 15:40:09,141 - app - INFO - 用户 admin 的角色: ['admin']
2025-05-09 15:40:09,148 - app - INFO - 用户 admin 的权限: ['assign_task', 'manage_roles', 'manage_users', 'view_project', 'manage_risks', 'view_task', 'change_project_status', 'manage_project', 'manage_all_tasks', 'create_project', 'change_task_status', 'manage_all_projects', 'manage_resources', 'view_reports', 'manage_task', 'create_task']
2025-05-09 15:40:09,157 - app - INFO - 用户 admin - 是否管理员: True, 是否项目经理: False
2025-05-09 15:40:09,166 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-05-09 15:40:09,174 - werkzeug - INFO - 127.0.0.1 - - [09/May/2025 15:40:09] "GET /main/dashboard HTTP/1.1" 200 -
2025-05-09 15:40:09,204 - app.utils.jwt_callbacks - INFO - Checking if token 0a8cc478-b5e2-45ac-843f-994695ded95c is in blocklist
2025-05-09 15:40:09,210 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-05-09 15:40:09,216 - werkzeug - INFO - 127.0.0.1 - - [09/May/2025 15:40:09] "[36mGET /static/css/bootstrap.min.css HTTP/1.1[0m" 304 -
2025-05-09 15:40:09,221 - werkzeug - INFO - 127.0.0.1 - - [09/May/2025 15:40:09] "[36mGET /static/css/bootstrap-icons.css HTTP/1.1[0m" 304 -
2025-05-09 15:40:09,223 - werkzeug - INFO - 127.0.0.1 - - [09/May/2025 15:40:09] "[36mGET /static/css/style.css HTTP/1.1[0m" 304 -
2025-05-09 15:40:09,226 - werkzeug - INFO - 127.0.0.1 - - [09/May/2025 15:40:09] "[36mGET /static/js/jquery.min.js HTTP/1.1[0m" 304 -
2025-05-09 15:40:09,229 - werkzeug - INFO - 127.0.0.1 - - [09/May/2025 15:40:09] "[36mGET /static/js/bootstrap.bundle.min.js HTTP/1.1[0m" 304 -
2025-05-09 15:40:09,238 - sqlalchemy.engine.Engine - INFO - SELECT token_blacklist.id AS token_blacklist_id, token_blacklist.jti AS token_blacklist_jti, token_blacklist.token_type AS token_blacklist_token_type, token_blacklist.user_id AS token_blacklist_user_id, token_blacklist.revoked_at AS token_blacklist_revoked_at, token_blacklist.expires_at AS token_blacklist_expires_at 
FROM token_blacklist 
WHERE token_blacklist.jti = ?
 LIMIT ? OFFSET ?
2025-05-09 15:40:09,251 - werkzeug - INFO - 127.0.0.1 - - [09/May/2025 15:40:09] "[36mGET /static/js/auth.js HTTP/1.1[0m" 304 -
2025-05-09 15:40:09,258 - werkzeug - INFO - 127.0.0.1 - - [09/May/2025 15:40:09] "[36mGET /static/js/fix-modals.js HTTP/1.1[0m" 304 -
2025-05-09 15:40:09,263 - werkzeug - INFO - 127.0.0.1 - - [09/May/2025 15:40:09] "[36mGET /static/js/csrf.js HTTP/1.1[0m" 304 -
2025-05-09 15:40:09,278 - sqlalchemy.engine.Engine - INFO - [cached since 262.3s ago] ('0a8cc478-b5e2-45ac-843f-994695ded95c', 1, 0)
2025-05-09 15:40:09,283 - werkzeug - INFO - 127.0.0.1 - - [09/May/2025 15:40:09] "[36mGET /static/css/fonts/bootstrap-icons.woff2 HTTP/1.1[0m" 304 -
2025-05-09 15:40:09,290 - werkzeug - INFO - 127.0.0.1 - - [09/May/2025 15:40:09] "[36mGET /static/css/bootstrap.min.css.map HTTP/1.1[0m" 304 -
2025-05-09 15:40:09,303 - app.utils.jwt_callbacks - INFO - Token 0a8cc478-b5e2-45ac-843f-994695ded95c is valid
2025-05-09 15:40:09,316 - app.utils.jwt_callbacks - INFO - Verifying token
2025-05-09 15:40:09,322 - app.utils.jwt_callbacks - INFO - JWT Header: {'alg': 'HS256', 'typ': 'JWT'}
2025-05-09 15:40:09,326 - app.utils.jwt_callbacks - INFO - JWT Data: {'fresh': False, 'iat': 1746776408, 'jti': '0a8cc478-b5e2-45ac-843f-994695ded95c', 'type': 'access', 'sub': 1, 'nbf': 1746776408, 'csrf': 'IjY2NjEzOWExZTRmODhkZmYzMDRlMjQ2OTcyOTI1ODM4YjQzMWVlZDki.aB2xWA.ituAojhg-QaTe_wrpZAXwXXDyq0', 'exp': 1746780008, 'aud': 'task_management_system', 'user_claims': {'username': 'admin', 'roles': ['admin'], 'permissions': ['manage_users', 'manage_roles', 'manage_all_projects', 'manage_project', 'manage_all_tasks', 'manage_task', 'view_project', 'view_task', 'manage_resources', 'manage_risks', 'view_reports', 'create_task', 'assign_task', 'change_project_status', 'change_task_status', 'create_project'], 'is_active': True}, 'roles': ['admin']}
2025-05-09 15:40:09,329 - werkzeug - INFO - 127.0.0.1 - - [09/May/2025 15:40:09] "[36mGET /static/favicon.ico HTTP/1.1[0m" 304 -
2025-05-09 15:40:09,332 - app.utils.jwt_callbacks - INFO - Token time difference: -1.332764 seconds
2025-05-09 15:40:09,341 - app.utils.jwt_callbacks - INFO - Token verification successful
2025-05-09 15:40:09,347 - app.utils.jwt_callbacks - INFO - Looking up user with identity: 1
2025-05-09 15:40:09,353 - sqlalchemy.engine.Engine - INFO - SELECT users.id AS users_id, users.username AS users_username, users.email AS users_email, users.name AS users_name, users.password_hash AS users_password_hash, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.last_login AS users_last_login 
FROM users 
WHERE users.id = ?
2025-05-09 15:40:09,362 - sqlalchemy.engine.Engine - INFO - [cached since 262.3s ago] (1,)
2025-05-09 15:40:09,370 - app.utils.jwt_callbacks - INFO - User found: admin
2025-05-09 15:40:09,379 - sqlalchemy.engine.Engine - INFO - SELECT roles.id AS roles_id, roles.name AS roles_name, roles.description AS roles_description, roles.created_at AS roles_created_at 
FROM roles, user_roles 
WHERE ? = user_roles.user_id AND roles.id = user_roles.role_id
2025-05-09 15:40:09,385 - sqlalchemy.engine.Engine - INFO - [cached since 262.3s ago] (1,)
2025-05-09 15:40:09,395 - app.utils.jwt_callbacks - INFO - User roles: ['admin']
2025-05-09 15:40:09,400 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions, role_permissions 
WHERE ? = role_permissions.role_id AND permissions.id = role_permissions.permission_id
2025-05-09 15:40:09,409 - sqlalchemy.engine.Engine - INFO - [cached since 279.1s ago] (1,)
2025-05-09 15:40:09,417 - app.utils.jwt_callbacks - INFO - User permissions: ['manage_users', 'manage_roles', 'manage_all_projects', 'manage_project', 'manage_all_tasks', 'manage_task', 'view_project', 'view_task', 'manage_resources', 'manage_risks', 'view_reports', 'create_task', 'assign_task', 'change_project_status', 'change_task_status', 'create_project']
2025-05-09 15:40:09,425 - app.utils.jwt_callbacks - INFO - Checking if token 0a8cc478-b5e2-45ac-843f-994695ded95c is in blocklist
2025-05-09 15:40:09,433 - sqlalchemy.engine.Engine - INFO - SELECT token_blacklist.id AS token_blacklist_id, token_blacklist.jti AS token_blacklist_jti, token_blacklist.token_type AS token_blacklist_token_type, token_blacklist.user_id AS token_blacklist_user_id, token_blacklist.revoked_at AS token_blacklist_revoked_at, token_blacklist.expires_at AS token_blacklist_expires_at 
FROM token_blacklist 
WHERE token_blacklist.jti = ?
 LIMIT ? OFFSET ?
2025-05-09 15:40:09,444 - sqlalchemy.engine.Engine - INFO - [cached since 262.4s ago] ('0a8cc478-b5e2-45ac-843f-994695ded95c', 1, 0)
2025-05-09 15:40:09,450 - app.utils.jwt_callbacks - INFO - Token 0a8cc478-b5e2-45ac-843f-994695ded95c is valid
2025-05-09 15:40:09,458 - app.utils.jwt_callbacks - INFO - Verifying token
2025-05-09 15:40:09,464 - app.utils.jwt_callbacks - INFO - JWT Header: {'alg': 'HS256', 'typ': 'JWT'}
2025-05-09 15:40:09,469 - app.utils.jwt_callbacks - INFO - JWT Data: {'fresh': False, 'iat': 1746776408, 'jti': '0a8cc478-b5e2-45ac-843f-994695ded95c', 'type': 'access', 'sub': 1, 'nbf': 1746776408, 'csrf': 'IjY2NjEzOWExZTRmODhkZmYzMDRlMjQ2OTcyOTI1ODM4YjQzMWVlZDki.aB2xWA.ituAojhg-QaTe_wrpZAXwXXDyq0', 'exp': 1746780008, 'aud': 'task_management_system', 'user_claims': {'username': 'admin', 'roles': ['admin'], 'permissions': ['manage_users', 'manage_roles', 'manage_all_projects', 'manage_project', 'manage_all_tasks', 'manage_task', 'view_project', 'view_task', 'manage_resources', 'manage_risks', 'view_reports', 'create_task', 'assign_task', 'change_project_status', 'change_task_status', 'create_project'], 'is_active': True}, 'roles': ['admin']}
2025-05-09 15:40:09,477 - app.utils.jwt_callbacks - INFO - Token time difference: -1.477714 seconds
2025-05-09 15:40:09,485 - app.utils.jwt_callbacks - INFO - Token verification successful
2025-05-09 15:40:09,492 - app.utils.jwt_callbacks - INFO - Looking up user with identity: 1
2025-05-09 15:40:09,499 - app.utils.jwt_callbacks - INFO - User found: admin
2025-05-09 15:40:09,507 - app.utils.jwt_callbacks - INFO - User roles: ['admin']
2025-05-09 15:40:09,514 - app.utils.jwt_callbacks - INFO - User permissions: ['manage_users', 'manage_roles', 'manage_all_projects', 'manage_project', 'manage_all_tasks', 'manage_task', 'view_project', 'view_task', 'manage_resources', 'manage_risks', 'view_reports', 'create_task', 'assign_task', 'change_project_status', 'change_task_status', 'create_project']
2025-05-09 15:40:09,523 - app - INFO - 用户已认证，重定向到仪表板页面: /.well-known/appspecific/com.chrome.devtools.json
2025-05-09 15:40:09,529 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-05-09 15:40:09,541 - werkzeug - INFO - 127.0.0.1 - - [09/May/2025 15:40:09] "[32mGET /.well-known/appspecific/com.chrome.devtools.json HTTP/1.1[0m" 302 -
2025-05-09 15:40:09,549 - app.utils.jwt_callbacks - INFO - Checking if token 0a8cc478-b5e2-45ac-843f-994695ded95c is in blocklist
2025-05-09 15:40:09,556 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-05-09 15:40:09,566 - sqlalchemy.engine.Engine - INFO - SELECT token_blacklist.id AS token_blacklist_id, token_blacklist.jti AS token_blacklist_jti, token_blacklist.token_type AS token_blacklist_token_type, token_blacklist.user_id AS token_blacklist_user_id, token_blacklist.revoked_at AS token_blacklist_revoked_at, token_blacklist.expires_at AS token_blacklist_expires_at 
FROM token_blacklist 
WHERE token_blacklist.jti = ?
 LIMIT ? OFFSET ?
2025-05-09 15:40:09,578 - sqlalchemy.engine.Engine - INFO - [cached since 262.6s ago] ('0a8cc478-b5e2-45ac-843f-994695ded95c', 1, 0)
2025-05-09 15:40:09,589 - app.utils.jwt_callbacks - INFO - Token 0a8cc478-b5e2-45ac-843f-994695ded95c is valid
2025-05-09 15:40:09,597 - app.utils.jwt_callbacks - INFO - Verifying token
2025-05-09 15:40:09,604 - app.utils.jwt_callbacks - INFO - JWT Header: {'alg': 'HS256', 'typ': 'JWT'}
2025-05-09 15:40:09,613 - app.utils.jwt_callbacks - INFO - JWT Data: {'fresh': False, 'iat': 1746776408, 'jti': '0a8cc478-b5e2-45ac-843f-994695ded95c', 'type': 'access', 'sub': 1, 'nbf': 1746776408, 'csrf': 'IjY2NjEzOWExZTRmODhkZmYzMDRlMjQ2OTcyOTI1ODM4YjQzMWVlZDki.aB2xWA.ituAojhg-QaTe_wrpZAXwXXDyq0', 'exp': 1746780008, 'aud': 'task_management_system', 'user_claims': {'username': 'admin', 'roles': ['admin'], 'permissions': ['manage_users', 'manage_roles', 'manage_all_projects', 'manage_project', 'manage_all_tasks', 'manage_task', 'view_project', 'view_task', 'manage_resources', 'manage_risks', 'view_reports', 'create_task', 'assign_task', 'change_project_status', 'change_task_status', 'create_project'], 'is_active': True}, 'roles': ['admin']}
2025-05-09 15:40:09,621 - app.utils.jwt_callbacks - INFO - Token time difference: -1.621565 seconds
2025-05-09 15:40:09,631 - app.utils.jwt_callbacks - INFO - Token verification successful
2025-05-09 15:40:09,640 - app.utils.jwt_callbacks - INFO - Looking up user with identity: 1
2025-05-09 15:40:09,649 - sqlalchemy.engine.Engine - INFO - SELECT users.id AS users_id, users.username AS users_username, users.email AS users_email, users.name AS users_name, users.password_hash AS users_password_hash, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.last_login AS users_last_login 
FROM users 
WHERE users.id = ?
2025-05-09 15:40:09,661 - sqlalchemy.engine.Engine - INFO - [cached since 262.6s ago] (1,)
2025-05-09 15:40:09,673 - app.utils.jwt_callbacks - INFO - User found: admin
2025-05-09 15:40:09,684 - sqlalchemy.engine.Engine - INFO - SELECT roles.id AS roles_id, roles.name AS roles_name, roles.description AS roles_description, roles.created_at AS roles_created_at 
FROM roles, user_roles 
WHERE ? = user_roles.user_id AND roles.id = user_roles.role_id
2025-05-09 15:40:09,696 - sqlalchemy.engine.Engine - INFO - [cached since 262.7s ago] (1,)
2025-05-09 15:40:09,708 - app.utils.jwt_callbacks - INFO - User roles: ['admin']
2025-05-09 15:40:09,715 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions, role_permissions 
WHERE ? = role_permissions.role_id AND permissions.id = role_permissions.permission_id
2025-05-09 15:40:09,727 - sqlalchemy.engine.Engine - INFO - [cached since 279.4s ago] (1,)
2025-05-09 15:40:09,736 - app.utils.jwt_callbacks - INFO - User permissions: ['manage_users', 'manage_roles', 'manage_all_projects', 'manage_project', 'manage_all_tasks', 'manage_task', 'view_project', 'view_task', 'manage_resources', 'manage_risks', 'view_reports', 'create_task', 'assign_task', 'change_project_status', 'change_task_status', 'create_project']
2025-05-09 15:40:09,745 - app.utils.jwt_callbacks - INFO - Checking if token 0a8cc478-b5e2-45ac-843f-994695ded95c is in blocklist
2025-05-09 15:40:09,753 - sqlalchemy.engine.Engine - INFO - SELECT token_blacklist.id AS token_blacklist_id, token_blacklist.jti AS token_blacklist_jti, token_blacklist.token_type AS token_blacklist_token_type, token_blacklist.user_id AS token_blacklist_user_id, token_blacklist.revoked_at AS token_blacklist_revoked_at, token_blacklist.expires_at AS token_blacklist_expires_at 
FROM token_blacklist 
WHERE token_blacklist.jti = ?
 LIMIT ? OFFSET ?
2025-05-09 15:40:09,762 - sqlalchemy.engine.Engine - INFO - [cached since 262.8s ago] ('0a8cc478-b5e2-45ac-843f-994695ded95c', 1, 0)
2025-05-09 15:40:09,775 - app.utils.jwt_callbacks - INFO - Token 0a8cc478-b5e2-45ac-843f-994695ded95c is valid
2025-05-09 15:40:09,785 - app.utils.jwt_callbacks - INFO - Verifying token
2025-05-09 15:40:09,792 - app.utils.jwt_callbacks - INFO - JWT Header: {'alg': 'HS256', 'typ': 'JWT'}
2025-05-09 15:40:09,800 - app.utils.jwt_callbacks - INFO - JWT Data: {'fresh': False, 'iat': 1746776408, 'jti': '0a8cc478-b5e2-45ac-843f-994695ded95c', 'type': 'access', 'sub': 1, 'nbf': 1746776408, 'csrf': 'IjY2NjEzOWExZTRmODhkZmYzMDRlMjQ2OTcyOTI1ODM4YjQzMWVlZDki.aB2xWA.ituAojhg-QaTe_wrpZAXwXXDyq0', 'exp': 1746780008, 'aud': 'task_management_system', 'user_claims': {'username': 'admin', 'roles': ['admin'], 'permissions': ['manage_users', 'manage_roles', 'manage_all_projects', 'manage_project', 'manage_all_tasks', 'manage_task', 'view_project', 'view_task', 'manage_resources', 'manage_risks', 'view_reports', 'create_task', 'assign_task', 'change_project_status', 'change_task_status', 'create_project'], 'is_active': True}, 'roles': ['admin']}
2025-05-09 15:40:09,808 - app.utils.jwt_callbacks - INFO - Token time difference: -1.808203 seconds
2025-05-09 15:40:09,816 - app.utils.jwt_callbacks - INFO - Token verification successful
2025-05-09 15:40:09,825 - app.utils.jwt_callbacks - INFO - Looking up user with identity: 1
2025-05-09 15:40:09,829 - app.utils.jwt_callbacks - INFO - User found: admin
2025-05-09 15:40:09,835 - app.utils.jwt_callbacks - INFO - User roles: ['admin']
2025-05-09 15:40:09,842 - app.utils.jwt_callbacks - INFO - User permissions: ['manage_users', 'manage_roles', 'manage_all_projects', 'manage_project', 'manage_all_tasks', 'manage_task', 'view_project', 'view_task', 'manage_resources', 'manage_risks', 'view_reports', 'create_task', 'assign_task', 'change_project_status', 'change_task_status', 'create_project']
2025-05-09 15:40:09,849 - app - INFO - Dashboard access with user ID: 1
2025-05-09 15:40:09,856 - app - INFO - Token found in: cookies
2025-05-09 15:40:09,864 - app - INFO - Dashboard context user_data: {'id': 1, 'username': 'admin', 'email': 'admin@example.com', 'name': '管理员', 'is_active': True, 'created_at': '2025-05-07T01:07:21.773527', 'last_login': '2025-05-09T07:40:08.466437', 'roles': ['admin'], 'permissions': ['assign_task', 'manage_roles', 'manage_users', 'view_project', 'manage_risks', 'view_task', 'change_project_status', 'manage_project', 'manage_all_tasks', 'create_project', 'change_task_status', 'manage_all_projects', 'manage_resources', 'view_reports', 'manage_task', 'create_task']}
2025-05-09 15:40:09,871 - app - INFO - 用户 admin 的角色: ['admin']
2025-05-09 15:40:09,877 - app - INFO - 用户 admin 的权限: ['assign_task', 'manage_roles', 'manage_users', 'view_project', 'manage_risks', 'view_task', 'change_project_status', 'manage_project', 'manage_all_tasks', 'create_project', 'change_task_status', 'manage_all_projects', 'manage_resources', 'view_reports', 'manage_task', 'create_task']
2025-05-09 15:40:09,884 - app - INFO - 用户 admin - 是否管理员: True, 是否项目经理: False
2025-05-09 15:40:09,893 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-05-09 15:40:09,900 - werkzeug - INFO - 127.0.0.1 - - [09/May/2025 15:40:09] "GET /main/dashboard HTTP/1.1" 200 -
2025-05-09 15:40:10,259 - app - WARNING - 绕过JWT验证: /main/projects
2025-05-09 15:40:10,264 - app.utils.jwt_callbacks - INFO - Checking if token 0a8cc478-b5e2-45ac-843f-994695ded95c is in blocklist
2025-05-09 15:40:10,271 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-05-09 15:40:10,279 - sqlalchemy.engine.Engine - INFO - SELECT token_blacklist.id AS token_blacklist_id, token_blacklist.jti AS token_blacklist_jti, token_blacklist.token_type AS token_blacklist_token_type, token_blacklist.user_id AS token_blacklist_user_id, token_blacklist.revoked_at AS token_blacklist_revoked_at, token_blacklist.expires_at AS token_blacklist_expires_at 
FROM token_blacklist 
WHERE token_blacklist.jti = ?
 LIMIT ? OFFSET ?
2025-05-09 15:40:10,287 - sqlalchemy.engine.Engine - INFO - [cached since 263.3s ago] ('0a8cc478-b5e2-45ac-843f-994695ded95c', 1, 0)
2025-05-09 15:40:10,299 - app.utils.jwt_callbacks - INFO - Token 0a8cc478-b5e2-45ac-843f-994695ded95c is valid
2025-05-09 15:40:10,305 - app.utils.jwt_callbacks - INFO - Verifying token
2025-05-09 15:40:10,312 - app.utils.jwt_callbacks - INFO - JWT Header: {'alg': 'HS256', 'typ': 'JWT'}
2025-05-09 15:40:10,318 - app.utils.jwt_callbacks - INFO - JWT Data: {'fresh': False, 'iat': 1746776408, 'jti': '0a8cc478-b5e2-45ac-843f-994695ded95c', 'type': 'access', 'sub': 1, 'nbf': 1746776408, 'csrf': 'IjY2NjEzOWExZTRmODhkZmYzMDRlMjQ2OTcyOTI1ODM4YjQzMWVlZDki.aB2xWA.ituAojhg-QaTe_wrpZAXwXXDyq0', 'exp': 1746780008, 'aud': 'task_management_system', 'user_claims': {'username': 'admin', 'roles': ['admin'], 'permissions': ['manage_users', 'manage_roles', 'manage_all_projects', 'manage_project', 'manage_all_tasks', 'manage_task', 'view_project', 'view_task', 'manage_resources', 'manage_risks', 'view_reports', 'create_task', 'assign_task', 'change_project_status', 'change_task_status', 'create_project'], 'is_active': True}, 'roles': ['admin']}
2025-05-09 15:40:10,324 - app.utils.jwt_callbacks - INFO - Token time difference: -2.324979 seconds
2025-05-09 15:40:10,334 - app.utils.jwt_callbacks - INFO - Token verification successful
2025-05-09 15:40:10,338 - app.utils.jwt_callbacks - INFO - Looking up user with identity: 1
2025-05-09 15:40:10,346 - sqlalchemy.engine.Engine - INFO - SELECT users.id AS users_id, users.username AS users_username, users.email AS users_email, users.name AS users_name, users.password_hash AS users_password_hash, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.last_login AS users_last_login 
FROM users 
WHERE users.id = ?
2025-05-09 15:40:10,354 - sqlalchemy.engine.Engine - INFO - [cached since 263.3s ago] (1,)
2025-05-09 15:40:10,365 - app.utils.jwt_callbacks - INFO - User found: admin
2025-05-09 15:40:10,372 - sqlalchemy.engine.Engine - INFO - SELECT roles.id AS roles_id, roles.name AS roles_name, roles.description AS roles_description, roles.created_at AS roles_created_at 
FROM roles, user_roles 
WHERE ? = user_roles.user_id AND roles.id = user_roles.role_id
2025-05-09 15:40:10,382 - sqlalchemy.engine.Engine - INFO - [cached since 263.3s ago] (1,)
2025-05-09 15:40:10,389 - app.utils.jwt_callbacks - INFO - User roles: ['admin']
2025-05-09 15:40:10,397 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions, role_permissions 
WHERE ? = role_permissions.role_id AND permissions.id = role_permissions.permission_id
2025-05-09 15:40:10,404 - sqlalchemy.engine.Engine - INFO - [cached since 280.1s ago] (1,)
2025-05-09 15:40:10,415 - app.utils.jwt_callbacks - INFO - User permissions: ['manage_users', 'manage_roles', 'manage_all_projects', 'manage_project', 'manage_all_tasks', 'manage_task', 'view_project', 'view_task', 'manage_resources', 'manage_risks', 'view_reports', 'create_task', 'assign_task', 'change_project_status', 'change_task_status', 'create_project']
2025-05-09 15:40:10,420 - app.routes.main - INFO - JWT bypass enabled for projects - Using test user
2025-05-09 15:40:10,427 - sqlalchemy.engine.Engine - INFO - SELECT projects.id AS projects_id, projects.name AS projects_name, projects.description AS projects_description, projects.status AS projects_status, projects.start_date AS projects_start_date, projects.end_date AS projects_end_date, projects.progress AS projects_progress, projects.created_at AS projects_created_at, projects.updated_at AS projects_updated_at, projects.manager_id AS projects_manager_id, projects.owner_id AS projects_owner_id 
FROM projects
2025-05-09 15:40:10,433 - sqlalchemy.engine.Engine - INFO - [cached since 255.2s ago] ()
2025-05-09 15:40:10,443 - sqlalchemy.engine.Engine - INFO - SELECT users.id AS users_id, users.username AS users_username, users.email AS users_email, users.name AS users_name, users.password_hash AS users_password_hash, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.last_login AS users_last_login 
FROM users 
WHERE users.id = ?
2025-05-09 15:40:10,450 - sqlalchemy.engine.Engine - INFO - [cached since 263.4s ago] (3,)
2025-05-09 15:40:10,460 - sqlalchemy.engine.Engine - INFO - SELECT users.id AS users_id, users.username AS users_username, users.email AS users_email, users.name AS users_name, users.password_hash AS users_password_hash, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.last_login AS users_last_login 
FROM users 
WHERE users.id = ?
2025-05-09 15:40:10,469 - sqlalchemy.engine.Engine - INFO - [cached since 263.4s ago] (5,)
2025-05-09 15:40:10,479 - sqlalchemy.engine.Engine - INFO - SELECT users.id AS users_id, users.username AS users_username, users.email AS users_email, users.name AS users_name, users.password_hash AS users_password_hash, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.last_login AS users_last_login 
FROM users 
WHERE users.id = ?
2025-05-09 15:40:10,488 - sqlalchemy.engine.Engine - INFO - [cached since 263.5s ago] (8,)
2025-05-09 15:40:10,500 - sqlalchemy.engine.Engine - INFO - SELECT users.id AS users_id, users.username AS users_username, users.email AS users_email, users.name AS users_name, users.password_hash AS users_password_hash, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.last_login AS users_last_login 
FROM users 
WHERE users.id = ?
2025-05-09 15:40:10,509 - sqlalchemy.engine.Engine - INFO - [cached since 263.5s ago] (5,)
2025-05-09 15:40:10,521 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-05-09 15:40:10,526 - werkzeug - INFO - 127.0.0.1 - - [09/May/2025 15:40:10] "GET /main/projects?bypass_jwt=true HTTP/1.1" 200 -
2025-05-09 15:40:10,558 - app.utils.jwt_callbacks - INFO - Checking if token 0a8cc478-b5e2-45ac-843f-994695ded95c is in blocklist
2025-05-09 15:40:10,565 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-05-09 15:40:10,570 - werkzeug - INFO - 127.0.0.1 - - [09/May/2025 15:40:10] "[36mGET /static/css/bootstrap.min.css HTTP/1.1[0m" 304 -
2025-05-09 15:40:10,572 - werkzeug - INFO - 127.0.0.1 - - [09/May/2025 15:40:10] "[36mGET /static/css/bootstrap-icons.css HTTP/1.1[0m" 304 -
2025-05-09 15:40:10,573 - werkzeug - INFO - 127.0.0.1 - - [09/May/2025 15:40:10] "[36mGET /static/css/style.css HTTP/1.1[0m" 304 -
2025-05-09 15:40:10,576 - werkzeug - INFO - 127.0.0.1 - - [09/May/2025 15:40:10] "[36mGET /static/css/frappe-gantt.min.css HTTP/1.1[0m" 304 -
2025-05-09 15:40:10,577 - werkzeug - INFO - 127.0.0.1 - - [09/May/2025 15:40:10] "[36mGET /static/js/jquery.min.js HTTP/1.1[0m" 304 -
2025-05-09 15:40:10,579 - sqlalchemy.engine.Engine - INFO - SELECT token_blacklist.id AS token_blacklist_id, token_blacklist.jti AS token_blacklist_jti, token_blacklist.token_type AS token_blacklist_token_type, token_blacklist.user_id AS token_blacklist_user_id, token_blacklist.revoked_at AS token_blacklist_revoked_at, token_blacklist.expires_at AS token_blacklist_expires_at 
FROM token_blacklist 
WHERE token_blacklist.jti = ?
 LIMIT ? OFFSET ?
2025-05-09 15:40:10,588 - werkzeug - INFO - 127.0.0.1 - - [09/May/2025 15:40:10] "[36mGET /static/js/bootstrap.bundle.min.js HTTP/1.1[0m" 304 -
2025-05-09 15:40:10,595 - werkzeug - INFO - 127.0.0.1 - - [09/May/2025 15:40:10] "[36mGET /static/js/auth.js HTTP/1.1[0m" 304 -
2025-05-09 15:40:10,601 - werkzeug - INFO - 127.0.0.1 - - [09/May/2025 15:40:10] "[36mGET /static/js/fix-modals.js HTTP/1.1[0m" 304 -
2025-05-09 15:40:10,606 - werkzeug - INFO - 127.0.0.1 - - [09/May/2025 15:40:10] "[36mGET /static/js/csrf.js HTTP/1.1[0m" 304 -
2025-05-09 15:40:10,615 - werkzeug - INFO - 127.0.0.1 - - [09/May/2025 15:40:10] "[36mGET /static/js/frappe-gantt.min.js HTTP/1.1[0m" 304 -
2025-05-09 15:40:10,619 - sqlalchemy.engine.Engine - INFO - [cached since 263.6s ago] ('0a8cc478-b5e2-45ac-843f-994695ded95c', 1, 0)
2025-05-09 15:40:10,645 - werkzeug - INFO - 127.0.0.1 - - [09/May/2025 15:40:10] "[36mGET /static/css/bootstrap.min.css.map HTTP/1.1[0m" 304 -
2025-05-09 15:40:10,650 - app.utils.jwt_callbacks - INFO - Token 0a8cc478-b5e2-45ac-843f-994695ded95c is valid
2025-05-09 15:40:10,652 - app - WARNING - 绕过JWT验证: /api/project-managers
2025-05-09 15:40:10,660 - app.utils.jwt_callbacks - INFO - Verifying token
2025-05-09 15:40:10,663 - app.utils.jwt_callbacks - INFO - Checking if token 0a8cc478-b5e2-45ac-843f-994695ded95c is in blocklist
2025-05-09 15:40:10,668 - app.utils.jwt_callbacks - INFO - JWT Header: {'alg': 'HS256', 'typ': 'JWT'}
2025-05-09 15:40:10,674 - werkzeug - INFO - 127.0.0.1 - - [09/May/2025 15:40:10] "[36mGET /static/favicon.ico HTTP/1.1[0m" 304 -
2025-05-09 15:40:10,675 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-05-09 15:40:10,679 - app.utils.jwt_callbacks - INFO - JWT Data: {'fresh': False, 'iat': 1746776408, 'jti': '0a8cc478-b5e2-45ac-843f-994695ded95c', 'type': 'access', 'sub': 1, 'nbf': 1746776408, 'csrf': 'IjY2NjEzOWExZTRmODhkZmYzMDRlMjQ2OTcyOTI1ODM4YjQzMWVlZDki.aB2xWA.ituAojhg-QaTe_wrpZAXwXXDyq0', 'exp': 1746780008, 'aud': 'task_management_system', 'user_claims': {'username': 'admin', 'roles': ['admin'], 'permissions': ['manage_users', 'manage_roles', 'manage_all_projects', 'manage_project', 'manage_all_tasks', 'manage_task', 'view_project', 'view_task', 'manage_resources', 'manage_risks', 'view_reports', 'create_task', 'assign_task', 'change_project_status', 'change_task_status', 'create_project'], 'is_active': True}, 'roles': ['admin']}
2025-05-09 15:40:10,691 - sqlalchemy.engine.Engine - INFO - SELECT token_blacklist.id AS token_blacklist_id, token_blacklist.jti AS token_blacklist_jti, token_blacklist.token_type AS token_blacklist_token_type, token_blacklist.user_id AS token_blacklist_user_id, token_blacklist.revoked_at AS token_blacklist_revoked_at, token_blacklist.expires_at AS token_blacklist_expires_at 
FROM token_blacklist 
WHERE token_blacklist.jti = ?
 LIMIT ? OFFSET ?
2025-05-09 15:40:10,698 - app.utils.jwt_callbacks - INFO - Token time difference: -2.697963 seconds
2025-05-09 15:40:10,707 - sqlalchemy.engine.Engine - INFO - [cached since 263.7s ago] ('0a8cc478-b5e2-45ac-843f-994695ded95c', 1, 0)
2025-05-09 15:40:10,712 - app.utils.jwt_callbacks - INFO - Token verification successful
2025-05-09 15:40:10,719 - app.utils.jwt_callbacks - INFO - Token 0a8cc478-b5e2-45ac-843f-994695ded95c is valid
2025-05-09 15:40:10,726 - app.utils.jwt_callbacks - INFO - Looking up user with identity: 1
2025-05-09 15:40:10,732 - app.utils.jwt_callbacks - INFO - Verifying token
2025-05-09 15:40:10,739 - sqlalchemy.engine.Engine - INFO - SELECT users.id AS users_id, users.username AS users_username, users.email AS users_email, users.name AS users_name, users.password_hash AS users_password_hash, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.last_login AS users_last_login 
FROM users 
WHERE users.id = ?
2025-05-09 15:40:10,743 - app.utils.jwt_callbacks - INFO - JWT Header: {'alg': 'HS256', 'typ': 'JWT'}
2025-05-09 15:40:10,752 - sqlalchemy.engine.Engine - INFO - [cached since 263.7s ago] (1,)
2025-05-09 15:40:10,758 - app.utils.jwt_callbacks - INFO - JWT Data: {'fresh': False, 'iat': 1746776408, 'jti': '0a8cc478-b5e2-45ac-843f-994695ded95c', 'type': 'access', 'sub': 1, 'nbf': 1746776408, 'csrf': 'IjY2NjEzOWExZTRmODhkZmYzMDRlMjQ2OTcyOTI1ODM4YjQzMWVlZDki.aB2xWA.ituAojhg-QaTe_wrpZAXwXXDyq0', 'exp': 1746780008, 'aud': 'task_management_system', 'user_claims': {'username': 'admin', 'roles': ['admin'], 'permissions': ['manage_users', 'manage_roles', 'manage_all_projects', 'manage_project', 'manage_all_tasks', 'manage_task', 'view_project', 'view_task', 'manage_resources', 'manage_risks', 'view_reports', 'create_task', 'assign_task', 'change_project_status', 'change_task_status', 'create_project'], 'is_active': True}, 'roles': ['admin']}
2025-05-09 15:40:10,767 - app.utils.jwt_callbacks - INFO - User found: admin
2025-05-09 15:40:10,774 - app.utils.jwt_callbacks - INFO - Token time difference: -2.774282 seconds
2025-05-09 15:40:10,778 - sqlalchemy.engine.Engine - INFO - SELECT roles.id AS roles_id, roles.name AS roles_name, roles.description AS roles_description, roles.created_at AS roles_created_at 
FROM roles, user_roles 
WHERE ? = user_roles.user_id AND roles.id = user_roles.role_id
2025-05-09 15:40:10,782 - app.utils.jwt_callbacks - INFO - Token verification successful
2025-05-09 15:40:10,788 - sqlalchemy.engine.Engine - INFO - [cached since 263.7s ago] (1,)
2025-05-09 15:40:10,796 - app.utils.jwt_callbacks - INFO - Looking up user with identity: 1
2025-05-09 15:40:10,804 - app.utils.jwt_callbacks - INFO - User roles: ['admin']
2025-05-09 15:40:10,812 - sqlalchemy.engine.Engine - INFO - SELECT users.id AS users_id, users.username AS users_username, users.email AS users_email, users.name AS users_name, users.password_hash AS users_password_hash, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.last_login AS users_last_login 
FROM users 
WHERE users.id = ?
2025-05-09 15:40:10,819 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions, role_permissions 
WHERE ? = role_permissions.role_id AND permissions.id = role_permissions.permission_id
2025-05-09 15:40:10,827 - sqlalchemy.engine.Engine - INFO - [cached since 263.8s ago] (1,)
2025-05-09 15:40:10,836 - sqlalchemy.engine.Engine - INFO - [cached since 280.6s ago] (1,)
2025-05-09 15:40:10,845 - app.utils.jwt_callbacks - INFO - User found: admin
2025-05-09 15:40:10,853 - app.utils.jwt_callbacks - INFO - User permissions: ['manage_users', 'manage_roles', 'manage_all_projects', 'manage_project', 'manage_all_tasks', 'manage_task', 'view_project', 'view_task', 'manage_resources', 'manage_risks', 'view_reports', 'create_task', 'assign_task', 'change_project_status', 'change_task_status', 'create_project']
2025-05-09 15:40:10,860 - sqlalchemy.engine.Engine - INFO - SELECT roles.id AS roles_id, roles.name AS roles_name, roles.description AS roles_description, roles.created_at AS roles_created_at 
FROM roles, user_roles 
WHERE ? = user_roles.user_id AND roles.id = user_roles.role_id
2025-05-09 15:40:10,867 - app.utils.jwt_callbacks - INFO - Checking if token 0a8cc478-b5e2-45ac-843f-994695ded95c is in blocklist
2025-05-09 15:40:10,875 - sqlalchemy.engine.Engine - INFO - [cached since 263.8s ago] (1,)
2025-05-09 15:40:10,882 - sqlalchemy.engine.Engine - INFO - SELECT token_blacklist.id AS token_blacklist_id, token_blacklist.jti AS token_blacklist_jti, token_blacklist.token_type AS token_blacklist_token_type, token_blacklist.user_id AS token_blacklist_user_id, token_blacklist.revoked_at AS token_blacklist_revoked_at, token_blacklist.expires_at AS token_blacklist_expires_at 
FROM token_blacklist 
WHERE token_blacklist.jti = ?
 LIMIT ? OFFSET ?
2025-05-09 15:40:10,893 - app.utils.jwt_callbacks - INFO - User roles: ['admin']
2025-05-09 15:40:10,905 - sqlalchemy.engine.Engine - INFO - [cached since 263.9s ago] ('0a8cc478-b5e2-45ac-843f-994695ded95c', 1, 0)
2025-05-09 15:40:10,913 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions, role_permissions 
WHERE ? = role_permissions.role_id AND permissions.id = role_permissions.permission_id
2025-05-09 15:40:10,923 - app.utils.jwt_callbacks - INFO - Token 0a8cc478-b5e2-45ac-843f-994695ded95c is valid
2025-05-09 15:40:10,930 - sqlalchemy.engine.Engine - INFO - [cached since 280.6s ago] (1,)
2025-05-09 15:40:10,939 - app.utils.jwt_callbacks - INFO - Verifying token
2025-05-09 15:40:10,946 - app.utils.jwt_callbacks - INFO - User permissions: ['manage_users', 'manage_roles', 'manage_all_projects', 'manage_project', 'manage_all_tasks', 'manage_task', 'view_project', 'view_task', 'manage_resources', 'manage_risks', 'view_reports', 'create_task', 'assign_task', 'change_project_status', 'change_task_status', 'create_project']
2025-05-09 15:40:10,950 - app.utils.jwt_callbacks - INFO - JWT Header: {'alg': 'HS256', 'typ': 'JWT'}
2025-05-09 15:40:10,957 - app.routes.projects - INFO - 获取项目经理列表API被调用
2025-05-09 15:40:10,961 - app.utils.jwt_callbacks - INFO - JWT Data: {'fresh': False, 'iat': 1746776408, 'jti': '0a8cc478-b5e2-45ac-843f-994695ded95c', 'type': 'access', 'sub': 1, 'nbf': 1746776408, 'csrf': 'IjY2NjEzOWExZTRmODhkZmYzMDRlMjQ2OTcyOTI1ODM4YjQzMWVlZDki.aB2xWA.ituAojhg-QaTe_wrpZAXwXXDyq0', 'exp': 1746780008, 'aud': 'task_management_system', 'user_claims': {'username': 'admin', 'roles': ['admin'], 'permissions': ['manage_users', 'manage_roles', 'manage_all_projects', 'manage_project', 'manage_all_tasks', 'manage_task', 'view_project', 'view_task', 'manage_resources', 'manage_risks', 'view_reports', 'create_task', 'assign_task', 'change_project_status', 'change_task_status', 'create_project'], 'is_active': True}, 'roles': ['admin']}
2025-05-09 15:40:10,967 - sqlalchemy.engine.Engine - INFO - SELECT users.id AS users_id, users.username AS users_username, users.email AS users_email, users.name AS users_name, users.password_hash AS users_password_hash, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.last_login AS users_last_login 
FROM users 
WHERE users.is_active = 1
2025-05-09 15:40:10,973 - app.utils.jwt_callbacks - INFO - Token time difference: -2.973331 seconds
2025-05-09 15:40:10,979 - sqlalchemy.engine.Engine - INFO - [cached since 255.2s ago] ()
2025-05-09 15:40:10,986 - app.utils.jwt_callbacks - INFO - Token verification successful
2025-05-09 15:40:10,992 - app.routes.projects - INFO - 已找到 9 个活跃用户用于项目经理选择
2025-05-09 15:40:10,998 - app.utils.jwt_callbacks - INFO - Looking up user with identity: 1
2025-05-09 15:40:11,006 - sqlalchemy.engine.Engine - INFO - SELECT roles.id AS roles_id, roles.name AS roles_name, roles.description AS roles_description, roles.created_at AS roles_created_at 
FROM roles, user_roles 
WHERE ? = user_roles.user_id AND roles.id = user_roles.role_id
2025-05-09 15:40:11,013 - app.utils.jwt_callbacks - INFO - User found: admin
2025-05-09 15:40:11,021 - sqlalchemy.engine.Engine - INFO - [cached since 264s ago] (8,)
2025-05-09 15:40:11,029 - app.utils.jwt_callbacks - INFO - User roles: ['admin']
2025-05-09 15:40:11,038 - sqlalchemy.engine.Engine - INFO - SELECT roles.id AS roles_id, roles.name AS roles_name, roles.description AS roles_description, roles.created_at AS roles_created_at 
FROM roles, user_roles 
WHERE ? = user_roles.user_id AND roles.id = user_roles.role_id
2025-05-09 15:40:11,045 - app.utils.jwt_callbacks - INFO - User permissions: ['manage_users', 'manage_roles', 'manage_all_projects', 'manage_project', 'manage_all_tasks', 'manage_task', 'view_project', 'view_task', 'manage_resources', 'manage_risks', 'view_reports', 'create_task', 'assign_task', 'change_project_status', 'change_task_status', 'create_project']
2025-05-09 15:40:11,082 - sqlalchemy.engine.Engine - INFO - [cached since 264s ago] (9,)
2025-05-09 15:40:11,114 - app - INFO - 用户已认证，重定向到仪表板页面: /.well-known/appspecific/com.chrome.devtools.json
2025-05-09 15:40:11,139 - sqlalchemy.engine.Engine - INFO - SELECT roles.id AS roles_id, roles.name AS roles_name, roles.description AS roles_description, roles.created_at AS roles_created_at 
FROM roles, user_roles 
WHERE ? = user_roles.user_id AND roles.id = user_roles.role_id
2025-05-09 15:40:11,161 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-05-09 15:40:11,177 - sqlalchemy.engine.Engine - INFO - [cached since 264.1s ago] (4,)
2025-05-09 15:40:11,207 - werkzeug - INFO - 127.0.0.1 - - [09/May/2025 15:40:11] "[32mGET /.well-known/appspecific/com.chrome.devtools.json HTTP/1.1[0m" 302 -
2025-05-09 15:40:11,244 - sqlalchemy.engine.Engine - INFO - SELECT roles.id AS roles_id, roles.name AS roles_name, roles.description AS roles_description, roles.created_at AS roles_created_at 
FROM roles, user_roles 
WHERE ? = user_roles.user_id AND roles.id = user_roles.role_id
2025-05-09 15:40:11,255 - app.utils.jwt_callbacks - INFO - Checking if token 0a8cc478-b5e2-45ac-843f-994695ded95c is in blocklist
2025-05-09 15:40:11,258 - sqlalchemy.engine.Engine - INFO - [cached since 264.2s ago] (5,)
2025-05-09 15:40:11,262 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-05-09 15:40:11,271 - sqlalchemy.engine.Engine - INFO - SELECT roles.id AS roles_id, roles.name AS roles_name, roles.description AS roles_description, roles.created_at AS roles_created_at 
FROM roles, user_roles 
WHERE ? = user_roles.user_id AND roles.id = user_roles.role_id
2025-05-09 15:40:11,293 - sqlalchemy.engine.Engine - INFO - SELECT token_blacklist.id AS token_blacklist_id, token_blacklist.jti AS token_blacklist_jti, token_blacklist.token_type AS token_blacklist_token_type, token_blacklist.user_id AS token_blacklist_user_id, token_blacklist.revoked_at AS token_blacklist_revoked_at, token_blacklist.expires_at AS token_blacklist_expires_at 
FROM token_blacklist 
WHERE token_blacklist.jti = ?
 LIMIT ? OFFSET ?
2025-05-09 15:40:11,308 - sqlalchemy.engine.Engine - INFO - [cached since 264.3s ago] (6,)
2025-05-09 15:40:11,318 - sqlalchemy.engine.Engine - INFO - [cached since 264.3s ago] ('0a8cc478-b5e2-45ac-843f-994695ded95c', 1, 0)
2025-05-09 15:40:11,327 - sqlalchemy.engine.Engine - INFO - SELECT roles.id AS roles_id, roles.name AS roles_name, roles.description AS roles_description, roles.created_at AS roles_created_at 
FROM roles, user_roles 
WHERE ? = user_roles.user_id AND roles.id = user_roles.role_id
2025-05-09 15:40:11,336 - app.utils.jwt_callbacks - INFO - Token 0a8cc478-b5e2-45ac-843f-994695ded95c is valid
2025-05-09 15:40:11,345 - sqlalchemy.engine.Engine - INFO - [cached since 264.3s ago] (7,)
2025-05-09 15:40:11,350 - app.utils.jwt_callbacks - INFO - Verifying token
2025-05-09 15:40:11,359 - sqlalchemy.engine.Engine - INFO - SELECT roles.id AS roles_id, roles.name AS roles_name, roles.description AS roles_description, roles.created_at AS roles_created_at 
FROM roles, user_roles 
WHERE ? = user_roles.user_id AND roles.id = user_roles.role_id
2025-05-09 15:40:11,364 - app.utils.jwt_callbacks - INFO - JWT Header: {'alg': 'HS256', 'typ': 'JWT'}
2025-05-09 15:40:11,370 - sqlalchemy.engine.Engine - INFO - [cached since 264.3s ago] (2,)
2025-05-09 15:40:11,377 - app.utils.jwt_callbacks - INFO - JWT Data: {'fresh': False, 'iat': 1746776408, 'jti': '0a8cc478-b5e2-45ac-843f-994695ded95c', 'type': 'access', 'sub': 1, 'nbf': 1746776408, 'csrf': 'IjY2NjEzOWExZTRmODhkZmYzMDRlMjQ2OTcyOTI1ODM4YjQzMWVlZDki.aB2xWA.ituAojhg-QaTe_wrpZAXwXXDyq0', 'exp': 1746780008, 'aud': 'task_management_system', 'user_claims': {'username': 'admin', 'roles': ['admin'], 'permissions': ['manage_users', 'manage_roles', 'manage_all_projects', 'manage_project', 'manage_all_tasks', 'manage_task', 'view_project', 'view_task', 'manage_resources', 'manage_risks', 'view_reports', 'create_task', 'assign_task', 'change_project_status', 'change_task_status', 'create_project'], 'is_active': True}, 'roles': ['admin']}
2025-05-09 15:40:11,385 - sqlalchemy.engine.Engine - INFO - SELECT roles.id AS roles_id, roles.name AS roles_name, roles.description AS roles_description, roles.created_at AS roles_created_at 
FROM roles, user_roles 
WHERE ? = user_roles.user_id AND roles.id = user_roles.role_id
2025-05-09 15:40:11,394 - app.utils.jwt_callbacks - INFO - Token time difference: -3.39484 seconds
2025-05-09 15:40:11,406 - sqlalchemy.engine.Engine - INFO - [cached since 264.4s ago] (3,)
2025-05-09 15:40:11,412 - app.utils.jwt_callbacks - INFO - Token verification successful
2025-05-09 15:40:11,422 - app.routes.projects - INFO - 返回 9 个可选的项目负责人
2025-05-09 15:40:11,429 - app.utils.jwt_callbacks - INFO - Looking up user with identity: 1
2025-05-09 15:40:11,437 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-05-09 15:40:11,448 - sqlalchemy.engine.Engine - INFO - SELECT users.id AS users_id, users.username AS users_username, users.email AS users_email, users.name AS users_name, users.password_hash AS users_password_hash, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.last_login AS users_last_login 
FROM users 
WHERE users.id = ?
2025-05-09 15:40:11,458 - werkzeug - INFO - 127.0.0.1 - - [09/May/2025 15:40:11] "GET /api/project-managers?bypass_jwt=true HTTP/1.1" 200 -
2025-05-09 15:40:11,469 - sqlalchemy.engine.Engine - INFO - [cached since 264.4s ago] (1,)
2025-05-09 15:40:11,481 - app.utils.jwt_callbacks - INFO - User found: admin
2025-05-09 15:40:11,487 - sqlalchemy.engine.Engine - INFO - SELECT roles.id AS roles_id, roles.name AS roles_name, roles.description AS roles_description, roles.created_at AS roles_created_at 
FROM roles, user_roles 
WHERE ? = user_roles.user_id AND roles.id = user_roles.role_id
2025-05-09 15:40:11,493 - sqlalchemy.engine.Engine - INFO - [cached since 264.5s ago] (1,)
2025-05-09 15:40:11,503 - app.utils.jwt_callbacks - INFO - User roles: ['admin']
2025-05-09 15:40:11,510 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions, role_permissions 
WHERE ? = role_permissions.role_id AND permissions.id = role_permissions.permission_id
2025-05-09 15:40:11,518 - sqlalchemy.engine.Engine - INFO - [cached since 281.2s ago] (1,)
2025-05-09 15:40:11,528 - app.utils.jwt_callbacks - INFO - User permissions: ['manage_users', 'manage_roles', 'manage_all_projects', 'manage_project', 'manage_all_tasks', 'manage_task', 'view_project', 'view_task', 'manage_resources', 'manage_risks', 'view_reports', 'create_task', 'assign_task', 'change_project_status', 'change_task_status', 'create_project']
2025-05-09 15:40:11,535 - app.utils.jwt_callbacks - INFO - Checking if token 0a8cc478-b5e2-45ac-843f-994695ded95c is in blocklist
2025-05-09 15:40:11,542 - sqlalchemy.engine.Engine - INFO - SELECT token_blacklist.id AS token_blacklist_id, token_blacklist.jti AS token_blacklist_jti, token_blacklist.token_type AS token_blacklist_token_type, token_blacklist.user_id AS token_blacklist_user_id, token_blacklist.revoked_at AS token_blacklist_revoked_at, token_blacklist.expires_at AS token_blacklist_expires_at 
FROM token_blacklist 
WHERE token_blacklist.jti = ?
 LIMIT ? OFFSET ?
2025-05-09 15:40:11,549 - sqlalchemy.engine.Engine - INFO - [cached since 264.5s ago] ('0a8cc478-b5e2-45ac-843f-994695ded95c', 1, 0)
2025-05-09 15:40:11,555 - app.utils.jwt_callbacks - INFO - Token 0a8cc478-b5e2-45ac-843f-994695ded95c is valid
2025-05-09 15:40:11,562 - app.utils.jwt_callbacks - INFO - Verifying token
2025-05-09 15:40:11,568 - app.utils.jwt_callbacks - INFO - JWT Header: {'alg': 'HS256', 'typ': 'JWT'}
2025-05-09 15:40:11,575 - app.utils.jwt_callbacks - INFO - JWT Data: {'fresh': False, 'iat': 1746776408, 'jti': '0a8cc478-b5e2-45ac-843f-994695ded95c', 'type': 'access', 'sub': 1, 'nbf': 1746776408, 'csrf': 'IjY2NjEzOWExZTRmODhkZmYzMDRlMjQ2OTcyOTI1ODM4YjQzMWVlZDki.aB2xWA.ituAojhg-QaTe_wrpZAXwXXDyq0', 'exp': 1746780008, 'aud': 'task_management_system', 'user_claims': {'username': 'admin', 'roles': ['admin'], 'permissions': ['manage_users', 'manage_roles', 'manage_all_projects', 'manage_project', 'manage_all_tasks', 'manage_task', 'view_project', 'view_task', 'manage_resources', 'manage_risks', 'view_reports', 'create_task', 'assign_task', 'change_project_status', 'change_task_status', 'create_project'], 'is_active': True}, 'roles': ['admin']}
2025-05-09 15:40:11,581 - app.utils.jwt_callbacks - INFO - Token time difference: -3.581495 seconds
2025-05-09 15:40:11,586 - app.utils.jwt_callbacks - INFO - Token verification successful
2025-05-09 15:40:11,593 - app.utils.jwt_callbacks - INFO - Looking up user with identity: 1
2025-05-09 15:40:11,598 - app.utils.jwt_callbacks - INFO - User found: admin
2025-05-09 15:40:11,607 - app.utils.jwt_callbacks - INFO - User roles: ['admin']
2025-05-09 15:40:11,611 - app.utils.jwt_callbacks - INFO - User permissions: ['manage_users', 'manage_roles', 'manage_all_projects', 'manage_project', 'manage_all_tasks', 'manage_task', 'view_project', 'view_task', 'manage_resources', 'manage_risks', 'view_reports', 'create_task', 'assign_task', 'change_project_status', 'change_task_status', 'create_project']
2025-05-09 15:40:11,618 - app - INFO - Dashboard access with user ID: 1
2025-05-09 15:40:11,623 - app - INFO - Token found in: cookies
2025-05-09 15:40:11,629 - app - INFO - Dashboard context user_data: {'id': 1, 'username': 'admin', 'email': 'admin@example.com', 'name': '管理员', 'is_active': True, 'created_at': '2025-05-07T01:07:21.773527', 'last_login': '2025-05-09T07:40:08.466437', 'roles': ['admin'], 'permissions': ['assign_task', 'manage_roles', 'manage_users', 'view_project', 'manage_risks', 'view_task', 'change_project_status', 'manage_project', 'manage_all_tasks', 'create_project', 'change_task_status', 'manage_all_projects', 'manage_resources', 'view_reports', 'manage_task', 'create_task']}
2025-05-09 15:40:11,636 - app - INFO - 用户 admin 的角色: ['admin']
2025-05-09 15:40:11,641 - app - INFO - 用户 admin 的权限: ['assign_task', 'manage_roles', 'manage_users', 'view_project', 'manage_risks', 'view_task', 'change_project_status', 'manage_project', 'manage_all_tasks', 'create_project', 'change_task_status', 'manage_all_projects', 'manage_resources', 'view_reports', 'manage_task', 'create_task']
2025-05-09 15:40:11,646 - app - INFO - 用户 admin - 是否管理员: True, 是否项目经理: False
2025-05-09 15:40:11,656 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-05-09 15:40:11,661 - werkzeug - INFO - 127.0.0.1 - - [09/May/2025 15:40:11] "GET /main/dashboard HTTP/1.1" 200 -
2025-05-09 16:40:14,840 - app - INFO - File logging handler initialized successfully
2025-05-09 16:40:14,842 - app - INFO - Console logging handler initialized successfully
2025-05-09 16:40:14,842 - app - INFO - Application logging configuration completed
2025-05-09 16:40:14,842 - app - INFO - Development configuration initialized
2025-05-09 16:40:14,873 - app - INFO - Logging setup completed successfully
2025-05-09 16:40:15,129 - app - INFO - 已注册的路由:
2025-05-09 16:40:15,130 - app - INFO - 路由: /static/<path:filename> - 方法: {'GET', 'HEAD', 'OPTIONS'} - 终端: static
2025-05-09 16:40:15,130 - app - INFO - 路由: /api/users/<int:user_id> - 方法: {'HEAD', 'PUT', 'GET', 'DELETE', 'POST', 'OPTIONS'} - 终端: user_api_exempt.user_api_exempt_route
2025-05-09 16:40:15,131 - app - INFO - 路由: /api/users - 方法: {'HEAD', 'PUT', 'GET', 'DELETE', 'POST', 'OPTIONS'} - 终端: user_api_exempt.user_api_exempt_route
2025-05-09 16:40:15,131 - app - INFO - 路由: /tasks/<int:task_id>/dependencies/<int:dependency_id>/gantt - 方法: {'DELETE', 'OPTIONS'} - 终端: task_api_exempt.task_api_exempt_route
2025-05-09 16:40:15,131 - app - INFO - 路由: /tasks/<int:task_id>/gantt - 方法: {'OPTIONS', 'PUT'} - 终端: task_api_exempt.task_api_exempt_route
2025-05-09 16:40:15,131 - app - INFO - 路由: /tasks/project/<int:project_id>/gantt - 方法: {'GET', 'HEAD', 'OPTIONS'} - 终端: task_api_exempt.task_api_exempt_route
2025-05-09 16:40:15,131 - app - INFO - 路由: /tasks/project/<int:project_id>/gantt/data - 方法: {'GET', 'HEAD', 'OPTIONS'} - 终端: task_api_exempt.task_api_exempt_route
2025-05-09 16:40:15,131 - app - INFO - 路由: /api/tasks/<int:task_id>/no_csrf - 方法: {'HEAD', 'PUT', 'GET', 'DELETE', 'POST', 'OPTIONS'} - 终端: task_api_exempt.task_api_exempt_route
2025-05-09 16:40:15,132 - app - INFO - 路由: /api/tasks/<int:task_id> - 方法: {'HEAD', 'PUT', 'GET', 'DELETE', 'POST', 'OPTIONS'} - 终端: task_api_exempt.task_api_exempt_route
2025-05-09 16:40:15,132 - app - INFO - 路由: /tasks/dependencies/gantt - 方法: {'OPTIONS', 'POST'} - 终端: task_api_exempt.task_api_exempt_route
2025-05-09 16:40:15,132 - app - INFO - 路由: /api/tasks - 方法: {'HEAD', 'PUT', 'GET', 'DELETE', 'POST', 'OPTIONS'} - 终端: task_api_exempt.task_api_exempt_route
2025-05-09 16:40:15,132 - app - INFO - 路由: /login - 方法: {'GET', 'HEAD', 'OPTIONS'} - 终端: auth.login_page
2025-05-09 16:40:15,132 - app - INFO - 路由: /login - 方法: {'OPTIONS', 'POST'} - 终端: auth.login
2025-05-09 16:40:15,132 - app - INFO - 路由: /register - 方法: {'GET', 'HEAD', 'OPTIONS'} - 终端: auth.register_page
2025-05-09 16:40:15,133 - app - INFO - 路由: /register - 方法: {'OPTIONS', 'POST'} - 终端: auth.register
2025-05-09 16:40:15,133 - app - INFO - 路由: /logout - 方法: {'GET', 'HEAD', 'OPTIONS', 'POST'} - 终端: auth.logout
2025-05-09 16:40:15,133 - app - INFO - 路由: /refresh - 方法: {'OPTIONS', 'POST'} - 终端: auth.refresh
2025-05-09 16:40:15,133 - app - INFO - 路由: /profile - 方法: {'GET', 'HEAD', 'OPTIONS'} - 终端: auth.profile
2025-05-09 16:40:15,133 - app - INFO - 路由: /profile - 方法: {'OPTIONS', 'PUT'} - 终端: auth.update_profile
2025-05-09 16:40:15,133 - app - INFO - 路由: /users - 方法: {'GET', 'HEAD', 'OPTIONS'} - 终端: auth.get_users
2025-05-09 16:40:15,133 - app - INFO - 路由: /users/<int:user_id> - 方法: {'GET', 'HEAD', 'OPTIONS'} - 终端: auth.get_user_by_id
2025-05-09 16:40:15,134 - app - INFO - 路由: /update_user/<int:user_id> - 方法: {'OPTIONS', 'PUT'} - 终端: auth.update_user
2025-05-09 16:40:15,134 - app - INFO - 路由: /roles - 方法: {'GET', 'HEAD', 'OPTIONS'} - 终端: auth.get_roles
2025-05-09 16:40:15,134 - app - INFO - 路由: /permissions - 方法: {'GET', 'HEAD', 'OPTIONS'} - 终端: auth.get_permissions
2025-05-09 16:40:15,134 - app - INFO - 路由: /permissions - 方法: {'OPTIONS', 'POST'} - 终端: auth.create_permission
2025-05-09 16:40:15,134 - app - INFO - 路由: /permissions/<int:permission_id> - 方法: {'GET', 'HEAD', 'OPTIONS'} - 终端: auth.get_permission
2025-05-09 16:40:15,136 - app - INFO - 路由: /permissions/<int:permission_id> - 方法: {'OPTIONS', 'PUT'} - 终端: auth.update_permission
2025-05-09 16:40:15,136 - app - INFO - 路由: /permissions/<int:permission_id> - 方法: {'DELETE', 'OPTIONS'} - 终端: auth.delete_permission
2025-05-09 16:40:15,136 - app - INFO - 路由: /roles - 方法: {'OPTIONS', 'POST'} - 终端: auth.create_role
2025-05-09 16:40:15,136 - app - INFO - 路由: /roles/<int:role_id> - 方法: {'GET', 'HEAD', 'OPTIONS'} - 终端: auth.get_role
2025-05-09 16:40:15,137 - app - INFO - 路由: /roles/<int:role_id>/permissions - 方法: {'OPTIONS', 'PUT'} - 终端: auth.update_role_permissions
2025-05-09 16:40:15,137 - app - INFO - 路由: /roles/<int:role_id> - 方法: {'DELETE', 'OPTIONS'} - 终端: auth.delete_role
2025-05-09 16:40:15,138 - app - INFO - 路由: /dashboard - 方法: {'GET', 'HEAD', 'OPTIONS'} - 终端: auth.dashboard
2025-05-09 16:40:15,139 - app - INFO - 路由: /dashboard/redirect - 方法: {'GET', 'HEAD', 'OPTIONS', 'POST'} - 终端: auth.dashboard_redirect
2025-05-09 16:40:15,139 - app - INFO - 路由: /create_test_user - 方法: {'OPTIONS', 'POST'} - 终端: auth.create_test_user
2025-05-09 16:40:15,140 - app - INFO - 路由: /check - 方法: {'GET', 'HEAD', 'OPTIONS'} - 终端: auth.check_auth
2025-05-09 16:40:15,140 - app - INFO - 路由: /create_test_project - 方法: {'OPTIONS', 'POST'} - 终端: auth.create_test_project
2025-05-09 16:40:15,140 - app - INFO - 路由: /logout_all - 方法: {'OPTIONS', 'POST'} - 终端: auth.logout_all
2025-05-09 16:40:15,140 - app - INFO - 路由: /dashboard/data - 方法: {'GET', 'HEAD', 'OPTIONS'} - 终端: auth.dashboard_data
2025-05-09 16:40:15,142 - app - INFO - 路由: /check_token - 方法: {'GET', 'HEAD', 'OPTIONS'} - 终端: auth.check_token
2025-05-09 16:40:15,142 - app - INFO - 路由: /create_user - 方法: {'OPTIONS', 'POST'} - 终端: auth.create_user
2025-05-09 16:40:15,142 - app - INFO - 路由: /user_info - 方法: {'GET', 'HEAD', 'OPTIONS'} - 终端: auth.get_user_info
2025-05-09 16:40:15,143 - app - INFO - 路由: /user/<int:user_id> - 方法: {'DELETE', 'OPTIONS'} - 终端: auth.delete_user
2025-05-09 16:40:15,143 - app - INFO - 路由: /users/<int:user_id>/roles - 方法: {'GET', 'HEAD', 'OPTIONS'} - 终端: auth.get_user_roles
2025-05-09 16:40:15,143 - app - INFO - 路由: /users/<int:user_id>/roles - 方法: {'OPTIONS', 'PUT'} - 终端: auth.update_user_roles
2025-05-09 16:40:15,144 - app - INFO - 路由: /users/<int:user_id>/notifications - 方法: {'GET', 'HEAD', 'OPTIONS'} - 终端: auth.get_user_notifications
2025-05-09 16:40:15,144 - app - INFO - 路由: /notifications/<int:notification_id>/read - 方法: {'OPTIONS', 'PUT'} - 终端: auth.mark_notification_as_read
2025-05-09 16:40:15,144 - app - INFO - 路由: /notifications/read_all - 方法: {'OPTIONS', 'PUT'} - 终端: auth.mark_all_notifications_as_read
2025-05-09 16:40:15,144 - app - INFO - 路由: /change-password - 方法: {'OPTIONS', 'POST'} - 终端: auth.change_password
2025-05-09 16:40:15,144 - app - INFO - 路由: /reset-password - 方法: {'GET', 'HEAD', 'OPTIONS'} - 终端: auth.reset_password_page
2025-05-09 16:40:15,144 - app - INFO - 路由: /verify-email/confirm - 方法: {'GET', 'HEAD', 'OPTIONS'} - 终端: auth.verify_email_confirm_page
2025-05-09 16:40:15,145 - app - INFO - 路由: /auth/csrf-token - 方法: {'GET', 'HEAD', 'OPTIONS'} - 终端: auth.get_csrf_token
2025-05-09 16:40:15,145 - app - INFO - 路由: /api/users/<int:user_id> - 方法: {'OPTIONS', 'PUT'} - 终端: auth.api_update_user
2025-05-09 16:40:15,145 - app - INFO - 路由: /api/users/<int:user_id> - 方法: {'DELETE', 'OPTIONS'} - 终端: auth.api_delete_user
2025-05-09 16:40:15,145 - app - INFO - 路由: /api/users - 方法: {'GET', 'HEAD', 'OPTIONS'} - 终端: auth.api_get_users
2025-05-09 16:40:15,146 - app - INFO - 路由: /api/users - 方法: {'OPTIONS', 'POST'} - 终端: auth.api_create_user
2025-05-09 16:40:15,146 - app - INFO - 路由: /auth/users/<int:user_id> - 方法: {'GET', 'HEAD', 'OPTIONS'} - 终端: auth.get_user_details
2025-05-09 16:40:15,147 - app - INFO - 路由: /api/users/<int:user_id> - 方法: {'HEAD', 'PUT', 'GET', 'DELETE', 'OPTIONS'} - 终端: auth.api_user_operations
2025-05-09 16:40:15,148 - app - INFO - 路由: /auth/user-csrf-token - 方法: {'GET', 'HEAD', 'OPTIONS'} - 终端: auth.get_user_csrf_token
2025-05-09 16:40:15,148 - app - INFO - 路由: /main/ - 方法: {'GET', 'HEAD', 'OPTIONS'} - 终端: main.index
2025-05-09 16:40:15,149 - app - INFO - 路由: /main/dashboard - 方法: {'GET', 'HEAD', 'OPTIONS'} - 终端: main.dashboard
2025-05-09 16:40:15,149 - app - INFO - 路由: /main/check_token - 方法: {'GET', 'HEAD', 'OPTIONS'} - 终端: main.check_token
2025-05-09 16:40:15,151 - app - INFO - 路由: /main/projects - 方法: {'GET', 'HEAD', 'OPTIONS'} - 终端: main.projects
2025-05-09 16:40:15,151 - app - INFO - 路由: /main/tasks - 方法: {'GET', 'HEAD', 'OPTIONS'} - 终端: main.tasks
2025-05-09 16:40:15,152 - app - INFO - 路由: /main/risks - 方法: {'GET', 'HEAD', 'OPTIONS'} - 终端: main.risks
2025-05-09 16:40:15,152 - app - INFO - 路由: /main/reports - 方法: {'GET', 'HEAD', 'OPTIONS'} - 终端: main.reports
2025-05-09 16:40:15,163 - app - INFO - 路由: /main/resources - 方法: {'GET', 'HEAD', 'OPTIONS'} - 终端: main.resources
2025-05-09 16:40:15,164 - app - INFO - 路由: /main/profile - 方法: {'GET', 'HEAD', 'OPTIONS'} - 终端: main.profile
2025-05-09 16:40:15,165 - app - INFO - 路由: /main/system/status - 方法: {'GET', 'HEAD', 'OPTIONS'} - 终端: main.system_status
2025-05-09 16:40:15,166 - app - INFO - 路由: /main/api/dashboard/data - 方法: {'GET', 'HEAD', 'OPTIONS'} - 终端: main.get_dashboard_data
2025-05-09 16:40:15,167 - app - INFO - 路由: /main/test - 方法: {'GET', 'HEAD', 'OPTIONS'} - 终端: main.test_route
2025-05-09 16:40:15,168 - app - INFO - 路由: /main/projects/detail/<int:project_id> - 方法: {'GET', 'HEAD', 'OPTIONS'} - 终端: main.project_detail_redirect
2025-05-09 16:40:15,168 - app - INFO - 路由: /main/users - 方法: {'GET', 'HEAD', 'OPTIONS'} - 终端: main.users
2025-05-09 16:40:15,169 - app - INFO - 路由: /main/debug/projects - 方法: {'GET', 'HEAD', 'OPTIONS'} - 终端: main.debug_projects
2025-05-09 16:40:15,169 - app - INFO - 路由: /main/simple/projects - 方法: {'GET', 'HEAD', 'OPTIONS'} - 终端: main.simple_projects
2025-05-09 16:40:15,169 - app - INFO - 路由: /main/static-test - 方法: {'GET', 'HEAD', 'OPTIONS'} - 终端: main.static_test
2025-05-09 16:40:15,169 - app - INFO - 路由: /main/print-projects - 方法: {'GET', 'HEAD', 'OPTIONS'} - 终端: main.print_projects
2025-05-09 16:40:15,170 - app - INFO - 路由: /main/bypass-projects - 方法: {'GET', 'HEAD', 'OPTIONS'} - 终端: main.bypass_projects
2025-05-09 16:40:15,170 - app - INFO - 路由: /main/debug-projects - 方法: {'GET', 'HEAD', 'OPTIONS'} - 终端: main.debug_projects_api
2025-05-09 16:40:15,171 - app - INFO - 路由: /projects/list - 方法: {'GET', 'HEAD', 'OPTIONS'} - 终端: projects.project_list
2025-05-09 16:40:15,172 - app - INFO - 路由: /projects/ - 方法: {'GET', 'HEAD', 'OPTIONS'} - 终端: projects.get_projects
2025-05-09 16:40:15,172 - app - INFO - 路由: /projects/ - 方法: {'OPTIONS', 'POST'} - 终端: projects.create_project
2025-05-09 16:40:15,174 - app - INFO - 路由: /projects/<int:project_id> - 方法: {'GET', 'HEAD', 'OPTIONS'} - 终端: projects.get_project
2025-05-09 16:40:15,174 - app - INFO - 路由: /projects/<int:project_id> - 方法: {'OPTIONS', 'PUT'} - 终端: projects.update_project
2025-05-09 16:40:15,175 - app - INFO - 路由: /projects/<int:project_id> - 方法: {'DELETE', 'OPTIONS'} - 终端: projects.delete_project
2025-05-09 16:40:15,175 - app - INFO - 路由: /projects/<int:project_id>/members - 方法: {'GET', 'HEAD', 'OPTIONS'} - 终端: projects.get_project_members
2025-05-09 16:40:15,176 - app - INFO - 路由: /projects/<int:project_id>/members - 方法: {'OPTIONS', 'POST'} - 终端: projects.add_project_member
2025-05-09 16:40:15,178 - app - INFO - 路由: /projects/<int:project_id>/members/<int:user_id> - 方法: {'DELETE', 'OPTIONS'} - 终端: projects.remove_project_member
2025-05-09 16:40:15,178 - app - INFO - 路由: /projects/detail/<int:project_id> - 方法: {'GET', 'HEAD', 'OPTIONS'} - 终端: projects.detail
2025-05-09 16:40:15,178 - app - INFO - 路由: /projects/api/detail/<int:project_id> - 方法: {'GET', 'HEAD', 'OPTIONS'} - 终端: projects.detail_api
2025-05-09 16:40:15,179 - app - INFO - 路由: /projects/api/projects/<int:project_id> - 方法: {'GET', 'HEAD', 'OPTIONS'} - 终端: projects.get_project_api
2025-05-09 16:40:15,179 - app - INFO - 路由: /projects/api/projects/<int:project_id> - 方法: {'OPTIONS', 'PUT'} - 终端: projects.update_project_api
2025-05-09 16:40:15,180 - app - INFO - 路由: /projects/api/projects/<int:project_id> - 方法: {'DELETE', 'OPTIONS'} - 终端: projects.delete_project_api
2025-05-09 16:40:15,180 - app - INFO - 路由: /projects/api/auth/projects - 方法: {'GET', 'HEAD', 'OPTIONS'} - 终端: projects.get_projects_api
2025-05-09 16:40:15,181 - app - INFO - 路由: /projects/api/auth/projects/<int:project_id> - 方法: {'GET', 'HEAD', 'OPTIONS'} - 终端: projects.get_project_auth_api
2025-05-09 16:40:15,181 - app - INFO - 路由: /projects/api/noauth/projects/<int:project_id> - 方法: {'HEAD', 'PUT', 'GET', 'DELETE', 'OPTIONS'} - 终端: projects.get_project_noauth
2025-05-09 16:40:15,182 - app - INFO - 路由: /projects/api/auth/projects - 方法: {'OPTIONS', 'POST'} - 终端: projects.create_project_auth
2025-05-09 16:40:15,182 - app - INFO - 路由: /projects/api/project-managers - 方法: {'GET', 'HEAD', 'OPTIONS'} - 终端: projects.get_project_managers
2025-05-09 16:40:15,182 - app - INFO - 路由: /projects/api/projects - 方法: {'GET', 'HEAD', 'OPTIONS'} - 终端: projects.get_all_projects_api
2025-05-09 16:40:15,183 - app - INFO - 路由: /projects/api/active-projects - 方法: {'GET', 'HEAD', 'OPTIONS'} - 终端: projects.get_active_projects_api
2025-05-09 16:40:15,183 - app - INFO - 路由: /projects/api/projects/<int:project_id>/members - 方法: {'GET', 'HEAD', 'OPTIONS'} - 终端: projects.get_project_members_api
2025-05-09 16:40:15,184 - app - INFO - 路由: /list - 方法: {'GET', 'HEAD', 'OPTIONS'} - 终端: project_root.project_list
2025-05-09 16:40:15,184 - app - INFO - 路由: / - 方法: {'GET', 'HEAD', 'OPTIONS'} - 终端: project_root.get_projects
2025-05-09 16:40:15,185 - app - INFO - 路由: / - 方法: {'OPTIONS', 'POST'} - 终端: project_root.create_project
2025-05-09 16:40:15,185 - app - INFO - 路由: /<int:project_id> - 方法: {'GET', 'HEAD', 'OPTIONS'} - 终端: project_root.get_project
2025-05-09 16:40:15,186 - app - INFO - 路由: /<int:project_id> - 方法: {'OPTIONS', 'PUT'} - 终端: project_root.update_project
2025-05-09 16:40:15,186 - app - INFO - 路由: /<int:project_id> - 方法: {'DELETE', 'OPTIONS'} - 终端: project_root.delete_project
2025-05-09 16:40:15,186 - app - INFO - 路由: /<int:project_id>/members - 方法: {'GET', 'HEAD', 'OPTIONS'} - 终端: project_root.get_project_members
2025-05-09 16:40:15,187 - app - INFO - 路由: /<int:project_id>/members - 方法: {'OPTIONS', 'POST'} - 终端: project_root.add_project_member
2025-05-09 16:40:15,187 - app - INFO - 路由: /<int:project_id>/members/<int:user_id> - 方法: {'DELETE', 'OPTIONS'} - 终端: project_root.remove_project_member
2025-05-09 16:40:15,188 - app - INFO - 路由: /detail/<int:project_id> - 方法: {'GET', 'HEAD', 'OPTIONS'} - 终端: project_root.detail
2025-05-09 16:40:15,189 - app - INFO - 路由: /api/detail/<int:project_id> - 方法: {'GET', 'HEAD', 'OPTIONS'} - 终端: project_root.detail_api
2025-05-09 16:40:15,190 - app - INFO - 路由: /api/projects/<int:project_id> - 方法: {'GET', 'HEAD', 'OPTIONS'} - 终端: project_root.get_project_api
2025-05-09 16:40:15,191 - app - INFO - 路由: /api/projects/<int:project_id> - 方法: {'OPTIONS', 'PUT'} - 终端: project_root.update_project_api
2025-05-09 16:40:15,191 - app - INFO - 路由: /api/projects/<int:project_id> - 方法: {'DELETE', 'OPTIONS'} - 终端: project_root.delete_project_api
2025-05-09 16:40:15,192 - app - INFO - 路由: /api/auth/projects - 方法: {'GET', 'HEAD', 'OPTIONS'} - 终端: project_root.get_projects_api
2025-05-09 16:40:15,192 - app - INFO - 路由: /api/auth/projects/<int:project_id> - 方法: {'GET', 'HEAD', 'OPTIONS'} - 终端: project_root.get_project_auth_api
2025-05-09 16:40:15,192 - app - INFO - 路由: /api/noauth/projects/<int:project_id> - 方法: {'HEAD', 'PUT', 'GET', 'DELETE', 'OPTIONS'} - 终端: project_root.get_project_noauth
2025-05-09 16:40:15,193 - app - INFO - 路由: /api/auth/projects - 方法: {'OPTIONS', 'POST'} - 终端: project_root.create_project_auth
2025-05-09 16:40:15,193 - app - INFO - 路由: /api/project-managers - 方法: {'GET', 'HEAD', 'OPTIONS'} - 终端: project_root.get_project_managers
2025-05-09 16:40:15,194 - app - INFO - 路由: /api/projects - 方法: {'GET', 'HEAD', 'OPTIONS'} - 终端: project_root.get_all_projects_api
2025-05-09 16:40:15,194 - app - INFO - 路由: /api/active-projects - 方法: {'GET', 'HEAD', 'OPTIONS'} - 终端: project_root.get_active_projects_api
2025-05-09 16:40:15,195 - app - INFO - 路由: /api/projects/<int:project_id>/members - 方法: {'GET', 'HEAD', 'OPTIONS'} - 终端: project_root.get_project_members_api
2025-05-09 16:40:15,195 - app - INFO - 路由: /tasks/ - 方法: {'GET', 'HEAD', 'OPTIONS'} - 终端: tasks.get_tasks
2025-05-09 16:40:15,196 - app - INFO - 路由: /tasks/ - 方法: {'OPTIONS', 'POST'} - 终端: tasks.create_task
2025-05-09 16:40:15,196 - app - INFO - 路由: /tasks/<int:task_id> - 方法: {'GET', 'HEAD', 'OPTIONS'} - 终端: tasks.get_task
2025-05-09 16:40:15,196 - app - INFO - 路由: /tasks/<int:task_id> - 方法: {'OPTIONS', 'PUT'} - 终端: tasks.update_task
2025-05-09 16:40:15,196 - app - INFO - 路由: /tasks/<int:task_id> - 方法: {'DELETE', 'OPTIONS'} - 终端: tasks.delete_task
2025-05-09 16:40:15,198 - app - INFO - 路由: /tasks/<int:task_id>/comments - 方法: {'GET', 'HEAD', 'OPTIONS'} - 终端: tasks.get_task_comments
2025-05-09 16:40:15,198 - app - INFO - 路由: /tasks/<int:task_id>/comments - 方法: {'OPTIONS', 'POST'} - 终端: tasks.add_task_comment
2025-05-09 16:40:15,198 - app - INFO - 路由: /tasks/<int:task_id>/attachments - 方法: {'GET', 'HEAD', 'OPTIONS'} - 终端: tasks.get_task_attachments
2025-05-09 16:40:15,199 - app - INFO - 路由: /tasks/<int:task_id>/attachments - 方法: {'OPTIONS', 'POST'} - 终端: tasks.add_task_attachment
2025-05-09 16:40:15,199 - app - INFO - 路由: /tasks/<int:task_id>/resources - 方法: {'GET', 'HEAD', 'OPTIONS'} - 终端: tasks.get_task_resources
2025-05-09 16:40:15,199 - app - INFO - 路由: /tasks/<int:task_id>/subtasks - 方法: {'GET', 'HEAD', 'OPTIONS'} - 终端: tasks.get_subtasks
2025-05-09 16:40:15,200 - app - INFO - 路由: /tasks/<int:task_id>/subtasks - 方法: {'OPTIONS', 'POST'} - 终端: tasks.create_subtask
2025-05-09 16:40:15,200 - app - INFO - 路由: /tasks/<int:task_id>/dependencies - 方法: {'GET', 'HEAD', 'OPTIONS'} - 终端: tasks.get_dependencies
2025-05-09 16:40:15,201 - app - INFO - 路由: /tasks/<int:task_id>/dependencies - 方法: {'OPTIONS', 'POST'} - 终端: tasks.add_dependency
2025-05-09 16:40:15,201 - app - INFO - 路由: /tasks/<int:task_id>/logs - 方法: {'GET', 'HEAD', 'OPTIONS'} - 终端: tasks.get_task_logs
2025-05-09 16:40:15,201 - app - INFO - 路由: /tasks/<int:task_id>/logs - 方法: {'OPTIONS', 'POST'} - 终端: tasks.add_task_log
2025-05-09 16:40:15,202 - app - INFO - 路由: /tasks/project/<int:project_id>/gantt - 方法: {'GET', 'HEAD', 'OPTIONS'} - 终端: tasks.gantt_chart
2025-05-09 16:40:15,202 - app - INFO - 路由: /tasks/project/<int:project_id>/gantt/data - 方法: {'GET', 'HEAD', 'OPTIONS'} - 终端: tasks.get_gantt_data
2025-05-09 16:40:15,202 - app - INFO - 路由: /tasks/<int:task_id>/gantt - 方法: {'OPTIONS', 'PUT'} - 终端: tasks.update_gantt_task
2025-05-09 16:40:15,203 - app - INFO - 路由: /tasks/dependencies/gantt - 方法: {'OPTIONS', 'POST'} - 终端: tasks.create_gantt_dependency
2025-05-09 16:40:15,203 - app - INFO - 路由: /tasks/<int:task_id>/dependencies/<int:dependency_id>/gantt - 方法: {'DELETE', 'OPTIONS'} - 终端: tasks.delete_gantt_dependency
2025-05-09 16:40:15,204 - app - INFO - 路由: /tasks/<int:task_id>/status - 方法: {'OPTIONS', 'PUT'} - 终端: tasks.update_task_status
2025-05-09 16:40:15,204 - app - INFO - 路由: /tasks/api/tasks/dependencies - 方法: {'OPTIONS', 'POST'} - 终端: tasks.add_task_dependency
2025-05-09 16:40:15,204 - app - INFO - 路由: /tasks/<int:task_id>/detail - 方法: {'GET', 'HEAD', 'OPTIONS'} - 终端: tasks.task_detail_api
2025-05-09 16:40:15,205 - app - INFO - 路由: /tasks/api/auth/tasks/<int:task_id>/detail - 方法: {'GET', 'HEAD', 'OPTIONS'} - 终端: tasks.task_detail_api_auth
2025-05-09 16:40:15,205 - app - INFO - 路由: /tasks/<int:task_id>/view - 方法: {'GET', 'HEAD', 'OPTIONS'} - 终端: tasks.task_detail_page
2025-05-09 16:40:15,206 - app - INFO - 路由: /tasks/<int:task_id>/edit - 方法: {'GET', 'HEAD', 'OPTIONS'} - 终端: tasks.edit_task_page
2025-05-09 16:40:15,206 - app - INFO - 路由: /tasks/api/auth/tasks/<int:task_id>/attachments - 方法: {'OPTIONS', 'POST'} - 终端: tasks.add_task_attachment_auth
2025-05-09 16:40:15,207 - app - INFO - 路由: /tasks/api/auth/tasks/<int:task_id>/attachments/<int:attachment_id>/download - 方法: {'GET', 'HEAD', 'OPTIONS'} - 终端: tasks.download_attachment_auth
2025-05-09 16:40:15,207 - app - INFO - 路由: /tasks/api/tasks/<int:task_id>/attachments - 方法: {'OPTIONS', 'POST'} - 终端: tasks.upload_attachment
2025-05-09 16:40:15,207 - app - INFO - 路由: /tasks/api/tasks/<int:task_id>/attachments/<int:attachment_id>/download - 方法: {'GET', 'HEAD', 'OPTIONS'} - 终端: tasks.download_attachment
2025-05-09 16:40:15,208 - app - INFO - 路由: /tasks/api/tasks/<int:task_id>/attachments/<int:attachment_id> - 方法: {'DELETE', 'OPTIONS'} - 终端: tasks.delete_attachment
2025-05-09 16:40:15,208 - app - INFO - 路由: /tasks/api/tasks/<int:task_id>/attachments/<int:attachment_id>/versions - 方法: {'OPTIONS', 'POST'} - 终端: tasks.upload_new_version
2025-05-09 16:40:15,208 - app - INFO - 路由: /tasks/api/tasks/<int:task_id>/attachments/<int:attachment_id>/versions - 方法: {'GET', 'HEAD', 'OPTIONS'} - 终端: tasks.get_attachment_versions
2025-05-09 16:40:15,209 - app - INFO - 路由: /tasks/api/tasks/<int:task_id>/risks - 方法: {'GET', 'HEAD', 'OPTIONS'} - 终端: tasks.task_risks_front_path
2025-05-09 16:40:15,209 - app - INFO - 路由: /tasks/<int:task_id>/risks - 方法: {'OPTIONS', 'POST'} - 终端: tasks.create_task_risk_front_path
2025-05-09 16:40:15,209 - app - INFO - 路由: /tasks/api/tasks/<int:task_id>/progress - 方法: {'GET', 'HEAD', 'OPTIONS'} - 终端: tasks.get_task_progress
2025-05-09 16:40:15,210 - app - INFO - 路由: /tasks/api/tasks/<int:task_id>/progress - 方法: {'OPTIONS', 'POST'} - 终端: tasks.update_task_progress
2025-05-09 16:40:15,210 - app - INFO - 路由: /tasks/api/tasks/<int:task_id>/progress/approve - 方法: {'OPTIONS', 'POST'} - 终端: tasks.approve_task_progress
2025-05-09 16:40:15,210 - app - INFO - 路由: /tasks/list - 方法: {'GET', 'HEAD', 'OPTIONS'} - 终端: tasks.task_list
2025-05-09 16:40:15,211 - app - INFO - 路由: /tasks/api/auth/tasks/<int:task_id>/logs - 方法: {'GET', 'HEAD', 'OPTIONS'} - 终端: tasks.get_task_logs_auth
2025-05-09 16:40:15,211 - app - INFO - 路由: /tasks/api/auth/tasks/<int:task_id>/subtasks - 方法: {'GET', 'HEAD', 'OPTIONS'} - 终端: tasks.get_subtasks_auth
2025-05-09 16:40:15,211 - app - INFO - 路由: /tasks/api/auth/tasks/<int:task_id>/comments - 方法: {'GET', 'HEAD', 'OPTIONS'} - 终端: tasks.get_task_comments_auth
2025-05-09 16:40:15,211 - app - INFO - 路由: /tasks/api/auth/tasks/<int:task_id>/attachments - 方法: {'GET', 'HEAD', 'OPTIONS'} - 终端: tasks.get_task_attachments_auth
2025-05-09 16:40:15,211 - app - INFO - 路由: /tasks/api/auth/tasks/<int:task_id>/risks - 方法: {'GET', 'HEAD', 'OPTIONS'} - 终端: tasks.get_task_risks_auth
2025-05-09 16:40:15,212 - app - INFO - 路由: /tasks/api/auth/tasks/<int:task_id>/risks - 方法: {'OPTIONS', 'POST'} - 终端: tasks.create_task_risk_auth
2025-05-09 16:40:15,212 - app - INFO - 路由: /tasks/api/auth/tasks/<int:task_id>/comments - 方法: {'OPTIONS', 'POST'} - 终端: tasks.add_task_comment_auth
2025-05-09 16:40:15,212 - app - INFO - 路由: /tasks/api/tasks/<int:task_id> - 方法: {'OPTIONS', 'PUT'} - 终端: tasks.api_update_task
2025-05-09 16:40:15,212 - app - INFO - 路由: /tasks/api/tasks/<int:task_id>/update_bypass - 方法: {'OPTIONS', 'PUT'} - 终端: tasks.update_task_bypass_csrf
2025-05-09 16:40:15,212 - app - INFO - 路由: /tasks/get-csrf-token - 方法: {'GET', 'HEAD', 'OPTIONS'} - 终端: tasks.get_csrf_token
2025-05-09 16:40:15,213 - app - INFO - 路由: /tasks/api/tasks/<int:task_id>/no_csrf - 方法: {'OPTIONS', 'PUT'} - 终端: tasks.update_task_no_csrf
2025-05-09 16:40:15,213 - app - INFO - 路由: /tasks/api/tasks/<int:task_id>/detail - 方法: {'GET', 'HEAD', 'OPTIONS'} - 终端: tasks.api_tasks_detail
2025-05-09 16:40:15,267 - app - WARNING - team_bp 未定义或无法导入
2025-05-09 16:40:15,384 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-05-09 16:40:15,386 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions 
WHERE permissions.name = ?
 LIMIT ? OFFSET ?
2025-05-09 16:40:15,386 - sqlalchemy.engine.Engine - INFO - [generated in 0.00042s] ('manage_users', 1, 0)
2025-05-09 16:40:15,387 - app.utils.permissions - INFO - 更新权限: manage_users
2025-05-09 16:40:15,388 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions 
WHERE permissions.name = ?
 LIMIT ? OFFSET ?
2025-05-09 16:40:15,388 - sqlalchemy.engine.Engine - INFO - [cached since 0.002378s ago] ('manage_roles', 1, 0)
2025-05-09 16:40:15,389 - app.utils.permissions - INFO - 更新权限: manage_roles
2025-05-09 16:40:15,389 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions 
WHERE permissions.name = ?
 LIMIT ? OFFSET ?
2025-05-09 16:40:15,389 - sqlalchemy.engine.Engine - INFO - [cached since 0.003174s ago] ('manage_all_projects', 1, 0)
2025-05-09 16:40:15,389 - app.utils.permissions - INFO - 更新权限: manage_all_projects
2025-05-09 16:40:15,389 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions 
WHERE permissions.name = ?
 LIMIT ? OFFSET ?
2025-05-09 16:40:15,390 - sqlalchemy.engine.Engine - INFO - [cached since 0.003857s ago] ('manage_project', 1, 0)
2025-05-09 16:40:15,390 - app.utils.permissions - INFO - 更新权限: manage_project
2025-05-09 16:40:15,390 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions 
WHERE permissions.name = ?
 LIMIT ? OFFSET ?
2025-05-09 16:40:15,391 - sqlalchemy.engine.Engine - INFO - [cached since 0.004895s ago] ('manage_all_tasks', 1, 0)
2025-05-09 16:40:15,391 - app.utils.permissions - INFO - 更新权限: manage_all_tasks
2025-05-09 16:40:15,391 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions 
WHERE permissions.name = ?
 LIMIT ? OFFSET ?
2025-05-09 16:40:15,392 - sqlalchemy.engine.Engine - INFO - [cached since 0.005917s ago] ('manage_task', 1, 0)
2025-05-09 16:40:15,392 - app.utils.permissions - INFO - 更新权限: manage_task
2025-05-09 16:40:15,392 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions 
WHERE permissions.name = ?
 LIMIT ? OFFSET ?
2025-05-09 16:40:15,392 - sqlalchemy.engine.Engine - INFO - [cached since 0.006867s ago] ('view_project', 1, 0)
2025-05-09 16:40:15,393 - app.utils.permissions - INFO - 更新权限: view_project
2025-05-09 16:40:15,393 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions 
WHERE permissions.name = ?
 LIMIT ? OFFSET ?
2025-05-09 16:40:15,394 - sqlalchemy.engine.Engine - INFO - [cached since 0.008185s ago] ('view_task', 1, 0)
2025-05-09 16:40:15,395 - app.utils.permissions - INFO - 更新权限: view_task
2025-05-09 16:40:15,395 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions 
WHERE permissions.name = ?
 LIMIT ? OFFSET ?
2025-05-09 16:40:15,395 - sqlalchemy.engine.Engine - INFO - [cached since 0.009683s ago] ('manage_resources', 1, 0)
2025-05-09 16:40:15,395 - app.utils.permissions - INFO - 更新权限: manage_resources
2025-05-09 16:40:15,396 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions 
WHERE permissions.name = ?
 LIMIT ? OFFSET ?
2025-05-09 16:40:15,396 - sqlalchemy.engine.Engine - INFO - [cached since 0.01061s ago] ('manage_risks', 1, 0)
2025-05-09 16:40:15,396 - app.utils.permissions - INFO - 更新权限: manage_risks
2025-05-09 16:40:15,397 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions 
WHERE permissions.name = ?
 LIMIT ? OFFSET ?
2025-05-09 16:40:15,397 - sqlalchemy.engine.Engine - INFO - [cached since 0.01147s ago] ('view_reports', 1, 0)
2025-05-09 16:40:15,397 - app.utils.permissions - INFO - 更新权限: view_reports
2025-05-09 16:40:15,397 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions 
WHERE permissions.name = ?
 LIMIT ? OFFSET ?
2025-05-09 16:40:15,397 - sqlalchemy.engine.Engine - INFO - [cached since 0.01212s ago] ('create_task', 1, 0)
2025-05-09 16:40:15,398 - app.utils.permissions - INFO - 更新权限: create_task
2025-05-09 16:40:15,398 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions 
WHERE permissions.name = ?
 LIMIT ? OFFSET ?
2025-05-09 16:40:15,398 - sqlalchemy.engine.Engine - INFO - [cached since 0.01275s ago] ('create_project', 1, 0)
2025-05-09 16:40:15,398 - app.utils.permissions - INFO - 更新权限: create_project
2025-05-09 16:40:15,399 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions 
WHERE permissions.name = ?
 LIMIT ? OFFSET ?
2025-05-09 16:40:15,399 - sqlalchemy.engine.Engine - INFO - [cached since 0.01339s ago] ('assign_task', 1, 0)
2025-05-09 16:40:15,399 - app.utils.permissions - INFO - 更新权限: assign_task
2025-05-09 16:40:15,399 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions 
WHERE permissions.name = ?
 LIMIT ? OFFSET ?
2025-05-09 16:40:15,399 - sqlalchemy.engine.Engine - INFO - [cached since 0.014s ago] ('change_project_status', 1, 0)
2025-05-09 16:40:15,399 - app.utils.permissions - INFO - 更新权限: change_project_status
2025-05-09 16:40:15,401 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions 
WHERE permissions.name = ?
 LIMIT ? OFFSET ?
2025-05-09 16:40:15,401 - sqlalchemy.engine.Engine - INFO - [cached since 0.01486s ago] ('change_task_status', 1, 0)
2025-05-09 16:40:15,401 - app.utils.permissions - INFO - 更新权限: change_task_status
2025-05-09 16:40:15,402 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-05-09 16:40:15,402 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-05-09 16:40:15,403 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions
2025-05-09 16:40:15,403 - sqlalchemy.engine.Engine - INFO - [generated in 0.00028s] ()
2025-05-09 16:40:15,404 - sqlalchemy.engine.Engine - INFO - SELECT roles.id AS roles_id, roles.name AS roles_name, roles.description AS roles_description, roles.created_at AS roles_created_at 
FROM roles 
WHERE roles.name = ?
 LIMIT ? OFFSET ?
2025-05-09 16:40:15,404 - sqlalchemy.engine.Engine - INFO - [generated in 0.00042s] ('admin', 1, 0)
2025-05-09 16:40:15,405 - app.utils.permissions - INFO - 更新角色: admin
2025-05-09 16:40:15,406 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions, role_permissions 
WHERE ? = role_permissions.role_id AND permissions.id = role_permissions.permission_id
2025-05-09 16:40:15,406 - sqlalchemy.engine.Engine - INFO - [generated in 0.00028s] (1,)
2025-05-09 16:40:15,408 - app.utils.permissions - INFO - 为管理员角色添加所有权限: 16个
2025-05-09 16:40:15,408 - sqlalchemy.engine.Engine - INFO - SELECT roles.id AS roles_id, roles.name AS roles_name, roles.description AS roles_description, roles.created_at AS roles_created_at 
FROM roles 
WHERE roles.name = ?
 LIMIT ? OFFSET ?
2025-05-09 16:40:15,408 - sqlalchemy.engine.Engine - INFO - [cached since 0.004289s ago] ('manager', 1, 0)
2025-05-09 16:40:15,409 - app.utils.permissions - INFO - 更新角色: manager
2025-05-09 16:40:15,409 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions, role_permissions 
WHERE ? = role_permissions.role_id AND permissions.id = role_permissions.permission_id
2025-05-09 16:40:15,409 - sqlalchemy.engine.Engine - INFO - [cached since 0.002304s ago] (2,)
2025-05-09 16:40:15,409 - app.utils.permissions - INFO - 为角色 manager 添加权限: manage_project
2025-05-09 16:40:15,409 - app.utils.permissions - INFO - 为角色 manager 添加权限: manage_task
2025-05-09 16:40:15,410 - app.utils.permissions - INFO - 为角色 manager 添加权限: view_project
2025-05-09 16:40:15,410 - app.utils.permissions - INFO - 为角色 manager 添加权限: view_task
2025-05-09 16:40:15,410 - app.utils.permissions - INFO - 为角色 manager 添加权限: manage_resources
2025-05-09 16:40:15,410 - app.utils.permissions - INFO - 为角色 manager 添加权限: manage_risks
2025-05-09 16:40:15,411 - app.utils.permissions - INFO - 为角色 manager 添加权限: view_reports
2025-05-09 16:40:15,411 - app.utils.permissions - INFO - 为角色 manager 添加权限: create_project
2025-05-09 16:40:15,411 - app.utils.permissions - INFO - 为角色 manager 添加权限: create_task
2025-05-09 16:40:15,411 - app.utils.permissions - INFO - 为角色 manager 添加权限: assign_task
2025-05-09 16:40:15,411 - app.utils.permissions - INFO - 为角色 manager 添加权限: change_project_status
2025-05-09 16:40:15,411 - app.utils.permissions - INFO - 为角色 manager 添加权限: change_task_status
2025-05-09 16:40:15,412 - sqlalchemy.engine.Engine - INFO - SELECT roles.id AS roles_id, roles.name AS roles_name, roles.description AS roles_description, roles.created_at AS roles_created_at 
FROM roles 
WHERE roles.name = ?
 LIMIT ? OFFSET ?
2025-05-09 16:40:15,412 - sqlalchemy.engine.Engine - INFO - [cached since 0.008149s ago] ('user', 1, 0)
2025-05-09 16:40:15,412 - app.utils.permissions - INFO - 更新角色: user
2025-05-09 16:40:15,413 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions, role_permissions 
WHERE ? = role_permissions.role_id AND permissions.id = role_permissions.permission_id
2025-05-09 16:40:15,413 - sqlalchemy.engine.Engine - INFO - [cached since 0.006089s ago] (5,)
2025-05-09 16:40:15,413 - app.utils.permissions - INFO - 为角色 user 添加权限: view_project
2025-05-09 16:40:15,413 - app.utils.permissions - INFO - 为角色 user 添加权限: view_task
2025-05-09 16:40:15,414 - app.utils.permissions - INFO - 为角色 user 添加权限: view_reports
2025-05-09 16:40:15,414 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-05-09 16:40:15,414 - app.utils.permissions - INFO - 角色和权限初始化完成
2025-05-09 16:40:15,414 - __main__ - INFO - 角色和权限初始化成功
2025-05-09 16:40:15,415 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-05-09 16:40:15,416 - sqlalchemy.engine.Engine - INFO - SELECT users.id AS users_id, users.username AS users_username, users.email AS users_email, users.name AS users_name, users.password_hash AS users_password_hash, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.last_login AS users_last_login 
FROM users 
WHERE users.username = ?
 LIMIT ? OFFSET ?
2025-05-09 16:40:15,416 - sqlalchemy.engine.Engine - INFO - [generated in 0.00032s] ('system', 1, 0)
2025-05-09 16:40:15,417 - sqlalchemy.engine.Engine - INFO - SELECT projects.id AS projects_id, projects.name AS projects_name, projects.description AS projects_description, projects.status AS projects_status, projects.start_date AS projects_start_date, projects.end_date AS projects_end_date, projects.progress AS projects_progress, projects.created_at AS projects_created_at, projects.updated_at AS projects_updated_at, projects.manager_id AS projects_manager_id, projects.owner_id AS projects_owner_id 
FROM projects 
WHERE projects.name = ?
 LIMIT ? OFFSET ?
2025-05-09 16:40:15,418 - sqlalchemy.engine.Engine - INFO - [generated in 0.00030s] ('Test Project', 1, 0)
2025-05-09 16:40:15,418 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-05-09 16:40:15,418 - __main__ - INFO - 数据库初始化完成
2025-05-09 16:40:15,419 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-05-09 16:40:15,419 - sqlalchemy.engine.Engine - INFO - SELECT users.id AS users_id, users.username AS users_username, users.email AS users_email, users.name AS users_name, users.password_hash AS users_password_hash, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.last_login AS users_last_login 
FROM users 
WHERE users.username = ?
 LIMIT ? OFFSET ?
2025-05-09 16:40:15,419 - sqlalchemy.engine.Engine - INFO - [cached since 0.003462s ago] ('system', 1, 0)
2025-05-09 16:40:15,426 - sqlalchemy.engine.Engine - INFO - INSERT INTO resource_usages (user_id, cpu_usage, memory_usage, disk_usage, network_usage, recorded_at) VALUES (?, ?, ?, ?, ?, ?)
2025-05-09 16:40:15,426 - sqlalchemy.engine.Engine - INFO - [generated in 0.00040s] (2, 20.4, 55.1, 10.9, 0.0, '2025-05-09 08:40:15.424647')
2025-05-09 16:40:15,427 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-05-09 16:40:15,431 - __main__ - INFO - 系统资源检查完成
2025-05-09 16:40:15,431 - __main__ - INFO - 开始清理旧数据
2025-05-09 16:40:15,431 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-05-09 16:40:15,432 - sqlalchemy.engine.Engine - INFO - DELETE FROM resource_usages WHERE resource_usages.recorded_at < ?
2025-05-09 16:40:15,432 - sqlalchemy.engine.Engine - INFO - [generated in 0.00032s] ('2025-04-09 08:40:15.431443',)
2025-05-09 16:40:15,433 - __main__ - INFO - 删除了 0 条过期的资源使用记录
2025-05-09 16:40:15,434 - sqlalchemy.engine.Engine - INFO - DELETE FROM system_alerts WHERE system_alerts.is_resolved = 1 AND system_alerts.created_at < ?
2025-05-09 16:40:15,434 - sqlalchemy.engine.Engine - INFO - [generated in 0.00028s] ('2025-05-02 08:40:15.433720',)
2025-05-09 16:40:15,434 - __main__ - INFO - 删除了 0 条已解决的过期警报
2025-05-09 16:40:15,435 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-05-09 16:40:15,435 - __main__ - INFO - 旧数据清理完成
2025-05-09 16:40:15,448 - werkzeug - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:5000
 * Running on http://192.168.0.75:5000
2025-05-09 16:40:15,448 - werkzeug - INFO - [33mPress CTRL+C to quit[0m
2025-05-09 16:40:15,448 - werkzeug - INFO -  * Restarting with stat
2025-05-09 16:40:16,012 - app - INFO - File logging handler initialized successfully
2025-05-09 16:40:16,012 - app - INFO - Console logging handler initialized successfully
2025-05-09 16:40:16,012 - app - INFO - Application logging configuration completed
2025-05-09 16:40:16,013 - app - INFO - Development configuration initialized
2025-05-09 16:40:16,041 - app - INFO - Logging setup completed successfully
2025-05-09 16:40:16,280 - app - INFO - 已注册的路由:
2025-05-09 16:40:16,282 - app - INFO - 路由: /static/<path:filename> - 方法: {'HEAD', 'GET', 'OPTIONS'} - 终端: static
2025-05-09 16:40:16,282 - app - INFO - 路由: /api/users/<int:user_id> - 方法: {'HEAD', 'PUT', 'OPTIONS', 'DELETE', 'GET', 'POST'} - 终端: user_api_exempt.user_api_exempt_route
2025-05-09 16:40:16,282 - app - INFO - 路由: /api/users - 方法: {'HEAD', 'PUT', 'OPTIONS', 'DELETE', 'GET', 'POST'} - 终端: user_api_exempt.user_api_exempt_route
2025-05-09 16:40:16,283 - app - INFO - 路由: /tasks/<int:task_id>/dependencies/<int:dependency_id>/gantt - 方法: {'DELETE', 'OPTIONS'} - 终端: task_api_exempt.task_api_exempt_route
2025-05-09 16:40:16,283 - app - INFO - 路由: /tasks/<int:task_id>/gantt - 方法: {'PUT', 'OPTIONS'} - 终端: task_api_exempt.task_api_exempt_route
2025-05-09 16:40:16,283 - app - INFO - 路由: /tasks/project/<int:project_id>/gantt - 方法: {'HEAD', 'GET', 'OPTIONS'} - 终端: task_api_exempt.task_api_exempt_route
2025-05-09 16:40:16,283 - app - INFO - 路由: /tasks/project/<int:project_id>/gantt/data - 方法: {'HEAD', 'GET', 'OPTIONS'} - 终端: task_api_exempt.task_api_exempt_route
2025-05-09 16:40:16,284 - app - INFO - 路由: /api/tasks/<int:task_id>/no_csrf - 方法: {'HEAD', 'PUT', 'OPTIONS', 'DELETE', 'GET', 'POST'} - 终端: task_api_exempt.task_api_exempt_route
2025-05-09 16:40:16,284 - app - INFO - 路由: /api/tasks/<int:task_id> - 方法: {'HEAD', 'PUT', 'OPTIONS', 'DELETE', 'GET', 'POST'} - 终端: task_api_exempt.task_api_exempt_route
2025-05-09 16:40:16,284 - app - INFO - 路由: /tasks/dependencies/gantt - 方法: {'POST', 'OPTIONS'} - 终端: task_api_exempt.task_api_exempt_route
2025-05-09 16:40:16,284 - app - INFO - 路由: /api/tasks - 方法: {'HEAD', 'PUT', 'OPTIONS', 'DELETE', 'GET', 'POST'} - 终端: task_api_exempt.task_api_exempt_route
2025-05-09 16:40:16,285 - app - INFO - 路由: /login - 方法: {'HEAD', 'GET', 'OPTIONS'} - 终端: auth.login_page
2025-05-09 16:40:16,285 - app - INFO - 路由: /login - 方法: {'POST', 'OPTIONS'} - 终端: auth.login
2025-05-09 16:40:16,285 - app - INFO - 路由: /register - 方法: {'HEAD', 'GET', 'OPTIONS'} - 终端: auth.register_page
2025-05-09 16:40:16,285 - app - INFO - 路由: /register - 方法: {'POST', 'OPTIONS'} - 终端: auth.register
2025-05-09 16:40:16,285 - app - INFO - 路由: /logout - 方法: {'HEAD', 'GET', 'POST', 'OPTIONS'} - 终端: auth.logout
2025-05-09 16:40:16,285 - app - INFO - 路由: /refresh - 方法: {'POST', 'OPTIONS'} - 终端: auth.refresh
2025-05-09 16:40:16,286 - app - INFO - 路由: /profile - 方法: {'HEAD', 'GET', 'OPTIONS'} - 终端: auth.profile
2025-05-09 16:40:16,286 - app - INFO - 路由: /profile - 方法: {'PUT', 'OPTIONS'} - 终端: auth.update_profile
2025-05-09 16:40:16,286 - app - INFO - 路由: /users - 方法: {'HEAD', 'GET', 'OPTIONS'} - 终端: auth.get_users
2025-05-09 16:40:16,288 - app - INFO - 路由: /users/<int:user_id> - 方法: {'HEAD', 'GET', 'OPTIONS'} - 终端: auth.get_user_by_id
2025-05-09 16:40:16,288 - app - INFO - 路由: /update_user/<int:user_id> - 方法: {'PUT', 'OPTIONS'} - 终端: auth.update_user
2025-05-09 16:40:16,288 - app - INFO - 路由: /roles - 方法: {'HEAD', 'GET', 'OPTIONS'} - 终端: auth.get_roles
2025-05-09 16:40:16,288 - app - INFO - 路由: /permissions - 方法: {'HEAD', 'GET', 'OPTIONS'} - 终端: auth.get_permissions
2025-05-09 16:40:16,289 - app - INFO - 路由: /permissions - 方法: {'POST', 'OPTIONS'} - 终端: auth.create_permission
2025-05-09 16:40:16,289 - app - INFO - 路由: /permissions/<int:permission_id> - 方法: {'HEAD', 'GET', 'OPTIONS'} - 终端: auth.get_permission
2025-05-09 16:40:16,289 - app - INFO - 路由: /permissions/<int:permission_id> - 方法: {'PUT', 'OPTIONS'} - 终端: auth.update_permission
2025-05-09 16:40:16,289 - app - INFO - 路由: /permissions/<int:permission_id> - 方法: {'DELETE', 'OPTIONS'} - 终端: auth.delete_permission
2025-05-09 16:40:16,290 - app - INFO - 路由: /roles - 方法: {'POST', 'OPTIONS'} - 终端: auth.create_role
2025-05-09 16:40:16,290 - app - INFO - 路由: /roles/<int:role_id> - 方法: {'HEAD', 'GET', 'OPTIONS'} - 终端: auth.get_role
2025-05-09 16:40:16,290 - app - INFO - 路由: /roles/<int:role_id>/permissions - 方法: {'PUT', 'OPTIONS'} - 终端: auth.update_role_permissions
2025-05-09 16:40:16,290 - app - INFO - 路由: /roles/<int:role_id> - 方法: {'DELETE', 'OPTIONS'} - 终端: auth.delete_role
2025-05-09 16:40:16,291 - app - INFO - 路由: /dashboard - 方法: {'HEAD', 'GET', 'OPTIONS'} - 终端: auth.dashboard
2025-05-09 16:40:16,291 - app - INFO - 路由: /dashboard/redirect - 方法: {'HEAD', 'GET', 'POST', 'OPTIONS'} - 终端: auth.dashboard_redirect
2025-05-09 16:40:16,291 - app - INFO - 路由: /create_test_user - 方法: {'POST', 'OPTIONS'} - 终端: auth.create_test_user
2025-05-09 16:40:16,291 - app - INFO - 路由: /check - 方法: {'HEAD', 'GET', 'OPTIONS'} - 终端: auth.check_auth
2025-05-09 16:40:16,292 - app - INFO - 路由: /create_test_project - 方法: {'POST', 'OPTIONS'} - 终端: auth.create_test_project
2025-05-09 16:40:16,292 - app - INFO - 路由: /logout_all - 方法: {'POST', 'OPTIONS'} - 终端: auth.logout_all
2025-05-09 16:40:16,292 - app - INFO - 路由: /dashboard/data - 方法: {'HEAD', 'GET', 'OPTIONS'} - 终端: auth.dashboard_data
2025-05-09 16:40:16,292 - app - INFO - 路由: /check_token - 方法: {'HEAD', 'GET', 'OPTIONS'} - 终端: auth.check_token
2025-05-09 16:40:16,292 - app - INFO - 路由: /create_user - 方法: {'POST', 'OPTIONS'} - 终端: auth.create_user
2025-05-09 16:40:16,293 - app - INFO - 路由: /user_info - 方法: {'HEAD', 'GET', 'OPTIONS'} - 终端: auth.get_user_info
2025-05-09 16:40:16,293 - app - INFO - 路由: /user/<int:user_id> - 方法: {'DELETE', 'OPTIONS'} - 终端: auth.delete_user
2025-05-09 16:40:16,293 - app - INFO - 路由: /users/<int:user_id>/roles - 方法: {'HEAD', 'GET', 'OPTIONS'} - 终端: auth.get_user_roles
2025-05-09 16:40:16,293 - app - INFO - 路由: /users/<int:user_id>/roles - 方法: {'PUT', 'OPTIONS'} - 终端: auth.update_user_roles
2025-05-09 16:40:16,293 - app - INFO - 路由: /users/<int:user_id>/notifications - 方法: {'HEAD', 'GET', 'OPTIONS'} - 终端: auth.get_user_notifications
2025-05-09 16:40:16,293 - app - INFO - 路由: /notifications/<int:notification_id>/read - 方法: {'PUT', 'OPTIONS'} - 终端: auth.mark_notification_as_read
2025-05-09 16:40:16,294 - app - INFO - 路由: /notifications/read_all - 方法: {'PUT', 'OPTIONS'} - 终端: auth.mark_all_notifications_as_read
2025-05-09 16:40:16,294 - app - INFO - 路由: /change-password - 方法: {'POST', 'OPTIONS'} - 终端: auth.change_password
2025-05-09 16:40:16,294 - app - INFO - 路由: /reset-password - 方法: {'HEAD', 'GET', 'OPTIONS'} - 终端: auth.reset_password_page
2025-05-09 16:40:16,294 - app - INFO - 路由: /verify-email/confirm - 方法: {'HEAD', 'GET', 'OPTIONS'} - 终端: auth.verify_email_confirm_page
2025-05-09 16:40:16,294 - app - INFO - 路由: /auth/csrf-token - 方法: {'HEAD', 'GET', 'OPTIONS'} - 终端: auth.get_csrf_token
2025-05-09 16:40:16,296 - app - INFO - 路由: /api/users/<int:user_id> - 方法: {'PUT', 'OPTIONS'} - 终端: auth.api_update_user
2025-05-09 16:40:16,296 - app - INFO - 路由: /api/users/<int:user_id> - 方法: {'DELETE', 'OPTIONS'} - 终端: auth.api_delete_user
2025-05-09 16:40:16,296 - app - INFO - 路由: /api/users - 方法: {'HEAD', 'GET', 'OPTIONS'} - 终端: auth.api_get_users
2025-05-09 16:40:16,296 - app - INFO - 路由: /api/users - 方法: {'POST', 'OPTIONS'} - 终端: auth.api_create_user
2025-05-09 16:40:16,296 - app - INFO - 路由: /auth/users/<int:user_id> - 方法: {'HEAD', 'GET', 'OPTIONS'} - 终端: auth.get_user_details
2025-05-09 16:40:16,297 - app - INFO - 路由: /api/users/<int:user_id> - 方法: {'HEAD', 'PUT', 'OPTIONS', 'DELETE', 'GET'} - 终端: auth.api_user_operations
2025-05-09 16:40:16,297 - app - INFO - 路由: /auth/user-csrf-token - 方法: {'HEAD', 'GET', 'OPTIONS'} - 终端: auth.get_user_csrf_token
2025-05-09 16:40:16,297 - app - INFO - 路由: /main/ - 方法: {'HEAD', 'GET', 'OPTIONS'} - 终端: main.index
2025-05-09 16:40:16,297 - app - INFO - 路由: /main/dashboard - 方法: {'HEAD', 'GET', 'OPTIONS'} - 终端: main.dashboard
2025-05-09 16:40:16,298 - app - INFO - 路由: /main/check_token - 方法: {'HEAD', 'GET', 'OPTIONS'} - 终端: main.check_token
2025-05-09 16:40:16,298 - app - INFO - 路由: /main/projects - 方法: {'HEAD', 'GET', 'OPTIONS'} - 终端: main.projects
2025-05-09 16:40:16,298 - app - INFO - 路由: /main/tasks - 方法: {'HEAD', 'GET', 'OPTIONS'} - 终端: main.tasks
2025-05-09 16:40:16,298 - app - INFO - 路由: /main/risks - 方法: {'HEAD', 'GET', 'OPTIONS'} - 终端: main.risks
2025-05-09 16:40:16,298 - app - INFO - 路由: /main/reports - 方法: {'HEAD', 'GET', 'OPTIONS'} - 终端: main.reports
2025-05-09 16:40:16,298 - app - INFO - 路由: /main/resources - 方法: {'HEAD', 'GET', 'OPTIONS'} - 终端: main.resources
2025-05-09 16:40:16,298 - app - INFO - 路由: /main/profile - 方法: {'HEAD', 'GET', 'OPTIONS'} - 终端: main.profile
2025-05-09 16:40:16,298 - app - INFO - 路由: /main/system/status - 方法: {'HEAD', 'GET', 'OPTIONS'} - 终端: main.system_status
2025-05-09 16:40:16,299 - app - INFO - 路由: /main/api/dashboard/data - 方法: {'HEAD', 'GET', 'OPTIONS'} - 终端: main.get_dashboard_data
2025-05-09 16:40:16,299 - app - INFO - 路由: /main/test - 方法: {'HEAD', 'GET', 'OPTIONS'} - 终端: main.test_route
2025-05-09 16:40:16,299 - app - INFO - 路由: /main/projects/detail/<int:project_id> - 方法: {'HEAD', 'GET', 'OPTIONS'} - 终端: main.project_detail_redirect
2025-05-09 16:40:16,299 - app - INFO - 路由: /main/users - 方法: {'HEAD', 'GET', 'OPTIONS'} - 终端: main.users
2025-05-09 16:40:16,299 - app - INFO - 路由: /main/debug/projects - 方法: {'HEAD', 'GET', 'OPTIONS'} - 终端: main.debug_projects
2025-05-09 16:40:16,299 - app - INFO - 路由: /main/simple/projects - 方法: {'HEAD', 'GET', 'OPTIONS'} - 终端: main.simple_projects
2025-05-09 16:40:16,300 - app - INFO - 路由: /main/static-test - 方法: {'HEAD', 'GET', 'OPTIONS'} - 终端: main.static_test
2025-05-09 16:40:16,300 - app - INFO - 路由: /main/print-projects - 方法: {'HEAD', 'GET', 'OPTIONS'} - 终端: main.print_projects
2025-05-09 16:40:16,300 - app - INFO - 路由: /main/bypass-projects - 方法: {'HEAD', 'GET', 'OPTIONS'} - 终端: main.bypass_projects
2025-05-09 16:40:16,300 - app - INFO - 路由: /main/debug-projects - 方法: {'HEAD', 'GET', 'OPTIONS'} - 终端: main.debug_projects_api
2025-05-09 16:40:16,300 - app - INFO - 路由: /projects/list - 方法: {'HEAD', 'GET', 'OPTIONS'} - 终端: projects.project_list
2025-05-09 16:40:16,301 - app - INFO - 路由: /projects/ - 方法: {'HEAD', 'GET', 'OPTIONS'} - 终端: projects.get_projects
2025-05-09 16:40:16,301 - app - INFO - 路由: /projects/ - 方法: {'POST', 'OPTIONS'} - 终端: projects.create_project
2025-05-09 16:40:16,301 - app - INFO - 路由: /projects/<int:project_id> - 方法: {'HEAD', 'GET', 'OPTIONS'} - 终端: projects.get_project
2025-05-09 16:40:16,303 - app - INFO - 路由: /projects/<int:project_id> - 方法: {'PUT', 'OPTIONS'} - 终端: projects.update_project
2025-05-09 16:40:16,303 - app - INFO - 路由: /projects/<int:project_id> - 方法: {'DELETE', 'OPTIONS'} - 终端: projects.delete_project
2025-05-09 16:40:16,303 - app - INFO - 路由: /projects/<int:project_id>/members - 方法: {'HEAD', 'GET', 'OPTIONS'} - 终端: projects.get_project_members
2025-05-09 16:40:16,303 - app - INFO - 路由: /projects/<int:project_id>/members - 方法: {'POST', 'OPTIONS'} - 终端: projects.add_project_member
2025-05-09 16:40:16,305 - app - INFO - 路由: /projects/<int:project_id>/members/<int:user_id> - 方法: {'DELETE', 'OPTIONS'} - 终端: projects.remove_project_member
2025-05-09 16:40:16,305 - app - INFO - 路由: /projects/detail/<int:project_id> - 方法: {'HEAD', 'GET', 'OPTIONS'} - 终端: projects.detail
2025-05-09 16:40:16,305 - app - INFO - 路由: /projects/api/detail/<int:project_id> - 方法: {'HEAD', 'GET', 'OPTIONS'} - 终端: projects.detail_api
2025-05-09 16:40:16,306 - app - INFO - 路由: /projects/api/projects/<int:project_id> - 方法: {'HEAD', 'GET', 'OPTIONS'} - 终端: projects.get_project_api
2025-05-09 16:40:16,306 - app - INFO - 路由: /projects/api/projects/<int:project_id> - 方法: {'PUT', 'OPTIONS'} - 终端: projects.update_project_api
2025-05-09 16:40:16,306 - app - INFO - 路由: /projects/api/projects/<int:project_id> - 方法: {'DELETE', 'OPTIONS'} - 终端: projects.delete_project_api
2025-05-09 16:40:16,306 - app - INFO - 路由: /projects/api/auth/projects - 方法: {'HEAD', 'GET', 'OPTIONS'} - 终端: projects.get_projects_api
2025-05-09 16:40:16,306 - app - INFO - 路由: /projects/api/auth/projects/<int:project_id> - 方法: {'HEAD', 'GET', 'OPTIONS'} - 终端: projects.get_project_auth_api
2025-05-09 16:40:16,307 - app - INFO - 路由: /projects/api/noauth/projects/<int:project_id> - 方法: {'HEAD', 'PUT', 'OPTIONS', 'DELETE', 'GET'} - 终端: projects.get_project_noauth
2025-05-09 16:40:16,307 - app - INFO - 路由: /projects/api/auth/projects - 方法: {'POST', 'OPTIONS'} - 终端: projects.create_project_auth
2025-05-09 16:40:16,307 - app - INFO - 路由: /projects/api/project-managers - 方法: {'HEAD', 'GET', 'OPTIONS'} - 终端: projects.get_project_managers
2025-05-09 16:40:16,307 - app - INFO - 路由: /projects/api/projects - 方法: {'HEAD', 'GET', 'OPTIONS'} - 终端: projects.get_all_projects_api
2025-05-09 16:40:16,307 - app - INFO - 路由: /projects/api/active-projects - 方法: {'HEAD', 'GET', 'OPTIONS'} - 终端: projects.get_active_projects_api
2025-05-09 16:40:16,307 - app - INFO - 路由: /projects/api/projects/<int:project_id>/members - 方法: {'HEAD', 'GET', 'OPTIONS'} - 终端: projects.get_project_members_api
2025-05-09 16:40:16,308 - app - INFO - 路由: /list - 方法: {'HEAD', 'GET', 'OPTIONS'} - 终端: project_root.project_list
2025-05-09 16:40:16,308 - app - INFO - 路由: / - 方法: {'HEAD', 'GET', 'OPTIONS'} - 终端: project_root.get_projects
2025-05-09 16:40:16,308 - app - INFO - 路由: / - 方法: {'POST', 'OPTIONS'} - 终端: project_root.create_project
2025-05-09 16:40:16,308 - app - INFO - 路由: /<int:project_id> - 方法: {'HEAD', 'GET', 'OPTIONS'} - 终端: project_root.get_project
2025-05-09 16:40:16,308 - app - INFO - 路由: /<int:project_id> - 方法: {'PUT', 'OPTIONS'} - 终端: project_root.update_project
2025-05-09 16:40:16,308 - app - INFO - 路由: /<int:project_id> - 方法: {'DELETE', 'OPTIONS'} - 终端: project_root.delete_project
2025-05-09 16:40:16,308 - app - INFO - 路由: /<int:project_id>/members - 方法: {'HEAD', 'GET', 'OPTIONS'} - 终端: project_root.get_project_members
2025-05-09 16:40:16,309 - app - INFO - 路由: /<int:project_id>/members - 方法: {'POST', 'OPTIONS'} - 终端: project_root.add_project_member
2025-05-09 16:40:16,309 - app - INFO - 路由: /<int:project_id>/members/<int:user_id> - 方法: {'DELETE', 'OPTIONS'} - 终端: project_root.remove_project_member
2025-05-09 16:40:16,309 - app - INFO - 路由: /detail/<int:project_id> - 方法: {'HEAD', 'GET', 'OPTIONS'} - 终端: project_root.detail
2025-05-09 16:40:16,309 - app - INFO - 路由: /api/detail/<int:project_id> - 方法: {'HEAD', 'GET', 'OPTIONS'} - 终端: project_root.detail_api
2025-05-09 16:40:16,309 - app - INFO - 路由: /api/projects/<int:project_id> - 方法: {'HEAD', 'GET', 'OPTIONS'} - 终端: project_root.get_project_api
2025-05-09 16:40:16,309 - app - INFO - 路由: /api/projects/<int:project_id> - 方法: {'PUT', 'OPTIONS'} - 终端: project_root.update_project_api
2025-05-09 16:40:16,309 - app - INFO - 路由: /api/projects/<int:project_id> - 方法: {'DELETE', 'OPTIONS'} - 终端: project_root.delete_project_api
2025-05-09 16:40:16,310 - app - INFO - 路由: /api/auth/projects - 方法: {'HEAD', 'GET', 'OPTIONS'} - 终端: project_root.get_projects_api
2025-05-09 16:40:16,310 - app - INFO - 路由: /api/auth/projects/<int:project_id> - 方法: {'HEAD', 'GET', 'OPTIONS'} - 终端: project_root.get_project_auth_api
2025-05-09 16:40:16,310 - app - INFO - 路由: /api/noauth/projects/<int:project_id> - 方法: {'HEAD', 'PUT', 'OPTIONS', 'DELETE', 'GET'} - 终端: project_root.get_project_noauth
2025-05-09 16:40:16,310 - app - INFO - 路由: /api/auth/projects - 方法: {'POST', 'OPTIONS'} - 终端: project_root.create_project_auth
2025-05-09 16:40:16,310 - app - INFO - 路由: /api/project-managers - 方法: {'HEAD', 'GET', 'OPTIONS'} - 终端: project_root.get_project_managers
2025-05-09 16:40:16,310 - app - INFO - 路由: /api/projects - 方法: {'HEAD', 'GET', 'OPTIONS'} - 终端: project_root.get_all_projects_api
2025-05-09 16:40:16,310 - app - INFO - 路由: /api/active-projects - 方法: {'HEAD', 'GET', 'OPTIONS'} - 终端: project_root.get_active_projects_api
2025-05-09 16:40:16,311 - app - INFO - 路由: /api/projects/<int:project_id>/members - 方法: {'HEAD', 'GET', 'OPTIONS'} - 终端: project_root.get_project_members_api
2025-05-09 16:40:16,311 - app - INFO - 路由: /tasks/ - 方法: {'HEAD', 'GET', 'OPTIONS'} - 终端: tasks.get_tasks
2025-05-09 16:40:16,311 - app - INFO - 路由: /tasks/ - 方法: {'POST', 'OPTIONS'} - 终端: tasks.create_task
2025-05-09 16:40:16,311 - app - INFO - 路由: /tasks/<int:task_id> - 方法: {'HEAD', 'GET', 'OPTIONS'} - 终端: tasks.get_task
2025-05-09 16:40:16,311 - app - INFO - 路由: /tasks/<int:task_id> - 方法: {'PUT', 'OPTIONS'} - 终端: tasks.update_task
2025-05-09 16:40:16,312 - app - INFO - 路由: /tasks/<int:task_id> - 方法: {'DELETE', 'OPTIONS'} - 终端: tasks.delete_task
2025-05-09 16:40:16,312 - app - INFO - 路由: /tasks/<int:task_id>/comments - 方法: {'HEAD', 'GET', 'OPTIONS'} - 终端: tasks.get_task_comments
2025-05-09 16:40:16,312 - app - INFO - 路由: /tasks/<int:task_id>/comments - 方法: {'POST', 'OPTIONS'} - 终端: tasks.add_task_comment
2025-05-09 16:40:16,312 - app - INFO - 路由: /tasks/<int:task_id>/attachments - 方法: {'HEAD', 'GET', 'OPTIONS'} - 终端: tasks.get_task_attachments
2025-05-09 16:40:16,313 - app - INFO - 路由: /tasks/<int:task_id>/attachments - 方法: {'POST', 'OPTIONS'} - 终端: tasks.add_task_attachment
2025-05-09 16:40:16,313 - app - INFO - 路由: /tasks/<int:task_id>/resources - 方法: {'HEAD', 'GET', 'OPTIONS'} - 终端: tasks.get_task_resources
2025-05-09 16:40:16,313 - app - INFO - 路由: /tasks/<int:task_id>/subtasks - 方法: {'HEAD', 'GET', 'OPTIONS'} - 终端: tasks.get_subtasks
2025-05-09 16:40:16,313 - app - INFO - 路由: /tasks/<int:task_id>/subtasks - 方法: {'POST', 'OPTIONS'} - 终端: tasks.create_subtask
2025-05-09 16:40:16,313 - app - INFO - 路由: /tasks/<int:task_id>/dependencies - 方法: {'HEAD', 'GET', 'OPTIONS'} - 终端: tasks.get_dependencies
2025-05-09 16:40:16,313 - app - INFO - 路由: /tasks/<int:task_id>/dependencies - 方法: {'POST', 'OPTIONS'} - 终端: tasks.add_dependency
2025-05-09 16:40:16,313 - app - INFO - 路由: /tasks/<int:task_id>/logs - 方法: {'HEAD', 'GET', 'OPTIONS'} - 终端: tasks.get_task_logs
2025-05-09 16:40:16,314 - app - INFO - 路由: /tasks/<int:task_id>/logs - 方法: {'POST', 'OPTIONS'} - 终端: tasks.add_task_log
2025-05-09 16:40:16,314 - app - INFO - 路由: /tasks/project/<int:project_id>/gantt - 方法: {'HEAD', 'GET', 'OPTIONS'} - 终端: tasks.gantt_chart
2025-05-09 16:40:16,314 - app - INFO - 路由: /tasks/project/<int:project_id>/gantt/data - 方法: {'HEAD', 'GET', 'OPTIONS'} - 终端: tasks.get_gantt_data
2025-05-09 16:40:16,314 - app - INFO - 路由: /tasks/<int:task_id>/gantt - 方法: {'PUT', 'OPTIONS'} - 终端: tasks.update_gantt_task
2025-05-09 16:40:16,314 - app - INFO - 路由: /tasks/dependencies/gantt - 方法: {'POST', 'OPTIONS'} - 终端: tasks.create_gantt_dependency
2025-05-09 16:40:16,314 - app - INFO - 路由: /tasks/<int:task_id>/dependencies/<int:dependency_id>/gantt - 方法: {'DELETE', 'OPTIONS'} - 终端: tasks.delete_gantt_dependency
2025-05-09 16:40:16,315 - app - INFO - 路由: /tasks/<int:task_id>/status - 方法: {'PUT', 'OPTIONS'} - 终端: tasks.update_task_status
2025-05-09 16:40:16,315 - app - INFO - 路由: /tasks/api/tasks/dependencies - 方法: {'POST', 'OPTIONS'} - 终端: tasks.add_task_dependency
2025-05-09 16:40:16,315 - app - INFO - 路由: /tasks/<int:task_id>/detail - 方法: {'HEAD', 'GET', 'OPTIONS'} - 终端: tasks.task_detail_api
2025-05-09 16:40:16,315 - app - INFO - 路由: /tasks/api/auth/tasks/<int:task_id>/detail - 方法: {'HEAD', 'GET', 'OPTIONS'} - 终端: tasks.task_detail_api_auth
2025-05-09 16:40:16,315 - app - INFO - 路由: /tasks/<int:task_id>/view - 方法: {'HEAD', 'GET', 'OPTIONS'} - 终端: tasks.task_detail_page
2025-05-09 16:40:16,315 - app - INFO - 路由: /tasks/<int:task_id>/edit - 方法: {'HEAD', 'GET', 'OPTIONS'} - 终端: tasks.edit_task_page
2025-05-09 16:40:16,316 - app - INFO - 路由: /tasks/api/auth/tasks/<int:task_id>/attachments - 方法: {'POST', 'OPTIONS'} - 终端: tasks.add_task_attachment_auth
2025-05-09 16:40:16,316 - app - INFO - 路由: /tasks/api/auth/tasks/<int:task_id>/attachments/<int:attachment_id>/download - 方法: {'HEAD', 'GET', 'OPTIONS'} - 终端: tasks.download_attachment_auth
2025-05-09 16:40:16,316 - app - INFO - 路由: /tasks/api/tasks/<int:task_id>/attachments - 方法: {'POST', 'OPTIONS'} - 终端: tasks.upload_attachment
2025-05-09 16:40:16,316 - app - INFO - 路由: /tasks/api/tasks/<int:task_id>/attachments/<int:attachment_id>/download - 方法: {'HEAD', 'GET', 'OPTIONS'} - 终端: tasks.download_attachment
2025-05-09 16:40:16,317 - app - INFO - 路由: /tasks/api/tasks/<int:task_id>/attachments/<int:attachment_id> - 方法: {'DELETE', 'OPTIONS'} - 终端: tasks.delete_attachment
2025-05-09 16:40:16,317 - app - INFO - 路由: /tasks/api/tasks/<int:task_id>/attachments/<int:attachment_id>/versions - 方法: {'POST', 'OPTIONS'} - 终端: tasks.upload_new_version
2025-05-09 16:40:16,317 - app - INFO - 路由: /tasks/api/tasks/<int:task_id>/attachments/<int:attachment_id>/versions - 方法: {'HEAD', 'GET', 'OPTIONS'} - 终端: tasks.get_attachment_versions
2025-05-09 16:40:16,317 - app - INFO - 路由: /tasks/api/tasks/<int:task_id>/risks - 方法: {'HEAD', 'GET', 'OPTIONS'} - 终端: tasks.task_risks_front_path
2025-05-09 16:40:16,317 - app - INFO - 路由: /tasks/<int:task_id>/risks - 方法: {'POST', 'OPTIONS'} - 终端: tasks.create_task_risk_front_path
2025-05-09 16:40:16,319 - app - INFO - 路由: /tasks/api/tasks/<int:task_id>/progress - 方法: {'HEAD', 'GET', 'OPTIONS'} - 终端: tasks.get_task_progress
2025-05-09 16:40:16,320 - app - INFO - 路由: /tasks/api/tasks/<int:task_id>/progress - 方法: {'POST', 'OPTIONS'} - 终端: tasks.update_task_progress
2025-05-09 16:40:16,323 - app - INFO - 路由: /tasks/api/tasks/<int:task_id>/progress/approve - 方法: {'POST', 'OPTIONS'} - 终端: tasks.approve_task_progress
2025-05-09 16:40:16,323 - app - INFO - 路由: /tasks/list - 方法: {'HEAD', 'GET', 'OPTIONS'} - 终端: tasks.task_list
2025-05-09 16:40:16,323 - app - INFO - 路由: /tasks/api/auth/tasks/<int:task_id>/logs - 方法: {'HEAD', 'GET', 'OPTIONS'} - 终端: tasks.get_task_logs_auth
2025-05-09 16:40:16,323 - app - INFO - 路由: /tasks/api/auth/tasks/<int:task_id>/subtasks - 方法: {'HEAD', 'GET', 'OPTIONS'} - 终端: tasks.get_subtasks_auth
2025-05-09 16:40:16,324 - app - INFO - 路由: /tasks/api/auth/tasks/<int:task_id>/comments - 方法: {'HEAD', 'GET', 'OPTIONS'} - 终端: tasks.get_task_comments_auth
2025-05-09 16:40:16,324 - app - INFO - 路由: /tasks/api/auth/tasks/<int:task_id>/attachments - 方法: {'HEAD', 'GET', 'OPTIONS'} - 终端: tasks.get_task_attachments_auth
2025-05-09 16:40:16,324 - app - INFO - 路由: /tasks/api/auth/tasks/<int:task_id>/risks - 方法: {'HEAD', 'GET', 'OPTIONS'} - 终端: tasks.get_task_risks_auth
2025-05-09 16:40:16,324 - app - INFO - 路由: /tasks/api/auth/tasks/<int:task_id>/risks - 方法: {'POST', 'OPTIONS'} - 终端: tasks.create_task_risk_auth
2025-05-09 16:40:16,324 - app - INFO - 路由: /tasks/api/auth/tasks/<int:task_id>/comments - 方法: {'POST', 'OPTIONS'} - 终端: tasks.add_task_comment_auth
2025-05-09 16:40:16,325 - app - INFO - 路由: /tasks/api/tasks/<int:task_id> - 方法: {'PUT', 'OPTIONS'} - 终端: tasks.api_update_task
2025-05-09 16:40:16,325 - app - INFO - 路由: /tasks/api/tasks/<int:task_id>/update_bypass - 方法: {'PUT', 'OPTIONS'} - 终端: tasks.update_task_bypass_csrf
2025-05-09 16:40:16,325 - app - INFO - 路由: /tasks/get-csrf-token - 方法: {'HEAD', 'GET', 'OPTIONS'} - 终端: tasks.get_csrf_token
2025-05-09 16:40:16,325 - app - INFO - 路由: /tasks/api/tasks/<int:task_id>/no_csrf - 方法: {'PUT', 'OPTIONS'} - 终端: tasks.update_task_no_csrf
2025-05-09 16:40:16,325 - app - INFO - 路由: /tasks/api/tasks/<int:task_id>/detail - 方法: {'HEAD', 'GET', 'OPTIONS'} - 终端: tasks.api_tasks_detail
2025-05-09 16:40:16,373 - app - WARNING - team_bp 未定义或无法导入
2025-05-09 16:40:16,486 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-05-09 16:40:16,488 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions 
WHERE permissions.name = ?
 LIMIT ? OFFSET ?
2025-05-09 16:40:16,488 - sqlalchemy.engine.Engine - INFO - [generated in 0.00032s] ('manage_users', 1, 0)
2025-05-09 16:40:16,489 - app.utils.permissions - INFO - 更新权限: manage_users
2025-05-09 16:40:16,489 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions 
WHERE permissions.name = ?
 LIMIT ? OFFSET ?
2025-05-09 16:40:16,491 - sqlalchemy.engine.Engine - INFO - [cached since 0.002099s ago] ('manage_roles', 1, 0)
2025-05-09 16:40:16,491 - app.utils.permissions - INFO - 更新权限: manage_roles
2025-05-09 16:40:16,491 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions 
WHERE permissions.name = ?
 LIMIT ? OFFSET ?
2025-05-09 16:40:16,492 - sqlalchemy.engine.Engine - INFO - [cached since 0.003082s ago] ('manage_all_projects', 1, 0)
2025-05-09 16:40:16,492 - app.utils.permissions - INFO - 更新权限: manage_all_projects
2025-05-09 16:40:16,492 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions 
WHERE permissions.name = ?
 LIMIT ? OFFSET ?
2025-05-09 16:40:16,492 - sqlalchemy.engine.Engine - INFO - [cached since 0.003967s ago] ('manage_project', 1, 0)
2025-05-09 16:40:16,493 - app.utils.permissions - INFO - 更新权限: manage_project
2025-05-09 16:40:16,493 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions 
WHERE permissions.name = ?
 LIMIT ? OFFSET ?
2025-05-09 16:40:16,493 - sqlalchemy.engine.Engine - INFO - [cached since 0.005063s ago] ('manage_all_tasks', 1, 0)
2025-05-09 16:40:16,494 - app.utils.permissions - INFO - 更新权限: manage_all_tasks
2025-05-09 16:40:16,494 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions 
WHERE permissions.name = ?
 LIMIT ? OFFSET ?
2025-05-09 16:40:16,494 - sqlalchemy.engine.Engine - INFO - [cached since 0.006209s ago] ('manage_task', 1, 0)
2025-05-09 16:40:16,495 - app.utils.permissions - INFO - 更新权限: manage_task
2025-05-09 16:40:16,495 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions 
WHERE permissions.name = ?
 LIMIT ? OFFSET ?
2025-05-09 16:40:16,496 - sqlalchemy.engine.Engine - INFO - [cached since 0.007266s ago] ('view_project', 1, 0)
2025-05-09 16:40:16,496 - app.utils.permissions - INFO - 更新权限: view_project
2025-05-09 16:40:16,496 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions 
WHERE permissions.name = ?
 LIMIT ? OFFSET ?
2025-05-09 16:40:16,496 - sqlalchemy.engine.Engine - INFO - [cached since 0.008075s ago] ('view_task', 1, 0)
2025-05-09 16:40:16,497 - app.utils.permissions - INFO - 更新权限: view_task
2025-05-09 16:40:16,497 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions 
WHERE permissions.name = ?
 LIMIT ? OFFSET ?
2025-05-09 16:40:16,497 - sqlalchemy.engine.Engine - INFO - [cached since 0.009046s ago] ('manage_resources', 1, 0)
2025-05-09 16:40:16,498 - app.utils.permissions - INFO - 更新权限: manage_resources
2025-05-09 16:40:16,498 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions 
WHERE permissions.name = ?
 LIMIT ? OFFSET ?
2025-05-09 16:40:16,498 - sqlalchemy.engine.Engine - INFO - [cached since 0.01024s ago] ('manage_risks', 1, 0)
2025-05-09 16:40:16,498 - app.utils.permissions - INFO - 更新权限: manage_risks
2025-05-09 16:40:16,498 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions 
WHERE permissions.name = ?
 LIMIT ? OFFSET ?
2025-05-09 16:40:16,500 - sqlalchemy.engine.Engine - INFO - [cached since 0.01111s ago] ('view_reports', 1, 0)
2025-05-09 16:40:16,500 - app.utils.permissions - INFO - 更新权限: view_reports
2025-05-09 16:40:16,500 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions 
WHERE permissions.name = ?
 LIMIT ? OFFSET ?
2025-05-09 16:40:16,500 - sqlalchemy.engine.Engine - INFO - [cached since 0.01188s ago] ('create_task', 1, 0)
2025-05-09 16:40:16,501 - app.utils.permissions - INFO - 更新权限: create_task
2025-05-09 16:40:16,501 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions 
WHERE permissions.name = ?
 LIMIT ? OFFSET ?
2025-05-09 16:40:16,501 - sqlalchemy.engine.Engine - INFO - [cached since 0.01271s ago] ('create_project', 1, 0)
2025-05-09 16:40:16,501 - app.utils.permissions - INFO - 更新权限: create_project
2025-05-09 16:40:16,502 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions 
WHERE permissions.name = ?
 LIMIT ? OFFSET ?
2025-05-09 16:40:16,502 - sqlalchemy.engine.Engine - INFO - [cached since 0.01367s ago] ('assign_task', 1, 0)
2025-05-09 16:40:16,503 - app.utils.permissions - INFO - 更新权限: assign_task
2025-05-09 16:40:16,503 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions 
WHERE permissions.name = ?
 LIMIT ? OFFSET ?
2025-05-09 16:40:16,504 - sqlalchemy.engine.Engine - INFO - [cached since 0.01533s ago] ('change_project_status', 1, 0)
2025-05-09 16:40:16,504 - app.utils.permissions - INFO - 更新权限: change_project_status
2025-05-09 16:40:16,504 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions 
WHERE permissions.name = ?
 LIMIT ? OFFSET ?
2025-05-09 16:40:16,505 - sqlalchemy.engine.Engine - INFO - [cached since 0.0166s ago] ('change_task_status', 1, 0)
2025-05-09 16:40:16,505 - app.utils.permissions - INFO - 更新权限: change_task_status
2025-05-09 16:40:16,506 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-05-09 16:40:16,506 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-05-09 16:40:16,507 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions
2025-05-09 16:40:16,507 - sqlalchemy.engine.Engine - INFO - [generated in 0.00025s] ()
2025-05-09 16:40:16,508 - sqlalchemy.engine.Engine - INFO - SELECT roles.id AS roles_id, roles.name AS roles_name, roles.description AS roles_description, roles.created_at AS roles_created_at 
FROM roles 
WHERE roles.name = ?
 LIMIT ? OFFSET ?
2025-05-09 16:40:16,508 - sqlalchemy.engine.Engine - INFO - [generated in 0.00026s] ('admin', 1, 0)
2025-05-09 16:40:16,508 - app.utils.permissions - INFO - 更新角色: admin
2025-05-09 16:40:16,510 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions, role_permissions 
WHERE ? = role_permissions.role_id AND permissions.id = role_permissions.permission_id
2025-05-09 16:40:16,510 - sqlalchemy.engine.Engine - INFO - [generated in 0.00027s] (1,)
2025-05-09 16:40:16,510 - app.utils.permissions - INFO - 为管理员角色添加所有权限: 16个
2025-05-09 16:40:16,510 - sqlalchemy.engine.Engine - INFO - SELECT roles.id AS roles_id, roles.name AS roles_name, roles.description AS roles_description, roles.created_at AS roles_created_at 
FROM roles 
WHERE roles.name = ?
 LIMIT ? OFFSET ?
2025-05-09 16:40:16,511 - sqlalchemy.engine.Engine - INFO - [cached since 0.003311s ago] ('manager', 1, 0)
2025-05-09 16:40:16,511 - app.utils.permissions - INFO - 更新角色: manager
2025-05-09 16:40:16,511 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions, role_permissions 
WHERE ? = role_permissions.role_id AND permissions.id = role_permissions.permission_id
2025-05-09 16:40:16,512 - sqlalchemy.engine.Engine - INFO - [cached since 0.002268s ago] (2,)
2025-05-09 16:40:16,512 - app.utils.permissions - INFO - 为角色 manager 添加权限: manage_project
2025-05-09 16:40:16,512 - app.utils.permissions - INFO - 为角色 manager 添加权限: manage_task
2025-05-09 16:40:16,512 - app.utils.permissions - INFO - 为角色 manager 添加权限: view_project
2025-05-09 16:40:16,513 - app.utils.permissions - INFO - 为角色 manager 添加权限: view_task
2025-05-09 16:40:16,513 - app.utils.permissions - INFO - 为角色 manager 添加权限: manage_resources
2025-05-09 16:40:16,513 - app.utils.permissions - INFO - 为角色 manager 添加权限: manage_risks
2025-05-09 16:40:16,513 - app.utils.permissions - INFO - 为角色 manager 添加权限: view_reports
2025-05-09 16:40:16,513 - app.utils.permissions - INFO - 为角色 manager 添加权限: create_project
2025-05-09 16:40:16,513 - app.utils.permissions - INFO - 为角色 manager 添加权限: create_task
2025-05-09 16:40:16,514 - app.utils.permissions - INFO - 为角色 manager 添加权限: assign_task
2025-05-09 16:40:16,514 - app.utils.permissions - INFO - 为角色 manager 添加权限: change_project_status
2025-05-09 16:40:16,514 - app.utils.permissions - INFO - 为角色 manager 添加权限: change_task_status
2025-05-09 16:40:16,515 - sqlalchemy.engine.Engine - INFO - SELECT roles.id AS roles_id, roles.name AS roles_name, roles.description AS roles_description, roles.created_at AS roles_created_at 
FROM roles 
WHERE roles.name = ?
 LIMIT ? OFFSET ?
2025-05-09 16:40:16,515 - sqlalchemy.engine.Engine - INFO - [cached since 0.007382s ago] ('user', 1, 0)
2025-05-09 16:40:16,515 - app.utils.permissions - INFO - 更新角色: user
2025-05-09 16:40:16,515 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions, role_permissions 
WHERE ? = role_permissions.role_id AND permissions.id = role_permissions.permission_id
2025-05-09 16:40:16,516 - sqlalchemy.engine.Engine - INFO - [cached since 0.006256s ago] (5,)
2025-05-09 16:40:16,516 - app.utils.permissions - INFO - 为角色 user 添加权限: view_project
2025-05-09 16:40:16,516 - app.utils.permissions - INFO - 为角色 user 添加权限: view_task
2025-05-09 16:40:16,516 - app.utils.permissions - INFO - 为角色 user 添加权限: view_reports
2025-05-09 16:40:16,516 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-05-09 16:40:16,518 - app.utils.permissions - INFO - 角色和权限初始化完成
2025-05-09 16:40:16,518 - __main__ - INFO - 角色和权限初始化成功
2025-05-09 16:40:16,518 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-05-09 16:40:16,519 - sqlalchemy.engine.Engine - INFO - SELECT users.id AS users_id, users.username AS users_username, users.email AS users_email, users.name AS users_name, users.password_hash AS users_password_hash, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.last_login AS users_last_login 
FROM users 
WHERE users.username = ?
 LIMIT ? OFFSET ?
2025-05-09 16:40:16,519 - sqlalchemy.engine.Engine - INFO - [generated in 0.00032s] ('system', 1, 0)
2025-05-09 16:40:16,521 - sqlalchemy.engine.Engine - INFO - SELECT projects.id AS projects_id, projects.name AS projects_name, projects.description AS projects_description, projects.status AS projects_status, projects.start_date AS projects_start_date, projects.end_date AS projects_end_date, projects.progress AS projects_progress, projects.created_at AS projects_created_at, projects.updated_at AS projects_updated_at, projects.manager_id AS projects_manager_id, projects.owner_id AS projects_owner_id 
FROM projects 
WHERE projects.name = ?
 LIMIT ? OFFSET ?
2025-05-09 16:40:16,521 - sqlalchemy.engine.Engine - INFO - [generated in 0.00037s] ('Test Project', 1, 0)
2025-05-09 16:40:16,522 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-05-09 16:40:16,522 - __main__ - INFO - 数据库初始化完成
2025-05-09 16:40:16,523 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-05-09 16:40:16,523 - sqlalchemy.engine.Engine - INFO - SELECT users.id AS users_id, users.username AS users_username, users.email AS users_email, users.name AS users_name, users.password_hash AS users_password_hash, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.last_login AS users_last_login 
FROM users 
WHERE users.username = ?
 LIMIT ? OFFSET ?
2025-05-09 16:40:16,523 - sqlalchemy.engine.Engine - INFO - [cached since 0.004051s ago] ('system', 1, 0)
2025-05-09 16:40:16,528 - sqlalchemy.engine.Engine - INFO - INSERT INTO resource_usages (user_id, cpu_usage, memory_usage, disk_usage, network_usage, recorded_at) VALUES (?, ?, ?, ?, ?, ?)
2025-05-09 16:40:16,528 - sqlalchemy.engine.Engine - INFO - [generated in 0.00031s] (2, 12.4, 55.5, 10.9, 0.0, '2025-05-09 08:40:16.527426')
2025-05-09 16:40:16,532 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-05-09 16:40:16,535 - __main__ - INFO - 系统资源检查完成
2025-05-09 16:40:16,536 - __main__ - INFO - 开始清理旧数据
2025-05-09 16:40:16,536 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-05-09 16:40:16,537 - sqlalchemy.engine.Engine - INFO - DELETE FROM resource_usages WHERE resource_usages.recorded_at < ?
2025-05-09 16:40:16,538 - sqlalchemy.engine.Engine - INFO - [generated in 0.00028s] ('2025-04-09 08:40:16.536694',)
2025-05-09 16:40:16,538 - __main__ - INFO - 删除了 0 条过期的资源使用记录
2025-05-09 16:40:16,539 - sqlalchemy.engine.Engine - INFO - DELETE FROM system_alerts WHERE system_alerts.is_resolved = 1 AND system_alerts.created_at < ?
2025-05-09 16:40:16,539 - sqlalchemy.engine.Engine - INFO - [generated in 0.00030s] ('2025-05-02 08:40:16.538731',)
2025-05-09 16:40:16,539 - __main__ - INFO - 删除了 0 条已解决的过期警报
2025-05-09 16:40:16,539 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-05-09 16:40:16,539 - __main__ - INFO - 旧数据清理完成
2025-05-09 16:40:16,545 - werkzeug - WARNING -  * Debugger is active!
2025-05-09 16:40:16,547 - werkzeug - INFO -  * Debugger PIN: 670-037-726
2025-05-09 16:42:46,446 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-05-09 16:42:46,447 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions 
WHERE permissions.name = ?
 LIMIT ? OFFSET ?
2025-05-09 16:42:46,448 - sqlalchemy.engine.Engine - INFO - [cached since 150s ago] ('manage_users', 1, 0)
2025-05-09 16:42:46,449 - app.utils.permissions - INFO - 更新权限: manage_users
2025-05-09 16:42:46,450 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions 
WHERE permissions.name = ?
 LIMIT ? OFFSET ?
2025-05-09 16:42:46,450 - sqlalchemy.engine.Engine - INFO - [cached since 150s ago] ('manage_roles', 1, 0)
2025-05-09 16:42:46,451 - app.utils.permissions - INFO - 更新权限: manage_roles
2025-05-09 16:42:46,452 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions 
WHERE permissions.name = ?
 LIMIT ? OFFSET ?
2025-05-09 16:42:46,452 - sqlalchemy.engine.Engine - INFO - [cached since 150s ago] ('manage_all_projects', 1, 0)
2025-05-09 16:42:46,453 - app.utils.permissions - INFO - 更新权限: manage_all_projects
2025-05-09 16:42:46,454 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions 
WHERE permissions.name = ?
 LIMIT ? OFFSET ?
2025-05-09 16:42:46,455 - sqlalchemy.engine.Engine - INFO - [cached since 150s ago] ('manage_project', 1, 0)
2025-05-09 16:42:46,456 - app.utils.permissions - INFO - 更新权限: manage_project
2025-05-09 16:42:46,458 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions 
WHERE permissions.name = ?
 LIMIT ? OFFSET ?
2025-05-09 16:42:46,459 - sqlalchemy.engine.Engine - INFO - [cached since 150s ago] ('manage_all_tasks', 1, 0)
2025-05-09 16:42:46,460 - app.utils.permissions - INFO - 更新权限: manage_all_tasks
2025-05-09 16:42:46,461 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions 
WHERE permissions.name = ?
 LIMIT ? OFFSET ?
2025-05-09 16:42:46,462 - sqlalchemy.engine.Engine - INFO - [cached since 150s ago] ('manage_task', 1, 0)
2025-05-09 16:42:46,462 - app.utils.permissions - INFO - 更新权限: manage_task
2025-05-09 16:42:46,464 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions 
WHERE permissions.name = ?
 LIMIT ? OFFSET ?
2025-05-09 16:42:46,464 - sqlalchemy.engine.Engine - INFO - [cached since 150s ago] ('view_project', 1, 0)
2025-05-09 16:42:46,466 - app.utils.permissions - INFO - 更新权限: view_project
2025-05-09 16:42:46,467 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions 
WHERE permissions.name = ?
 LIMIT ? OFFSET ?
2025-05-09 16:42:46,469 - sqlalchemy.engine.Engine - INFO - [cached since 150s ago] ('view_task', 1, 0)
2025-05-09 16:42:46,470 - app.utils.permissions - INFO - 更新权限: view_task
2025-05-09 16:42:46,471 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions 
WHERE permissions.name = ?
 LIMIT ? OFFSET ?
2025-05-09 16:42:46,471 - sqlalchemy.engine.Engine - INFO - [cached since 150s ago] ('manage_resources', 1, 0)
2025-05-09 16:42:46,473 - app.utils.permissions - INFO - 更新权限: manage_resources
2025-05-09 16:42:46,474 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions 
WHERE permissions.name = ?
 LIMIT ? OFFSET ?
2025-05-09 16:42:46,475 - sqlalchemy.engine.Engine - INFO - [cached since 150s ago] ('manage_risks', 1, 0)
2025-05-09 16:42:46,475 - app.utils.permissions - INFO - 更新权限: manage_risks
2025-05-09 16:42:46,477 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions 
WHERE permissions.name = ?
 LIMIT ? OFFSET ?
2025-05-09 16:42:46,477 - sqlalchemy.engine.Engine - INFO - [cached since 150s ago] ('view_reports', 1, 0)
2025-05-09 16:42:46,478 - app.utils.permissions - INFO - 更新权限: view_reports
2025-05-09 16:42:46,480 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions 
WHERE permissions.name = ?
 LIMIT ? OFFSET ?
2025-05-09 16:42:46,480 - sqlalchemy.engine.Engine - INFO - [cached since 150s ago] ('create_task', 1, 0)
2025-05-09 16:42:46,481 - app.utils.permissions - INFO - 更新权限: create_task
2025-05-09 16:42:46,482 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions 
WHERE permissions.name = ?
 LIMIT ? OFFSET ?
2025-05-09 16:42:46,482 - sqlalchemy.engine.Engine - INFO - [cached since 150s ago] ('create_project', 1, 0)
2025-05-09 16:42:46,485 - app.utils.permissions - INFO - 更新权限: create_project
2025-05-09 16:42:46,486 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions 
WHERE permissions.name = ?
 LIMIT ? OFFSET ?
2025-05-09 16:42:46,487 - sqlalchemy.engine.Engine - INFO - [cached since 150s ago] ('assign_task', 1, 0)
2025-05-09 16:42:46,487 - app.utils.permissions - INFO - 更新权限: assign_task
2025-05-09 16:42:46,489 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions 
WHERE permissions.name = ?
 LIMIT ? OFFSET ?
2025-05-09 16:42:46,489 - sqlalchemy.engine.Engine - INFO - [cached since 150s ago] ('change_project_status', 1, 0)
2025-05-09 16:42:46,490 - app.utils.permissions - INFO - 更新权限: change_project_status
2025-05-09 16:42:46,492 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions 
WHERE permissions.name = ?
 LIMIT ? OFFSET ?
2025-05-09 16:42:46,492 - sqlalchemy.engine.Engine - INFO - [cached since 150s ago] ('change_task_status', 1, 0)
2025-05-09 16:42:46,493 - app.utils.permissions - INFO - 更新权限: change_task_status
2025-05-09 16:42:46,494 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-05-09 16:42:46,495 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-05-09 16:42:46,496 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions
2025-05-09 16:42:46,497 - sqlalchemy.engine.Engine - INFO - [cached since 150s ago] ()
2025-05-09 16:42:46,498 - sqlalchemy.engine.Engine - INFO - SELECT roles.id AS roles_id, roles.name AS roles_name, roles.description AS roles_description, roles.created_at AS roles_created_at 
FROM roles 
WHERE roles.name = ?
 LIMIT ? OFFSET ?
2025-05-09 16:42:46,499 - sqlalchemy.engine.Engine - INFO - [cached since 150s ago] ('admin', 1, 0)
2025-05-09 16:42:46,500 - app.utils.permissions - INFO - 更新角色: admin
2025-05-09 16:42:46,501 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions, role_permissions 
WHERE ? = role_permissions.role_id AND permissions.id = role_permissions.permission_id
2025-05-09 16:42:46,501 - sqlalchemy.engine.Engine - INFO - [cached since 150s ago] (1,)
2025-05-09 16:42:46,502 - app.utils.permissions - INFO - 为管理员角色添加所有权限: 16个
2025-05-09 16:42:46,504 - sqlalchemy.engine.Engine - INFO - SELECT roles.id AS roles_id, roles.name AS roles_name, roles.description AS roles_description, roles.created_at AS roles_created_at 
FROM roles 
WHERE roles.name = ?
 LIMIT ? OFFSET ?
2025-05-09 16:42:46,505 - sqlalchemy.engine.Engine - INFO - [cached since 150s ago] ('manager', 1, 0)
2025-05-09 16:42:46,506 - app.utils.permissions - INFO - 更新角色: manager
2025-05-09 16:42:46,507 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions, role_permissions 
WHERE ? = role_permissions.role_id AND permissions.id = role_permissions.permission_id
2025-05-09 16:42:46,508 - sqlalchemy.engine.Engine - INFO - [cached since 150s ago] (2,)
2025-05-09 16:42:46,509 - app.utils.permissions - INFO - 为角色 manager 添加权限: manage_project
2025-05-09 16:42:46,510 - app.utils.permissions - INFO - 为角色 manager 添加权限: manage_task
2025-05-09 16:42:46,510 - app.utils.permissions - INFO - 为角色 manager 添加权限: view_project
2025-05-09 16:42:46,511 - app.utils.permissions - INFO - 为角色 manager 添加权限: view_task
2025-05-09 16:42:46,512 - app.utils.permissions - INFO - 为角色 manager 添加权限: manage_resources
2025-05-09 16:42:46,512 - app.utils.permissions - INFO - 为角色 manager 添加权限: manage_risks
2025-05-09 16:42:46,513 - app.utils.permissions - INFO - 为角色 manager 添加权限: view_reports
2025-05-09 16:42:46,513 - app.utils.permissions - INFO - 为角色 manager 添加权限: create_project
2025-05-09 16:42:46,514 - app.utils.permissions - INFO - 为角色 manager 添加权限: create_task
2025-05-09 16:42:46,516 - app.utils.permissions - INFO - 为角色 manager 添加权限: assign_task
2025-05-09 16:42:46,516 - app.utils.permissions - INFO - 为角色 manager 添加权限: change_project_status
2025-05-09 16:42:46,517 - app.utils.permissions - INFO - 为角色 manager 添加权限: change_task_status
2025-05-09 16:42:46,519 - sqlalchemy.engine.Engine - INFO - SELECT roles.id AS roles_id, roles.name AS roles_name, roles.description AS roles_description, roles.created_at AS roles_created_at 
FROM roles 
WHERE roles.name = ?
 LIMIT ? OFFSET ?
2025-05-09 16:42:46,521 - sqlalchemy.engine.Engine - INFO - [cached since 150s ago] ('user', 1, 0)
2025-05-09 16:42:46,522 - app.utils.permissions - INFO - 更新角色: user
2025-05-09 16:42:46,524 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions, role_permissions 
WHERE ? = role_permissions.role_id AND permissions.id = role_permissions.permission_id
2025-05-09 16:42:46,524 - sqlalchemy.engine.Engine - INFO - [cached since 150s ago] (5,)
2025-05-09 16:42:46,527 - app.utils.permissions - INFO - 为角色 user 添加权限: view_project
2025-05-09 16:42:46,528 - app.utils.permissions - INFO - 为角色 user 添加权限: view_task
2025-05-09 16:42:46,529 - app.utils.permissions - INFO - 为角色 user 添加权限: view_reports
2025-05-09 16:42:46,529 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-05-09 16:42:46,531 - app.utils.permissions - INFO - 角色和权限初始化完成
2025-05-09 16:42:46,532 - app - INFO - 角色和权限初始化成功
2025-05-09 16:42:46,532 - app - INFO - 应用初始化完成
2025-05-09 16:42:46,588 - werkzeug - INFO - 127.0.0.1 - - [09/May/2025 16:42:46] "GET /login HTTP/1.1" 200 -
2025-05-09 16:42:46,850 - werkzeug - INFO - 127.0.0.1 - - [09/May/2025 16:42:46] "[36mGET /static/css/bootstrap-icons.css HTTP/1.1[0m" 304 -
2025-05-09 16:42:46,856 - werkzeug - INFO - 127.0.0.1 - - [09/May/2025 16:42:46] "[36mGET /static/css/bootstrap.min.css HTTP/1.1[0m" 304 -
2025-05-09 16:42:46,856 - app - ERROR - 验证JWT时出错: Signature has expired
2025-05-09 16:42:46,858 - werkzeug - INFO - 127.0.0.1 - - [09/May/2025 16:42:46] "[32mGET /.well-known/appspecific/com.chrome.devtools.json HTTP/1.1[0m" 302 -
2025-05-09 16:42:46,861 - werkzeug - INFO - 127.0.0.1 - - [09/May/2025 16:42:46] "[36mGET /static/js/jquery.min.js HTTP/1.1[0m" 304 -
2025-05-09 16:42:46,866 - werkzeug - INFO - 127.0.0.1 - - [09/May/2025 16:42:46] "GET /login HTTP/1.1" 200 -
2025-05-09 16:42:46,866 - werkzeug - INFO - 127.0.0.1 - - [09/May/2025 16:42:46] "[36mGET /static/js/auth.js HTTP/1.1[0m" 304 -
2025-05-09 16:42:46,867 - werkzeug - INFO - 127.0.0.1 - - [09/May/2025 16:42:46] "[36mGET /static/images/background.png HTTP/1.1[0m" 304 -
2025-05-09 16:42:46,866 - werkzeug - INFO - 127.0.0.1 - - [09/May/2025 16:42:46] "[36mGET /static/css/style.css HTTP/1.1[0m" 304 -
2025-05-09 16:42:46,868 - werkzeug - INFO - 127.0.0.1 - - [09/May/2025 16:42:46] "[36mGET /static/js/bootstrap.bundle.min.js HTTP/1.1[0m" 304 -
2025-05-09 16:42:46,879 - werkzeug - INFO - 127.0.0.1 - - [09/May/2025 16:42:46] "[36mGET /static/js/fix-modals.js HTTP/1.1[0m" 304 -
2025-05-09 16:42:46,886 - werkzeug - INFO - 127.0.0.1 - - [09/May/2025 16:42:46] "[36mGET /static/js/csrf.js HTTP/1.1[0m" 304 -
2025-05-09 16:42:46,889 - werkzeug - INFO - 127.0.0.1 - - [09/May/2025 16:42:46] "[36mGET /static/js/background-helper.js HTTP/1.1[0m" 304 -
2025-05-09 16:42:46,896 - werkzeug - INFO - 127.0.0.1 - - [09/May/2025 16:42:46] "[33mGET /static/uploads/background.png HTTP/1.1[0m" 404 -
2025-05-09 16:42:46,898 - werkzeug - INFO - 127.0.0.1 - - [09/May/2025 16:42:46] "[36mGET /static/css/bootstrap.min.css.map HTTP/1.1[0m" 304 -
2025-05-09 16:42:46,914 - werkzeug - INFO - 127.0.0.1 - - [09/May/2025 16:42:46] "[33mGET /static/uploads/background.png HTTP/1.1[0m" 404 -
2025-05-09 16:42:46,956 - werkzeug - INFO - 127.0.0.1 - - [09/May/2025 16:42:46] "[36mGET /static/favicon.ico HTTP/1.1[0m" 304 -
2025-05-09 16:42:47,926 - werkzeug - INFO - 127.0.0.1 - - [09/May/2025 16:42:47] "[33mGET /static/uploads/background.png HTTP/1.1[0m" 404 -
2025-05-09 16:42:48,945 - app - INFO - 登录请求 - 方法: POST, 内容类型: application/x-www-form-urlencoded
2025-05-09 16:42:48,946 - app - INFO - 请求头: {'Host': '127.0.0.1:5000', 'Connection': 'keep-alive', 'Content-Length': '135', 'Cache-Control': 'max-age=0', 'Sec-Ch-Ua': '"Chromium";v="136", "Microsoft Edge";v="136", "Not.A/Brand";v="99"', 'Sec-Ch-Ua-Mobile': '?0', 'Sec-Ch-Ua-Platform': '"Windows"', 'Origin': 'http://127.0.0.1:5000', 'Content-Type': 'application/x-www-form-urlencoded', 'Upgrade-Insecure-Requests': '1', 'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36 Edg/136.0.0.0', 'Accept': 'text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.7', 'Sec-Fetch-Site': 'same-origin', 'Sec-Fetch-Mode': 'navigate', 'Sec-Fetch-User': '?1', 'Sec-Fetch-Dest': 'document', 'Referer': 'http://127.0.0.1:5000/login', 'Accept-Encoding': 'gzip, deflate, br, zstd', 'Accept-Language': 'zh-CN,zh;q=0.9,en;q=0.8,en-GB;q=0.7,en-US;q=0.6', 'Cookie': 'user_roles=admin; access_token_cookie=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJmcmVzaCI6ZmFsc2UsImlhdCI6MTc0Njc3NjQwOCwianRpIjoiMGE4Y2M0NzgtYjVlMi00NWFjLTg0M2YtOTk0Njk1ZGVkOTVjIiwidHlwZSI6ImFjY2VzcyIsInN1YiI6MSwibmJmIjoxNzQ2Nzc2NDA4LCJjc3JmIjoiSWpZMk5qRXpPV0V4WlRSbU9EaGtabVl6TURSbE1qUTJPVGN5T1RJMU9ETTRZalF6TVdWbFpEa2kuYUIyeFdBLml0dUFvamhnLVFhVGVfd3JwWkFYd1hYRHlxMCIsImV4cCI6MTc0Njc4MDAwOCwiYXVkIjoidGFza19tYW5hZ2VtZW50X3N5c3RlbSIsInVzZXJfY2xhaW1zIjp7InVzZXJuYW1lIjoiYWRtaW4iLCJyb2xlcyI6WyJhZG1pbiJdLCJwZXJtaXNzaW9ucyI6WyJtYW5hZ2VfdXNlcnMiLCJtYW5hZ2Vfcm9sZXMiLCJtYW5hZ2VfYWxsX3Byb2plY3RzIiwibWFuYWdlX3Byb2plY3QiLCJtYW5hZ2VfYWxsX3Rhc2tzIiwibWFuYWdlX3Rhc2siLCJ2aWV3X3Byb2plY3QiLCJ2aWV3X3Rhc2siLCJtYW5hZ2VfcmVzb3VyY2VzIiwibWFuYWdlX3Jpc2tzIiwidmlld19yZXBvcnRzIiwiY3JlYXRlX3Rhc2siLCJhc3NpZ25fdGFzayIsImNoYW5nZV9wcm9qZWN0X3N0YXR1cyIsImNoYW5nZV90YXNrX3N0YXR1cyIsImNyZWF0ZV9wcm9qZWN0Il0sImlzX2FjdGl2ZSI6dHJ1ZX0sInJvbGVzIjpbImFkbWluIl19.sguK6IYil1GuBM_P4iV5gvn8cr0zP65RH0nuoDde7z0; csrf_access_token=IjY2NjEzOWExZTRmODhkZmYzMDRlMjQ2OTcyOTI1ODM4YjQzMWVlZDki.aB2xWA.ituAojhg-QaTe_wrpZAXwXXDyq0; csrf_token=IjY2NjEzOWExZTRmODhkZmYzMDRlMjQ2OTcyOTI1ODM4YjQzMWVlZDki.aB2xWA.ituAojhg-QaTe_wrpZAXwXXDyq0; session=eyJjc3JmX3Rva2VuIjoiNjY2MTM5YTFlNGY4OGRmZjMwNGUyNDY5NzI5MjU4MzhiNDMxZWVkOSJ9.aB3ABw.Iiodfa5Ggr4NXzockfHOxx5wzpA'}
2025-05-09 16:42:48,947 - app - INFO - 处理表单格式的登录请求
2025-05-09 16:42:48,948 - app - INFO - 表单数据: username=admin, password=********
2025-05-09 16:42:48,949 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-05-09 16:42:48,950 - sqlalchemy.engine.Engine - INFO - SELECT users.id AS users_id, users.username AS users_username, users.email AS users_email, users.name AS users_name, users.password_hash AS users_password_hash, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.last_login AS users_last_login 
FROM users 
WHERE users.username = ?
 LIMIT ? OFFSET ?
2025-05-09 16:42:48,951 - sqlalchemy.engine.Engine - INFO - [cached since 152.4s ago] ('admin', 1, 0)
2025-05-09 16:42:49,455 - app - INFO - 已生成CSRF令牌: IjY2NjEzOW...
2025-05-09 16:42:49,459 - sqlalchemy.engine.Engine - INFO - SELECT roles.id AS roles_id, roles.name AS roles_name, roles.description AS roles_description, roles.created_at AS roles_created_at 
FROM roles, user_roles 
WHERE ? = user_roles.user_id AND roles.id = user_roles.role_id
2025-05-09 16:42:49,459 - sqlalchemy.engine.Engine - INFO - [generated in 0.00092s] (1,)
2025-05-09 16:42:49,461 - app - INFO - 用户 admin 的角色: ['admin']
2025-05-09 16:42:49,464 - app.utils.jwt_callbacks - INFO - Adding additional claims for user 1
2025-05-09 16:42:49,466 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions, role_permissions 
WHERE ? = role_permissions.role_id AND permissions.id = role_permissions.permission_id
2025-05-09 16:42:49,467 - sqlalchemy.engine.Engine - INFO - [cached since 153s ago] (1,)
2025-05-09 16:42:49,469 - app.utils.jwt_callbacks - INFO - Added claims for user 1: {'aud': 'task_management_system', 'user_claims': {'username': 'admin', 'roles': ['admin'], 'permissions': ['manage_users', 'manage_roles', 'manage_all_projects', 'manage_project', 'manage_all_tasks', 'manage_task', 'view_project', 'view_task', 'manage_resources', 'manage_risks', 'view_reports', 'create_task', 'assign_task', 'change_project_status', 'change_task_status', 'create_project'], 'is_active': True}}
2025-05-09 16:42:49,471 - app.utils.jwt_callbacks - INFO - Adding additional claims for user 1
2025-05-09 16:42:49,473 - app.utils.jwt_callbacks - INFO - Added claims for user 1: {'aud': 'task_management_system', 'user_claims': {'username': 'admin', 'roles': ['admin'], 'permissions': ['manage_users', 'manage_roles', 'manage_all_projects', 'manage_project', 'manage_all_tasks', 'manage_task', 'view_project', 'view_task', 'manage_resources', 'manage_risks', 'view_reports', 'create_task', 'assign_task', 'change_project_status', 'change_task_status', 'create_project'], 'is_active': True}}
2025-05-09 16:42:49,480 - sqlalchemy.engine.Engine - INFO - UPDATE users SET updated_at=?, last_login=? WHERE users.id = ?
2025-05-09 16:42:49,480 - sqlalchemy.engine.Engine - INFO - [generated in 0.00061s] ('2025-05-09 08:42:49.480104', '2025-05-09 08:42:49.474854', 1)
2025-05-09 16:42:49,483 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-05-09 16:42:49,490 - app - INFO - 用户登录成功: admin
2025-05-09 16:42:49,494 - werkzeug - INFO - 127.0.0.1 - - [09/May/2025 16:42:49] "[32mPOST /login HTTP/1.1[0m" 302 -
2025-05-09 16:42:49,509 - app.utils.jwt_callbacks - INFO - Checking if token d7a09cc7-6b76-415e-9055-e17e08a9d7a2 is in blocklist
2025-05-09 16:42:49,511 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-05-09 16:42:49,515 - sqlalchemy.engine.Engine - INFO - SELECT token_blacklist.id AS token_blacklist_id, token_blacklist.jti AS token_blacklist_jti, token_blacklist.token_type AS token_blacklist_token_type, token_blacklist.user_id AS token_blacklist_user_id, token_blacklist.revoked_at AS token_blacklist_revoked_at, token_blacklist.expires_at AS token_blacklist_expires_at 
FROM token_blacklist 
WHERE token_blacklist.jti = ?
 LIMIT ? OFFSET ?
2025-05-09 16:42:49,519 - sqlalchemy.engine.Engine - INFO - [generated in 0.00399s] ('d7a09cc7-6b76-415e-9055-e17e08a9d7a2', 1, 0)
2025-05-09 16:42:49,520 - app.utils.jwt_callbacks - INFO - Token d7a09cc7-6b76-415e-9055-e17e08a9d7a2 is valid
2025-05-09 16:42:49,522 - app.utils.jwt_callbacks - INFO - Verifying token
2025-05-09 16:42:49,523 - app.utils.jwt_callbacks - INFO - JWT Header: {'alg': 'HS256', 'typ': 'JWT'}
2025-05-09 16:42:49,524 - app.utils.jwt_callbacks - INFO - JWT Data: {'fresh': False, 'iat': 1746780169, 'jti': 'd7a09cc7-6b76-415e-9055-e17e08a9d7a2', 'type': 'access', 'sub': 1, 'nbf': 1746780169, 'csrf': 'IjY2NjEzOWExZTRmODhkZmYzMDRlMjQ2OTcyOTI1ODM4YjQzMWVlZDki.aB3ACQ.JdKw6PiNFfhUiVWu81DiPbA7acI', 'exp': 1746783769, 'aud': 'task_management_system', 'user_claims': {'username': 'admin', 'roles': ['admin'], 'permissions': ['manage_users', 'manage_roles', 'manage_all_projects', 'manage_project', 'manage_all_tasks', 'manage_task', 'view_project', 'view_task', 'manage_resources', 'manage_risks', 'view_reports', 'create_task', 'assign_task', 'change_project_status', 'change_task_status', 'create_project'], 'is_active': True}, 'roles': ['admin']}
2025-05-09 16:42:49,527 - app.utils.jwt_callbacks - INFO - Token time difference: -0.527004 seconds
2025-05-09 16:42:49,529 - app.utils.jwt_callbacks - INFO - Token verification successful
2025-05-09 16:42:49,530 - app.utils.jwt_callbacks - INFO - Looking up user with identity: 1
2025-05-09 16:42:49,534 - sqlalchemy.engine.Engine - INFO - SELECT users.id AS users_id, users.username AS users_username, users.email AS users_email, users.name AS users_name, users.password_hash AS users_password_hash, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.last_login AS users_last_login 
FROM users 
WHERE users.id = ?
2025-05-09 16:42:49,534 - sqlalchemy.engine.Engine - INFO - [generated in 0.00084s] (1,)
2025-05-09 16:42:49,536 - app.utils.jwt_callbacks - INFO - User found: admin
2025-05-09 16:42:49,538 - sqlalchemy.engine.Engine - INFO - SELECT roles.id AS roles_id, roles.name AS roles_name, roles.description AS roles_description, roles.created_at AS roles_created_at 
FROM roles, user_roles 
WHERE ? = user_roles.user_id AND roles.id = user_roles.role_id
2025-05-09 16:42:49,540 - sqlalchemy.engine.Engine - INFO - [cached since 0.08056s ago] (1,)
2025-05-09 16:42:49,543 - app.utils.jwt_callbacks - INFO - User roles: ['admin']
2025-05-09 16:42:49,545 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions, role_permissions 
WHERE ? = role_permissions.role_id AND permissions.id = role_permissions.permission_id
2025-05-09 16:42:49,546 - sqlalchemy.engine.Engine - INFO - [cached since 153s ago] (1,)
2025-05-09 16:42:49,547 - app.utils.jwt_callbacks - INFO - User permissions: ['manage_users', 'manage_roles', 'manage_all_projects', 'manage_project', 'manage_all_tasks', 'manage_task', 'view_project', 'view_task', 'manage_resources', 'manage_risks', 'view_reports', 'create_task', 'assign_task', 'change_project_status', 'change_task_status', 'create_project']
2025-05-09 16:42:49,550 - app.utils.jwt_callbacks - INFO - Checking if token d7a09cc7-6b76-415e-9055-e17e08a9d7a2 is in blocklist
2025-05-09 16:42:49,552 - sqlalchemy.engine.Engine - INFO - SELECT token_blacklist.id AS token_blacklist_id, token_blacklist.jti AS token_blacklist_jti, token_blacklist.token_type AS token_blacklist_token_type, token_blacklist.user_id AS token_blacklist_user_id, token_blacklist.revoked_at AS token_blacklist_revoked_at, token_blacklist.expires_at AS token_blacklist_expires_at 
FROM token_blacklist 
WHERE token_blacklist.jti = ?
 LIMIT ? OFFSET ?
2025-05-09 16:42:49,554 - sqlalchemy.engine.Engine - INFO - [cached since 0.03892s ago] ('d7a09cc7-6b76-415e-9055-e17e08a9d7a2', 1, 0)
2025-05-09 16:42:49,556 - app.utils.jwt_callbacks - INFO - Token d7a09cc7-6b76-415e-9055-e17e08a9d7a2 is valid
2025-05-09 16:42:49,557 - app.utils.jwt_callbacks - INFO - Verifying token
2025-05-09 16:42:49,557 - app.utils.jwt_callbacks - INFO - JWT Header: {'alg': 'HS256', 'typ': 'JWT'}
2025-05-09 16:42:49,558 - app.utils.jwt_callbacks - INFO - JWT Data: {'fresh': False, 'iat': 1746780169, 'jti': 'd7a09cc7-6b76-415e-9055-e17e08a9d7a2', 'type': 'access', 'sub': 1, 'nbf': 1746780169, 'csrf': 'IjY2NjEzOWExZTRmODhkZmYzMDRlMjQ2OTcyOTI1ODM4YjQzMWVlZDki.aB3ACQ.JdKw6PiNFfhUiVWu81DiPbA7acI', 'exp': 1746783769, 'aud': 'task_management_system', 'user_claims': {'username': 'admin', 'roles': ['admin'], 'permissions': ['manage_users', 'manage_roles', 'manage_all_projects', 'manage_project', 'manage_all_tasks', 'manage_task', 'view_project', 'view_task', 'manage_resources', 'manage_risks', 'view_reports', 'create_task', 'assign_task', 'change_project_status', 'change_task_status', 'create_project'], 'is_active': True}, 'roles': ['admin']}
2025-05-09 16:42:49,559 - app.utils.jwt_callbacks - INFO - Token time difference: -0.559332 seconds
2025-05-09 16:42:49,560 - app.utils.jwt_callbacks - INFO - Token verification successful
2025-05-09 16:42:49,560 - app.utils.jwt_callbacks - INFO - Looking up user with identity: 1
2025-05-09 16:42:49,561 - app.utils.jwt_callbacks - INFO - User found: admin
2025-05-09 16:42:49,561 - app.utils.jwt_callbacks - INFO - User roles: ['admin']
2025-05-09 16:42:49,563 - app.utils.jwt_callbacks - INFO - User permissions: ['manage_users', 'manage_roles', 'manage_all_projects', 'manage_project', 'manage_all_tasks', 'manage_task', 'view_project', 'view_task', 'manage_resources', 'manage_risks', 'view_reports', 'create_task', 'assign_task', 'change_project_status', 'change_task_status', 'create_project']
2025-05-09 16:42:49,564 - app - INFO - Dashboard access with user ID: 1
2025-05-09 16:42:49,565 - app - INFO - Token found in: cookies
2025-05-09 16:42:49,565 - app - INFO - Dashboard context user_data: {'id': 1, 'username': 'admin', 'email': 'admin@example.com', 'name': '管理员', 'is_active': True, 'created_at': '2025-05-07T01:07:21.773527', 'last_login': '2025-05-09T08:42:49.474854', 'roles': ['admin'], 'permissions': ['manage_all_projects', 'create_task', 'manage_project', 'manage_task', 'change_project_status', 'view_task', 'manage_resources', 'view_reports', 'change_task_status', 'manage_roles', 'create_project', 'manage_risks', 'manage_users', 'manage_all_tasks', 'assign_task', 'view_project']}
2025-05-09 16:42:49,569 - app - INFO - 用户 admin 的角色: ['admin']
2025-05-09 16:42:49,570 - app - INFO - 用户 admin 的权限: ['manage_all_projects', 'create_task', 'manage_project', 'manage_task', 'change_project_status', 'view_task', 'manage_resources', 'view_reports', 'change_task_status', 'manage_roles', 'create_project', 'manage_risks', 'manage_users', 'manage_all_tasks', 'assign_task', 'view_project']
2025-05-09 16:42:49,571 - app - INFO - 用户 admin - 是否管理员: True, 是否项目经理: False
2025-05-09 16:42:49,590 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-05-09 16:42:49,591 - werkzeug - INFO - 127.0.0.1 - - [09/May/2025 16:42:49] "GET /main/dashboard HTTP/1.1" 200 -
2025-05-09 16:42:49,616 - app.utils.jwt_callbacks - INFO - Checking if token d7a09cc7-6b76-415e-9055-e17e08a9d7a2 is in blocklist
2025-05-09 16:42:49,618 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-05-09 16:42:49,619 - sqlalchemy.engine.Engine - INFO - SELECT token_blacklist.id AS token_blacklist_id, token_blacklist.jti AS token_blacklist_jti, token_blacklist.token_type AS token_blacklist_token_type, token_blacklist.user_id AS token_blacklist_user_id, token_blacklist.revoked_at AS token_blacklist_revoked_at, token_blacklist.expires_at AS token_blacklist_expires_at 
FROM token_blacklist 
WHERE token_blacklist.jti = ?
 LIMIT ? OFFSET ?
2025-05-09 16:42:49,623 - sqlalchemy.engine.Engine - INFO - [cached since 0.1085s ago] ('d7a09cc7-6b76-415e-9055-e17e08a9d7a2', 1, 0)
2025-05-09 16:42:49,623 - app.utils.jwt_callbacks - INFO - Token d7a09cc7-6b76-415e-9055-e17e08a9d7a2 is valid
2025-05-09 16:42:49,625 - app.utils.jwt_callbacks - INFO - Verifying token
2025-05-09 16:42:49,626 - app.utils.jwt_callbacks - INFO - JWT Header: {'alg': 'HS256', 'typ': 'JWT'}
2025-05-09 16:42:49,631 - app.utils.jwt_callbacks - INFO - JWT Data: {'fresh': False, 'iat': 1746780169, 'jti': 'd7a09cc7-6b76-415e-9055-e17e08a9d7a2', 'type': 'access', 'sub': 1, 'nbf': 1746780169, 'csrf': 'IjY2NjEzOWExZTRmODhkZmYzMDRlMjQ2OTcyOTI1ODM4YjQzMWVlZDki.aB3ACQ.JdKw6PiNFfhUiVWu81DiPbA7acI', 'exp': 1746783769, 'aud': 'task_management_system', 'user_claims': {'username': 'admin', 'roles': ['admin'], 'permissions': ['manage_users', 'manage_roles', 'manage_all_projects', 'manage_project', 'manage_all_tasks', 'manage_task', 'view_project', 'view_task', 'manage_resources', 'manage_risks', 'view_reports', 'create_task', 'assign_task', 'change_project_status', 'change_task_status', 'create_project'], 'is_active': True}, 'roles': ['admin']}
2025-05-09 16:42:49,632 - werkzeug - INFO - 127.0.0.1 - - [09/May/2025 16:42:49] "[36mGET /static/css/bootstrap.min.css HTTP/1.1[0m" 304 -
2025-05-09 16:42:49,633 - app.utils.jwt_callbacks - INFO - Token time difference: -0.633455 seconds
2025-05-09 16:42:49,636 - app.utils.jwt_callbacks - INFO - Token verification successful
2025-05-09 16:42:49,637 - werkzeug - INFO - 127.0.0.1 - - [09/May/2025 16:42:49] "[36mGET /static/css/style.css HTTP/1.1[0m" 304 -
2025-05-09 16:42:49,639 - werkzeug - INFO - 127.0.0.1 - - [09/May/2025 16:42:49] "[36mGET /static/css/bootstrap-icons.css HTTP/1.1[0m" 304 -
2025-05-09 16:42:49,640 - werkzeug - INFO - 127.0.0.1 - - [09/May/2025 16:42:49] "[36mGET /static/js/jquery.min.js HTTP/1.1[0m" 304 -
2025-05-09 16:42:49,641 - app.utils.jwt_callbacks - INFO - Looking up user with identity: 1
2025-05-09 16:42:49,643 - werkzeug - INFO - 127.0.0.1 - - [09/May/2025 16:42:49] "[36mGET /static/js/bootstrap.bundle.min.js HTTP/1.1[0m" 304 -
2025-05-09 16:42:49,644 - werkzeug - INFO - 127.0.0.1 - - [09/May/2025 16:42:49] "[36mGET /static/js/auth.js HTTP/1.1[0m" 304 -
2025-05-09 16:42:49,649 - sqlalchemy.engine.Engine - INFO - SELECT users.id AS users_id, users.username AS users_username, users.email AS users_email, users.name AS users_name, users.password_hash AS users_password_hash, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.last_login AS users_last_login 
FROM users 
WHERE users.id = ?
2025-05-09 16:42:49,651 - werkzeug - INFO - 127.0.0.1 - - [09/May/2025 16:42:49] "[36mGET /static/js/fix-modals.js HTTP/1.1[0m" 304 -
2025-05-09 16:42:49,653 - werkzeug - INFO - 127.0.0.1 - - [09/May/2025 16:42:49] "[36mGET /static/js/csrf.js HTTP/1.1[0m" 304 -
2025-05-09 16:42:49,653 - sqlalchemy.engine.Engine - INFO - [cached since 0.1198s ago] (1,)
2025-05-09 16:42:49,655 - app.utils.jwt_callbacks - INFO - User found: admin
2025-05-09 16:42:49,657 - sqlalchemy.engine.Engine - INFO - SELECT roles.id AS roles_id, roles.name AS roles_name, roles.description AS roles_description, roles.created_at AS roles_created_at 
FROM roles, user_roles 
WHERE ? = user_roles.user_id AND roles.id = user_roles.role_id
2025-05-09 16:42:49,658 - sqlalchemy.engine.Engine - INFO - [cached since 0.1994s ago] (1,)
2025-05-09 16:42:49,660 - app.utils.jwt_callbacks - INFO - User roles: ['admin']
2025-05-09 16:42:49,661 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions, role_permissions 
WHERE ? = role_permissions.role_id AND permissions.id = role_permissions.permission_id
2025-05-09 16:42:49,661 - sqlalchemy.engine.Engine - INFO - [cached since 153.2s ago] (1,)
2025-05-09 16:42:49,662 - app.utils.jwt_callbacks - INFO - User permissions: ['manage_users', 'manage_roles', 'manage_all_projects', 'manage_project', 'manage_all_tasks', 'manage_task', 'view_project', 'view_task', 'manage_resources', 'manage_risks', 'view_reports', 'create_task', 'assign_task', 'change_project_status', 'change_task_status', 'create_project']
2025-05-09 16:42:49,663 - app.utils.jwt_callbacks - INFO - Checking if token d7a09cc7-6b76-415e-9055-e17e08a9d7a2 is in blocklist
2025-05-09 16:42:49,664 - sqlalchemy.engine.Engine - INFO - SELECT token_blacklist.id AS token_blacklist_id, token_blacklist.jti AS token_blacklist_jti, token_blacklist.token_type AS token_blacklist_token_type, token_blacklist.user_id AS token_blacklist_user_id, token_blacklist.revoked_at AS token_blacklist_revoked_at, token_blacklist.expires_at AS token_blacklist_expires_at 
FROM token_blacklist 
WHERE token_blacklist.jti = ?
 LIMIT ? OFFSET ?
2025-05-09 16:42:49,664 - sqlalchemy.engine.Engine - INFO - [cached since 0.1498s ago] ('d7a09cc7-6b76-415e-9055-e17e08a9d7a2', 1, 0)
2025-05-09 16:42:49,665 - app.utils.jwt_callbacks - INFO - Token d7a09cc7-6b76-415e-9055-e17e08a9d7a2 is valid
2025-05-09 16:42:49,665 - app.utils.jwt_callbacks - INFO - Verifying token
2025-05-09 16:42:49,666 - app.utils.jwt_callbacks - INFO - JWT Header: {'alg': 'HS256', 'typ': 'JWT'}
2025-05-09 16:42:49,666 - app.utils.jwt_callbacks - INFO - JWT Data: {'fresh': False, 'iat': 1746780169, 'jti': 'd7a09cc7-6b76-415e-9055-e17e08a9d7a2', 'type': 'access', 'sub': 1, 'nbf': 1746780169, 'csrf': 'IjY2NjEzOWExZTRmODhkZmYzMDRlMjQ2OTcyOTI1ODM4YjQzMWVlZDki.aB3ACQ.JdKw6PiNFfhUiVWu81DiPbA7acI', 'exp': 1746783769, 'aud': 'task_management_system', 'user_claims': {'username': 'admin', 'roles': ['admin'], 'permissions': ['manage_users', 'manage_roles', 'manage_all_projects', 'manage_project', 'manage_all_tasks', 'manage_task', 'view_project', 'view_task', 'manage_resources', 'manage_risks', 'view_reports', 'create_task', 'assign_task', 'change_project_status', 'change_task_status', 'create_project'], 'is_active': True}, 'roles': ['admin']}
2025-05-09 16:42:49,667 - app.utils.jwt_callbacks - INFO - Token time difference: -0.667658 seconds
2025-05-09 16:42:49,668 - app.utils.jwt_callbacks - INFO - Token verification successful
2025-05-09 16:42:49,668 - app.utils.jwt_callbacks - INFO - Looking up user with identity: 1
2025-05-09 16:42:49,668 - app.utils.jwt_callbacks - INFO - User found: admin
2025-05-09 16:42:49,670 - app.utils.jwt_callbacks - INFO - User roles: ['admin']
2025-05-09 16:42:49,670 - app.utils.jwt_callbacks - INFO - User permissions: ['manage_users', 'manage_roles', 'manage_all_projects', 'manage_project', 'manage_all_tasks', 'manage_task', 'view_project', 'view_task', 'manage_resources', 'manage_risks', 'view_reports', 'create_task', 'assign_task', 'change_project_status', 'change_task_status', 'create_project']
2025-05-09 16:42:49,670 - app - INFO - 用户已认证，重定向到仪表板页面: /.well-known/appspecific/com.chrome.devtools.json
2025-05-09 16:42:49,671 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-05-09 16:42:49,672 - werkzeug - INFO - 127.0.0.1 - - [09/May/2025 16:42:49] "[32mGET /.well-known/appspecific/com.chrome.devtools.json HTTP/1.1[0m" 302 -
2025-05-09 16:42:49,678 - werkzeug - INFO - 127.0.0.1 - - [09/May/2025 16:42:49] "[36mGET /static/css/fonts/bootstrap-icons.woff2 HTTP/1.1[0m" 304 -
2025-05-09 16:42:49,678 - werkzeug - INFO - 127.0.0.1 - - [09/May/2025 16:42:49] "[36mGET /static/css/bootstrap.min.css.map HTTP/1.1[0m" 304 -
2025-05-09 16:42:49,679 - app.utils.jwt_callbacks - INFO - Checking if token d7a09cc7-6b76-415e-9055-e17e08a9d7a2 is in blocklist
2025-05-09 16:42:49,681 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-05-09 16:42:49,682 - sqlalchemy.engine.Engine - INFO - SELECT token_blacklist.id AS token_blacklist_id, token_blacklist.jti AS token_blacklist_jti, token_blacklist.token_type AS token_blacklist_token_type, token_blacklist.user_id AS token_blacklist_user_id, token_blacklist.revoked_at AS token_blacklist_revoked_at, token_blacklist.expires_at AS token_blacklist_expires_at 
FROM token_blacklist 
WHERE token_blacklist.jti = ?
 LIMIT ? OFFSET ?
2025-05-09 16:42:49,683 - sqlalchemy.engine.Engine - INFO - [cached since 0.1691s ago] ('d7a09cc7-6b76-415e-9055-e17e08a9d7a2', 1, 0)
2025-05-09 16:42:49,685 - app.utils.jwt_callbacks - INFO - Token d7a09cc7-6b76-415e-9055-e17e08a9d7a2 is valid
2025-05-09 16:42:49,685 - app.utils.jwt_callbacks - INFO - Verifying token
2025-05-09 16:42:49,686 - app.utils.jwt_callbacks - INFO - JWT Header: {'alg': 'HS256', 'typ': 'JWT'}
2025-05-09 16:42:49,686 - app.utils.jwt_callbacks - INFO - JWT Data: {'fresh': False, 'iat': 1746780169, 'jti': 'd7a09cc7-6b76-415e-9055-e17e08a9d7a2', 'type': 'access', 'sub': 1, 'nbf': 1746780169, 'csrf': 'IjY2NjEzOWExZTRmODhkZmYzMDRlMjQ2OTcyOTI1ODM4YjQzMWVlZDki.aB3ACQ.JdKw6PiNFfhUiVWu81DiPbA7acI', 'exp': 1746783769, 'aud': 'task_management_system', 'user_claims': {'username': 'admin', 'roles': ['admin'], 'permissions': ['manage_users', 'manage_roles', 'manage_all_projects', 'manage_project', 'manage_all_tasks', 'manage_task', 'view_project', 'view_task', 'manage_resources', 'manage_risks', 'view_reports', 'create_task', 'assign_task', 'change_project_status', 'change_task_status', 'create_project'], 'is_active': True}, 'roles': ['admin']}
2025-05-09 16:42:49,686 - app.utils.jwt_callbacks - INFO - Token time difference: -0.686074 seconds
2025-05-09 16:42:49,687 - app.utils.jwt_callbacks - INFO - Token verification successful
2025-05-09 16:42:49,687 - app.utils.jwt_callbacks - INFO - Looking up user with identity: 1
2025-05-09 16:42:49,688 - sqlalchemy.engine.Engine - INFO - SELECT users.id AS users_id, users.username AS users_username, users.email AS users_email, users.name AS users_name, users.password_hash AS users_password_hash, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.last_login AS users_last_login 
FROM users 
WHERE users.id = ?
2025-05-09 16:42:49,688 - sqlalchemy.engine.Engine - INFO - [cached since 0.155s ago] (1,)
2025-05-09 16:42:49,689 - app.utils.jwt_callbacks - INFO - User found: admin
2025-05-09 16:42:49,690 - sqlalchemy.engine.Engine - INFO - SELECT roles.id AS roles_id, roles.name AS roles_name, roles.description AS roles_description, roles.created_at AS roles_created_at 
FROM roles, user_roles 
WHERE ? = user_roles.user_id AND roles.id = user_roles.role_id
2025-05-09 16:42:49,690 - sqlalchemy.engine.Engine - INFO - [cached since 0.232s ago] (1,)
2025-05-09 16:42:49,692 - app.utils.jwt_callbacks - INFO - User roles: ['admin']
2025-05-09 16:42:49,693 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions, role_permissions 
WHERE ? = role_permissions.role_id AND permissions.id = role_permissions.permission_id
2025-05-09 16:42:49,693 - sqlalchemy.engine.Engine - INFO - [cached since 153.2s ago] (1,)
2025-05-09 16:42:49,694 - app.utils.jwt_callbacks - INFO - User permissions: ['manage_users', 'manage_roles', 'manage_all_projects', 'manage_project', 'manage_all_tasks', 'manage_task', 'view_project', 'view_task', 'manage_resources', 'manage_risks', 'view_reports', 'create_task', 'assign_task', 'change_project_status', 'change_task_status', 'create_project']
2025-05-09 16:42:49,694 - app.utils.jwt_callbacks - INFO - Checking if token d7a09cc7-6b76-415e-9055-e17e08a9d7a2 is in blocklist
2025-05-09 16:42:49,695 - sqlalchemy.engine.Engine - INFO - SELECT token_blacklist.id AS token_blacklist_id, token_blacklist.jti AS token_blacklist_jti, token_blacklist.token_type AS token_blacklist_token_type, token_blacklist.user_id AS token_blacklist_user_id, token_blacklist.revoked_at AS token_blacklist_revoked_at, token_blacklist.expires_at AS token_blacklist_expires_at 
FROM token_blacklist 
WHERE token_blacklist.jti = ?
 LIMIT ? OFFSET ?
2025-05-09 16:42:49,695 - sqlalchemy.engine.Engine - INFO - [cached since 0.1813s ago] ('d7a09cc7-6b76-415e-9055-e17e08a9d7a2', 1, 0)
2025-05-09 16:42:49,696 - app.utils.jwt_callbacks - INFO - Token d7a09cc7-6b76-415e-9055-e17e08a9d7a2 is valid
2025-05-09 16:42:49,696 - app.utils.jwt_callbacks - INFO - Verifying token
2025-05-09 16:42:49,698 - app.utils.jwt_callbacks - INFO - JWT Header: {'alg': 'HS256', 'typ': 'JWT'}
2025-05-09 16:42:49,698 - app.utils.jwt_callbacks - INFO - JWT Data: {'fresh': False, 'iat': 1746780169, 'jti': 'd7a09cc7-6b76-415e-9055-e17e08a9d7a2', 'type': 'access', 'sub': 1, 'nbf': 1746780169, 'csrf': 'IjY2NjEzOWExZTRmODhkZmYzMDRlMjQ2OTcyOTI1ODM4YjQzMWVlZDki.aB3ACQ.JdKw6PiNFfhUiVWu81DiPbA7acI', 'exp': 1746783769, 'aud': 'task_management_system', 'user_claims': {'username': 'admin', 'roles': ['admin'], 'permissions': ['manage_users', 'manage_roles', 'manage_all_projects', 'manage_project', 'manage_all_tasks', 'manage_task', 'view_project', 'view_task', 'manage_resources', 'manage_risks', 'view_reports', 'create_task', 'assign_task', 'change_project_status', 'change_task_status', 'create_project'], 'is_active': True}, 'roles': ['admin']}
2025-05-09 16:42:49,699 - app.utils.jwt_callbacks - INFO - Token time difference: -0.699108 seconds
2025-05-09 16:42:49,699 - app.utils.jwt_callbacks - INFO - Token verification successful
2025-05-09 16:42:49,700 - app.utils.jwt_callbacks - INFO - Looking up user with identity: 1
2025-05-09 16:42:49,702 - werkzeug - INFO - 127.0.0.1 - - [09/May/2025 16:42:49] "[36mGET /static/favicon.ico HTTP/1.1[0m" 304 -
2025-05-09 16:42:49,702 - app.utils.jwt_callbacks - INFO - User found: admin
2025-05-09 16:42:49,703 - app.utils.jwt_callbacks - INFO - User roles: ['admin']
2025-05-09 16:42:49,704 - app.utils.jwt_callbacks - INFO - User permissions: ['manage_users', 'manage_roles', 'manage_all_projects', 'manage_project', 'manage_all_tasks', 'manage_task', 'view_project', 'view_task', 'manage_resources', 'manage_risks', 'view_reports', 'create_task', 'assign_task', 'change_project_status', 'change_task_status', 'create_project']
2025-05-09 16:42:49,705 - app - INFO - Dashboard access with user ID: 1
2025-05-09 16:42:49,706 - app - INFO - Token found in: cookies
2025-05-09 16:42:49,707 - app - INFO - Dashboard context user_data: {'id': 1, 'username': 'admin', 'email': 'admin@example.com', 'name': '管理员', 'is_active': True, 'created_at': '2025-05-07T01:07:21.773527', 'last_login': '2025-05-09T08:42:49.474854', 'roles': ['admin'], 'permissions': ['manage_all_projects', 'create_task', 'manage_project', 'manage_task', 'change_project_status', 'view_task', 'manage_resources', 'view_reports', 'change_task_status', 'manage_roles', 'create_project', 'manage_risks', 'manage_users', 'manage_all_tasks', 'assign_task', 'view_project']}
2025-05-09 16:42:49,707 - app - INFO - 用户 admin 的角色: ['admin']
2025-05-09 16:42:49,708 - app - INFO - 用户 admin 的权限: ['manage_all_projects', 'create_task', 'manage_project', 'manage_task', 'change_project_status', 'view_task', 'manage_resources', 'view_reports', 'change_task_status', 'manage_roles', 'create_project', 'manage_risks', 'manage_users', 'manage_all_tasks', 'assign_task', 'view_project']
2025-05-09 16:42:49,708 - app - INFO - 用户 admin - 是否管理员: True, 是否项目经理: False
2025-05-09 16:42:49,710 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-05-09 16:42:49,711 - werkzeug - INFO - 127.0.0.1 - - [09/May/2025 16:42:49] "GET /main/dashboard HTTP/1.1" 200 -
2025-05-09 16:42:51,518 - app - WARNING - 绕过JWT验证: /main/projects
2025-05-09 16:42:51,519 - app.utils.jwt_callbacks - INFO - Checking if token d7a09cc7-6b76-415e-9055-e17e08a9d7a2 is in blocklist
2025-05-09 16:42:51,520 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-05-09 16:42:51,521 - sqlalchemy.engine.Engine - INFO - SELECT token_blacklist.id AS token_blacklist_id, token_blacklist.jti AS token_blacklist_jti, token_blacklist.token_type AS token_blacklist_token_type, token_blacklist.user_id AS token_blacklist_user_id, token_blacklist.revoked_at AS token_blacklist_revoked_at, token_blacklist.expires_at AS token_blacklist_expires_at 
FROM token_blacklist 
WHERE token_blacklist.jti = ?
 LIMIT ? OFFSET ?
2025-05-09 16:42:51,522 - sqlalchemy.engine.Engine - INFO - [cached since 2.007s ago] ('d7a09cc7-6b76-415e-9055-e17e08a9d7a2', 1, 0)
2025-05-09 16:42:51,523 - app.utils.jwt_callbacks - INFO - Token d7a09cc7-6b76-415e-9055-e17e08a9d7a2 is valid
2025-05-09 16:42:51,523 - app.utils.jwt_callbacks - INFO - Verifying token
2025-05-09 16:42:51,524 - app.utils.jwt_callbacks - INFO - JWT Header: {'alg': 'HS256', 'typ': 'JWT'}
2025-05-09 16:42:51,525 - app.utils.jwt_callbacks - INFO - JWT Data: {'fresh': False, 'iat': 1746780169, 'jti': 'd7a09cc7-6b76-415e-9055-e17e08a9d7a2', 'type': 'access', 'sub': 1, 'nbf': 1746780169, 'csrf': 'IjY2NjEzOWExZTRmODhkZmYzMDRlMjQ2OTcyOTI1ODM4YjQzMWVlZDki.aB3ACQ.JdKw6PiNFfhUiVWu81DiPbA7acI', 'exp': 1746783769, 'aud': 'task_management_system', 'user_claims': {'username': 'admin', 'roles': ['admin'], 'permissions': ['manage_users', 'manage_roles', 'manage_all_projects', 'manage_project', 'manage_all_tasks', 'manage_task', 'view_project', 'view_task', 'manage_resources', 'manage_risks', 'view_reports', 'create_task', 'assign_task', 'change_project_status', 'change_task_status', 'create_project'], 'is_active': True}, 'roles': ['admin']}
2025-05-09 16:42:51,526 - app.utils.jwt_callbacks - INFO - Token time difference: -2.526535 seconds
2025-05-09 16:42:51,527 - app.utils.jwt_callbacks - INFO - Token verification successful
2025-05-09 16:42:51,527 - app.utils.jwt_callbacks - INFO - Looking up user with identity: 1
2025-05-09 16:42:51,528 - sqlalchemy.engine.Engine - INFO - SELECT users.id AS users_id, users.username AS users_username, users.email AS users_email, users.name AS users_name, users.password_hash AS users_password_hash, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.last_login AS users_last_login 
FROM users 
WHERE users.id = ?
2025-05-09 16:42:51,528 - sqlalchemy.engine.Engine - INFO - [cached since 1.995s ago] (1,)
2025-05-09 16:42:51,529 - app.utils.jwt_callbacks - INFO - User found: admin
2025-05-09 16:42:51,531 - sqlalchemy.engine.Engine - INFO - SELECT roles.id AS roles_id, roles.name AS roles_name, roles.description AS roles_description, roles.created_at AS roles_created_at 
FROM roles, user_roles 
WHERE ? = user_roles.user_id AND roles.id = user_roles.role_id
2025-05-09 16:42:51,531 - sqlalchemy.engine.Engine - INFO - [cached since 2.073s ago] (1,)
2025-05-09 16:42:51,532 - app.utils.jwt_callbacks - INFO - User roles: ['admin']
2025-05-09 16:42:51,533 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions, role_permissions 
WHERE ? = role_permissions.role_id AND permissions.id = role_permissions.permission_id
2025-05-09 16:42:51,533 - sqlalchemy.engine.Engine - INFO - [cached since 155s ago] (1,)
2025-05-09 16:42:51,534 - app.utils.jwt_callbacks - INFO - User permissions: ['manage_users', 'manage_roles', 'manage_all_projects', 'manage_project', 'manage_all_tasks', 'manage_task', 'view_project', 'view_task', 'manage_resources', 'manage_risks', 'view_reports', 'create_task', 'assign_task', 'change_project_status', 'change_task_status', 'create_project']
2025-05-09 16:42:51,534 - app.routes.main - INFO - JWT bypass enabled for projects - Using test user
2025-05-09 16:42:51,537 - sqlalchemy.engine.Engine - INFO - SELECT projects.id AS projects_id, projects.name AS projects_name, projects.description AS projects_description, projects.status AS projects_status, projects.start_date AS projects_start_date, projects.end_date AS projects_end_date, projects.progress AS projects_progress, projects.created_at AS projects_created_at, projects.updated_at AS projects_updated_at, projects.manager_id AS projects_manager_id, projects.owner_id AS projects_owner_id 
FROM projects
2025-05-09 16:42:51,538 - sqlalchemy.engine.Engine - INFO - [generated in 0.00079s] ()
2025-05-09 16:42:51,540 - sqlalchemy.engine.Engine - INFO - SELECT users.id AS users_id, users.username AS users_username, users.email AS users_email, users.name AS users_name, users.password_hash AS users_password_hash, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.last_login AS users_last_login 
FROM users 
WHERE users.id = ?
2025-05-09 16:42:51,540 - sqlalchemy.engine.Engine - INFO - [cached since 2.007s ago] (3,)
2025-05-09 16:42:51,541 - sqlalchemy.engine.Engine - INFO - SELECT users.id AS users_id, users.username AS users_username, users.email AS users_email, users.name AS users_name, users.password_hash AS users_password_hash, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.last_login AS users_last_login 
FROM users 
WHERE users.id = ?
2025-05-09 16:42:51,541 - sqlalchemy.engine.Engine - INFO - [cached since 2.008s ago] (5,)
2025-05-09 16:42:51,544 - sqlalchemy.engine.Engine - INFO - SELECT users.id AS users_id, users.username AS users_username, users.email AS users_email, users.name AS users_name, users.password_hash AS users_password_hash, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.last_login AS users_last_login 
FROM users 
WHERE users.id = ?
2025-05-09 16:42:51,545 - sqlalchemy.engine.Engine - INFO - [cached since 2.011s ago] (8,)
2025-05-09 16:42:51,546 - sqlalchemy.engine.Engine - INFO - SELECT users.id AS users_id, users.username AS users_username, users.email AS users_email, users.name AS users_name, users.password_hash AS users_password_hash, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.last_login AS users_last_login 
FROM users 
WHERE users.id = ?
2025-05-09 16:42:51,546 - sqlalchemy.engine.Engine - INFO - [cached since 2.013s ago] (5,)
2025-05-09 16:42:51,575 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-05-09 16:42:51,576 - werkzeug - INFO - 127.0.0.1 - - [09/May/2025 16:42:51] "GET /main/projects?bypass_jwt=true HTTP/1.1" 200 -
2025-05-09 16:42:51,599 - app.utils.jwt_callbacks - INFO - Checking if token d7a09cc7-6b76-415e-9055-e17e08a9d7a2 is in blocklist
2025-05-09 16:42:51,600 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-05-09 16:42:51,601 - sqlalchemy.engine.Engine - INFO - SELECT token_blacklist.id AS token_blacklist_id, token_blacklist.jti AS token_blacklist_jti, token_blacklist.token_type AS token_blacklist_token_type, token_blacklist.user_id AS token_blacklist_user_id, token_blacklist.revoked_at AS token_blacklist_revoked_at, token_blacklist.expires_at AS token_blacklist_expires_at 
FROM token_blacklist 
WHERE token_blacklist.jti = ?
 LIMIT ? OFFSET ?
2025-05-09 16:42:51,602 - sqlalchemy.engine.Engine - INFO - [cached since 2.087s ago] ('d7a09cc7-6b76-415e-9055-e17e08a9d7a2', 1, 0)
2025-05-09 16:42:51,602 - app.utils.jwt_callbacks - INFO - Token d7a09cc7-6b76-415e-9055-e17e08a9d7a2 is valid
2025-05-09 16:42:51,603 - app.utils.jwt_callbacks - INFO - Verifying token
2025-05-09 16:42:51,603 - app.utils.jwt_callbacks - INFO - JWT Header: {'alg': 'HS256', 'typ': 'JWT'}
2025-05-09 16:42:51,604 - app.utils.jwt_callbacks - INFO - JWT Data: {'fresh': False, 'iat': 1746780169, 'jti': 'd7a09cc7-6b76-415e-9055-e17e08a9d7a2', 'type': 'access', 'sub': 1, 'nbf': 1746780169, 'csrf': 'IjY2NjEzOWExZTRmODhkZmYzMDRlMjQ2OTcyOTI1ODM4YjQzMWVlZDki.aB3ACQ.JdKw6PiNFfhUiVWu81DiPbA7acI', 'exp': 1746783769, 'aud': 'task_management_system', 'user_claims': {'username': 'admin', 'roles': ['admin'], 'permissions': ['manage_users', 'manage_roles', 'manage_all_projects', 'manage_project', 'manage_all_tasks', 'manage_task', 'view_project', 'view_task', 'manage_resources', 'manage_risks', 'view_reports', 'create_task', 'assign_task', 'change_project_status', 'change_task_status', 'create_project'], 'is_active': True}, 'roles': ['admin']}
2025-05-09 16:42:51,604 - app.utils.jwt_callbacks - INFO - Token time difference: -2.604609 seconds
2025-05-09 16:42:51,605 - app.utils.jwt_callbacks - INFO - Token verification successful
2025-05-09 16:42:51,605 - app.utils.jwt_callbacks - INFO - Looking up user with identity: 1
2025-05-09 16:42:51,607 - sqlalchemy.engine.Engine - INFO - SELECT users.id AS users_id, users.username AS users_username, users.email AS users_email, users.name AS users_name, users.password_hash AS users_password_hash, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.last_login AS users_last_login 
FROM users 
WHERE users.id = ?
2025-05-09 16:42:51,608 - sqlalchemy.engine.Engine - INFO - [cached since 2.074s ago] (1,)
2025-05-09 16:42:51,612 - app.utils.jwt_callbacks - INFO - User found: admin
2025-05-09 16:42:51,613 - werkzeug - INFO - 127.0.0.1 - - [09/May/2025 16:42:51] "[36mGET /static/css/bootstrap.min.css HTTP/1.1[0m" 304 -
2025-05-09 16:42:51,614 - werkzeug - INFO - 127.0.0.1 - - [09/May/2025 16:42:51] "[36mGET /static/css/bootstrap-icons.css HTTP/1.1[0m" 304 -
2025-05-09 16:42:51,617 - werkzeug - INFO - 127.0.0.1 - - [09/May/2025 16:42:51] "[36mGET /static/css/style.css HTTP/1.1[0m" 304 -
2025-05-09 16:42:51,618 - sqlalchemy.engine.Engine - INFO - SELECT roles.id AS roles_id, roles.name AS roles_name, roles.description AS roles_description, roles.created_at AS roles_created_at 
FROM roles, user_roles 
WHERE ? = user_roles.user_id AND roles.id = user_roles.role_id
2025-05-09 16:42:51,619 - werkzeug - INFO - 127.0.0.1 - - [09/May/2025 16:42:51] "[36mGET /static/css/frappe-gantt.min.css HTTP/1.1[0m" 304 -
2025-05-09 16:42:51,624 - werkzeug - INFO - 127.0.0.1 - - [09/May/2025 16:42:51] "[36mGET /static/js/jquery.min.js HTTP/1.1[0m" 304 -
2025-05-09 16:42:51,625 - werkzeug - INFO - 127.0.0.1 - - [09/May/2025 16:42:51] "[36mGET /static/js/bootstrap.bundle.min.js HTTP/1.1[0m" 304 -
2025-05-09 16:42:51,626 - sqlalchemy.engine.Engine - INFO - [cached since 2.168s ago] (1,)
2025-05-09 16:42:51,632 - werkzeug - INFO - 127.0.0.1 - - [09/May/2025 16:42:51] "[36mGET /static/js/auth.js HTTP/1.1[0m" 304 -
2025-05-09 16:42:51,633 - werkzeug - INFO - 127.0.0.1 - - [09/May/2025 16:42:51] "[36mGET /static/js/fix-modals.js HTTP/1.1[0m" 304 -
2025-05-09 16:42:51,635 - werkzeug - INFO - 127.0.0.1 - - [09/May/2025 16:42:51] "[36mGET /static/js/csrf.js HTTP/1.1[0m" 304 -
2025-05-09 16:42:51,639 - app.utils.jwt_callbacks - INFO - User roles: ['admin']
2025-05-09 16:42:51,640 - werkzeug - INFO - 127.0.0.1 - - [09/May/2025 16:42:51] "[36mGET /static/js/frappe-gantt.min.js HTTP/1.1[0m" 304 -
2025-05-09 16:42:51,641 - werkzeug - INFO - 127.0.0.1 - - [09/May/2025 16:42:51] "[36mGET /static/css/bootstrap.min.css.map HTTP/1.1[0m" 304 -
2025-05-09 16:42:51,643 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions, role_permissions 
WHERE ? = role_permissions.role_id AND permissions.id = role_permissions.permission_id
2025-05-09 16:42:51,646 - sqlalchemy.engine.Engine - INFO - [cached since 155.1s ago] (1,)
2025-05-09 16:42:51,650 - app.utils.jwt_callbacks - INFO - User permissions: ['manage_users', 'manage_roles', 'manage_all_projects', 'manage_project', 'manage_all_tasks', 'manage_task', 'view_project', 'view_task', 'manage_resources', 'manage_risks', 'view_reports', 'create_task', 'assign_task', 'change_project_status', 'change_task_status', 'create_project']
2025-05-09 16:42:51,651 - app.utils.jwt_callbacks - INFO - Checking if token d7a09cc7-6b76-415e-9055-e17e08a9d7a2 is in blocklist
2025-05-09 16:42:51,653 - sqlalchemy.engine.Engine - INFO - SELECT token_blacklist.id AS token_blacklist_id, token_blacklist.jti AS token_blacklist_jti, token_blacklist.token_type AS token_blacklist_token_type, token_blacklist.user_id AS token_blacklist_user_id, token_blacklist.revoked_at AS token_blacklist_revoked_at, token_blacklist.expires_at AS token_blacklist_expires_at 
FROM token_blacklist 
WHERE token_blacklist.jti = ?
 LIMIT ? OFFSET ?
2025-05-09 16:42:51,653 - sqlalchemy.engine.Engine - INFO - [cached since 2.139s ago] ('d7a09cc7-6b76-415e-9055-e17e08a9d7a2', 1, 0)
2025-05-09 16:42:51,654 - app.utils.jwt_callbacks - INFO - Token d7a09cc7-6b76-415e-9055-e17e08a9d7a2 is valid
2025-05-09 16:42:51,654 - app.utils.jwt_callbacks - INFO - Verifying token
2025-05-09 16:42:51,655 - app.utils.jwt_callbacks - INFO - JWT Header: {'alg': 'HS256', 'typ': 'JWT'}
2025-05-09 16:42:51,655 - app.utils.jwt_callbacks - INFO - JWT Data: {'fresh': False, 'iat': 1746780169, 'jti': 'd7a09cc7-6b76-415e-9055-e17e08a9d7a2', 'type': 'access', 'sub': 1, 'nbf': 1746780169, 'csrf': 'IjY2NjEzOWExZTRmODhkZmYzMDRlMjQ2OTcyOTI1ODM4YjQzMWVlZDki.aB3ACQ.JdKw6PiNFfhUiVWu81DiPbA7acI', 'exp': 1746783769, 'aud': 'task_management_system', 'user_claims': {'username': 'admin', 'roles': ['admin'], 'permissions': ['manage_users', 'manage_roles', 'manage_all_projects', 'manage_project', 'manage_all_tasks', 'manage_task', 'view_project', 'view_task', 'manage_resources', 'manage_risks', 'view_reports', 'create_task', 'assign_task', 'change_project_status', 'change_task_status', 'create_project'], 'is_active': True}, 'roles': ['admin']}
2025-05-09 16:42:51,656 - app.utils.jwt_callbacks - INFO - Token time difference: -2.656699 seconds
2025-05-09 16:42:51,656 - app.utils.jwt_callbacks - INFO - Token verification successful
2025-05-09 16:42:51,657 - app.utils.jwt_callbacks - INFO - Looking up user with identity: 1
2025-05-09 16:42:51,657 - app.utils.jwt_callbacks - INFO - User found: admin
2025-05-09 16:42:51,658 - app.utils.jwt_callbacks - INFO - User roles: ['admin']
2025-05-09 16:42:51,659 - app - WARNING - 绕过JWT验证: /api/project-managers
2025-05-09 16:42:51,660 - app.utils.jwt_callbacks - INFO - User permissions: ['manage_users', 'manage_roles', 'manage_all_projects', 'manage_project', 'manage_all_tasks', 'manage_task', 'view_project', 'view_task', 'manage_resources', 'manage_risks', 'view_reports', 'create_task', 'assign_task', 'change_project_status', 'change_task_status', 'create_project']
2025-05-09 16:42:51,660 - app.utils.jwt_callbacks - INFO - Checking if token d7a09cc7-6b76-415e-9055-e17e08a9d7a2 is in blocklist
2025-05-09 16:42:51,660 - app - INFO - 用户已认证，重定向到仪表板页面: /.well-known/appspecific/com.chrome.devtools.json
2025-05-09 16:42:51,662 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-05-09 16:42:51,663 - werkzeug - INFO - 127.0.0.1 - - [09/May/2025 16:42:51] "[32mGET /.well-known/appspecific/com.chrome.devtools.json HTTP/1.1[0m" 302 -
2025-05-09 16:42:51,663 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-05-09 16:42:51,665 - sqlalchemy.engine.Engine - INFO - SELECT token_blacklist.id AS token_blacklist_id, token_blacklist.jti AS token_blacklist_jti, token_blacklist.token_type AS token_blacklist_token_type, token_blacklist.user_id AS token_blacklist_user_id, token_blacklist.revoked_at AS token_blacklist_revoked_at, token_blacklist.expires_at AS token_blacklist_expires_at 
FROM token_blacklist 
WHERE token_blacklist.jti = ?
 LIMIT ? OFFSET ?
2025-05-09 16:42:51,666 - sqlalchemy.engine.Engine - INFO - [cached since 2.151s ago] ('d7a09cc7-6b76-415e-9055-e17e08a9d7a2', 1, 0)
2025-05-09 16:42:51,669 - app.utils.jwt_callbacks - INFO - Token d7a09cc7-6b76-415e-9055-e17e08a9d7a2 is valid
2025-05-09 16:42:51,671 - app.utils.jwt_callbacks - INFO - Checking if token d7a09cc7-6b76-415e-9055-e17e08a9d7a2 is in blocklist
2025-05-09 16:42:51,671 - app.utils.jwt_callbacks - INFO - Verifying token
2025-05-09 16:42:51,672 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-05-09 16:42:51,672 - app.utils.jwt_callbacks - INFO - JWT Header: {'alg': 'HS256', 'typ': 'JWT'}
2025-05-09 16:42:51,673 - sqlalchemy.engine.Engine - INFO - SELECT token_blacklist.id AS token_blacklist_id, token_blacklist.jti AS token_blacklist_jti, token_blacklist.token_type AS token_blacklist_token_type, token_blacklist.user_id AS token_blacklist_user_id, token_blacklist.revoked_at AS token_blacklist_revoked_at, token_blacklist.expires_at AS token_blacklist_expires_at 
FROM token_blacklist 
WHERE token_blacklist.jti = ?
 LIMIT ? OFFSET ?
2025-05-09 16:42:51,673 - sqlalchemy.engine.Engine - INFO - [cached since 2.159s ago] ('d7a09cc7-6b76-415e-9055-e17e08a9d7a2', 1, 0)
2025-05-09 16:42:51,673 - app.utils.jwt_callbacks - INFO - JWT Data: {'fresh': False, 'iat': 1746780169, 'jti': 'd7a09cc7-6b76-415e-9055-e17e08a9d7a2', 'type': 'access', 'sub': 1, 'nbf': 1746780169, 'csrf': 'IjY2NjEzOWExZTRmODhkZmYzMDRlMjQ2OTcyOTI1ODM4YjQzMWVlZDki.aB3ACQ.JdKw6PiNFfhUiVWu81DiPbA7acI', 'exp': 1746783769, 'aud': 'task_management_system', 'user_claims': {'username': 'admin', 'roles': ['admin'], 'permissions': ['manage_users', 'manage_roles', 'manage_all_projects', 'manage_project', 'manage_all_tasks', 'manage_task', 'view_project', 'view_task', 'manage_resources', 'manage_risks', 'view_reports', 'create_task', 'assign_task', 'change_project_status', 'change_task_status', 'create_project'], 'is_active': True}, 'roles': ['admin']}
2025-05-09 16:42:51,674 - app.utils.jwt_callbacks - INFO - Token d7a09cc7-6b76-415e-9055-e17e08a9d7a2 is valid
2025-05-09 16:42:51,674 - app.utils.jwt_callbacks - INFO - Token time difference: -2.674606 seconds
2025-05-09 16:42:51,675 - app.utils.jwt_callbacks - INFO - Verifying token
2025-05-09 16:42:51,676 - app.utils.jwt_callbacks - INFO - Token verification successful
2025-05-09 16:42:51,677 - app.utils.jwt_callbacks - INFO - JWT Header: {'alg': 'HS256', 'typ': 'JWT'}
2025-05-09 16:42:51,677 - werkzeug - INFO - 127.0.0.1 - - [09/May/2025 16:42:51] "[36mGET /static/favicon.ico HTTP/1.1[0m" 304 -
2025-05-09 16:42:51,678 - app.utils.jwt_callbacks - INFO - Looking up user with identity: 1
2025-05-09 16:42:51,678 - app.utils.jwt_callbacks - INFO - JWT Data: {'fresh': False, 'iat': 1746780169, 'jti': 'd7a09cc7-6b76-415e-9055-e17e08a9d7a2', 'type': 'access', 'sub': 1, 'nbf': 1746780169, 'csrf': 'IjY2NjEzOWExZTRmODhkZmYzMDRlMjQ2OTcyOTI1ODM4YjQzMWVlZDki.aB3ACQ.JdKw6PiNFfhUiVWu81DiPbA7acI', 'exp': 1746783769, 'aud': 'task_management_system', 'user_claims': {'username': 'admin', 'roles': ['admin'], 'permissions': ['manage_users', 'manage_roles', 'manage_all_projects', 'manage_project', 'manage_all_tasks', 'manage_task', 'view_project', 'view_task', 'manage_resources', 'manage_risks', 'view_reports', 'create_task', 'assign_task', 'change_project_status', 'change_task_status', 'create_project'], 'is_active': True}, 'roles': ['admin']}
2025-05-09 16:42:51,679 - sqlalchemy.engine.Engine - INFO - SELECT users.id AS users_id, users.username AS users_username, users.email AS users_email, users.name AS users_name, users.password_hash AS users_password_hash, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.last_login AS users_last_login 
FROM users 
WHERE users.id = ?
2025-05-09 16:42:51,680 - app.utils.jwt_callbacks - INFO - Token time difference: -2.680666 seconds
2025-05-09 16:42:51,681 - sqlalchemy.engine.Engine - INFO - [cached since 2.147s ago] (1,)
2025-05-09 16:42:51,681 - app.utils.jwt_callbacks - INFO - Token verification successful
2025-05-09 16:42:51,682 - app.utils.jwt_callbacks - INFO - Looking up user with identity: 1
2025-05-09 16:42:51,682 - app.utils.jwt_callbacks - INFO - User found: admin
2025-05-09 16:42:51,683 - sqlalchemy.engine.Engine - INFO - SELECT users.id AS users_id, users.username AS users_username, users.email AS users_email, users.name AS users_name, users.password_hash AS users_password_hash, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.last_login AS users_last_login 
FROM users 
WHERE users.id = ?
2025-05-09 16:42:51,684 - sqlalchemy.engine.Engine - INFO - SELECT roles.id AS roles_id, roles.name AS roles_name, roles.description AS roles_description, roles.created_at AS roles_created_at 
FROM roles, user_roles 
WHERE ? = user_roles.user_id AND roles.id = user_roles.role_id
2025-05-09 16:42:51,684 - sqlalchemy.engine.Engine - INFO - [cached since 2.151s ago] (1,)
2025-05-09 16:42:51,684 - sqlalchemy.engine.Engine - INFO - [cached since 2.226s ago] (1,)
2025-05-09 16:42:51,686 - app.utils.jwt_callbacks - INFO - User found: admin
2025-05-09 16:42:51,687 - app.utils.jwt_callbacks - INFO - User roles: ['admin']
2025-05-09 16:42:51,688 - sqlalchemy.engine.Engine - INFO - SELECT roles.id AS roles_id, roles.name AS roles_name, roles.description AS roles_description, roles.created_at AS roles_created_at 
FROM roles, user_roles 
WHERE ? = user_roles.user_id AND roles.id = user_roles.role_id
2025-05-09 16:42:51,689 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions, role_permissions 
WHERE ? = role_permissions.role_id AND permissions.id = role_permissions.permission_id
2025-05-09 16:42:51,689 - sqlalchemy.engine.Engine - INFO - [cached since 2.23s ago] (1,)
2025-05-09 16:42:51,690 - sqlalchemy.engine.Engine - INFO - [cached since 155.2s ago] (1,)
2025-05-09 16:42:51,691 - app.utils.jwt_callbacks - INFO - User roles: ['admin']
2025-05-09 16:42:51,691 - app.utils.jwt_callbacks - INFO - User permissions: ['manage_users', 'manage_roles', 'manage_all_projects', 'manage_project', 'manage_all_tasks', 'manage_task', 'view_project', 'view_task', 'manage_resources', 'manage_risks', 'view_reports', 'create_task', 'assign_task', 'change_project_status', 'change_task_status', 'create_project']
2025-05-09 16:42:51,693 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions, role_permissions 
WHERE ? = role_permissions.role_id AND permissions.id = role_permissions.permission_id
2025-05-09 16:42:51,694 - app.routes.projects - INFO - 获取项目经理列表API被调用
2025-05-09 16:42:51,694 - sqlalchemy.engine.Engine - INFO - [cached since 155.2s ago] (1,)
2025-05-09 16:42:51,695 - sqlalchemy.engine.Engine - INFO - SELECT users.id AS users_id, users.username AS users_username, users.email AS users_email, users.name AS users_name, users.password_hash AS users_password_hash, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.last_login AS users_last_login 
FROM users 
WHERE users.is_active = 1
2025-05-09 16:42:51,696 - sqlalchemy.engine.Engine - INFO - [generated in 0.00054s] ()
2025-05-09 16:42:51,696 - app.utils.jwt_callbacks - INFO - User permissions: ['manage_users', 'manage_roles', 'manage_all_projects', 'manage_project', 'manage_all_tasks', 'manage_task', 'view_project', 'view_task', 'manage_resources', 'manage_risks', 'view_reports', 'create_task', 'assign_task', 'change_project_status', 'change_task_status', 'create_project']
2025-05-09 16:42:51,697 - app.utils.jwt_callbacks - INFO - Checking if token d7a09cc7-6b76-415e-9055-e17e08a9d7a2 is in blocklist
2025-05-09 16:42:51,698 - app.routes.projects - INFO - 已找到 9 个活跃用户用于项目经理选择
2025-05-09 16:42:51,699 - sqlalchemy.engine.Engine - INFO - SELECT token_blacklist.id AS token_blacklist_id, token_blacklist.jti AS token_blacklist_jti, token_blacklist.token_type AS token_blacklist_token_type, token_blacklist.user_id AS token_blacklist_user_id, token_blacklist.revoked_at AS token_blacklist_revoked_at, token_blacklist.expires_at AS token_blacklist_expires_at 
FROM token_blacklist 
WHERE token_blacklist.jti = ?
 LIMIT ? OFFSET ?
2025-05-09 16:42:51,700 - sqlalchemy.engine.Engine - INFO - SELECT roles.id AS roles_id, roles.name AS roles_name, roles.description AS roles_description, roles.created_at AS roles_created_at 
FROM roles, user_roles 
WHERE ? = user_roles.user_id AND roles.id = user_roles.role_id
2025-05-09 16:42:51,700 - sqlalchemy.engine.Engine - INFO - [cached since 2.186s ago] ('d7a09cc7-6b76-415e-9055-e17e08a9d7a2', 1, 0)
2025-05-09 16:42:51,700 - sqlalchemy.engine.Engine - INFO - [cached since 2.241s ago] (8,)
2025-05-09 16:42:51,701 - app.utils.jwt_callbacks - INFO - Token d7a09cc7-6b76-415e-9055-e17e08a9d7a2 is valid
2025-05-09 16:42:51,702 - sqlalchemy.engine.Engine - INFO - SELECT roles.id AS roles_id, roles.name AS roles_name, roles.description AS roles_description, roles.created_at AS roles_created_at 
FROM roles, user_roles 
WHERE ? = user_roles.user_id AND roles.id = user_roles.role_id
2025-05-09 16:42:51,702 - app.utils.jwt_callbacks - INFO - Verifying token
2025-05-09 16:42:51,703 - sqlalchemy.engine.Engine - INFO - [cached since 2.244s ago] (9,)
2025-05-09 16:42:51,703 - app.utils.jwt_callbacks - INFO - JWT Header: {'alg': 'HS256', 'typ': 'JWT'}
2025-05-09 16:42:51,704 - sqlalchemy.engine.Engine - INFO - SELECT roles.id AS roles_id, roles.name AS roles_name, roles.description AS roles_description, roles.created_at AS roles_created_at 
FROM roles, user_roles 
WHERE ? = user_roles.user_id AND roles.id = user_roles.role_id
2025-05-09 16:42:51,705 - app.utils.jwt_callbacks - INFO - JWT Data: {'fresh': False, 'iat': 1746780169, 'jti': 'd7a09cc7-6b76-415e-9055-e17e08a9d7a2', 'type': 'access', 'sub': 1, 'nbf': 1746780169, 'csrf': 'IjY2NjEzOWExZTRmODhkZmYzMDRlMjQ2OTcyOTI1ODM4YjQzMWVlZDki.aB3ACQ.JdKw6PiNFfhUiVWu81DiPbA7acI', 'exp': 1746783769, 'aud': 'task_management_system', 'user_claims': {'username': 'admin', 'roles': ['admin'], 'permissions': ['manage_users', 'manage_roles', 'manage_all_projects', 'manage_project', 'manage_all_tasks', 'manage_task', 'view_project', 'view_task', 'manage_resources', 'manage_risks', 'view_reports', 'create_task', 'assign_task', 'change_project_status', 'change_task_status', 'create_project'], 'is_active': True}, 'roles': ['admin']}
2025-05-09 16:42:51,705 - sqlalchemy.engine.Engine - INFO - [cached since 2.247s ago] (4,)
2025-05-09 16:42:51,705 - app.utils.jwt_callbacks - INFO - Token time difference: -2.705827 seconds
2025-05-09 16:42:51,708 - sqlalchemy.engine.Engine - INFO - SELECT roles.id AS roles_id, roles.name AS roles_name, roles.description AS roles_description, roles.created_at AS roles_created_at 
FROM roles, user_roles 
WHERE ? = user_roles.user_id AND roles.id = user_roles.role_id
2025-05-09 16:42:51,708 - app.utils.jwt_callbacks - INFO - Token verification successful
2025-05-09 16:42:51,709 - sqlalchemy.engine.Engine - INFO - [cached since 2.25s ago] (5,)
2025-05-09 16:42:51,709 - app.utils.jwt_callbacks - INFO - Looking up user with identity: 1
2025-05-09 16:42:51,710 - sqlalchemy.engine.Engine - INFO - SELECT roles.id AS roles_id, roles.name AS roles_name, roles.description AS roles_description, roles.created_at AS roles_created_at 
FROM roles, user_roles 
WHERE ? = user_roles.user_id AND roles.id = user_roles.role_id
2025-05-09 16:42:51,711 - app.utils.jwt_callbacks - INFO - User found: admin
2025-05-09 16:42:51,711 - sqlalchemy.engine.Engine - INFO - [cached since 2.253s ago] (6,)
2025-05-09 16:42:51,711 - app.utils.jwt_callbacks - INFO - User roles: ['admin']
2025-05-09 16:42:51,712 - sqlalchemy.engine.Engine - INFO - SELECT roles.id AS roles_id, roles.name AS roles_name, roles.description AS roles_description, roles.created_at AS roles_created_at 
FROM roles, user_roles 
WHERE ? = user_roles.user_id AND roles.id = user_roles.role_id
2025-05-09 16:42:51,712 - app.utils.jwt_callbacks - INFO - User permissions: ['manage_users', 'manage_roles', 'manage_all_projects', 'manage_project', 'manage_all_tasks', 'manage_task', 'view_project', 'view_task', 'manage_resources', 'manage_risks', 'view_reports', 'create_task', 'assign_task', 'change_project_status', 'change_task_status', 'create_project']
2025-05-09 16:42:51,714 - sqlalchemy.engine.Engine - INFO - [cached since 2.255s ago] (7,)
2025-05-09 16:42:51,714 - app - INFO - Dashboard access with user ID: 1
2025-05-09 16:42:51,715 - sqlalchemy.engine.Engine - INFO - SELECT roles.id AS roles_id, roles.name AS roles_name, roles.description AS roles_description, roles.created_at AS roles_created_at 
FROM roles, user_roles 
WHERE ? = user_roles.user_id AND roles.id = user_roles.role_id
2025-05-09 16:42:51,715 - app - INFO - Token found in: cookies
2025-05-09 16:42:51,716 - sqlalchemy.engine.Engine - INFO - [cached since 2.257s ago] (2,)
2025-05-09 16:42:51,716 - app - INFO - Dashboard context user_data: {'id': 1, 'username': 'admin', 'email': 'admin@example.com', 'name': '管理员', 'is_active': True, 'created_at': '2025-05-07T01:07:21.773527', 'last_login': '2025-05-09T08:42:49.474854', 'roles': ['admin'], 'permissions': ['manage_all_projects', 'create_task', 'manage_project', 'manage_task', 'change_project_status', 'view_task', 'manage_resources', 'view_reports', 'change_task_status', 'manage_roles', 'create_project', 'manage_risks', 'manage_users', 'manage_all_tasks', 'assign_task', 'view_project']}
2025-05-09 16:42:51,717 - sqlalchemy.engine.Engine - INFO - SELECT roles.id AS roles_id, roles.name AS roles_name, roles.description AS roles_description, roles.created_at AS roles_created_at 
FROM roles, user_roles 
WHERE ? = user_roles.user_id AND roles.id = user_roles.role_id
2025-05-09 16:42:51,718 - app - INFO - 用户 admin 的角色: ['admin']
2025-05-09 16:42:51,718 - sqlalchemy.engine.Engine - INFO - [cached since 2.259s ago] (3,)
2025-05-09 16:42:51,718 - app - INFO - 用户 admin 的权限: ['manage_all_projects', 'create_task', 'manage_project', 'manage_task', 'change_project_status', 'view_task', 'manage_resources', 'view_reports', 'change_task_status', 'manage_roles', 'create_project', 'manage_risks', 'manage_users', 'manage_all_tasks', 'assign_task', 'view_project']
2025-05-09 16:42:51,719 - app.routes.projects - INFO - 返回 9 个可选的项目负责人
2025-05-09 16:42:51,719 - app - INFO - 用户 admin - 是否管理员: True, 是否项目经理: False
2025-05-09 16:42:51,720 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-05-09 16:42:51,723 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-05-09 16:42:51,721 - werkzeug - INFO - 127.0.0.1 - - [09/May/2025 16:42:51] "GET /api/project-managers?bypass_jwt=true HTTP/1.1" 200 -
2025-05-09 16:42:51,724 - werkzeug - INFO - 127.0.0.1 - - [09/May/2025 16:42:51] "GET /main/dashboard HTTP/1.1" 200 -
2025-05-09 16:50:33,360 - werkzeug - INFO - 127.0.0.1 - - [09/May/2025 16:50:33] "GET /login HTTP/1.1" 200 -
2025-05-09 16:50:33,391 - app.utils.jwt_callbacks - INFO - Checking if token d7a09cc7-6b76-415e-9055-e17e08a9d7a2 is in blocklist
2025-05-09 16:50:33,392 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-05-09 16:50:33,394 - werkzeug - INFO - 127.0.0.1 - - [09/May/2025 16:50:33] "[36mGET /static/css/bootstrap.min.css HTTP/1.1[0m" 304 -
2025-05-09 16:50:33,396 - sqlalchemy.engine.Engine - INFO - SELECT token_blacklist.id AS token_blacklist_id, token_blacklist.jti AS token_blacklist_jti, token_blacklist.token_type AS token_blacklist_token_type, token_blacklist.user_id AS token_blacklist_user_id, token_blacklist.revoked_at AS token_blacklist_revoked_at, token_blacklist.expires_at AS token_blacklist_expires_at 
FROM token_blacklist 
WHERE token_blacklist.jti = ?
 LIMIT ? OFFSET ?
2025-05-09 16:50:33,397 - werkzeug - INFO - 127.0.0.1 - - [09/May/2025 16:50:33] "[36mGET /static/css/bootstrap-icons.css HTTP/1.1[0m" 304 -
2025-05-09 16:50:33,399 - werkzeug - INFO - 127.0.0.1 - - [09/May/2025 16:50:33] "[36mGET /static/css/style.css HTTP/1.1[0m" 304 -
2025-05-09 16:50:33,402 - werkzeug - INFO - 127.0.0.1 - - [09/May/2025 16:50:33] "[36mGET /static/js/jquery.min.js HTTP/1.1[0m" 304 -
2025-05-09 16:50:33,403 - sqlalchemy.engine.Engine - INFO - [cached since 463.9s ago] ('d7a09cc7-6b76-415e-9055-e17e08a9d7a2', 1, 0)
2025-05-09 16:50:33,403 - werkzeug - INFO - 127.0.0.1 - - [09/May/2025 16:50:33] "[36mGET /static/js/bootstrap.bundle.min.js HTTP/1.1[0m" 304 -
2025-05-09 16:50:33,405 - werkzeug - INFO - 127.0.0.1 - - [09/May/2025 16:50:33] "[36mGET /static/images/background.png HTTP/1.1[0m" 304 -
2025-05-09 16:50:33,409 - werkzeug - INFO - 127.0.0.1 - - [09/May/2025 16:50:33] "[36mGET /static/js/auth.js HTTP/1.1[0m" 304 -
2025-05-09 16:50:33,410 - app.utils.jwt_callbacks - INFO - Token d7a09cc7-6b76-415e-9055-e17e08a9d7a2 is valid
2025-05-09 16:50:33,413 - app.utils.jwt_callbacks - INFO - Verifying token
2025-05-09 16:50:33,414 - app.utils.jwt_callbacks - INFO - JWT Header: {'alg': 'HS256', 'typ': 'JWT'}
2025-05-09 16:50:33,414 - app.utils.jwt_callbacks - INFO - JWT Data: {'fresh': False, 'iat': 1746780169, 'jti': 'd7a09cc7-6b76-415e-9055-e17e08a9d7a2', 'type': 'access', 'sub': 1, 'nbf': 1746780169, 'csrf': 'IjY2NjEzOWExZTRmODhkZmYzMDRlMjQ2OTcyOTI1ODM4YjQzMWVlZDki.aB3ACQ.JdKw6PiNFfhUiVWu81DiPbA7acI', 'exp': 1746783769, 'aud': 'task_management_system', 'user_claims': {'username': 'admin', 'roles': ['admin'], 'permissions': ['manage_users', 'manage_roles', 'manage_all_projects', 'manage_project', 'manage_all_tasks', 'manage_task', 'view_project', 'view_task', 'manage_resources', 'manage_risks', 'view_reports', 'create_task', 'assign_task', 'change_project_status', 'change_task_status', 'create_project'], 'is_active': True}, 'roles': ['admin']}
2025-05-09 16:50:33,417 - werkzeug - INFO - 127.0.0.1 - - [09/May/2025 16:50:33] "[36mGET /static/js/fix-modals.js HTTP/1.1[0m" 304 -
2025-05-09 16:50:33,417 - app.utils.jwt_callbacks - INFO - Token time difference: -464.41721 seconds
2025-05-09 16:50:33,418 - app.utils.jwt_callbacks - INFO - Token verification successful
2025-05-09 16:50:33,419 - app.utils.jwt_callbacks - INFO - Looking up user with identity: 1
2025-05-09 16:50:33,420 - sqlalchemy.engine.Engine - INFO - SELECT users.id AS users_id, users.username AS users_username, users.email AS users_email, users.name AS users_name, users.password_hash AS users_password_hash, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.last_login AS users_last_login 
FROM users 
WHERE users.id = ?
2025-05-09 16:50:33,421 - sqlalchemy.engine.Engine - INFO - [cached since 463.9s ago] (1,)
2025-05-09 16:50:33,422 - werkzeug - INFO - 127.0.0.1 - - [09/May/2025 16:50:33] "[36mGET /static/js/csrf.js HTTP/1.1[0m" 304 -
2025-05-09 16:50:33,425 - app.utils.jwt_callbacks - INFO - User found: admin
2025-05-09 16:50:33,427 - werkzeug - INFO - 127.0.0.1 - - [09/May/2025 16:50:33] "[36mGET /static/js/background-helper.js HTTP/1.1[0m" 304 -
2025-05-09 16:50:33,431 - werkzeug - INFO - 127.0.0.1 - - [09/May/2025 16:50:33] "[33mGET /static/uploads/background.png HTTP/1.1[0m" 404 -
2025-05-09 16:50:33,431 - sqlalchemy.engine.Engine - INFO - SELECT roles.id AS roles_id, roles.name AS roles_name, roles.description AS roles_description, roles.created_at AS roles_created_at 
FROM roles, user_roles 
WHERE ? = user_roles.user_id AND roles.id = user_roles.role_id
2025-05-09 16:50:33,434 - sqlalchemy.engine.Engine - INFO - [cached since 464s ago] (1,)
2025-05-09 16:50:33,435 - app.utils.jwt_callbacks - INFO - User roles: ['admin']
2025-05-09 16:50:33,436 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions, role_permissions 
WHERE ? = role_permissions.role_id AND permissions.id = role_permissions.permission_id
2025-05-09 16:50:33,437 - sqlalchemy.engine.Engine - INFO - [cached since 616.9s ago] (1,)
2025-05-09 16:50:33,438 - app.utils.jwt_callbacks - INFO - User permissions: ['manage_users', 'manage_roles', 'manage_all_projects', 'manage_project', 'manage_all_tasks', 'manage_task', 'view_project', 'view_task', 'manage_resources', 'manage_risks', 'view_reports', 'create_task', 'assign_task', 'change_project_status', 'change_task_status', 'create_project']
2025-05-09 16:50:33,439 - app.utils.jwt_callbacks - INFO - Checking if token d7a09cc7-6b76-415e-9055-e17e08a9d7a2 is in blocklist
2025-05-09 16:50:33,442 - sqlalchemy.engine.Engine - INFO - SELECT token_blacklist.id AS token_blacklist_id, token_blacklist.jti AS token_blacklist_jti, token_blacklist.token_type AS token_blacklist_token_type, token_blacklist.user_id AS token_blacklist_user_id, token_blacklist.revoked_at AS token_blacklist_revoked_at, token_blacklist.expires_at AS token_blacklist_expires_at 
FROM token_blacklist 
WHERE token_blacklist.jti = ?
 LIMIT ? OFFSET ?
2025-05-09 16:50:33,442 - sqlalchemy.engine.Engine - INFO - [cached since 463.9s ago] ('d7a09cc7-6b76-415e-9055-e17e08a9d7a2', 1, 0)
2025-05-09 16:50:33,444 - app.utils.jwt_callbacks - INFO - Token d7a09cc7-6b76-415e-9055-e17e08a9d7a2 is valid
2025-05-09 16:50:33,444 - app.utils.jwt_callbacks - INFO - Verifying token
2025-05-09 16:50:33,445 - app.utils.jwt_callbacks - INFO - JWT Header: {'alg': 'HS256', 'typ': 'JWT'}
2025-05-09 16:50:33,445 - app.utils.jwt_callbacks - INFO - JWT Data: {'fresh': False, 'iat': 1746780169, 'jti': 'd7a09cc7-6b76-415e-9055-e17e08a9d7a2', 'type': 'access', 'sub': 1, 'nbf': 1746780169, 'csrf': 'IjY2NjEzOWExZTRmODhkZmYzMDRlMjQ2OTcyOTI1ODM4YjQzMWVlZDki.aB3ACQ.JdKw6PiNFfhUiVWu81DiPbA7acI', 'exp': 1746783769, 'aud': 'task_management_system', 'user_claims': {'username': 'admin', 'roles': ['admin'], 'permissions': ['manage_users', 'manage_roles', 'manage_all_projects', 'manage_project', 'manage_all_tasks', 'manage_task', 'view_project', 'view_task', 'manage_resources', 'manage_risks', 'view_reports', 'create_task', 'assign_task', 'change_project_status', 'change_task_status', 'create_project'], 'is_active': True}, 'roles': ['admin']}
2025-05-09 16:50:33,446 - app.utils.jwt_callbacks - INFO - Token time difference: -464.446245 seconds
2025-05-09 16:50:33,448 - werkzeug - INFO - 127.0.0.1 - - [09/May/2025 16:50:33] "[36mGET /static/css/bootstrap.min.css.map HTTP/1.1[0m" 304 -
2025-05-09 16:50:33,448 - app.utils.jwt_callbacks - INFO - Token verification successful
2025-05-09 16:50:33,449 - app.utils.jwt_callbacks - INFO - Looking up user with identity: 1
2025-05-09 16:50:33,449 - app.utils.jwt_callbacks - INFO - User found: admin
2025-05-09 16:50:33,451 - app.utils.jwt_callbacks - INFO - User roles: ['admin']
2025-05-09 16:50:33,451 - app.utils.jwt_callbacks - INFO - User permissions: ['manage_users', 'manage_roles', 'manage_all_projects', 'manage_project', 'manage_all_tasks', 'manage_task', 'view_project', 'view_task', 'manage_resources', 'manage_risks', 'view_reports', 'create_task', 'assign_task', 'change_project_status', 'change_task_status', 'create_project']
2025-05-09 16:50:33,452 - app - INFO - 用户已认证，重定向到仪表板页面: /.well-known/appspecific/com.chrome.devtools.json
2025-05-09 16:50:33,453 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-05-09 16:50:33,456 - werkzeug - INFO - 127.0.0.1 - - [09/May/2025 16:50:33] "[33mGET /static/uploads/background.png HTTP/1.1[0m" 404 -
2025-05-09 16:50:33,456 - werkzeug - INFO - 127.0.0.1 - - [09/May/2025 16:50:33] "[32mGET /.well-known/appspecific/com.chrome.devtools.json HTTP/1.1[0m" 302 -
2025-05-09 16:50:33,460 - app.utils.jwt_callbacks - INFO - Checking if token d7a09cc7-6b76-415e-9055-e17e08a9d7a2 is in blocklist
2025-05-09 16:50:33,463 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-05-09 16:50:33,463 - sqlalchemy.engine.Engine - INFO - SELECT token_blacklist.id AS token_blacklist_id, token_blacklist.jti AS token_blacklist_jti, token_blacklist.token_type AS token_blacklist_token_type, token_blacklist.user_id AS token_blacklist_user_id, token_blacklist.revoked_at AS token_blacklist_revoked_at, token_blacklist.expires_at AS token_blacklist_expires_at 
FROM token_blacklist 
WHERE token_blacklist.jti = ?
 LIMIT ? OFFSET ?
2025-05-09 16:50:33,464 - sqlalchemy.engine.Engine - INFO - [cached since 463.9s ago] ('d7a09cc7-6b76-415e-9055-e17e08a9d7a2', 1, 0)
2025-05-09 16:50:33,465 - app.utils.jwt_callbacks - INFO - Token d7a09cc7-6b76-415e-9055-e17e08a9d7a2 is valid
2025-05-09 16:50:33,466 - app.utils.jwt_callbacks - INFO - Verifying token
2025-05-09 16:50:33,466 - app.utils.jwt_callbacks - INFO - JWT Header: {'alg': 'HS256', 'typ': 'JWT'}
2025-05-09 16:50:33,466 - app.utils.jwt_callbacks - INFO - JWT Data: {'fresh': False, 'iat': 1746780169, 'jti': 'd7a09cc7-6b76-415e-9055-e17e08a9d7a2', 'type': 'access', 'sub': 1, 'nbf': 1746780169, 'csrf': 'IjY2NjEzOWExZTRmODhkZmYzMDRlMjQ2OTcyOTI1ODM4YjQzMWVlZDki.aB3ACQ.JdKw6PiNFfhUiVWu81DiPbA7acI', 'exp': 1746783769, 'aud': 'task_management_system', 'user_claims': {'username': 'admin', 'roles': ['admin'], 'permissions': ['manage_users', 'manage_roles', 'manage_all_projects', 'manage_project', 'manage_all_tasks', 'manage_task', 'view_project', 'view_task', 'manage_resources', 'manage_risks', 'view_reports', 'create_task', 'assign_task', 'change_project_status', 'change_task_status', 'create_project'], 'is_active': True}, 'roles': ['admin']}
2025-05-09 16:50:33,466 - app.utils.jwt_callbacks - INFO - Token time difference: -464.466983 seconds
2025-05-09 16:50:33,468 - app.utils.jwt_callbacks - INFO - Token verification successful
2025-05-09 16:50:33,468 - app.utils.jwt_callbacks - INFO - Looking up user with identity: 1
2025-05-09 16:50:33,469 - sqlalchemy.engine.Engine - INFO - SELECT users.id AS users_id, users.username AS users_username, users.email AS users_email, users.name AS users_name, users.password_hash AS users_password_hash, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.last_login AS users_last_login 
FROM users 
WHERE users.id = ?
2025-05-09 16:50:33,470 - sqlalchemy.engine.Engine - INFO - [cached since 463.9s ago] (1,)
2025-05-09 16:50:33,470 - app.utils.jwt_callbacks - INFO - User found: admin
2025-05-09 16:50:33,471 - sqlalchemy.engine.Engine - INFO - SELECT roles.id AS roles_id, roles.name AS roles_name, roles.description AS roles_description, roles.created_at AS roles_created_at 
FROM roles, user_roles 
WHERE ? = user_roles.user_id AND roles.id = user_roles.role_id
2025-05-09 16:50:33,471 - sqlalchemy.engine.Engine - INFO - [cached since 464s ago] (1,)
2025-05-09 16:50:33,472 - app.utils.jwt_callbacks - INFO - User roles: ['admin']
2025-05-09 16:50:33,474 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions, role_permissions 
WHERE ? = role_permissions.role_id AND permissions.id = role_permissions.permission_id
2025-05-09 16:50:33,474 - sqlalchemy.engine.Engine - INFO - [cached since 617s ago] (1,)
2025-05-09 16:50:33,476 - app.utils.jwt_callbacks - INFO - User permissions: ['manage_users', 'manage_roles', 'manage_all_projects', 'manage_project', 'manage_all_tasks', 'manage_task', 'view_project', 'view_task', 'manage_resources', 'manage_risks', 'view_reports', 'create_task', 'assign_task', 'change_project_status', 'change_task_status', 'create_project']
2025-05-09 16:50:33,477 - app.utils.jwt_callbacks - INFO - Checking if token d7a09cc7-6b76-415e-9055-e17e08a9d7a2 is in blocklist
2025-05-09 16:50:33,479 - sqlalchemy.engine.Engine - INFO - SELECT token_blacklist.id AS token_blacklist_id, token_blacklist.jti AS token_blacklist_jti, token_blacklist.token_type AS token_blacklist_token_type, token_blacklist.user_id AS token_blacklist_user_id, token_blacklist.revoked_at AS token_blacklist_revoked_at, token_blacklist.expires_at AS token_blacklist_expires_at 
FROM token_blacklist 
WHERE token_blacklist.jti = ?
 LIMIT ? OFFSET ?
2025-05-09 16:50:33,479 - sqlalchemy.engine.Engine - INFO - [cached since 464s ago] ('d7a09cc7-6b76-415e-9055-e17e08a9d7a2', 1, 0)
2025-05-09 16:50:33,480 - app.utils.jwt_callbacks - INFO - Token d7a09cc7-6b76-415e-9055-e17e08a9d7a2 is valid
2025-05-09 16:50:33,480 - app.utils.jwt_callbacks - INFO - Verifying token
2025-05-09 16:50:33,481 - app.utils.jwt_callbacks - INFO - JWT Header: {'alg': 'HS256', 'typ': 'JWT'}
2025-05-09 16:50:33,481 - app.utils.jwt_callbacks - INFO - JWT Data: {'fresh': False, 'iat': 1746780169, 'jti': 'd7a09cc7-6b76-415e-9055-e17e08a9d7a2', 'type': 'access', 'sub': 1, 'nbf': 1746780169, 'csrf': 'IjY2NjEzOWExZTRmODhkZmYzMDRlMjQ2OTcyOTI1ODM4YjQzMWVlZDki.aB3ACQ.JdKw6PiNFfhUiVWu81DiPbA7acI', 'exp': 1746783769, 'aud': 'task_management_system', 'user_claims': {'username': 'admin', 'roles': ['admin'], 'permissions': ['manage_users', 'manage_roles', 'manage_all_projects', 'manage_project', 'manage_all_tasks', 'manage_task', 'view_project', 'view_task', 'manage_resources', 'manage_risks', 'view_reports', 'create_task', 'assign_task', 'change_project_status', 'change_task_status', 'create_project'], 'is_active': True}, 'roles': ['admin']}
2025-05-09 16:50:33,482 - app.utils.jwt_callbacks - INFO - Token time difference: -464.482832 seconds
2025-05-09 16:50:33,482 - app.utils.jwt_callbacks - INFO - Token verification successful
2025-05-09 16:50:33,484 - app.utils.jwt_callbacks - INFO - Looking up user with identity: 1
2025-05-09 16:50:33,484 - app.utils.jwt_callbacks - INFO - User found: admin
2025-05-09 16:50:33,485 - app.utils.jwt_callbacks - INFO - User roles: ['admin']
2025-05-09 16:50:33,485 - app.utils.jwt_callbacks - INFO - User permissions: ['manage_users', 'manage_roles', 'manage_all_projects', 'manage_project', 'manage_all_tasks', 'manage_task', 'view_project', 'view_task', 'manage_resources', 'manage_risks', 'view_reports', 'create_task', 'assign_task', 'change_project_status', 'change_task_status', 'create_project']
2025-05-09 16:50:33,486 - app - INFO - Dashboard access with user ID: 1
2025-05-09 16:50:33,487 - app - INFO - Token found in: cookies
2025-05-09 16:50:33,487 - app - INFO - Dashboard context user_data: {'id': 1, 'username': 'admin', 'email': 'admin@example.com', 'name': '管理员', 'is_active': True, 'created_at': '2025-05-07T01:07:21.773527', 'last_login': '2025-05-09T08:42:49.474854', 'roles': ['admin'], 'permissions': ['manage_all_projects', 'create_task', 'manage_project', 'manage_task', 'change_project_status', 'view_task', 'manage_resources', 'view_reports', 'change_task_status', 'manage_roles', 'create_project', 'manage_risks', 'manage_users', 'manage_all_tasks', 'assign_task', 'view_project']}
2025-05-09 16:50:33,488 - app - INFO - 用户 admin 的角色: ['admin']
2025-05-09 16:50:33,488 - app - INFO - 用户 admin 的权限: ['manage_all_projects', 'create_task', 'manage_project', 'manage_task', 'change_project_status', 'view_task', 'manage_resources', 'view_reports', 'change_task_status', 'manage_roles', 'create_project', 'manage_risks', 'manage_users', 'manage_all_tasks', 'assign_task', 'view_project']
2025-05-09 16:50:33,489 - app - INFO - 用户 admin - 是否管理员: True, 是否项目经理: False
2025-05-09 16:50:33,490 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-05-09 16:50:33,492 - werkzeug - INFO - 127.0.0.1 - - [09/May/2025 16:50:33] "GET /main/dashboard HTTP/1.1" 200 -
2025-05-09 16:50:33,498 - werkzeug - INFO - 127.0.0.1 - - [09/May/2025 16:50:33] "[36mGET /static/favicon.ico HTTP/1.1[0m" 304 -
2025-05-09 16:50:34,450 - werkzeug - INFO - 127.0.0.1 - - [09/May/2025 16:50:34] "[33mGET /static/uploads/background.png HTTP/1.1[0m" 404 -
2025-05-09 16:50:35,369 - app - INFO - 登录请求 - 方法: POST, 内容类型: application/x-www-form-urlencoded
2025-05-09 16:50:35,370 - app - INFO - 请求头: {'Host': '127.0.0.1:5000', 'Connection': 'keep-alive', 'Content-Length': '135', 'Cache-Control': 'max-age=0', 'Sec-Ch-Ua': '"Chromium";v="136", "Microsoft Edge";v="136", "Not.A/Brand";v="99"', 'Sec-Ch-Ua-Mobile': '?0', 'Sec-Ch-Ua-Platform': '"Windows"', 'Origin': 'http://127.0.0.1:5000', 'Content-Type': 'application/x-www-form-urlencoded', 'Upgrade-Insecure-Requests': '1', 'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36 Edg/136.0.0.0', 'Accept': 'text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.7', 'Sec-Fetch-Site': 'same-origin', 'Sec-Fetch-Mode': 'navigate', 'Sec-Fetch-User': '?1', 'Sec-Fetch-Dest': 'document', 'Referer': 'http://127.0.0.1:5000/login', 'Accept-Encoding': 'gzip, deflate, br, zstd', 'Accept-Language': 'zh-CN,zh;q=0.9,en;q=0.8,en-GB;q=0.7,en-US;q=0.6', 'Cookie': 'user_roles=admin; access_token_cookie=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJmcmVzaCI6ZmFsc2UsImlhdCI6MTc0Njc4MDE2OSwianRpIjoiZDdhMDljYzctNmI3Ni00MTVlLTkwNTUtZTE3ZTA4YTlkN2EyIiwidHlwZSI6ImFjY2VzcyIsInN1YiI6MSwibmJmIjoxNzQ2NzgwMTY5LCJjc3JmIjoiSWpZMk5qRXpPV0V4WlRSbU9EaGtabVl6TURSbE1qUTJPVGN5T1RJMU9ETTRZalF6TVdWbFpEa2kuYUIzQUNRLkpkS3c2UGlORmZoVWlWV3U4MURpUGJBN2FjSSIsImV4cCI6MTc0Njc4Mzc2OSwiYXVkIjoidGFza19tYW5hZ2VtZW50X3N5c3RlbSIsInVzZXJfY2xhaW1zIjp7InVzZXJuYW1lIjoiYWRtaW4iLCJyb2xlcyI6WyJhZG1pbiJdLCJwZXJtaXNzaW9ucyI6WyJtYW5hZ2VfdXNlcnMiLCJtYW5hZ2Vfcm9sZXMiLCJtYW5hZ2VfYWxsX3Byb2plY3RzIiwibWFuYWdlX3Byb2plY3QiLCJtYW5hZ2VfYWxsX3Rhc2tzIiwibWFuYWdlX3Rhc2siLCJ2aWV3X3Byb2plY3QiLCJ2aWV3X3Rhc2siLCJtYW5hZ2VfcmVzb3VyY2VzIiwibWFuYWdlX3Jpc2tzIiwidmlld19yZXBvcnRzIiwiY3JlYXRlX3Rhc2siLCJhc3NpZ25fdGFzayIsImNoYW5nZV9wcm9qZWN0X3N0YXR1cyIsImNoYW5nZV90YXNrX3N0YXR1cyIsImNyZWF0ZV9wcm9qZWN0Il0sImlzX2FjdGl2ZSI6dHJ1ZX0sInJvbGVzIjpbImFkbWluIl19.ynX48TlzYsKQQAzcaGzfKwN0RD_7lDOnG60J0rok9g8; csrf_access_token=IjY2NjEzOWExZTRmODhkZmYzMDRlMjQ2OTcyOTI1ODM4YjQzMWVlZDki.aB3ACQ.JdKw6PiNFfhUiVWu81DiPbA7acI; csrf_token=IjY2NjEzOWExZTRmODhkZmYzMDRlMjQ2OTcyOTI1ODM4YjQzMWVlZDki.aB3ACQ.JdKw6PiNFfhUiVWu81DiPbA7acI; session=eyJjc3JmX3Rva2VuIjoiNjY2MTM5YTFlNGY4OGRmZjMwNGUyNDY5NzI5MjU4MzhiNDMxZWVkOSJ9.aB3B2g.sMRTNhF_PHn4-9TVnDPFkgXGePE'}
2025-05-09 16:50:35,371 - app - INFO - 处理表单格式的登录请求
2025-05-09 16:50:35,372 - app - INFO - 表单数据: username=admin, password=********
2025-05-09 16:50:35,373 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-05-09 16:50:35,374 - sqlalchemy.engine.Engine - INFO - SELECT users.id AS users_id, users.username AS users_username, users.email AS users_email, users.name AS users_name, users.password_hash AS users_password_hash, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.last_login AS users_last_login 
FROM users 
WHERE users.username = ?
 LIMIT ? OFFSET ?
2025-05-09 16:50:35,375 - sqlalchemy.engine.Engine - INFO - [cached since 618.9s ago] ('admin', 1, 0)
2025-05-09 16:50:35,831 - app - INFO - 已生成CSRF令牌: IjY2NjEzOW...
2025-05-09 16:50:35,833 - sqlalchemy.engine.Engine - INFO - SELECT roles.id AS roles_id, roles.name AS roles_name, roles.description AS roles_description, roles.created_at AS roles_created_at 
FROM roles, user_roles 
WHERE ? = user_roles.user_id AND roles.id = user_roles.role_id
2025-05-09 16:50:35,834 - sqlalchemy.engine.Engine - INFO - [cached since 466.4s ago] (1,)
2025-05-09 16:50:35,835 - app - INFO - 用户 admin 的角色: ['admin']
2025-05-09 16:50:35,836 - app.utils.jwt_callbacks - INFO - Adding additional claims for user 1
2025-05-09 16:50:35,839 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions, role_permissions 
WHERE ? = role_permissions.role_id AND permissions.id = role_permissions.permission_id
2025-05-09 16:50:35,839 - sqlalchemy.engine.Engine - INFO - [cached since 619.3s ago] (1,)
2025-05-09 16:50:35,841 - app.utils.jwt_callbacks - INFO - Added claims for user 1: {'aud': 'task_management_system', 'user_claims': {'username': 'admin', 'roles': ['admin'], 'permissions': ['manage_users', 'manage_roles', 'manage_all_projects', 'manage_project', 'manage_all_tasks', 'manage_task', 'view_project', 'view_task', 'manage_resources', 'manage_risks', 'view_reports', 'create_task', 'assign_task', 'change_project_status', 'change_task_status', 'create_project'], 'is_active': True}}
2025-05-09 16:50:35,842 - app.utils.jwt_callbacks - INFO - Adding additional claims for user 1
2025-05-09 16:50:35,845 - app.utils.jwt_callbacks - INFO - Added claims for user 1: {'aud': 'task_management_system', 'user_claims': {'username': 'admin', 'roles': ['admin'], 'permissions': ['manage_users', 'manage_roles', 'manage_all_projects', 'manage_project', 'manage_all_tasks', 'manage_task', 'view_project', 'view_task', 'manage_resources', 'manage_risks', 'view_reports', 'create_task', 'assign_task', 'change_project_status', 'change_task_status', 'create_project'], 'is_active': True}}
2025-05-09 16:50:35,847 - sqlalchemy.engine.Engine - INFO - UPDATE users SET updated_at=?, last_login=? WHERE users.id = ?
2025-05-09 16:50:35,848 - sqlalchemy.engine.Engine - INFO - [cached since 466.4s ago] ('2025-05-09 08:50:35.847121', '2025-05-09 08:50:35.845054', 1)
2025-05-09 16:50:35,853 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-05-09 16:50:35,864 - app - INFO - 用户登录成功: admin
2025-05-09 16:50:35,871 - werkzeug - INFO - 127.0.0.1 - - [09/May/2025 16:50:35] "[32mPOST /login HTTP/1.1[0m" 302 -
2025-05-09 16:50:35,885 - app.utils.jwt_callbacks - INFO - Checking if token eed019d1-8c08-4ba7-823a-bd4cb4f64d3b is in blocklist
2025-05-09 16:50:35,887 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-05-09 16:50:35,888 - sqlalchemy.engine.Engine - INFO - SELECT token_blacklist.id AS token_blacklist_id, token_blacklist.jti AS token_blacklist_jti, token_blacklist.token_type AS token_blacklist_token_type, token_blacklist.user_id AS token_blacklist_user_id, token_blacklist.revoked_at AS token_blacklist_revoked_at, token_blacklist.expires_at AS token_blacklist_expires_at 
FROM token_blacklist 
WHERE token_blacklist.jti = ?
 LIMIT ? OFFSET ?
2025-05-09 16:50:35,889 - sqlalchemy.engine.Engine - INFO - [cached since 466.4s ago] ('eed019d1-8c08-4ba7-823a-bd4cb4f64d3b', 1, 0)
2025-05-09 16:50:35,891 - app.utils.jwt_callbacks - INFO - Token eed019d1-8c08-4ba7-823a-bd4cb4f64d3b is valid
2025-05-09 16:50:35,892 - app.utils.jwt_callbacks - INFO - Verifying token
2025-05-09 16:50:35,893 - app.utils.jwt_callbacks - INFO - JWT Header: {'alg': 'HS256', 'typ': 'JWT'}
2025-05-09 16:50:35,893 - app.utils.jwt_callbacks - INFO - JWT Data: {'fresh': False, 'iat': 1746780635, 'jti': 'eed019d1-8c08-4ba7-823a-bd4cb4f64d3b', 'type': 'access', 'sub': 1, 'nbf': 1746780635, 'csrf': 'IjY2NjEzOWExZTRmODhkZmYzMDRlMjQ2OTcyOTI1ODM4YjQzMWVlZDki.aB3B2w.8IjKMzU2uaGK1qyKosqCx_nxoMg', 'exp': 1746784235, 'aud': 'task_management_system', 'user_claims': {'username': 'admin', 'roles': ['admin'], 'permissions': ['manage_users', 'manage_roles', 'manage_all_projects', 'manage_project', 'manage_all_tasks', 'manage_task', 'view_project', 'view_task', 'manage_resources', 'manage_risks', 'view_reports', 'create_task', 'assign_task', 'change_project_status', 'change_task_status', 'create_project'], 'is_active': True}, 'roles': ['admin']}
2025-05-09 16:50:35,895 - app.utils.jwt_callbacks - INFO - Token time difference: -0.895276 seconds
2025-05-09 16:50:35,897 - app.utils.jwt_callbacks - INFO - Token verification successful
2025-05-09 16:50:35,898 - app.utils.jwt_callbacks - INFO - Looking up user with identity: 1
2025-05-09 16:50:35,900 - sqlalchemy.engine.Engine - INFO - SELECT users.id AS users_id, users.username AS users_username, users.email AS users_email, users.name AS users_name, users.password_hash AS users_password_hash, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.last_login AS users_last_login 
FROM users 
WHERE users.id = ?
2025-05-09 16:50:35,901 - sqlalchemy.engine.Engine - INFO - [cached since 466.4s ago] (1,)
2025-05-09 16:50:35,903 - app.utils.jwt_callbacks - INFO - User found: admin
2025-05-09 16:50:35,905 - sqlalchemy.engine.Engine - INFO - SELECT roles.id AS roles_id, roles.name AS roles_name, roles.description AS roles_description, roles.created_at AS roles_created_at 
FROM roles, user_roles 
WHERE ? = user_roles.user_id AND roles.id = user_roles.role_id
2025-05-09 16:50:35,905 - sqlalchemy.engine.Engine - INFO - [cached since 466.4s ago] (1,)
2025-05-09 16:50:35,907 - app.utils.jwt_callbacks - INFO - User roles: ['admin']
2025-05-09 16:50:35,908 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions, role_permissions 
WHERE ? = role_permissions.role_id AND permissions.id = role_permissions.permission_id
2025-05-09 16:50:35,908 - sqlalchemy.engine.Engine - INFO - [cached since 619.4s ago] (1,)
2025-05-09 16:50:35,909 - app.utils.jwt_callbacks - INFO - User permissions: ['manage_users', 'manage_roles', 'manage_all_projects', 'manage_project', 'manage_all_tasks', 'manage_task', 'view_project', 'view_task', 'manage_resources', 'manage_risks', 'view_reports', 'create_task', 'assign_task', 'change_project_status', 'change_task_status', 'create_project']
2025-05-09 16:50:35,911 - app.utils.jwt_callbacks - INFO - Checking if token eed019d1-8c08-4ba7-823a-bd4cb4f64d3b is in blocklist
2025-05-09 16:50:35,913 - sqlalchemy.engine.Engine - INFO - SELECT token_blacklist.id AS token_blacklist_id, token_blacklist.jti AS token_blacklist_jti, token_blacklist.token_type AS token_blacklist_token_type, token_blacklist.user_id AS token_blacklist_user_id, token_blacklist.revoked_at AS token_blacklist_revoked_at, token_blacklist.expires_at AS token_blacklist_expires_at 
FROM token_blacklist 
WHERE token_blacklist.jti = ?
 LIMIT ? OFFSET ?
2025-05-09 16:50:35,915 - sqlalchemy.engine.Engine - INFO - [cached since 466.4s ago] ('eed019d1-8c08-4ba7-823a-bd4cb4f64d3b', 1, 0)
2025-05-09 16:50:35,916 - app.utils.jwt_callbacks - INFO - Token eed019d1-8c08-4ba7-823a-bd4cb4f64d3b is valid
2025-05-09 16:50:35,917 - app.utils.jwt_callbacks - INFO - Verifying token
2025-05-09 16:50:35,918 - app.utils.jwt_callbacks - INFO - JWT Header: {'alg': 'HS256', 'typ': 'JWT'}
2025-05-09 16:50:35,919 - app.utils.jwt_callbacks - INFO - JWT Data: {'fresh': False, 'iat': 1746780635, 'jti': 'eed019d1-8c08-4ba7-823a-bd4cb4f64d3b', 'type': 'access', 'sub': 1, 'nbf': 1746780635, 'csrf': 'IjY2NjEzOWExZTRmODhkZmYzMDRlMjQ2OTcyOTI1ODM4YjQzMWVlZDki.aB3B2w.8IjKMzU2uaGK1qyKosqCx_nxoMg', 'exp': 1746784235, 'aud': 'task_management_system', 'user_claims': {'username': 'admin', 'roles': ['admin'], 'permissions': ['manage_users', 'manage_roles', 'manage_all_projects', 'manage_project', 'manage_all_tasks', 'manage_task', 'view_project', 'view_task', 'manage_resources', 'manage_risks', 'view_reports', 'create_task', 'assign_task', 'change_project_status', 'change_task_status', 'create_project'], 'is_active': True}, 'roles': ['admin']}
2025-05-09 16:50:35,922 - app.utils.jwt_callbacks - INFO - Token time difference: -0.922232 seconds
2025-05-09 16:50:35,923 - app.utils.jwt_callbacks - INFO - Token verification successful
2025-05-09 16:50:35,924 - app.utils.jwt_callbacks - INFO - Looking up user with identity: 1
2025-05-09 16:50:35,925 - app.utils.jwt_callbacks - INFO - User found: admin
2025-05-09 16:50:35,925 - app.utils.jwt_callbacks - INFO - User roles: ['admin']
2025-05-09 16:50:35,928 - app.utils.jwt_callbacks - INFO - User permissions: ['manage_users', 'manage_roles', 'manage_all_projects', 'manage_project', 'manage_all_tasks', 'manage_task', 'view_project', 'view_task', 'manage_resources', 'manage_risks', 'view_reports', 'create_task', 'assign_task', 'change_project_status', 'change_task_status', 'create_project']
2025-05-09 16:50:35,929 - app - INFO - Dashboard access with user ID: 1
2025-05-09 16:50:35,931 - app - INFO - Token found in: cookies
2025-05-09 16:50:35,932 - app - INFO - Dashboard context user_data: {'id': 1, 'username': 'admin', 'email': 'admin@example.com', 'name': '管理员', 'is_active': True, 'created_at': '2025-05-07T01:07:21.773527', 'last_login': '2025-05-09T08:50:35.845054', 'roles': ['admin'], 'permissions': ['manage_all_projects', 'create_task', 'manage_project', 'manage_task', 'change_project_status', 'view_task', 'manage_resources', 'view_reports', 'change_task_status', 'manage_roles', 'create_project', 'manage_risks', 'manage_users', 'manage_all_tasks', 'assign_task', 'view_project']}
2025-05-09 16:50:35,934 - app - INFO - 用户 admin 的角色: ['admin']
2025-05-09 16:50:35,935 - app - INFO - 用户 admin 的权限: ['manage_all_projects', 'create_task', 'manage_project', 'manage_task', 'change_project_status', 'view_task', 'manage_resources', 'view_reports', 'change_task_status', 'manage_roles', 'create_project', 'manage_risks', 'manage_users', 'manage_all_tasks', 'assign_task', 'view_project']
2025-05-09 16:50:35,937 - app - INFO - 用户 admin - 是否管理员: True, 是否项目经理: False
2025-05-09 16:50:35,940 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-05-09 16:50:35,941 - werkzeug - INFO - 127.0.0.1 - - [09/May/2025 16:50:35] "GET /main/dashboard HTTP/1.1" 200 -
2025-05-09 16:50:35,968 - app.utils.jwt_callbacks - INFO - Checking if token eed019d1-8c08-4ba7-823a-bd4cb4f64d3b is in blocklist
2025-05-09 16:50:35,972 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-05-09 16:50:35,973 - sqlalchemy.engine.Engine - INFO - SELECT token_blacklist.id AS token_blacklist_id, token_blacklist.jti AS token_blacklist_jti, token_blacklist.token_type AS token_blacklist_token_type, token_blacklist.user_id AS token_blacklist_user_id, token_blacklist.revoked_at AS token_blacklist_revoked_at, token_blacklist.expires_at AS token_blacklist_expires_at 
FROM token_blacklist 
WHERE token_blacklist.jti = ?
 LIMIT ? OFFSET ?
