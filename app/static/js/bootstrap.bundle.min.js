/*!
  * Bootstrap v5.1.3 (https://getbootstrap.com/)
 * Copyright 2011-2021 The Bootstrap Authors
 * Copyright 2011-2021 Twitter, Inc.
  * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE)
  */

(function (global, factory) {
  typeof exports === 'object' && typeof module !== 'undefined' ? module.exports = factory(require('@popperjs/core')) :
  typeof define === 'function' && define.amd ? define(['@popperjs/core'], factory) :
  (global = typeof globalThis !== 'undefined' ? globalThis : global || self, global.bootstrap = factory(global.Popper));
})(this, (function (Popper) {
  'use strict';

  function _interopDefaultLegacy (e) { return e && typeof e === 'object' && 'default' in e ? e : { 'default': e }; }

  var Popper__default = /*#__PURE__*/_interopDefaultLegacy(Popper);

  // 这里只包含基本功能，完整版本请从Bootstrap官网下载
  const bootstrap = {
    Alert: class {
      static get NAME() {
        return 'alert';
      }
      static get DATA_KEY() {
        return 'bs.alert';
      }
      static get EVENT_KEY() {
        return `.${this.DATA_KEY}`;
      }
      static get Default() {
        return {
          animation: true,
          autohide: true,
          delay: 5000
        };
      }
    },
    Button: class {
      constructor(element) {
        this._element = element;
      }
      toggle() {
        this._element.classList.toggle('active');
      }
    },
    Collapse: class {
      constructor(element) {
        this._element = element;
      }
      toggle() {
        this._element.classList.toggle('show');
      }
    },
    Dropdown: class {
      constructor(element) {
        this._element = element;
      }
      toggle() {
        this._element.classList.toggle('show');
      }
    },
    Modal: class {
      constructor(element) {
        this._element = element;
        // Store modal instance in DOM element
        if (element) {
          element._bsModal = this;
        }
      }
      
      // 添加静态方法
      static getInstance(element) {
        return element._bsModal || null;
      }
      
      static getOrCreateInstance(element) {
        return this.getInstance(element) || new this(element);
      }
      
      show() {
        this._element.classList.add('show');
        this._element.style.display = 'block';
        document.body.classList.add('modal-open');
        
        // Create backdrop if it doesn't exist
        const backdrop = document.createElement('div');
        backdrop.className = 'modal-backdrop fade show';
        document.body.appendChild(backdrop);
      }
      
      hide() {
        this._element.classList.remove('show');
        setTimeout(() => {
          this._element.style.display = 'none';
          document.body.classList.remove('modal-open');
          
          // Remove backdrop
          const backdrop = document.querySelector('.modal-backdrop');
          if (backdrop) {
            backdrop.remove();
          }
        }, 150);
      }
    },
    Popover: class {
      constructor(element) {
        this._element = element;
      }
      show() {
        this._element.style.display = 'block';
      }
      hide() {
        this._element.style.display = 'none';
      }
    },
    ScrollSpy: class {
      constructor(element) {
        this._element = element;
      }
      refresh() {
        // 实现滚动监听逻辑
      }
    },
    Tab: class {
      constructor(element) {
        this._element = element;
      }
      show() {
        this._element.classList.add('active');
      }
      hide() {
        this._element.classList.remove('active');
      }
    },
    Toast: class {
      constructor(element) {
        this._element = element;
      }
      show() {
        this._element.style.display = 'block';
      }
      hide() {
        this._element.style.display = 'none';
      }
    },
    Tooltip: class {
      constructor(element) {
        this._element = element;
      }
      show() {
        this._element.style.display = 'block';
      }
      hide() {
        this._element.style.display = 'none';
      }
    }
  };

  return bootstrap;
}));